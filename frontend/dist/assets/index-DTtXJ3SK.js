var b2=t=>{throw TypeError(t)};var bS=(t,e,n)=>e.has(t)||b2("Cannot "+n);var ze=(t,e,n)=>(bS(t,e,"read from private field"),n?n.call(t):e.get(t)),fn=(t,e,n)=>e.has(t)?b2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ft=(t,e,n,r)=>(bS(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),qr=(t,e,n)=>(bS(t,e,"access private method"),n);var My=(t,e,n,r)=>({set _(i){Ft(t,e,i,n)},get _(){return ze(t,e,r)}});function ZK(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function R0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kF={exports:{}},N0={},PF={exports:{}},tn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sg=Symbol.for("react.element"),eY=Symbol.for("react.portal"),tY=Symbol.for("react.fragment"),nY=Symbol.for("react.strict_mode"),rY=Symbol.for("react.profiler"),iY=Symbol.for("react.provider"),sY=Symbol.for("react.context"),oY=Symbol.for("react.forward_ref"),aY=Symbol.for("react.suspense"),lY=Symbol.for("react.memo"),cY=Symbol.for("react.lazy"),S2=Symbol.iterator;function uY(t){return t===null||typeof t!="object"?null:(t=S2&&t[S2]||t["@@iterator"],typeof t=="function"?t:null)}var DF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IF=Object.assign,LF={};function _h(t,e,n){this.props=t,this.context=e,this.refs=LF,this.updater=n||DF}_h.prototype.isReactComponent={};_h.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_h.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function OF(){}OF.prototype=_h.prototype;function VM(t,e,n){this.props=t,this.context=e,this.refs=LF,this.updater=n||DF}var $M=VM.prototype=new OF;$M.constructor=VM;IF($M,_h.prototype);$M.isPureReactComponent=!0;var _2=Array.isArray,FF=Object.prototype.hasOwnProperty,WM={current:null},jF={key:!0,ref:!0,__self:!0,__source:!0};function UF(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)FF.call(e,r)&&!jF.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:sg,type:t,key:s,ref:o,props:i,_owner:WM.current}}function dY(t,e){return{$$typeof:sg,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function GM(t){return typeof t=="object"&&t!==null&&t.$$typeof===sg}function fY(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var E2=/\/+/g;function SS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fY(""+t.key):e.toString(36)}function Fv(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sg:case eY:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+SS(o,0):r,_2(i)?(n="",t!=null&&(n=t.replace(E2,"$&/")+"/"),Fv(i,e,n,"",function(c){return c})):i!=null&&(GM(i)&&(i=dY(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(E2,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",_2(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+SS(s,a);o+=Fv(s,e,n,l,i)}else if(l=uY(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+SS(s,a++),o+=Fv(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ty(t,e,n){if(t==null)return t;var r=[],i=0;return Fv(t,r,"","",function(s){return e.call(n,s,i++)}),r}function hY(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ei={current:null},jv={transition:null},pY={ReactCurrentDispatcher:Ei,ReactCurrentBatchConfig:jv,ReactCurrentOwner:WM};function zF(){throw Error("act(...) is not supported in production builds of React.")}tn.Children={map:Ty,forEach:function(t,e,n){Ty(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ty(t,function(){e++}),e},toArray:function(t){return Ty(t,function(e){return e})||[]},only:function(t){if(!GM(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tn.Component=_h;tn.Fragment=tY;tn.Profiler=rY;tn.PureComponent=VM;tn.StrictMode=nY;tn.Suspense=aY;tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pY;tn.act=zF;tn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=IF({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=WM.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)FF.call(e,l)&&!jF.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:sg,type:t.type,key:i,ref:s,props:r,_owner:o}};tn.createContext=function(t){return t={$$typeof:sY,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iY,_context:t},t.Consumer=t};tn.createElement=UF;tn.createFactory=function(t){var e=UF.bind(null,t);return e.type=t,e};tn.createRef=function(){return{current:null}};tn.forwardRef=function(t){return{$$typeof:oY,render:t}};tn.isValidElement=GM;tn.lazy=function(t){return{$$typeof:cY,_payload:{_status:-1,_result:t},_init:hY}};tn.memo=function(t,e){return{$$typeof:lY,type:t,compare:e===void 0?null:e}};tn.startTransition=function(t){var e=jv.transition;jv.transition={};try{t()}finally{jv.transition=e}};tn.unstable_act=zF;tn.useCallback=function(t,e){return Ei.current.useCallback(t,e)};tn.useContext=function(t){return Ei.current.useContext(t)};tn.useDebugValue=function(){};tn.useDeferredValue=function(t){return Ei.current.useDeferredValue(t)};tn.useEffect=function(t,e){return Ei.current.useEffect(t,e)};tn.useId=function(){return Ei.current.useId()};tn.useImperativeHandle=function(t,e,n){return Ei.current.useImperativeHandle(t,e,n)};tn.useInsertionEffect=function(t,e){return Ei.current.useInsertionEffect(t,e)};tn.useLayoutEffect=function(t,e){return Ei.current.useLayoutEffect(t,e)};tn.useMemo=function(t,e){return Ei.current.useMemo(t,e)};tn.useReducer=function(t,e,n){return Ei.current.useReducer(t,e,n)};tn.useRef=function(t){return Ei.current.useRef(t)};tn.useState=function(t){return Ei.current.useState(t)};tn.useSyncExternalStore=function(t,e,n){return Ei.current.useSyncExternalStore(t,e,n)};tn.useTransition=function(){return Ei.current.useTransition()};tn.version="18.3.1";PF.exports=tn;var b=PF.exports;const Re=R0(b),qM=ZK({__proto__:null,default:Re},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mY=b,gY=Symbol.for("react.element"),yY=Symbol.for("react.fragment"),vY=Object.prototype.hasOwnProperty,xY=mY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wY={key:!0,ref:!0,__self:!0,__source:!0};function BF(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)vY.call(e,r)&&!wY.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:gY,type:t,key:s,ref:o,props:i,_owner:xY.current}}N0.Fragment=yY;N0.jsx=BF;N0.jsxs=BF;kF.exports=N0;var h=kF.exports,HF={exports:{}},Es={},VF={exports:{}},$F={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,F){var D=O.length;O.push(F);e:for(;0<D;){var ie=D-1>>>1,$=O[ie];if(0<i($,F))O[ie]=F,O[D]=$,D=ie;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var F=O[0],D=O.pop();if(D!==F){O[0]=D;e:for(var ie=0,$=O.length,U=$>>>1;ie<U;){var Y=2*(ie+1)-1,oe=O[Y],ne=Y+1,Z=O[ne];if(0>i(oe,D))ne<$&&0>i(Z,oe)?(O[ie]=Z,O[ne]=D,ie=ne):(O[ie]=oe,O[Y]=D,ie=Y);else if(ne<$&&0>i(Z,D))O[ie]=Z,O[ne]=D,ie=ne;else break e}}return F}function i(O,F){var D=O.sortIndex-F.sortIndex;return D!==0?D:O.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,x=!1,w=!1,v=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(O){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=O)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function C(O){if(w=!1,E(O),!x)if(n(l)!==null)x=!0,q(A);else{var F=n(c);F!==null&&ee(C,F.startTime-O)}}function A(O,F){x=!1,w&&(w=!1,y(R),R=-1),m=!0;var D=p;try{for(E(F),d=n(l);d!==null&&(!(d.expirationTime>F)||O&&!L());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,p=d.priorityLevel;var $=ie(d.expirationTime<=F);F=t.unstable_now(),typeof $=="function"?d.callback=$:d===n(l)&&r(l),E(F)}else r(l);d=n(l)}if(d!==null)var U=!0;else{var Y=n(c);Y!==null&&ee(C,Y.startTime-F),U=!1}return U}finally{d=null,p=D,m=!1}}var T=!1,k=null,R=-1,P=5,M=-1;function L(){return!(t.unstable_now()-M<P)}function z(){if(k!==null){var O=t.unstable_now();M=O;var F=!0;try{F=k(!0,O)}finally{F?H():(T=!1,k=null)}}else T=!1}var H;if(typeof S=="function")H=function(){S(z)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,K=B.port2;B.port1.onmessage=z,H=function(){K.postMessage(null)}}else H=function(){v(z,0)};function q(O){k=O,T||(T=!0,H())}function ee(O,F){R=v(function(){O(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){x||m||(x=!0,q(A))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var D=p;p=F;try{return O()}finally{p=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,F){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var D=p;p=O;try{return F()}finally{p=D}},t.unstable_scheduleCallback=function(O,F,D){var ie=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?ie+D:ie):D=ie,O){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=D+$,O={id:u++,callback:F,priorityLevel:O,startTime:D,expirationTime:$,sortIndex:-1},D>ie?(O.sortIndex=D,e(c,O),n(l)===null&&O===n(c)&&(w?(y(R),R=-1):w=!0,ee(C,D-ie))):(O.sortIndex=$,e(l,O),x||m||(x=!0,q(A))),O},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(O){var F=p;return function(){var D=p;p=F;try{return O.apply(this,arguments)}finally{p=D}}}})($F);VF.exports=$F;var bY=VF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SY=b,Ss=bY;function Ze(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var WF=new Set,um={};function fd(t,e){Zf(t,e),Zf(t+"Capture",e)}function Zf(t,e){for(um[t]=e,t=0;t<e.length;t++)WF.add(e[t])}var el=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),z_=Object.prototype.hasOwnProperty,_Y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,C2={},M2={};function EY(t){return z_.call(M2,t)?!0:z_.call(C2,t)?!1:_Y.test(t)?M2[t]=!0:(C2[t]=!0,!1)}function CY(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function MY(t,e,n,r){if(e===null||typeof e>"u"||CY(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ci(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var zr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zr[t]=new Ci(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];zr[e]=new Ci(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zr[t]=new Ci(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zr[t]=new Ci(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zr[t]=new Ci(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zr[t]=new Ci(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zr[t]=new Ci(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zr[t]=new Ci(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zr[t]=new Ci(t,5,!1,t.toLowerCase(),null,!1,!1)});var XM=/[\-:]([a-z])/g;function KM(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(XM,KM);zr[e]=new Ci(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(XM,KM);zr[e]=new Ci(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(XM,KM);zr[e]=new Ci(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zr[t]=new Ci(t,1,!1,t.toLowerCase(),null,!1,!1)});zr.xlinkHref=new Ci("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zr[t]=new Ci(t,1,!1,t.toLowerCase(),null,!0,!0)});function YM(t,e,n,r){var i=zr.hasOwnProperty(e)?zr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(MY(e,n,i,r)&&(n=null),r||i===null?EY(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ll=SY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ay=Symbol.for("react.element"),df=Symbol.for("react.portal"),ff=Symbol.for("react.fragment"),JM=Symbol.for("react.strict_mode"),B_=Symbol.for("react.profiler"),GF=Symbol.for("react.provider"),qF=Symbol.for("react.context"),QM=Symbol.for("react.forward_ref"),H_=Symbol.for("react.suspense"),V_=Symbol.for("react.suspense_list"),ZM=Symbol.for("react.memo"),$l=Symbol.for("react.lazy"),XF=Symbol.for("react.offscreen"),T2=Symbol.iterator;function dp(t){return t===null||typeof t!="object"?null:(t=T2&&t[T2]||t["@@iterator"],typeof t=="function"?t:null)}var $n=Object.assign,_S;function Dp(t){if(_S===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_S=e&&e[1]||""}return`
`+_S+t}var ES=!1;function CS(t,e){if(!t||ES)return"";ES=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{ES=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Dp(t):""}function TY(t){switch(t.tag){case 5:return Dp(t.type);case 16:return Dp("Lazy");case 13:return Dp("Suspense");case 19:return Dp("SuspenseList");case 0:case 2:case 15:return t=CS(t.type,!1),t;case 11:return t=CS(t.type.render,!1),t;case 1:return t=CS(t.type,!0),t;default:return""}}function $_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ff:return"Fragment";case df:return"Portal";case B_:return"Profiler";case JM:return"StrictMode";case H_:return"Suspense";case V_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qF:return(t.displayName||"Context")+".Consumer";case GF:return(t._context.displayName||"Context")+".Provider";case QM:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ZM:return e=t.displayName||null,e!==null?e:$_(t.type)||"Memo";case $l:e=t._payload,t=t._init;try{return $_(t(e))}catch{}}return null}function AY(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $_(e);case 8:return e===JM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function KF(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RY(t){var e=KF(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ry(t){t._valueTracker||(t._valueTracker=RY(t))}function YF(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=KF(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function W_(t,e){var n=e.checked;return $n({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function A2(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Tc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function JF(t,e){e=e.checked,e!=null&&YM(t,"checked",e,!1)}function G_(t,e){JF(t,e);var n=Tc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?q_(t,e.type,n):e.hasOwnProperty("defaultValue")&&q_(t,e.type,Tc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function R2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function q_(t,e,n){(e!=="number"||vx(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ip=Array.isArray;function Tf(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Tc(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function X_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ze(91));return $n({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function N2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ze(92));if(Ip(n)){if(1<n.length)throw Error(Ze(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tc(n)}}function QF(t,e){var n=Tc(e.value),r=Tc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function k2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ZF(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function K_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ZF(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ny,e3=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ny=Ny||document.createElement("div"),Ny.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ny.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function dm(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $p={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NY=["Webkit","ms","Moz","O"];Object.keys($p).forEach(function(t){NY.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$p[e]=$p[t]})});function t3(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$p.hasOwnProperty(t)&&$p[t]?(""+e).trim():e+"px"}function n3(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=t3(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var kY=$n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Y_(t,e){if(e){if(kY[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ze(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ze(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ze(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ze(62))}}function J_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Q_=null;function eT(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Z_=null,Af=null,Rf=null;function P2(t){if(t=lg(t)){if(typeof Z_!="function")throw Error(Ze(280));var e=t.stateNode;e&&(e=L0(e),Z_(t.stateNode,t.type,e))}}function r3(t){Af?Rf?Rf.push(t):Rf=[t]:Af=t}function i3(){if(Af){var t=Af,e=Rf;if(Rf=Af=null,P2(t),e)for(t=0;t<e.length;t++)P2(e[t])}}function s3(t,e){return t(e)}function o3(){}var MS=!1;function a3(t,e,n){if(MS)return t(e,n);MS=!0;try{return s3(t,e,n)}finally{MS=!1,(Af!==null||Rf!==null)&&(o3(),i3())}}function fm(t,e){var n=t.stateNode;if(n===null)return null;var r=L0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ze(231,e,typeof n));return n}var eE=!1;if(el)try{var fp={};Object.defineProperty(fp,"passive",{get:function(){eE=!0}}),window.addEventListener("test",fp,fp),window.removeEventListener("test",fp,fp)}catch{eE=!1}function PY(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Wp=!1,xx=null,wx=!1,tE=null,DY={onError:function(t){Wp=!0,xx=t}};function IY(t,e,n,r,i,s,o,a,l){Wp=!1,xx=null,PY.apply(DY,arguments)}function LY(t,e,n,r,i,s,o,a,l){if(IY.apply(this,arguments),Wp){if(Wp){var c=xx;Wp=!1,xx=null}else throw Error(Ze(198));wx||(wx=!0,tE=c)}}function hd(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function l3(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function D2(t){if(hd(t)!==t)throw Error(Ze(188))}function OY(t){var e=t.alternate;if(!e){if(e=hd(t),e===null)throw Error(Ze(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return D2(i),t;if(s===r)return D2(i),e;s=s.sibling}throw Error(Ze(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ze(189))}}if(n.alternate!==r)throw Error(Ze(190))}if(n.tag!==3)throw Error(Ze(188));return n.stateNode.current===n?t:e}function c3(t){return t=OY(t),t!==null?u3(t):null}function u3(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=u3(t);if(e!==null)return e;t=t.sibling}return null}var d3=Ss.unstable_scheduleCallback,I2=Ss.unstable_cancelCallback,FY=Ss.unstable_shouldYield,jY=Ss.unstable_requestPaint,er=Ss.unstable_now,UY=Ss.unstable_getCurrentPriorityLevel,tT=Ss.unstable_ImmediatePriority,f3=Ss.unstable_UserBlockingPriority,bx=Ss.unstable_NormalPriority,zY=Ss.unstable_LowPriority,h3=Ss.unstable_IdlePriority,k0=null,ia=null;function BY(t){if(ia&&typeof ia.onCommitFiberRoot=="function")try{ia.onCommitFiberRoot(k0,t,void 0,(t.current.flags&128)===128)}catch{}}var _o=Math.clz32?Math.clz32:$Y,HY=Math.log,VY=Math.LN2;function $Y(t){return t>>>=0,t===0?32:31-(HY(t)/VY|0)|0}var ky=64,Py=4194304;function Lp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sx(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Lp(a):(s&=o,s!==0&&(r=Lp(s)))}else o=n&~i,o!==0?r=Lp(o):s!==0&&(r=Lp(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_o(e),i=1<<n,r|=t[n],e&=~i;return r}function WY(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GY(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-_o(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=WY(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function nE(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function p3(){var t=ky;return ky<<=1,!(ky&4194240)&&(ky=64),t}function TS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function og(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_o(e),t[e]=n}function qY(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-_o(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function nT(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_o(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var wn=0;function m3(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var g3,rT,y3,v3,x3,rE=!1,Dy=[],dc=null,fc=null,hc=null,hm=new Map,pm=new Map,Kl=[],XY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function L2(t,e){switch(t){case"focusin":case"focusout":dc=null;break;case"dragenter":case"dragleave":fc=null;break;case"mouseover":case"mouseout":hc=null;break;case"pointerover":case"pointerout":hm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pm.delete(e.pointerId)}}function hp(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=lg(e),e!==null&&rT(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function KY(t,e,n,r,i){switch(e){case"focusin":return dc=hp(dc,t,e,n,r,i),!0;case"dragenter":return fc=hp(fc,t,e,n,r,i),!0;case"mouseover":return hc=hp(hc,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return hm.set(s,hp(hm.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,pm.set(s,hp(pm.get(s)||null,t,e,n,r,i)),!0}return!1}function w3(t){var e=Cu(t.target);if(e!==null){var n=hd(e);if(n!==null){if(e=n.tag,e===13){if(e=l3(n),e!==null){t.blockedOn=e,x3(t.priority,function(){y3(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=iE(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Q_=r,n.target.dispatchEvent(r),Q_=null}else return e=lg(n),e!==null&&rT(e),t.blockedOn=n,!1;e.shift()}return!0}function O2(t,e,n){Uv(t)&&n.delete(e)}function YY(){rE=!1,dc!==null&&Uv(dc)&&(dc=null),fc!==null&&Uv(fc)&&(fc=null),hc!==null&&Uv(hc)&&(hc=null),hm.forEach(O2),pm.forEach(O2)}function pp(t,e){t.blockedOn===e&&(t.blockedOn=null,rE||(rE=!0,Ss.unstable_scheduleCallback(Ss.unstable_NormalPriority,YY)))}function mm(t){function e(i){return pp(i,t)}if(0<Dy.length){pp(Dy[0],t);for(var n=1;n<Dy.length;n++){var r=Dy[n];r.blockedOn===t&&(r.blockedOn=null)}}for(dc!==null&&pp(dc,t),fc!==null&&pp(fc,t),hc!==null&&pp(hc,t),hm.forEach(e),pm.forEach(e),n=0;n<Kl.length;n++)r=Kl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Kl.length&&(n=Kl[0],n.blockedOn===null);)w3(n),n.blockedOn===null&&Kl.shift()}var Nf=ll.ReactCurrentBatchConfig,_x=!0;function JY(t,e,n,r){var i=wn,s=Nf.transition;Nf.transition=null;try{wn=1,iT(t,e,n,r)}finally{wn=i,Nf.transition=s}}function QY(t,e,n,r){var i=wn,s=Nf.transition;Nf.transition=null;try{wn=4,iT(t,e,n,r)}finally{wn=i,Nf.transition=s}}function iT(t,e,n,r){if(_x){var i=iE(t,e,n,r);if(i===null)FS(t,e,r,Ex,n),L2(t,r);else if(KY(i,t,e,n,r))r.stopPropagation();else if(L2(t,r),e&4&&-1<XY.indexOf(t)){for(;i!==null;){var s=lg(i);if(s!==null&&g3(s),s=iE(t,e,n,r),s===null&&FS(t,e,r,Ex,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else FS(t,e,r,null,n)}}var Ex=null;function iE(t,e,n,r){if(Ex=null,t=eT(r),t=Cu(t),t!==null)if(e=hd(t),e===null)t=null;else if(n=e.tag,n===13){if(t=l3(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ex=t,null}function b3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UY()){case tT:return 1;case f3:return 4;case bx:case zY:return 16;case h3:return 536870912;default:return 16}default:return 16}}var ic=null,sT=null,zv=null;function S3(){if(zv)return zv;var t,e=sT,n=e.length,r,i="value"in ic?ic.value:ic.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return zv=i.slice(t,1<r?1-r:void 0)}function Bv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Iy(){return!0}function F2(){return!1}function Cs(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Iy:F2,this.isPropagationStopped=F2,this}return $n(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Iy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Iy)},persist:function(){},isPersistent:Iy}),e}var Eh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oT=Cs(Eh),ag=$n({},Eh,{view:0,detail:0}),ZY=Cs(ag),AS,RS,mp,P0=$n({},ag,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aT,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mp&&(mp&&t.type==="mousemove"?(AS=t.screenX-mp.screenX,RS=t.screenY-mp.screenY):RS=AS=0,mp=t),AS)},movementY:function(t){return"movementY"in t?t.movementY:RS}}),j2=Cs(P0),eJ=$n({},P0,{dataTransfer:0}),tJ=Cs(eJ),nJ=$n({},ag,{relatedTarget:0}),NS=Cs(nJ),rJ=$n({},Eh,{animationName:0,elapsedTime:0,pseudoElement:0}),iJ=Cs(rJ),sJ=$n({},Eh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oJ=Cs(sJ),aJ=$n({},Eh,{data:0}),U2=Cs(aJ),lJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dJ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uJ[t])?!!e[t]:!1}function aT(){return dJ}var fJ=$n({},ag,{key:function(t){if(t.key){var e=lJ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Bv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cJ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aT,charCode:function(t){return t.type==="keypress"?Bv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Bv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hJ=Cs(fJ),pJ=$n({},P0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z2=Cs(pJ),mJ=$n({},ag,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aT}),gJ=Cs(mJ),yJ=$n({},Eh,{propertyName:0,elapsedTime:0,pseudoElement:0}),vJ=Cs(yJ),xJ=$n({},P0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wJ=Cs(xJ),bJ=[9,13,27,32],lT=el&&"CompositionEvent"in window,Gp=null;el&&"documentMode"in document&&(Gp=document.documentMode);var SJ=el&&"TextEvent"in window&&!Gp,_3=el&&(!lT||Gp&&8<Gp&&11>=Gp),B2=" ",H2=!1;function E3(t,e){switch(t){case"keyup":return bJ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hf=!1;function _J(t,e){switch(t){case"compositionend":return C3(e);case"keypress":return e.which!==32?null:(H2=!0,B2);case"textInput":return t=e.data,t===B2&&H2?null:t;default:return null}}function EJ(t,e){if(hf)return t==="compositionend"||!lT&&E3(t,e)?(t=S3(),zv=sT=ic=null,hf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _3&&e.locale!=="ko"?null:e.data;default:return null}}var CJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function V2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!CJ[t.type]:e==="textarea"}function M3(t,e,n,r){r3(r),e=Cx(e,"onChange"),0<e.length&&(n=new oT("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var qp=null,gm=null;function MJ(t){F3(t,0)}function D0(t){var e=gf(t);if(YF(e))return t}function TJ(t,e){if(t==="change")return e}var T3=!1;if(el){var kS;if(el){var PS="oninput"in document;if(!PS){var $2=document.createElement("div");$2.setAttribute("oninput","return;"),PS=typeof $2.oninput=="function"}kS=PS}else kS=!1;T3=kS&&(!document.documentMode||9<document.documentMode)}function W2(){qp&&(qp.detachEvent("onpropertychange",A3),gm=qp=null)}function A3(t){if(t.propertyName==="value"&&D0(gm)){var e=[];M3(e,gm,t,eT(t)),a3(MJ,e)}}function AJ(t,e,n){t==="focusin"?(W2(),qp=e,gm=n,qp.attachEvent("onpropertychange",A3)):t==="focusout"&&W2()}function RJ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return D0(gm)}function NJ(t,e){if(t==="click")return D0(e)}function kJ(t,e){if(t==="input"||t==="change")return D0(e)}function PJ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var To=typeof Object.is=="function"?Object.is:PJ;function ym(t,e){if(To(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!z_.call(e,i)||!To(t[i],e[i]))return!1}return!0}function G2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function q2(t,e){var n=G2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=G2(n)}}function R3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?R3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function N3(){for(var t=window,e=vx();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vx(t.document)}return e}function cT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DJ(t){var e=N3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&R3(n.ownerDocument.documentElement,n)){if(r!==null&&cT(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=q2(n,s);var o=q2(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IJ=el&&"documentMode"in document&&11>=document.documentMode,pf=null,sE=null,Xp=null,oE=!1;function X2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oE||pf==null||pf!==vx(r)||(r=pf,"selectionStart"in r&&cT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xp&&ym(Xp,r)||(Xp=r,r=Cx(sE,"onSelect"),0<r.length&&(e=new oT("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=pf)))}function Ly(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mf={animationend:Ly("Animation","AnimationEnd"),animationiteration:Ly("Animation","AnimationIteration"),animationstart:Ly("Animation","AnimationStart"),transitionend:Ly("Transition","TransitionEnd")},DS={},k3={};el&&(k3=document.createElement("div").style,"AnimationEvent"in window||(delete mf.animationend.animation,delete mf.animationiteration.animation,delete mf.animationstart.animation),"TransitionEvent"in window||delete mf.transitionend.transition);function I0(t){if(DS[t])return DS[t];if(!mf[t])return t;var e=mf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in k3)return DS[t]=e[n];return t}var P3=I0("animationend"),D3=I0("animationiteration"),I3=I0("animationstart"),L3=I0("transitionend"),O3=new Map,K2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oc(t,e){O3.set(t,e),fd(e,[t])}for(var IS=0;IS<K2.length;IS++){var LS=K2[IS],LJ=LS.toLowerCase(),OJ=LS[0].toUpperCase()+LS.slice(1);Oc(LJ,"on"+OJ)}Oc(P3,"onAnimationEnd");Oc(D3,"onAnimationIteration");Oc(I3,"onAnimationStart");Oc("dblclick","onDoubleClick");Oc("focusin","onFocus");Oc("focusout","onBlur");Oc(L3,"onTransitionEnd");Zf("onMouseEnter",["mouseout","mouseover"]);Zf("onMouseLeave",["mouseout","mouseover"]);Zf("onPointerEnter",["pointerout","pointerover"]);Zf("onPointerLeave",["pointerout","pointerover"]);fd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fd("onBeforeInput",["compositionend","keypress","textInput","paste"]);fd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Op="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Op));function Y2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LY(r,e,void 0,t),t.currentTarget=null}function F3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Y2(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Y2(i,a,c),s=l}}}if(wx)throw t=tE,wx=!1,tE=null,t}function Ln(t,e){var n=e[dE];n===void 0&&(n=e[dE]=new Set);var r=t+"__bubble";n.has(r)||(j3(e,t,2,!1),n.add(r))}function OS(t,e,n){var r=0;e&&(r|=4),j3(n,t,r,e)}var Oy="_reactListening"+Math.random().toString(36).slice(2);function vm(t){if(!t[Oy]){t[Oy]=!0,WF.forEach(function(n){n!=="selectionchange"&&(FJ.has(n)||OS(n,!1,t),OS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Oy]||(e[Oy]=!0,OS("selectionchange",!1,e))}}function j3(t,e,n,r){switch(b3(e)){case 1:var i=JY;break;case 4:i=QY;break;default:i=iT}n=i.bind(null,e,n,t),i=void 0,!eE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function FS(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Cu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}a3(function(){var c=s,u=eT(n),d=[];e:{var p=O3.get(t);if(p!==void 0){var m=oT,x=t;switch(t){case"keypress":if(Bv(n)===0)break e;case"keydown":case"keyup":m=hJ;break;case"focusin":x="focus",m=NS;break;case"focusout":x="blur",m=NS;break;case"beforeblur":case"afterblur":m=NS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=j2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=tJ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=gJ;break;case P3:case D3:case I3:m=iJ;break;case L3:m=vJ;break;case"scroll":m=ZY;break;case"wheel":m=wJ;break;case"copy":case"cut":case"paste":m=oJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=z2}var w=(e&4)!==0,v=!w&&t==="scroll",y=w?p!==null?p+"Capture":null:p;w=[];for(var S=c,E;S!==null;){E=S;var C=E.stateNode;if(E.tag===5&&C!==null&&(E=C,y!==null&&(C=fm(S,y),C!=null&&w.push(xm(S,C,E)))),v)break;S=S.return}0<w.length&&(p=new m(p,x,null,n,u),d.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Q_&&(x=n.relatedTarget||n.fromElement)&&(Cu(x)||x[tl]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(x=n.relatedTarget||n.toElement,m=c,x=x?Cu(x):null,x!==null&&(v=hd(x),x!==v||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=c),m!==x)){if(w=j2,C="onMouseLeave",y="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(w=z2,C="onPointerLeave",y="onPointerEnter",S="pointer"),v=m==null?p:gf(m),E=x==null?p:gf(x),p=new w(C,S+"leave",m,n,u),p.target=v,p.relatedTarget=E,C=null,Cu(u)===c&&(w=new w(y,S+"enter",x,n,u),w.target=E,w.relatedTarget=v,C=w),v=C,m&&x)t:{for(w=m,y=x,S=0,E=w;E;E=Fd(E))S++;for(E=0,C=y;C;C=Fd(C))E++;for(;0<S-E;)w=Fd(w),S--;for(;0<E-S;)y=Fd(y),E--;for(;S--;){if(w===y||y!==null&&w===y.alternate)break t;w=Fd(w),y=Fd(y)}w=null}else w=null;m!==null&&J2(d,p,m,w,!1),x!==null&&v!==null&&J2(d,v,x,w,!0)}}e:{if(p=c?gf(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var A=TJ;else if(V2(p))if(T3)A=kJ;else{A=RJ;var T=AJ}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=NJ);if(A&&(A=A(t,c))){M3(d,A,n,u);break e}T&&T(t,p,c),t==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&q_(p,"number",p.value)}switch(T=c?gf(c):window,t){case"focusin":(V2(T)||T.contentEditable==="true")&&(pf=T,sE=c,Xp=null);break;case"focusout":Xp=sE=pf=null;break;case"mousedown":oE=!0;break;case"contextmenu":case"mouseup":case"dragend":oE=!1,X2(d,n,u);break;case"selectionchange":if(IJ)break;case"keydown":case"keyup":X2(d,n,u)}var k;if(lT)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else hf?E3(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(_3&&n.locale!=="ko"&&(hf||R!=="onCompositionStart"?R==="onCompositionEnd"&&hf&&(k=S3()):(ic=u,sT="value"in ic?ic.value:ic.textContent,hf=!0)),T=Cx(c,R),0<T.length&&(R=new U2(R,t,null,n,u),d.push({event:R,listeners:T}),k?R.data=k:(k=C3(n),k!==null&&(R.data=k)))),(k=SJ?_J(t,n):EJ(t,n))&&(c=Cx(c,"onBeforeInput"),0<c.length&&(u=new U2("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=k))}F3(d,e)})}function xm(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cx(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=fm(t,n),s!=null&&r.unshift(xm(t,s,i)),s=fm(t,e),s!=null&&r.push(xm(t,s,i))),t=t.return}return r}function Fd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function J2(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=fm(n,s),l!=null&&o.unshift(xm(n,l,a))):i||(l=fm(n,s),l!=null&&o.push(xm(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var jJ=/\r\n?/g,UJ=/\u0000|\uFFFD/g;function Q2(t){return(typeof t=="string"?t:""+t).replace(jJ,`
`).replace(UJ,"")}function Fy(t,e,n){if(e=Q2(e),Q2(t)!==e&&n)throw Error(Ze(425))}function Mx(){}var aE=null,lE=null;function cE(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var uE=typeof setTimeout=="function"?setTimeout:void 0,zJ=typeof clearTimeout=="function"?clearTimeout:void 0,Z2=typeof Promise=="function"?Promise:void 0,BJ=typeof queueMicrotask=="function"?queueMicrotask:typeof Z2<"u"?function(t){return Z2.resolve(null).then(t).catch(HJ)}:uE;function HJ(t){setTimeout(function(){throw t})}function jS(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),mm(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);mm(e)}function pc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function eP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ch=Math.random().toString(36).slice(2),Qo="__reactFiber$"+Ch,wm="__reactProps$"+Ch,tl="__reactContainer$"+Ch,dE="__reactEvents$"+Ch,VJ="__reactListeners$"+Ch,$J="__reactHandles$"+Ch;function Cu(t){var e=t[Qo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tl]||n[Qo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=eP(t);t!==null;){if(n=t[Qo])return n;t=eP(t)}return e}t=n,n=t.parentNode}return null}function lg(t){return t=t[Qo]||t[tl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ze(33))}function L0(t){return t[wm]||null}var fE=[],yf=-1;function Fc(t){return{current:t}}function On(t){0>yf||(t.current=fE[yf],fE[yf]=null,yf--)}function kn(t,e){yf++,fE[yf]=t.current,t.current=e}var Ac={},si=Fc(Ac),Bi=Fc(!1),Xu=Ac;function eh(t,e){var n=t.type.contextTypes;if(!n)return Ac;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Hi(t){return t=t.childContextTypes,t!=null}function Tx(){On(Bi),On(si)}function tP(t,e,n){if(si.current!==Ac)throw Error(Ze(168));kn(si,e),kn(Bi,n)}function U3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ze(108,AY(t)||"Unknown",i));return $n({},n,r)}function Ax(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ac,Xu=si.current,kn(si,t),kn(Bi,Bi.current),!0}function nP(t,e,n){var r=t.stateNode;if(!r)throw Error(Ze(169));n?(t=U3(t,e,Xu),r.__reactInternalMemoizedMergedChildContext=t,On(Bi),On(si),kn(si,t)):On(Bi),kn(Bi,n)}var za=null,O0=!1,US=!1;function z3(t){za===null?za=[t]:za.push(t)}function WJ(t){O0=!0,z3(t)}function jc(){if(!US&&za!==null){US=!0;var t=0,e=wn;try{var n=za;for(wn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}za=null,O0=!1}catch(i){throw za!==null&&(za=za.slice(t+1)),d3(tT,jc),i}finally{wn=e,US=!1}}return null}var vf=[],xf=0,Rx=null,Nx=0,Vs=[],$s=0,Ku=null,Va=1,$a="";function gu(t,e){vf[xf++]=Nx,vf[xf++]=Rx,Rx=t,Nx=e}function B3(t,e,n){Vs[$s++]=Va,Vs[$s++]=$a,Vs[$s++]=Ku,Ku=t;var r=Va;t=$a;var i=32-_o(r)-1;r&=~(1<<i),n+=1;var s=32-_o(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Va=1<<32-_o(e)+i|n<<i|r,$a=s+t}else Va=1<<s|n<<i|r,$a=t}function uT(t){t.return!==null&&(gu(t,1),B3(t,1,0))}function dT(t){for(;t===Rx;)Rx=vf[--xf],vf[xf]=null,Nx=vf[--xf],vf[xf]=null;for(;t===Ku;)Ku=Vs[--$s],Vs[$s]=null,$a=Vs[--$s],Vs[$s]=null,Va=Vs[--$s],Vs[$s]=null}var ys=null,ms=null,jn=!1,vo=null;function H3(t,e){var n=Xs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ys=t,ms=pc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ys=t,ms=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ku!==null?{id:Va,overflow:$a}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ys=t,ms=null,!0):!1;default:return!1}}function hE(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pE(t){if(jn){var e=ms;if(e){var n=e;if(!rP(t,e)){if(hE(t))throw Error(Ze(418));e=pc(n.nextSibling);var r=ys;e&&rP(t,e)?H3(r,n):(t.flags=t.flags&-4097|2,jn=!1,ys=t)}}else{if(hE(t))throw Error(Ze(418));t.flags=t.flags&-4097|2,jn=!1,ys=t}}}function iP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ys=t}function jy(t){if(t!==ys)return!1;if(!jn)return iP(t),jn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cE(t.type,t.memoizedProps)),e&&(e=ms)){if(hE(t))throw V3(),Error(Ze(418));for(;e;)H3(t,e),e=pc(e.nextSibling)}if(iP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ze(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ms=pc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ms=null}}else ms=ys?pc(t.stateNode.nextSibling):null;return!0}function V3(){for(var t=ms;t;)t=pc(t.nextSibling)}function th(){ms=ys=null,jn=!1}function fT(t){vo===null?vo=[t]:vo.push(t)}var GJ=ll.ReactCurrentBatchConfig;function gp(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ze(309));var r=n.stateNode}if(!r)throw Error(Ze(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ze(284));if(!n._owner)throw Error(Ze(290,t))}return t}function Uy(t,e){throw t=Object.prototype.toString.call(e),Error(Ze(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sP(t){var e=t._init;return e(t._payload)}function $3(t){function e(y,S){if(t){var E=y.deletions;E===null?(y.deletions=[S],y.flags|=16):E.push(S)}}function n(y,S){if(!t)return null;for(;S!==null;)e(y,S),S=S.sibling;return null}function r(y,S){for(y=new Map;S!==null;)S.key!==null?y.set(S.key,S):y.set(S.index,S),S=S.sibling;return y}function i(y,S){return y=vc(y,S),y.index=0,y.sibling=null,y}function s(y,S,E){return y.index=E,t?(E=y.alternate,E!==null?(E=E.index,E<S?(y.flags|=2,S):E):(y.flags|=2,S)):(y.flags|=1048576,S)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,S,E,C){return S===null||S.tag!==6?(S=GS(E,y.mode,C),S.return=y,S):(S=i(S,E),S.return=y,S)}function l(y,S,E,C){var A=E.type;return A===ff?u(y,S,E.props.children,C,E.key):S!==null&&(S.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===$l&&sP(A)===S.type)?(C=i(S,E.props),C.ref=gp(y,S,E),C.return=y,C):(C=Xv(E.type,E.key,E.props,null,y.mode,C),C.ref=gp(y,S,E),C.return=y,C)}function c(y,S,E,C){return S===null||S.tag!==4||S.stateNode.containerInfo!==E.containerInfo||S.stateNode.implementation!==E.implementation?(S=qS(E,y.mode,C),S.return=y,S):(S=i(S,E.children||[]),S.return=y,S)}function u(y,S,E,C,A){return S===null||S.tag!==7?(S=zu(E,y.mode,C,A),S.return=y,S):(S=i(S,E),S.return=y,S)}function d(y,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return S=GS(""+S,y.mode,E),S.return=y,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ay:return E=Xv(S.type,S.key,S.props,null,y.mode,E),E.ref=gp(y,null,S),E.return=y,E;case df:return S=qS(S,y.mode,E),S.return=y,S;case $l:var C=S._init;return d(y,C(S._payload),E)}if(Ip(S)||dp(S))return S=zu(S,y.mode,E,null),S.return=y,S;Uy(y,S)}return null}function p(y,S,E,C){var A=S!==null?S.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return A!==null?null:a(y,S,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ay:return E.key===A?l(y,S,E,C):null;case df:return E.key===A?c(y,S,E,C):null;case $l:return A=E._init,p(y,S,A(E._payload),C)}if(Ip(E)||dp(E))return A!==null?null:u(y,S,E,C,null);Uy(y,E)}return null}function m(y,S,E,C,A){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(E)||null,a(S,y,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ay:return y=y.get(C.key===null?E:C.key)||null,l(S,y,C,A);case df:return y=y.get(C.key===null?E:C.key)||null,c(S,y,C,A);case $l:var T=C._init;return m(y,S,E,T(C._payload),A)}if(Ip(C)||dp(C))return y=y.get(E)||null,u(S,y,C,A,null);Uy(S,C)}return null}function x(y,S,E,C){for(var A=null,T=null,k=S,R=S=0,P=null;k!==null&&R<E.length;R++){k.index>R?(P=k,k=null):P=k.sibling;var M=p(y,k,E[R],C);if(M===null){k===null&&(k=P);break}t&&k&&M.alternate===null&&e(y,k),S=s(M,S,R),T===null?A=M:T.sibling=M,T=M,k=P}if(R===E.length)return n(y,k),jn&&gu(y,R),A;if(k===null){for(;R<E.length;R++)k=d(y,E[R],C),k!==null&&(S=s(k,S,R),T===null?A=k:T.sibling=k,T=k);return jn&&gu(y,R),A}for(k=r(y,k);R<E.length;R++)P=m(k,y,R,E[R],C),P!==null&&(t&&P.alternate!==null&&k.delete(P.key===null?R:P.key),S=s(P,S,R),T===null?A=P:T.sibling=P,T=P);return t&&k.forEach(function(L){return e(y,L)}),jn&&gu(y,R),A}function w(y,S,E,C){var A=dp(E);if(typeof A!="function")throw Error(Ze(150));if(E=A.call(E),E==null)throw Error(Ze(151));for(var T=A=null,k=S,R=S=0,P=null,M=E.next();k!==null&&!M.done;R++,M=E.next()){k.index>R?(P=k,k=null):P=k.sibling;var L=p(y,k,M.value,C);if(L===null){k===null&&(k=P);break}t&&k&&L.alternate===null&&e(y,k),S=s(L,S,R),T===null?A=L:T.sibling=L,T=L,k=P}if(M.done)return n(y,k),jn&&gu(y,R),A;if(k===null){for(;!M.done;R++,M=E.next())M=d(y,M.value,C),M!==null&&(S=s(M,S,R),T===null?A=M:T.sibling=M,T=M);return jn&&gu(y,R),A}for(k=r(y,k);!M.done;R++,M=E.next())M=m(k,y,R,M.value,C),M!==null&&(t&&M.alternate!==null&&k.delete(M.key===null?R:M.key),S=s(M,S,R),T===null?A=M:T.sibling=M,T=M);return t&&k.forEach(function(z){return e(y,z)}),jn&&gu(y,R),A}function v(y,S,E,C){if(typeof E=="object"&&E!==null&&E.type===ff&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ay:e:{for(var A=E.key,T=S;T!==null;){if(T.key===A){if(A=E.type,A===ff){if(T.tag===7){n(y,T.sibling),S=i(T,E.props.children),S.return=y,y=S;break e}}else if(T.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===$l&&sP(A)===T.type){n(y,T.sibling),S=i(T,E.props),S.ref=gp(y,T,E),S.return=y,y=S;break e}n(y,T);break}else e(y,T);T=T.sibling}E.type===ff?(S=zu(E.props.children,y.mode,C,E.key),S.return=y,y=S):(C=Xv(E.type,E.key,E.props,null,y.mode,C),C.ref=gp(y,S,E),C.return=y,y=C)}return o(y);case df:e:{for(T=E.key;S!==null;){if(S.key===T)if(S.tag===4&&S.stateNode.containerInfo===E.containerInfo&&S.stateNode.implementation===E.implementation){n(y,S.sibling),S=i(S,E.children||[]),S.return=y,y=S;break e}else{n(y,S);break}else e(y,S);S=S.sibling}S=qS(E,y.mode,C),S.return=y,y=S}return o(y);case $l:return T=E._init,v(y,S,T(E._payload),C)}if(Ip(E))return x(y,S,E,C);if(dp(E))return w(y,S,E,C);Uy(y,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,S!==null&&S.tag===6?(n(y,S.sibling),S=i(S,E),S.return=y,y=S):(n(y,S),S=GS(E,y.mode,C),S.return=y,y=S),o(y)):n(y,S)}return v}var nh=$3(!0),W3=$3(!1),kx=Fc(null),Px=null,wf=null,hT=null;function pT(){hT=wf=Px=null}function mT(t){var e=kx.current;On(kx),t._currentValue=e}function mE(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function kf(t,e){Px=t,hT=wf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zi=!0),t.firstContext=null)}function Zs(t){var e=t._currentValue;if(hT!==t)if(t={context:t,memoizedValue:e,next:null},wf===null){if(Px===null)throw Error(Ze(308));wf=t,Px.dependencies={lanes:0,firstContext:t}}else wf=wf.next=t;return e}var Mu=null;function gT(t){Mu===null?Mu=[t]:Mu.push(t)}function G3(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,gT(e)):(n.next=i.next,i.next=n),e.interleaved=n,nl(t,r)}function nl(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wl=!1;function yT(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function q3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ka(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,un&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,nl(t,n)}return i=r.interleaved,i===null?(e.next=e,gT(r)):(e.next=i.next,i.next=e),r.interleaved=e,nl(t,n)}function Hv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nT(t,n)}}function oP(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dx(t,e,n,r){var i=t.updateQueue;Wl=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,w=a;switch(p=e,m=n,w.tag){case 1:if(x=w.payload,typeof x=="function"){d=x.call(m,d,p);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,p=typeof x=="function"?x.call(m,d,p):x,p==null)break e;d=$n({},d,p);break e;case 2:Wl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ju|=o,t.lanes=o,t.memoizedState=d}}function aP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ze(191,i));i.call(r)}}}var cg={},sa=Fc(cg),bm=Fc(cg),Sm=Fc(cg);function Tu(t){if(t===cg)throw Error(Ze(174));return t}function vT(t,e){switch(kn(Sm,e),kn(bm,t),kn(sa,cg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:K_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=K_(e,t)}On(sa),kn(sa,e)}function rh(){On(sa),On(bm),On(Sm)}function X3(t){Tu(Sm.current);var e=Tu(sa.current),n=K_(e,t.type);e!==n&&(kn(bm,t),kn(sa,n))}function xT(t){bm.current===t&&(On(sa),On(bm))}var Hn=Fc(0);function Ix(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zS=[];function wT(){for(var t=0;t<zS.length;t++)zS[t]._workInProgressVersionPrimary=null;zS.length=0}var Vv=ll.ReactCurrentDispatcher,BS=ll.ReactCurrentBatchConfig,Yu=0,Vn=null,dr=null,wr=null,Lx=!1,Kp=!1,_m=0,qJ=0;function Xr(){throw Error(Ze(321))}function bT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!To(t[n],e[n]))return!1;return!0}function ST(t,e,n,r,i,s){if(Yu=s,Vn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vv.current=t===null||t.memoizedState===null?JJ:QJ,t=n(r,i),Kp){s=0;do{if(Kp=!1,_m=0,25<=s)throw Error(Ze(301));s+=1,wr=dr=null,e.updateQueue=null,Vv.current=ZJ,t=n(r,i)}while(Kp)}if(Vv.current=Ox,e=dr!==null&&dr.next!==null,Yu=0,wr=dr=Vn=null,Lx=!1,e)throw Error(Ze(300));return t}function _T(){var t=_m!==0;return _m=0,t}function Vo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wr===null?Vn.memoizedState=wr=t:wr=wr.next=t,wr}function eo(){if(dr===null){var t=Vn.alternate;t=t!==null?t.memoizedState:null}else t=dr.next;var e=wr===null?Vn.memoizedState:wr.next;if(e!==null)wr=e,dr=t;else{if(t===null)throw Error(Ze(310));dr=t,t={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},wr===null?Vn.memoizedState=wr=t:wr=wr.next=t}return wr}function Em(t,e){return typeof e=="function"?e(t):e}function HS(t){var e=eo(),n=e.queue;if(n===null)throw Error(Ze(311));n.lastRenderedReducer=t;var r=dr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Yu&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Vn.lanes|=u,Ju|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,To(r,e.memoizedState)||(zi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Vn.lanes|=s,Ju|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function VS(t){var e=eo(),n=e.queue;if(n===null)throw Error(Ze(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);To(s,e.memoizedState)||(zi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function K3(){}function Y3(t,e){var n=Vn,r=eo(),i=e(),s=!To(r.memoizedState,i);if(s&&(r.memoizedState=i,zi=!0),r=r.queue,ET(Z3.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||wr!==null&&wr.memoizedState.tag&1){if(n.flags|=2048,Cm(9,Q3.bind(null,n,r,i,e),void 0,null),_r===null)throw Error(Ze(349));Yu&30||J3(n,e,i)}return i}function J3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Vn.updateQueue,e===null?(e={lastEffect:null,stores:null},Vn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Q3(t,e,n,r){e.value=n,e.getSnapshot=r,ej(e)&&tj(t)}function Z3(t,e,n){return n(function(){ej(e)&&tj(t)})}function ej(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!To(t,n)}catch{return!0}}function tj(t){var e=nl(t,1);e!==null&&Eo(e,t,1,-1)}function lP(t){var e=Vo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Em,lastRenderedState:t},e.queue=t,t=t.dispatch=YJ.bind(null,Vn,t),[e.memoizedState,t]}function Cm(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Vn.updateQueue,e===null?(e={lastEffect:null,stores:null},Vn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function nj(){return eo().memoizedState}function $v(t,e,n,r){var i=Vo();Vn.flags|=t,i.memoizedState=Cm(1|e,n,void 0,r===void 0?null:r)}function F0(t,e,n,r){var i=eo();r=r===void 0?null:r;var s=void 0;if(dr!==null){var o=dr.memoizedState;if(s=o.destroy,r!==null&&bT(r,o.deps)){i.memoizedState=Cm(e,n,s,r);return}}Vn.flags|=t,i.memoizedState=Cm(1|e,n,s,r)}function cP(t,e){return $v(8390656,8,t,e)}function ET(t,e){return F0(2048,8,t,e)}function rj(t,e){return F0(4,2,t,e)}function ij(t,e){return F0(4,4,t,e)}function sj(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oj(t,e,n){return n=n!=null?n.concat([t]):null,F0(4,4,sj.bind(null,e,t),n)}function CT(){}function aj(t,e){var n=eo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bT(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lj(t,e){var n=eo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bT(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cj(t,e,n){return Yu&21?(To(n,e)||(n=p3(),Vn.lanes|=n,Ju|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zi=!0),t.memoizedState=n)}function XJ(t,e){var n=wn;wn=n!==0&&4>n?n:4,t(!0);var r=BS.transition;BS.transition={};try{t(!1),e()}finally{wn=n,BS.transition=r}}function uj(){return eo().memoizedState}function KJ(t,e,n){var r=yc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dj(t))fj(e,n);else if(n=G3(t,e,n,r),n!==null){var i=xi();Eo(n,t,r,i),hj(n,e,r)}}function YJ(t,e,n){var r=yc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dj(t))fj(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,To(a,o)){var l=e.interleaved;l===null?(i.next=i,gT(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=G3(t,e,i,r),n!==null&&(i=xi(),Eo(n,t,r,i),hj(n,e,r))}}function dj(t){var e=t.alternate;return t===Vn||e!==null&&e===Vn}function fj(t,e){Kp=Lx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hj(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,nT(t,n)}}var Ox={readContext:Zs,useCallback:Xr,useContext:Xr,useEffect:Xr,useImperativeHandle:Xr,useInsertionEffect:Xr,useLayoutEffect:Xr,useMemo:Xr,useReducer:Xr,useRef:Xr,useState:Xr,useDebugValue:Xr,useDeferredValue:Xr,useTransition:Xr,useMutableSource:Xr,useSyncExternalStore:Xr,useId:Xr,unstable_isNewReconciler:!1},JJ={readContext:Zs,useCallback:function(t,e){return Vo().memoizedState=[t,e===void 0?null:e],t},useContext:Zs,useEffect:cP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$v(4194308,4,sj.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $v(4194308,4,t,e)},useInsertionEffect:function(t,e){return $v(4,2,t,e)},useMemo:function(t,e){var n=Vo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Vo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=KJ.bind(null,Vn,t),[r.memoizedState,t]},useRef:function(t){var e=Vo();return t={current:t},e.memoizedState=t},useState:lP,useDebugValue:CT,useDeferredValue:function(t){return Vo().memoizedState=t},useTransition:function(){var t=lP(!1),e=t[0];return t=XJ.bind(null,t[1]),Vo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Vn,i=Vo();if(jn){if(n===void 0)throw Error(Ze(407));n=n()}else{if(n=e(),_r===null)throw Error(Ze(349));Yu&30||J3(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,cP(Z3.bind(null,r,s,t),[t]),r.flags|=2048,Cm(9,Q3.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Vo(),e=_r.identifierPrefix;if(jn){var n=$a,r=Va;n=(r&~(1<<32-_o(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_m++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qJ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QJ={readContext:Zs,useCallback:aj,useContext:Zs,useEffect:ET,useImperativeHandle:oj,useInsertionEffect:rj,useLayoutEffect:ij,useMemo:lj,useReducer:HS,useRef:nj,useState:function(){return HS(Em)},useDebugValue:CT,useDeferredValue:function(t){var e=eo();return cj(e,dr.memoizedState,t)},useTransition:function(){var t=HS(Em)[0],e=eo().memoizedState;return[t,e]},useMutableSource:K3,useSyncExternalStore:Y3,useId:uj,unstable_isNewReconciler:!1},ZJ={readContext:Zs,useCallback:aj,useContext:Zs,useEffect:ET,useImperativeHandle:oj,useInsertionEffect:rj,useLayoutEffect:ij,useMemo:lj,useReducer:VS,useRef:nj,useState:function(){return VS(Em)},useDebugValue:CT,useDeferredValue:function(t){var e=eo();return dr===null?e.memoizedState=t:cj(e,dr.memoizedState,t)},useTransition:function(){var t=VS(Em)[0],e=eo().memoizedState;return[t,e]},useMutableSource:K3,useSyncExternalStore:Y3,useId:uj,unstable_isNewReconciler:!1};function ho(t,e){if(t&&t.defaultProps){e=$n({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gE(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:$n({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var j0={isMounted:function(t){return(t=t._reactInternals)?hd(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xi(),i=yc(t),s=Ka(r,i);s.payload=e,n!=null&&(s.callback=n),e=mc(t,s,i),e!==null&&(Eo(e,t,i,r),Hv(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xi(),i=yc(t),s=Ka(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=mc(t,s,i),e!==null&&(Eo(e,t,i,r),Hv(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xi(),r=yc(t),i=Ka(n,r);i.tag=2,e!=null&&(i.callback=e),e=mc(t,i,r),e!==null&&(Eo(e,t,r,n),Hv(e,t,r))}};function uP(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ym(n,r)||!ym(i,s):!0}function pj(t,e,n){var r=!1,i=Ac,s=e.contextType;return typeof s=="object"&&s!==null?s=Zs(s):(i=Hi(e)?Xu:si.current,r=e.contextTypes,s=(r=r!=null)?eh(t,i):Ac),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=j0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function dP(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&j0.enqueueReplaceState(e,e.state,null)}function yE(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},yT(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Zs(s):(s=Hi(e)?Xu:si.current,i.context=eh(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(gE(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&j0.enqueueReplaceState(i,i.state,null),Dx(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ih(t,e){try{var n="",r=e;do n+=TY(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function $S(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var eQ=typeof WeakMap=="function"?WeakMap:Map;function mj(t,e,n){n=Ka(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jx||(jx=!0,AE=r),vE(t,e)},n}function gj(t,e,n){n=Ka(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){vE(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vE(t,e),typeof r!="function"&&(gc===null?gc=new Set([this]):gc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function fP(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new eQ;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=pQ.bind(null,t,e,n),e.then(t,t))}function hP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function pP(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ka(-1,1),e.tag=2,mc(n,e,1))),n.lanes|=1),t)}var tQ=ll.ReactCurrentOwner,zi=!1;function gi(t,e,n,r){e.child=t===null?W3(e,null,n,r):nh(e,t.child,n,r)}function mP(t,e,n,r,i){n=n.render;var s=e.ref;return kf(e,i),r=ST(t,e,n,r,s,i),n=_T(),t!==null&&!zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rl(t,e,i)):(jn&&n&&uT(e),e.flags|=1,gi(t,e,r,i),e.child)}function gP(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!DT(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,yj(t,e,s,r,i)):(t=Xv(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ym,n(o,r)&&t.ref===e.ref)return rl(t,e,i)}return e.flags|=1,t=vc(s,r),t.ref=e.ref,t.return=e,e.child=t}function yj(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ym(s,r)&&t.ref===e.ref)if(zi=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(zi=!0);else return e.lanes=t.lanes,rl(t,e,i)}return xE(t,e,n,r,i)}function vj(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(Sf,ds),ds|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kn(Sf,ds),ds|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,kn(Sf,ds),ds|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,kn(Sf,ds),ds|=r;return gi(t,e,i,n),e.child}function xj(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xE(t,e,n,r,i){var s=Hi(n)?Xu:si.current;return s=eh(e,s),kf(e,i),n=ST(t,e,n,r,s,i),r=_T(),t!==null&&!zi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rl(t,e,i)):(jn&&r&&uT(e),e.flags|=1,gi(t,e,n,i),e.child)}function yP(t,e,n,r,i){if(Hi(n)){var s=!0;Ax(e)}else s=!1;if(kf(e,i),e.stateNode===null)Wv(t,e),pj(e,n,r),yE(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Zs(c):(c=Hi(n)?Xu:si.current,c=eh(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&dP(e,o,r,c),Wl=!1;var p=e.memoizedState;o.state=p,Dx(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Bi.current||Wl?(typeof u=="function"&&(gE(e,n,u,r),l=e.memoizedState),(a=Wl||uP(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,q3(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ho(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Zs(l):(l=Hi(n)?Xu:si.current,l=eh(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&dP(e,o,r,l),Wl=!1,p=e.memoizedState,o.state=p,Dx(e,r,o,i);var x=e.memoizedState;a!==d||p!==x||Bi.current||Wl?(typeof m=="function"&&(gE(e,n,m,r),x=e.memoizedState),(c=Wl||uP(e,n,c,r,p,x,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return wE(t,e,n,r,s,i)}function wE(t,e,n,r,i,s){xj(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&nP(e,n,!1),rl(t,e,s);r=e.stateNode,tQ.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=nh(e,t.child,null,s),e.child=nh(e,null,a,s)):gi(t,e,a,s),e.memoizedState=r.state,i&&nP(e,n,!0),e.child}function wj(t){var e=t.stateNode;e.pendingContext?tP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tP(t,e.context,!1),vT(t,e.containerInfo)}function vP(t,e,n,r,i){return th(),fT(i),e.flags|=256,gi(t,e,n,r),e.child}var bE={dehydrated:null,treeContext:null,retryLane:0};function SE(t){return{baseLanes:t,cachePool:null,transitions:null}}function bj(t,e,n){var r=e.pendingProps,i=Hn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),kn(Hn,i&1),t===null)return pE(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=B0(o,r,0,null),t=zu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=SE(n),e.memoizedState=bE,t):MT(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return nQ(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=vc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=vc(a,s):(s=zu(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?SE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=bE,r}return s=t.child,t=s.sibling,r=vc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function MT(t,e){return e=B0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zy(t,e,n,r){return r!==null&&fT(r),nh(e,t.child,null,n),t=MT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nQ(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=$S(Error(Ze(422))),zy(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=B0({mode:"visible",children:r.children},i,0,null),s=zu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&nh(e,t.child,null,o),e.child.memoizedState=SE(o),e.memoizedState=bE,s);if(!(e.mode&1))return zy(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ze(419)),r=$S(s,r,void 0),zy(t,e,o,r)}if(a=(o&t.childLanes)!==0,zi||a){if(r=_r,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,nl(t,i),Eo(r,t,i,-1))}return PT(),r=$S(Error(Ze(421))),zy(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=mQ.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ms=pc(i.nextSibling),ys=e,jn=!0,vo=null,t!==null&&(Vs[$s++]=Va,Vs[$s++]=$a,Vs[$s++]=Ku,Va=t.id,$a=t.overflow,Ku=e),e=MT(e,r.children),e.flags|=4096,e)}function xP(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),mE(t.return,e,n)}function WS(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Sj(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(gi(t,e,r.children,n),r=Hn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xP(t,n,e);else if(t.tag===19)xP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(kn(Hn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ix(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),WS(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ix(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}WS(e,!0,n,null,s);break;case"together":WS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Wv(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rl(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ju|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ze(153));if(e.child!==null){for(t=e.child,n=vc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=vc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function rQ(t,e,n){switch(e.tag){case 3:wj(e),th();break;case 5:X3(e);break;case 1:Hi(e.type)&&Ax(e);break;case 4:vT(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;kn(kx,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(kn(Hn,Hn.current&1),e.flags|=128,null):n&e.child.childLanes?bj(t,e,n):(kn(Hn,Hn.current&1),t=rl(t,e,n),t!==null?t.sibling:null);kn(Hn,Hn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Sj(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),kn(Hn,Hn.current),r)break;return null;case 22:case 23:return e.lanes=0,vj(t,e,n)}return rl(t,e,n)}var _j,_E,Ej,Cj;_j=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_E=function(){};Ej=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Tu(sa.current);var s=null;switch(n){case"input":i=W_(t,i),r=W_(t,r),s=[];break;case"select":i=$n({},i,{value:void 0}),r=$n({},r,{value:void 0}),s=[];break;case"textarea":i=X_(t,i),r=X_(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Mx)}Y_(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(um.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(um.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ln("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Cj=function(t,e,n,r){n!==r&&(e.flags|=4)};function yp(t,e){if(!jn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Kr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iQ(t,e,n){var r=e.pendingProps;switch(dT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kr(e),null;case 1:return Hi(e.type)&&Tx(),Kr(e),null;case 3:return r=e.stateNode,rh(),On(Bi),On(si),wT(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(jy(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vo!==null&&(kE(vo),vo=null))),_E(t,e),Kr(e),null;case 5:xT(e);var i=Tu(Sm.current);if(n=e.type,t!==null&&e.stateNode!=null)Ej(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ze(166));return Kr(e),null}if(t=Tu(sa.current),jy(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Qo]=e,r[wm]=s,t=(e.mode&1)!==0,n){case"dialog":Ln("cancel",r),Ln("close",r);break;case"iframe":case"object":case"embed":Ln("load",r);break;case"video":case"audio":for(i=0;i<Op.length;i++)Ln(Op[i],r);break;case"source":Ln("error",r);break;case"img":case"image":case"link":Ln("error",r),Ln("load",r);break;case"details":Ln("toggle",r);break;case"input":A2(r,s),Ln("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ln("invalid",r);break;case"textarea":N2(r,s),Ln("invalid",r)}Y_(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Fy(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Fy(r.textContent,a,t),i=["children",""+a]):um.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ln("scroll",r)}switch(n){case"input":Ry(r),R2(r,s,!0);break;case"textarea":Ry(r),k2(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Mx)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ZF(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Qo]=e,t[wm]=r,_j(t,e,!1,!1),e.stateNode=t;e:{switch(o=J_(n,r),n){case"dialog":Ln("cancel",t),Ln("close",t),i=r;break;case"iframe":case"object":case"embed":Ln("load",t),i=r;break;case"video":case"audio":for(i=0;i<Op.length;i++)Ln(Op[i],t);i=r;break;case"source":Ln("error",t),i=r;break;case"img":case"image":case"link":Ln("error",t),Ln("load",t),i=r;break;case"details":Ln("toggle",t),i=r;break;case"input":A2(t,r),i=W_(t,r),Ln("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=$n({},r,{value:void 0}),Ln("invalid",t);break;case"textarea":N2(t,r),i=X_(t,r),Ln("invalid",t);break;default:i=r}Y_(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?n3(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&e3(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&dm(t,l):typeof l=="number"&&dm(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(um.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ln("scroll",t):l!=null&&YM(t,s,l,o))}switch(n){case"input":Ry(t),R2(t,r,!1);break;case"textarea":Ry(t),k2(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Tc(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Tf(t,!!r.multiple,s,!1):r.defaultValue!=null&&Tf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Mx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kr(e),null;case 6:if(t&&e.stateNode!=null)Cj(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ze(166));if(n=Tu(Sm.current),Tu(sa.current),jy(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qo]=e,(s=r.nodeValue!==n)&&(t=ys,t!==null))switch(t.tag){case 3:Fy(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fy(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qo]=e,e.stateNode=r}return Kr(e),null;case 13:if(On(Hn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(jn&&ms!==null&&e.mode&1&&!(e.flags&128))V3(),th(),e.flags|=98560,s=!1;else if(s=jy(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ze(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ze(317));s[Qo]=e}else th(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kr(e),s=!1}else vo!==null&&(kE(vo),vo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Hn.current&1?hr===0&&(hr=3):PT())),e.updateQueue!==null&&(e.flags|=4),Kr(e),null);case 4:return rh(),_E(t,e),t===null&&vm(e.stateNode.containerInfo),Kr(e),null;case 10:return mT(e.type._context),Kr(e),null;case 17:return Hi(e.type)&&Tx(),Kr(e),null;case 19:if(On(Hn),s=e.memoizedState,s===null)return Kr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)yp(s,!1);else{if(hr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ix(t),o!==null){for(e.flags|=128,yp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return kn(Hn,Hn.current&1|2),e.child}t=t.sibling}s.tail!==null&&er()>sh&&(e.flags|=128,r=!0,yp(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ix(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!jn)return Kr(e),null}else 2*er()-s.renderingStartTime>sh&&n!==1073741824&&(e.flags|=128,r=!0,yp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=er(),e.sibling=null,n=Hn.current,kn(Hn,r?n&1|2:n&1),e):(Kr(e),null);case 22:case 23:return kT(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ds&1073741824&&(Kr(e),e.subtreeFlags&6&&(e.flags|=8192)):Kr(e),null;case 24:return null;case 25:return null}throw Error(Ze(156,e.tag))}function sQ(t,e){switch(dT(e),e.tag){case 1:return Hi(e.type)&&Tx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rh(),On(Bi),On(si),wT(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xT(e),null;case 13:if(On(Hn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ze(340));th()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return On(Hn),null;case 4:return rh(),null;case 10:return mT(e.type._context),null;case 22:case 23:return kT(),null;case 24:return null;default:return null}}var By=!1,ei=!1,oQ=typeof WeakSet=="function"?WeakSet:Set,xt=null;function bf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qn(t,e,r)}else n.current=null}function EE(t,e,n){try{n()}catch(r){qn(t,e,r)}}var wP=!1;function aQ(t,e){if(aE=_x,t=N3(),cT(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,p=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(lE={focusedElem:t,selectionRange:n},_x=!1,xt=e;xt!==null;)if(e=xt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xt=t;else for(;xt!==null;){e=xt;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,v=x.memoizedState,y=e.stateNode,S=y.getSnapshotBeforeUpdate(e.elementType===e.type?w:ho(e.type,w),v);y.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ze(163))}}catch(C){qn(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,xt=t;break}xt=e.return}return x=wP,wP=!1,x}function Yp(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&EE(e,n,s)}i=i.next}while(i!==r)}}function U0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function CE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Mj(t){var e=t.alternate;e!==null&&(t.alternate=null,Mj(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qo],delete e[wm],delete e[dE],delete e[VJ],delete e[$J])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tj(t){return t.tag===5||t.tag===3||t.tag===4}function bP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tj(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ME(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mx));else if(r!==4&&(t=t.child,t!==null))for(ME(t,e,n),t=t.sibling;t!==null;)ME(t,e,n),t=t.sibling}function TE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(TE(t,e,n),t=t.sibling;t!==null;)TE(t,e,n),t=t.sibling}var Pr=null,yo=!1;function Nl(t,e,n){for(n=n.child;n!==null;)Aj(t,e,n),n=n.sibling}function Aj(t,e,n){if(ia&&typeof ia.onCommitFiberUnmount=="function")try{ia.onCommitFiberUnmount(k0,n)}catch{}switch(n.tag){case 5:ei||bf(n,e);case 6:var r=Pr,i=yo;Pr=null,Nl(t,e,n),Pr=r,yo=i,Pr!==null&&(yo?(t=Pr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pr.removeChild(n.stateNode));break;case 18:Pr!==null&&(yo?(t=Pr,n=n.stateNode,t.nodeType===8?jS(t.parentNode,n):t.nodeType===1&&jS(t,n),mm(t)):jS(Pr,n.stateNode));break;case 4:r=Pr,i=yo,Pr=n.stateNode.containerInfo,yo=!0,Nl(t,e,n),Pr=r,yo=i;break;case 0:case 11:case 14:case 15:if(!ei&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&EE(n,e,o),i=i.next}while(i!==r)}Nl(t,e,n);break;case 1:if(!ei&&(bf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){qn(n,e,a)}Nl(t,e,n);break;case 21:Nl(t,e,n);break;case 22:n.mode&1?(ei=(r=ei)||n.memoizedState!==null,Nl(t,e,n),ei=r):Nl(t,e,n);break;default:Nl(t,e,n)}}function SP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new oQ),e.forEach(function(r){var i=gQ.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function oo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Pr=a.stateNode,yo=!1;break e;case 3:Pr=a.stateNode.containerInfo,yo=!0;break e;case 4:Pr=a.stateNode.containerInfo,yo=!0;break e}a=a.return}if(Pr===null)throw Error(Ze(160));Aj(s,o,i),Pr=null,yo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){qn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Rj(e,t),e=e.sibling}function Rj(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(oo(e,t),Bo(t),r&4){try{Yp(3,t,t.return),U0(3,t)}catch(w){qn(t,t.return,w)}try{Yp(5,t,t.return)}catch(w){qn(t,t.return,w)}}break;case 1:oo(e,t),Bo(t),r&512&&n!==null&&bf(n,n.return);break;case 5:if(oo(e,t),Bo(t),r&512&&n!==null&&bf(n,n.return),t.flags&32){var i=t.stateNode;try{dm(i,"")}catch(w){qn(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&JF(i,s),J_(a,o);var c=J_(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?n3(i,d):u==="dangerouslySetInnerHTML"?e3(i,d):u==="children"?dm(i,d):YM(i,u,d,c)}switch(a){case"input":G_(i,s);break;case"textarea":QF(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Tf(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Tf(i,!!s.multiple,s.defaultValue,!0):Tf(i,!!s.multiple,s.multiple?[]:"",!1))}i[wm]=s}catch(w){qn(t,t.return,w)}}break;case 6:if(oo(e,t),Bo(t),r&4){if(t.stateNode===null)throw Error(Ze(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){qn(t,t.return,w)}}break;case 3:if(oo(e,t),Bo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{mm(e.containerInfo)}catch(w){qn(t,t.return,w)}break;case 4:oo(e,t),Bo(t);break;case 13:oo(e,t),Bo(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(RT=er())),r&4&&SP(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ei=(c=ei)||u,oo(e,t),ei=c):oo(e,t),Bo(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(xt=t,u=t.child;u!==null;){for(d=xt=u;xt!==null;){switch(p=xt,m=p.child,p.tag){case 0:case 11:case 14:case 15:Yp(4,p,p.return);break;case 1:bf(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(w){qn(r,n,w)}}break;case 5:bf(p,p.return);break;case 22:if(p.memoizedState!==null){EP(d);continue}}m!==null?(m.return=p,xt=m):EP(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=t3("display",o))}catch(w){qn(t,t.return,w)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){qn(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:oo(e,t),Bo(t),r&4&&SP(t);break;case 21:break;default:oo(e,t),Bo(t)}}function Bo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Tj(n)){var r=n;break e}n=n.return}throw Error(Ze(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(dm(i,""),r.flags&=-33);var s=bP(t);TE(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=bP(t);ME(t,a,o);break;default:throw Error(Ze(161))}}catch(l){qn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lQ(t,e,n){xt=t,Nj(t)}function Nj(t,e,n){for(var r=(t.mode&1)!==0;xt!==null;){var i=xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||By;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ei;a=By;var c=ei;if(By=o,(ei=l)&&!c)for(xt=i;xt!==null;)o=xt,l=o.child,o.tag===22&&o.memoizedState!==null?CP(i):l!==null?(l.return=o,xt=l):CP(i);for(;s!==null;)xt=s,Nj(s),s=s.sibling;xt=i,By=a,ei=c}_P(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xt=s):_P(t)}}function _P(t){for(;xt!==null;){var e=xt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ei||U0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ei)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ho(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&aP(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}aP(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&mm(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ze(163))}ei||e.flags&512&&CE(e)}catch(p){qn(e,e.return,p)}}if(e===t){xt=null;break}if(n=e.sibling,n!==null){n.return=e.return,xt=n;break}xt=e.return}}function EP(t){for(;xt!==null;){var e=xt;if(e===t){xt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xt=n;break}xt=e.return}}function CP(t){for(;xt!==null;){var e=xt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{U0(4,e)}catch(l){qn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){qn(e,i,l)}}var s=e.return;try{CE(e)}catch(l){qn(e,s,l)}break;case 5:var o=e.return;try{CE(e)}catch(l){qn(e,o,l)}}}catch(l){qn(e,e.return,l)}if(e===t){xt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,xt=a;break}xt=e.return}}var cQ=Math.ceil,Fx=ll.ReactCurrentDispatcher,TT=ll.ReactCurrentOwner,Ys=ll.ReactCurrentBatchConfig,un=0,_r=null,ar=null,jr=0,ds=0,Sf=Fc(0),hr=0,Mm=null,Ju=0,z0=0,AT=0,Jp=null,Ui=null,RT=0,sh=1/0,ja=null,jx=!1,AE=null,gc=null,Hy=!1,sc=null,Ux=0,Qp=0,RE=null,Gv=-1,qv=0;function xi(){return un&6?er():Gv!==-1?Gv:Gv=er()}function yc(t){return t.mode&1?un&2&&jr!==0?jr&-jr:GJ.transition!==null?(qv===0&&(qv=p3()),qv):(t=wn,t!==0||(t=window.event,t=t===void 0?16:b3(t.type)),t):1}function Eo(t,e,n,r){if(50<Qp)throw Qp=0,RE=null,Error(Ze(185));og(t,n,r),(!(un&2)||t!==_r)&&(t===_r&&(!(un&2)&&(z0|=n),hr===4&&Yl(t,jr)),Vi(t,r),n===1&&un===0&&!(e.mode&1)&&(sh=er()+500,O0&&jc()))}function Vi(t,e){var n=t.callbackNode;GY(t,e);var r=Sx(t,t===_r?jr:0);if(r===0)n!==null&&I2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&I2(n),e===1)t.tag===0?WJ(MP.bind(null,t)):z3(MP.bind(null,t)),BJ(function(){!(un&6)&&jc()}),n=null;else{switch(m3(r)){case 1:n=tT;break;case 4:n=f3;break;case 16:n=bx;break;case 536870912:n=h3;break;default:n=bx}n=jj(n,kj.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function kj(t,e){if(Gv=-1,qv=0,un&6)throw Error(Ze(327));var n=t.callbackNode;if(Pf()&&t.callbackNode!==n)return null;var r=Sx(t,t===_r?jr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zx(t,r);else{e=r;var i=un;un|=2;var s=Dj();(_r!==t||jr!==e)&&(ja=null,sh=er()+500,Uu(t,e));do try{fQ();break}catch(a){Pj(t,a)}while(!0);pT(),Fx.current=s,un=i,ar!==null?e=0:(_r=null,jr=0,e=hr)}if(e!==0){if(e===2&&(i=nE(t),i!==0&&(r=i,e=NE(t,i))),e===1)throw n=Mm,Uu(t,0),Yl(t,r),Vi(t,er()),n;if(e===6)Yl(t,r);else{if(i=t.current.alternate,!(r&30)&&!uQ(i)&&(e=zx(t,r),e===2&&(s=nE(t),s!==0&&(r=s,e=NE(t,s))),e===1))throw n=Mm,Uu(t,0),Yl(t,r),Vi(t,er()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ze(345));case 2:yu(t,Ui,ja);break;case 3:if(Yl(t,r),(r&130023424)===r&&(e=RT+500-er(),10<e)){if(Sx(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){xi(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=uE(yu.bind(null,t,Ui,ja),e);break}yu(t,Ui,ja);break;case 4:if(Yl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-_o(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=er()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cQ(r/1960))-r,10<r){t.timeoutHandle=uE(yu.bind(null,t,Ui,ja),r);break}yu(t,Ui,ja);break;case 5:yu(t,Ui,ja);break;default:throw Error(Ze(329))}}}return Vi(t,er()),t.callbackNode===n?kj.bind(null,t):null}function NE(t,e){var n=Jp;return t.current.memoizedState.isDehydrated&&(Uu(t,e).flags|=256),t=zx(t,e),t!==2&&(e=Ui,Ui=n,e!==null&&kE(e)),t}function kE(t){Ui===null?Ui=t:Ui.push.apply(Ui,t)}function uQ(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!To(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yl(t,e){for(e&=~AT,e&=~z0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_o(e),r=1<<n;t[n]=-1,e&=~r}}function MP(t){if(un&6)throw Error(Ze(327));Pf();var e=Sx(t,0);if(!(e&1))return Vi(t,er()),null;var n=zx(t,e);if(t.tag!==0&&n===2){var r=nE(t);r!==0&&(e=r,n=NE(t,r))}if(n===1)throw n=Mm,Uu(t,0),Yl(t,e),Vi(t,er()),n;if(n===6)throw Error(Ze(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yu(t,Ui,ja),Vi(t,er()),null}function NT(t,e){var n=un;un|=1;try{return t(e)}finally{un=n,un===0&&(sh=er()+500,O0&&jc())}}function Qu(t){sc!==null&&sc.tag===0&&!(un&6)&&Pf();var e=un;un|=1;var n=Ys.transition,r=wn;try{if(Ys.transition=null,wn=1,t)return t()}finally{wn=r,Ys.transition=n,un=e,!(un&6)&&jc()}}function kT(){ds=Sf.current,On(Sf)}function Uu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zJ(n)),ar!==null)for(n=ar.return;n!==null;){var r=n;switch(dT(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Tx();break;case 3:rh(),On(Bi),On(si),wT();break;case 5:xT(r);break;case 4:rh();break;case 13:On(Hn);break;case 19:On(Hn);break;case 10:mT(r.type._context);break;case 22:case 23:kT()}n=n.return}if(_r=t,ar=t=vc(t.current,null),jr=ds=e,hr=0,Mm=null,AT=z0=Ju=0,Ui=Jp=null,Mu!==null){for(e=0;e<Mu.length;e++)if(n=Mu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Mu=null}return t}function Pj(t,e){do{var n=ar;try{if(pT(),Vv.current=Ox,Lx){for(var r=Vn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Lx=!1}if(Yu=0,wr=dr=Vn=null,Kp=!1,_m=0,TT.current=null,n===null||n.return===null){hr=1,Mm=e,ar=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=jr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=hP(o);if(m!==null){m.flags&=-257,pP(m,o,a,s,e),m.mode&1&&fP(s,c,e),e=m,l=c;var x=e.updateQueue;if(x===null){var w=new Set;w.add(l),e.updateQueue=w}else x.add(l);break e}else{if(!(e&1)){fP(s,c,e),PT();break e}l=Error(Ze(426))}}else if(jn&&a.mode&1){var v=hP(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),pP(v,o,a,s,e),fT(ih(l,a));break e}}s=l=ih(l,a),hr!==4&&(hr=2),Jp===null?Jp=[s]:Jp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=mj(s,l,e);oP(s,y);break e;case 1:a=l;var S=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(gc===null||!gc.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=gj(s,a,e);oP(s,C);break e}}s=s.return}while(s!==null)}Lj(n)}catch(A){e=A,ar===n&&n!==null&&(ar=n=n.return);continue}break}while(!0)}function Dj(){var t=Fx.current;return Fx.current=Ox,t===null?Ox:t}function PT(){(hr===0||hr===3||hr===2)&&(hr=4),_r===null||!(Ju&268435455)&&!(z0&268435455)||Yl(_r,jr)}function zx(t,e){var n=un;un|=2;var r=Dj();(_r!==t||jr!==e)&&(ja=null,Uu(t,e));do try{dQ();break}catch(i){Pj(t,i)}while(!0);if(pT(),un=n,Fx.current=r,ar!==null)throw Error(Ze(261));return _r=null,jr=0,hr}function dQ(){for(;ar!==null;)Ij(ar)}function fQ(){for(;ar!==null&&!FY();)Ij(ar)}function Ij(t){var e=Fj(t.alternate,t,ds);t.memoizedProps=t.pendingProps,e===null?Lj(t):ar=e,TT.current=null}function Lj(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sQ(n,e),n!==null){n.flags&=32767,ar=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{hr=6,ar=null;return}}else if(n=iQ(n,e,ds),n!==null){ar=n;return}if(e=e.sibling,e!==null){ar=e;return}ar=e=t}while(e!==null);hr===0&&(hr=5)}function yu(t,e,n){var r=wn,i=Ys.transition;try{Ys.transition=null,wn=1,hQ(t,e,n,r)}finally{Ys.transition=i,wn=r}return null}function hQ(t,e,n,r){do Pf();while(sc!==null);if(un&6)throw Error(Ze(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ze(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(qY(t,s),t===_r&&(ar=_r=null,jr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hy||(Hy=!0,jj(bx,function(){return Pf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ys.transition,Ys.transition=null;var o=wn;wn=1;var a=un;un|=4,TT.current=null,aQ(t,n),Rj(n,t),DJ(lE),_x=!!aE,lE=aE=null,t.current=n,lQ(n),jY(),un=a,wn=o,Ys.transition=s}else t.current=n;if(Hy&&(Hy=!1,sc=t,Ux=i),s=t.pendingLanes,s===0&&(gc=null),BY(n.stateNode),Vi(t,er()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jx)throw jx=!1,t=AE,AE=null,t;return Ux&1&&t.tag!==0&&Pf(),s=t.pendingLanes,s&1?t===RE?Qp++:(Qp=0,RE=t):Qp=0,jc(),null}function Pf(){if(sc!==null){var t=m3(Ux),e=Ys.transition,n=wn;try{if(Ys.transition=null,wn=16>t?16:t,sc===null)var r=!1;else{if(t=sc,sc=null,Ux=0,un&6)throw Error(Ze(331));var i=un;for(un|=4,xt=t.current;xt!==null;){var s=xt,o=s.child;if(xt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(xt=c;xt!==null;){var u=xt;switch(u.tag){case 0:case 11:case 15:Yp(8,u,s)}var d=u.child;if(d!==null)d.return=u,xt=d;else for(;xt!==null;){u=xt;var p=u.sibling,m=u.return;if(Mj(u),u===c){xt=null;break}if(p!==null){p.return=m,xt=p;break}xt=m}}}var x=s.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var v=w.sibling;w.sibling=null,w=v}while(w!==null)}}xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xt=o;else e:for(;xt!==null;){if(s=xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Yp(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xt=y;break e}xt=s.return}}var S=t.current;for(xt=S;xt!==null;){o=xt;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,xt=E;else e:for(o=S;xt!==null;){if(a=xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:U0(9,a)}}catch(A){qn(a,a.return,A)}if(a===o){xt=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,xt=C;break e}xt=a.return}}if(un=i,jc(),ia&&typeof ia.onPostCommitFiberRoot=="function")try{ia.onPostCommitFiberRoot(k0,t)}catch{}r=!0}return r}finally{wn=n,Ys.transition=e}}return!1}function TP(t,e,n){e=ih(n,e),e=mj(t,e,1),t=mc(t,e,1),e=xi(),t!==null&&(og(t,1,e),Vi(t,e))}function qn(t,e,n){if(t.tag===3)TP(t,t,n);else for(;e!==null;){if(e.tag===3){TP(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gc===null||!gc.has(r))){t=ih(n,t),t=gj(e,t,1),e=mc(e,t,1),t=xi(),e!==null&&(og(e,1,t),Vi(e,t));break}}e=e.return}}function pQ(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xi(),t.pingedLanes|=t.suspendedLanes&n,_r===t&&(jr&n)===n&&(hr===4||hr===3&&(jr&130023424)===jr&&500>er()-RT?Uu(t,0):AT|=n),Vi(t,e)}function Oj(t,e){e===0&&(t.mode&1?(e=Py,Py<<=1,!(Py&130023424)&&(Py=4194304)):e=1);var n=xi();t=nl(t,e),t!==null&&(og(t,e,n),Vi(t,n))}function mQ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Oj(t,n)}function gQ(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ze(314))}r!==null&&r.delete(e),Oj(t,n)}var Fj;Fj=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bi.current)zi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return zi=!1,rQ(t,e,n);zi=!!(t.flags&131072)}else zi=!1,jn&&e.flags&1048576&&B3(e,Nx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Wv(t,e),t=e.pendingProps;var i=eh(e,si.current);kf(e,n),i=ST(null,e,r,t,i,n);var s=_T();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Hi(r)?(s=!0,Ax(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yT(e),i.updater=j0,e.stateNode=i,i._reactInternals=e,yE(e,r,t,n),e=wE(null,e,r,!0,s,n)):(e.tag=0,jn&&s&&uT(e),gi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Wv(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=vQ(r),t=ho(r,t),i){case 0:e=xE(null,e,r,t,n);break e;case 1:e=yP(null,e,r,t,n);break e;case 11:e=mP(null,e,r,t,n);break e;case 14:e=gP(null,e,r,ho(r.type,t),n);break e}throw Error(Ze(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ho(r,i),xE(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ho(r,i),yP(t,e,r,i,n);case 3:e:{if(wj(e),t===null)throw Error(Ze(387));r=e.pendingProps,s=e.memoizedState,i=s.element,q3(t,e),Dx(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ih(Error(Ze(423)),e),e=vP(t,e,r,n,i);break e}else if(r!==i){i=ih(Error(Ze(424)),e),e=vP(t,e,r,n,i);break e}else for(ms=pc(e.stateNode.containerInfo.firstChild),ys=e,jn=!0,vo=null,n=W3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(th(),r===i){e=rl(t,e,n);break e}gi(t,e,r,n)}e=e.child}return e;case 5:return X3(e),t===null&&pE(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,cE(r,i)?o=null:s!==null&&cE(r,s)&&(e.flags|=32),xj(t,e),gi(t,e,o,n),e.child;case 6:return t===null&&pE(e),null;case 13:return bj(t,e,n);case 4:return vT(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=nh(e,null,r,n):gi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ho(r,i),mP(t,e,r,i,n);case 7:return gi(t,e,e.pendingProps,n),e.child;case 8:return gi(t,e,e.pendingProps.children,n),e.child;case 12:return gi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,kn(kx,r._currentValue),r._currentValue=o,s!==null)if(To(s.value,o)){if(s.children===i.children&&!Bi.current){e=rl(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ka(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),mE(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ze(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),mE(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}gi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,kf(e,n),i=Zs(i),r=r(i),e.flags|=1,gi(t,e,r,n),e.child;case 14:return r=e.type,i=ho(r,e.pendingProps),i=ho(r.type,i),gP(t,e,r,i,n);case 15:return yj(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ho(r,i),Wv(t,e),e.tag=1,Hi(r)?(t=!0,Ax(e)):t=!1,kf(e,n),pj(e,r,i),yE(e,r,i,n),wE(null,e,r,!0,t,n);case 19:return Sj(t,e,n);case 22:return vj(t,e,n)}throw Error(Ze(156,e.tag))};function jj(t,e){return d3(t,e)}function yQ(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xs(t,e,n,r){return new yQ(t,e,n,r)}function DT(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vQ(t){if(typeof t=="function")return DT(t)?1:0;if(t!=null){if(t=t.$$typeof,t===QM)return 11;if(t===ZM)return 14}return 2}function vc(t,e){var n=t.alternate;return n===null?(n=Xs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xv(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")DT(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ff:return zu(n.children,i,s,e);case JM:o=8,i|=8;break;case B_:return t=Xs(12,n,e,i|2),t.elementType=B_,t.lanes=s,t;case H_:return t=Xs(13,n,e,i),t.elementType=H_,t.lanes=s,t;case V_:return t=Xs(19,n,e,i),t.elementType=V_,t.lanes=s,t;case XF:return B0(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case GF:o=10;break e;case qF:o=9;break e;case QM:o=11;break e;case ZM:o=14;break e;case $l:o=16,r=null;break e}throw Error(Ze(130,t==null?t:typeof t,""))}return e=Xs(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function zu(t,e,n,r){return t=Xs(7,t,r,e),t.lanes=n,t}function B0(t,e,n,r){return t=Xs(22,t,r,e),t.elementType=XF,t.lanes=n,t.stateNode={isHidden:!1},t}function GS(t,e,n){return t=Xs(6,t,null,e),t.lanes=n,t}function qS(t,e,n){return e=Xs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xQ(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=TS(0),this.expirationTimes=TS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=TS(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function IT(t,e,n,r,i,s,o,a,l){return t=new xQ(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xs(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yT(s),t}function wQ(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:df,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Uj(t){if(!t)return Ac;t=t._reactInternals;e:{if(hd(t)!==t||t.tag!==1)throw Error(Ze(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Hi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ze(171))}if(t.tag===1){var n=t.type;if(Hi(n))return U3(t,n,e)}return e}function zj(t,e,n,r,i,s,o,a,l){return t=IT(n,r,!0,t,i,s,o,a,l),t.context=Uj(null),n=t.current,r=xi(),i=yc(n),s=Ka(r,i),s.callback=e??null,mc(n,s,i),t.current.lanes=i,og(t,i,r),Vi(t,r),t}function H0(t,e,n,r){var i=e.current,s=xi(),o=yc(i);return n=Uj(n),e.context===null?e.context=n:e.pendingContext=n,e=Ka(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=mc(i,e,o),t!==null&&(Eo(t,i,o,s),Hv(t,i,o)),o}function Bx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function AP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function LT(t,e){AP(t,e),(t=t.alternate)&&AP(t,e)}function bQ(){return null}var Bj=typeof reportError=="function"?reportError:function(t){console.error(t)};function OT(t){this._internalRoot=t}V0.prototype.render=OT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ze(409));H0(t,e,null,null)};V0.prototype.unmount=OT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qu(function(){H0(null,t,null,null)}),e[tl]=null}};function V0(t){this._internalRoot=t}V0.prototype.unstable_scheduleHydration=function(t){if(t){var e=v3();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kl.length&&e!==0&&e<Kl[n].priority;n++);Kl.splice(n,0,t),n===0&&w3(t)}};function FT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function RP(){}function SQ(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Bx(o);s.call(c)}}var o=zj(e,r,t,0,null,!1,!1,"",RP);return t._reactRootContainer=o,t[tl]=o.current,vm(t.nodeType===8?t.parentNode:t),Qu(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Bx(l);a.call(c)}}var l=IT(t,0,!1,null,null,!1,!1,"",RP);return t._reactRootContainer=l,t[tl]=l.current,vm(t.nodeType===8?t.parentNode:t),Qu(function(){H0(e,l,n,r)}),l}function W0(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Bx(o);a.call(l)}}H0(e,o,t,i)}else o=SQ(n,e,t,i,r);return Bx(o)}g3=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lp(e.pendingLanes);n!==0&&(nT(e,n|1),Vi(e,er()),!(un&6)&&(sh=er()+500,jc()))}break;case 13:Qu(function(){var r=nl(t,1);if(r!==null){var i=xi();Eo(r,t,1,i)}}),LT(t,1)}};rT=function(t){if(t.tag===13){var e=nl(t,134217728);if(e!==null){var n=xi();Eo(e,t,134217728,n)}LT(t,134217728)}};y3=function(t){if(t.tag===13){var e=yc(t),n=nl(t,e);if(n!==null){var r=xi();Eo(n,t,e,r)}LT(t,e)}};v3=function(){return wn};x3=function(t,e){var n=wn;try{return wn=t,e()}finally{wn=n}};Z_=function(t,e,n){switch(e){case"input":if(G_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=L0(r);if(!i)throw Error(Ze(90));YF(r),G_(r,i)}}}break;case"textarea":QF(t,n);break;case"select":e=n.value,e!=null&&Tf(t,!!n.multiple,e,!1)}};s3=NT;o3=Qu;var _Q={usingClientEntryPoint:!1,Events:[lg,gf,L0,r3,i3,NT]},vp={findFiberByHostInstance:Cu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EQ={bundleType:vp.bundleType,version:vp.version,rendererPackageName:vp.rendererPackageName,rendererConfig:vp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ll.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=c3(t),t===null?null:t.stateNode},findFiberByHostInstance:vp.findFiberByHostInstance||bQ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vy.isDisabled&&Vy.supportsFiber)try{k0=Vy.inject(EQ),ia=Vy}catch{}}Es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_Q;Es.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!FT(e))throw Error(Ze(200));return wQ(t,e,null,n)};Es.createRoot=function(t,e){if(!FT(t))throw Error(Ze(299));var n=!1,r="",i=Bj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=IT(t,1,!1,null,null,n,!1,r,i),t[tl]=e.current,vm(t.nodeType===8?t.parentNode:t),new OT(e)};Es.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ze(188)):(t=Object.keys(t).join(","),Error(Ze(268,t)));return t=c3(e),t=t===null?null:t.stateNode,t};Es.flushSync=function(t){return Qu(t)};Es.hydrate=function(t,e,n){if(!$0(e))throw Error(Ze(200));return W0(null,t,e,!0,n)};Es.hydrateRoot=function(t,e,n){if(!FT(t))throw Error(Ze(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Bj;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=zj(e,null,t,1,n??null,i,!1,s,o),t[tl]=e.current,vm(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new V0(e)};Es.render=function(t,e,n){if(!$0(e))throw Error(Ze(200));return W0(null,t,e,!1,n)};Es.unmountComponentAtNode=function(t){if(!$0(t))throw Error(Ze(40));return t._reactRootContainer?(Qu(function(){W0(null,null,t,!1,function(){t._reactRootContainer=null,t[tl]=null})}),!0):!1};Es.unstable_batchedUpdates=NT;Es.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$0(n))throw Error(Ze(200));if(t==null||t._reactInternals===void 0)throw Error(Ze(38));return W0(t,e,n,!1,r)};Es.version="18.3.1-next-f1338f8080-20240426";function Hj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hj)}catch(t){console.error(t)}}Hj(),HF.exports=Es;var Ks=HF.exports;const jT=R0(Ks);var Vj,NP=Ks;Vj=NP.createRoot,NP.hydrateRoot;function $j(t,e){return function(){return t.apply(e,arguments)}}const{toString:CQ}=Object.prototype,{getPrototypeOf:UT}=Object,{iterator:G0,toStringTag:Wj}=Symbol,q0=(t=>e=>{const n=CQ.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Po=t=>(t=t.toLowerCase(),e=>q0(e)===t),X0=t=>e=>typeof e===t,{isArray:Mh}=Array,Tm=X0("undefined");function MQ(t){return t!==null&&!Tm(t)&&t.constructor!==null&&!Tm(t.constructor)&&$i(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Gj=Po("ArrayBuffer");function TQ(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Gj(t.buffer),e}const AQ=X0("string"),$i=X0("function"),qj=X0("number"),K0=t=>t!==null&&typeof t=="object",RQ=t=>t===!0||t===!1,Kv=t=>{if(q0(t)!=="object")return!1;const e=UT(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Wj in t)&&!(G0 in t)},NQ=Po("Date"),kQ=Po("File"),PQ=Po("Blob"),DQ=Po("FileList"),IQ=t=>K0(t)&&$i(t.pipe),LQ=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||$i(t.append)&&((e=q0(t))==="formdata"||e==="object"&&$i(t.toString)&&t.toString()==="[object FormData]"))},OQ=Po("URLSearchParams"),[FQ,jQ,UQ,zQ]=["ReadableStream","Request","Response","Headers"].map(Po),BQ=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ug(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Mh(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function Xj(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Au=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Kj=t=>!Tm(t)&&t!==Au;function PE(){const{caseless:t}=Kj(this)&&this||{},e={},n=(r,i)=>{const s=t&&Xj(e,i)||i;Kv(e[s])&&Kv(r)?e[s]=PE(e[s],r):Kv(r)?e[s]=PE({},r):Mh(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&ug(arguments[r],n);return e}const HQ=(t,e,n,{allOwnKeys:r}={})=>(ug(e,(i,s)=>{n&&$i(i)?t[s]=$j(i,n):t[s]=i},{allOwnKeys:r}),t),VQ=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),$Q=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},WQ=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&UT(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},GQ=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},qQ=t=>{if(!t)return null;if(Mh(t))return t;let e=t.length;if(!qj(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},XQ=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&UT(Uint8Array)),KQ=(t,e)=>{const r=(t&&t[G0]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},YQ=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},JQ=Po("HTMLFormElement"),QQ=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),kP=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),ZQ=Po("RegExp"),Yj=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ug(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},eZ=t=>{Yj(t,(e,n)=>{if($i(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if($i(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},tZ=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Mh(t)?r(t):r(String(t).split(e)),n},nZ=()=>{},rZ=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function iZ(t){return!!(t&&$i(t.append)&&t[Wj]==="FormData"&&t[G0])}const sZ=t=>{const e=new Array(10),n=(r,i)=>{if(K0(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Mh(r)?[]:{};return ug(r,(o,a)=>{const l=n(o,i+1);!Tm(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},oZ=Po("AsyncFunction"),aZ=t=>t&&(K0(t)||$i(t))&&$i(t.then)&&$i(t.catch),Jj=((t,e)=>t?setImmediate:e?((n,r)=>(Au.addEventListener("message",({source:i,data:s})=>{i===Au&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Au.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",$i(Au.postMessage)),lZ=typeof queueMicrotask<"u"?queueMicrotask.bind(Au):typeof process<"u"&&process.nextTick||Jj,cZ=t=>t!=null&&$i(t[G0]),Te={isArray:Mh,isArrayBuffer:Gj,isBuffer:MQ,isFormData:LQ,isArrayBufferView:TQ,isString:AQ,isNumber:qj,isBoolean:RQ,isObject:K0,isPlainObject:Kv,isReadableStream:FQ,isRequest:jQ,isResponse:UQ,isHeaders:zQ,isUndefined:Tm,isDate:NQ,isFile:kQ,isBlob:PQ,isRegExp:ZQ,isFunction:$i,isStream:IQ,isURLSearchParams:OQ,isTypedArray:XQ,isFileList:DQ,forEach:ug,merge:PE,extend:HQ,trim:BQ,stripBOM:VQ,inherits:$Q,toFlatObject:WQ,kindOf:q0,kindOfTest:Po,endsWith:GQ,toArray:qQ,forEachEntry:KQ,matchAll:YQ,isHTMLForm:JQ,hasOwnProperty:kP,hasOwnProp:kP,reduceDescriptors:Yj,freezeMethods:eZ,toObjectSet:tZ,toCamelCase:QQ,noop:nZ,toFiniteNumber:rZ,findKey:Xj,global:Au,isContextDefined:Kj,isSpecCompliantForm:iZ,toJSONObject:sZ,isAsyncFn:oZ,isThenable:aZ,setImmediate:Jj,asap:lZ,isIterable:cZ};function jt(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Te.inherits(jt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const Qj=jt.prototype,Zj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Zj[t]={value:t}});Object.defineProperties(jt,Zj);Object.defineProperty(Qj,"isAxiosError",{value:!0});jt.from=(t,e,n,r,i,s)=>{const o=Object.create(Qj);return Te.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),jt.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const uZ=null;function DE(t){return Te.isPlainObject(t)||Te.isArray(t)}function eU(t){return Te.endsWith(t,"[]")?t.slice(0,-2):t}function PP(t,e,n){return t?t.concat(e).map(function(i,s){return i=eU(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function dZ(t){return Te.isArray(t)&&!t.some(DE)}const fZ=Te.toFlatObject(Te,{},null,function(e){return/^is[A-Z]/.test(e)});function Y0(t,e,n){if(!Te.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Te.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,v){return!Te.isUndefined(v[w])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Te.isSpecCompliantForm(e);if(!Te.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(Te.isDate(x))return x.toISOString();if(Te.isBoolean(x))return x.toString();if(!l&&Te.isBlob(x))throw new jt("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(x)||Te.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function u(x,w,v){let y=x;if(x&&!v&&typeof x=="object"){if(Te.endsWith(w,"{}"))w=r?w:w.slice(0,-2),x=JSON.stringify(x);else if(Te.isArray(x)&&dZ(x)||(Te.isFileList(x)||Te.endsWith(w,"[]"))&&(y=Te.toArray(x)))return w=eU(w),y.forEach(function(E,C){!(Te.isUndefined(E)||E===null)&&e.append(o===!0?PP([w],C,s):o===null?w:w+"[]",c(E))}),!1}return DE(x)?!0:(e.append(PP(v,w,s),c(x)),!1)}const d=[],p=Object.assign(fZ,{defaultVisitor:u,convertValue:c,isVisitable:DE});function m(x,w){if(!Te.isUndefined(x)){if(d.indexOf(x)!==-1)throw Error("Circular reference detected in "+w.join("."));d.push(x),Te.forEach(x,function(y,S){(!(Te.isUndefined(y)||y===null)&&i.call(e,y,Te.isString(S)?S.trim():S,w,p))===!0&&m(y,w?w.concat(S):[S])}),d.pop()}}if(!Te.isObject(t))throw new TypeError("data must be an object");return m(t),e}function DP(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function zT(t,e){this._pairs=[],t&&Y0(t,this,e)}const tU=zT.prototype;tU.append=function(e,n){this._pairs.push([e,n])};tU.toString=function(e){const n=e?function(r){return e.call(this,r,DP)}:DP;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function hZ(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function nU(t,e,n){if(!e)return t;const r=n&&n.encode||hZ;Te.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Te.isURLSearchParams(e)?e.toString():new zT(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class IP{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Te.forEach(this.handlers,function(r){r!==null&&e(r)})}}const rU={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pZ=typeof URLSearchParams<"u"?URLSearchParams:zT,mZ=typeof FormData<"u"?FormData:null,gZ=typeof Blob<"u"?Blob:null,yZ={isBrowser:!0,classes:{URLSearchParams:pZ,FormData:mZ,Blob:gZ},protocols:["http","https","file","blob","url","data"]},BT=typeof window<"u"&&typeof document<"u",IE=typeof navigator=="object"&&navigator||void 0,vZ=BT&&(!IE||["ReactNative","NativeScript","NS"].indexOf(IE.product)<0),xZ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",wZ=BT&&window.location.href||"http://localhost",bZ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:BT,hasStandardBrowserEnv:vZ,hasStandardBrowserWebWorkerEnv:xZ,navigator:IE,origin:wZ},Symbol.toStringTag,{value:"Module"})),ti={...bZ,...yZ};function SZ(t,e){return Y0(t,new ti.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return ti.isNode&&Te.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function _Z(t){return Te.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function EZ(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function iU(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Te.isArray(i)?i.length:o,l?(Te.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Te.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Te.isArray(i[o])&&(i[o]=EZ(i[o])),!a)}if(Te.isFormData(t)&&Te.isFunction(t.entries)){const n={};return Te.forEachEntry(t,(r,i)=>{e(_Z(r),i,n,0)}),n}return null}function CZ(t,e,n){if(Te.isString(t))try{return(e||JSON.parse)(t),Te.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const dg={transitional:rU,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Te.isObject(e);if(s&&Te.isHTMLForm(e)&&(e=new FormData(e)),Te.isFormData(e))return i?JSON.stringify(iU(e)):e;if(Te.isArrayBuffer(e)||Te.isBuffer(e)||Te.isStream(e)||Te.isFile(e)||Te.isBlob(e)||Te.isReadableStream(e))return e;if(Te.isArrayBufferView(e))return e.buffer;if(Te.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return SZ(e,this.formSerializer).toString();if((a=Te.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Y0(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),CZ(e)):e}],transformResponse:[function(e){const n=this.transitional||dg.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Te.isResponse(e)||Te.isReadableStream(e))return e;if(e&&Te.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?jt.from(a,jt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ti.classes.FormData,Blob:ti.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],t=>{dg.headers[t]={}});const MZ=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),TZ=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&MZ[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},LP=Symbol("internals");function xp(t){return t&&String(t).trim().toLowerCase()}function Yv(t){return t===!1||t==null?t:Te.isArray(t)?t.map(Yv):String(t)}function AZ(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const RZ=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function XS(t,e,n,r,i){if(Te.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Te.isString(e)){if(Te.isString(r))return e.indexOf(r)!==-1;if(Te.isRegExp(r))return r.test(e)}}function NZ(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function kZ(t,e){const n=Te.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Wi=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const u=xp(l);if(!u)throw new Error("header name must be a non-empty string");const d=Te.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=Yv(a))}const o=(a,l)=>Te.forEach(a,(c,u)=>s(c,u,l));if(Te.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Te.isString(e)&&(e=e.trim())&&!RZ(e))o(TZ(e),n);else if(Te.isObject(e)&&Te.isIterable(e)){let a={},l,c;for(const u of e){if(!Te.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?Te.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,n)}else e!=null&&s(n,e,r);return this}get(e,n){if(e=xp(e),e){const r=Te.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return AZ(i);if(Te.isFunction(n))return n.call(this,i,r);if(Te.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=xp(e),e){const r=Te.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||XS(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=xp(o),o){const a=Te.findKey(r,o);a&&(!n||XS(r,r[a],a,n))&&(delete r[a],i=!0)}}return Te.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||XS(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Te.forEach(this,(i,s)=>{const o=Te.findKey(r,s);if(o){n[o]=Yv(i),delete n[s];return}const a=e?NZ(s):String(s).trim();a!==s&&delete n[s],n[a]=Yv(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Te.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Te.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[LP]=this[LP]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=xp(o);r[a]||(kZ(i,o),r[a]=!0)}return Te.isArray(e)?e.forEach(s):s(e),this}};Wi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Te.reduceDescriptors(Wi.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Te.freezeMethods(Wi);function KS(t,e){const n=this||dg,r=e||n,i=Wi.from(r.headers);let s=r.data;return Te.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function sU(t){return!!(t&&t.__CANCEL__)}function Th(t,e,n){jt.call(this,t??"canceled",jt.ERR_CANCELED,e,n),this.name="CanceledError"}Te.inherits(Th,jt,{__CANCEL__:!0});function oU(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new jt("Request failed with status code "+n.status,[jt.ERR_BAD_REQUEST,jt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function PZ(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function DZ(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),n[i]=l,r[i]=c;let d=s,p=0;for(;d!==i;)p+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const m=u&&c-u;return m?Math.round(p*1e3/m):void 0}}function IZ(t,e){let n=0,r=1e3/e,i,s;const o=(c,u=Date.now())=>{n=u,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),d=u-n;d>=r?o(c,u):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}const Hx=(t,e,n=3)=>{let r=0;const i=DZ(50,250);return IZ(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),u=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},n)},OP=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},FP=t=>(...e)=>Te.asap(()=>t(...e)),LZ=ti.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,ti.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(ti.origin),ti.navigator&&/(msie|trident)/i.test(ti.navigator.userAgent)):()=>!0,OZ=ti.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Te.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Te.isString(r)&&o.push("path="+r),Te.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function FZ(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function jZ(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function aU(t,e,n){let r=!FZ(e);return t&&(r||n==!1)?jZ(t,e):e}const jP=t=>t instanceof Wi?{...t}:t;function Zu(t,e){e=e||{};const n={};function r(c,u,d,p){return Te.isPlainObject(c)&&Te.isPlainObject(u)?Te.merge.call({caseless:p},c,u):Te.isPlainObject(u)?Te.merge({},u):Te.isArray(u)?u.slice():u}function i(c,u,d,p){if(Te.isUndefined(u)){if(!Te.isUndefined(c))return r(void 0,c,d,p)}else return r(c,u,d,p)}function s(c,u){if(!Te.isUndefined(u))return r(void 0,u)}function o(c,u){if(Te.isUndefined(u)){if(!Te.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,d){if(d in e)return r(c,u);if(d in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,d)=>i(jP(c),jP(u),d,!0)};return Te.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=l[u]||i,p=d(t[u],e[u],u);Te.isUndefined(p)&&d!==a||(n[u]=p)}),n}const lU=t=>{const e=Zu({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Wi.from(o),e.url=nU(aU(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Te.isFormData(n)){if(ti.hasStandardBrowserEnv||ti.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(ti.hasStandardBrowserEnv&&(r&&Te.isFunction(r)&&(r=r(e)),r||r!==!1&&LZ(e.url))){const c=i&&s&&OZ.read(s);c&&o.set(i,c)}return e},UZ=typeof XMLHttpRequest<"u",zZ=UZ&&function(t){return new Promise(function(n,r){const i=lU(t);let s=i.data;const o=Wi.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,d,p,m,x;function w(){m&&m(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(i.method.toUpperCase(),i.url,!0),v.timeout=i.timeout;function y(){if(!v)return;const E=Wi.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),A={data:!a||a==="text"||a==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:E,config:t,request:v};oU(function(k){n(k),w()},function(k){r(k),w()},A),v=null}"onloadend"in v?v.onloadend=y:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(y)},v.onabort=function(){v&&(r(new jt("Request aborted",jt.ECONNABORTED,t,v)),v=null)},v.onerror=function(){r(new jt("Network Error",jt.ERR_NETWORK,t,v)),v=null},v.ontimeout=function(){let C=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const A=i.transitional||rU;i.timeoutErrorMessage&&(C=i.timeoutErrorMessage),r(new jt(C,A.clarifyTimeoutError?jt.ETIMEDOUT:jt.ECONNABORTED,t,v)),v=null},s===void 0&&o.setContentType(null),"setRequestHeader"in v&&Te.forEach(o.toJSON(),function(C,A){v.setRequestHeader(A,C)}),Te.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),a&&a!=="json"&&(v.responseType=i.responseType),c&&([p,x]=Hx(c,!0),v.addEventListener("progress",p)),l&&v.upload&&([d,m]=Hx(l),v.upload.addEventListener("progress",d),v.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(u=E=>{v&&(r(!E||E.type?new Th(null,t,v):E),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const S=PZ(i.url);if(S&&ti.protocols.indexOf(S)===-1){r(new jt("Unsupported protocol "+S+":",jt.ERR_BAD_REQUEST,t));return}v.send(s||null)})},BZ=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof jt?u:new Th(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new jt(`timeout ${e} of ms exceeded`,jt.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Te.asap(a),l}},HZ=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},VZ=async function*(t,e){for await(const n of $Z(t))yield*HZ(n,e)},$Z=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},UP=(t,e,n,r)=>{const i=VZ(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let d=u.byteLength;if(n){let p=s+=d;n(p)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},J0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",cU=J0&&typeof ReadableStream=="function",WZ=J0&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),uU=(t,...e)=>{try{return!!t(...e)}catch{return!1}},GZ=cU&&uU(()=>{let t=!1;const e=new Request(ti.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),zP=64*1024,LE=cU&&uU(()=>Te.isReadableStream(new Response("").body)),Vx={stream:LE&&(t=>t.body)};J0&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Vx[e]&&(Vx[e]=Te.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new jt(`Response type '${e}' is not supported`,jt.ERR_NOT_SUPPORT,r)})})})(new Response);const qZ=async t=>{if(t==null)return 0;if(Te.isBlob(t))return t.size;if(Te.isSpecCompliantForm(t))return(await new Request(ti.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Te.isArrayBufferView(t)||Te.isArrayBuffer(t))return t.byteLength;if(Te.isURLSearchParams(t)&&(t=t+""),Te.isString(t))return(await WZ(t)).byteLength},XZ=async(t,e)=>{const n=Te.toFiniteNumber(t.getContentLength());return n??qZ(e)},KZ=J0&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:p}=lU(t);c=c?(c+"").toLowerCase():"text";let m=BZ([i,s&&s.toAbortSignal()],o),x;const w=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let v;try{if(l&&GZ&&n!=="get"&&n!=="head"&&(v=await XZ(u,r))!==0){let A=new Request(e,{method:"POST",body:r,duplex:"half"}),T;if(Te.isFormData(r)&&(T=A.headers.get("content-type"))&&u.setContentType(T),A.body){const[k,R]=OP(v,Hx(FP(l)));r=UP(A.body,zP,k,R)}}Te.isString(d)||(d=d?"include":"omit");const y="credentials"in Request.prototype;x=new Request(e,{...p,signal:m,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:y?d:void 0});let S=await fetch(x,p);const E=LE&&(c==="stream"||c==="response");if(LE&&(a||E&&w)){const A={};["status","statusText","headers"].forEach(P=>{A[P]=S[P]});const T=Te.toFiniteNumber(S.headers.get("content-length")),[k,R]=a&&OP(T,Hx(FP(a),!0))||[];S=new Response(UP(S.body,zP,k,()=>{R&&R(),w&&w()}),A)}c=c||"text";let C=await Vx[Te.findKey(Vx,c)||"text"](S,t);return!E&&w&&w(),await new Promise((A,T)=>{oU(A,T,{data:C,headers:Wi.from(S.headers),status:S.status,statusText:S.statusText,config:t,request:x})})}catch(y){throw w&&w(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new jt("Network Error",jt.ERR_NETWORK,t,x),{cause:y.cause||y}):jt.from(y,y&&y.code,t,x)}}),OE={http:uZ,xhr:zZ,fetch:KZ};Te.forEach(OE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const BP=t=>`- ${t}`,YZ=t=>Te.isFunction(t)||t===null||t===!1,dU={getAdapter:t=>{t=Te.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!YZ(n)&&(r=OE[(o=String(n)).toLowerCase()],r===void 0))throw new jt(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(BP).join(`
`):" "+BP(s[0]):"as no adapter specified";throw new jt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:OE};function YS(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Th(null,t)}function HP(t){return YS(t),t.headers=Wi.from(t.headers),t.data=KS.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),dU.getAdapter(t.adapter||dg.adapter)(t).then(function(r){return YS(t),r.data=KS.call(t,t.transformResponse,r),r.headers=Wi.from(r.headers),r},function(r){return sU(r)||(YS(t),r&&r.response&&(r.response.data=KS.call(t,t.transformResponse,r.response),r.response.headers=Wi.from(r.response.headers))),Promise.reject(r)})}const fU="1.10.0",Q0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Q0[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const VP={};Q0.transitional=function(e,n,r){function i(s,o){return"[Axios v"+fU+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new jt(i(o," has been removed"+(n?" in "+n:"")),jt.ERR_DEPRECATED);return n&&!VP[o]&&(VP[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Q0.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function JZ(t,e,n){if(typeof t!="object")throw new jt("options must be an object",jt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new jt("option "+s+" must be "+l,jt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new jt("Unknown option "+s,jt.ERR_BAD_OPTION)}}const Jv={assertOptions:JZ,validators:Q0},Ho=Jv.validators;let Bu=class{constructor(e){this.defaults=e||{},this.interceptors={request:new IP,response:new IP}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Zu(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Jv.assertOptions(r,{silentJSONParsing:Ho.transitional(Ho.boolean),forcedJSONParsing:Ho.transitional(Ho.boolean),clarifyTimeoutError:Ho.transitional(Ho.boolean)},!1),i!=null&&(Te.isFunction(i)?n.paramsSerializer={serialize:i}:Jv.assertOptions(i,{encode:Ho.function,serialize:Ho.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Jv.assertOptions(n,{baseUrl:Ho.spelling("baseURL"),withXsrfToken:Ho.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Te.merge(s.common,s[n.method]);s&&Te.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),n.headers=Wi.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(l=l&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const c=[];this.interceptors.response.forEach(function(w){c.push(w.fulfilled,w.rejected)});let u,d=0,p;if(!l){const x=[HP.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,c),p=x.length,u=Promise.resolve(n);d<p;)u=u.then(x[d++],x[d++]);return u}p=a.length;let m=n;for(d=0;d<p;){const x=a[d++],w=a[d++];try{m=x(m)}catch(v){w.call(this,v);break}}try{u=HP.call(this,m)}catch(x){return Promise.reject(x)}for(d=0,p=c.length;d<p;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=Zu(this.defaults,e);const n=aU(e.baseURL,e.url,e.allowAbsoluteUrls);return nU(n,e.params,e.paramsSerializer)}};Te.forEach(["delete","get","head","options"],function(e){Bu.prototype[e]=function(n,r){return this.request(Zu(r||{},{method:e,url:n,data:(r||{}).data}))}});Te.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Zu(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Bu.prototype[e]=n(),Bu.prototype[e+"Form"]=n(!0)});let QZ=class hU{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Th(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new hU(function(i){e=i}),cancel:e}}};function ZZ(t){return function(n){return t.apply(null,n)}}function eee(t){return Te.isObject(t)&&t.isAxiosError===!0}const FE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(FE).forEach(([t,e])=>{FE[e]=t});function pU(t){const e=new Bu(t),n=$j(Bu.prototype.request,e);return Te.extend(n,Bu.prototype,e,{allOwnKeys:!0}),Te.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return pU(Zu(t,i))},n}const Tn=pU(dg);Tn.Axios=Bu;Tn.CanceledError=Th;Tn.CancelToken=QZ;Tn.isCancel=sU;Tn.VERSION=fU;Tn.toFormData=Y0;Tn.AxiosError=jt;Tn.Cancel=Tn.CanceledError;Tn.all=function(e){return Promise.all(e)};Tn.spread=ZZ;Tn.isAxiosError=eee;Tn.mergeConfig=Zu;Tn.AxiosHeaders=Wi;Tn.formToJSON=t=>iU(Te.isHTMLForm(t)?new FormData(t):t);Tn.getAdapter=dU.getAdapter;Tn.HttpStatusCode=FE;Tn.default=Tn;const{Axios:S2e,AxiosError:_2e,CanceledError:E2e,isCancel:C2e,CancelToken:M2e,VERSION:T2e,all:A2e,Cancel:R2e,isAxiosError:N2e,spread:k2e,toFormData:P2e,AxiosHeaders:D2e,HttpStatusCode:I2e,formToJSON:L2e,getAdapter:O2e,mergeConfig:F2e}=Tn,tee=["/api/credits/recent-expirations","/api/subscription/tier-info"],mU="https://itemize-backend-production-92ad.up.railway.app",Zt=Tn.create({baseURL:"http://localhost:3001",withCredentials:!0});Zt.interceptors.request.use(t=>{const e=window.location.hostname==="itemize.cloud";t.baseURL=e?mU:"http://localhost:3001";const n=t.url||"";if(tee.some(i=>n.includes(i))){const s=Tn.CancelToken.source();t.cancelToken=s.token,s.cancel(`Request to ${n} was blocked by interceptor`)}return t},t=>Promise.reject(t));Zt.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&(localStorage.removeItem("itemize_token"),localStorage.removeItem("itemize_user"),localStorage.removeItem("itemize_expiry")),Promise.reject(t)});const Am=()=>window.location.hostname==="itemize.cloud"?mU:"http://localhost:3001",nee=1,ree=1e6;let JS=0;function iee(){return JS=(JS+1)%Number.MAX_SAFE_INTEGER,JS.toString()}const QS=new Map,$P=t=>{if(QS.has(t))return;const e=setTimeout(()=>{QS.delete(t),Zp({type:"REMOVE_TOAST",toastId:t})},ree);QS.set(t,e)},see=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,nee)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?$P(n):t.toasts.forEach(r=>{$P(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Qv=[];let Zv={toasts:[]};function Zp(t){Zv=see(Zv,t),Qv.forEach(e=>{e(Zv)})}function jE({...t}){const e=iee(),n=i=>Zp({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Zp({type:"DISMISS_TOAST",toastId:e});return Zp({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function rr(){const[t,e]=b.useState(Zv);return b.useEffect(()=>(Qv.push(e),()=>{const n=Qv.indexOf(e);n>-1&&Qv.splice(n,1)}),[t]),{...t,toast:jE,dismiss:n=>Zp({type:"DISMISS_TOAST",toastId:n})}}function it(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function WP(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function il(...t){return e=>{let n=!1;const r=t.map(i=>{const s=WP(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():WP(t[i],null)}}}}function Lt(...t){return b.useCallback(il(...t),t)}function oee(t,e){const n=b.createContext(e),r=s=>{const{children:o,...a}=s,l=b.useMemo(()=>a,Object.values(a));return h.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=b.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Mi(t,e=[]){let n=[];function r(s,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=d=>{var y;const{scope:p,children:m,...x}=d,w=((y=p==null?void 0:p[t])==null?void 0:y[l])||a,v=b.useMemo(()=>x,Object.values(x));return h.jsx(w.Provider,{value:v,children:m})};c.displayName=s+"Provider";function u(d,p){var w;const m=((w=p==null?void 0:p[t])==null?void 0:w[l])||a,x=b.useContext(m);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,aee(i,...e)]}function aee(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Rc(t){const e=cee(t),n=b.forwardRef((r,i)=>{const{children:s,...o}=r,a=b.Children.toArray(s),l=a.find(uee);if(l){const c=l.props.children,u=a.map(d=>d===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:i,children:b.isValidElement(c)?b.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var lee=Rc("Slot");function cee(t){const e=b.forwardRef((n,r)=>{const{children:i,...s}=n;if(b.isValidElement(i)){const o=fee(i),a=dee(s,i.props);return i.type!==b.Fragment&&(a.ref=r?il(r,o):o),b.cloneElement(i,a)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var gU=Symbol("radix.slottable");function yU(t){const e=({children:n})=>h.jsx(h.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=gU,e}function uee(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===gU}function dee(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function fee(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function fg(t){const e=t+"CollectionProvider",[n,r]=Mi(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:v,children:y}=w,S=Re.useRef(null),E=Re.useRef(new Map).current;return h.jsx(i,{scope:v,itemMap:E,collectionRef:S,children:y})};o.displayName=e;const a=t+"CollectionSlot",l=Rc(a),c=Re.forwardRef((w,v)=>{const{scope:y,children:S}=w,E=s(a,y),C=Lt(v,E.collectionRef);return h.jsx(l,{ref:C,children:S})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",p=Rc(u),m=Re.forwardRef((w,v)=>{const{scope:y,children:S,...E}=w,C=Re.useRef(null),A=Lt(v,C),T=s(u,y);return Re.useEffect(()=>(T.itemMap.set(C,{ref:C,...E}),()=>void T.itemMap.delete(C))),h.jsx(p,{[d]:"",ref:A,children:S})});m.displayName=u;function x(w){const v=s(t+"CollectionConsumer",w);return Re.useCallback(()=>{const S=v.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${d}]`));return Array.from(v.itemMap.values()).sort((T,k)=>E.indexOf(T.ref.current)-E.indexOf(k.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},x,r]}var hee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],bt=hee.reduce((t,e)=>{const n=Rc(`Primitive.${e}`),r=b.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function HT(t,e){t&&Ks.flushSync(()=>t.dispatchEvent(e))}function Ki(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function pee(t,e=globalThis==null?void 0:globalThis.document){const n=Ki(t);b.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var mee="DismissableLayer",UE="dismissableLayer.update",gee="dismissableLayer.pointerDownOutside",yee="dismissableLayer.focusOutside",GP,vU=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pd=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(vU),[u,d]=b.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=b.useState({}),x=Lt(e,k=>d(k)),w=Array.from(c.layers),[v]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=w.indexOf(v),S=u?w.indexOf(u):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,C=S>=y,A=xee(k=>{const R=k.target,P=[...c.branches].some(M=>M.contains(R));!C||P||(i==null||i(k),o==null||o(k),k.defaultPrevented||a==null||a())},p),T=wee(k=>{const R=k.target;[...c.branches].some(M=>M.contains(R))||(s==null||s(k),o==null||o(k),k.defaultPrevented||a==null||a())},p);return pee(k=>{S===c.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},p),b.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(GP=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),qP(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=GP)}},[u,p,n,c]),b.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),qP())},[u,c]),b.useEffect(()=>{const k=()=>m({});return document.addEventListener(UE,k),()=>document.removeEventListener(UE,k)},[]),h.jsx(bt.div,{...l,ref:x,style:{pointerEvents:E?C?"auto":"none":void 0,...t.style},onFocusCapture:it(t.onFocusCapture,T.onFocusCapture),onBlurCapture:it(t.onBlurCapture,T.onBlurCapture),onPointerDownCapture:it(t.onPointerDownCapture,A.onPointerDownCapture)})});pd.displayName=mee;var vee="DismissableLayerBranch",xU=b.forwardRef((t,e)=>{const n=b.useContext(vU),r=b.useRef(null),i=Lt(e,r);return b.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),h.jsx(bt.div,{...t,ref:i})});xU.displayName=vee;function xee(t,e=globalThis==null?void 0:globalThis.document){const n=Ki(t),r=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){wU(gee,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function wee(t,e=globalThis==null?void 0:globalThis.document){const n=Ki(t),r=b.useRef(!1);return b.useEffect(()=>{const i=s=>{s.target&&!r.current&&wU(yee,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function qP(){const t=new CustomEvent(UE);document.dispatchEvent(t)}function wU(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?HT(i,s):i.dispatchEvent(s)}var bee=pd,See=xU,Mr=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},_ee="Portal",Ah=b.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=b.useState(!1);Mr(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?jT.createPortal(h.jsx(bt.div,{...r,ref:e}),o):null});Ah.displayName=_ee;function Eee(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var Ms=t=>{const{present:e,children:n}=t,r=Cee(e),i=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),s=Lt(r.ref,Mee(i));return typeof n=="function"||r.isPresent?b.cloneElement(i,{ref:s}):null};Ms.displayName="Presence";function Cee(t){const[e,n]=b.useState(),r=b.useRef(null),i=b.useRef(t),s=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=Eee(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=$y(r.current);s.current=a==="mounted"?c:"none"},[a]),Mr(()=>{const c=r.current,u=i.current;if(u!==t){const p=s.current,m=$y(c);t?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&p!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Mr(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=m=>{const w=$y(r.current).includes(m.animationName);if(m.target===e&&w&&(l("ANIMATION_END"),!i.current)){const v=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=v)})}},p=m=>{m.target===e&&(s.current=$y(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function $y(t){return(t==null?void 0:t.animationName)||"none"}function Mee(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Tee=qM[" useInsertionEffect ".trim().toString()]||Mr;function _s({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=Aee({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const u=b.useRef(t!==void 0);b.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=b.useCallback(u=>{var d;if(a){const p=Ree(u)?u(t):u;p!==t&&((d=o.current)==null||d.call(o,p))}else s(u)},[a,t,s,o]);return[l,c]}function Aee({defaultProp:t,onChange:e}){const[n,r]=b.useState(t),i=b.useRef(n),s=b.useRef(e);return Tee(()=>{s.current=e},[e]),b.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function Ree(t){return typeof t=="function"}var bU=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Nee="VisuallyHidden",Z0=b.forwardRef((t,e)=>h.jsx(bt.span,{...t,ref:e,style:{...bU,...t.style}}));Z0.displayName=Nee;var kee=Z0,VT="ToastProvider",[$T,Pee,Dee]=fg("Toast"),[SU,j2e]=Mi("Toast",[Dee]),[Iee,ew]=SU(VT),_U=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=b.useState(null),[c,u]=b.useState(0),d=b.useRef(!1),p=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${VT}\`. Expected non-empty \`string\`.`),h.jsx($T.Provider,{scope:e,children:h.jsx(Iee,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>u(m=>m+1),[]),onToastRemove:b.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:p,children:o})})};_U.displayName=VT;var EU="ToastViewport",Lee=["F8"],zE="toast.viewportPause",BE="toast.viewportResume",CU=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Lee,label:i="Notifications ({hotkey})",...s}=t,o=ew(EU,n),a=Pee(n),l=b.useRef(null),c=b.useRef(null),u=b.useRef(null),d=b.useRef(null),p=Lt(e,d,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;b.useEffect(()=>{const v=y=>{var E;r.length!==0&&r.every(C=>y[C]||y.code===C)&&((E=d.current)==null||E.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),b.useEffect(()=>{const v=l.current,y=d.current;if(x&&v&&y){const S=()=>{if(!o.isClosePausedRef.current){const T=new CustomEvent(zE);y.dispatchEvent(T),o.isClosePausedRef.current=!0}},E=()=>{if(o.isClosePausedRef.current){const T=new CustomEvent(BE);y.dispatchEvent(T),o.isClosePausedRef.current=!1}},C=T=>{!v.contains(T.relatedTarget)&&E()},A=()=>{v.contains(document.activeElement)||E()};return v.addEventListener("focusin",S),v.addEventListener("focusout",C),v.addEventListener("pointermove",S),v.addEventListener("pointerleave",A),window.addEventListener("blur",S),window.addEventListener("focus",E),()=>{v.removeEventListener("focusin",S),v.removeEventListener("focusout",C),v.removeEventListener("pointermove",S),v.removeEventListener("pointerleave",A),window.removeEventListener("blur",S),window.removeEventListener("focus",E)}}},[x,o.isClosePausedRef]);const w=b.useCallback(({tabbingDirection:v})=>{const S=a().map(E=>{const C=E.ref.current,A=[C,...Xee(C)];return v==="forwards"?A:A.reverse()});return(v==="forwards"?S.reverse():S).flat()},[a]);return b.useEffect(()=>{const v=d.current;if(v){const y=S=>{var A,T,k;const E=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!E){const R=document.activeElement,P=S.shiftKey;if(S.target===v&&P){(A=c.current)==null||A.focus();return}const z=w({tabbingDirection:P?"backwards":"forwards"}),H=z.findIndex(B=>B===R);ZS(z.slice(H+1))?S.preventDefault():P?(T=c.current)==null||T.focus():(k=u.current)==null||k.focus()}};return v.addEventListener("keydown",y),()=>v.removeEventListener("keydown",y)}},[a,w]),h.jsxs(See,{ref:l,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&h.jsx(HE,{ref:c,onFocusFromOutsideViewport:()=>{const v=w({tabbingDirection:"forwards"});ZS(v)}}),h.jsx($T.Slot,{scope:n,children:h.jsx(bt.ol,{tabIndex:-1,...s,ref:p})}),x&&h.jsx(HE,{ref:u,onFocusFromOutsideViewport:()=>{const v=w({tabbingDirection:"backwards"});ZS(v)}})]})});CU.displayName=EU;var MU="ToastFocusProxy",HE=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=ew(MU,n);return h.jsx(Z0,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});HE.displayName=MU;var hg="Toast",Oee="toast.swipeStart",Fee="toast.swipeMove",jee="toast.swipeCancel",Uee="toast.swipeEnd",TU=b.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a,l]=_s({prop:r,defaultProp:i??!0,onChange:s,caller:hg});return h.jsx(Ms,{present:n||a,children:h.jsx(Hee,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Ki(t.onPause),onResume:Ki(t.onResume),onSwipeStart:it(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:it(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:it(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:it(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});TU.displayName=hg;var[zee,Bee]=SU(hg,{onClose(){}}),Hee=b.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:p,onSwipeEnd:m,...x}=t,w=ew(hg,n),[v,y]=b.useState(null),S=Lt(e,B=>y(B)),E=b.useRef(null),C=b.useRef(null),A=i||w.duration,T=b.useRef(0),k=b.useRef(A),R=b.useRef(0),{onToastAdd:P,onToastRemove:M}=w,L=Ki(()=>{var K;(v==null?void 0:v.contains(document.activeElement))&&((K=w.viewport)==null||K.focus()),o()}),z=b.useCallback(B=>{!B||B===1/0||(window.clearTimeout(R.current),T.current=new Date().getTime(),R.current=window.setTimeout(L,B))},[L]);b.useEffect(()=>{const B=w.viewport;if(B){const K=()=>{z(k.current),c==null||c()},q=()=>{const ee=new Date().getTime()-T.current;k.current=k.current-ee,window.clearTimeout(R.current),l==null||l()};return B.addEventListener(zE,q),B.addEventListener(BE,K),()=>{B.removeEventListener(zE,q),B.removeEventListener(BE,K)}}},[w.viewport,A,l,c,z]),b.useEffect(()=>{s&&!w.isClosePausedRef.current&&z(A)},[s,A,w.isClosePausedRef,z]),b.useEffect(()=>(P(),()=>M()),[P,M]);const H=b.useMemo(()=>v?IU(v):null,[v]);return w.viewport?h.jsxs(h.Fragment,{children:[H&&h.jsx(Vee,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:H}),h.jsx(zee,{scope:n,onClose:L,children:Ks.createPortal(h.jsx($T.ItemSlot,{scope:n,children:h.jsx(bee,{asChild:!0,onEscapeKeyDown:it(a,()=>{w.isFocusedToastEscapeKeyDownRef.current||L(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(bt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":w.swipeDirection,...x,ref:S,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:it(t.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:it(t.onPointerDown,B=>{B.button===0&&(E.current={x:B.clientX,y:B.clientY})}),onPointerMove:it(t.onPointerMove,B=>{if(!E.current)return;const K=B.clientX-E.current.x,q=B.clientY-E.current.y,ee=!!C.current,O=["left","right"].includes(w.swipeDirection),F=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,D=O?F(0,K):0,ie=O?0:F(0,q),$=B.pointerType==="touch"?10:2,U={x:D,y:ie},Y={originalEvent:B,delta:U};ee?(C.current=U,Wy(Fee,d,Y,{discrete:!1})):XP(U,w.swipeDirection,$)?(C.current=U,Wy(Oee,u,Y,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(K)>$||Math.abs(q)>$)&&(E.current=null)}),onPointerUp:it(t.onPointerUp,B=>{const K=C.current,q=B.target;if(q.hasPointerCapture(B.pointerId)&&q.releasePointerCapture(B.pointerId),C.current=null,E.current=null,K){const ee=B.currentTarget,O={originalEvent:B,delta:K};XP(K,w.swipeDirection,w.swipeThreshold)?Wy(Uee,m,O,{discrete:!0}):Wy(jee,p,O,{discrete:!0}),ee.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),Vee=t=>{const{__scopeToast:e,children:n,...r}=t,i=ew(hg,e),[s,o]=b.useState(!1),[a,l]=b.useState(!1);return Gee(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:h.jsx(Ah,{asChild:!0,children:h.jsx(Z0,{...r,children:s&&h.jsxs(h.Fragment,{children:[i.label," ",n]})})})},$ee="ToastTitle",AU=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return h.jsx(bt.div,{...r,ref:e})});AU.displayName=$ee;var Wee="ToastDescription",RU=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return h.jsx(bt.div,{...r,ref:e})});RU.displayName=Wee;var NU="ToastAction",kU=b.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?h.jsx(DU,{altText:n,asChild:!0,children:h.jsx(WT,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${NU}\`. Expected non-empty \`string\`.`),null)});kU.displayName=NU;var PU="ToastClose",WT=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=Bee(PU,n);return h.jsx(DU,{asChild:!0,children:h.jsx(bt.button,{type:"button",...r,ref:e,onClick:it(t.onClick,i.onClose)})})});WT.displayName=PU;var DU=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return h.jsx(bt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function IU(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),qee(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...IU(r))}}),e}function Wy(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?HT(i,s):i.dispatchEvent(s)}var XP=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function Gee(t=()=>{}){const e=Ki(t);Mr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function qee(t){return t.nodeType===t.ELEMENT_NODE}function Xee(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ZS(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Kee=_U,LU=CU,OU=TU,FU=AU,jU=RU,UU=kU,zU=WT;function BU(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=BU(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function HU(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=BU(t))&&(r&&(r+=" "),r+=e);return r}const KP=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,YP=HU,pg=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return YP(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],d=s==null?void 0:s[c];if(u===null)return null;const p=KP(u)||KP(d);return i[c][p]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,p]=u;return p===void 0||(c[d]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:p,...m}=u;return Object.entries(m).every(x=>{let[w,v]=x;return Array.isArray(v)?v.includes({...s,...a}[w]):{...s,...a}[w]===v})?[...c,d,p]:c},[]);return YP(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yee=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),VU=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jee={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qee=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...Jee,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:VU("lucide",i),...a},[...o.map(([c,u])=>b.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=(t,e)=>{const n=b.forwardRef(({className:r,...i},s)=>b.createElement(Qee,{ref:s,iconNode:e,className:VU(`lucide-${Yee(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=yt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=yt("AlignCenter",[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=yt("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zee=yt("AlignRight",[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=yt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=yt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ete=yt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=yt("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=yt("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=yt("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=yt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=yt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tte=yt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nte=yt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rte=yt("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QP=yt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=yt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ite=yt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=yt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=yt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ste=yt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=yt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ote=yt("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ate=yt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=yt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=yt("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=yt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lte=yt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cte=yt("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ute=yt("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dte=yt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fte=yt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hte=yt("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pte=yt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=yt("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mte=yt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=yt("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=yt("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZP=yt("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gte=yt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yte=yt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vte=yt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xte=yt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wte=yt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bte=yt("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=yt("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=yt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=yt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=yt("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ste=yt("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _te=yt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=yt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ete=yt("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cte=yt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=yt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=yt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=yt("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=yt("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mte=yt("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tte=yt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=yt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=yt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ate=yt("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=yt("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=yt("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rte=yt("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nte=yt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=yt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),KT="-",kte=t=>{const e=Dte(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(KT);return a[0]===""&&a.length!==1&&a.shift(),r4(a,e)||Pte(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},r4=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?r4(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(KT);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},eD=/^\[(.+)\]$/,Pte=t=>{if(eD.test(t)){const e=eD.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Dte=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Lte(Object.entries(t.classGroups),n).forEach(([s,o])=>{VE(o,r,s,e)}),r},VE=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:tD(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(Ite(i)){VE(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{VE(o,tD(e,s),n,r)})})},tD=(t,e)=>{let n=t;return e.split(KT).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Ite=t=>t.isThemeGetter,Lte=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,Ote=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},i4="!",Fte=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,u=0,d;for(let v=0;v<a.length;v++){let y=a[v];if(c===0){if(y===i&&(r||a.slice(v,v+s)===e)){l.push(a.slice(u,v)),u=v+s;continue}if(y==="/"){d=v;continue}}y==="["?c++:y==="]"&&c--}const p=l.length===0?a:a.substring(u),m=p.startsWith(i4),x=m?p.substring(1):p,w=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:w}};return n?a=>n({className:a,parseClassName:o}):o},jte=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Ute=t=>({cache:Ote(t.cacheSize),parseClassName:Fte(t),...kte(t)}),zte=/\s+/,Bte=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(zte);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:d,baseClassName:p,maybePostfixModifierPosition:m}=n(c);let x=!!m,w=r(x?p.substring(0,m):p);if(!w){if(!x){a=c+(a.length>0?" "+a:a);continue}if(w=r(p),!w){a=c+(a.length>0?" "+a:a);continue}x=!1}const v=jte(u).join(":"),y=d?v+i4:v,S=y+w;if(s.includes(S))continue;s.push(S);const E=i(w,x);for(let C=0;C<E.length;++C){const A=E[C];s.push(y+A)}a=c+(a.length>0?" "+a:a)}return a};function Hte(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=s4(e))&&(r&&(r+=" "),r+=n);return r}const s4=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=s4(t[r]))&&(n&&(n+=" "),n+=e);return n};function Vte(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=Ute(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=Bte(l,n);return i(l,u),u}return function(){return s(Hte.apply(null,arguments))}}const In=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},o4=/^\[(?:([a-z-]+):)?(.+)\]$/i,$te=/^\d+\/\d+$/,Wte=new Set(["px","full","screen"]),Gte=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,qte=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Xte=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Kte=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Yte=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ra=t=>Df(t)||Wte.has(t)||$te.test(t),kl=t=>Nh(t,"length",ine),Df=t=>!!t&&!Number.isNaN(Number(t)),n1=t=>Nh(t,"number",Df),wp=t=>!!t&&Number.isInteger(Number(t)),Jte=t=>t.endsWith("%")&&Df(t.slice(0,-1)),zt=t=>o4.test(t),Pl=t=>Gte.test(t),Qte=new Set(["length","size","percentage"]),Zte=t=>Nh(t,Qte,a4),ene=t=>Nh(t,"position",a4),tne=new Set(["image","url"]),nne=t=>Nh(t,tne,one),rne=t=>Nh(t,"",sne),bp=()=>!0,Nh=(t,e,n)=>{const r=o4.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},ine=t=>qte.test(t)&&!Xte.test(t),a4=()=>!1,sne=t=>Kte.test(t),one=t=>Yte.test(t),ane=()=>{const t=In("colors"),e=In("spacing"),n=In("blur"),r=In("brightness"),i=In("borderColor"),s=In("borderRadius"),o=In("borderSpacing"),a=In("borderWidth"),l=In("contrast"),c=In("grayscale"),u=In("hueRotate"),d=In("invert"),p=In("gap"),m=In("gradientColorStops"),x=In("gradientColorStopPositions"),w=In("inset"),v=In("margin"),y=In("opacity"),S=In("padding"),E=In("saturate"),C=In("scale"),A=In("sepia"),T=In("skew"),k=In("space"),R=In("translate"),P=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto",zt,e],z=()=>[zt,e],H=()=>["",Ra,kl],B=()=>["auto",Df,zt],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],q=()=>["solid","dashed","dotted","double","none"],ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",zt],D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ie=()=>[Df,zt];return{cacheSize:500,separator:":",theme:{colors:[bp],spacing:[Ra,kl],blur:["none","",Pl,zt],brightness:ie(),borderColor:[t],borderRadius:["none","","full",Pl,zt],borderSpacing:z(),borderWidth:H(),contrast:ie(),grayscale:F(),hueRotate:ie(),invert:F(),gap:z(),gradientColorStops:[t],gradientColorStopPositions:[Jte,kl],inset:L(),margin:L(),opacity:ie(),padding:z(),saturate:ie(),scale:ie(),sepia:F(),skew:ie(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",zt]}],container:["container"],columns:[{columns:[Pl]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),zt]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",wp,zt]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",zt]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",wp,zt]}],"grid-cols":[{"grid-cols":[bp]}],"col-start-end":[{col:["auto",{span:["full",wp,zt]},zt]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[bp]}],"row-start-end":[{row:["auto",{span:[wp,zt]},zt]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",zt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",zt]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",zt,e]}],"min-w":[{"min-w":[zt,e,"min","max","fit"]}],"max-w":[{"max-w":[zt,e,"none","full","min","max","fit","prose",{screen:[Pl]},Pl]}],h:[{h:[zt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[zt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[zt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[zt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Pl,kl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",n1]}],"font-family":[{font:[bp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",zt]}],"line-clamp":[{"line-clamp":["none",Df,n1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ra,zt]}],"list-image":[{"list-image":["none",zt]}],"list-style-type":[{list:["none","disc","decimal",zt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ra,kl]}],"underline-offset":[{"underline-offset":["auto",Ra,zt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",zt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",zt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),ene]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Zte]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},nne]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...q(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...q()]}],"outline-offset":[{"outline-offset":[Ra,zt]}],"outline-w":[{outline:[Ra,kl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Ra,kl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Pl,rne]}],"shadow-color":[{shadow:[bp]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...ee(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ee()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Pl,zt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[E]}],sepia:[{sepia:[A]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[A]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",zt]}],duration:[{duration:ie()}],ease:[{ease:["linear","in","out","in-out",zt]}],delay:[{delay:ie()}],animate:[{animate:["none","spin","ping","pulse","bounce",zt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[wp,zt]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",zt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",zt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",zt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ra,kl,n1]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},lne=Vte(ane);function dt(...t){return lne(HU(t))}const cne=Kee,l4=b.forwardRef(({className:t,...e},n)=>h.jsx(LU,{ref:n,className:dt("fixed bottom-0 z-[100] flex max-h-screen w-full flex-col p-4 right-0 md:max-w-[420px]",t),...e}));l4.displayName=LU.displayName;const une=pg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-bottom-full data-[state=open]:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),c4=b.forwardRef(({className:t,variant:e,...n},r)=>h.jsx(OU,{ref:r,className:dt(une({variant:e}),t),...n}));c4.displayName=OU.displayName;const dne=b.forwardRef(({className:t,...e},n)=>h.jsx(UU,{ref:n,className:dt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));dne.displayName=UU.displayName;const u4=b.forwardRef(({className:t,...e},n)=>h.jsx(zU,{ref:n,className:dt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:h.jsx(Do,{className:"h-4 w-4"})}));u4.displayName=zU.displayName;const d4=b.forwardRef(({className:t,...e},n)=>h.jsx(FU,{ref:n,className:dt("text-sm font-semibold",t),...e}));d4.displayName=FU.displayName;const f4=b.forwardRef(({className:t,...e},n)=>h.jsx(jU,{ref:n,className:dt("text-sm opacity-90",t),...e}));f4.displayName=jU.displayName;function fne(){const{toasts:t}=rr();return h.jsxs(cne,{children:[t.map(function({id:e,title:n,description:r,action:i,...s}){return h.jsxs(c4,{...s,children:[h.jsxs("div",{className:"grid gap-1",children:[n&&h.jsx(d4,{children:n}),r&&h.jsx(f4,{children:r})]}),i,h.jsx(u4,{})]},e)}),h.jsx(l4,{})]})}var $x=["light","dark"],YT="(prefers-color-scheme: dark)",hne=typeof window>"u",JT=b.createContext(void 0),pne={setTheme:t=>{},themes:[]},Ts=()=>{var t;return(t=b.useContext(JT))!=null?t:pne},mne=t=>b.useContext(JT)?t.children:b.createElement(yne,{...t}),gne=["light","dark"],yne=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:s=gne,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:u})=>{let[d,p]=b.useState(()=>nD(i,o)),[m,x]=b.useState(()=>nD(i)),w=l?Object.values(l):s,v=b.useCallback(C=>{let A=C;if(!A)return;C==="system"&&n&&(A=rD());let T=l?l[A]:A,k=e?xne():null,R=document.documentElement;if(a==="class"?(R.classList.remove(...w),T&&R.classList.add(T)):T?R.setAttribute(a,T):R.removeAttribute(a),r){let P=$x.includes(o)?o:null,M=$x.includes(A)?A:P;R.style.colorScheme=M}k==null||k()},[]),y=b.useCallback(C=>{let A=typeof C=="function"?C(C):C;p(A);try{localStorage.setItem(i,A)}catch{}},[t]),S=b.useCallback(C=>{let A=rD(C);x(A),d==="system"&&n&&!t&&v("system")},[d,t]);b.useEffect(()=>{let C=window.matchMedia(YT);return C.addListener(S),S(C),()=>C.removeListener(S)},[S]),b.useEffect(()=>{let C=A=>{if(A.key!==i)return;let T=A.newValue||o;y(T)};return window.addEventListener("storage",C),()=>window.removeEventListener("storage",C)},[y]),b.useEffect(()=>{v(t??d)},[t,d]);let E=b.useMemo(()=>({theme:d,setTheme:y,forcedTheme:t,resolvedTheme:d==="system"?m:d,themes:n?[...s,"system"]:s,systemTheme:n?m:void 0}),[d,y,t,m,n,s]);return b.createElement(JT.Provider,{value:E},b.createElement(vne,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:i,themes:s,defaultTheme:o,attribute:a,value:l,children:c,attrs:w,nonce:u}),c)},vne=b.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let c=s==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=i?$x.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(x,w=!1,v=!0)=>{let y=o?o[x]:x,S=w?x+"|| ''":`'${y}'`,E="";return i&&v&&!w&&$x.includes(x)&&(E+=`d.style.colorScheme = '${x}';`),n==="class"?w||y?E+=`c.add(${S})`:E+="null":y&&(E+=`d[s](n,${S})`),E},m=t?`!function(){${u}${p(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${YT}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${c?"":"else{"+p(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(s,!1,!1)};}${d}}catch(t){}}();`;return b.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:m}})}),nD=(t,e)=>{if(hne)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},xne=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},rD=t=>(t||(t=window.matchMedia(YT)),t.matches?"dark":"light"),wne=t=>{switch(t){case"success":return _ne;case"info":return Cne;case"warning":return Ene;case"error":return Mne;default:return null}},bne=Array(12).fill(0),Sne=({visible:t,className:e})=>Re.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Re.createElement("div",{className:"sonner-spinner"},bne.map((n,r)=>Re.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),_ne=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Ene=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Cne=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Mne=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Re.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Tne=Re.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Re.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Re.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Ane=()=>{let[t,e]=Re.useState(document.hidden);return Re.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},$E=1,Rne=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,i=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:$E++,s=this.toasts.find(a=>a.id===i),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(a=>a.id===i?(this.publish({...a,...t,id:i,title:n}),{...a,...t,id:i,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:i}),i},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),i=n!==void 0,s,o=r.then(async l=>{if(s=["resolve",l],Re.isValidElement(l))i=!1,this.create({id:n,type:"default",message:l});else if(kne(l)&&!l.ok){i=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:n,type:"error",message:c,description:u})}else if(e.success!==void 0){i=!1;let c=typeof e.success=="function"?await e.success(l):e.success,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"success",message:c,description:u})}}).catch(async l=>{if(s=["reject",l],e.error!==void 0){i=!1;let c=typeof e.error=="function"?await e.error(l):e.error,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"error",message:c,description:u})}}).finally(()=>{var l;i&&(this.dismiss(n),n=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>o.then(()=>s[0]==="reject"?c(s[1]):l(s[1])).catch(c));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||$E++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Fi=new Rne,Nne=(t,e)=>{let n=(e==null?void 0:e.id)||$E++;return Fi.addToast({title:t,...e,id:n}),n},kne=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Pne=Nne,Dne=()=>Fi.toasts,Ine=()=>Fi.getActiveToasts();Object.assign(Pne,{success:Fi.success,info:Fi.info,warning:Fi.warning,error:Fi.error,custom:Fi.custom,message:Fi.message,promise:Fi.promise,dismiss:Fi.dismiss,loading:Fi.loading},{getHistory:Dne,getToasts:Ine});function Lne(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Lne(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Gy(t){return t.label!==void 0}var One=3,Fne="32px",jne="16px",iD=4e3,Une=356,zne=14,Bne=20,Hne=200;function ao(...t){return t.filter(Boolean).join(" ")}function Vne(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var $ne=t=>{var e,n,r,i,s,o,a,l,c,u,d;let{invert:p,toast:m,unstyled:x,interacting:w,setHeights:v,visibleToasts:y,heights:S,index:E,toasts:C,expanded:A,removeToast:T,defaultRichColors:k,closeButton:R,style:P,cancelButtonStyle:M,actionButtonStyle:L,className:z="",descriptionClassName:H="",duration:B,position:K,gap:q,loadingIcon:ee,expandByDefault:O,classNames:F,icons:D,closeButtonAriaLabel:ie="Close toast",pauseWhenPageIsHidden:$}=t,[U,Y]=Re.useState(null),[oe,ne]=Re.useState(null),[Z,fe]=Re.useState(!1),[we,xe]=Re.useState(!1),[Ve,Pe]=Re.useState(!1),[et,te]=Re.useState(!1),[ft,Ye]=Re.useState(!1),[ht,Qe]=Re.useState(0),[St,Ne]=Re.useState(0),Me=Re.useRef(m.duration||B||iD),st=Re.useRef(null),Q=Re.useRef(null),I=E===0,re=E+1<=y,G=m.type,ae=m.dismissible!==!1,ce=m.className||"",Ae=m.descriptionClassName||"",De=Re.useMemo(()=>S.findIndex(Ue=>Ue.toastId===m.id)||0,[S,m.id]),Je=Re.useMemo(()=>{var Ue;return(Ue=m.closeButton)!=null?Ue:R},[m.closeButton,R]),me=Re.useMemo(()=>m.duration||B||iD,[m.duration,B]),ge=Re.useRef(0),be=Re.useRef(0),Oe=Re.useRef(0),Xe=Re.useRef(null),[Ge,wt]=K.split("-"),de=Re.useMemo(()=>S.reduce((Ue,tt,pt)=>pt>=De?Ue:Ue+tt.height,0),[S,De]),ot=Ane(),We=m.invert||p,rt=G==="loading";be.current=Re.useMemo(()=>De*q+de,[De,de]),Re.useEffect(()=>{Me.current=me},[me]),Re.useEffect(()=>{fe(!0)},[]),Re.useEffect(()=>{let Ue=Q.current;if(Ue){let tt=Ue.getBoundingClientRect().height;return Ne(tt),v(pt=>[{toastId:m.id,height:tt,position:m.position},...pt]),()=>v(pt=>pt.filter(Tt=>Tt.toastId!==m.id))}},[v,m.id]),Re.useLayoutEffect(()=>{if(!Z)return;let Ue=Q.current,tt=Ue.style.height;Ue.style.height="auto";let pt=Ue.getBoundingClientRect().height;Ue.style.height=tt,Ne(pt),v(Tt=>Tt.find(rn=>rn.toastId===m.id)?Tt.map(rn=>rn.toastId===m.id?{...rn,height:pt}:rn):[{toastId:m.id,height:pt,position:m.position},...Tt])},[Z,m.title,m.description,v,m.id]);let je=Re.useCallback(()=>{xe(!0),Qe(be.current),v(Ue=>Ue.filter(tt=>tt.toastId!==m.id)),setTimeout(()=>{T(m)},Hne)},[m,T,v,be]);Re.useEffect(()=>{if(m.promise&&G==="loading"||m.duration===1/0||m.type==="loading")return;let Ue;return A||w||$&&ot?(()=>{if(Oe.current<ge.current){let tt=new Date().getTime()-ge.current;Me.current=Me.current-tt}Oe.current=new Date().getTime()})():Me.current!==1/0&&(ge.current=new Date().getTime(),Ue=setTimeout(()=>{var tt;(tt=m.onAutoClose)==null||tt.call(m,m),je()},Me.current)),()=>clearTimeout(Ue)},[A,w,m,G,$,ot,je]),Re.useEffect(()=>{m.delete&&je()},[je,m.delete]);function ke(){var Ue,tt,pt;return D!=null&&D.loading?Re.createElement("div",{className:ao(F==null?void 0:F.loader,(Ue=m==null?void 0:m.classNames)==null?void 0:Ue.loader,"sonner-loader"),"data-visible":G==="loading"},D.loading):ee?Re.createElement("div",{className:ao(F==null?void 0:F.loader,(tt=m==null?void 0:m.classNames)==null?void 0:tt.loader,"sonner-loader"),"data-visible":G==="loading"},ee):Re.createElement(Sne,{className:ao(F==null?void 0:F.loader,(pt=m==null?void 0:m.classNames)==null?void 0:pt.loader),visible:G==="loading"})}return Re.createElement("li",{tabIndex:0,ref:Q,className:ao(z,ce,F==null?void 0:F.toast,(e=m==null?void 0:m.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[G],(n=m==null?void 0:m.classNames)==null?void 0:n[G]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:k,"data-styled":!(m.jsx||m.unstyled||x),"data-mounted":Z,"data-promise":!!m.promise,"data-swiped":ft,"data-removed":we,"data-visible":re,"data-y-position":Ge,"data-x-position":wt,"data-index":E,"data-front":I,"data-swiping":Ve,"data-dismissible":ae,"data-type":G,"data-invert":We,"data-swipe-out":et,"data-swipe-direction":oe,"data-expanded":!!(A||O&&Z),style:{"--index":E,"--toasts-before":E,"--z-index":C.length-E,"--offset":`${we?ht:be.current}px`,"--initial-height":O?"auto":`${St}px`,...P,...m.style},onDragEnd:()=>{Pe(!1),Y(null),Xe.current=null},onPointerDown:Ue=>{rt||!ae||(st.current=new Date,Qe(be.current),Ue.target.setPointerCapture(Ue.pointerId),Ue.target.tagName!=="BUTTON"&&(Pe(!0),Xe.current={x:Ue.clientX,y:Ue.clientY}))},onPointerUp:()=>{var Ue,tt,pt,Tt;if(et||!ae)return;Xe.current=null;let rn=Number(((Ue=Q.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),$t=Number(((tt=Q.current)==null?void 0:tt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Pn=new Date().getTime()-((pt=st.current)==null?void 0:pt.getTime()),vn=U==="x"?rn:$t,dn=Math.abs(vn)/Pn;if(Math.abs(vn)>=Bne||dn>.11){Qe(be.current),(Tt=m.onDismiss)==null||Tt.call(m,m),ne(U==="x"?rn>0?"right":"left":$t>0?"down":"up"),je(),te(!0),Ye(!1);return}Pe(!1),Y(null)},onPointerMove:Ue=>{var tt,pt,Tt,rn;if(!Xe.current||!ae||((tt=window.getSelection())==null?void 0:tt.toString().length)>0)return;let $t=Ue.clientY-Xe.current.y,Pn=Ue.clientX-Xe.current.x,vn=(pt=t.swipeDirections)!=null?pt:Vne(K);!U&&(Math.abs(Pn)>1||Math.abs($t)>1)&&Y(Math.abs(Pn)>Math.abs($t)?"x":"y");let dn={x:0,y:0};U==="y"?(vn.includes("top")||vn.includes("bottom"))&&(vn.includes("top")&&$t<0||vn.includes("bottom")&&$t>0)&&(dn.y=$t):U==="x"&&(vn.includes("left")||vn.includes("right"))&&(vn.includes("left")&&Pn<0||vn.includes("right")&&Pn>0)&&(dn.x=Pn),(Math.abs(dn.x)>0||Math.abs(dn.y)>0)&&Ye(!0),(Tt=Q.current)==null||Tt.style.setProperty("--swipe-amount-x",`${dn.x}px`),(rn=Q.current)==null||rn.style.setProperty("--swipe-amount-y",`${dn.y}px`)}},Je&&!m.jsx?Re.createElement("button",{"aria-label":ie,"data-disabled":rt,"data-close-button":!0,onClick:rt||!ae?()=>{}:()=>{var Ue;je(),(Ue=m.onDismiss)==null||Ue.call(m,m)},className:ao(F==null?void 0:F.closeButton,(i=m==null?void 0:m.classNames)==null?void 0:i.closeButton)},(s=D==null?void 0:D.close)!=null?s:Tne):null,m.jsx||b.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:Re.createElement(Re.Fragment,null,G||m.icon||m.promise?Re.createElement("div",{"data-icon":"",className:ao(F==null?void 0:F.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||ke():null,m.type!=="loading"?m.icon||(D==null?void 0:D[G])||wne(G):null):null,Re.createElement("div",{"data-content":"",className:ao(F==null?void 0:F.content,(a=m==null?void 0:m.classNames)==null?void 0:a.content)},Re.createElement("div",{"data-title":"",className:ao(F==null?void 0:F.title,(l=m==null?void 0:m.classNames)==null?void 0:l.title)},typeof m.title=="function"?m.title():m.title),m.description?Re.createElement("div",{"data-description":"",className:ao(H,Ae,F==null?void 0:F.description,(c=m==null?void 0:m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),b.isValidElement(m.cancel)?m.cancel:m.cancel&&Gy(m.cancel)?Re.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||M,onClick:Ue=>{var tt,pt;Gy(m.cancel)&&ae&&((pt=(tt=m.cancel).onClick)==null||pt.call(tt,Ue),je())},className:ao(F==null?void 0:F.cancelButton,(u=m==null?void 0:m.classNames)==null?void 0:u.cancelButton)},m.cancel.label):null,b.isValidElement(m.action)?m.action:m.action&&Gy(m.action)?Re.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||L,onClick:Ue=>{var tt,pt;Gy(m.action)&&((pt=(tt=m.action).onClick)==null||pt.call(tt,Ue),!Ue.defaultPrevented&&je())},className:ao(F==null?void 0:F.actionButton,(d=m==null?void 0:m.classNames)==null?void 0:d.actionButton)},m.action.label):null))};function sD(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function Wne(t,e){let n={};return[t,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?jne:Fne;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var Gne=b.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:d,duration:p,style:m,visibleToasts:x=One,toastOptions:w,dir:v=sD(),gap:y=zne,loadingIcon:S,icons:E,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:A}=t,[T,k]=Re.useState([]),R=Re.useMemo(()=>Array.from(new Set([r].concat(T.filter($=>$.position).map($=>$.position)))),[T,r]),[P,M]=Re.useState([]),[L,z]=Re.useState(!1),[H,B]=Re.useState(!1),[K,q]=Re.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ee=Re.useRef(null),O=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=Re.useRef(null),D=Re.useRef(!1),ie=Re.useCallback($=>{k(U=>{var Y;return(Y=U.find(oe=>oe.id===$.id))!=null&&Y.delete||Fi.dismiss($.id),U.filter(({id:oe})=>oe!==$.id)})},[]);return Re.useEffect(()=>Fi.subscribe($=>{if($.dismiss){k(U=>U.map(Y=>Y.id===$.id?{...Y,delete:!0}:Y));return}setTimeout(()=>{jT.flushSync(()=>{k(U=>{let Y=U.findIndex(oe=>oe.id===$.id);return Y!==-1?[...U.slice(0,Y),{...U[Y],...$},...U.slice(Y+1)]:[$,...U]})})})}),[]),Re.useEffect(()=>{if(u!=="system"){q(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?q("dark"):q("light")),typeof window>"u")return;let $=window.matchMedia("(prefers-color-scheme: dark)");try{$.addEventListener("change",({matches:U})=>{q(U?"dark":"light")})}catch{$.addListener(({matches:Y})=>{try{q(Y?"dark":"light")}catch(oe){console.error(oe)}})}},[u]),Re.useEffect(()=>{T.length<=1&&z(!1)},[T]),Re.useEffect(()=>{let $=U=>{var Y,oe;i.every(ne=>U[ne]||U.code===ne)&&(z(!0),(Y=ee.current)==null||Y.focus()),U.code==="Escape"&&(document.activeElement===ee.current||(oe=ee.current)!=null&&oe.contains(document.activeElement))&&z(!1)};return document.addEventListener("keydown",$),()=>document.removeEventListener("keydown",$)},[i]),Re.useEffect(()=>{if(ee.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,D.current=!1)}},[ee.current]),Re.createElement("section",{ref:e,"aria-label":`${C} ${O}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map(($,U)=>{var Y;let[oe,ne]=$.split("-");return T.length?Re.createElement("ol",{key:$,dir:v==="auto"?sD():v,tabIndex:-1,ref:ee,className:a,"data-sonner-toaster":!0,"data-theme":K,"data-y-position":oe,"data-lifted":L&&T.length>1&&!s,"data-x-position":ne,style:{"--front-toast-height":`${((Y=P[0])==null?void 0:Y.height)||0}px`,"--width":`${Une}px`,"--gap":`${y}px`,...m,...Wne(l,c)},onBlur:Z=>{D.current&&!Z.currentTarget.contains(Z.relatedTarget)&&(D.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||D.current||(D.current=!0,F.current=Z.relatedTarget)},onMouseEnter:()=>z(!0),onMouseMove:()=>z(!0),onMouseLeave:()=>{H||z(!1)},onDragEnd:()=>z(!1),onPointerDown:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||B(!0)},onPointerUp:()=>B(!1)},T.filter(Z=>!Z.position&&U===0||Z.position===$).map((Z,fe)=>{var we,xe;return Re.createElement($ne,{key:Z.id,icons:E,index:fe,toast:Z,defaultRichColors:d,duration:(we=w==null?void 0:w.duration)!=null?we:p,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:n,visibleToasts:x,closeButton:(xe=w==null?void 0:w.closeButton)!=null?xe:o,interacting:H,position:$,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,removeToast:ie,toasts:T.filter(Ve=>Ve.position==Z.position),heights:P.filter(Ve=>Ve.position==Z.position),setHeights:M,expandByDefault:s,gap:y,loadingIcon:S,expanded:L,pauseWhenPageIsHidden:A,swipeDirections:t.swipeDirections})})):null}))});const qne=({...t})=>{const{theme:e="system"}=Ts();return h.jsx(Gne,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var Xne=qM[" useId ".trim().toString()]||(()=>{}),Kne=0;function Ur(t){const[e,n]=b.useState(Xne());return Mr(()=>{n(r=>r??String(Kne++))},[t]),e?`radix-${e}`:""}const Yne=["top","right","bottom","left"],Nc=Math.min,fs=Math.max,Wx=Math.round,qy=Math.floor,oa=t=>({x:t,y:t}),Jne={left:"right",right:"left",bottom:"top",top:"bottom"},Qne={start:"end",end:"start"};function WE(t,e,n){return fs(t,Nc(e,n))}function sl(t,e){return typeof t=="function"?t(e):t}function ol(t){return t.split("-")[0]}function kh(t){return t.split("-")[1]}function QT(t){return t==="x"?"y":"x"}function ZT(t){return t==="y"?"height":"width"}function ta(t){return["top","bottom"].includes(ol(t))?"y":"x"}function eA(t){return QT(ta(t))}function Zne(t,e,n){n===void 0&&(n=!1);const r=kh(t),i=eA(t),s=ZT(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Gx(o)),[o,Gx(o)]}function ere(t){const e=Gx(t);return[GE(t),e,GE(e)]}function GE(t){return t.replace(/start|end/g,e=>Qne[e])}function tre(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function nre(t,e,n,r){const i=kh(t);let s=tre(ol(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(GE)))),s}function Gx(t){return t.replace(/left|right|bottom|top/g,e=>Jne[e])}function rre(t){return{top:0,right:0,bottom:0,left:0,...t}}function h4(t){return typeof t!="number"?rre(t):{top:t,right:t,bottom:t,left:t}}function qx(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function oD(t,e,n){let{reference:r,floating:i}=t;const s=ta(e),o=eA(e),a=ZT(o),l=ol(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:u,y:r.y-i.height};break;case"bottom":m={x:u,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:d};break;case"left":m={x:r.x-i.width,y:d};break;default:m={x:r.x,y:r.y}}switch(kh(e)){case"start":m[o]-=p*(n&&c?-1:1);break;case"end":m[o]+=p*(n&&c?-1:1);break}return m}const ire=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=oD(c,r,l),p=r,m={},x=0;for(let w=0;w<a.length;w++){const{name:v,fn:y}=a[w],{x:S,y:E,data:C,reset:A}=await y({x:u,y:d,initialPlacement:r,placement:p,strategy:i,middlewareData:m,rects:c,platform:o,elements:{reference:t,floating:e}});u=S??u,d=E??d,m={...m,[v]:{...m[v],...C}},A&&x<=50&&(x++,typeof A=="object"&&(A.placement&&(p=A.placement),A.rects&&(c=A.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):A.rects),{x:u,y:d}=oD(c,p,l)),w=-1)}return{x:u,y:d,placement:p,strategy:i,middlewareData:m}};async function Rm(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:m=0}=sl(e,t),x=h4(m),v=a[p?d==="floating"?"reference":"floating":d],y=qx(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(v)))==null||n?v:v.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),S=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),C=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},A=qx(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:S,offsetParent:E,strategy:l}):S);return{top:(y.top-A.top+x.top)/C.y,bottom:(A.bottom-y.bottom+x.bottom)/C.y,left:(y.left-A.left+x.left)/C.x,right:(A.right-y.right+x.right)/C.x}}const sre=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=sl(t,e)||{};if(c==null)return{};const d=h4(u),p={x:n,y:r},m=eA(i),x=ZT(m),w=await o.getDimensions(c),v=m==="y",y=v?"top":"left",S=v?"bottom":"right",E=v?"clientHeight":"clientWidth",C=s.reference[x]+s.reference[m]-p[m]-s.floating[x],A=p[m]-s.reference[m],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let k=T?T[E]:0;(!k||!await(o.isElement==null?void 0:o.isElement(T)))&&(k=a.floating[E]||s.floating[x]);const R=C/2-A/2,P=k/2-w[x]/2-1,M=Nc(d[y],P),L=Nc(d[S],P),z=M,H=k-w[x]-L,B=k/2-w[x]/2+R,K=WE(z,B,H),q=!l.arrow&&kh(i)!=null&&B!==K&&s.reference[x]/2-(B<z?M:L)-w[x]/2<0,ee=q?B<z?B-z:B-H:0;return{[m]:p[m]+ee,data:{[m]:K,centerOffset:B-K-ee,...q&&{alignmentOffset:ee}},reset:q}}}),ore=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:w=!0,...v}=sl(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=ol(i),S=ta(a),E=ol(a)===a,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),A=p||(E||!w?[Gx(a)]:ere(a)),T=x!=="none";!p&&T&&A.push(...nre(a,w,x,C));const k=[a,...A],R=await Rm(e,v),P=[];let M=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&P.push(R[y]),d){const B=Zne(i,o,C);P.push(R[B[0]],R[B[1]])}if(M=[...M,{placement:i,overflows:P}],!P.every(B=>B<=0)){var L,z;const B=(((L=s.flip)==null?void 0:L.index)||0)+1,K=k[B];if(K&&(!(d==="alignment"?S!==ta(K):!1)||M.every(O=>O.overflows[0]>0&&ta(O.placement)===S)))return{data:{index:B,overflows:M},reset:{placement:K}};let q=(z=M.filter(ee=>ee.overflows[0]<=0).sort((ee,O)=>ee.overflows[1]-O.overflows[1])[0])==null?void 0:z.placement;if(!q)switch(m){case"bestFit":{var H;const ee=(H=M.filter(O=>{if(T){const F=ta(O.placement);return F===S||F==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(F=>F>0).reduce((F,D)=>F+D,0)]).sort((O,F)=>O[1]-F[1])[0])==null?void 0:H[0];ee&&(q=ee);break}case"initialPlacement":q=a;break}if(i!==q)return{reset:{placement:q}}}return{}}}};function aD(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function lD(t){return Yne.some(e=>t[e]>=0)}const are=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=sl(t,e);switch(r){case"referenceHidden":{const s=await Rm(e,{...i,elementContext:"reference"}),o=aD(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:lD(o)}}}case"escaped":{const s=await Rm(e,{...i,altBoundary:!0}),o=aD(s,n.floating);return{data:{escapedOffsets:o,escaped:lD(o)}}}default:return{}}}}};async function lre(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=ol(n),a=kh(n),l=ta(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=sl(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:x}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof x=="number"&&(m=a==="end"?x*-1:x),l?{x:m*u,y:p*c}:{x:p*c,y:m*u}}const cre=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await lre(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},ure=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:y,y:S}=v;return{x:y,y:S}}},...l}=sl(t,e),c={x:n,y:r},u=await Rm(e,l),d=ta(ol(i)),p=QT(d);let m=c[p],x=c[d];if(s){const v=p==="y"?"top":"left",y=p==="y"?"bottom":"right",S=m+u[v],E=m-u[y];m=WE(S,m,E)}if(o){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",S=x+u[v],E=x-u[y];x=WE(S,x,E)}const w=a.fn({...e,[p]:m,[d]:x});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[p]:s,[d]:o}}}}}},dre=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=sl(t,e),u={x:n,y:r},d=ta(i),p=QT(d);let m=u[p],x=u[d];const w=sl(a,e),v=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(l){const E=p==="y"?"height":"width",C=s.reference[p]-s.floating[E]+v.mainAxis,A=s.reference[p]+s.reference[E]-v.mainAxis;m<C?m=C:m>A&&(m=A)}if(c){var y,S;const E=p==="y"?"width":"height",C=["top","left"].includes(ol(i)),A=s.reference[d]-s.floating[E]+(C&&((y=o.offset)==null?void 0:y[d])||0)+(C?0:v.crossAxis),T=s.reference[d]+s.reference[E]+(C?0:((S=o.offset)==null?void 0:S[d])||0)-(C?v.crossAxis:0);x<A?x=A:x>T&&(x=T)}return{[p]:m,[d]:x}}}},fre=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=sl(t,e),u=await Rm(e,c),d=ol(i),p=kh(i),m=ta(i)==="y",{width:x,height:w}=s.floating;let v,y;d==="top"||d==="bottom"?(v=d,y=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,v=p==="end"?"top":"bottom");const S=w-u.top-u.bottom,E=x-u.left-u.right,C=Nc(w-u[v],S),A=Nc(x-u[y],E),T=!e.middlewareData.shift;let k=C,R=A;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(R=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=S),T&&!p){const M=fs(u.left,0),L=fs(u.right,0),z=fs(u.top,0),H=fs(u.bottom,0);m?R=x-2*(M!==0||L!==0?M+L:fs(u.left,u.right)):k=w-2*(z!==0||H!==0?z+H:fs(u.top,u.bottom))}await l({...e,availableWidth:R,availableHeight:k});const P=await o.getDimensions(a.floating);return x!==P.width||w!==P.height?{reset:{rects:!0}}:{}}}};function nw(){return typeof window<"u"}function Ph(t){return p4(t)?(t.nodeName||"").toLowerCase():"#document"}function vs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ma(t){var e;return(e=(p4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function p4(t){return nw()?t instanceof Node||t instanceof vs(t).Node:!1}function Ao(t){return nw()?t instanceof Element||t instanceof vs(t).Element:!1}function ca(t){return nw()?t instanceof HTMLElement||t instanceof vs(t).HTMLElement:!1}function cD(t){return!nw()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof vs(t).ShadowRoot}function gg(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Ro(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function hre(t){return["table","td","th"].includes(Ph(t))}function rw(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function tA(t){const e=nA(),n=Ao(t)?Ro(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function pre(t){let e=kc(t);for(;ca(e)&&!lh(e);){if(tA(e))return e;if(rw(e))return null;e=kc(e)}return null}function nA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function lh(t){return["html","body","#document"].includes(Ph(t))}function Ro(t){return vs(t).getComputedStyle(t)}function iw(t){return Ao(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function kc(t){if(Ph(t)==="html")return t;const e=t.assignedSlot||t.parentNode||cD(t)&&t.host||ma(t);return cD(e)?e.host:e}function m4(t){const e=kc(t);return lh(e)?t.ownerDocument?t.ownerDocument.body:t.body:ca(e)&&gg(e)?e:m4(e)}function Nm(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=m4(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=vs(i);if(s){const a=qE(o);return e.concat(o,o.visualViewport||[],gg(i)?i:[],a&&n?Nm(a):[])}return e.concat(i,Nm(i,[],n))}function qE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function g4(t){const e=Ro(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ca(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Wx(n)!==s||Wx(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function rA(t){return Ao(t)?t:t.contextElement}function If(t){const e=rA(t);if(!ca(e))return oa(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=g4(e);let o=(s?Wx(n.width):n.width)/r,a=(s?Wx(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const mre=oa(0);function y4(t){const e=vs(t);return!nA()||!e.visualViewport?mre:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function gre(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==vs(t)?!1:e}function ed(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=rA(t);let o=oa(1);e&&(r?Ao(r)&&(o=If(r)):o=If(t));const a=gre(s,n,r)?y4(s):oa(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const p=vs(s),m=r&&Ao(r)?vs(r):r;let x=p,w=qE(x);for(;w&&r&&m!==x;){const v=If(w),y=w.getBoundingClientRect(),S=Ro(w),E=y.left+(w.clientLeft+parseFloat(S.paddingLeft))*v.x,C=y.top+(w.clientTop+parseFloat(S.paddingTop))*v.y;l*=v.x,c*=v.y,u*=v.x,d*=v.y,l+=E,c+=C,x=vs(w),w=qE(x)}}return qx({width:u,height:d,x:l,y:c})}function iA(t,e){const n=iw(t).scrollLeft;return e?e.left+n:ed(ma(t)).left+n}function v4(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:iA(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function yre(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=ma(r),a=e?rw(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=oa(1);const u=oa(0),d=ca(r);if((d||!d&&!s)&&((Ph(r)!=="body"||gg(o))&&(l=iw(r)),ca(r))){const m=ed(r);c=If(r),u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}const p=o&&!d&&!s?v4(o,l,!0):oa(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+p.x,y:n.y*c.y-l.scrollTop*c.y+u.y+p.y}}function vre(t){return Array.from(t.getClientRects())}function xre(t){const e=ma(t),n=iw(t),r=t.ownerDocument.body,i=fs(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=fs(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+iA(t);const a=-n.scrollTop;return Ro(r).direction==="rtl"&&(o+=fs(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function wre(t,e){const n=vs(t),r=ma(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=nA();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function bre(t,e){const n=ed(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=ca(t)?If(t):oa(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function uD(t,e,n){let r;if(e==="viewport")r=wre(t,n);else if(e==="document")r=xre(ma(t));else if(Ao(e))r=bre(e,n);else{const i=y4(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return qx(r)}function x4(t,e){const n=kc(t);return n===e||!Ao(n)||lh(n)?!1:Ro(n).position==="fixed"||x4(n,e)}function Sre(t,e){const n=e.get(t);if(n)return n;let r=Nm(t,[],!1).filter(a=>Ao(a)&&Ph(a)!=="body"),i=null;const s=Ro(t).position==="fixed";let o=s?kc(t):t;for(;Ao(o)&&!lh(o);){const a=Ro(o),l=tA(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||gg(o)&&!l&&x4(t,o))?r=r.filter(u=>u!==o):i=a,o=kc(o)}return e.set(t,r),r}function _re(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?rw(e)?[]:Sre(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=uD(e,u,i);return c.top=fs(d.top,c.top),c.right=Nc(d.right,c.right),c.bottom=Nc(d.bottom,c.bottom),c.left=fs(d.left,c.left),c},uD(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Ere(t){const{width:e,height:n}=g4(t);return{width:e,height:n}}function Cre(t,e,n){const r=ca(e),i=ma(e),s=n==="fixed",o=ed(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=oa(0);function c(){l.x=iA(i)}if(r||!r&&!s)if((Ph(e)!=="body"||gg(i))&&(a=iw(e)),r){const m=ed(e,!0,s,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?v4(i,a):oa(0),d=o.left+a.scrollLeft-l.x-u.x,p=o.top+a.scrollTop-l.y-u.y;return{x:d,y:p,width:o.width,height:o.height}}function r1(t){return Ro(t).position==="static"}function dD(t,e){if(!ca(t)||Ro(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ma(t)===n&&(n=n.ownerDocument.body),n}function w4(t,e){const n=vs(t);if(rw(t))return n;if(!ca(t)){let i=kc(t);for(;i&&!lh(i);){if(Ao(i)&&!r1(i))return i;i=kc(i)}return n}let r=dD(t,e);for(;r&&hre(r)&&r1(r);)r=dD(r,e);return r&&lh(r)&&r1(r)&&!tA(r)?n:r||pre(t)||n}const Mre=async function(t){const e=this.getOffsetParent||w4,n=this.getDimensions,r=await n(t.floating);return{reference:Cre(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Tre(t){return Ro(t).direction==="rtl"}const Are={convertOffsetParentRelativeRectToViewportRelativeRect:yre,getDocumentElement:ma,getClippingRect:_re,getOffsetParent:w4,getElementRects:Mre,getClientRects:vre,getDimensions:Ere,getScale:If,isElement:Ao,isRTL:Tre};function b4(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Rre(t,e){let n=null,r;const i=ma(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:p,height:m}=c;if(a||e(),!p||!m)return;const x=qy(d),w=qy(i.clientWidth-(u+p)),v=qy(i.clientHeight-(d+m)),y=qy(u),E={rootMargin:-x+"px "+-w+"px "+-v+"px "+-y+"px",threshold:fs(0,Nc(1,l))||1};let C=!0;function A(T){const k=T[0].intersectionRatio;if(k!==l){if(!C)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!b4(c,t.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(A,{...E,root:i.ownerDocument})}catch{n=new IntersectionObserver(A,E)}n.observe(t)}return o(!0),s}function Nre(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=rA(t),u=i||s?[...c?Nm(c):[],...Nm(e)]:[];u.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=c&&a?Rre(c,n):null;let p=-1,m=null;o&&(m=new ResizeObserver(y=>{let[S]=y;S&&S.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=m)==null||E.observe(e)})),n()}),c&&!l&&m.observe(c),m.observe(e));let x,w=l?ed(t):null;l&&v();function v(){const y=ed(t);w&&!b4(w,y)&&n(),w=y,x=requestAnimationFrame(v)}return n(),()=>{var y;u.forEach(S=>{i&&S.removeEventListener("scroll",n),s&&S.removeEventListener("resize",n)}),d==null||d(),(y=m)==null||y.disconnect(),m=null,l&&cancelAnimationFrame(x)}}const kre=cre,Pre=ure,Dre=ore,Ire=fre,Lre=are,fD=sre,Ore=dre,Fre=(t,e,n)=>{const r=new Map,i={platform:Are,...n},s={...i.platform,_c:r};return ire(t,e,{...i,platform:s})};var jre=typeof document<"u",Ure=function(){},ex=jre?b.useLayoutEffect:Ure;function Xx(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Xx(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Xx(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function S4(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function hD(t,e){const n=S4(t);return Math.round(e*n)/n}function i1(t){const e=b.useRef(t);return ex(()=>{e.current=t}),e}function zre(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=b.useState(r);Xx(p,r)||m(r);const[x,w]=b.useState(null),[v,y]=b.useState(null),S=b.useCallback(O=>{O!==T.current&&(T.current=O,w(O))},[]),E=b.useCallback(O=>{O!==k.current&&(k.current=O,y(O))},[]),C=s||x,A=o||v,T=b.useRef(null),k=b.useRef(null),R=b.useRef(u),P=l!=null,M=i1(l),L=i1(i),z=i1(c),H=b.useCallback(()=>{if(!T.current||!k.current)return;const O={placement:e,strategy:n,middleware:p};L.current&&(O.platform=L.current),Fre(T.current,k.current,O).then(F=>{const D={...F,isPositioned:z.current!==!1};B.current&&!Xx(R.current,D)&&(R.current=D,Ks.flushSync(()=>{d(D)}))})},[p,e,n,L,z]);ex(()=>{c===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,d(O=>({...O,isPositioned:!1})))},[c]);const B=b.useRef(!1);ex(()=>(B.current=!0,()=>{B.current=!1}),[]),ex(()=>{if(C&&(T.current=C),A&&(k.current=A),C&&A){if(M.current)return M.current(C,A,H);H()}},[C,A,H,M,P]);const K=b.useMemo(()=>({reference:T,floating:k,setReference:S,setFloating:E}),[S,E]),q=b.useMemo(()=>({reference:C,floating:A}),[C,A]),ee=b.useMemo(()=>{const O={position:n,left:0,top:0};if(!q.floating)return O;const F=hD(q.floating,u.x),D=hD(q.floating,u.y);return a?{...O,transform:"translate("+F+"px, "+D+"px)",...S4(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:D}},[n,a,q.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:H,refs:K,elements:q,floatingStyles:ee}),[u,H,K,q,ee])}const Bre=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?fD({element:r.current,padding:i}).fn(n):{}:r?fD({element:r,padding:i}).fn(n):{}}}},Hre=(t,e)=>({...kre(t),options:[t,e]}),Vre=(t,e)=>({...Pre(t),options:[t,e]}),$re=(t,e)=>({...Ore(t),options:[t,e]}),Wre=(t,e)=>({...Dre(t),options:[t,e]}),Gre=(t,e)=>({...Ire(t),options:[t,e]}),qre=(t,e)=>({...Lre(t),options:[t,e]}),Xre=(t,e)=>({...Bre(t),options:[t,e]});var Kre="Arrow",_4=b.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return h.jsx(bt.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});_4.displayName=Kre;var Yre=_4;function sA(t){const[e,n]=b.useState(void 0);return Mr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var oA="Popper",[E4,Uc]=Mi(oA),[Jre,C4]=E4(oA),M4=t=>{const{__scopePopper:e,children:n}=t,[r,i]=b.useState(null);return h.jsx(Jre,{scope:e,anchor:r,onAnchorChange:i,children:n})};M4.displayName=oA;var T4="PopperAnchor",A4=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=C4(T4,n),o=b.useRef(null),a=Lt(e,o);return b.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:h.jsx(bt.div,{...i,ref:a})});A4.displayName=T4;var aA="PopperContent",[Qre,Zre]=E4(aA),R4=b.forwardRef((t,e)=>{var Z,fe,we,xe,Ve,Pe;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:x,...w}=t,v=C4(aA,n),[y,S]=b.useState(null),E=Lt(e,et=>S(et)),[C,A]=b.useState(null),T=sA(C),k=(T==null?void 0:T.width)??0,R=(T==null?void 0:T.height)??0,P=r+(s!=="center"?"-"+s:""),M=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},L=Array.isArray(c)?c:[c],z=L.length>0,H={padding:M,boundary:L.filter(tie),altBoundary:z},{refs:B,floatingStyles:K,placement:q,isPositioned:ee,middlewareData:O}=zre({strategy:"fixed",placement:P,whileElementsMounted:(...et)=>Nre(...et,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[Hre({mainAxis:i+R,alignmentAxis:o}),l&&Vre({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?$re():void 0,...H}),l&&Wre({...H}),Gre({...H,apply:({elements:et,rects:te,availableWidth:ft,availableHeight:Ye})=>{const{width:ht,height:Qe}=te.reference,St=et.floating.style;St.setProperty("--radix-popper-available-width",`${ft}px`),St.setProperty("--radix-popper-available-height",`${Ye}px`),St.setProperty("--radix-popper-anchor-width",`${ht}px`),St.setProperty("--radix-popper-anchor-height",`${Qe}px`)}}),C&&Xre({element:C,padding:a}),nie({arrowWidth:k,arrowHeight:R}),p&&qre({strategy:"referenceHidden",...H})]}),[F,D]=P4(q),ie=Ki(x);Mr(()=>{ee&&(ie==null||ie())},[ee,ie]);const $=(Z=O.arrow)==null?void 0:Z.x,U=(fe=O.arrow)==null?void 0:fe.y,Y=((we=O.arrow)==null?void 0:we.centerOffset)!==0,[oe,ne]=b.useState();return Mr(()=>{y&&ne(window.getComputedStyle(y).zIndex)},[y]),h.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:ee?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:oe,"--radix-popper-transform-origin":[(xe=O.transformOrigin)==null?void 0:xe.x,(Ve=O.transformOrigin)==null?void 0:Ve.y].join(" "),...((Pe=O.hide)==null?void 0:Pe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(Qre,{scope:n,placedSide:F,onArrowChange:A,arrowX:$,arrowY:U,shouldHideArrow:Y,children:h.jsx(bt.div,{"data-side":F,"data-align":D,...w,ref:E,style:{...w.style,animation:ee?void 0:"none"}})})})});R4.displayName=aA;var N4="PopperArrow",eie={top:"bottom",right:"left",bottom:"top",left:"right"},k4=b.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=Zre(N4,r),o=eie[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(Yre,{...i,ref:n,style:{...i.style,display:"block"}})})});k4.displayName=N4;function tie(t){return t!==null}var nie=t=>({name:"transformOrigin",options:t,fn(e){var v,y,S;const{placement:n,rects:r,middlewareData:i}=e,o=((v=i.arrow)==null?void 0:v.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=P4(n),d={start:"0%",center:"50%",end:"100%"}[u],p=(((y=i.arrow)==null?void 0:y.x)??0)+a/2,m=(((S=i.arrow)==null?void 0:S.y)??0)+l/2;let x="",w="";return c==="bottom"?(x=o?d:`${p}px`,w=`${-l}px`):c==="top"?(x=o?d:`${p}px`,w=`${r.floating.height+l}px`):c==="right"?(x=`${-l}px`,w=o?d:`${m}px`):c==="left"&&(x=`${r.floating.width+l}px`,w=o?d:`${m}px`),{data:{x,y:w}}}});function P4(t){const[e,n="center"]=t.split("-");return[e,n]}var lA=M4,yg=A4,sw=R4,ow=k4,[aw,U2e]=Mi("Tooltip",[Uc]),cA=Uc(),D4="TooltipProvider",rie=700,pD="tooltip.open",[iie,I4]=aw(D4),L4=t=>{const{__scopeTooltip:e,delayDuration:n=rie,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=b.useRef(!0),a=b.useRef(!1),l=b.useRef(0);return b.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),h.jsx(iie,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};L4.displayName=D4;var O4="Tooltip",[z2e,lw]=aw(O4),XE="TooltipTrigger",sie=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=lw(XE,n),s=I4(XE,n),o=cA(n),a=b.useRef(null),l=Lt(e,a,i.onTriggerChange),c=b.useRef(!1),u=b.useRef(!1),d=b.useCallback(()=>c.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),h.jsx(yg,{asChild:!0,...o,children:h.jsx(bt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:it(t.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:it(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:it(t.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:it(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:it(t.onBlur,i.onClose),onClick:it(t.onClick,i.onClose)})})});sie.displayName=XE;var oie="TooltipPortal",[B2e,aie]=aw(oie,{forceMount:void 0}),ch="TooltipContent",F4=b.forwardRef((t,e)=>{const n=aie(ch,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=lw(ch,t.__scopeTooltip);return h.jsx(Ms,{present:r||o.open,children:o.disableHoverableContent?h.jsx(j4,{side:i,...s,ref:e}):h.jsx(lie,{side:i,...s,ref:e})})}),lie=b.forwardRef((t,e)=>{const n=lw(ch,t.__scopeTooltip),r=I4(ch,t.__scopeTooltip),i=b.useRef(null),s=Lt(e,i),[o,a]=b.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:d}=r,p=b.useCallback(()=>{a(null),d(!1)},[d]),m=b.useCallback((x,w)=>{const v=x.currentTarget,y={x:x.clientX,y:x.clientY},S=hie(y,v.getBoundingClientRect()),E=pie(y,S),C=mie(w.getBoundingClientRect()),A=yie([...E,...C]);a(A),d(!0)},[d]);return b.useEffect(()=>()=>p(),[p]),b.useEffect(()=>{if(l&&u){const x=v=>m(v,u),w=v=>m(v,l);return l.addEventListener("pointerleave",x),u.addEventListener("pointerleave",w),()=>{l.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",w)}}},[l,u,m,p]),b.useEffect(()=>{if(o){const x=w=>{const v=w.target,y={x:w.clientX,y:w.clientY},S=(l==null?void 0:l.contains(v))||(u==null?void 0:u.contains(v)),E=!gie(y,o);S?p():E&&(p(),c())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[l,u,o,c,p]),h.jsx(j4,{...t,ref:s})}),[cie,uie]=aw(O4,{isInside:!1}),die=yU("TooltipContent"),j4=b.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=lw(ch,n),c=cA(n),{onClose:u}=l;return b.useEffect(()=>(document.addEventListener(pD,u),()=>document.removeEventListener(pD,u)),[u]),b.useEffect(()=>{if(l.trigger){const d=p=>{const m=p.target;m!=null&&m.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),h.jsx(pd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:h.jsxs(sw,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[h.jsx(die,{children:r}),h.jsx(cie,{scope:n,isInside:!0,children:h.jsx(kee,{id:l.contentId,role:"tooltip",children:i||r})})]})})});F4.displayName=ch;var U4="TooltipArrow",fie=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=cA(n);return uie(U4,n).isInside?null:h.jsx(ow,{...i,...r,ref:e})});fie.displayName=U4;function hie(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function pie(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function mie(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function gie(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,p=l.y;u>r!=p>r&&n<(d-c)*(r-u)/(p-u)+c&&(i=!i)}return i}function yie(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),vie(e)}function vie(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var xie=L4,z4=F4;const wie=xie,bie=b.forwardRef(({className:t,sideOffset:e=4,...n},r)=>h.jsx(z4,{ref:r,sideOffset:e,className:dt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));bie.displayName=z4.displayName;var cw=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},uw=typeof window>"u"||"Deno"in globalThis;function po(){}function Sie(t,e){return typeof t=="function"?t(e):t}function _ie(t){return typeof t=="number"&&t>=0&&t!==1/0}function Eie(t,e){return Math.max(t+(e||0)-Date.now(),0)}function KE(t,e){return typeof t=="function"?t(e):t}function Cie(t,e){return typeof t=="function"?t(e):t}function mD(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==uA(o,e.options))return!1}else if(!Pm(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function gD(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(km(e.options.mutationKey)!==km(s))return!1}else if(!Pm(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function uA(t,e){return((e==null?void 0:e.queryKeyHashFn)||km)(t)}function km(t){return JSON.stringify(t,(e,n)=>YE(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Pm(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Pm(t[n],e[n])):!1}function B4(t,e){if(t===e)return t;const n=yD(t)&&yD(e);if(n||YE(t)&&YE(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,a=n?[]:{},l=new Set(r);let c=0;for(let u=0;u<o;u++){const d=n?u:s[u];(!n&&l.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,c++):(a[d]=B4(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&c++)}return i===o&&c===i?t:a}return e}function yD(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function YE(t){if(!vD(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!vD(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function vD(t){return Object.prototype.toString.call(t)==="[object Object]"}function Mie(t){return new Promise(e=>{setTimeout(e,t)})}function Tie(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?B4(t,e):e}function Aie(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Rie(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var dA=Symbol();function H4(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===dA?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Iu,Zl,$f,_F,Nie=(_F=class extends cw{constructor(){super();fn(this,Iu);fn(this,Zl);fn(this,$f);Ft(this,$f,e=>{if(!uw&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){ze(this,Zl)||this.setEventListener(ze(this,$f))}onUnsubscribe(){var e;this.hasListeners()||((e=ze(this,Zl))==null||e.call(this),Ft(this,Zl,void 0))}setEventListener(e){var n;Ft(this,$f,e),(n=ze(this,Zl))==null||n.call(this),Ft(this,Zl,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ze(this,Iu)!==e&&(Ft(this,Iu,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof ze(this,Iu)=="boolean"?ze(this,Iu):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Iu=new WeakMap,Zl=new WeakMap,$f=new WeakMap,_F),V4=new Nie,Wf,ec,Gf,EF,kie=(EF=class extends cw{constructor(){super();fn(this,Wf,!0);fn(this,ec);fn(this,Gf);Ft(this,Gf,e=>{if(!uw&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){ze(this,ec)||this.setEventListener(ze(this,Gf))}onUnsubscribe(){var e;this.hasListeners()||((e=ze(this,ec))==null||e.call(this),Ft(this,ec,void 0))}setEventListener(e){var n;Ft(this,Gf,e),(n=ze(this,ec))==null||n.call(this),Ft(this,ec,e(this.setOnline.bind(this)))}setOnline(e){ze(this,Wf)!==e&&(Ft(this,Wf,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ze(this,Wf)}},Wf=new WeakMap,ec=new WeakMap,Gf=new WeakMap,EF),Kx=new kie;function Pie(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function Die(t){return Math.min(1e3*2**t,3e4)}function $4(t){return(t??"online")==="online"?Kx.isOnline():!0}var W4=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function s1(t){return t instanceof W4}function G4(t){let e=!1,n=0,r=!1,i;const s=Pie(),o=w=>{var v;r||(p(new W4(w)),(v=t.abort)==null||v.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>V4.isFocused()&&(t.networkMode==="always"||Kx.isOnline())&&t.canRun(),u=()=>$4(t.networkMode)&&t.canRun(),d=w=>{var v;r||(r=!0,(v=t.onSuccess)==null||v.call(t,w),i==null||i(),s.resolve(w))},p=w=>{var v;r||(r=!0,(v=t.onError)==null||v.call(t,w),i==null||i(),s.reject(w))},m=()=>new Promise(w=>{var v;i=y=>{(r||c())&&w(y)},(v=t.onPause)==null||v.call(t)}).then(()=>{var w;i=void 0,r||(w=t.onContinue)==null||w.call(t)}),x=()=>{if(r)return;let w;const v=n===0?t.initialPromise:void 0;try{w=v??t.fn()}catch(y){w=Promise.reject(y)}Promise.resolve(w).then(d).catch(y=>{var T;if(r)return;const S=t.retry??(uw?0:3),E=t.retryDelay??Die,C=typeof E=="function"?E(n,y):E,A=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,y);if(e||!A){p(y);return}n++,(T=t.onFail)==null||T.call(t,n,y),Mie(C).then(()=>c()?void 0:m()).then(()=>{e?p(y):x()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?x():m().then(x),s)}}var Iie=t=>setTimeout(t,0);function Lie(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=Iie;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var yi=Lie(),Lu,CF,q4=(CF=class{constructor(){fn(this,Lu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),_ie(this.gcTime)&&Ft(this,Lu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(uw?1/0:5*60*1e3))}clearGcTimeout(){ze(this,Lu)&&(clearTimeout(ze(this,Lu)),Ft(this,Lu,void 0))}},Lu=new WeakMap,CF),qf,Xf,js,Ou,Qr,rg,Fu,mo,Oa,MF,Oie=(MF=class extends q4{constructor(e){super();fn(this,mo);fn(this,qf);fn(this,Xf);fn(this,js);fn(this,Ou);fn(this,Qr);fn(this,rg);fn(this,Fu);Ft(this,Fu,!1),Ft(this,rg,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ft(this,Ou,e.client),Ft(this,js,ze(this,Ou).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ft(this,qf,jie(this.options)),this.state=e.state??ze(this,qf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ze(this,Qr))==null?void 0:e.promise}setOptions(e){this.options={...ze(this,rg),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ze(this,js).remove(this)}setData(e,n){const r=Tie(this.state.data,e,this.options);return qr(this,mo,Oa).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){qr(this,mo,Oa).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=ze(this,Qr))==null?void 0:r.promise;return(i=ze(this,Qr))==null||i.cancel(e),n?n.then(po).catch(po):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ze(this,qf))}isActive(){return this.observers.some(e=>Cie(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===dA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>KE(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Eie(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=ze(this,Qr))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=ze(this,Qr))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ze(this,js).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(ze(this,Qr)&&(ze(this,Fu)?ze(this,Qr).cancel({revert:!0}):ze(this,Qr).cancelRetry()),this.scheduleGc()),ze(this,js).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||qr(this,mo,Oa).call(this,{type:"invalidate"})}fetch(e,n){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(ze(this,Qr))return ze(this,Qr).continueRetry(),ze(this,Qr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(m=>m.options.queryFn);p&&this.setOptions(p.options)}const r=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Ft(this,Fu,!0),r.signal)})},s=()=>{const p=H4(this.options,n),x=(()=>{const w={client:ze(this,Ou),queryKey:this.queryKey,meta:this.meta};return i(w),w})();return Ft(this,Fu,!1),this.options.persister?this.options.persister(p,x,this):p(x)},a=(()=>{const p={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:ze(this,Ou),state:this.state,fetchFn:s};return i(p),p})();(c=this.options.behavior)==null||c.onFetch(a,this),Ft(this,Xf,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&qr(this,mo,Oa).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=p=>{var m,x,w,v;s1(p)&&p.silent||qr(this,mo,Oa).call(this,{type:"error",error:p}),s1(p)||((x=(m=ze(this,js).config).onError)==null||x.call(m,p,this),(v=(w=ze(this,js).config).onSettled)==null||v.call(w,this.state.data,p,this)),this.scheduleGc()};return Ft(this,Qr,G4({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:p=>{var m,x,w,v;if(p===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(y){l(y);return}(x=(m=ze(this,js).config).onSuccess)==null||x.call(m,p,this),(v=(w=ze(this,js).config).onSettled)==null||v.call(w,p,this.state.error,this),this.scheduleGc()},onError:l,onFail:(p,m)=>{qr(this,mo,Oa).call(this,{type:"failed",failureCount:p,error:m})},onPause:()=>{qr(this,mo,Oa).call(this,{type:"pause"})},onContinue:()=>{qr(this,mo,Oa).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),ze(this,Qr).start()}},qf=new WeakMap,Xf=new WeakMap,js=new WeakMap,Ou=new WeakMap,Qr=new WeakMap,rg=new WeakMap,Fu=new WeakMap,mo=new WeakSet,Oa=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Fie(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return s1(i)&&i.revert&&ze(this,Xf)?{...ze(this,Xf),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),yi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ze(this,js).notify({query:this,type:"updated",action:e})})},MF);function Fie(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$4(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function jie(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Go,TF,Uie=(TF=class extends cw{constructor(e={}){super();fn(this,Go);this.config=e,Ft(this,Go,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??uA(i,n);let o=this.get(s);return o||(o=new Oie({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ze(this,Go).has(e.queryHash)||(ze(this,Go).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=ze(this,Go).get(e.queryHash);n&&(e.destroy(),n===e&&ze(this,Go).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){yi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ze(this,Go).get(e)}getAll(){return[...ze(this,Go).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>mD(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>mD(e,r)):n}notify(e){yi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){yi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){yi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Go=new WeakMap,TF),qo,mi,ju,Xo,zl,AF,zie=(AF=class extends q4{constructor(e){super();fn(this,Xo);fn(this,qo);fn(this,mi);fn(this,ju);this.mutationId=e.mutationId,Ft(this,mi,e.mutationCache),Ft(this,qo,[]),this.state=e.state||Bie(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ze(this,qo).includes(e)||(ze(this,qo).push(e),this.clearGcTimeout(),ze(this,mi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ft(this,qo,ze(this,qo).filter(n=>n!==e)),this.scheduleGc(),ze(this,mi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ze(this,qo).length||(this.state.status==="pending"?this.scheduleGc():ze(this,mi).remove(this))}continue(){var e;return((e=ze(this,ju))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,o,a,l,c,u,d,p,m,x,w,v,y,S,E,C,A,T,k,R;const n=()=>{qr(this,Xo,zl).call(this,{type:"continue"})};Ft(this,ju,G4({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(P,M)=>{qr(this,Xo,zl).call(this,{type:"failed",failureCount:P,error:M})},onPause:()=>{qr(this,Xo,zl).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ze(this,mi).canRun(this)}));const r=this.state.status==="pending",i=!ze(this,ju).canStart();try{if(r)n();else{qr(this,Xo,zl).call(this,{type:"pending",variables:e,isPaused:i}),await((o=(s=ze(this,mi).config).onMutate)==null?void 0:o.call(s,e,this));const M=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));M!==this.state.context&&qr(this,Xo,zl).call(this,{type:"pending",context:M,variables:e,isPaused:i})}const P=await ze(this,ju).start();return await((u=(c=ze(this,mi).config).onSuccess)==null?void 0:u.call(c,P,e,this.state.context,this)),await((p=(d=this.options).onSuccess)==null?void 0:p.call(d,P,e,this.state.context)),await((x=(m=ze(this,mi).config).onSettled)==null?void 0:x.call(m,P,null,this.state.variables,this.state.context,this)),await((v=(w=this.options).onSettled)==null?void 0:v.call(w,P,null,e,this.state.context)),qr(this,Xo,zl).call(this,{type:"success",data:P}),P}catch(P){try{throw await((S=(y=ze(this,mi).config).onError)==null?void 0:S.call(y,P,e,this.state.context,this)),await((C=(E=this.options).onError)==null?void 0:C.call(E,P,e,this.state.context)),await((T=(A=ze(this,mi).config).onSettled)==null?void 0:T.call(A,void 0,P,this.state.variables,this.state.context,this)),await((R=(k=this.options).onSettled)==null?void 0:R.call(k,void 0,P,e,this.state.context)),P}finally{qr(this,Xo,zl).call(this,{type:"error",error:P})}}finally{ze(this,mi).runNext(this)}}},qo=new WeakMap,mi=new WeakMap,ju=new WeakMap,Xo=new WeakSet,zl=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),yi.batch(()=>{ze(this,qo).forEach(r=>{r.onMutationUpdate(e)}),ze(this,mi).notify({mutation:this,type:"updated",action:e})})},AF);function Bie(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ba,go,ig,RF,Hie=(RF=class extends cw{constructor(e={}){super();fn(this,Ba);fn(this,go);fn(this,ig);this.config=e,Ft(this,Ba,new Set),Ft(this,go,new Map),Ft(this,ig,0)}build(e,n,r){const i=new zie({mutationCache:this,mutationId:++My(this,ig)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){ze(this,Ba).add(e);const n=Xy(e);if(typeof n=="string"){const r=ze(this,go).get(n);r?r.push(e):ze(this,go).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(ze(this,Ba).delete(e)){const n=Xy(e);if(typeof n=="string"){const r=ze(this,go).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&ze(this,go).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Xy(e);if(typeof n=="string"){const r=ze(this,go).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Xy(e);if(typeof n=="string"){const i=(r=ze(this,go).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){yi.batch(()=>{ze(this,Ba).forEach(e=>{this.notify({type:"removed",mutation:e})}),ze(this,Ba).clear(),ze(this,go).clear()})}getAll(){return Array.from(ze(this,Ba))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>gD(n,r))}findAll(e={}){return this.getAll().filter(n=>gD(e,n))}notify(e){yi.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return yi.batch(()=>Promise.all(e.map(n=>n.continue().catch(po))))}},Ba=new WeakMap,go=new WeakMap,ig=new WeakMap,RF);function Xy(t){var e;return(e=t.options.scope)==null?void 0:e.id}function xD(t){return{onFetch:(e,n)=>{var u,d,p,m,x;const r=e.options,i=(p=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:p.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let w=!1;const v=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?w=!0:e.signal.addEventListener("abort",()=>{w=!0}),e.signal)})},y=H4(e.options,e.fetchOptions),S=async(E,C,A)=>{if(w)return Promise.reject();if(C==null&&E.pages.length)return Promise.resolve(E);const k=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:C,direction:A?"backward":"forward",meta:e.options.meta};return v(L),L})(),R=await y(k),{maxPages:P}=e.options,M=A?Rie:Aie;return{pages:M(E.pages,R,P),pageParams:M(E.pageParams,C,P)}};if(i&&s.length){const E=i==="backward",C=E?Vie:wD,A={pages:s,pageParams:o},T=C(r,A);a=await S(A,T,E)}else{const E=t??s.length;do{const C=l===0?o[0]??r.initialPageParam:wD(r,a);if(l>0&&C==null)break;a=await S(a,C),l++}while(l<E)}return a};e.options.persister?e.fetchFn=()=>{var w,v;return(v=(w=e.options).persister)==null?void 0:v.call(w,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function wD(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Vie(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Gn,tc,nc,Kf,Yf,rc,Jf,Qf,NF,$ie=(NF=class{constructor(t={}){fn(this,Gn);fn(this,tc);fn(this,nc);fn(this,Kf);fn(this,Yf);fn(this,rc);fn(this,Jf);fn(this,Qf);Ft(this,Gn,t.queryCache||new Uie),Ft(this,tc,t.mutationCache||new Hie),Ft(this,nc,t.defaultOptions||{}),Ft(this,Kf,new Map),Ft(this,Yf,new Map),Ft(this,rc,0)}mount(){My(this,rc)._++,ze(this,rc)===1&&(Ft(this,Jf,V4.subscribe(async t=>{t&&(await this.resumePausedMutations(),ze(this,Gn).onFocus())})),Ft(this,Qf,Kx.subscribe(async t=>{t&&(await this.resumePausedMutations(),ze(this,Gn).onOnline())})))}unmount(){var t,e;My(this,rc)._--,ze(this,rc)===0&&((t=ze(this,Jf))==null||t.call(this),Ft(this,Jf,void 0),(e=ze(this,Qf))==null||e.call(this),Ft(this,Qf,void 0))}isFetching(t){return ze(this,Gn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return ze(this,tc).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ze(this,Gn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=ze(this,Gn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(KE(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return ze(this,Gn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=ze(this,Gn).get(r.queryHash),s=i==null?void 0:i.state.data,o=Sie(e,s);if(o!==void 0)return ze(this,Gn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return yi.batch(()=>ze(this,Gn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=ze(this,Gn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=ze(this,Gn);yi.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=ze(this,Gn);return yi.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=yi.batch(()=>ze(this,Gn).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(po).catch(po)}invalidateQueries(t,e={}){return yi.batch(()=>(ze(this,Gn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=yi.batch(()=>ze(this,Gn).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(po)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(po)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=ze(this,Gn).build(this,e);return n.isStaleByTime(KE(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(po).catch(po)}fetchInfiniteQuery(t){return t.behavior=xD(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(po).catch(po)}ensureInfiniteQueryData(t){return t.behavior=xD(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Kx.isOnline()?ze(this,tc).resumePausedMutations():Promise.resolve()}getQueryCache(){return ze(this,Gn)}getMutationCache(){return ze(this,tc)}getDefaultOptions(){return ze(this,nc)}setDefaultOptions(t){Ft(this,nc,t)}setQueryDefaults(t,e){ze(this,Kf).set(km(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...ze(this,Kf).values()],n={};return e.forEach(r=>{Pm(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){ze(this,Yf).set(km(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...ze(this,Yf).values()],n={};return e.forEach(r=>{Pm(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...ze(this,nc).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=uA(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===dA&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...ze(this,nc).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){ze(this,Gn).clear(),ze(this,tc).clear()}},Gn=new WeakMap,tc=new WeakMap,nc=new WeakMap,Kf=new WeakMap,Yf=new WeakMap,rc=new WeakMap,Jf=new WeakMap,Qf=new WeakMap,NF),Wie=b.createContext(void 0),Gie=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),h.jsx(Wie.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dm(){return Dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dm.apply(this,arguments)}var ac;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ac||(ac={}));const bD="popstate";function qie(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return JE("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Yx(i)}return Kie(e,n,null,t)}function nr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function X4(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Xie(){return Math.random().toString(36).substr(2,8)}function SD(t,e){return{usr:t.state,key:t.key,idx:e}}function JE(t,e,n,r){return n===void 0&&(n=null),Dm({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Dh(e):e,{state:n,key:e&&e.key||r||Xie()})}function Yx(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Dh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Kie(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ac.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Dm({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=ac.Pop;let v=u(),y=v==null?null:v-c;c=v,l&&l({action:a,location:w.location,delta:y})}function p(v,y){a=ac.Push;let S=JE(w.location,v,y);c=u()+1;let E=SD(S,c),C=w.createHref(S);try{o.pushState(E,"",C)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(C)}s&&l&&l({action:a,location:w.location,delta:1})}function m(v,y){a=ac.Replace;let S=JE(w.location,v,y);c=u();let E=SD(S,c),C=w.createHref(S);o.replaceState(E,"",C),s&&l&&l({action:a,location:w.location,delta:0})}function x(v){let y=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof v=="string"?v:Yx(v);return S=S.replace(/ $/,"%20"),nr(y,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,y)}let w={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(bD,d),l=v,()=>{i.removeEventListener(bD,d),l=null}},createHref(v){return e(i,v)},createURL:x,encodeLocation(v){let y=x(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:m,go(v){return o.go(v)}};return w}var _D;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(_D||(_D={}));function Yie(t,e,n){return n===void 0&&(n="/"),Jie(t,e,n)}function Jie(t,e,n,r){let i=typeof e=="string"?Dh(e):e,s=fA(i.pathname||"/",n);if(s==null)return null;let o=K4(t);Qie(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=use(s);a=ase(o[l],c)}return a}function K4(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(nr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=xc([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(nr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),K4(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:sse(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Y4(s.path))i(s,o,l)}),e}function Y4(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Y4(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Qie(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:ose(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Zie=/^:[\w-]+$/,ese=3,tse=2,nse=1,rse=10,ise=-2,ED=t=>t==="*";function sse(t,e){let n=t.split("/"),r=n.length;return n.some(ED)&&(r+=ise),e&&(r+=tse),n.filter(i=>!ED(i)).reduce((i,s)=>i+(Zie.test(s)?ese:s===""?nse:rse),r)}function ose(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function ase(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=lse({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:xc([s,d.pathname]),pathnameBase:pse(xc([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=xc([s,d.pathnameBase]))}return o}function lse(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=cse(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let w=a[d]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const x=a[d];return m&&!x?c[p]=void 0:c[p]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function cse(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),X4(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function use(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return X4(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function fA(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function dse(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Dh(t):t;return{pathname:n?n.startsWith("/")?n:fse(n,e):e,search:mse(r),hash:gse(i)}}function fse(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function o1(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function hse(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function hA(t,e){let n=hse(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function pA(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Dh(t):(i=Dm({},t),nr(!i.pathname||!i.pathname.includes("?"),o1("?","pathname","search",i)),nr(!i.pathname||!i.pathname.includes("#"),o1("#","pathname","hash",i)),nr(!i.search||!i.search.includes("#"),o1("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=dse(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const xc=t=>t.join("/").replace(/\/\/+/g,"/"),pse=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mse=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gse=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yse(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const J4=["post","put","patch","delete"];new Set(J4);const vse=["get",...J4];new Set(vse);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Im(){return Im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Im.apply(this,arguments)}const mA=b.createContext(null),xse=b.createContext(null),zc=b.createContext(null),dw=b.createContext(null),ga=b.createContext({outlet:null,matches:[],isDataRoute:!1}),Q4=b.createContext(null);function wse(t,e){let{relative:n}=e===void 0?{}:e;Ih()||nr(!1);let{basename:r,navigator:i}=b.useContext(zc),{hash:s,pathname:o,search:a}=ez(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:xc([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ih(){return b.useContext(dw)!=null}function ul(){return Ih()||nr(!1),b.useContext(dw).location}function Z4(t){b.useContext(zc).static||b.useLayoutEffect(t)}function ya(){let{isDataRoute:t}=b.useContext(ga);return t?Lse():bse()}function bse(){Ih()||nr(!1);let t=b.useContext(mA),{basename:e,future:n,navigator:r}=b.useContext(zc),{matches:i}=b.useContext(ga),{pathname:s}=ul(),o=JSON.stringify(hA(i,n.v7_relativeSplatPath)),a=b.useRef(!1);return Z4(()=>{a.current=!0}),b.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=pA(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:xc([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}const Sse=b.createContext(null);function _se(t){let e=b.useContext(ga).outlet;return e&&b.createElement(Sse.Provider,{value:t},e)}function fw(){let{matches:t}=b.useContext(ga),e=t[t.length-1];return e?e.params:{}}function ez(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(zc),{matches:i}=b.useContext(ga),{pathname:s}=ul(),o=JSON.stringify(hA(i,r.v7_relativeSplatPath));return b.useMemo(()=>pA(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Ese(t,e){return Cse(t,e)}function Cse(t,e,n,r){Ih()||nr(!1);let{navigator:i}=b.useContext(zc),{matches:s}=b.useContext(ga),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ul(),u;if(e){var d;let v=typeof e=="string"?Dh(e):e;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||nr(!1),u=v}else u=c;let p=u.pathname||"/",m=p;if(l!=="/"){let v=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=Yie(t,{pathname:m}),w=Nse(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:xc([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:xc([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&w?b.createElement(dw.Provider,{value:{location:Im({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ac.Pop}},w):w}function Mse(){let t=Ise(),e=yse(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,null)}const Tse=b.createElement(Mse,null);class Ase extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(ga.Provider,{value:this.props.routeContext},b.createElement(Q4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Rse(t){let{routeContext:e,match:n,children:r}=t,i=b.useContext(mA);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(ga.Provider,{value:e},r)}function Nse(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||nr(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:p,errors:m}=n,x=d.route.loader&&p[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,p)=>{let m,x=!1,w=null,v=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||Tse,l&&(c<0&&p===0?(Ose("route-fallback"),x=!0,v=null):c===p&&(x=!0,v=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,p+1)),S=()=>{let E;return m?E=w:x?E=v:d.route.Component?E=b.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=u,b.createElement(Rse,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:E})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?b.createElement(Ase,{location:n.location,revalidation:n.revalidation,component:w,error:m,children:S(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):S()},null)}var tz=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(tz||{}),nz=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(nz||{});function kse(t){let e=b.useContext(mA);return e||nr(!1),e}function Pse(t){let e=b.useContext(xse);return e||nr(!1),e}function Dse(t){let e=b.useContext(ga);return e||nr(!1),e}function rz(t){let e=Dse(),n=e.matches[e.matches.length-1];return n.route.id||nr(!1),n.route.id}function Ise(){var t;let e=b.useContext(Q4),n=Pse(),r=rz();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Lse(){let{router:t}=kse(tz.UseNavigateStable),e=rz(nz.UseNavigateStable),n=b.useRef(!1);return Z4(()=>{n.current=!0}),b.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Im({fromRouteId:e},s)))},[t,e])}const CD={};function Ose(t,e,n){CD[t]||(CD[t]=!0)}function Fse(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function QE(t){let{to:e,replace:n,state:r,relative:i}=t;Ih()||nr(!1);let{future:s,static:o}=b.useContext(zc),{matches:a}=b.useContext(ga),{pathname:l}=ul(),c=ya(),u=pA(e,hA(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return b.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function jse(t){return _se(t.context)}function cs(t){nr(!1)}function Use(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ac.Pop,navigator:s,static:o=!1,future:a}=t;Ih()&&nr(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:s,static:o,future:Im({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Dh(r));let{pathname:u="/",search:d="",hash:p="",state:m=null,key:x="default"}=r,w=b.useMemo(()=>{let v=fA(u,l);return v==null?null:{location:{pathname:v,search:d,hash:p,state:m,key:x},navigationType:i}},[l,u,d,p,m,x,i]);return w==null?null:b.createElement(zc.Provider,{value:c},b.createElement(dw.Provider,{children:n,value:w}))}function zse(t){let{children:e,location:n}=t;return Ese(ZE(e),n)}new Promise(()=>{});function ZE(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,i)=>{if(!b.isValidElement(r))return;let s=[...e,i];if(r.type===b.Fragment){n.push.apply(n,ZE(r.props.children,s));return}r.type!==cs&&nr(!1),!r.props.index||!r.props.children||nr(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ZE(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eC(){return eC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eC.apply(this,arguments)}function Bse(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Hse(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Vse(t,e){return t.button===0&&(!e||e==="_self")&&!Hse(t)}const $se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Wse="6";try{window.__reactRouterVersion=Wse}catch{}const Gse="startTransition",MD=qM[Gse];function qse(t){let{basename:e,children:n,future:r,window:i}=t,s=b.useRef();s.current==null&&(s.current=qie({window:i,v5Compat:!0}));let o=s.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=b.useCallback(d=>{c&&MD?MD(()=>l(d)):l(d)},[l,c]);return b.useLayoutEffect(()=>o.listen(u),[o,u]),b.useEffect(()=>Fse(r),[r]),b.createElement(Use,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Xse=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Kse=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yse=b.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,p=Bse(e,$se),{basename:m}=b.useContext(zc),x,w=!1;if(typeof c=="string"&&Kse.test(c)&&(x=c,Xse))try{let E=new URL(window.location.href),C=c.startsWith("//")?new URL(E.protocol+c):new URL(c),A=fA(C.pathname,m);C.origin===E.origin&&A!=null?c=A+C.search+C.hash:w=!0}catch{}let v=wse(c,{relative:i}),y=Jse(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function S(E){r&&r(E),E.defaultPrevented||y(E)}return b.createElement("a",eC({},p,{href:x||v,onClick:w||s?r:S,ref:n,target:l}))});var TD;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(TD||(TD={}));var AD;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(AD||(AD={}));function Jse(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=ya(),c=ul(),u=ez(t,{relative:o});return b.useCallback(d=>{if(Vse(d,n)){d.preventDefault();let p=r!==void 0?r:Yx(c)===Yx(u);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function Qse(t={}){const{nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}=t,[i,s]=b.useState(!1),o=b.useRef(n);o.current=n;const a=b.useRef(r);return a.current=r,b.useEffect(()=>{const l=document.createElement("script");return l.src="https://accounts.google.com/gsi/client",l.async=!0,l.defer=!0,l.nonce=e,l.onload=()=>{var c;s(!0),(c=o.current)===null||c===void 0||c.call(o)},l.onerror=()=>{var c;s(!1),(c=a.current)===null||c===void 0||c.call(a)},document.body.appendChild(l),()=>{document.body.removeChild(l)}},[e]),i}const iz=b.createContext(null);function Zse({clientId:t,nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r,children:i}){const s=Qse({nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}),o=b.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:s}),[t,s]);return Re.createElement(iz.Provider,{value:o},i)}function eoe(){const t=b.useContext(iz);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function toe(){var t,e,n;(n=(e=(t=window==null?void 0:window.google)===null||t===void 0?void 0:t.accounts)===null||e===void 0?void 0:e.id)===null||n===void 0||n.disableAutoSelect()}function noe({flow:t="implicit",scope:e="",onSuccess:n,onError:r,onNonOAuthError:i,overrideScope:s,state:o,...a}){const{clientId:l,scriptLoadedSuccessfully:c}=eoe(),u=b.useRef(),d=b.useRef(n);d.current=n;const p=b.useRef(r);p.current=r;const m=b.useRef(i);m.current=i,b.useEffect(()=>{var v,y;if(!c)return;const S=t==="implicit"?"initTokenClient":"initCodeClient",E=(y=(v=window==null?void 0:window.google)===null||v===void 0?void 0:v.accounts)===null||y===void 0?void 0:y.oauth2[S]({client_id:l,scope:s?e:`openid profile email ${e}`,callback:C=>{var A,T;if(C.error)return(A=p.current)===null||A===void 0?void 0:A.call(p,C);(T=d.current)===null||T===void 0||T.call(d,C)},error_callback:C=>{var A;(A=m.current)===null||A===void 0||A.call(m,C)},state:o,...a});u.current=E},[l,c,t,e,o]);const x=b.useCallback(v=>{var y;return(y=u.current)===null||y===void 0?void 0:y.requestAccessToken(v)},[]),w=b.useCallback(()=>{var v;return(v=u.current)===null||v===void 0?void 0:v.requestCode()},[]);return t==="implicit"?x:w}const sz=b.createContext(void 0),to=()=>{const t=b.useContext(sz);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},roe=({children:t})=>{const[e,n]=b.useState(null),[r,i]=b.useState(!0),[s,o]=b.useState(null),[a,l]=b.useState(0),c=b.useRef(0);b.useEffect(()=>{(async()=>{try{console.log("Starting authentication initialization");const v=localStorage.getItem("itemize_token"),y=localStorage.getItem("itemize_user"),S=localStorage.getItem("itemize_expiry");if(console.log("Auth data from storage:",{hasToken:!!v,hasUser:!!y,hasExpiry:!!S}),v&&typeof v=="string"&&y&&typeof y=="string"&&y!=="undefined"&&S&&!isNaN(parseInt(S))&&parseInt(S)>Date.now())try{const E=JSON.parse(y);if(E&&typeof E=="object"&&E.uid)console.log("Restoring authentication with user:",E),o(v),n(E),l(Date.now()),console.log("Authentication restored successfully");else throw console.error("Invalid user data structure:",E),new Error("Invalid user data structure")}catch(E){console.error("Failed to parse saved user data:",E),localStorage.removeItem("itemize_token"),localStorage.removeItem("itemize_user"),localStorage.removeItem("itemize_expiry"),o(null),n(null)}else console.log("No valid authentication found, cleaning up storage"),localStorage.removeItem("itemize_token"),localStorage.removeItem("itemize_user"),localStorage.removeItem("itemize_expiry"),o(null),n(null)}catch(v){console.error("Error initializing auth:",v),o(null),n(null)}finally{console.log("Authentication initialization complete"),i(!1)}})()},[]);const u=noe({onSuccess:async w=>{i(!0);try{console.log("Google login successful, getting user info");const y=(await Tn.get("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${w.access_token}`}})).data;console.log("Received user info from Google:",y);const S=Am();console.log("Sending user info to backend:",`${S}/api/auth/google-login`);try{const E=await Tn.post(`${S}/api/auth/google-login`,{googleId:y.sub,email:y.email,name:y.name,picture:y.picture});if(console.log("Backend auth response:",E.data),!E.data)throw new Error("Empty response data from backend");const C=E.data.token,A=E.data.user;if(!C)throw new Error("Missing token in backend response");if(!A||!A.uid)throw new Error("Missing or invalid user data in backend response");const T=Date.now()+7*24*60*60*1e3;localStorage.setItem("itemize_token",C),localStorage.setItem("itemize_user",JSON.stringify(A)),localStorage.setItem("itemize_expiry",T.toString()),console.log("Setting authentication state with:",{token:C,user:A}),o(C),n(A),l(Date.now()),console.log("Backend auth successful, state updated"),jE({title:"Welcome!",description:"Successfully signed in with Google."})}catch(E){throw console.error("Backend auth error:",E),new Error(`Backend authentication failed: ${E.message}`)}}catch(v){console.error("Google login failed:",v)}finally{i(!1)}},onError:()=>{console.error("Google login failed"),i(!1)},scope:"email profile"}),d=()=>{u()},p=()=>{console.log("Logging out user..."),o(null),n(null),localStorage.removeItem("itemize_token"),localStorage.removeItem("itemize_user"),localStorage.removeItem("itemize_expiry");try{toe()}catch(w){console.error("Error signing out from Google:",w)}if(c.current<3)try{Zt.post("/api/auth/logout").catch(w=>{console.error("Backend logout failed:",w),c.current++})}catch(w){console.error("Backend logout failed:",w),c.current++}},m=async w=>{i(!0);try{console.log("Google One Tap login successful");const v=Am(),y=await Tn.post(`${v}/api/auth/google-credential`,{credential:w.credential}),{token:S,user:E}=y.data,C=Date.now()+7*24*60*60*1e3;localStorage.setItem("itemize_token",S),localStorage.setItem("itemize_user",JSON.stringify(E)),localStorage.setItem("itemize_expiry",C.toString()),console.log("Setting authentication state with:",{token:S,user:E}),o(S),n(E),l(Date.now()),jE({title:"Welcome!",description:"Successfully signed in with Google."})}catch(v){console.error("Google credential login failed:",v)}finally{i(!1)}};b.useEffect(()=>{console.log("Auth context changed:",{isAuthenticated:!!e&&!!s,hasUser:!!e,hasToken:!!s,lastAuthenticated:a,userData:e})},[e,s,a]);const x={currentUser:e,loading:r,login:d,logout:p,handleGoogleSuccess:m,token:s,isAuthenticated:!!e&&!!s};return h.jsx(sz.Provider,{value:x,children:t})},RD="itemize-ai-suggest-enabled",oz=b.createContext({aiEnabled:!0,setAiEnabled:()=>{}}),ioe=({children:t})=>{const[e,n]=b.useState(()=>{try{const r=localStorage.getItem(RD);return r?JSON.parse(r):!0}catch{return!0}});return b.useEffect(()=>{localStorage.setItem(RD,JSON.stringify(e))},[e]),h.jsx(oz.Provider,{value:{aiEnabled:e,setAiEnabled:n},children:t})},gA=()=>b.useContext(oz),yA=pg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),$e=b.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?lee:"button";return h.jsx(o,{className:dt(yA({variant:e,size:n,className:t})),ref:s,...i})});$e.displayName="Button";function vA(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var hw="Switch",[soe,H2e]=Mi(hw),[ooe,aoe]=soe(hw),az=b.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[p,m]=b.useState(null),x=Lt(e,E=>m(E)),w=b.useRef(!1),v=p?u||!!p.closest("form"):!0,[y,S]=_s({prop:i,defaultProp:s??!1,onChange:c,caller:hw});return h.jsxs(ooe,{scope:n,checked:y,disabled:a,children:[h.jsx(bt.button,{type:"button",role:"switch","aria-checked":y,"aria-required":o,"data-state":dz(y),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:x,onClick:it(t.onClick,E=>{S(C=>!C),v&&(w.current=E.isPropagationStopped(),w.current||E.stopPropagation())})}),v&&h.jsx(uz,{control:p,bubbles:!w.current,name:r,value:l,checked:y,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});az.displayName=hw;var lz="SwitchThumb",cz=b.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=aoe(lz,n);return h.jsx(bt.span,{"data-state":dz(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});cz.displayName=lz;var loe="SwitchBubbleInput",uz=b.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const o=b.useRef(null),a=Lt(o,s),l=vA(n),c=sA(e);return b.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&m){const x=new Event("click",{bubbles:r});m.call(u,n),u.dispatchEvent(x)}},[l,n,r]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});uz.displayName=loe;function dz(t){return t?"checked":"unchecked"}var fz=az,coe=cz;const hz=b.forwardRef(({className:t,...e},n)=>h.jsx(fz,{className:dt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-gradient-to-r data-[state=checked]:from-blue-600 data-[state=checked]:to-indigo-600 data-[state=unchecked]:bg-input",t),...e,ref:n,children:h.jsx(coe,{className:dt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));hz.displayName=fz.displayName;var uoe="Label",pz=b.forwardRef((t,e)=>h.jsx(bt.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));pz.displayName=uoe;var mz=pz;const doe=pg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Un=b.forwardRef(({className:t,...e},n)=>h.jsx(mz,{ref:n,className:dt(doe(),t),...e}));Un.displayName=mz.displayName;var foe=b.createContext(void 0);function vg(t){const e=b.useContext(foe);return t||e||"ltr"}var a1=0;function pw(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??ND()),document.body.insertAdjacentElement("beforeend",t[1]??ND()),a1++,()=>{a1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),a1--}},[])}function ND(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var l1="focusScope.autoFocusOnMount",c1="focusScope.autoFocusOnUnmount",kD={bubbles:!1,cancelable:!0},hoe="FocusScope",xg=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=b.useState(null),c=Ki(i),u=Ki(s),d=b.useRef(null),p=Lt(e,w=>l(w)),m=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let w=function(E){if(m.paused||!a)return;const C=E.target;a.contains(C)?d.current=C:Bl(d.current,{select:!0})},v=function(E){if(m.paused||!a)return;const C=E.relatedTarget;C!==null&&(a.contains(C)||Bl(d.current,{select:!0}))},y=function(E){if(document.activeElement===document.body)for(const A of E)A.removedNodes.length>0&&Bl(a)};document.addEventListener("focusin",w),document.addEventListener("focusout",v);const S=new MutationObserver(y);return a&&S.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",v),S.disconnect()}}},[r,a,m.paused]),b.useEffect(()=>{if(a){DD.add(m);const w=document.activeElement;if(!a.contains(w)){const y=new CustomEvent(l1,kD);a.addEventListener(l1,c),a.dispatchEvent(y),y.defaultPrevented||(poe(xoe(gz(a)),{select:!0}),document.activeElement===w&&Bl(a))}return()=>{a.removeEventListener(l1,c),setTimeout(()=>{const y=new CustomEvent(c1,kD);a.addEventListener(c1,u),a.dispatchEvent(y),y.defaultPrevented||Bl(w??document.body,{select:!0}),a.removeEventListener(c1,u),DD.remove(m)},0)}}},[a,c,u,m]);const x=b.useCallback(w=>{if(!n&&!r||m.paused)return;const v=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,y=document.activeElement;if(v&&y){const S=w.currentTarget,[E,C]=moe(S);E&&C?!w.shiftKey&&y===C?(w.preventDefault(),n&&Bl(E,{select:!0})):w.shiftKey&&y===E&&(w.preventDefault(),n&&Bl(C,{select:!0})):y===S&&w.preventDefault()}},[n,r,m.paused]);return h.jsx(bt.div,{tabIndex:-1,...o,ref:p,onKeyDown:x})});xg.displayName=hoe;function poe(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Bl(r,{select:e}),document.activeElement!==n)return}function moe(t){const e=gz(t),n=PD(e,t),r=PD(e.reverse(),t);return[n,r]}function gz(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function PD(t,e){for(const n of t)if(!goe(n,{upTo:e}))return n}function goe(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function yoe(t){return t instanceof HTMLInputElement&&"select"in t}function Bl(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&yoe(t)&&e&&t.select()}}var DD=voe();function voe(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=ID(t,e),t.unshift(e)},remove(e){var n;t=ID(t,e),(n=t[0])==null||n.resume()}}}function ID(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function xoe(t){return t.filter(e=>e.tagName!=="A")}var u1="rovingFocusGroup.onEntryFocus",woe={bubbles:!1,cancelable:!0},wg="RovingFocusGroup",[tC,yz,boe]=fg(wg),[Soe,mw]=Mi(wg,[boe]),[_oe,Eoe]=Soe(wg),vz=b.forwardRef((t,e)=>h.jsx(tC.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(tC.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(Coe,{...t,ref:e})})}));vz.displayName=wg;var Coe=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,p=b.useRef(null),m=Lt(e,p),x=vg(s),[w,v]=_s({prop:o,defaultProp:a??null,onChange:l,caller:wg}),[y,S]=b.useState(!1),E=Ki(c),C=yz(n),A=b.useRef(!1),[T,k]=b.useState(0);return b.useEffect(()=>{const R=p.current;if(R)return R.addEventListener(u1,E),()=>R.removeEventListener(u1,E)},[E]),h.jsx(_oe,{scope:n,orientation:r,dir:x,loop:i,currentTabStopId:w,onItemFocus:b.useCallback(R=>v(R),[v]),onItemShiftTab:b.useCallback(()=>S(!0),[]),onFocusableItemAdd:b.useCallback(()=>k(R=>R+1),[]),onFocusableItemRemove:b.useCallback(()=>k(R=>R-1),[]),children:h.jsx(bt.div,{tabIndex:y||T===0?-1:0,"data-orientation":r,...d,ref:m,style:{outline:"none",...t.style},onMouseDown:it(t.onMouseDown,()=>{A.current=!0}),onFocus:it(t.onFocus,R=>{const P=!A.current;if(R.target===R.currentTarget&&P&&!y){const M=new CustomEvent(u1,woe);if(R.currentTarget.dispatchEvent(M),!M.defaultPrevented){const L=C().filter(q=>q.focusable),z=L.find(q=>q.active),H=L.find(q=>q.id===w),K=[z,H,...L].filter(Boolean).map(q=>q.ref.current);bz(K,u)}}A.current=!1}),onBlur:it(t.onBlur,()=>S(!1))})})}),xz="RovingFocusGroupItem",wz=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,l=Ur(),c=s||l,u=Eoe(xz,n),d=u.currentTabStopId===c,p=yz(n),{onFocusableItemAdd:m,onFocusableItemRemove:x,currentTabStopId:w}=u;return b.useEffect(()=>{if(r)return m(),()=>x()},[r,m,x]),h.jsx(tC.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:h.jsx(bt.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:it(t.onMouseDown,v=>{r?u.onItemFocus(c):v.preventDefault()}),onFocus:it(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:it(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=Aoe(v,u.orientation,u.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let E=p().filter(C=>C.focusable).map(C=>C.ref.current);if(y==="last")E.reverse();else if(y==="prev"||y==="next"){y==="prev"&&E.reverse();const C=E.indexOf(v.currentTarget);E=u.loop?Roe(E,C+1):E.slice(C+1)}setTimeout(()=>bz(E))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:w!=null}):o})})});wz.displayName=xz;var Moe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Toe(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Aoe(t,e,n){const r=Toe(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Moe[r]}function bz(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Roe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Sz=vz,_z=wz,Noe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},jd=new WeakMap,Ky=new WeakMap,Yy={},d1=0,Ez=function(t){return t&&(t.host||Ez(t.parentNode))},koe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Ez(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Poe=function(t,e,n,r){var i=koe(e,Array.isArray(t)?t:[t]);Yy[n]||(Yy[n]=new WeakMap);var s=Yy[n],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(p){if(a.has(p))u(p);else try{var m=p.getAttribute(r),x=m!==null&&m!=="false",w=(jd.get(p)||0)+1,v=(s.get(p)||0)+1;jd.set(p,w),s.set(p,v),o.push(p),w===1&&x&&Ky.set(p,!0),v===1&&p.setAttribute(n,"true"),x||p.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",p,y)}})};return u(e),a.clear(),d1++,function(){o.forEach(function(d){var p=jd.get(d)-1,m=s.get(d)-1;jd.set(d,p),s.set(d,m),p||(Ky.has(d)||d.removeAttribute(r),Ky.delete(d)),m||d.removeAttribute(n)}),d1--,d1||(jd=new WeakMap,jd=new WeakMap,Ky=new WeakMap,Yy={})}},gw=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Noe(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),Poe(r,i,n,"aria-hidden")):function(){return null}},Zo=function(){return Zo=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Zo.apply(this,arguments)};function Cz(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Doe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var tx="right-scroll-bar-position",nx="width-before-scroll-bar",Ioe="with-scroll-bars-hidden",Loe="--removed-body-scroll-bar-size";function f1(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Ooe(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var Foe=typeof window<"u"?b.useLayoutEffect:b.useEffect,LD=new WeakMap;function joe(t,e){var n=Ooe(null,function(r){return t.forEach(function(i){return f1(i,r)})});return Foe(function(){var r=LD.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||f1(a,null)}),s.forEach(function(a){i.has(a)||f1(a,o)})}LD.set(n,t)},[t]),n}function Uoe(t){return t}function zoe(t,e){e===void 0&&(e=Uoe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function Boe(t){t===void 0&&(t={});var e=zoe(null);return e.options=Zo({async:!0,ssr:!1},t),e}var Mz=function(t){var e=t.sideCar,n=Cz(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,Zo({},n))};Mz.isSideCarExport=!0;function Hoe(t,e){return t.useMedium(e),Mz}var Tz=Boe(),h1=function(){},yw=b.forwardRef(function(t,e){var n=b.useRef(null),r=b.useState({onScrollCapture:h1,onWheelCapture:h1,onTouchMoveCapture:h1}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,p=t.sideCar,m=t.noRelative,x=t.noIsolation,w=t.inert,v=t.allowPinchZoom,y=t.as,S=y===void 0?"div":y,E=t.gapMode,C=Cz(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=p,T=joe([n,e]),k=Zo(Zo({},C),i);return b.createElement(b.Fragment,null,u&&b.createElement(A,{sideCar:Tz,removeScrollBar:c,shards:d,noRelative:m,noIsolation:x,inert:w,setCallbacks:s,allowPinchZoom:!!v,lockRef:n,gapMode:E}),o?b.cloneElement(b.Children.only(a),Zo(Zo({},k),{ref:T})):b.createElement(S,Zo({},k,{className:l,ref:T}),a))});yw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};yw.classNames={fullWidth:nx,zeroRight:tx};var Voe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $oe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Voe();return e&&t.setAttribute("nonce",e),t}function Woe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Goe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var qoe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=$oe())&&(Woe(e,n),Goe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Xoe=function(){var t=qoe();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Az=function(){var t=Xoe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},Koe={left:0,top:0,right:0,gap:0},p1=function(t){return parseInt(t||"",10)||0},Yoe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[p1(n),p1(r),p1(i)]},Joe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Koe;var e=Yoe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Qoe=Az(),Lf="data-scroll-locked",Zoe=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Ioe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Lf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(tx,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(nx,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(tx," .").concat(tx,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(nx," .").concat(nx,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Lf,`] {
    `).concat(Loe,": ").concat(a,`px;
  }
`)},OD=function(){var t=parseInt(document.body.getAttribute(Lf)||"0",10);return isFinite(t)?t:0},eae=function(){b.useEffect(function(){return document.body.setAttribute(Lf,(OD()+1).toString()),function(){var t=OD()-1;t<=0?document.body.removeAttribute(Lf):document.body.setAttribute(Lf,t.toString())}},[])},tae=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;eae();var s=b.useMemo(function(){return Joe(i)},[i]);return b.createElement(Qoe,{styles:Zoe(s,!e,i,n?"":"!important")})},nC=!1;if(typeof window<"u")try{var Jy=Object.defineProperty({},"passive",{get:function(){return nC=!0,!0}});window.addEventListener("test",Jy,Jy),window.removeEventListener("test",Jy,Jy)}catch{nC=!1}var Ud=nC?{passive:!1}:!1,nae=function(t){return t.tagName==="TEXTAREA"},Rz=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!nae(t)&&n[e]==="visible")},rae=function(t){return Rz(t,"overflowY")},iae=function(t){return Rz(t,"overflowX")},FD=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Nz(t,r);if(i){var s=kz(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},sae=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},oae=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},Nz=function(t,e){return t==="v"?rae(e):iae(e)},kz=function(t,e){return t==="v"?sae(e):oae(e)},aae=function(t,e){return t==="h"&&e==="rtl"?-1:1},lae=function(t,e,n,r,i){var s=aae(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,p=0;do{if(!a)break;var m=kz(t,a),x=m[0],w=m[1],v=m[2],y=w-v-s*x;(x||y)&&Nz(t,a)&&(d+=y,p+=x);var S=a.parentNode;a=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(p)<1)&&(c=!0),c},Qy=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},jD=function(t){return[t.deltaX,t.deltaY]},UD=function(t){return t&&"current"in t?t.current:t},cae=function(t,e){return t[0]===e[0]&&t[1]===e[1]},uae=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},dae=0,zd=[];function fae(t){var e=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),i=b.useState(dae++)[0],s=b.useState(Az)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var w=Doe([t.lockRef.current],(t.shards||[]).map(UD),!0).filter(Boolean);return w.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),w.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(w,v){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var y=Qy(w),S=n.current,E="deltaX"in w?w.deltaX:S[0]-y[0],C="deltaY"in w?w.deltaY:S[1]-y[1],A,T=w.target,k=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in w&&k==="h"&&T.type==="range")return!1;var R=FD(k,T);if(!R)return!0;if(R?A=k:(A=k==="v"?"h":"v",R=FD(k,T)),!R)return!1;if(!r.current&&"changedTouches"in w&&(E||C)&&(r.current=A),!A)return!0;var P=r.current||A;return lae(P,v,w,P==="h"?E:C)},[]),l=b.useCallback(function(w){var v=w;if(!(!zd.length||zd[zd.length-1]!==s)){var y="deltaY"in v?jD(v):Qy(v),S=e.current.filter(function(A){return A.name===v.type&&(A.target===v.target||v.target===A.shadowParent)&&cae(A.delta,y)})[0];if(S&&S.should){v.cancelable&&v.preventDefault();return}if(!S){var E=(o.current.shards||[]).map(UD).filter(Boolean).filter(function(A){return A.contains(v.target)}),C=E.length>0?a(v,E[0]):!o.current.noIsolation;C&&v.cancelable&&v.preventDefault()}}},[]),c=b.useCallback(function(w,v,y,S){var E={name:w,delta:v,target:y,should:S,shadowParent:hae(y)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(C){return C!==E})},1)},[]),u=b.useCallback(function(w){n.current=Qy(w),r.current=void 0},[]),d=b.useCallback(function(w){c(w.type,jD(w),w.target,a(w,t.lockRef.current))},[]),p=b.useCallback(function(w){c(w.type,Qy(w),w.target,a(w,t.lockRef.current))},[]);b.useEffect(function(){return zd.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:p}),document.addEventListener("wheel",l,Ud),document.addEventListener("touchmove",l,Ud),document.addEventListener("touchstart",u,Ud),function(){zd=zd.filter(function(w){return w!==s}),document.removeEventListener("wheel",l,Ud),document.removeEventListener("touchmove",l,Ud),document.removeEventListener("touchstart",u,Ud)}},[]);var m=t.removeScrollBar,x=t.inert;return b.createElement(b.Fragment,null,x?b.createElement(s,{styles:uae(i)}):null,m?b.createElement(tae,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function hae(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const pae=Hoe(Tz,fae);var bg=b.forwardRef(function(t,e){return b.createElement(yw,Zo({},t,{ref:e,sideCar:pae}))});bg.classNames=yw.classNames;var rC=["Enter"," "],mae=["ArrowDown","PageUp","Home"],Pz=["ArrowUp","PageDown","End"],gae=[...mae,...Pz],yae={ltr:[...rC,"ArrowRight"],rtl:[...rC,"ArrowLeft"]},vae={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Sg="Menu",[Lm,xae,wae]=fg(Sg),[yd,Dz]=Mi(Sg,[wae,Uc,mw]),vw=Uc(),Iz=mw(),[bae,vd]=yd(Sg),[Sae,_g]=yd(Sg),Lz=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=vw(e),[l,c]=b.useState(null),u=b.useRef(!1),d=Ki(s),p=vg(i);return b.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),h.jsx(lA,{...a,children:h.jsx(bae,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:h.jsx(Sae,{scope:e,onClose:b.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:p,modal:o,children:r})})})};Lz.displayName=Sg;var _ae="MenuAnchor",xA=b.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=vw(n);return h.jsx(yg,{...i,...r,ref:e})});xA.displayName=_ae;var wA="MenuPortal",[Eae,Oz]=yd(wA,{forceMount:void 0}),Fz=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=vd(wA,e);return h.jsx(Eae,{scope:e,forceMount:n,children:h.jsx(Ms,{present:n||s.open,children:h.jsx(Ah,{asChild:!0,container:i,children:r})})})};Fz.displayName=wA;var Js="MenuContent",[Cae,bA]=yd(Js),jz=b.forwardRef((t,e)=>{const n=Oz(Js,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=vd(Js,t.__scopeMenu),o=_g(Js,t.__scopeMenu);return h.jsx(Lm.Provider,{scope:t.__scopeMenu,children:h.jsx(Ms,{present:r||s.open,children:h.jsx(Lm.Slot,{scope:t.__scopeMenu,children:o.modal?h.jsx(Mae,{...i,ref:e}):h.jsx(Tae,{...i,ref:e})})})})}),Mae=b.forwardRef((t,e)=>{const n=vd(Js,t.__scopeMenu),r=b.useRef(null),i=Lt(e,r);return b.useEffect(()=>{const s=r.current;if(s)return gw(s)},[]),h.jsx(SA,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:it(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Tae=b.forwardRef((t,e)=>{const n=vd(Js,t.__scopeMenu);return h.jsx(SA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Aae=Rc("MenuContent.ScrollLock"),SA=b.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:p,onDismiss:m,disableOutsideScroll:x,...w}=t,v=vd(Js,n),y=_g(Js,n),S=vw(n),E=Iz(n),C=xae(n),[A,T]=b.useState(null),k=b.useRef(null),R=Lt(e,k,v.onContentChange),P=b.useRef(0),M=b.useRef(""),L=b.useRef(0),z=b.useRef(null),H=b.useRef("right"),B=b.useRef(0),K=x?bg:b.Fragment,q=x?{as:Aae,allowPinchZoom:!0}:void 0,ee=F=>{var Z,fe;const D=M.current+F,ie=C().filter(we=>!we.disabled),$=document.activeElement,U=(Z=ie.find(we=>we.ref.current===$))==null?void 0:Z.textValue,Y=ie.map(we=>we.textValue),oe=zae(Y,D,U),ne=(fe=ie.find(we=>we.textValue===oe))==null?void 0:fe.ref.current;(function we(xe){M.current=xe,window.clearTimeout(P.current),xe!==""&&(P.current=window.setTimeout(()=>we(""),1e3))})(D),ne&&setTimeout(()=>ne.focus())};b.useEffect(()=>()=>window.clearTimeout(P.current),[]),pw();const O=b.useCallback(F=>{var ie,$;return H.current===((ie=z.current)==null?void 0:ie.side)&&Hae(F,($=z.current)==null?void 0:$.area)},[]);return h.jsx(Cae,{scope:n,searchRef:M,onItemEnter:b.useCallback(F=>{O(F)&&F.preventDefault()},[O]),onItemLeave:b.useCallback(F=>{var D;O(F)||((D=k.current)==null||D.focus(),T(null))},[O]),onTriggerLeave:b.useCallback(F=>{O(F)&&F.preventDefault()},[O]),pointerGraceTimerRef:L,onPointerGraceIntentChange:b.useCallback(F=>{z.current=F},[]),children:h.jsx(K,{...q,children:h.jsx(xg,{asChild:!0,trapped:i,onMountAutoFocus:it(s,F=>{var D;F.preventDefault(),(D=k.current)==null||D.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:h.jsx(pd,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:p,onDismiss:m,children:h.jsx(Sz,{asChild:!0,...E,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:A,onCurrentTabStopIdChange:T,onEntryFocus:it(l,F=>{y.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(sw,{role:"menu","aria-orientation":"vertical","data-state":eB(v.open),"data-radix-menu-content":"",dir:y.dir,...S,...w,ref:R,style:{outline:"none",...w.style},onKeyDown:it(w.onKeyDown,F=>{const ie=F.target.closest("[data-radix-menu-content]")===F.currentTarget,$=F.ctrlKey||F.altKey||F.metaKey,U=F.key.length===1;ie&&(F.key==="Tab"&&F.preventDefault(),!$&&U&&ee(F.key));const Y=k.current;if(F.target!==Y||!gae.includes(F.key))return;F.preventDefault();const ne=C().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);Pz.includes(F.key)&&ne.reverse(),jae(ne)}),onBlur:it(t.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(P.current),M.current="")}),onPointerMove:it(t.onPointerMove,Om(F=>{const D=F.target,ie=B.current!==F.clientX;if(F.currentTarget.contains(D)&&ie){const $=F.clientX>B.current?"right":"left";H.current=$,B.current=F.clientX}}))})})})})})})});jz.displayName=Js;var Rae="MenuGroup",_A=b.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(bt.div,{role:"group",...r,ref:e})});_A.displayName=Rae;var Nae="MenuLabel",Uz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(bt.div,{...r,ref:e})});Uz.displayName=Nae;var Jx="MenuItem",zD="menu.itemSelect",xw=b.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=b.useRef(null),o=_g(Jx,t.__scopeMenu),a=bA(Jx,t.__scopeMenu),l=Lt(e,s),c=b.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const p=new CustomEvent(zD,{bubbles:!0,cancelable:!0});d.addEventListener(zD,m=>r==null?void 0:r(m),{once:!0}),HT(d,p),p.defaultPrevented?c.current=!1:o.onClose()}};return h.jsx(zz,{...i,ref:l,disabled:n,onClick:it(t.onClick,u),onPointerDown:d=>{var p;(p=t.onPointerDown)==null||p.call(t,d),c.current=!0},onPointerUp:it(t.onPointerUp,d=>{var p;c.current||(p=d.currentTarget)==null||p.click()}),onKeyDown:it(t.onKeyDown,d=>{const p=a.searchRef.current!=="";n||p&&d.key===" "||rC.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});xw.displayName=Jx;var zz=b.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=bA(Jx,n),a=Iz(n),l=b.useRef(null),c=Lt(e,l),[u,d]=b.useState(!1),[p,m]=b.useState("");return b.useEffect(()=>{const x=l.current;x&&m((x.textContent??"").trim())},[s.children]),h.jsx(Lm.ItemSlot,{scope:n,disabled:r,textValue:i??p,children:h.jsx(_z,{asChild:!0,...a,focusable:!r,children:h.jsx(bt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:it(t.onPointerMove,Om(x=>{r?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:it(t.onPointerLeave,Om(x=>o.onItemLeave(x))),onFocus:it(t.onFocus,()=>d(!0)),onBlur:it(t.onBlur,()=>d(!1))})})})}),kae="MenuCheckboxItem",Bz=b.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return h.jsx(Gz,{scope:t.__scopeMenu,checked:n,children:h.jsx(xw,{role:"menuitemcheckbox","aria-checked":Qx(n)?"mixed":n,...i,ref:e,"data-state":CA(n),onSelect:it(i.onSelect,()=>r==null?void 0:r(Qx(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Bz.displayName=kae;var Hz="MenuRadioGroup",[Pae,Dae]=yd(Hz,{value:void 0,onValueChange:()=>{}}),Vz=b.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=Ki(r);return h.jsx(Pae,{scope:t.__scopeMenu,value:n,onValueChange:s,children:h.jsx(_A,{...i,ref:e})})});Vz.displayName=Hz;var $z="MenuRadioItem",Wz=b.forwardRef((t,e)=>{const{value:n,...r}=t,i=Dae($z,t.__scopeMenu),s=n===i.value;return h.jsx(Gz,{scope:t.__scopeMenu,checked:s,children:h.jsx(xw,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":CA(s),onSelect:it(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});Wz.displayName=$z;var EA="MenuItemIndicator",[Gz,Iae]=yd(EA,{checked:!1}),qz=b.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=Iae(EA,n);return h.jsx(Ms,{present:r||Qx(s.checked)||s.checked===!0,children:h.jsx(bt.span,{...i,ref:e,"data-state":CA(s.checked)})})});qz.displayName=EA;var Lae="MenuSeparator",Xz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return h.jsx(bt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Xz.displayName=Lae;var Oae="MenuArrow",Kz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=vw(n);return h.jsx(ow,{...i,...r,ref:e})});Kz.displayName=Oae;var Fae="MenuSub",[V2e,Yz]=yd(Fae),Fp="MenuSubTrigger",Jz=b.forwardRef((t,e)=>{const n=vd(Fp,t.__scopeMenu),r=_g(Fp,t.__scopeMenu),i=Yz(Fp,t.__scopeMenu),s=bA(Fp,t.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>u,[u]),b.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),h.jsx(xA,{asChild:!0,...c,children:h.jsx(zz,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":eB(n.open),...t,ref:il(e,i.onTriggerChange),onClick:d=>{var p;(p=t.onClick)==null||p.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:it(t.onPointerMove,Om(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:it(t.onPointerLeave,Om(d=>{var m,x;u();const p=(m=n.content)==null?void 0:m.getBoundingClientRect();if(p){const w=(x=n.content)==null?void 0:x.dataset.side,v=w==="right",y=v?-5:5,S=p[v?"left":"right"],E=p[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+y,y:d.clientY},{x:S,y:p.top},{x:E,y:p.top},{x:E,y:p.bottom},{x:S,y:p.bottom}],side:w}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:it(t.onKeyDown,d=>{var m;const p=s.searchRef.current!=="";t.disabled||p&&d.key===" "||yae[r.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});Jz.displayName=Fp;var Qz="MenuSubContent",Zz=b.forwardRef((t,e)=>{const n=Oz(Js,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=vd(Js,t.__scopeMenu),o=_g(Js,t.__scopeMenu),a=Yz(Qz,t.__scopeMenu),l=b.useRef(null),c=Lt(e,l);return h.jsx(Lm.Provider,{scope:t.__scopeMenu,children:h.jsx(Ms,{present:r||s.open,children:h.jsx(Lm.Slot,{scope:t.__scopeMenu,children:h.jsx(SA,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:it(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:it(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:it(t.onKeyDown,u=>{var m;const d=u.currentTarget.contains(u.target),p=vae[o.dir].includes(u.key);d&&p&&(s.onOpenChange(!1),(m=a.trigger)==null||m.focus(),u.preventDefault())})})})})})});Zz.displayName=Qz;function eB(t){return t?"open":"closed"}function Qx(t){return t==="indeterminate"}function CA(t){return Qx(t)?"indeterminate":t?"checked":"unchecked"}function jae(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Uae(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function zae(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Uae(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Bae(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,p=l.y;u>r!=p>r&&n<(d-c)*(r-u)/(p-u)+c&&(i=!i)}return i}function Hae(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Bae(n,e)}function Om(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Vae=Lz,$ae=xA,Wae=Fz,Gae=jz,qae=_A,Xae=Uz,Kae=xw,Yae=Bz,Jae=Vz,Qae=Wz,Zae=qz,ele=Xz,tle=Kz,nle=Jz,rle=Zz,ww="DropdownMenu",[ile,$2e]=Mi(ww,[Dz]),Ti=Dz(),[sle,tB]=ile(ww),nB=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=Ti(e),c=b.useRef(null),[u,d]=_s({prop:i,defaultProp:s??!1,onChange:o,caller:ww});return h.jsx(sle,{scope:e,triggerId:Ur(),triggerRef:c,contentId:Ur(),open:u,onOpenChange:d,onOpenToggle:b.useCallback(()=>d(p=>!p),[d]),modal:a,children:h.jsx(Vae,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};nB.displayName=ww;var rB="DropdownMenuTrigger",iB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=tB(rB,n),o=Ti(n);return h.jsx($ae,{asChild:!0,...o,children:h.jsx(bt.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:il(e,s.triggerRef),onPointerDown:it(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:it(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});iB.displayName=rB;var ole="DropdownMenuPortal",sB=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Ti(e);return h.jsx(Wae,{...r,...n})};sB.displayName=ole;var oB="DropdownMenuContent",aB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=tB(oB,n),s=Ti(n),o=b.useRef(!1);return h.jsx(Gae,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:it(t.onCloseAutoFocus,a=>{var l;o.current||(l=i.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:it(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});aB.displayName=oB;var ale="DropdownMenuGroup",lle=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ti(n);return h.jsx(qae,{...i,...r,ref:e})});lle.displayName=ale;var cle="DropdownMenuLabel",lB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ti(n);return h.jsx(Xae,{...i,...r,ref:e})});lB.displayName=cle;var ule="DropdownMenuItem",cB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ti(n);return h.jsx(Kae,{...i,...r,ref:e})});cB.displayName=ule;var dle="DropdownMenuCheckboxItem",uB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ti(n);return h.jsx(Yae,{...i,...r,ref:e})});uB.displayName=dle;var fle="DropdownMenuRadioGroup",hle=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ti(n);return h.jsx(Jae,{...i,...r,ref:e})});hle.displayName=fle;var ple="DropdownMenuRadioItem",dB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ti(n);return h.jsx(Qae,{...i,...r,ref:e})});dB.displayName=ple;var mle="DropdownMenuItemIndicator",fB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ti(n);return h.jsx(Zae,{...i,...r,ref:e})});fB.displayName=mle;var gle="DropdownMenuSeparator",hB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ti(n);return h.jsx(ele,{...i,...r,ref:e})});hB.displayName=gle;var yle="DropdownMenuArrow",vle=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ti(n);return h.jsx(tle,{...i,...r,ref:e})});vle.displayName=yle;var xle="DropdownMenuSubTrigger",pB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ti(n);return h.jsx(nle,{...i,...r,ref:e})});pB.displayName=xle;var wle="DropdownMenuSubContent",mB=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Ti(n);return h.jsx(rle,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});mB.displayName=wle;var ble=nB,Sle=iB,_le=sB,gB=aB,yB=lB,vB=cB,xB=uB,wB=dB,bB=fB,SB=hB,_B=pB,EB=mB;const bw=ble,Sw=Sle,Ele=b.forwardRef(({className:t,inset:e,children:n,...r},i)=>h.jsxs(_B,{ref:i,className:dt("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,h.jsx(tte,{className:"ml-auto h-4 w-4"})]}));Ele.displayName=_B.displayName;const Cle=b.forwardRef(({className:t,...e},n)=>h.jsx(EB,{ref:n,className:dt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Cle.displayName=EB.displayName;const Eg=b.forwardRef(({className:t,sideOffset:e=4,...n},r)=>h.jsx(_le,{children:h.jsx(gB,{ref:r,sideOffset:e,className:dt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Eg.displayName=gB.displayName;const xs=b.forwardRef(({className:t,inset:e,...n},r)=>h.jsx(vB,{ref:r,className:dt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));xs.displayName=vB.displayName;const Mle=b.forwardRef(({className:t,children:e,checked:n,...r},i)=>h.jsxs(xB,{ref:i,className:dt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(bB,{children:h.jsx(wi,{className:"h-4 w-4"})})}),e]}));Mle.displayName=xB.displayName;const Tle=b.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(wB,{ref:r,className:dt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(bB,{children:h.jsx(KU,{className:"h-2 w-2 fill-current"})})}),e]}));Tle.displayName=wB.displayName;const CB=b.forwardRef(({className:t,inset:e,...n},r)=>h.jsx(yB,{ref:r,className:dt("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));CB.displayName=yB.displayName;const sf=b.forwardRef(({className:t,...e},n)=>h.jsx(SB,{ref:n,className:dt("-mx-1 my-1 h-px bg-muted",t),...e}));sf.displayName=SB.displayName;const Ale=()=>{const{currentUser:t,login:e,logout:n}=to(),{theme:r,setTheme:i}=Ts(),{aiEnabled:s,setAiEnabled:o}=gA(),{toast:a}=rr();ul();const l=ya(),c=()=>{try{e()}catch(m){console.error("Error initiating login:",m),a({title:"Error",description:"Could not start sign-in process. Please try again.",variant:"destructive"})}},u=(m,x)=>{if(m&&m.trim()){const w=m.trim().split(" ");return w.length>=2?(w[0][0]+w[w.length-1][0]).toUpperCase():w[0][0].toUpperCase()}return x?x[0].toUpperCase():"U"},d=async()=>{try{await n(),a({title:"Goodbye!",description:"Successfully signed out."})}catch{a({title:"Error",description:"Failed to sign out. Please try again.",variant:"destructive"})}},p=m=>{l(m==="/"?t?"/canvas":"/home":m)};return h.jsx("nav",{className:"border-b backdrop-blur supports-[backdrop-filter]:bg-background/60",style:{backgroundColor:r==="dark"?"#1e293b":"#ffffff",borderBottomColor:r==="dark"?"#475569":"#e5e7eb"},children:h.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between items-center h-16",children:[h.jsx("div",{className:"flex items-center",children:h.jsx("img",{src:r==="dark"?"/cover_whitetext.png":"/cover.png",alt:"Itemize",className:"h-16 w-auto cursor-pointer",onClick:()=>p("/")})}),h.jsx("div",{className:"flex items-center md:space-x-4",children:t?h.jsxs(bw,{children:[h.jsx(Sw,{asChild:!0,children:h.jsx($e,{variant:"ghost",className:"relative h-9 w-9 rounded-full p-0 bg-blue-600 hover:bg-blue-700 border-0",children:h.jsx(Nte,{className:"h-5 w-5 text-white"})})}),h.jsxs(Eg,{className:"w-64",align:"end",forceMount:!0,children:[h.jsx(CB,{className:"font-normal",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-medium text-sm",children:u(t.name||"",t.email||"")}),h.jsxs("div",{className:"flex flex-col space-y-1",children:[h.jsx("p",{className:"text-sm font-medium leading-none",children:t.name||"User"}),h.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:t.email})]})]})}),h.jsx(sf,{}),h.jsxs("div",{className:"px-2 py-2",children:[h.jsxs("div",{className:"flex items-center mb-2",children:[h.jsx(Cte,{className:"mr-2 h-4 w-4 text-blue-600"}),h.jsx("span",{className:"text-sm font-medium",children:"Theme"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 ml-6",children:[h.jsxs("button",{onClick:()=>i("light"),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm transition-colors ${r==="light"?"bg-accent text-accent-foreground":"hover:bg-accent/80 hover:text-accent-foreground"}`,children:[h.jsx(Tte,{className:"h-4 w-4"}),"Light"]}),h.jsxs("button",{onClick:()=>i("dark"),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm transition-colors ${r==="dark"?"bg-accent text-accent-foreground":"hover:bg-accent/80 hover:text-accent-foreground"}`,children:[h.jsx(wte,{className:"h-4 w-4"}),"Dark"]})]})]}),h.jsx(sf,{}),h.jsx("div",{className:"px-2 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(oc,{className:"mr-2 h-4 w-4 text-blue-600"}),h.jsx(Un,{htmlFor:"ai-suggest-toggle",className:"text-sm font-medium",children:"AI Enhancements"})]}),h.jsx(hz,{id:"ai-suggest-toggle",checked:s,onCheckedChange:o})]})}),h.jsx(sf,{}),h.jsxs(xs,{onClick:()=>p("/help"),children:[h.jsx(qU,{className:"mr-2 h-4 w-4 text-blue-600"}),h.jsx("span",{children:"Help"})]}),h.jsx(sf,{}),h.jsxs(xs,{onClick:()=>p("/status"),children:[h.jsx(GT,{className:"mr-2 h-4 w-4 text-blue-600"}),h.jsx("span",{children:"Status"})]}),h.jsx(sf,{}),h.jsxs(xs,{onClick:d,children:[h.jsx(yte,{className:"mr-2 h-4 w-4 text-red-600"}),h.jsx("span",{children:"Log out"})]})]})]}):h.jsxs($e,{onClick:c,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-light",size:"sm",children:[h.jsx(gte,{className:"mr-2 h-4 w-4"}),"Sign in"]})})]})})})},Rle=()=>{const{theme:t}=Ts(),e=ya();ul(),rr();const{currentUser:n}=to(),r=new Date().getFullYear(),i=()=>{window.scrollTo({top:0,behavior:"smooth"})},s=o=>{e(o)};return h.jsx("footer",{className:"border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 mt-12",children:h.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("div",{className:"flex items-center mb-4",children:h.jsx("img",{src:t==="dark"?"/cover_whitetext.png":"/cover.png",alt:"Itemize",className:"h-10 w-auto cursor-pointer",onClick:()=>s("/")})}),h.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"Organize thoughts, ideas, projects and more with AI-enhanced tools."})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium mb-4",children:"Quick Links"}),h.jsxs("ul",{className:"space-y-2",children:[h.jsx("li",{}),n&&h.jsx("li",{children:h.jsxs($e,{variant:"ghost",className:"w-full justify-start pl-2 text-muted-foreground hover:text-foreground",onClick:()=>s("/canvas"),children:[h.jsx(cl,{className:"mr-2 h-4 w-4"}),"Canvas"]})}),h.jsx("li",{children:h.jsxs($e,{variant:"ghost",className:"w-full justify-start pl-2 text-muted-foreground hover:text-foreground",onClick:()=>s("/help"),children:[h.jsx(qU,{className:"mr-2 h-4 w-4"}),"Help"]})}),h.jsx("li",{children:h.jsxs($e,{variant:"ghost",className:"w-full justify-start pl-2 text-muted-foreground hover:text-foreground",onClick:()=>s("/status"),children:[h.jsx(GT,{className:"mr-2 h-4 w-4"}),"Status"]})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium mb-4",children:"Connect"}),h.jsxs("div",{className:"flex space-x-4 mb-4",children:[h.jsx($e,{variant:"outline",size:"icon",onClick:()=>window.open("https://twitter.com/codebymv","_blank"),children:h.jsx(Ate,{className:"h-4 w-4"})}),h.jsx($e,{variant:"outline",size:"icon",onClick:()=>window.open("https://github.com/codebymv/itemize","_blank"),children:h.jsx(ute,{className:"h-4 w-4"})}),h.jsx($e,{variant:"outline",size:"icon",onClick:()=>window.open("https://codebymv.com","_blank"),children:h.jsx(dte,{className:"h-4 w-4"})})]})]})]}),h.jsxs("div",{className:"border-t pt-6 flex flex-col md:flex-row justify-between items-center",children:[h.jsxs("p",{className:"text-sm text-muted-foreground mb-4 md:mb-0",children:["© ",r," Itemize. All rights reserved."]}),h.jsxs("div",{className:"flex items-center space-x-6",children:[h.jsx($e,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",onClick:()=>s("/help/terms-of-service"),children:"Terms of Service"}),h.jsxs($e,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground flex items-center",onClick:i,children:["Back to top",h.jsx(ete,{className:"ml-1 h-4 w-4"})]})]})]})]})})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const MA="177",Nle=0,BD=1,kle=2,MB=1,Ple=2,Fa=3,Pc=0,Gi=1,ea=2,wc=0,Of=1,HD=2,VD=3,$D=4,Dle=5,wu=100,Ile=101,Lle=102,Ole=103,Fle=104,jle=200,Ule=201,zle=202,Ble=203,iC=204,sC=205,Hle=206,Vle=207,$le=208,Wle=209,Gle=210,qle=211,Xle=212,Kle=213,Yle=214,oC=0,aC=1,lC=2,uh=3,cC=4,uC=5,dC=6,fC=7,TB=0,Jle=1,Qle=2,bc=0,Zle=1,ece=2,tce=3,nce=4,rce=5,ice=6,sce=7,AB=300,dh=301,fh=302,hC=303,pC=304,_w=306,mC=1e3,Ru=1001,gC=1002,Co=1003,oce=1004,Zy=1005,na=1006,m1=1007,Nu=1008,ua=1009,RB=1010,NB=1011,Fm=1012,TA=1013,td=1014,Ga=1015,Cg=1016,AA=1017,RA=1018,jm=1020,kB=35902,PB=1021,DB=1022,So=1023,Um=1026,zm=1027,IB=1028,NA=1029,LB=1030,kA=1031,PA=1033,rx=33776,ix=33777,sx=33778,ox=33779,yC=35840,vC=35841,xC=35842,wC=35843,bC=36196,SC=37492,_C=37496,EC=37808,CC=37809,MC=37810,TC=37811,AC=37812,RC=37813,NC=37814,kC=37815,PC=37816,DC=37817,IC=37818,LC=37819,OC=37820,FC=37821,ax=36492,jC=36494,UC=36495,OB=36283,zC=36284,BC=36285,HC=36286,ace=3200,lce=3201,cce=0,uce=1,Jl="",Us="srgb",hh="srgb-linear",Zx="linear",_n="srgb",Bd=7680,WD=519,dce=512,fce=513,hce=514,FB=515,pce=516,mce=517,gce=518,yce=519,GD=35044,qD="300 es",qa=2e3,e0=2001;class Lh{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const Yr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],g1=Math.PI/180,VC=180/Math.PI;function Mg(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Yr[t&255]+Yr[t>>8&255]+Yr[t>>16&255]+Yr[t>>24&255]+"-"+Yr[e&255]+Yr[e>>8&255]+"-"+Yr[e>>16&15|64]+Yr[e>>24&255]+"-"+Yr[n&63|128]+Yr[n>>8&255]+"-"+Yr[n>>16&255]+Yr[n>>24&255]+Yr[r&255]+Yr[r>>8&255]+Yr[r>>16&255]+Yr[r>>24&255]).toLowerCase()}function ln(t,e,n){return Math.max(e,Math.min(n,t))}function vce(t,e){return(t%e+e)%e}function y1(t,e,n){return(1-n)*t+n*e}function Sp(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Li(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}class bn{constructor(e=0,n=0){bn.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=ln(this.x,e.x,n.x),this.y=ln(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=ln(this.x,e,n),this.y=ln(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(ln(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(ln(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Tg{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const p=s[o+0],m=s[o+1],x=s[o+2],w=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(a===1){e[n+0]=p,e[n+1]=m,e[n+2]=x,e[n+3]=w;return}if(d!==w||l!==p||c!==m||u!==x){let v=1-a;const y=l*p+c*m+u*x+d*w,S=y>=0?1:-1,E=1-y*y;if(E>Number.EPSILON){const A=Math.sqrt(E),T=Math.atan2(A,y*S);v=Math.sin(v*T)/A,a=Math.sin(a*T)/A}const C=a*S;if(l=l*v+p*C,c=c*v+m*C,u=u*v+x*C,d=d*v+w*C,v===1-a){const A=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=A,c*=A,u*=A,d*=A}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[o],p=s[o+1],m=s[o+2],x=s[o+3];return e[n]=a*x+u*d+l*m-c*p,e[n+1]=l*x+u*p+c*d-a*m,e[n+2]=c*x+u*m+a*p-l*d,e[n+3]=u*x-a*d-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(s/2),p=l(r/2),m=l(i/2),x=l(s/2);switch(o){case"XYZ":this._x=p*u*d+c*m*x,this._y=c*m*d-p*u*x,this._z=c*u*x+p*m*d,this._w=c*u*d-p*m*x;break;case"YXZ":this._x=p*u*d+c*m*x,this._y=c*m*d-p*u*x,this._z=c*u*x-p*m*d,this._w=c*u*d+p*m*x;break;case"ZXY":this._x=p*u*d-c*m*x,this._y=c*m*d+p*u*x,this._z=c*u*x+p*m*d,this._w=c*u*d-p*m*x;break;case"ZYX":this._x=p*u*d-c*m*x,this._y=c*m*d+p*u*x,this._z=c*u*x-p*m*d,this._w=c*u*d+p*m*x;break;case"YZX":this._x=p*u*d+c*m*x,this._y=c*m*d+p*u*x,this._z=c*u*x-p*m*d,this._w=c*u*d-p*m*x;break;case"XZY":this._x=p*u*d-c*m*x,this._y=c*m*d-p*u*x,this._z=c*u*x+p*m*d,this._w=c*u*d+p*m*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],d=n[10],p=r+a+d;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-i)*m}else if(r>a&&r>d){const m=2*Math.sqrt(1+r-a-d);this._w=(u-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+c)/m}else if(a>d){const m=2*Math.sqrt(1+a-r-d);this._w=(s-c)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+d-r-a);this._w=(o-i)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ln(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-n;return this._w=m*o+n*this._w,this._x=m*r+n*this._x,this._y=m*i+n*this._y,this._z=m*s+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-n)*u)/c,p=Math.sin(n*u)/c;return this._w=o*d+this._w*p,this._x=r*d+this._x*p,this._y=i*d+this._y*p,this._z=s*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ee{constructor(e=0,n=0,r=0){Ee.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(XD.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(XD.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*n-s*i),d=2*(s*r-o*n);return this.x=n+l*c+o*d-a*u,this.y=r+l*u+a*c-s*d,this.z=i+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=ln(this.x,e.x,n.x),this.y=ln(this.y,e.y,n.y),this.z=ln(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=ln(this.x,e,n),this.y=ln(this.y,e,n),this.z=ln(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(ln(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return v1.copy(this).projectOnVector(e),this.sub(v1)}reflect(e){return this.sub(v1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(ln(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const v1=new Ee,XD=new Tg;class Ht{constructor(e,n,r,i,s,o,a,l,c){Ht.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c)}set(e,n,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],p=r[2],m=r[5],x=r[8],w=i[0],v=i[3],y=i[6],S=i[1],E=i[4],C=i[7],A=i[2],T=i[5],k=i[8];return s[0]=o*w+a*S+l*A,s[3]=o*v+a*E+l*T,s[6]=o*y+a*C+l*k,s[1]=c*w+u*S+d*A,s[4]=c*v+u*E+d*T,s[7]=c*y+u*C+d*k,s[2]=p*w+m*S+x*A,s[5]=p*v+m*E+x*T,s[8]=p*y+m*C+x*k,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,p=a*l-u*s,m=c*s-o*l,x=n*d+r*p+i*m;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=d*w,e[1]=(i*c-u*r)*w,e[2]=(a*r-i*o)*w,e[3]=p*w,e[4]=(u*n-i*l)*w,e[5]=(i*s-a*n)*w,e[6]=m*w,e[7]=(r*l-c*n)*w,e[8]=(o*n-r*s)*w,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(x1.makeScale(e,n)),this}rotate(e){return this.premultiply(x1.makeRotation(-e)),this}translate(e,n){return this.premultiply(x1.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const x1=new Ht;function jB(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function t0(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function xce(){const t=t0("canvas");return t.style.display="block",t}const KD={};function Ff(t){t in KD||(KD[t]=!0,console.warn(t))}function wce(t,e,n){return new Promise(function(r,i){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:r()}}setTimeout(s,n)})}function bce(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Sce(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const YD=new Ht().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),JD=new Ht().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function _ce(){const t={enabled:!0,workingColorSpace:hh,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===_n&&(i.r=Ya(i.r),i.g=Ya(i.g),i.b=Ya(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===_n&&(i.r=jf(i.r),i.g=jf(i.g),i.b=jf(i.b))),i},workingToColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},colorSpaceToWorking:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Jl?Zx:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,s){return Ff("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(i,s)},toWorkingColorSpace:function(i,s){return Ff("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(i,s)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[hh]:{primaries:e,whitePoint:r,transfer:Zx,toXYZ:YD,fromXYZ:JD,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Us},outputColorSpaceConfig:{drawingBufferColorSpace:Us}},[Us]:{primaries:e,whitePoint:r,transfer:_n,toXYZ:YD,fromXYZ:JD,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Us}}}),t}const hn=_ce();function Ya(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function jf(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Hd;class Ece{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{Hd===void 0&&(Hd=t0("canvas")),Hd.width=e.width,Hd.height=e.height;const i=Hd.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=Hd}return r.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=t0("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Ya(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Ya(n[r]/255)*255):n[r]=Ya(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Cce=0;class DA{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Cce++}),this.uuid=Mg(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const n=this.data;return n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(w1(i[o].image)):s.push(w1(i[o]))}else s=w1(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function w1(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Ece.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Mce=0;const b1=new Ee;class qi extends Lh{constructor(e=qi.DEFAULT_IMAGE,n=qi.DEFAULT_MAPPING,r=Ru,i=Ru,s=na,o=Nu,a=So,l=ua,c=qi.DEFAULT_ANISOTROPY,u=Jl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Mce++}),this.uuid=Mg(),this.name="",this.source=new DA(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new bn(0,0),this.repeat=new bn(1,1),this.center=new bn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ht,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(b1).x}get height(){return this.source.getSize(b1).y}get depth(){return this.source.getSize(b1).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Texture.setValues(): parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Texture.setValues(): property '${n}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==AB)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case mC:e.x=e.x-Math.floor(e.x);break;case Ru:e.x=e.x<0?0:1;break;case gC:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case mC:e.y=e.y-Math.floor(e.y);break;case Ru:e.y=e.y<0?0:1;break;case gC:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}qi.DEFAULT_IMAGE=null;qi.DEFAULT_MAPPING=AB;qi.DEFAULT_ANISOTROPY=1;class Kn{constructor(e=0,n=0,r=0,i=1){Kn.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],p=l[1],m=l[5],x=l[9],w=l[2],v=l[6],y=l[10];if(Math.abs(u-p)<.01&&Math.abs(d-w)<.01&&Math.abs(x-v)<.01){if(Math.abs(u+p)<.1&&Math.abs(d+w)<.1&&Math.abs(x+v)<.1&&Math.abs(c+m+y-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const E=(c+1)/2,C=(m+1)/2,A=(y+1)/2,T=(u+p)/4,k=(d+w)/4,R=(x+v)/4;return E>C&&E>A?E<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(E),i=T/r,s=k/r):C>A?C<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(C),r=T/i,s=R/i):A<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(A),r=k/s,i=R/s),this.set(r,i,s,n),this}let S=Math.sqrt((v-x)*(v-x)+(d-w)*(d-w)+(p-u)*(p-u));return Math.abs(S)<.001&&(S=1),this.x=(v-x)/S,this.y=(d-w)/S,this.z=(p-u)/S,this.w=Math.acos((c+m+y-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=ln(this.x,e.x,n.x),this.y=ln(this.y,e.y,n.y),this.z=ln(this.z,e.z,n.z),this.w=ln(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=ln(this.x,e,n),this.y=ln(this.y,e,n),this.z=ln(this.z,e,n),this.w=ln(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(ln(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Tce extends Lh{constructor(e=1,n=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:na,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=r.depth,this.scissor=new Kn(0,0,e,n),this.scissorTest=!1,this.viewport=new Kn(0,0,e,n);const i={width:e,height:n,depth:r.depth},s=new qi(i);this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const n={minFilter:na,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r,this.textures[i].isArrayTexture=this.textures[i].image.depth>1;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const i=Object.assign({},e.textures[n].image);this.textures[n].source=new DA(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class nd extends Tce{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class UB extends qi{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Co,this.minFilter=Co,this.wrapR=Ru,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Ace extends qi{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Co,this.minFilter=Co,this.wrapR=Ru,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ag{constructor(e=new Ee(1/0,1/0,1/0),n=new Ee(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(lo.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(lo.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=lo.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,lo):lo.fromBufferAttribute(s,o),lo.applyMatrix4(e.matrixWorld),this.expandByPoint(lo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),ev.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),ev.copy(r.boundingBox)),ev.applyMatrix4(e.matrixWorld),this.union(ev)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,lo),lo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_p),tv.subVectors(this.max,_p),Vd.subVectors(e.a,_p),$d.subVectors(e.b,_p),Wd.subVectors(e.c,_p),Dl.subVectors($d,Vd),Il.subVectors(Wd,$d),cu.subVectors(Vd,Wd);let n=[0,-Dl.z,Dl.y,0,-Il.z,Il.y,0,-cu.z,cu.y,Dl.z,0,-Dl.x,Il.z,0,-Il.x,cu.z,0,-cu.x,-Dl.y,Dl.x,0,-Il.y,Il.x,0,-cu.y,cu.x,0];return!S1(n,Vd,$d,Wd,tv)||(n=[1,0,0,0,1,0,0,0,1],!S1(n,Vd,$d,Wd,tv))?!1:(nv.crossVectors(Dl,Il),n=[nv.x,nv.y,nv.z],S1(n,Vd,$d,Wd,tv))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,lo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(lo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Na[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Na[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Na[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Na[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Na[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Na[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Na[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Na[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Na),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Na=[new Ee,new Ee,new Ee,new Ee,new Ee,new Ee,new Ee,new Ee],lo=new Ee,ev=new Ag,Vd=new Ee,$d=new Ee,Wd=new Ee,Dl=new Ee,Il=new Ee,cu=new Ee,_p=new Ee,tv=new Ee,nv=new Ee,uu=new Ee;function S1(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){uu.fromArray(t,s);const a=i.x*Math.abs(uu.x)+i.y*Math.abs(uu.y)+i.z*Math.abs(uu.z),l=e.dot(uu),c=n.dot(uu),u=r.dot(uu);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Rce=new Ag,Ep=new Ee,_1=new Ee;class IA{constructor(e=new Ee,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):Rce.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ep.subVectors(e,this.center);const n=Ep.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Ep,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(_1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ep.copy(e.center).add(_1)),this.expandByPoint(Ep.copy(e.center).sub(_1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const ka=new Ee,E1=new Ee,rv=new Ee,Ll=new Ee,C1=new Ee,iv=new Ee,M1=new Ee;class Nce{constructor(e=new Ee,n=new Ee(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ka)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=ka.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(ka.copy(this.origin).addScaledVector(this.direction,n),ka.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){E1.copy(e).add(n).multiplyScalar(.5),rv.copy(n).sub(e).normalize(),Ll.copy(this.origin).sub(E1);const s=e.distanceTo(n)*.5,o=-this.direction.dot(rv),a=Ll.dot(this.direction),l=-Ll.dot(rv),c=Ll.lengthSq(),u=Math.abs(1-o*o);let d,p,m,x;if(u>0)if(d=o*l-a,p=o*a-l,x=s*u,d>=0)if(p>=-x)if(p<=x){const w=1/u;d*=w,p*=w,m=d*(d+o*p+2*a)+p*(o*d+p+2*l)+c}else p=s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p=-s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;else p<=-x?(d=Math.max(0,-(-o*s+a)),p=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c):p<=x?(d=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(d=Math.max(0,-(o*s+a)),p=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+p*(p+2*l)+c);else p=o>0?-s:s,d=Math.max(0,-(o*p+a)),m=-d*d+p*(p+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(E1).addScaledVector(rv,p),m}intersectSphere(e,n){ka.subVectors(e.center,this.origin);const r=ka.dot(this.direction),i=ka.dot(ka)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,p=this.origin;return c>=0?(r=(e.min.x-p.x)*c,i=(e.max.x-p.x)*c):(r=(e.max.x-p.x)*c,i=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(a=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,ka)!==null}intersectTriangle(e,n,r,i,s){C1.subVectors(n,e),iv.subVectors(r,e),M1.crossVectors(C1,iv);let o=this.direction.dot(M1),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ll.subVectors(this.origin,e);const l=a*this.direction.dot(iv.crossVectors(Ll,iv));if(l<0)return null;const c=a*this.direction.dot(C1.cross(Ll));if(c<0||l+c>o)return null;const u=-a*Ll.dot(M1);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Yn{constructor(e,n,r,i,s,o,a,l,c,u,d,p,m,x,w,v){Yn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c,u,d,p,m,x,w,v)}set(e,n,r,i,s,o,a,l,c,u,d,p,m,x,w,v){const y=this.elements;return y[0]=e,y[4]=n,y[8]=r,y[12]=i,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=c,y[6]=u,y[10]=d,y[14]=p,y[3]=m,y[7]=x,y[11]=w,y[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Yn().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Gd.setFromMatrixColumn(e,0).length(),s=1/Gd.setFromMatrixColumn(e,1).length(),o=1/Gd.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const p=o*u,m=o*d,x=a*u,w=a*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=m+x*c,n[5]=p-w*c,n[9]=-a*l,n[2]=w-p*c,n[6]=x+m*c,n[10]=o*l}else if(e.order==="YXZ"){const p=l*u,m=l*d,x=c*u,w=c*d;n[0]=p+w*a,n[4]=x*a-m,n[8]=o*c,n[1]=o*d,n[5]=o*u,n[9]=-a,n[2]=m*a-x,n[6]=w+p*a,n[10]=o*l}else if(e.order==="ZXY"){const p=l*u,m=l*d,x=c*u,w=c*d;n[0]=p-w*a,n[4]=-o*d,n[8]=x+m*a,n[1]=m+x*a,n[5]=o*u,n[9]=w-p*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const p=o*u,m=o*d,x=a*u,w=a*d;n[0]=l*u,n[4]=x*c-m,n[8]=p*c+w,n[1]=l*d,n[5]=w*c+p,n[9]=m*c-x,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,x=a*l,w=a*c;n[0]=l*u,n[4]=w-p*d,n[8]=x*d+m,n[1]=d,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=m*d+x,n[10]=p-w*d}else if(e.order==="XZY"){const p=o*l,m=o*c,x=a*l,w=a*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=p*d+w,n[5]=o*u,n[9]=m*d-x,n[2]=x*d-m,n[6]=a*u,n[10]=w*d+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(kce,e,Pce)}lookAt(e,n,r){const i=this.elements;return as.subVectors(e,n),as.lengthSq()===0&&(as.z=1),as.normalize(),Ol.crossVectors(r,as),Ol.lengthSq()===0&&(Math.abs(r.z)===1?as.x+=1e-4:as.z+=1e-4,as.normalize(),Ol.crossVectors(r,as)),Ol.normalize(),sv.crossVectors(as,Ol),i[0]=Ol.x,i[4]=sv.x,i[8]=as.x,i[1]=Ol.y,i[5]=sv.y,i[9]=as.y,i[2]=Ol.z,i[6]=sv.z,i[10]=as.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],p=r[9],m=r[13],x=r[2],w=r[6],v=r[10],y=r[14],S=r[3],E=r[7],C=r[11],A=r[15],T=i[0],k=i[4],R=i[8],P=i[12],M=i[1],L=i[5],z=i[9],H=i[13],B=i[2],K=i[6],q=i[10],ee=i[14],O=i[3],F=i[7],D=i[11],ie=i[15];return s[0]=o*T+a*M+l*B+c*O,s[4]=o*k+a*L+l*K+c*F,s[8]=o*R+a*z+l*q+c*D,s[12]=o*P+a*H+l*ee+c*ie,s[1]=u*T+d*M+p*B+m*O,s[5]=u*k+d*L+p*K+m*F,s[9]=u*R+d*z+p*q+m*D,s[13]=u*P+d*H+p*ee+m*ie,s[2]=x*T+w*M+v*B+y*O,s[6]=x*k+w*L+v*K+y*F,s[10]=x*R+w*z+v*q+y*D,s[14]=x*P+w*H+v*ee+y*ie,s[3]=S*T+E*M+C*B+A*O,s[7]=S*k+E*L+C*K+A*F,s[11]=S*R+E*z+C*q+A*D,s[15]=S*P+E*H+C*ee+A*ie,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],p=e[10],m=e[14],x=e[3],w=e[7],v=e[11],y=e[15];return x*(+s*l*d-i*c*d-s*a*p+r*c*p+i*a*m-r*l*m)+w*(+n*l*m-n*c*p+s*o*p-i*o*m+i*c*u-s*l*u)+v*(+n*c*d-n*a*m-s*o*d+r*o*m+s*a*u-r*c*u)+y*(-i*a*u-n*l*d+n*a*p+i*o*d-r*o*p+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],p=e[10],m=e[11],x=e[12],w=e[13],v=e[14],y=e[15],S=d*v*c-w*p*c+w*l*m-a*v*m-d*l*y+a*p*y,E=x*p*c-u*v*c-x*l*m+o*v*m+u*l*y-o*p*y,C=u*w*c-x*d*c+x*a*m-o*w*m-u*a*y+o*d*y,A=x*d*l-u*w*l-x*a*p+o*w*p+u*a*v-o*d*v,T=n*S+r*E+i*C+s*A;if(T===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/T;return e[0]=S*k,e[1]=(w*p*s-d*v*s-w*i*m+r*v*m+d*i*y-r*p*y)*k,e[2]=(a*v*s-w*l*s+w*i*c-r*v*c-a*i*y+r*l*y)*k,e[3]=(d*l*s-a*p*s-d*i*c+r*p*c+a*i*m-r*l*m)*k,e[4]=E*k,e[5]=(u*v*s-x*p*s+x*i*m-n*v*m-u*i*y+n*p*y)*k,e[6]=(x*l*s-o*v*s-x*i*c+n*v*c+o*i*y-n*l*y)*k,e[7]=(o*p*s-u*l*s+u*i*c-n*p*c-o*i*m+n*l*m)*k,e[8]=C*k,e[9]=(x*d*s-u*w*s-x*r*m+n*w*m+u*r*y-n*d*y)*k,e[10]=(o*w*s-x*a*s+x*r*c-n*w*c-o*r*y+n*a*y)*k,e[11]=(u*a*s-o*d*s-u*r*c+n*d*c+o*r*m-n*a*m)*k,e[12]=A*k,e[13]=(u*w*i-x*d*i+x*r*p-n*w*p-u*r*v+n*d*v)*k,e[14]=(x*a*i-o*w*i-x*r*l+n*w*l+o*r*v-n*a*v)*k,e[15]=(o*d*i-u*a*i+u*r*l-n*d*l-o*r*p+n*a*p)*k,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,u=o+o,d=a+a,p=s*c,m=s*u,x=s*d,w=o*u,v=o*d,y=a*d,S=l*c,E=l*u,C=l*d,A=r.x,T=r.y,k=r.z;return i[0]=(1-(w+y))*A,i[1]=(m+C)*A,i[2]=(x-E)*A,i[3]=0,i[4]=(m-C)*T,i[5]=(1-(p+y))*T,i[6]=(v+S)*T,i[7]=0,i[8]=(x+E)*k,i[9]=(v-S)*k,i[10]=(1-(p+w))*k,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=Gd.set(i[0],i[1],i[2]).length();const o=Gd.set(i[4],i[5],i[6]).length(),a=Gd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],co.copy(this);const c=1/s,u=1/o,d=1/a;return co.elements[0]*=c,co.elements[1]*=c,co.elements[2]*=c,co.elements[4]*=u,co.elements[5]*=u,co.elements[6]*=u,co.elements[8]*=d,co.elements[9]*=d,co.elements[10]*=d,n.setFromRotationMatrix(co),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o,a=qa){const l=this.elements,c=2*s/(n-e),u=2*s/(r-i),d=(n+e)/(n-e),p=(r+i)/(r-i);let m,x;if(a===qa)m=-(o+s)/(o-s),x=-2*o*s/(o-s);else if(a===e0)m=-o/(o-s),x=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,s,o,a=qa){const l=this.elements,c=1/(n-e),u=1/(r-i),d=1/(o-s),p=(n+e)*c,m=(r+i)*u;let x,w;if(a===qa)x=(o+s)*d,w=-2*d;else if(a===e0)x=s*d,w=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=w,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Gd=new Ee,co=new Yn,kce=new Ee(0,0,0),Pce=new Ee(1,1,1),Ol=new Ee,sv=new Ee,as=new Ee,QD=new Yn,ZD=new Tg;class al{constructor(e=0,n=0,r=0,i=al.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],p=i[6],m=i[10];switch(n){case"XYZ":this._y=Math.asin(ln(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-ln(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(ln(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-ln(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(ln(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-ln(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return QD.makeRotationFromQuaternion(e),this.setFromRotationMatrix(QD,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return ZD.setFromEuler(this),this.setFromQuaternion(ZD,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}al.DEFAULT_ORDER="XYZ";class zB{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Dce=0;const eI=new Ee,qd=new Tg,Pa=new Yn,ov=new Ee,Cp=new Ee,Ice=new Ee,Lce=new Tg,tI=new Ee(1,0,0),nI=new Ee(0,1,0),rI=new Ee(0,0,1),iI={type:"added"},Oce={type:"removed"},Xd={type:"childadded",child:null},T1={type:"childremoved",child:null};class ii extends Lh{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Dce++}),this.uuid=Mg(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ii.DEFAULT_UP.clone();const e=new Ee,n=new al,r=new Tg,i=new Ee(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Yn},normalMatrix:{value:new Ht}}),this.matrix=new Yn,this.matrixWorld=new Yn,this.matrixAutoUpdate=ii.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=ii.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new zB,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return qd.setFromAxisAngle(e,n),this.quaternion.multiply(qd),this}rotateOnWorldAxis(e,n){return qd.setFromAxisAngle(e,n),this.quaternion.premultiply(qd),this}rotateX(e){return this.rotateOnAxis(tI,e)}rotateY(e){return this.rotateOnAxis(nI,e)}rotateZ(e){return this.rotateOnAxis(rI,e)}translateOnAxis(e,n){return eI.copy(e).applyQuaternion(this.quaternion),this.position.add(eI.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(tI,e)}translateY(e){return this.translateOnAxis(nI,e)}translateZ(e){return this.translateOnAxis(rI,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Pa.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?ov.copy(e):ov.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Cp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Pa.lookAt(Cp,ov,this.up):Pa.lookAt(ov,Cp,this.up),this.quaternion.setFromRotationMatrix(Pa),i&&(Pa.extractRotation(i.matrixWorld),qd.setFromRotationMatrix(Pa),this.quaternion.premultiply(qd.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(iI),Xd.child=e,this.dispatchEvent(Xd),Xd.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Oce),T1.child=e,this.dispatchEvent(T1),T1.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Pa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Pa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Pa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(iI),Xd.child=e,this.dispatchEvent(Xd),Xd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cp,e,Ice),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Cp,Lce,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(a=>({...a})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),p=o(e.skeletons),m=o(e.animations),x=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),p.length>0&&(r.skeletons=p),m.length>0&&(r.animations=m),x.length>0&&(r.nodes=x)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}ii.DEFAULT_UP=new Ee(0,1,0);ii.DEFAULT_MATRIX_AUTO_UPDATE=!0;ii.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const uo=new Ee,Da=new Ee,A1=new Ee,Ia=new Ee,Kd=new Ee,Yd=new Ee,sI=new Ee,R1=new Ee,N1=new Ee,k1=new Ee,P1=new Kn,D1=new Kn,I1=new Kn;class wo{constructor(e=new Ee,n=new Ee,r=new Ee){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),uo.subVectors(e,n),i.cross(uo);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){uo.subVectors(i,n),Da.subVectors(r,n),A1.subVectors(e,n);const o=uo.dot(uo),a=uo.dot(Da),l=uo.dot(A1),c=Da.dot(Da),u=Da.dot(A1),d=o*c-a*a;if(d===0)return s.set(0,0,0),null;const p=1/d,m=(c*l-a*u)*p,x=(o*u-a*l)*p;return s.set(1-m-x,x,m)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Ia)===null?!1:Ia.x>=0&&Ia.y>=0&&Ia.x+Ia.y<=1}static getInterpolation(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,Ia)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Ia.x),l.addScaledVector(o,Ia.y),l.addScaledVector(a,Ia.z),l)}static getInterpolatedAttribute(e,n,r,i,s,o){return P1.setScalar(0),D1.setScalar(0),I1.setScalar(0),P1.fromBufferAttribute(e,n),D1.fromBufferAttribute(e,r),I1.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(P1,s.x),o.addScaledVector(D1,s.y),o.addScaledVector(I1,s.z),o}static isFrontFacing(e,n,r,i){return uo.subVectors(r,n),Da.subVectors(e,n),uo.cross(Da).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return uo.subVectors(this.c,this.b),Da.subVectors(this.a,this.b),uo.cross(Da).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return wo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return wo.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,s){return wo.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return wo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return wo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;Kd.subVectors(i,r),Yd.subVectors(s,r),R1.subVectors(e,r);const l=Kd.dot(R1),c=Yd.dot(R1);if(l<=0&&c<=0)return n.copy(r);N1.subVectors(e,i);const u=Kd.dot(N1),d=Yd.dot(N1);if(u>=0&&d<=u)return n.copy(i);const p=l*d-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(r).addScaledVector(Kd,o);k1.subVectors(e,s);const m=Kd.dot(k1),x=Yd.dot(k1);if(x>=0&&m<=x)return n.copy(s);const w=m*c-l*x;if(w<=0&&c>=0&&x<=0)return a=c/(c-x),n.copy(r).addScaledVector(Yd,a);const v=u*x-m*d;if(v<=0&&d-u>=0&&m-x>=0)return sI.subVectors(s,i),a=(d-u)/(d-u+(m-x)),n.copy(i).addScaledVector(sI,a);const y=1/(v+w+p);return o=w*y,a=p*y,n.copy(r).addScaledVector(Kd,o).addScaledVector(Yd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const BB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fl={h:0,s:0,l:0},av={h:0,s:0,l:0};function L1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class yn{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Us){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,hn.colorSpaceToWorking(this,n),this}setRGB(e,n,r,i=hn.workingColorSpace){return this.r=e,this.g=n,this.b=r,hn.colorSpaceToWorking(this,i),this}setHSL(e,n,r,i=hn.workingColorSpace){if(e=vce(e,1),n=ln(n,0,1),r=ln(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=L1(o,s,e+1/3),this.g=L1(o,s,e),this.b=L1(o,s,e-1/3)}return hn.colorSpaceToWorking(this,i),this}setStyle(e,n=Us){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Us){const r=BB[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ya(e.r),this.g=Ya(e.g),this.b=Ya(e.b),this}copyLinearToSRGB(e){return this.r=jf(e.r),this.g=jf(e.g),this.b=jf(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Us){return hn.workingToColorSpace(Jr.copy(this),e),Math.round(ln(Jr.r*255,0,255))*65536+Math.round(ln(Jr.g*255,0,255))*256+Math.round(ln(Jr.b*255,0,255))}getHexString(e=Us){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=hn.workingColorSpace){hn.workingToColorSpace(Jr.copy(this),n);const r=Jr.r,i=Jr.g,s=Jr.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=hn.workingColorSpace){return hn.workingToColorSpace(Jr.copy(this),n),e.r=Jr.r,e.g=Jr.g,e.b=Jr.b,e}getStyle(e=Us){hn.workingToColorSpace(Jr.copy(this),e);const n=Jr.r,r=Jr.g,i=Jr.b;return e!==Us?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Fl),this.setHSL(Fl.h+e,Fl.s+n,Fl.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Fl),e.getHSL(av);const r=y1(Fl.h,av.h,n),i=y1(Fl.s,av.s,n),s=y1(Fl.l,av.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Jr=new yn;yn.NAMES=BB;let Fce=0;class Ew extends Lh{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Fce++}),this.uuid=Mg(),this.name="",this.type="Material",this.blending=Of,this.side=Pc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=iC,this.blendDst=sC,this.blendEquation=wu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new yn(0,0,0),this.blendAlpha=0,this.depthFunc=uh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=WD,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Bd,this.stencilZFail=Bd,this.stencilZPass=Bd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Of&&(r.blending=this.blending),this.side!==Pc&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==iC&&(r.blendSrc=this.blendSrc),this.blendDst!==sC&&(r.blendDst=this.blendDst),this.blendEquation!==wu&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==uh&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==WD&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Bd&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Bd&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Bd&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class n0 extends Ew{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new yn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new al,this.combine=TB,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ir=new Ee,lv=new bn;let jce=0;class aa{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:jce++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=GD,this.updateRanges=[],this.gpuType=Ga,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)lv.fromBufferAttribute(this,n),lv.applyMatrix3(e),this.setXY(n,lv.x,lv.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)ir.fromBufferAttribute(this,n),ir.applyMatrix3(e),this.setXYZ(n,ir.x,ir.y,ir.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)ir.fromBufferAttribute(this,n),ir.applyMatrix4(e),this.setXYZ(n,ir.x,ir.y,ir.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)ir.fromBufferAttribute(this,n),ir.applyNormalMatrix(e),this.setXYZ(n,ir.x,ir.y,ir.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)ir.fromBufferAttribute(this,n),ir.transformDirection(e),this.setXYZ(n,ir.x,ir.y,ir.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=Sp(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Li(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Sp(n,this.array)),n}setX(e,n){return this.normalized&&(n=Li(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Sp(n,this.array)),n}setY(e,n){return this.normalized&&(n=Li(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Sp(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Li(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Sp(n,this.array)),n}setW(e,n){return this.normalized&&(n=Li(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Li(n,this.array),r=Li(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Li(n,this.array),r=Li(r,this.array),i=Li(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Li(n,this.array),r=Li(r,this.array),i=Li(i,this.array),s=Li(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==GD&&(e.usage=this.usage),e}}class HB extends aa{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class VB extends aa{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class la extends aa{constructor(e,n,r){super(new Float32Array(e),n,r)}}let Uce=0;const Fs=new Yn,O1=new ii,Jd=new Ee,ls=new Ag,Mp=new Ag,xr=new Ee;class Bc extends Lh{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Uce++}),this.uuid=Mg(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(jB(e)?VB:HB)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Ht().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Fs.makeRotationFromQuaternion(e),this.applyMatrix4(Fs),this}rotateX(e){return Fs.makeRotationX(e),this.applyMatrix4(Fs),this}rotateY(e){return Fs.makeRotationY(e),this.applyMatrix4(Fs),this}rotateZ(e){return Fs.makeRotationZ(e),this.applyMatrix4(Fs),this}translate(e,n,r){return Fs.makeTranslation(e,n,r),this.applyMatrix4(Fs),this}scale(e,n,r){return Fs.makeScale(e,n,r),this.applyMatrix4(Fs),this}lookAt(e){return O1.lookAt(e),O1.updateMatrix(),this.applyMatrix4(O1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Jd).negate(),this.translate(Jd.x,Jd.y,Jd.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new la(r,3))}else{const r=Math.min(e.length,n.count);for(let i=0;i<r;i++){const s=e[i];n.setXYZ(i,s.x,s.y,s.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ag);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Ee(-1/0,-1/0,-1/0),new Ee(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];ls.setFromBufferAttribute(s),this.morphTargetsRelative?(xr.addVectors(this.boundingBox.min,ls.min),this.boundingBox.expandByPoint(xr),xr.addVectors(this.boundingBox.max,ls.max),this.boundingBox.expandByPoint(xr)):(this.boundingBox.expandByPoint(ls.min),this.boundingBox.expandByPoint(ls.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new IA);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Ee,1/0);return}if(e){const r=this.boundingSphere.center;if(ls.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];Mp.setFromBufferAttribute(a),this.morphTargetsRelative?(xr.addVectors(ls.min,Mp.min),ls.expandByPoint(xr),xr.addVectors(ls.max,Mp.max),ls.expandByPoint(xr)):(ls.expandByPoint(Mp.min),ls.expandByPoint(Mp.max))}ls.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)xr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(xr));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)xr.fromBufferAttribute(a,c),l&&(Jd.fromBufferAttribute(e,c),xr.add(Jd)),i=Math.max(i,r.distanceToSquared(xr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new aa(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let R=0;R<r.count;R++)a[R]=new Ee,l[R]=new Ee;const c=new Ee,u=new Ee,d=new Ee,p=new bn,m=new bn,x=new bn,w=new Ee,v=new Ee;function y(R,P,M){c.fromBufferAttribute(r,R),u.fromBufferAttribute(r,P),d.fromBufferAttribute(r,M),p.fromBufferAttribute(s,R),m.fromBufferAttribute(s,P),x.fromBufferAttribute(s,M),u.sub(c),d.sub(c),m.sub(p),x.sub(p);const L=1/(m.x*x.y-x.x*m.y);isFinite(L)&&(w.copy(u).multiplyScalar(x.y).addScaledVector(d,-m.y).multiplyScalar(L),v.copy(d).multiplyScalar(m.x).addScaledVector(u,-x.x).multiplyScalar(L),a[R].add(w),a[P].add(w),a[M].add(w),l[R].add(v),l[P].add(v),l[M].add(v))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let R=0,P=S.length;R<P;++R){const M=S[R],L=M.start,z=M.count;for(let H=L,B=L+z;H<B;H+=3)y(e.getX(H+0),e.getX(H+1),e.getX(H+2))}const E=new Ee,C=new Ee,A=new Ee,T=new Ee;function k(R){A.fromBufferAttribute(i,R),T.copy(A);const P=a[R];E.copy(P),E.sub(A.multiplyScalar(A.dot(P))).normalize(),C.crossVectors(T,P);const L=C.dot(l[R])<0?-1:1;o.setXYZW(R,E.x,E.y,E.z,L)}for(let R=0,P=S.length;R<P;++R){const M=S[R],L=M.start,z=M.count;for(let H=L,B=L+z;H<B;H+=3)k(e.getX(H+0)),k(e.getX(H+1)),k(e.getX(H+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new aa(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let p=0,m=r.count;p<m;p++)r.setXYZ(p,0,0,0);const i=new Ee,s=new Ee,o=new Ee,a=new Ee,l=new Ee,c=new Ee,u=new Ee,d=new Ee;if(e)for(let p=0,m=e.count;p<m;p+=3){const x=e.getX(p+0),w=e.getX(p+1),v=e.getX(p+2);i.fromBufferAttribute(n,x),s.fromBufferAttribute(n,w),o.fromBufferAttribute(n,v),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,x),l.fromBufferAttribute(r,w),c.fromBufferAttribute(r,v),a.add(u),l.add(u),c.add(u),r.setXYZ(x,a.x,a.y,a.z),r.setXYZ(w,l.x,l.y,l.z),r.setXYZ(v,c.x,c.y,c.z)}else for(let p=0,m=n.count;p<m;p+=3)i.fromBufferAttribute(n,p+0),s.fromBufferAttribute(n,p+1),o.fromBufferAttribute(n,p+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(p+0,u.x,u.y,u.z),r.setXYZ(p+1,u.x,u.y,u.z),r.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)xr.fromBufferAttribute(e,n),xr.normalize(),e.setXYZ(n,xr.x,xr.y,xr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,p=new c.constructor(l.length*u);let m=0,x=0;for(let w=0,v=l.length;w<v;w++){a.isInterleavedBufferAttribute?m=l[w]*a.data.stride+a.offset:m=l[w]*u;for(let y=0;y<u;y++)p[x++]=c[m++]}return new aa(p,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Bc,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const p=c[u],m=e(p,r);l.push(m)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,p=c.length;d<p;d++){const m=c[d];u.push(m.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let p=0,m=d.length;p<m;p++)u.push(d[p].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const oI=new Yn,du=new Nce,cv=new IA,aI=new Ee,uv=new Ee,dv=new Ee,fv=new Ee,F1=new Ee,hv=new Ee,lI=new Ee,pv=new Ee;class Ir extends ii{constructor(e=new Bc,n=new n0){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){hv.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];u!==0&&(F1.fromBufferAttribute(d,e),o?hv.addScaledVector(F1,u):hv.addScaledVector(F1.sub(n),u))}n.add(hv)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),cv.copy(r.boundingSphere),cv.applyMatrix4(s),du.copy(e.ray).recast(e.near),!(cv.containsPoint(du.origin)===!1&&(du.intersectSphere(cv,aI)===null||du.origin.distanceToSquared(aI)>(e.far-e.near)**2))&&(oI.copy(s).invert(),du.copy(e.ray).applyMatrix4(oI),!(r.boundingBox!==null&&du.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,du)))}_computeIntersections(e,n,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let x=0,w=p.length;x<w;x++){const v=p[x],y=o[v.materialIndex],S=Math.max(v.start,m.start),E=Math.min(a.count,Math.min(v.start+v.count,m.start+m.count));for(let C=S,A=E;C<A;C+=3){const T=a.getX(C),k=a.getX(C+1),R=a.getX(C+2);i=mv(this,y,e,r,c,u,d,T,k,R),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=v.materialIndex,n.push(i))}}else{const x=Math.max(0,m.start),w=Math.min(a.count,m.start+m.count);for(let v=x,y=w;v<y;v+=3){const S=a.getX(v),E=a.getX(v+1),C=a.getX(v+2);i=mv(this,o,e,r,c,u,d,S,E,C),i&&(i.faceIndex=Math.floor(v/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let x=0,w=p.length;x<w;x++){const v=p[x],y=o[v.materialIndex],S=Math.max(v.start,m.start),E=Math.min(l.count,Math.min(v.start+v.count,m.start+m.count));for(let C=S,A=E;C<A;C+=3){const T=C,k=C+1,R=C+2;i=mv(this,y,e,r,c,u,d,T,k,R),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=v.materialIndex,n.push(i))}}else{const x=Math.max(0,m.start),w=Math.min(l.count,m.start+m.count);for(let v=x,y=w;v<y;v+=3){const S=v,E=v+1,C=v+2;i=mv(this,o,e,r,c,u,d,S,E,C),i&&(i.faceIndex=Math.floor(v/3),n.push(i))}}}}function zce(t,e,n,r,i,s,o,a){let l;if(e.side===Gi?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Pc,a),l===null)return null;pv.copy(a),pv.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(pv);return c<n.near||c>n.far?null:{distance:c,point:pv.clone(),object:t}}function mv(t,e,n,r,i,s,o,a,l,c){t.getVertexPosition(a,uv),t.getVertexPosition(l,dv),t.getVertexPosition(c,fv);const u=zce(t,e,n,r,uv,dv,fv,lI);if(u){const d=new Ee;wo.getBarycoord(lI,uv,dv,fv,d),i&&(u.uv=wo.getInterpolatedAttribute(i,a,l,c,d,new bn)),s&&(u.uv1=wo.getInterpolatedAttribute(s,a,l,c,d,new bn)),o&&(u.normal=wo.getInterpolatedAttribute(o,a,l,c,d,new Ee),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const p={a,b:l,c,normal:new Ee,materialIndex:0};wo.getNormal(uv,dv,fv,p.normal),u.face=p,u.barycoord=d}return u}class Rg extends Bc{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let p=0,m=0;x("z","y","x",-1,-1,r,n,e,o,s,0),x("z","y","x",1,-1,r,n,-e,o,s,1),x("x","z","y",1,1,e,r,n,i,o,2),x("x","z","y",1,-1,e,r,-n,i,o,3),x("x","y","z",1,-1,e,n,r,i,s,4),x("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new la(c,3)),this.setAttribute("normal",new la(u,3)),this.setAttribute("uv",new la(d,2));function x(w,v,y,S,E,C,A,T,k,R,P){const M=C/k,L=A/R,z=C/2,H=A/2,B=T/2,K=k+1,q=R+1;let ee=0,O=0;const F=new Ee;for(let D=0;D<q;D++){const ie=D*L-H;for(let $=0;$<K;$++){const U=$*M-z;F[w]=U*S,F[v]=ie*E,F[y]=B,c.push(F.x,F.y,F.z),F[w]=0,F[v]=0,F[y]=T>0?1:-1,u.push(F.x,F.y,F.z),d.push($/k),d.push(1-D/R),ee+=1}}for(let D=0;D<R;D++)for(let ie=0;ie<k;ie++){const $=p+ie+K*D,U=p+ie+K*(D+1),Y=p+(ie+1)+K*(D+1),oe=p+(ie+1)+K*D;l.push($,U,oe),l.push(U,Y,oe),O+=6}a.addGroup(m,O,P),m+=O,p+=ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rg(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ph(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function pi(t){const e={};for(let n=0;n<t.length;n++){const r=ph(t[n]);for(const i in r)e[i]=r[i]}return e}function Bce(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function $B(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:hn.workingColorSpace}const Hce={clone:ph,merge:pi};var Vce=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,$ce=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Dc extends Ew{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Vce,this.fragmentShader=$ce,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ph(e.uniforms),this.uniformsGroups=Bce(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class WB extends ii{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Yn,this.projectionMatrix=new Yn,this.projectionMatrixInverse=new Yn,this.coordinateSystem=qa}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const jl=new Ee,cI=new bn,uI=new bn;class Ws extends WB{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=VC*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(g1*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return VC*2*Math.atan(Math.tan(g1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){jl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(jl.x,jl.y).multiplyScalar(-e/jl.z),jl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(jl.x,jl.y).multiplyScalar(-e/jl.z)}getViewSize(e,n){return this.getViewBounds(e,cI,uI),n.subVectors(uI,cI)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(g1*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Qd=-90,Zd=1;class Wce extends ii{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Ws(Qd,Zd,e,n);i.layers=this.layers,this.add(i);const s=new Ws(Qd,Zd,e,n);s.layers=this.layers,this.add(s);const o=new Ws(Qd,Zd,e,n);o.layers=this.layers,this.add(o);const a=new Ws(Qd,Zd,e,n);a.layers=this.layers,this.add(a);const l=new Ws(Qd,Zd,e,n);l.layers=this.layers,this.add(l);const c=new Ws(Qd,Zd,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,o,a,l]=n;for(const c of n)this.remove(c);if(e===qa)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===e0)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const w=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,o),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=w,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(d,p,m),e.xr.enabled=x,r.texture.needsPMREMUpdate=!0}}class GB extends qi{constructor(e=[],n=dh,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Gce extends nd{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new GB(i),this._setTextureOptions(n),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Rg(5,5,5),s=new Dc({name:"CubemapFromEquirect",uniforms:ph(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Gi,blending:wc});s.uniforms.tEquirect.value=n;const o=new Ir(i,s),a=n.minFilter;return n.minFilter===Nu&&(n.minFilter=na),new Wce(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n=!0,r=!0,i=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}class jp extends ii{constructor(){super(),this.isGroup=!0,this.type="Group"}}const qce={type:"move"};class j1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new jp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new jp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ee,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ee),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new jp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ee,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ee),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const w of e.hand.values()){const v=n.getJointPose(w,r),y=this._getHandJoint(c,w);v!==null&&(y.matrix.fromArray(v.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=v.radius),y.visible=v!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],p=u.position.distanceTo(d.position),m=.02,x=.005;c.inputState.pinching&&p>m+x?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-x&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(qce)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new jp;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class Xce extends ii{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new al,this.environmentIntensity=1,this.environmentRotation=new al,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}const U1=new Ee,Kce=new Ee,Yce=new Ht;class vu{constructor(e=new Ee(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=U1.subVectors(r,n).cross(Kce.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(U1),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||Yce.getNormalMatrix(e),i=this.coplanarPoint(U1).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const fu=new IA,gv=new Ee;class LA{constructor(e=new vu,n=new vu,r=new vu,i=new vu,s=new vu,o=new vu){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=qa){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],p=i[7],m=i[8],x=i[9],w=i[10],v=i[11],y=i[12],S=i[13],E=i[14],C=i[15];if(r[0].setComponents(l-s,p-c,v-m,C-y).normalize(),r[1].setComponents(l+s,p+c,v+m,C+y).normalize(),r[2].setComponents(l+o,p+u,v+x,C+S).normalize(),r[3].setComponents(l-o,p-u,v-x,C-S).normalize(),r[4].setComponents(l-a,p-d,v-w,C-E).normalize(),n===qa)r[5].setComponents(l+a,p+d,v+w,C+E).normalize();else if(n===e0)r[5].setComponents(a,d,w,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),fu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),fu.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(fu)}intersectsSprite(e){return fu.center.set(0,0,0),fu.radius=.7071067811865476,fu.applyMatrix4(e.matrixWorld),this.intersectsSphere(fu)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(gv.x=i.normal.x>0?e.max.x:e.min.x,gv.y=i.normal.y>0?e.max.y:e.min.y,gv.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(gv)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class qB extends qi{constructor(e,n,r=td,i,s,o,a=Co,l=Co,c,u=Um,d=1){if(u!==Um&&u!==zm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const p={width:e,height:n,depth:d};super(p,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new DA(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class Cw extends Bc{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,p=n/l,m=[],x=[],w=[],v=[];for(let y=0;y<u;y++){const S=y*p-o;for(let E=0;E<c;E++){const C=E*d-s;x.push(C,-S,0),w.push(0,0,1),v.push(E/a),v.push(1-y/l)}}for(let y=0;y<l;y++)for(let S=0;S<a;S++){const E=S+c*y,C=S+c*(y+1),A=S+1+c*(y+1),T=S+1+c*y;m.push(E,C,T),m.push(C,A,T)}this.setIndex(m),this.setAttribute("position",new la(x,3)),this.setAttribute("normal",new la(w,3)),this.setAttribute("uv",new la(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cw(e.width,e.height,e.widthSegments,e.heightSegments)}}class _f extends Bc{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new Ee,p=new Ee,m=[],x=[],w=[],v=[];for(let y=0;y<=r;y++){const S=[],E=y/r;let C=0;y===0&&o===0?C=.5/n:y===r&&l===Math.PI&&(C=-.5/n);for(let A=0;A<=n;A++){const T=A/n;d.x=-e*Math.cos(i+T*s)*Math.sin(o+E*a),d.y=e*Math.cos(o+E*a),d.z=e*Math.sin(i+T*s)*Math.sin(o+E*a),x.push(d.x,d.y,d.z),p.copy(d).normalize(),w.push(p.x,p.y,p.z),v.push(T+C,1-E),S.push(c++)}u.push(S)}for(let y=0;y<r;y++)for(let S=0;S<n;S++){const E=u[y][S+1],C=u[y][S],A=u[y+1][S],T=u[y+1][S+1];(y!==0||o>0)&&m.push(E,C,T),(y!==r-1||l<Math.PI)&&m.push(C,A,T)}this.setIndex(m),this.setAttribute("position",new la(x,3)),this.setAttribute("normal",new la(w,3)),this.setAttribute("uv",new la(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _f(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Jce extends Ew{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ace,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Qce extends Ew{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class XB extends ii{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new yn(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}const z1=new Yn,dI=new Ee,fI=new Ee;class Zce{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new bn(512,512),this.mapType=ua,this.map=null,this.mapPass=null,this.matrix=new Yn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new LA,this._frameExtents=new bn(1,1),this._viewportCount=1,this._viewports=[new Kn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;dI.setFromMatrixPosition(e.matrixWorld),n.position.copy(dI),fI.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(fI),n.updateMatrixWorld(),z1.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(z1),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(z1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class KB extends WB{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class eue extends Zce{constructor(){super(new KB(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class tue extends XB{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ii.DEFAULT_UP),this.updateMatrix(),this.target=new ii,this.shadow=new eue}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class nue extends XB{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class rue extends Ws{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}function hI(t,e,n,r){const i=iue(r);switch(n){case PB:return t*e;case IB:return t*e/i.components*i.byteLength;case NA:return t*e/i.components*i.byteLength;case LB:return t*e*2/i.components*i.byteLength;case kA:return t*e*2/i.components*i.byteLength;case DB:return t*e*3/i.components*i.byteLength;case So:return t*e*4/i.components*i.byteLength;case PA:return t*e*4/i.components*i.byteLength;case rx:case ix:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case sx:case ox:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case vC:case wC:return Math.max(t,16)*Math.max(e,8)/4;case yC:case xC:return Math.max(t,8)*Math.max(e,8)/2;case bC:case SC:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case _C:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case EC:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case CC:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case MC:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case TC:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case AC:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case RC:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case NC:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case kC:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case PC:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case DC:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case IC:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case LC:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case OC:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case FC:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case ax:case jC:case UC:return Math.ceil(t/4)*Math.ceil(e/4)*16;case OB:case zC:return Math.ceil(t/4)*Math.ceil(e/4)*8;case BC:case HC:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function iue(t){switch(t){case ua:case RB:return{byteLength:1,components:1};case Fm:case NB:case Cg:return{byteLength:2,components:1};case AA:case RA:return{byteLength:2,components:4};case td:case TA:case Ga:return{byteLength:4,components:1};case kB:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:MA}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=MA);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function YB(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function sue(t){const e=new WeakMap;function n(a,l){const c=a.array,u=a.usage,d=c.byteLength,p=t.createBuffer();t.bindBuffer(l,p),t.bufferData(l,c,u),a.onUploadCallback();let m;if(c instanceof Float32Array)m=t.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=t.HALF_FLOAT:m=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=t.SHORT;else if(c instanceof Uint32Array)m=t.UNSIGNED_INT;else if(c instanceof Int32Array)m=t.INT;else if(c instanceof Int8Array)m=t.BYTE;else if(c instanceof Uint8Array)m=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function r(a,l,c){const u=l.array,d=l.updateRanges;if(t.bindBuffer(c,a),d.length===0)t.bufferSubData(c,0,u);else{d.sort((m,x)=>m.start-x.start);let p=0;for(let m=1;m<d.length;m++){const x=d[p],w=d[m];w.start<=x.start+x.count+1?x.count=Math.max(x.count,w.start+w.count-x.start):(++p,d[p]=w)}d.length=p+1;for(let m=0,x=d.length;m<x;m++){const w=d[m];t.bufferSubData(c,w.start*u.BYTES_PER_ELEMENT,u,w.start,w.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,n(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:s,update:o}}var oue=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,aue=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,lue=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,cue=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,uue=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,due=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,fue=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,hue=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,pue=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,mue=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,gue=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,yue=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,vue=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,xue=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,wue=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,bue=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Sue=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,_ue=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Eue=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Cue=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Mue=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Tue=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Aue=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Rue=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Nue=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,kue=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Pue=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Due=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Iue=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Lue=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Oue="gl_FragColor = linearToOutputTexel( gl_FragColor );",Fue=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,jue=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Uue=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,zue=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Bue=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Hue=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Vue=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,$ue=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Wue=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Gue=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,que=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Xue=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Kue=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Yue=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Jue=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Que=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Zue=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,ede=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,tde=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,nde=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,rde=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,ide=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,sde=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,ode=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,ade=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,lde=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,cde=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,ude=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,dde=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,fde=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,hde=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,pde=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,mde=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,gde=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,yde=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,vde=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,xde=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,wde=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,bde=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Sde=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,_de=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Ede=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Cde=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Mde=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Tde=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Ade=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Rde=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Nde=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,kde=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Pde=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Dde=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Ide=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Lde=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Ode=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Fde=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,jde=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Ude=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,zde=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Bde=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Hde=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Vde=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,$de=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Wde=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Gde=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,qde=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Xde=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Kde=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Yde=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Jde=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Qde=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Zde=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,efe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,tfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,nfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,rfe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,ife=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const sfe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ofe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,afe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,lfe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cfe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ufe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dfe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,ffe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,hfe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,pfe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,mfe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,gfe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yfe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,vfe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,xfe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,wfe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bfe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Sfe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_fe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Efe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Cfe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Mfe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Tfe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Afe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rfe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Nfe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kfe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Pfe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Dfe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Ife=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Lfe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ofe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ffe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jfe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Gt={alphahash_fragment:oue,alphahash_pars_fragment:aue,alphamap_fragment:lue,alphamap_pars_fragment:cue,alphatest_fragment:uue,alphatest_pars_fragment:due,aomap_fragment:fue,aomap_pars_fragment:hue,batching_pars_vertex:pue,batching_vertex:mue,begin_vertex:gue,beginnormal_vertex:yue,bsdfs:vue,iridescence_fragment:xue,bumpmap_pars_fragment:wue,clipping_planes_fragment:bue,clipping_planes_pars_fragment:Sue,clipping_planes_pars_vertex:_ue,clipping_planes_vertex:Eue,color_fragment:Cue,color_pars_fragment:Mue,color_pars_vertex:Tue,color_vertex:Aue,common:Rue,cube_uv_reflection_fragment:Nue,defaultnormal_vertex:kue,displacementmap_pars_vertex:Pue,displacementmap_vertex:Due,emissivemap_fragment:Iue,emissivemap_pars_fragment:Lue,colorspace_fragment:Oue,colorspace_pars_fragment:Fue,envmap_fragment:jue,envmap_common_pars_fragment:Uue,envmap_pars_fragment:zue,envmap_pars_vertex:Bue,envmap_physical_pars_fragment:Que,envmap_vertex:Hue,fog_vertex:Vue,fog_pars_vertex:$ue,fog_fragment:Wue,fog_pars_fragment:Gue,gradientmap_pars_fragment:que,lightmap_pars_fragment:Xue,lights_lambert_fragment:Kue,lights_lambert_pars_fragment:Yue,lights_pars_begin:Jue,lights_toon_fragment:Zue,lights_toon_pars_fragment:ede,lights_phong_fragment:tde,lights_phong_pars_fragment:nde,lights_physical_fragment:rde,lights_physical_pars_fragment:ide,lights_fragment_begin:sde,lights_fragment_maps:ode,lights_fragment_end:ade,logdepthbuf_fragment:lde,logdepthbuf_pars_fragment:cde,logdepthbuf_pars_vertex:ude,logdepthbuf_vertex:dde,map_fragment:fde,map_pars_fragment:hde,map_particle_fragment:pde,map_particle_pars_fragment:mde,metalnessmap_fragment:gde,metalnessmap_pars_fragment:yde,morphinstance_vertex:vde,morphcolor_vertex:xde,morphnormal_vertex:wde,morphtarget_pars_vertex:bde,morphtarget_vertex:Sde,normal_fragment_begin:_de,normal_fragment_maps:Ede,normal_pars_fragment:Cde,normal_pars_vertex:Mde,normal_vertex:Tde,normalmap_pars_fragment:Ade,clearcoat_normal_fragment_begin:Rde,clearcoat_normal_fragment_maps:Nde,clearcoat_pars_fragment:kde,iridescence_pars_fragment:Pde,opaque_fragment:Dde,packing:Ide,premultiplied_alpha_fragment:Lde,project_vertex:Ode,dithering_fragment:Fde,dithering_pars_fragment:jde,roughnessmap_fragment:Ude,roughnessmap_pars_fragment:zde,shadowmap_pars_fragment:Bde,shadowmap_pars_vertex:Hde,shadowmap_vertex:Vde,shadowmask_pars_fragment:$de,skinbase_vertex:Wde,skinning_pars_vertex:Gde,skinning_vertex:qde,skinnormal_vertex:Xde,specularmap_fragment:Kde,specularmap_pars_fragment:Yde,tonemapping_fragment:Jde,tonemapping_pars_fragment:Qde,transmission_fragment:Zde,transmission_pars_fragment:efe,uv_pars_fragment:tfe,uv_pars_vertex:nfe,uv_vertex:rfe,worldpos_vertex:ife,background_vert:sfe,background_frag:ofe,backgroundCube_vert:afe,backgroundCube_frag:lfe,cube_vert:cfe,cube_frag:ufe,depth_vert:dfe,depth_frag:ffe,distanceRGBA_vert:hfe,distanceRGBA_frag:pfe,equirect_vert:mfe,equirect_frag:gfe,linedashed_vert:yfe,linedashed_frag:vfe,meshbasic_vert:xfe,meshbasic_frag:wfe,meshlambert_vert:bfe,meshlambert_frag:Sfe,meshmatcap_vert:_fe,meshmatcap_frag:Efe,meshnormal_vert:Cfe,meshnormal_frag:Mfe,meshphong_vert:Tfe,meshphong_frag:Afe,meshphysical_vert:Rfe,meshphysical_frag:Nfe,meshtoon_vert:kfe,meshtoon_frag:Pfe,points_vert:Dfe,points_frag:Ife,shadow_vert:Lfe,shadow_frag:Ofe,sprite_vert:Ffe,sprite_frag:jfe},ct={common:{diffuse:{value:new yn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ht},alphaMap:{value:null},alphaMapTransform:{value:new Ht},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ht}},envmap:{envMap:{value:null},envMapRotation:{value:new Ht},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ht}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ht}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ht},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ht},normalScale:{value:new bn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ht},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ht}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ht}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ht}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new yn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new yn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ht},alphaTest:{value:0},uvTransform:{value:new Ht}},sprite:{diffuse:{value:new yn(16777215)},opacity:{value:1},center:{value:new bn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ht},alphaMap:{value:null},alphaMapTransform:{value:new Ht},alphaTest:{value:0}}},Yo={basic:{uniforms:pi([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.fog]),vertexShader:Gt.meshbasic_vert,fragmentShader:Gt.meshbasic_frag},lambert:{uniforms:pi([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new yn(0)}}]),vertexShader:Gt.meshlambert_vert,fragmentShader:Gt.meshlambert_frag},phong:{uniforms:pi([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new yn(0)},specular:{value:new yn(1118481)},shininess:{value:30}}]),vertexShader:Gt.meshphong_vert,fragmentShader:Gt.meshphong_frag},standard:{uniforms:pi([ct.common,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.roughnessmap,ct.metalnessmap,ct.fog,ct.lights,{emissive:{value:new yn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Gt.meshphysical_vert,fragmentShader:Gt.meshphysical_frag},toon:{uniforms:pi([ct.common,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.gradientmap,ct.fog,ct.lights,{emissive:{value:new yn(0)}}]),vertexShader:Gt.meshtoon_vert,fragmentShader:Gt.meshtoon_frag},matcap:{uniforms:pi([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,{matcap:{value:null}}]),vertexShader:Gt.meshmatcap_vert,fragmentShader:Gt.meshmatcap_frag},points:{uniforms:pi([ct.points,ct.fog]),vertexShader:Gt.points_vert,fragmentShader:Gt.points_frag},dashed:{uniforms:pi([ct.common,ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Gt.linedashed_vert,fragmentShader:Gt.linedashed_frag},depth:{uniforms:pi([ct.common,ct.displacementmap]),vertexShader:Gt.depth_vert,fragmentShader:Gt.depth_frag},normal:{uniforms:pi([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,{opacity:{value:1}}]),vertexShader:Gt.meshnormal_vert,fragmentShader:Gt.meshnormal_frag},sprite:{uniforms:pi([ct.sprite,ct.fog]),vertexShader:Gt.sprite_vert,fragmentShader:Gt.sprite_frag},background:{uniforms:{uvTransform:{value:new Ht},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Gt.background_vert,fragmentShader:Gt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ht}},vertexShader:Gt.backgroundCube_vert,fragmentShader:Gt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Gt.cube_vert,fragmentShader:Gt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Gt.equirect_vert,fragmentShader:Gt.equirect_frag},distanceRGBA:{uniforms:pi([ct.common,ct.displacementmap,{referencePosition:{value:new Ee},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Gt.distanceRGBA_vert,fragmentShader:Gt.distanceRGBA_frag},shadow:{uniforms:pi([ct.lights,ct.fog,{color:{value:new yn(0)},opacity:{value:1}}]),vertexShader:Gt.shadow_vert,fragmentShader:Gt.shadow_frag}};Yo.physical={uniforms:pi([Yo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ht},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ht},clearcoatNormalScale:{value:new bn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ht},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ht},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ht},sheen:{value:0},sheenColor:{value:new yn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ht},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ht},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ht},transmissionSamplerSize:{value:new bn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ht},attenuationDistance:{value:0},attenuationColor:{value:new yn(0)},specularColor:{value:new yn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ht},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ht},anisotropyVector:{value:new bn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ht}}]),vertexShader:Gt.meshphysical_vert,fragmentShader:Gt.meshphysical_frag};const yv={r:0,b:0,g:0},hu=new al,Ufe=new Yn;function zfe(t,e,n,r,i,s,o){const a=new yn(0);let l=s===!0?0:1,c,u,d=null,p=0,m=null;function x(E){let C=E.isScene===!0?E.background:null;return C&&C.isTexture&&(C=(E.backgroundBlurriness>0?n:e).get(C)),C}function w(E){let C=!1;const A=x(E);A===null?y(a,l):A&&A.isColor&&(y(A,1),C=!0);const T=t.xr.getEnvironmentBlendMode();T==="additive"?r.buffers.color.setClear(0,0,0,1,o):T==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(t.autoClear||C)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function v(E,C){const A=x(C);A&&(A.isCubeTexture||A.mapping===_w)?(u===void 0&&(u=new Ir(new Rg(1,1,1),new Dc({name:"BackgroundCubeMaterial",uniforms:ph(Yo.backgroundCube.uniforms),vertexShader:Yo.backgroundCube.vertexShader,fragmentShader:Yo.backgroundCube.fragmentShader,side:Gi,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(T,k,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),hu.copy(C.backgroundRotation),hu.x*=-1,hu.y*=-1,hu.z*=-1,A.isCubeTexture&&A.isRenderTargetTexture===!1&&(hu.y*=-1,hu.z*=-1),u.material.uniforms.envMap.value=A,u.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=C.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Ufe.makeRotationFromEuler(hu)),u.material.toneMapped=hn.getTransfer(A.colorSpace)!==_n,(d!==A||p!==A.version||m!==t.toneMapping)&&(u.material.needsUpdate=!0,d=A,p=A.version,m=t.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null)):A&&A.isTexture&&(c===void 0&&(c=new Ir(new Cw(2,2),new Dc({name:"BackgroundMaterial",uniforms:ph(Yo.background.uniforms),vertexShader:Yo.background.vertexShader,fragmentShader:Yo.background.fragmentShader,side:Pc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=A,c.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,c.material.toneMapped=hn.getTransfer(A.colorSpace)!==_n,A.matrixAutoUpdate===!0&&A.updateMatrix(),c.material.uniforms.uvTransform.value.copy(A.matrix),(d!==A||p!==A.version||m!==t.toneMapping)&&(c.material.needsUpdate=!0,d=A,p=A.version,m=t.toneMapping),c.layers.enableAll(),E.unshift(c,c.geometry,c.material,0,0,null))}function y(E,C){E.getRGB(yv,$B(t)),r.buffers.color.setClear(yv.r,yv.g,yv.b,C,o)}function S(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(E,C=1){a.set(E),l=C,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(E){l=E,y(a,l)},render:w,addToRenderList:v,dispose:S}}function Bfe(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=p(null);let s=i,o=!1;function a(M,L,z,H,B){let K=!1;const q=d(H,z,L);s!==q&&(s=q,c(s.object)),K=m(M,H,z,B),K&&x(M,H,z,B),B!==null&&e.update(B,t.ELEMENT_ARRAY_BUFFER),(K||o)&&(o=!1,C(M,L,z,H),B!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(B).buffer))}function l(){return t.createVertexArray()}function c(M){return t.bindVertexArray(M)}function u(M){return t.deleteVertexArray(M)}function d(M,L,z){const H=z.wireframe===!0;let B=r[M.id];B===void 0&&(B={},r[M.id]=B);let K=B[L.id];K===void 0&&(K={},B[L.id]=K);let q=K[H];return q===void 0&&(q=p(l()),K[H]=q),q}function p(M){const L=[],z=[],H=[];for(let B=0;B<n;B++)L[B]=0,z[B]=0,H[B]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:L,enabledAttributes:z,attributeDivisors:H,object:M,attributes:{},index:null}}function m(M,L,z,H){const B=s.attributes,K=L.attributes;let q=0;const ee=z.getAttributes();for(const O in ee)if(ee[O].location>=0){const D=B[O];let ie=K[O];if(ie===void 0&&(O==="instanceMatrix"&&M.instanceMatrix&&(ie=M.instanceMatrix),O==="instanceColor"&&M.instanceColor&&(ie=M.instanceColor)),D===void 0||D.attribute!==ie||ie&&D.data!==ie.data)return!0;q++}return s.attributesNum!==q||s.index!==H}function x(M,L,z,H){const B={},K=L.attributes;let q=0;const ee=z.getAttributes();for(const O in ee)if(ee[O].location>=0){let D=K[O];D===void 0&&(O==="instanceMatrix"&&M.instanceMatrix&&(D=M.instanceMatrix),O==="instanceColor"&&M.instanceColor&&(D=M.instanceColor));const ie={};ie.attribute=D,D&&D.data&&(ie.data=D.data),B[O]=ie,q++}s.attributes=B,s.attributesNum=q,s.index=H}function w(){const M=s.newAttributes;for(let L=0,z=M.length;L<z;L++)M[L]=0}function v(M){y(M,0)}function y(M,L){const z=s.newAttributes,H=s.enabledAttributes,B=s.attributeDivisors;z[M]=1,H[M]===0&&(t.enableVertexAttribArray(M),H[M]=1),B[M]!==L&&(t.vertexAttribDivisor(M,L),B[M]=L)}function S(){const M=s.newAttributes,L=s.enabledAttributes;for(let z=0,H=L.length;z<H;z++)L[z]!==M[z]&&(t.disableVertexAttribArray(z),L[z]=0)}function E(M,L,z,H,B,K,q){q===!0?t.vertexAttribIPointer(M,L,z,B,K):t.vertexAttribPointer(M,L,z,H,B,K)}function C(M,L,z,H){w();const B=H.attributes,K=z.getAttributes(),q=L.defaultAttributeValues;for(const ee in K){const O=K[ee];if(O.location>=0){let F=B[ee];if(F===void 0&&(ee==="instanceMatrix"&&M.instanceMatrix&&(F=M.instanceMatrix),ee==="instanceColor"&&M.instanceColor&&(F=M.instanceColor)),F!==void 0){const D=F.normalized,ie=F.itemSize,$=e.get(F);if($===void 0)continue;const U=$.buffer,Y=$.type,oe=$.bytesPerElement,ne=Y===t.INT||Y===t.UNSIGNED_INT||F.gpuType===TA;if(F.isInterleavedBufferAttribute){const Z=F.data,fe=Z.stride,we=F.offset;if(Z.isInstancedInterleavedBuffer){for(let xe=0;xe<O.locationSize;xe++)y(O.location+xe,Z.meshPerAttribute);M.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let xe=0;xe<O.locationSize;xe++)v(O.location+xe);t.bindBuffer(t.ARRAY_BUFFER,U);for(let xe=0;xe<O.locationSize;xe++)E(O.location+xe,ie/O.locationSize,Y,D,fe*oe,(we+ie/O.locationSize*xe)*oe,ne)}else{if(F.isInstancedBufferAttribute){for(let Z=0;Z<O.locationSize;Z++)y(O.location+Z,F.meshPerAttribute);M.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=F.meshPerAttribute*F.count)}else for(let Z=0;Z<O.locationSize;Z++)v(O.location+Z);t.bindBuffer(t.ARRAY_BUFFER,U);for(let Z=0;Z<O.locationSize;Z++)E(O.location+Z,ie/O.locationSize,Y,D,ie*oe,ie/O.locationSize*Z*oe,ne)}}else if(q!==void 0){const D=q[ee];if(D!==void 0)switch(D.length){case 2:t.vertexAttrib2fv(O.location,D);break;case 3:t.vertexAttrib3fv(O.location,D);break;case 4:t.vertexAttrib4fv(O.location,D);break;default:t.vertexAttrib1fv(O.location,D)}}}}S()}function A(){R();for(const M in r){const L=r[M];for(const z in L){const H=L[z];for(const B in H)u(H[B].object),delete H[B];delete L[z]}delete r[M]}}function T(M){if(r[M.id]===void 0)return;const L=r[M.id];for(const z in L){const H=L[z];for(const B in H)u(H[B].object),delete H[B];delete L[z]}delete r[M.id]}function k(M){for(const L in r){const z=r[L];if(z[M.id]===void 0)continue;const H=z[M.id];for(const B in H)u(H[B].object),delete H[B];delete z[M.id]}}function R(){P(),o=!0,s!==i&&(s=i,c(s.object))}function P(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:R,resetDefaultState:P,dispose:A,releaseStatesOfGeometry:T,releaseStatesOfProgram:k,initAttributes:w,enableAttribute:v,disableUnusedAttributes:S}}function Hfe(t,e,n){let r;function i(c){r=c}function s(c,u){t.drawArrays(r,c,u),n.update(u,r,1)}function o(c,u,d){d!==0&&(t.drawArraysInstanced(r,c,u,d),n.update(u,r,d))}function a(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,d);let m=0;for(let x=0;x<d;x++)m+=u[x];n.update(m,r,1)}function l(c,u,d,p){if(d===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let x=0;x<c.length;x++)o(c[x],u[x],p[x]);else{m.multiDrawArraysInstancedWEBGL(r,c,0,u,0,p,0,d);let x=0;for(let w=0;w<d;w++)x+=u[w]*p[w];n.update(x,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Vfe(t,e,n,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(k){return!(k!==So&&r.convert(k)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(k){const R=k===Cg&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(k!==ua&&r.convert(k)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==Ga&&!R)}function l(k){if(k==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=n.logarithmicDepthBuffer===!0,p=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),m=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),x=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w=t.getParameter(t.MAX_TEXTURE_SIZE),v=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),y=t.getParameter(t.MAX_VERTEX_ATTRIBS),S=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),E=t.getParameter(t.MAX_VARYING_VECTORS),C=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),A=x>0,T=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:p,maxTextures:m,maxVertexTextures:x,maxTextureSize:w,maxCubemapSize:v,maxAttributes:y,maxVertexUniforms:S,maxVaryings:E,maxFragmentUniforms:C,vertexTextures:A,maxSamples:T}}function $fe(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new vu,a=new Ht,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const m=d.length!==0||p||r!==0||i;return i=p,r=d.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,p){n=u(d,p,0)},this.setState=function(d,p,m){const x=d.clippingPlanes,w=d.clipIntersection,v=d.clipShadows,y=t.get(d);if(!i||x===null||x.length===0||s&&!v)s?u(null):c();else{const S=s?0:r,E=S*4;let C=y.clippingState||null;l.value=C,C=u(x,p,E,m);for(let A=0;A!==E;++A)C[A]=n[A];y.clippingState=C,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,p,m,x){const w=d!==null?d.length:0;let v=null;if(w!==0){if(v=l.value,x!==!0||v===null){const y=m+w*4,S=p.matrixWorldInverse;a.getNormalMatrix(S),(v===null||v.length<y)&&(v=new Float32Array(y));for(let E=0,C=m;E!==w;++E,C+=4)o.copy(d[E]).applyMatrix4(S,a),o.normal.toArray(v,C),v[C+3]=o.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,v}}function Wfe(t){let e=new WeakMap;function n(o,a){return a===hC?o.mapping=dh:a===pC&&(o.mapping=fh),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===hC||a===pC)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new Gce(l.height);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",i),n(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const Ef=4,pI=[.125,.215,.35,.446,.526,.582],bu=20,B1=new KB,mI=new yn;let H1=null,V1=0,$1=0,W1=!1;const xu=(1+Math.sqrt(5))/2,ef=1/xu,gI=[new Ee(-xu,ef,0),new Ee(xu,ef,0),new Ee(-ef,0,xu),new Ee(ef,0,xu),new Ee(0,xu,-ef),new Ee(0,xu,ef),new Ee(-1,1,-1),new Ee(1,1,-1),new Ee(-1,1,1),new Ee(1,1,1)],Gfe=new Ee;class yI{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100,s={}){const{size:o=256,position:a=Gfe}=s;H1=this._renderer.getRenderTarget(),V1=this._renderer.getActiveCubeFace(),$1=this._renderer.getActiveMipmapLevel(),W1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,i,l,a),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=wI(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=xI(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(H1,V1,$1),this._renderer.xr.enabled=W1,e.scissorTest=!1,vv(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===dh||e.mapping===fh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),H1=this._renderer.getRenderTarget(),V1=this._renderer.getActiveCubeFace(),$1=this._renderer.getActiveMipmapLevel(),W1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:na,minFilter:na,generateMipmaps:!1,type:Cg,format:So,colorSpace:hh,depthBuffer:!1},i=vI(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=vI(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=qfe(s)),this._blurMaterial=Xfe(s,e,n)}return i}_compileMaterial(e){const n=new Ir(this._lodPlanes[0],e);this._renderer.compile(n,B1)}_sceneToCubeUV(e,n,r,i,s){const l=new Ws(90,1,n,r),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,p=d.autoClear,m=d.toneMapping;d.getClearColor(mI),d.toneMapping=bc,d.autoClear=!1;const x=new n0({name:"PMREM.Background",side:Gi,depthWrite:!1,depthTest:!1}),w=new Ir(new Rg,x);let v=!1;const y=e.background;y?y.isColor&&(x.color.copy(y),e.background=null,v=!0):(x.color.copy(mI),v=!0);for(let S=0;S<6;S++){const E=S%3;E===0?(l.up.set(0,c[S],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[S],s.y,s.z)):E===1?(l.up.set(0,0,c[S]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[S],s.z)):(l.up.set(0,c[S],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[S]));const C=this._cubeSize;vv(i,E*C,S>2?C:0,C,C),d.setRenderTarget(i),v&&d.render(w,l),d.render(e,l)}w.geometry.dispose(),w.material.dispose(),d.toneMapping=m,d.autoClear=p,e.background=y}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===dh||e.mapping===fh;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=wI()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=xI());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Ir(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;vv(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,B1)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=gI[(i-s-1)%gI.length];this._blur(e,s-1,s,o,a)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Ir(this._lodPlanes[i],c),p=c.uniforms,m=this._sizeLods[r]-1,x=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*bu-1),w=s/x,v=isFinite(s)?1+Math.floor(u*w):bu;v>bu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${bu}`);const y=[];let S=0;for(let k=0;k<bu;++k){const R=k/w,P=Math.exp(-R*R/2);y.push(P),k===0?S+=P:k<v&&(S+=2*P)}for(let k=0;k<y.length;k++)y[k]=y[k]/S;p.envMap.value=e.texture,p.samples.value=v,p.weights.value=y,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:E}=this;p.dTheta.value=x,p.mipInt.value=E-r;const C=this._sizeLods[i],A=3*C*(i>E-Ef?i-E+Ef:0),T=4*(this._cubeSize-C);vv(n,A,T,3*C,2*C),l.setRenderTarget(n),l.render(d,B1)}}function qfe(t){const e=[],n=[],r=[];let i=t;const s=t-Ef+1+pI.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-Ef?l=pI[o-t+Ef-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,p=[u,u,d,u,d,d,u,u,d,d,u,d],m=6,x=6,w=3,v=2,y=1,S=new Float32Array(w*x*m),E=new Float32Array(v*x*m),C=new Float32Array(y*x*m);for(let T=0;T<m;T++){const k=T%3*2/3-1,R=T>2?0:-1,P=[k,R,0,k+2/3,R,0,k+2/3,R+1,0,k,R,0,k+2/3,R+1,0,k,R+1,0];S.set(P,w*x*T),E.set(p,v*x*T);const M=[T,T,T,T,T,T];C.set(M,y*x*T)}const A=new Bc;A.setAttribute("position",new aa(S,w)),A.setAttribute("uv",new aa(E,v)),A.setAttribute("faceIndex",new aa(C,y)),e.push(A),i>Ef&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function vI(t,e,n){const r=new nd(t,e,n);return r.texture.mapping=_w,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function vv(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Xfe(t,e,n){const r=new Float32Array(bu),i=new Ee(0,1,0);return new Dc({name:"SphericalGaussianBlur",defines:{n:bu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:OA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:wc,depthTest:!1,depthWrite:!1})}function xI(){return new Dc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:OA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:wc,depthTest:!1,depthWrite:!1})}function wI(){return new Dc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:OA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:wc,depthTest:!1,depthWrite:!1})}function OA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Kfe(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===hC||l===pC,u=l===dh||l===fh;if(c||u){let d=e.get(a);const p=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==p)return n===null&&(n=new yI(t)),d=c?n.fromEquirectangular(a,d):n.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const m=a.image;return c&&m&&m.height>0||u&&m&&i(m)?(n===null&&(n=new yI(t)),d=c?n.fromEquirectangular(a):n.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function Yfe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&Ff("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Jfe(t,e,n,r){const i={},s=new WeakMap;function o(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const x in p.attributes)e.remove(p.attributes[x]);p.removeEventListener("dispose",o),delete i[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function a(d,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,n.memory.geometries++),p}function l(d){const p=d.attributes;for(const m in p)e.update(p[m],t.ARRAY_BUFFER)}function c(d){const p=[],m=d.index,x=d.attributes.position;let w=0;if(m!==null){const S=m.array;w=m.version;for(let E=0,C=S.length;E<C;E+=3){const A=S[E+0],T=S[E+1],k=S[E+2];p.push(A,T,T,k,k,A)}}else if(x!==void 0){const S=x.array;w=x.version;for(let E=0,C=S.length/3-1;E<C;E+=3){const A=E+0,T=E+1,k=E+2;p.push(A,T,T,k,k,A)}}else return;const v=new(jB(p)?VB:HB)(p,1);v.version=w;const y=s.get(d);y&&e.remove(y),s.set(d,v)}function u(d){const p=s.get(d);if(p){const m=d.index;m!==null&&p.version<m.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function Qfe(t,e,n){let r;function i(p){r=p}let s,o;function a(p){s=p.type,o=p.bytesPerElement}function l(p,m){t.drawElements(r,m,s,p*o),n.update(m,r,1)}function c(p,m,x){x!==0&&(t.drawElementsInstanced(r,m,s,p*o,x),n.update(m,r,x))}function u(p,m,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,m,0,s,p,0,x);let v=0;for(let y=0;y<x;y++)v+=m[y];n.update(v,r,1)}function d(p,m,x,w){if(x===0)return;const v=e.get("WEBGL_multi_draw");if(v===null)for(let y=0;y<p.length;y++)c(p[y]/o,m[y],w[y]);else{v.multiDrawElementsInstancedWEBGL(r,m,0,s,p,0,w,0,x);let y=0;for(let S=0;S<x;S++)y+=m[S]*w[S];n.update(y,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function Zfe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function ehe(t,e,n){const r=new WeakMap,i=new Kn;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0;let p=r.get(a);if(p===void 0||p.count!==d){let M=function(){R.dispose(),r.delete(a),a.removeEventListener("dispose",M)};var m=M;p!==void 0&&p.texture.dispose();const x=a.morphAttributes.position!==void 0,w=a.morphAttributes.normal!==void 0,v=a.morphAttributes.color!==void 0,y=a.morphAttributes.position||[],S=a.morphAttributes.normal||[],E=a.morphAttributes.color||[];let C=0;x===!0&&(C=1),w===!0&&(C=2),v===!0&&(C=3);let A=a.attributes.position.count*C,T=1;A>e.maxTextureSize&&(T=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const k=new Float32Array(A*T*4*d),R=new UB(k,A,T,d);R.type=Ga,R.needsUpdate=!0;const P=C*4;for(let L=0;L<d;L++){const z=y[L],H=S[L],B=E[L],K=A*T*4*L;for(let q=0;q<z.count;q++){const ee=q*P;x===!0&&(i.fromBufferAttribute(z,q),k[K+ee+0]=i.x,k[K+ee+1]=i.y,k[K+ee+2]=i.z,k[K+ee+3]=0),w===!0&&(i.fromBufferAttribute(H,q),k[K+ee+4]=i.x,k[K+ee+5]=i.y,k[K+ee+6]=i.z,k[K+ee+7]=0),v===!0&&(i.fromBufferAttribute(B,q),k[K+ee+8]=i.x,k[K+ee+9]=i.y,k[K+ee+10]=i.z,k[K+ee+11]=B.itemSize===4?i.w:1)}}p={count:d,texture:R,size:new bn(A,T)},r.set(a,p),a.addEventListener("dispose",M)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let x=0;for(let v=0;v<c.length;v++)x+=c[v];const w=a.morphTargetsRelative?1:1-x;l.getUniforms().setValue(t,"morphTargetBaseInfluence",w),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",p.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",p.size)}return{update:s}}function the(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;i.get(p)!==c&&(p.update(),i.set(p,c))}return d}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}const JB=new qi,bI=new qB(1,1),QB=new UB,ZB=new Ace,e5=new GB,SI=[],_I=[],EI=new Float32Array(16),CI=new Float32Array(9),MI=new Float32Array(4);function Oh(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=SI[i];if(s===void 0&&(s=new Float32Array(i),SI[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function pr(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function mr(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function Mw(t,e){let n=_I[e];n===void 0&&(n=new Int32Array(e),_I[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function nhe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function rhe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(pr(n,e))return;t.uniform2fv(this.addr,e),mr(n,e)}}function ihe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(pr(n,e))return;t.uniform3fv(this.addr,e),mr(n,e)}}function she(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(pr(n,e))return;t.uniform4fv(this.addr,e),mr(n,e)}}function ohe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(pr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),mr(n,e)}else{if(pr(n,r))return;MI.set(r),t.uniformMatrix2fv(this.addr,!1,MI),mr(n,r)}}function ahe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(pr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),mr(n,e)}else{if(pr(n,r))return;CI.set(r),t.uniformMatrix3fv(this.addr,!1,CI),mr(n,r)}}function lhe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(pr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),mr(n,e)}else{if(pr(n,r))return;EI.set(r),t.uniformMatrix4fv(this.addr,!1,EI),mr(n,r)}}function che(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function uhe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(pr(n,e))return;t.uniform2iv(this.addr,e),mr(n,e)}}function dhe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(pr(n,e))return;t.uniform3iv(this.addr,e),mr(n,e)}}function fhe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(pr(n,e))return;t.uniform4iv(this.addr,e),mr(n,e)}}function hhe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function phe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(pr(n,e))return;t.uniform2uiv(this.addr,e),mr(n,e)}}function mhe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(pr(n,e))return;t.uniform3uiv(this.addr,e),mr(n,e)}}function ghe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(pr(n,e))return;t.uniform4uiv(this.addr,e),mr(n,e)}}function yhe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let s;this.type===t.SAMPLER_2D_SHADOW?(bI.compareFunction=FB,s=bI):s=JB,n.setTexture2D(e||s,i)}function vhe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||ZB,i)}function xhe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||e5,i)}function whe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||QB,i)}function bhe(t){switch(t){case 5126:return nhe;case 35664:return rhe;case 35665:return ihe;case 35666:return she;case 35674:return ohe;case 35675:return ahe;case 35676:return lhe;case 5124:case 35670:return che;case 35667:case 35671:return uhe;case 35668:case 35672:return dhe;case 35669:case 35673:return fhe;case 5125:return hhe;case 36294:return phe;case 36295:return mhe;case 36296:return ghe;case 35678:case 36198:case 36298:case 36306:case 35682:return yhe;case 35679:case 36299:case 36307:return vhe;case 35680:case 36300:case 36308:case 36293:return xhe;case 36289:case 36303:case 36311:case 36292:return whe}}function She(t,e){t.uniform1fv(this.addr,e)}function _he(t,e){const n=Oh(e,this.size,2);t.uniform2fv(this.addr,n)}function Ehe(t,e){const n=Oh(e,this.size,3);t.uniform3fv(this.addr,n)}function Che(t,e){const n=Oh(e,this.size,4);t.uniform4fv(this.addr,n)}function Mhe(t,e){const n=Oh(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function The(t,e){const n=Oh(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Ahe(t,e){const n=Oh(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Rhe(t,e){t.uniform1iv(this.addr,e)}function Nhe(t,e){t.uniform2iv(this.addr,e)}function khe(t,e){t.uniform3iv(this.addr,e)}function Phe(t,e){t.uniform4iv(this.addr,e)}function Dhe(t,e){t.uniform1uiv(this.addr,e)}function Ihe(t,e){t.uniform2uiv(this.addr,e)}function Lhe(t,e){t.uniform3uiv(this.addr,e)}function Ohe(t,e){t.uniform4uiv(this.addr,e)}function Fhe(t,e,n){const r=this.cache,i=e.length,s=Mw(n,i);pr(r,s)||(t.uniform1iv(this.addr,s),mr(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||JB,s[o])}function jhe(t,e,n){const r=this.cache,i=e.length,s=Mw(n,i);pr(r,s)||(t.uniform1iv(this.addr,s),mr(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||ZB,s[o])}function Uhe(t,e,n){const r=this.cache,i=e.length,s=Mw(n,i);pr(r,s)||(t.uniform1iv(this.addr,s),mr(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||e5,s[o])}function zhe(t,e,n){const r=this.cache,i=e.length,s=Mw(n,i);pr(r,s)||(t.uniform1iv(this.addr,s),mr(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||QB,s[o])}function Bhe(t){switch(t){case 5126:return She;case 35664:return _he;case 35665:return Ehe;case 35666:return Che;case 35674:return Mhe;case 35675:return The;case 35676:return Ahe;case 5124:case 35670:return Rhe;case 35667:case 35671:return Nhe;case 35668:case 35672:return khe;case 35669:case 35673:return Phe;case 5125:return Dhe;case 36294:return Ihe;case 36295:return Lhe;case 36296:return Ohe;case 35678:case 36198:case 36298:case 36306:case 35682:return Fhe;case 35679:case 36299:case 36307:return jhe;case 35680:case 36300:case 36308:case 36293:return Uhe;case 36289:case 36303:case 36311:case 36292:return zhe}}class Hhe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=bhe(n.type)}}class Vhe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=Bhe(n.type)}}class $he{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const G1=/(\w+)(\])?(\[|\.)?/g;function TI(t,e){t.seq.push(e),t.map[e.id]=e}function Whe(t,e,n){const r=t.name,i=r.length;for(G1.lastIndex=0;;){const s=G1.exec(r),o=G1.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){TI(n,c===void 0?new Hhe(a,t,e):new Vhe(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new $he(a),TI(n,d)),n=d}}}class lx{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);Whe(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function AI(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const Ghe=37297;let qhe=0;function Xhe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}const RI=new Ht;function Khe(t){hn._getMatrix(RI,hn.workingColorSpace,t);const e=`mat3( ${RI.elements.map(n=>n.toFixed(4))} )`;switch(hn.getTransfer(t)){case Zx:return[e,"LinearTransferOETF"];case _n:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function NI(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+Xhe(t.getShaderSource(e),o)}else return i}function Yhe(t,e){const n=Khe(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function Jhe(t,e){let n;switch(e){case Zle:n="Linear";break;case ece:n="Reinhard";break;case tce:n="Cineon";break;case nce:n="ACESFilmic";break;case ice:n="AgX";break;case sce:n="Neutral";break;case rce:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const xv=new Ee;function Qhe(){hn.getLuminanceCoefficients(xv);const t=xv.x.toFixed(4),e=xv.y.toFixed(4),n=xv.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Zhe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Up).join(`
`)}function epe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function tpe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Up(t){return t!==""}function kI(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function PI(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const npe=/^[ \t]*#include +<([\w\d./]+)>/gm;function $C(t){return t.replace(npe,ipe)}const rpe=new Map;function ipe(t,e){let n=Gt[e];if(n===void 0){const r=rpe.get(e);if(r!==void 0)n=Gt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return $C(n)}const spe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function DI(t){return t.replace(spe,ope)}function ope(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function II(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function ape(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===MB?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Ple?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Fa&&(e="SHADOWMAP_TYPE_VSM"),e}function lpe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case dh:case fh:e="ENVMAP_TYPE_CUBE";break;case _w:e="ENVMAP_TYPE_CUBE_UV";break}return e}function cpe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case fh:e="ENVMAP_MODE_REFRACTION";break}return e}function upe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case TB:e="ENVMAP_BLENDING_MULTIPLY";break;case Jle:e="ENVMAP_BLENDING_MIX";break;case Qle:e="ENVMAP_BLENDING_ADD";break}return e}function dpe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function fpe(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=ape(n),c=lpe(n),u=cpe(n),d=upe(n),p=dpe(n),m=Zhe(n),x=epe(s),w=i.createProgram();let v,y,S=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(Up).join(`
`),v.length>0&&(v+=`
`),y=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(Up).join(`
`),y.length>0&&(y+=`
`)):(v=[II(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Up).join(`
`),y=[II(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==bc?"#define TONE_MAPPING":"",n.toneMapping!==bc?Gt.tonemapping_pars_fragment:"",n.toneMapping!==bc?Jhe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Gt.colorspace_pars_fragment,Yhe("linearToOutputTexel",n.outputColorSpace),Qhe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Up).join(`
`)),o=$C(o),o=kI(o,n),o=PI(o,n),a=$C(a),a=kI(a,n),a=PI(a,n),o=DI(o),a=DI(a),n.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,v=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,y=["#define varying in",n.glslVersion===qD?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===qD?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const E=S+v+o,C=S+y+a,A=AI(i,i.VERTEX_SHADER,E),T=AI(i,i.FRAGMENT_SHADER,C);i.attachShader(w,A),i.attachShader(w,T),n.index0AttributeName!==void 0?i.bindAttribLocation(w,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(w,0,"position"),i.linkProgram(w);function k(L){if(t.debug.checkShaderErrors){const z=i.getProgramInfoLog(w).trim(),H=i.getShaderInfoLog(A).trim(),B=i.getShaderInfoLog(T).trim();let K=!0,q=!0;if(i.getProgramParameter(w,i.LINK_STATUS)===!1)if(K=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,w,A,T);else{const ee=NI(i,A,"vertex"),O=NI(i,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(w,i.VALIDATE_STATUS)+`

Material Name: `+L.name+`
Material Type: `+L.type+`

Program Info Log: `+z+`
`+ee+`
`+O)}else z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",z):(H===""||B==="")&&(q=!1);q&&(L.diagnostics={runnable:K,programLog:z,vertexShader:{log:H,prefix:v},fragmentShader:{log:B,prefix:y}})}i.deleteShader(A),i.deleteShader(T),R=new lx(i,w),P=tpe(i,w)}let R;this.getUniforms=function(){return R===void 0&&k(this),R};let P;this.getAttributes=function(){return P===void 0&&k(this),P};let M=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=i.getProgramParameter(w,Ghe)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(w),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=qhe++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=A,this.fragmentShader=T,this}let hpe=0;class ppe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new mpe(e),n.set(e,r)),r}}class mpe{constructor(e){this.id=hpe++,this.code=e,this.usedTimes=0}}function gpe(t,e,n,r,i,s,o){const a=new zB,l=new ppe,c=new Set,u=[],d=i.logarithmicDepthBuffer,p=i.vertexTextures;let m=i.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(P){return c.add(P),P===0?"uv":`uv${P}`}function v(P,M,L,z,H){const B=z.fog,K=H.geometry,q=P.isMeshStandardMaterial?z.environment:null,ee=(P.isMeshStandardMaterial?n:e).get(P.envMap||q),O=ee&&ee.mapping===_w?ee.image.height:null,F=x[P.type];P.precision!==null&&(m=i.getMaxPrecision(P.precision),m!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",m,"instead."));const D=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,ie=D!==void 0?D.length:0;let $=0;K.morphAttributes.position!==void 0&&($=1),K.morphAttributes.normal!==void 0&&($=2),K.morphAttributes.color!==void 0&&($=3);let U,Y,oe,ne;if(F){const Tt=Yo[F];U=Tt.vertexShader,Y=Tt.fragmentShader}else U=P.vertexShader,Y=P.fragmentShader,l.update(P),oe=l.getVertexShaderID(P),ne=l.getFragmentShaderID(P);const Z=t.getRenderTarget(),fe=t.state.buffers.depth.getReversed(),we=H.isInstancedMesh===!0,xe=H.isBatchedMesh===!0,Ve=!!P.map,Pe=!!P.matcap,et=!!ee,te=!!P.aoMap,ft=!!P.lightMap,Ye=!!P.bumpMap,ht=!!P.normalMap,Qe=!!P.displacementMap,St=!!P.emissiveMap,Ne=!!P.metalnessMap,Me=!!P.roughnessMap,st=P.anisotropy>0,Q=P.clearcoat>0,I=P.dispersion>0,re=P.iridescence>0,G=P.sheen>0,ae=P.transmission>0,ce=st&&!!P.anisotropyMap,Ae=Q&&!!P.clearcoatMap,De=Q&&!!P.clearcoatNormalMap,Je=Q&&!!P.clearcoatRoughnessMap,me=re&&!!P.iridescenceMap,ge=re&&!!P.iridescenceThicknessMap,be=G&&!!P.sheenColorMap,Oe=G&&!!P.sheenRoughnessMap,Xe=!!P.specularMap,Ge=!!P.specularColorMap,wt=!!P.specularIntensityMap,de=ae&&!!P.transmissionMap,ot=ae&&!!P.thicknessMap,We=!!P.gradientMap,rt=!!P.alphaMap,je=P.alphaTest>0,ke=!!P.alphaHash,Ue=!!P.extensions;let tt=bc;P.toneMapped&&(Z===null||Z.isXRRenderTarget===!0)&&(tt=t.toneMapping);const pt={shaderID:F,shaderType:P.type,shaderName:P.name,vertexShader:U,fragmentShader:Y,defines:P.defines,customVertexShaderID:oe,customFragmentShaderID:ne,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:m,batching:xe,batchingColor:xe&&H._colorsTexture!==null,instancing:we,instancingColor:we&&H.instanceColor!==null,instancingMorph:we&&H.morphTexture!==null,supportsVertexTextures:p,outputColorSpace:Z===null?t.outputColorSpace:Z.isXRRenderTarget===!0?Z.texture.colorSpace:hh,alphaToCoverage:!!P.alphaToCoverage,map:Ve,matcap:Pe,envMap:et,envMapMode:et&&ee.mapping,envMapCubeUVHeight:O,aoMap:te,lightMap:ft,bumpMap:Ye,normalMap:ht,displacementMap:p&&Qe,emissiveMap:St,normalMapObjectSpace:ht&&P.normalMapType===uce,normalMapTangentSpace:ht&&P.normalMapType===cce,metalnessMap:Ne,roughnessMap:Me,anisotropy:st,anisotropyMap:ce,clearcoat:Q,clearcoatMap:Ae,clearcoatNormalMap:De,clearcoatRoughnessMap:Je,dispersion:I,iridescence:re,iridescenceMap:me,iridescenceThicknessMap:ge,sheen:G,sheenColorMap:be,sheenRoughnessMap:Oe,specularMap:Xe,specularColorMap:Ge,specularIntensityMap:wt,transmission:ae,transmissionMap:de,thicknessMap:ot,gradientMap:We,opaque:P.transparent===!1&&P.blending===Of&&P.alphaToCoverage===!1,alphaMap:rt,alphaTest:je,alphaHash:ke,combine:P.combine,mapUv:Ve&&w(P.map.channel),aoMapUv:te&&w(P.aoMap.channel),lightMapUv:ft&&w(P.lightMap.channel),bumpMapUv:Ye&&w(P.bumpMap.channel),normalMapUv:ht&&w(P.normalMap.channel),displacementMapUv:Qe&&w(P.displacementMap.channel),emissiveMapUv:St&&w(P.emissiveMap.channel),metalnessMapUv:Ne&&w(P.metalnessMap.channel),roughnessMapUv:Me&&w(P.roughnessMap.channel),anisotropyMapUv:ce&&w(P.anisotropyMap.channel),clearcoatMapUv:Ae&&w(P.clearcoatMap.channel),clearcoatNormalMapUv:De&&w(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Je&&w(P.clearcoatRoughnessMap.channel),iridescenceMapUv:me&&w(P.iridescenceMap.channel),iridescenceThicknessMapUv:ge&&w(P.iridescenceThicknessMap.channel),sheenColorMapUv:be&&w(P.sheenColorMap.channel),sheenRoughnessMapUv:Oe&&w(P.sheenRoughnessMap.channel),specularMapUv:Xe&&w(P.specularMap.channel),specularColorMapUv:Ge&&w(P.specularColorMap.channel),specularIntensityMapUv:wt&&w(P.specularIntensityMap.channel),transmissionMapUv:de&&w(P.transmissionMap.channel),thicknessMapUv:ot&&w(P.thicknessMap.channel),alphaMapUv:rt&&w(P.alphaMap.channel),vertexTangents:!!K.attributes.tangent&&(ht||st),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,pointsUvs:H.isPoints===!0&&!!K.attributes.uv&&(Ve||rt),fog:!!B,useFog:P.fog===!0,fogExp2:!!B&&B.isFogExp2,flatShading:P.flatShading===!0,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:fe,skinning:H.isSkinnedMesh===!0,morphTargets:K.morphAttributes.position!==void 0,morphNormals:K.morphAttributes.normal!==void 0,morphColors:K.morphAttributes.color!==void 0,morphTargetsCount:ie,morphTextureStride:$,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:P.dithering,shadowMapEnabled:t.shadowMap.enabled&&L.length>0,shadowMapType:t.shadowMap.type,toneMapping:tt,decodeVideoTexture:Ve&&P.map.isVideoTexture===!0&&hn.getTransfer(P.map.colorSpace)===_n,decodeVideoTextureEmissive:St&&P.emissiveMap.isVideoTexture===!0&&hn.getTransfer(P.emissiveMap.colorSpace)===_n,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===ea,flipSided:P.side===Gi,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionClipCullDistance:Ue&&P.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ue&&P.extensions.multiDraw===!0||xe)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:P.customProgramCacheKey()};return pt.vertexUv1s=c.has(1),pt.vertexUv2s=c.has(2),pt.vertexUv3s=c.has(3),c.clear(),pt}function y(P){const M=[];if(P.shaderID?M.push(P.shaderID):(M.push(P.customVertexShaderID),M.push(P.customFragmentShaderID)),P.defines!==void 0)for(const L in P.defines)M.push(L),M.push(P.defines[L]);return P.isRawShaderMaterial===!1&&(S(M,P),E(M,P),M.push(t.outputColorSpace)),M.push(P.customProgramCacheKey),M.join()}function S(P,M){P.push(M.precision),P.push(M.outputColorSpace),P.push(M.envMapMode),P.push(M.envMapCubeUVHeight),P.push(M.mapUv),P.push(M.alphaMapUv),P.push(M.lightMapUv),P.push(M.aoMapUv),P.push(M.bumpMapUv),P.push(M.normalMapUv),P.push(M.displacementMapUv),P.push(M.emissiveMapUv),P.push(M.metalnessMapUv),P.push(M.roughnessMapUv),P.push(M.anisotropyMapUv),P.push(M.clearcoatMapUv),P.push(M.clearcoatNormalMapUv),P.push(M.clearcoatRoughnessMapUv),P.push(M.iridescenceMapUv),P.push(M.iridescenceThicknessMapUv),P.push(M.sheenColorMapUv),P.push(M.sheenRoughnessMapUv),P.push(M.specularMapUv),P.push(M.specularColorMapUv),P.push(M.specularIntensityMapUv),P.push(M.transmissionMapUv),P.push(M.thicknessMapUv),P.push(M.combine),P.push(M.fogExp2),P.push(M.sizeAttenuation),P.push(M.morphTargetsCount),P.push(M.morphAttributeCount),P.push(M.numDirLights),P.push(M.numPointLights),P.push(M.numSpotLights),P.push(M.numSpotLightMaps),P.push(M.numHemiLights),P.push(M.numRectAreaLights),P.push(M.numDirLightShadows),P.push(M.numPointLightShadows),P.push(M.numSpotLightShadows),P.push(M.numSpotLightShadowsWithMaps),P.push(M.numLightProbes),P.push(M.shadowMapType),P.push(M.toneMapping),P.push(M.numClippingPlanes),P.push(M.numClipIntersection),P.push(M.depthPacking)}function E(P,M){a.disableAll(),M.supportsVertexTextures&&a.enable(0),M.instancing&&a.enable(1),M.instancingColor&&a.enable(2),M.instancingMorph&&a.enable(3),M.matcap&&a.enable(4),M.envMap&&a.enable(5),M.normalMapObjectSpace&&a.enable(6),M.normalMapTangentSpace&&a.enable(7),M.clearcoat&&a.enable(8),M.iridescence&&a.enable(9),M.alphaTest&&a.enable(10),M.vertexColors&&a.enable(11),M.vertexAlphas&&a.enable(12),M.vertexUv1s&&a.enable(13),M.vertexUv2s&&a.enable(14),M.vertexUv3s&&a.enable(15),M.vertexTangents&&a.enable(16),M.anisotropy&&a.enable(17),M.alphaHash&&a.enable(18),M.batching&&a.enable(19),M.dispersion&&a.enable(20),M.batchingColor&&a.enable(21),P.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.reverseDepthBuffer&&a.enable(4),M.skinning&&a.enable(5),M.morphTargets&&a.enable(6),M.morphNormals&&a.enable(7),M.morphColors&&a.enable(8),M.premultipliedAlpha&&a.enable(9),M.shadowMapEnabled&&a.enable(10),M.doubleSided&&a.enable(11),M.flipSided&&a.enable(12),M.useDepthPacking&&a.enable(13),M.dithering&&a.enable(14),M.transmission&&a.enable(15),M.sheen&&a.enable(16),M.opaque&&a.enable(17),M.pointsUvs&&a.enable(18),M.decodeVideoTexture&&a.enable(19),M.decodeVideoTextureEmissive&&a.enable(20),M.alphaToCoverage&&a.enable(21),P.push(a.mask)}function C(P){const M=x[P.type];let L;if(M){const z=Yo[M];L=Hce.clone(z.uniforms)}else L=P.uniforms;return L}function A(P,M){let L;for(let z=0,H=u.length;z<H;z++){const B=u[z];if(B.cacheKey===M){L=B,++L.usedTimes;break}}return L===void 0&&(L=new fpe(t,M,P,s),u.push(L)),L}function T(P){if(--P.usedTimes===0){const M=u.indexOf(P);u[M]=u[u.length-1],u.pop(),P.destroy()}}function k(P){l.remove(P)}function R(){l.dispose()}return{getParameters:v,getProgramCacheKey:y,getUniforms:C,acquireProgram:A,releaseProgram:T,releaseShaderCache:k,programs:u,dispose:R}}function ype(){let t=new WeakMap;function e(o){return t.has(o)}function n(o){let a=t.get(o);return a===void 0&&(a={},t.set(o,a)),a}function r(o){t.delete(o)}function i(o,a,l){t.get(o)[a]=l}function s(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:s}}function vpe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function LI(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function OI(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(d,p,m,x,w,v){let y=t[e];return y===void 0?(y={id:d.id,object:d,geometry:p,material:m,groupOrder:x,renderOrder:d.renderOrder,z:w,group:v},t[e]=y):(y.id=d.id,y.object=d,y.geometry=p,y.material=m,y.groupOrder=x,y.renderOrder=d.renderOrder,y.z=w,y.group=v),e++,y}function a(d,p,m,x,w,v){const y=o(d,p,m,x,w,v);m.transmission>0?r.push(y):m.transparent===!0?i.push(y):n.push(y)}function l(d,p,m,x,w,v){const y=o(d,p,m,x,w,v);m.transmission>0?r.unshift(y):m.transparent===!0?i.unshift(y):n.unshift(y)}function c(d,p){n.length>1&&n.sort(d||vpe),r.length>1&&r.sort(p||LI),i.length>1&&i.sort(p||LI)}function u(){for(let d=e,p=t.length;d<p;d++){const m=t[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function xpe(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new OI,t.set(r,[o])):i>=s.length?(o=new OI,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function wpe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Ee,color:new yn};break;case"SpotLight":n={position:new Ee,direction:new Ee,color:new yn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Ee,color:new yn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Ee,skyColor:new yn,groundColor:new yn};break;case"RectAreaLight":n={color:new yn,position:new Ee,halfWidth:new Ee,halfHeight:new Ee};break}return t[e.id]=n,n}}}function bpe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new bn};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new bn};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new bn,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Spe=0;function _pe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Epe(t){const e=new wpe,n=bpe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new Ee);const i=new Ee,s=new Yn,o=new Yn;function a(c){let u=0,d=0,p=0;for(let P=0;P<9;P++)r.probe[P].set(0,0,0);let m=0,x=0,w=0,v=0,y=0,S=0,E=0,C=0,A=0,T=0,k=0;c.sort(_pe);for(let P=0,M=c.length;P<M;P++){const L=c[P],z=L.color,H=L.intensity,B=L.distance,K=L.shadow&&L.shadow.map?L.shadow.map.texture:null;if(L.isAmbientLight)u+=z.r*H,d+=z.g*H,p+=z.b*H;else if(L.isLightProbe){for(let q=0;q<9;q++)r.probe[q].addScaledVector(L.sh.coefficients[q],H);k++}else if(L.isDirectionalLight){const q=e.get(L);if(q.color.copy(L.color).multiplyScalar(L.intensity),L.castShadow){const ee=L.shadow,O=n.get(L);O.shadowIntensity=ee.intensity,O.shadowBias=ee.bias,O.shadowNormalBias=ee.normalBias,O.shadowRadius=ee.radius,O.shadowMapSize=ee.mapSize,r.directionalShadow[m]=O,r.directionalShadowMap[m]=K,r.directionalShadowMatrix[m]=L.shadow.matrix,S++}r.directional[m]=q,m++}else if(L.isSpotLight){const q=e.get(L);q.position.setFromMatrixPosition(L.matrixWorld),q.color.copy(z).multiplyScalar(H),q.distance=B,q.coneCos=Math.cos(L.angle),q.penumbraCos=Math.cos(L.angle*(1-L.penumbra)),q.decay=L.decay,r.spot[w]=q;const ee=L.shadow;if(L.map&&(r.spotLightMap[A]=L.map,A++,ee.updateMatrices(L),L.castShadow&&T++),r.spotLightMatrix[w]=ee.matrix,L.castShadow){const O=n.get(L);O.shadowIntensity=ee.intensity,O.shadowBias=ee.bias,O.shadowNormalBias=ee.normalBias,O.shadowRadius=ee.radius,O.shadowMapSize=ee.mapSize,r.spotShadow[w]=O,r.spotShadowMap[w]=K,C++}w++}else if(L.isRectAreaLight){const q=e.get(L);q.color.copy(z).multiplyScalar(H),q.halfWidth.set(L.width*.5,0,0),q.halfHeight.set(0,L.height*.5,0),r.rectArea[v]=q,v++}else if(L.isPointLight){const q=e.get(L);if(q.color.copy(L.color).multiplyScalar(L.intensity),q.distance=L.distance,q.decay=L.decay,L.castShadow){const ee=L.shadow,O=n.get(L);O.shadowIntensity=ee.intensity,O.shadowBias=ee.bias,O.shadowNormalBias=ee.normalBias,O.shadowRadius=ee.radius,O.shadowMapSize=ee.mapSize,O.shadowCameraNear=ee.camera.near,O.shadowCameraFar=ee.camera.far,r.pointShadow[x]=O,r.pointShadowMap[x]=K,r.pointShadowMatrix[x]=L.shadow.matrix,E++}r.point[x]=q,x++}else if(L.isHemisphereLight){const q=e.get(L);q.skyColor.copy(L.color).multiplyScalar(H),q.groundColor.copy(L.groundColor).multiplyScalar(H),r.hemi[y]=q,y++}}v>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ct.LTC_FLOAT_1,r.rectAreaLTC2=ct.LTC_FLOAT_2):(r.rectAreaLTC1=ct.LTC_HALF_1,r.rectAreaLTC2=ct.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=d,r.ambient[2]=p;const R=r.hash;(R.directionalLength!==m||R.pointLength!==x||R.spotLength!==w||R.rectAreaLength!==v||R.hemiLength!==y||R.numDirectionalShadows!==S||R.numPointShadows!==E||R.numSpotShadows!==C||R.numSpotMaps!==A||R.numLightProbes!==k)&&(r.directional.length=m,r.spot.length=w,r.rectArea.length=v,r.point.length=x,r.hemi.length=y,r.directionalShadow.length=S,r.directionalShadowMap.length=S,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=C,r.spotShadowMap.length=C,r.directionalShadowMatrix.length=S,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=C+A-T,r.spotLightMap.length=A,r.numSpotLightShadowsWithMaps=T,r.numLightProbes=k,R.directionalLength=m,R.pointLength=x,R.spotLength=w,R.rectAreaLength=v,R.hemiLength=y,R.numDirectionalShadows=S,R.numPointShadows=E,R.numSpotShadows=C,R.numSpotMaps=A,R.numLightProbes=k,r.version=Spe++)}function l(c,u){let d=0,p=0,m=0,x=0,w=0;const v=u.matrixWorldInverse;for(let y=0,S=c.length;y<S;y++){const E=c[y];if(E.isDirectionalLight){const C=r.directional[d];C.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),C.direction.sub(i),C.direction.transformDirection(v),d++}else if(E.isSpotLight){const C=r.spot[m];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(v),C.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),C.direction.sub(i),C.direction.transformDirection(v),m++}else if(E.isRectAreaLight){const C=r.rectArea[x];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(v),o.identity(),s.copy(E.matrixWorld),s.premultiply(v),o.extractRotation(s),C.halfWidth.set(E.width*.5,0,0),C.halfHeight.set(0,E.height*.5,0),C.halfWidth.applyMatrix4(o),C.halfHeight.applyMatrix4(o),x++}else if(E.isPointLight){const C=r.point[p];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(v),p++}else if(E.isHemisphereLight){const C=r.hemi[w];C.direction.setFromMatrixPosition(E.matrixWorld),C.direction.transformDirection(v),w++}}}return{setup:a,setupView:l,state:r}}function FI(t){const e=new Epe(t),n=[],r=[];function i(u){c.camera=u,n.length=0,r.length=0}function s(u){n.push(u)}function o(u){r.push(u)}function a(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function Cpe(t){let e=new WeakMap;function n(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new FI(t),e.set(i,[a])):s>=o.length?(a=new FI(t),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:n,dispose:r}}const Mpe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Tpe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Ape(t,e,n){let r=new LA;const i=new bn,s=new bn,o=new Kn,a=new Jce({depthPacking:lce}),l=new Qce,c={},u=n.maxTextureSize,d={[Pc]:Gi,[Gi]:Pc,[ea]:ea},p=new Dc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new bn},radius:{value:4}},vertexShader:Mpe,fragmentShader:Tpe}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const x=new Bc;x.setAttribute("position",new aa(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new Ir(x,p),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=MB;let y=this.type;this.render=function(T,k,R){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||T.length===0)return;const P=t.getRenderTarget(),M=t.getActiveCubeFace(),L=t.getActiveMipmapLevel(),z=t.state;z.setBlending(wc),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const H=y!==Fa&&this.type===Fa,B=y===Fa&&this.type!==Fa;for(let K=0,q=T.length;K<q;K++){const ee=T[K],O=ee.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",ee,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;i.copy(O.mapSize);const F=O.getFrameExtents();if(i.multiply(F),s.copy(O.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/F.x),i.x=s.x*F.x,O.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/F.y),i.y=s.y*F.y,O.mapSize.y=s.y)),O.map===null||H===!0||B===!0){const ie=this.type!==Fa?{minFilter:Co,magFilter:Co}:{};O.map!==null&&O.map.dispose(),O.map=new nd(i.x,i.y,ie),O.map.texture.name=ee.name+".shadowMap",O.camera.updateProjectionMatrix()}t.setRenderTarget(O.map),t.clear();const D=O.getViewportCount();for(let ie=0;ie<D;ie++){const $=O.getViewport(ie);o.set(s.x*$.x,s.y*$.y,s.x*$.z,s.y*$.w),z.viewport(o),O.updateMatrices(ee,ie),r=O.getFrustum(),C(k,R,O.camera,ee,this.type)}O.isPointLightShadow!==!0&&this.type===Fa&&S(O,R),O.needsUpdate=!1}y=this.type,v.needsUpdate=!1,t.setRenderTarget(P,M,L)};function S(T,k){const R=e.update(w);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,m.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new nd(i.x,i.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,t.setRenderTarget(T.mapPass),t.clear(),t.renderBufferDirect(k,null,R,p,w,null),m.uniforms.shadow_pass.value=T.mapPass.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,t.setRenderTarget(T.map),t.clear(),t.renderBufferDirect(k,null,R,m,w,null)}function E(T,k,R,P){let M=null;const L=R.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(L!==void 0)M=L;else if(M=R.isPointLight===!0?l:a,t.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0||k.alphaToCoverage===!0){const z=M.uuid,H=k.uuid;let B=c[z];B===void 0&&(B={},c[z]=B);let K=B[H];K===void 0&&(K=M.clone(),B[H]=K,k.addEventListener("dispose",A)),M=K}if(M.visible=k.visible,M.wireframe=k.wireframe,P===Fa?M.side=k.shadowSide!==null?k.shadowSide:k.side:M.side=k.shadowSide!==null?k.shadowSide:d[k.side],M.alphaMap=k.alphaMap,M.alphaTest=k.alphaToCoverage===!0?.5:k.alphaTest,M.map=k.map,M.clipShadows=k.clipShadows,M.clippingPlanes=k.clippingPlanes,M.clipIntersection=k.clipIntersection,M.displacementMap=k.displacementMap,M.displacementScale=k.displacementScale,M.displacementBias=k.displacementBias,M.wireframeLinewidth=k.wireframeLinewidth,M.linewidth=k.linewidth,R.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const z=t.properties.get(M);z.light=R}return M}function C(T,k,R,P,M){if(T.visible===!1)return;if(T.layers.test(k.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&M===Fa)&&(!T.frustumCulled||r.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,T.matrixWorld);const H=e.update(T),B=T.material;if(Array.isArray(B)){const K=H.groups;for(let q=0,ee=K.length;q<ee;q++){const O=K[q],F=B[O.materialIndex];if(F&&F.visible){const D=E(T,F,P,M);T.onBeforeShadow(t,T,k,R,H,D,O),t.renderBufferDirect(R,null,H,D,T,O),T.onAfterShadow(t,T,k,R,H,D,O)}}}else if(B.visible){const K=E(T,B,P,M);T.onBeforeShadow(t,T,k,R,H,K,null),t.renderBufferDirect(R,null,H,K,T,null),T.onAfterShadow(t,T,k,R,H,K,null)}}const z=T.children;for(let H=0,B=z.length;H<B;H++)C(z[H],k,R,P,M)}function A(T){T.target.removeEventListener("dispose",A);for(const R in c){const P=c[R],M=T.target.uuid;M in P&&(P[M].dispose(),delete P[M])}}}const Rpe={[oC]:aC,[lC]:dC,[cC]:fC,[uh]:uC,[aC]:oC,[dC]:lC,[fC]:cC,[uC]:uh};function Npe(t,e){function n(){let de=!1;const ot=new Kn;let We=null;const rt=new Kn(0,0,0,0);return{setMask:function(je){We!==je&&!de&&(t.colorMask(je,je,je,je),We=je)},setLocked:function(je){de=je},setClear:function(je,ke,Ue,tt,pt){pt===!0&&(je*=tt,ke*=tt,Ue*=tt),ot.set(je,ke,Ue,tt),rt.equals(ot)===!1&&(t.clearColor(je,ke,Ue,tt),rt.copy(ot))},reset:function(){de=!1,We=null,rt.set(-1,0,0,0)}}}function r(){let de=!1,ot=!1,We=null,rt=null,je=null;return{setReversed:function(ke){if(ot!==ke){const Ue=e.get("EXT_clip_control");ke?Ue.clipControlEXT(Ue.LOWER_LEFT_EXT,Ue.ZERO_TO_ONE_EXT):Ue.clipControlEXT(Ue.LOWER_LEFT_EXT,Ue.NEGATIVE_ONE_TO_ONE_EXT),ot=ke;const tt=je;je=null,this.setClear(tt)}},getReversed:function(){return ot},setTest:function(ke){ke?Z(t.DEPTH_TEST):fe(t.DEPTH_TEST)},setMask:function(ke){We!==ke&&!de&&(t.depthMask(ke),We=ke)},setFunc:function(ke){if(ot&&(ke=Rpe[ke]),rt!==ke){switch(ke){case oC:t.depthFunc(t.NEVER);break;case aC:t.depthFunc(t.ALWAYS);break;case lC:t.depthFunc(t.LESS);break;case uh:t.depthFunc(t.LEQUAL);break;case cC:t.depthFunc(t.EQUAL);break;case uC:t.depthFunc(t.GEQUAL);break;case dC:t.depthFunc(t.GREATER);break;case fC:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}rt=ke}},setLocked:function(ke){de=ke},setClear:function(ke){je!==ke&&(ot&&(ke=1-ke),t.clearDepth(ke),je=ke)},reset:function(){de=!1,We=null,rt=null,je=null,ot=!1}}}function i(){let de=!1,ot=null,We=null,rt=null,je=null,ke=null,Ue=null,tt=null,pt=null;return{setTest:function(Tt){de||(Tt?Z(t.STENCIL_TEST):fe(t.STENCIL_TEST))},setMask:function(Tt){ot!==Tt&&!de&&(t.stencilMask(Tt),ot=Tt)},setFunc:function(Tt,rn,$t){(We!==Tt||rt!==rn||je!==$t)&&(t.stencilFunc(Tt,rn,$t),We=Tt,rt=rn,je=$t)},setOp:function(Tt,rn,$t){(ke!==Tt||Ue!==rn||tt!==$t)&&(t.stencilOp(Tt,rn,$t),ke=Tt,Ue=rn,tt=$t)},setLocked:function(Tt){de=Tt},setClear:function(Tt){pt!==Tt&&(t.clearStencil(Tt),pt=Tt)},reset:function(){de=!1,ot=null,We=null,rt=null,je=null,ke=null,Ue=null,tt=null,pt=null}}}const s=new n,o=new r,a=new i,l=new WeakMap,c=new WeakMap;let u={},d={},p=new WeakMap,m=[],x=null,w=!1,v=null,y=null,S=null,E=null,C=null,A=null,T=null,k=new yn(0,0,0),R=0,P=!1,M=null,L=null,z=null,H=null,B=null;const K=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let q=!1,ee=0;const O=t.getParameter(t.VERSION);O.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(O)[1]),q=ee>=1):O.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),q=ee>=2);let F=null,D={};const ie=t.getParameter(t.SCISSOR_BOX),$=t.getParameter(t.VIEWPORT),U=new Kn().fromArray(ie),Y=new Kn().fromArray($);function oe(de,ot,We,rt){const je=new Uint8Array(4),ke=t.createTexture();t.bindTexture(de,ke),t.texParameteri(de,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(de,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Ue=0;Ue<We;Ue++)de===t.TEXTURE_3D||de===t.TEXTURE_2D_ARRAY?t.texImage3D(ot,0,t.RGBA,1,1,rt,0,t.RGBA,t.UNSIGNED_BYTE,je):t.texImage2D(ot+Ue,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,je);return ke}const ne={};ne[t.TEXTURE_2D]=oe(t.TEXTURE_2D,t.TEXTURE_2D,1),ne[t.TEXTURE_CUBE_MAP]=oe(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),ne[t.TEXTURE_2D_ARRAY]=oe(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),ne[t.TEXTURE_3D]=oe(t.TEXTURE_3D,t.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),Z(t.DEPTH_TEST),o.setFunc(uh),Ye(!1),ht(BD),Z(t.CULL_FACE),te(wc);function Z(de){u[de]!==!0&&(t.enable(de),u[de]=!0)}function fe(de){u[de]!==!1&&(t.disable(de),u[de]=!1)}function we(de,ot){return d[de]!==ot?(t.bindFramebuffer(de,ot),d[de]=ot,de===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=ot),de===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=ot),!0):!1}function xe(de,ot){let We=m,rt=!1;if(de){We=p.get(ot),We===void 0&&(We=[],p.set(ot,We));const je=de.textures;if(We.length!==je.length||We[0]!==t.COLOR_ATTACHMENT0){for(let ke=0,Ue=je.length;ke<Ue;ke++)We[ke]=t.COLOR_ATTACHMENT0+ke;We.length=je.length,rt=!0}}else We[0]!==t.BACK&&(We[0]=t.BACK,rt=!0);rt&&t.drawBuffers(We)}function Ve(de){return x!==de?(t.useProgram(de),x=de,!0):!1}const Pe={[wu]:t.FUNC_ADD,[Ile]:t.FUNC_SUBTRACT,[Lle]:t.FUNC_REVERSE_SUBTRACT};Pe[Ole]=t.MIN,Pe[Fle]=t.MAX;const et={[jle]:t.ZERO,[Ule]:t.ONE,[zle]:t.SRC_COLOR,[iC]:t.SRC_ALPHA,[Gle]:t.SRC_ALPHA_SATURATE,[$le]:t.DST_COLOR,[Hle]:t.DST_ALPHA,[Ble]:t.ONE_MINUS_SRC_COLOR,[sC]:t.ONE_MINUS_SRC_ALPHA,[Wle]:t.ONE_MINUS_DST_COLOR,[Vle]:t.ONE_MINUS_DST_ALPHA,[qle]:t.CONSTANT_COLOR,[Xle]:t.ONE_MINUS_CONSTANT_COLOR,[Kle]:t.CONSTANT_ALPHA,[Yle]:t.ONE_MINUS_CONSTANT_ALPHA};function te(de,ot,We,rt,je,ke,Ue,tt,pt,Tt){if(de===wc){w===!0&&(fe(t.BLEND),w=!1);return}if(w===!1&&(Z(t.BLEND),w=!0),de!==Dle){if(de!==v||Tt!==P){if((y!==wu||C!==wu)&&(t.blendEquation(t.FUNC_ADD),y=wu,C=wu),Tt)switch(de){case Of:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case HD:t.blendFunc(t.ONE,t.ONE);break;case VD:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case $D:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}else switch(de){case Of:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case HD:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case VD:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case $D:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",de);break}S=null,E=null,A=null,T=null,k.set(0,0,0),R=0,v=de,P=Tt}return}je=je||ot,ke=ke||We,Ue=Ue||rt,(ot!==y||je!==C)&&(t.blendEquationSeparate(Pe[ot],Pe[je]),y=ot,C=je),(We!==S||rt!==E||ke!==A||Ue!==T)&&(t.blendFuncSeparate(et[We],et[rt],et[ke],et[Ue]),S=We,E=rt,A=ke,T=Ue),(tt.equals(k)===!1||pt!==R)&&(t.blendColor(tt.r,tt.g,tt.b,pt),k.copy(tt),R=pt),v=de,P=!1}function ft(de,ot){de.side===ea?fe(t.CULL_FACE):Z(t.CULL_FACE);let We=de.side===Gi;ot&&(We=!We),Ye(We),de.blending===Of&&de.transparent===!1?te(wc):te(de.blending,de.blendEquation,de.blendSrc,de.blendDst,de.blendEquationAlpha,de.blendSrcAlpha,de.blendDstAlpha,de.blendColor,de.blendAlpha,de.premultipliedAlpha),o.setFunc(de.depthFunc),o.setTest(de.depthTest),o.setMask(de.depthWrite),s.setMask(de.colorWrite);const rt=de.stencilWrite;a.setTest(rt),rt&&(a.setMask(de.stencilWriteMask),a.setFunc(de.stencilFunc,de.stencilRef,de.stencilFuncMask),a.setOp(de.stencilFail,de.stencilZFail,de.stencilZPass)),St(de.polygonOffset,de.polygonOffsetFactor,de.polygonOffsetUnits),de.alphaToCoverage===!0?Z(t.SAMPLE_ALPHA_TO_COVERAGE):fe(t.SAMPLE_ALPHA_TO_COVERAGE)}function Ye(de){M!==de&&(de?t.frontFace(t.CW):t.frontFace(t.CCW),M=de)}function ht(de){de!==Nle?(Z(t.CULL_FACE),de!==L&&(de===BD?t.cullFace(t.BACK):de===kle?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):fe(t.CULL_FACE),L=de}function Qe(de){de!==z&&(q&&t.lineWidth(de),z=de)}function St(de,ot,We){de?(Z(t.POLYGON_OFFSET_FILL),(H!==ot||B!==We)&&(t.polygonOffset(ot,We),H=ot,B=We)):fe(t.POLYGON_OFFSET_FILL)}function Ne(de){de?Z(t.SCISSOR_TEST):fe(t.SCISSOR_TEST)}function Me(de){de===void 0&&(de=t.TEXTURE0+K-1),F!==de&&(t.activeTexture(de),F=de)}function st(de,ot,We){We===void 0&&(F===null?We=t.TEXTURE0+K-1:We=F);let rt=D[We];rt===void 0&&(rt={type:void 0,texture:void 0},D[We]=rt),(rt.type!==de||rt.texture!==ot)&&(F!==We&&(t.activeTexture(We),F=We),t.bindTexture(de,ot||ne[de]),rt.type=de,rt.texture=ot)}function Q(){const de=D[F];de!==void 0&&de.type!==void 0&&(t.bindTexture(de.type,null),de.type=void 0,de.texture=void 0)}function I(){try{t.compressedTexImage2D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function re(){try{t.compressedTexImage3D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function G(){try{t.texSubImage2D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ae(){try{t.texSubImage3D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ce(){try{t.compressedTexSubImage2D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Ae(){try{t.compressedTexSubImage3D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function De(){try{t.texStorage2D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function Je(){try{t.texStorage3D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function me(){try{t.texImage2D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function ge(){try{t.texImage3D(...arguments)}catch(de){console.error("THREE.WebGLState:",de)}}function be(de){U.equals(de)===!1&&(t.scissor(de.x,de.y,de.z,de.w),U.copy(de))}function Oe(de){Y.equals(de)===!1&&(t.viewport(de.x,de.y,de.z,de.w),Y.copy(de))}function Xe(de,ot){let We=c.get(ot);We===void 0&&(We=new WeakMap,c.set(ot,We));let rt=We.get(de);rt===void 0&&(rt=t.getUniformBlockIndex(ot,de.name),We.set(de,rt))}function Ge(de,ot){const rt=c.get(ot).get(de);l.get(ot)!==rt&&(t.uniformBlockBinding(ot,rt,de.__bindingPointIndex),l.set(ot,rt))}function wt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),o.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},F=null,D={},d={},p=new WeakMap,m=[],x=null,w=!1,v=null,y=null,S=null,E=null,C=null,A=null,T=null,k=new yn(0,0,0),R=0,P=!1,M=null,L=null,z=null,H=null,B=null,U.set(0,0,t.canvas.width,t.canvas.height),Y.set(0,0,t.canvas.width,t.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:Z,disable:fe,bindFramebuffer:we,drawBuffers:xe,useProgram:Ve,setBlending:te,setMaterial:ft,setFlipSided:Ye,setCullFace:ht,setLineWidth:Qe,setPolygonOffset:St,setScissorTest:Ne,activeTexture:Me,bindTexture:st,unbindTexture:Q,compressedTexImage2D:I,compressedTexImage3D:re,texImage2D:me,texImage3D:ge,updateUBOMapping:Xe,uniformBlockBinding:Ge,texStorage2D:De,texStorage3D:Je,texSubImage2D:G,texSubImage3D:ae,compressedTexSubImage2D:ce,compressedTexSubImage3D:Ae,scissor:be,viewport:Oe,reset:wt}}function kpe(t,e,n,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new bn,u=new WeakMap;let d;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(Q,I){return m?new OffscreenCanvas(Q,I):t0("canvas")}function w(Q,I,re){let G=1;const ae=st(Q);if((ae.width>re||ae.height>re)&&(G=re/Math.max(ae.width,ae.height)),G<1)if(typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Q instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Q instanceof ImageBitmap||typeof VideoFrame<"u"&&Q instanceof VideoFrame){const ce=Math.floor(G*ae.width),Ae=Math.floor(G*ae.height);d===void 0&&(d=x(ce,Ae));const De=I?x(ce,Ae):d;return De.width=ce,De.height=Ae,De.getContext("2d").drawImage(Q,0,0,ce,Ae),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ae.width+"x"+ae.height+") to ("+ce+"x"+Ae+")."),De}else return"data"in Q&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ae.width+"x"+ae.height+")."),Q;return Q}function v(Q){return Q.generateMipmaps}function y(Q){t.generateMipmap(Q)}function S(Q){return Q.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:Q.isWebGL3DRenderTarget?t.TEXTURE_3D:Q.isWebGLArrayRenderTarget||Q.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function E(Q,I,re,G,ae=!1){if(Q!==null){if(t[Q]!==void 0)return t[Q];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Q+"'")}let ce=I;if(I===t.RED&&(re===t.FLOAT&&(ce=t.R32F),re===t.HALF_FLOAT&&(ce=t.R16F),re===t.UNSIGNED_BYTE&&(ce=t.R8)),I===t.RED_INTEGER&&(re===t.UNSIGNED_BYTE&&(ce=t.R8UI),re===t.UNSIGNED_SHORT&&(ce=t.R16UI),re===t.UNSIGNED_INT&&(ce=t.R32UI),re===t.BYTE&&(ce=t.R8I),re===t.SHORT&&(ce=t.R16I),re===t.INT&&(ce=t.R32I)),I===t.RG&&(re===t.FLOAT&&(ce=t.RG32F),re===t.HALF_FLOAT&&(ce=t.RG16F),re===t.UNSIGNED_BYTE&&(ce=t.RG8)),I===t.RG_INTEGER&&(re===t.UNSIGNED_BYTE&&(ce=t.RG8UI),re===t.UNSIGNED_SHORT&&(ce=t.RG16UI),re===t.UNSIGNED_INT&&(ce=t.RG32UI),re===t.BYTE&&(ce=t.RG8I),re===t.SHORT&&(ce=t.RG16I),re===t.INT&&(ce=t.RG32I)),I===t.RGB_INTEGER&&(re===t.UNSIGNED_BYTE&&(ce=t.RGB8UI),re===t.UNSIGNED_SHORT&&(ce=t.RGB16UI),re===t.UNSIGNED_INT&&(ce=t.RGB32UI),re===t.BYTE&&(ce=t.RGB8I),re===t.SHORT&&(ce=t.RGB16I),re===t.INT&&(ce=t.RGB32I)),I===t.RGBA_INTEGER&&(re===t.UNSIGNED_BYTE&&(ce=t.RGBA8UI),re===t.UNSIGNED_SHORT&&(ce=t.RGBA16UI),re===t.UNSIGNED_INT&&(ce=t.RGBA32UI),re===t.BYTE&&(ce=t.RGBA8I),re===t.SHORT&&(ce=t.RGBA16I),re===t.INT&&(ce=t.RGBA32I)),I===t.RGB&&re===t.UNSIGNED_INT_5_9_9_9_REV&&(ce=t.RGB9_E5),I===t.RGBA){const Ae=ae?Zx:hn.getTransfer(G);re===t.FLOAT&&(ce=t.RGBA32F),re===t.HALF_FLOAT&&(ce=t.RGBA16F),re===t.UNSIGNED_BYTE&&(ce=Ae===_n?t.SRGB8_ALPHA8:t.RGBA8),re===t.UNSIGNED_SHORT_4_4_4_4&&(ce=t.RGBA4),re===t.UNSIGNED_SHORT_5_5_5_1&&(ce=t.RGB5_A1)}return(ce===t.R16F||ce===t.R32F||ce===t.RG16F||ce===t.RG32F||ce===t.RGBA16F||ce===t.RGBA32F)&&e.get("EXT_color_buffer_float"),ce}function C(Q,I){let re;return Q?I===null||I===td||I===jm?re=t.DEPTH24_STENCIL8:I===Ga?re=t.DEPTH32F_STENCIL8:I===Fm&&(re=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):I===null||I===td||I===jm?re=t.DEPTH_COMPONENT24:I===Ga?re=t.DEPTH_COMPONENT32F:I===Fm&&(re=t.DEPTH_COMPONENT16),re}function A(Q,I){return v(Q)===!0||Q.isFramebufferTexture&&Q.minFilter!==Co&&Q.minFilter!==na?Math.log2(Math.max(I.width,I.height))+1:Q.mipmaps!==void 0&&Q.mipmaps.length>0?Q.mipmaps.length:Q.isCompressedTexture&&Array.isArray(Q.image)?I.mipmaps.length:1}function T(Q){const I=Q.target;I.removeEventListener("dispose",T),R(I),I.isVideoTexture&&u.delete(I)}function k(Q){const I=Q.target;I.removeEventListener("dispose",k),M(I)}function R(Q){const I=r.get(Q);if(I.__webglInit===void 0)return;const re=Q.source,G=p.get(re);if(G){const ae=G[I.__cacheKey];ae.usedTimes--,ae.usedTimes===0&&P(Q),Object.keys(G).length===0&&p.delete(re)}r.remove(Q)}function P(Q){const I=r.get(Q);t.deleteTexture(I.__webglTexture);const re=Q.source,G=p.get(re);delete G[I.__cacheKey],o.memory.textures--}function M(Q){const I=r.get(Q);if(Q.depthTexture&&(Q.depthTexture.dispose(),r.remove(Q.depthTexture)),Q.isWebGLCubeRenderTarget)for(let G=0;G<6;G++){if(Array.isArray(I.__webglFramebuffer[G]))for(let ae=0;ae<I.__webglFramebuffer[G].length;ae++)t.deleteFramebuffer(I.__webglFramebuffer[G][ae]);else t.deleteFramebuffer(I.__webglFramebuffer[G]);I.__webglDepthbuffer&&t.deleteRenderbuffer(I.__webglDepthbuffer[G])}else{if(Array.isArray(I.__webglFramebuffer))for(let G=0;G<I.__webglFramebuffer.length;G++)t.deleteFramebuffer(I.__webglFramebuffer[G]);else t.deleteFramebuffer(I.__webglFramebuffer);if(I.__webglDepthbuffer&&t.deleteRenderbuffer(I.__webglDepthbuffer),I.__webglMultisampledFramebuffer&&t.deleteFramebuffer(I.__webglMultisampledFramebuffer),I.__webglColorRenderbuffer)for(let G=0;G<I.__webglColorRenderbuffer.length;G++)I.__webglColorRenderbuffer[G]&&t.deleteRenderbuffer(I.__webglColorRenderbuffer[G]);I.__webglDepthRenderbuffer&&t.deleteRenderbuffer(I.__webglDepthRenderbuffer)}const re=Q.textures;for(let G=0,ae=re.length;G<ae;G++){const ce=r.get(re[G]);ce.__webglTexture&&(t.deleteTexture(ce.__webglTexture),o.memory.textures--),r.remove(re[G])}r.remove(Q)}let L=0;function z(){L=0}function H(){const Q=L;return Q>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Q+" texture units while this GPU supports only "+i.maxTextures),L+=1,Q}function B(Q){const I=[];return I.push(Q.wrapS),I.push(Q.wrapT),I.push(Q.wrapR||0),I.push(Q.magFilter),I.push(Q.minFilter),I.push(Q.anisotropy),I.push(Q.internalFormat),I.push(Q.format),I.push(Q.type),I.push(Q.generateMipmaps),I.push(Q.premultiplyAlpha),I.push(Q.flipY),I.push(Q.unpackAlignment),I.push(Q.colorSpace),I.join()}function K(Q,I){const re=r.get(Q);if(Q.isVideoTexture&&Ne(Q),Q.isRenderTargetTexture===!1&&Q.version>0&&re.__version!==Q.version){const G=Q.image;if(G===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(G.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ne(re,Q,I);return}}n.bindTexture(t.TEXTURE_2D,re.__webglTexture,t.TEXTURE0+I)}function q(Q,I){const re=r.get(Q);if(Q.version>0&&re.__version!==Q.version){ne(re,Q,I);return}n.bindTexture(t.TEXTURE_2D_ARRAY,re.__webglTexture,t.TEXTURE0+I)}function ee(Q,I){const re=r.get(Q);if(Q.version>0&&re.__version!==Q.version){ne(re,Q,I);return}n.bindTexture(t.TEXTURE_3D,re.__webglTexture,t.TEXTURE0+I)}function O(Q,I){const re=r.get(Q);if(Q.version>0&&re.__version!==Q.version){Z(re,Q,I);return}n.bindTexture(t.TEXTURE_CUBE_MAP,re.__webglTexture,t.TEXTURE0+I)}const F={[mC]:t.REPEAT,[Ru]:t.CLAMP_TO_EDGE,[gC]:t.MIRRORED_REPEAT},D={[Co]:t.NEAREST,[oce]:t.NEAREST_MIPMAP_NEAREST,[Zy]:t.NEAREST_MIPMAP_LINEAR,[na]:t.LINEAR,[m1]:t.LINEAR_MIPMAP_NEAREST,[Nu]:t.LINEAR_MIPMAP_LINEAR},ie={[dce]:t.NEVER,[yce]:t.ALWAYS,[fce]:t.LESS,[FB]:t.LEQUAL,[hce]:t.EQUAL,[gce]:t.GEQUAL,[pce]:t.GREATER,[mce]:t.NOTEQUAL};function $(Q,I){if(I.type===Ga&&e.has("OES_texture_float_linear")===!1&&(I.magFilter===na||I.magFilter===m1||I.magFilter===Zy||I.magFilter===Nu||I.minFilter===na||I.minFilter===m1||I.minFilter===Zy||I.minFilter===Nu)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(Q,t.TEXTURE_WRAP_S,F[I.wrapS]),t.texParameteri(Q,t.TEXTURE_WRAP_T,F[I.wrapT]),(Q===t.TEXTURE_3D||Q===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Q,t.TEXTURE_WRAP_R,F[I.wrapR]),t.texParameteri(Q,t.TEXTURE_MAG_FILTER,D[I.magFilter]),t.texParameteri(Q,t.TEXTURE_MIN_FILTER,D[I.minFilter]),I.compareFunction&&(t.texParameteri(Q,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Q,t.TEXTURE_COMPARE_FUNC,ie[I.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(I.magFilter===Co||I.minFilter!==Zy&&I.minFilter!==Nu||I.type===Ga&&e.has("OES_texture_float_linear")===!1)return;if(I.anisotropy>1||r.get(I).__currentAnisotropy){const re=e.get("EXT_texture_filter_anisotropic");t.texParameterf(Q,re.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,i.getMaxAnisotropy())),r.get(I).__currentAnisotropy=I.anisotropy}}}function U(Q,I){let re=!1;Q.__webglInit===void 0&&(Q.__webglInit=!0,I.addEventListener("dispose",T));const G=I.source;let ae=p.get(G);ae===void 0&&(ae={},p.set(G,ae));const ce=B(I);if(ce!==Q.__cacheKey){ae[ce]===void 0&&(ae[ce]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,re=!0),ae[ce].usedTimes++;const Ae=ae[Q.__cacheKey];Ae!==void 0&&(ae[Q.__cacheKey].usedTimes--,Ae.usedTimes===0&&P(I)),Q.__cacheKey=ce,Q.__webglTexture=ae[ce].texture}return re}function Y(Q,I,re){return Math.floor(Math.floor(Q/re)/I)}function oe(Q,I,re,G){const ce=Q.updateRanges;if(ce.length===0)n.texSubImage2D(t.TEXTURE_2D,0,0,0,I.width,I.height,re,G,I.data);else{ce.sort((ge,be)=>ge.start-be.start);let Ae=0;for(let ge=1;ge<ce.length;ge++){const be=ce[Ae],Oe=ce[ge],Xe=be.start+be.count,Ge=Y(Oe.start,I.width,4),wt=Y(be.start,I.width,4);Oe.start<=Xe+1&&Ge===wt&&Y(Oe.start+Oe.count-1,I.width,4)===Ge?be.count=Math.max(be.count,Oe.start+Oe.count-be.start):(++Ae,ce[Ae]=Oe)}ce.length=Ae+1;const De=t.getParameter(t.UNPACK_ROW_LENGTH),Je=t.getParameter(t.UNPACK_SKIP_PIXELS),me=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,I.width);for(let ge=0,be=ce.length;ge<be;ge++){const Oe=ce[ge],Xe=Math.floor(Oe.start/4),Ge=Math.ceil(Oe.count/4),wt=Xe%I.width,de=Math.floor(Xe/I.width),ot=Ge,We=1;t.pixelStorei(t.UNPACK_SKIP_PIXELS,wt),t.pixelStorei(t.UNPACK_SKIP_ROWS,de),n.texSubImage2D(t.TEXTURE_2D,0,wt,de,ot,We,re,G,I.data)}Q.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,De),t.pixelStorei(t.UNPACK_SKIP_PIXELS,Je),t.pixelStorei(t.UNPACK_SKIP_ROWS,me)}}function ne(Q,I,re){let G=t.TEXTURE_2D;(I.isDataArrayTexture||I.isCompressedArrayTexture)&&(G=t.TEXTURE_2D_ARRAY),I.isData3DTexture&&(G=t.TEXTURE_3D);const ae=U(Q,I),ce=I.source;n.bindTexture(G,Q.__webglTexture,t.TEXTURE0+re);const Ae=r.get(ce);if(ce.version!==Ae.__version||ae===!0){n.activeTexture(t.TEXTURE0+re);const De=hn.getPrimaries(hn.workingColorSpace),Je=I.colorSpace===Jl?null:hn.getPrimaries(I.colorSpace),me=I.colorSpace===Jl||De===Je?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,I.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,I.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,me);let ge=w(I.image,!1,i.maxTextureSize);ge=Me(I,ge);const be=s.convert(I.format,I.colorSpace),Oe=s.convert(I.type);let Xe=E(I.internalFormat,be,Oe,I.colorSpace,I.isVideoTexture);$(G,I);let Ge;const wt=I.mipmaps,de=I.isVideoTexture!==!0,ot=Ae.__version===void 0||ae===!0,We=ce.dataReady,rt=A(I,ge);if(I.isDepthTexture)Xe=C(I.format===zm,I.type),ot&&(de?n.texStorage2D(t.TEXTURE_2D,1,Xe,ge.width,ge.height):n.texImage2D(t.TEXTURE_2D,0,Xe,ge.width,ge.height,0,be,Oe,null));else if(I.isDataTexture)if(wt.length>0){de&&ot&&n.texStorage2D(t.TEXTURE_2D,rt,Xe,wt[0].width,wt[0].height);for(let je=0,ke=wt.length;je<ke;je++)Ge=wt[je],de?We&&n.texSubImage2D(t.TEXTURE_2D,je,0,0,Ge.width,Ge.height,be,Oe,Ge.data):n.texImage2D(t.TEXTURE_2D,je,Xe,Ge.width,Ge.height,0,be,Oe,Ge.data);I.generateMipmaps=!1}else de?(ot&&n.texStorage2D(t.TEXTURE_2D,rt,Xe,ge.width,ge.height),We&&oe(I,ge,be,Oe)):n.texImage2D(t.TEXTURE_2D,0,Xe,ge.width,ge.height,0,be,Oe,ge.data);else if(I.isCompressedTexture)if(I.isCompressedArrayTexture){de&&ot&&n.texStorage3D(t.TEXTURE_2D_ARRAY,rt,Xe,wt[0].width,wt[0].height,ge.depth);for(let je=0,ke=wt.length;je<ke;je++)if(Ge=wt[je],I.format!==So)if(be!==null)if(de){if(We)if(I.layerUpdates.size>0){const Ue=hI(Ge.width,Ge.height,I.format,I.type);for(const tt of I.layerUpdates){const pt=Ge.data.subarray(tt*Ue/Ge.data.BYTES_PER_ELEMENT,(tt+1)*Ue/Ge.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,je,0,0,tt,Ge.width,Ge.height,1,be,pt)}I.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,je,0,0,0,Ge.width,Ge.height,ge.depth,be,Ge.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,je,Xe,Ge.width,Ge.height,ge.depth,0,Ge.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else de?We&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,je,0,0,0,Ge.width,Ge.height,ge.depth,be,Oe,Ge.data):n.texImage3D(t.TEXTURE_2D_ARRAY,je,Xe,Ge.width,Ge.height,ge.depth,0,be,Oe,Ge.data)}else{de&&ot&&n.texStorage2D(t.TEXTURE_2D,rt,Xe,wt[0].width,wt[0].height);for(let je=0,ke=wt.length;je<ke;je++)Ge=wt[je],I.format!==So?be!==null?de?We&&n.compressedTexSubImage2D(t.TEXTURE_2D,je,0,0,Ge.width,Ge.height,be,Ge.data):n.compressedTexImage2D(t.TEXTURE_2D,je,Xe,Ge.width,Ge.height,0,Ge.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):de?We&&n.texSubImage2D(t.TEXTURE_2D,je,0,0,Ge.width,Ge.height,be,Oe,Ge.data):n.texImage2D(t.TEXTURE_2D,je,Xe,Ge.width,Ge.height,0,be,Oe,Ge.data)}else if(I.isDataArrayTexture)if(de){if(ot&&n.texStorage3D(t.TEXTURE_2D_ARRAY,rt,Xe,ge.width,ge.height,ge.depth),We)if(I.layerUpdates.size>0){const je=hI(ge.width,ge.height,I.format,I.type);for(const ke of I.layerUpdates){const Ue=ge.data.subarray(ke*je/ge.data.BYTES_PER_ELEMENT,(ke+1)*je/ge.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,ke,ge.width,ge.height,1,be,Oe,Ue)}I.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,ge.width,ge.height,ge.depth,be,Oe,ge.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,Xe,ge.width,ge.height,ge.depth,0,be,Oe,ge.data);else if(I.isData3DTexture)de?(ot&&n.texStorage3D(t.TEXTURE_3D,rt,Xe,ge.width,ge.height,ge.depth),We&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,ge.width,ge.height,ge.depth,be,Oe,ge.data)):n.texImage3D(t.TEXTURE_3D,0,Xe,ge.width,ge.height,ge.depth,0,be,Oe,ge.data);else if(I.isFramebufferTexture){if(ot)if(de)n.texStorage2D(t.TEXTURE_2D,rt,Xe,ge.width,ge.height);else{let je=ge.width,ke=ge.height;for(let Ue=0;Ue<rt;Ue++)n.texImage2D(t.TEXTURE_2D,Ue,Xe,je,ke,0,be,Oe,null),je>>=1,ke>>=1}}else if(wt.length>0){if(de&&ot){const je=st(wt[0]);n.texStorage2D(t.TEXTURE_2D,rt,Xe,je.width,je.height)}for(let je=0,ke=wt.length;je<ke;je++)Ge=wt[je],de?We&&n.texSubImage2D(t.TEXTURE_2D,je,0,0,be,Oe,Ge):n.texImage2D(t.TEXTURE_2D,je,Xe,be,Oe,Ge);I.generateMipmaps=!1}else if(de){if(ot){const je=st(ge);n.texStorage2D(t.TEXTURE_2D,rt,Xe,je.width,je.height)}We&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,be,Oe,ge)}else n.texImage2D(t.TEXTURE_2D,0,Xe,be,Oe,ge);v(I)&&y(G),Ae.__version=ce.version,I.onUpdate&&I.onUpdate(I)}Q.__version=I.version}function Z(Q,I,re){if(I.image.length!==6)return;const G=U(Q,I),ae=I.source;n.bindTexture(t.TEXTURE_CUBE_MAP,Q.__webglTexture,t.TEXTURE0+re);const ce=r.get(ae);if(ae.version!==ce.__version||G===!0){n.activeTexture(t.TEXTURE0+re);const Ae=hn.getPrimaries(hn.workingColorSpace),De=I.colorSpace===Jl?null:hn.getPrimaries(I.colorSpace),Je=I.colorSpace===Jl||Ae===De?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,I.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,I.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);const me=I.isCompressedTexture||I.image[0].isCompressedTexture,ge=I.image[0]&&I.image[0].isDataTexture,be=[];for(let ke=0;ke<6;ke++)!me&&!ge?be[ke]=w(I.image[ke],!0,i.maxCubemapSize):be[ke]=ge?I.image[ke].image:I.image[ke],be[ke]=Me(I,be[ke]);const Oe=be[0],Xe=s.convert(I.format,I.colorSpace),Ge=s.convert(I.type),wt=E(I.internalFormat,Xe,Ge,I.colorSpace),de=I.isVideoTexture!==!0,ot=ce.__version===void 0||G===!0,We=ae.dataReady;let rt=A(I,Oe);$(t.TEXTURE_CUBE_MAP,I);let je;if(me){de&&ot&&n.texStorage2D(t.TEXTURE_CUBE_MAP,rt,wt,Oe.width,Oe.height);for(let ke=0;ke<6;ke++){je=be[ke].mipmaps;for(let Ue=0;Ue<je.length;Ue++){const tt=je[Ue];I.format!==So?Xe!==null?de?We&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ue,0,0,tt.width,tt.height,Xe,tt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ue,wt,tt.width,tt.height,0,tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):de?We&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ue,0,0,tt.width,tt.height,Xe,Ge,tt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ue,wt,tt.width,tt.height,0,Xe,Ge,tt.data)}}}else{if(je=I.mipmaps,de&&ot){je.length>0&&rt++;const ke=st(be[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,rt,wt,ke.width,ke.height)}for(let ke=0;ke<6;ke++)if(ge){de?We&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,0,0,be[ke].width,be[ke].height,Xe,Ge,be[ke].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,wt,be[ke].width,be[ke].height,0,Xe,Ge,be[ke].data);for(let Ue=0;Ue<je.length;Ue++){const pt=je[Ue].image[ke].image;de?We&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ue+1,0,0,pt.width,pt.height,Xe,Ge,pt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ue+1,wt,pt.width,pt.height,0,Xe,Ge,pt.data)}}else{de?We&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,0,0,Xe,Ge,be[ke]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,wt,Xe,Ge,be[ke]);for(let Ue=0;Ue<je.length;Ue++){const tt=je[Ue];de?We&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ue+1,0,0,Xe,Ge,tt.image[ke]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ue+1,wt,Xe,Ge,tt.image[ke])}}}v(I)&&y(t.TEXTURE_CUBE_MAP),ce.__version=ae.version,I.onUpdate&&I.onUpdate(I)}Q.__version=I.version}function fe(Q,I,re,G,ae,ce){const Ae=s.convert(re.format,re.colorSpace),De=s.convert(re.type),Je=E(re.internalFormat,Ae,De,re.colorSpace),me=r.get(I),ge=r.get(re);if(ge.__renderTarget=I,!me.__hasExternalTextures){const be=Math.max(1,I.width>>ce),Oe=Math.max(1,I.height>>ce);ae===t.TEXTURE_3D||ae===t.TEXTURE_2D_ARRAY?n.texImage3D(ae,ce,Je,be,Oe,I.depth,0,Ae,De,null):n.texImage2D(ae,ce,Je,be,Oe,0,Ae,De,null)}n.bindFramebuffer(t.FRAMEBUFFER,Q),St(I)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,G,ae,ge.__webglTexture,0,Qe(I)):(ae===t.TEXTURE_2D||ae>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&ae<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,G,ae,ge.__webglTexture,ce),n.bindFramebuffer(t.FRAMEBUFFER,null)}function we(Q,I,re){if(t.bindRenderbuffer(t.RENDERBUFFER,Q),I.depthBuffer){const G=I.depthTexture,ae=G&&G.isDepthTexture?G.type:null,ce=C(I.stencilBuffer,ae),Ae=I.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,De=Qe(I);St(I)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,De,ce,I.width,I.height):re?t.renderbufferStorageMultisample(t.RENDERBUFFER,De,ce,I.width,I.height):t.renderbufferStorage(t.RENDERBUFFER,ce,I.width,I.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ae,t.RENDERBUFFER,Q)}else{const G=I.textures;for(let ae=0;ae<G.length;ae++){const ce=G[ae],Ae=s.convert(ce.format,ce.colorSpace),De=s.convert(ce.type),Je=E(ce.internalFormat,Ae,De,ce.colorSpace),me=Qe(I);re&&St(I)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,me,Je,I.width,I.height):St(I)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,me,Je,I.width,I.height):t.renderbufferStorage(t.RENDERBUFFER,Je,I.width,I.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function xe(Q,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,Q),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const G=r.get(I.depthTexture);G.__renderTarget=I,(!G.__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),K(I.depthTexture,0);const ae=G.__webglTexture,ce=Qe(I);if(I.depthTexture.format===Um)St(I)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ae,0,ce):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ae,0);else if(I.depthTexture.format===zm)St(I)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ae,0,ce):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ae,0);else throw new Error("Unknown depthTexture format")}function Ve(Q){const I=r.get(Q),re=Q.isWebGLCubeRenderTarget===!0;if(I.__boundDepthTexture!==Q.depthTexture){const G=Q.depthTexture;if(I.__depthDisposeCallback&&I.__depthDisposeCallback(),G){const ae=()=>{delete I.__boundDepthTexture,delete I.__depthDisposeCallback,G.removeEventListener("dispose",ae)};G.addEventListener("dispose",ae),I.__depthDisposeCallback=ae}I.__boundDepthTexture=G}if(Q.depthTexture&&!I.__autoAllocateDepthBuffer){if(re)throw new Error("target.depthTexture not supported in Cube render targets");const G=Q.texture.mipmaps;G&&G.length>0?xe(I.__webglFramebuffer[0],Q):xe(I.__webglFramebuffer,Q)}else if(re){I.__webglDepthbuffer=[];for(let G=0;G<6;G++)if(n.bindFramebuffer(t.FRAMEBUFFER,I.__webglFramebuffer[G]),I.__webglDepthbuffer[G]===void 0)I.__webglDepthbuffer[G]=t.createRenderbuffer(),we(I.__webglDepthbuffer[G],Q,!1);else{const ae=Q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ce=I.__webglDepthbuffer[G];t.bindRenderbuffer(t.RENDERBUFFER,ce),t.framebufferRenderbuffer(t.FRAMEBUFFER,ae,t.RENDERBUFFER,ce)}}else{const G=Q.texture.mipmaps;if(G&&G.length>0?n.bindFramebuffer(t.FRAMEBUFFER,I.__webglFramebuffer[0]):n.bindFramebuffer(t.FRAMEBUFFER,I.__webglFramebuffer),I.__webglDepthbuffer===void 0)I.__webglDepthbuffer=t.createRenderbuffer(),we(I.__webglDepthbuffer,Q,!1);else{const ae=Q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ce=I.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,ce),t.framebufferRenderbuffer(t.FRAMEBUFFER,ae,t.RENDERBUFFER,ce)}}n.bindFramebuffer(t.FRAMEBUFFER,null)}function Pe(Q,I,re){const G=r.get(Q);I!==void 0&&fe(G.__webglFramebuffer,Q,Q.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),re!==void 0&&Ve(Q)}function et(Q){const I=Q.texture,re=r.get(Q),G=r.get(I);Q.addEventListener("dispose",k);const ae=Q.textures,ce=Q.isWebGLCubeRenderTarget===!0,Ae=ae.length>1;if(Ae||(G.__webglTexture===void 0&&(G.__webglTexture=t.createTexture()),G.__version=I.version,o.memory.textures++),ce){re.__webglFramebuffer=[];for(let De=0;De<6;De++)if(I.mipmaps&&I.mipmaps.length>0){re.__webglFramebuffer[De]=[];for(let Je=0;Je<I.mipmaps.length;Je++)re.__webglFramebuffer[De][Je]=t.createFramebuffer()}else re.__webglFramebuffer[De]=t.createFramebuffer()}else{if(I.mipmaps&&I.mipmaps.length>0){re.__webglFramebuffer=[];for(let De=0;De<I.mipmaps.length;De++)re.__webglFramebuffer[De]=t.createFramebuffer()}else re.__webglFramebuffer=t.createFramebuffer();if(Ae)for(let De=0,Je=ae.length;De<Je;De++){const me=r.get(ae[De]);me.__webglTexture===void 0&&(me.__webglTexture=t.createTexture(),o.memory.textures++)}if(Q.samples>0&&St(Q)===!1){re.__webglMultisampledFramebuffer=t.createFramebuffer(),re.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,re.__webglMultisampledFramebuffer);for(let De=0;De<ae.length;De++){const Je=ae[De];re.__webglColorRenderbuffer[De]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,re.__webglColorRenderbuffer[De]);const me=s.convert(Je.format,Je.colorSpace),ge=s.convert(Je.type),be=E(Je.internalFormat,me,ge,Je.colorSpace,Q.isXRRenderTarget===!0),Oe=Qe(Q);t.renderbufferStorageMultisample(t.RENDERBUFFER,Oe,be,Q.width,Q.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+De,t.RENDERBUFFER,re.__webglColorRenderbuffer[De])}t.bindRenderbuffer(t.RENDERBUFFER,null),Q.depthBuffer&&(re.__webglDepthRenderbuffer=t.createRenderbuffer(),we(re.__webglDepthRenderbuffer,Q,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(ce){n.bindTexture(t.TEXTURE_CUBE_MAP,G.__webglTexture),$(t.TEXTURE_CUBE_MAP,I);for(let De=0;De<6;De++)if(I.mipmaps&&I.mipmaps.length>0)for(let Je=0;Je<I.mipmaps.length;Je++)fe(re.__webglFramebuffer[De][Je],Q,I,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+De,Je);else fe(re.__webglFramebuffer[De],Q,I,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+De,0);v(I)&&y(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Ae){for(let De=0,Je=ae.length;De<Je;De++){const me=ae[De],ge=r.get(me);n.bindTexture(t.TEXTURE_2D,ge.__webglTexture),$(t.TEXTURE_2D,me),fe(re.__webglFramebuffer,Q,me,t.COLOR_ATTACHMENT0+De,t.TEXTURE_2D,0),v(me)&&y(t.TEXTURE_2D)}n.unbindTexture()}else{let De=t.TEXTURE_2D;if((Q.isWebGL3DRenderTarget||Q.isWebGLArrayRenderTarget)&&(De=Q.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(De,G.__webglTexture),$(De,I),I.mipmaps&&I.mipmaps.length>0)for(let Je=0;Je<I.mipmaps.length;Je++)fe(re.__webglFramebuffer[Je],Q,I,t.COLOR_ATTACHMENT0,De,Je);else fe(re.__webglFramebuffer,Q,I,t.COLOR_ATTACHMENT0,De,0);v(I)&&y(De),n.unbindTexture()}Q.depthBuffer&&Ve(Q)}function te(Q){const I=Q.textures;for(let re=0,G=I.length;re<G;re++){const ae=I[re];if(v(ae)){const ce=S(Q),Ae=r.get(ae).__webglTexture;n.bindTexture(ce,Ae),y(ce),n.unbindTexture()}}}const ft=[],Ye=[];function ht(Q){if(Q.samples>0){if(St(Q)===!1){const I=Q.textures,re=Q.width,G=Q.height;let ae=t.COLOR_BUFFER_BIT;const ce=Q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ae=r.get(Q),De=I.length>1;if(De)for(let me=0;me<I.length;me++)n.bindFramebuffer(t.FRAMEBUFFER,Ae.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+me,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ae.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+me,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ae.__webglMultisampledFramebuffer);const Je=Q.texture.mipmaps;Je&&Je.length>0?n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ae.__webglFramebuffer[0]):n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ae.__webglFramebuffer);for(let me=0;me<I.length;me++){if(Q.resolveDepthBuffer&&(Q.depthBuffer&&(ae|=t.DEPTH_BUFFER_BIT),Q.stencilBuffer&&Q.resolveStencilBuffer&&(ae|=t.STENCIL_BUFFER_BIT)),De){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ae.__webglColorRenderbuffer[me]);const ge=r.get(I[me]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,ge,0)}t.blitFramebuffer(0,0,re,G,0,0,re,G,ae,t.NEAREST),l===!0&&(ft.length=0,Ye.length=0,ft.push(t.COLOR_ATTACHMENT0+me),Q.depthBuffer&&Q.resolveDepthBuffer===!1&&(ft.push(ce),Ye.push(ce),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,Ye)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,ft))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),De)for(let me=0;me<I.length;me++){n.bindFramebuffer(t.FRAMEBUFFER,Ae.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+me,t.RENDERBUFFER,Ae.__webglColorRenderbuffer[me]);const ge=r.get(I[me]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ae.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+me,t.TEXTURE_2D,ge,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ae.__webglMultisampledFramebuffer)}else if(Q.depthBuffer&&Q.resolveDepthBuffer===!1&&l){const I=Q.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[I])}}}function Qe(Q){return Math.min(i.maxSamples,Q.samples)}function St(Q){const I=r.get(Q);return Q.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&I.__useRenderToTexture!==!1}function Ne(Q){const I=o.render.frame;u.get(Q)!==I&&(u.set(Q,I),Q.update())}function Me(Q,I){const re=Q.colorSpace,G=Q.format,ae=Q.type;return Q.isCompressedTexture===!0||Q.isVideoTexture===!0||re!==hh&&re!==Jl&&(hn.getTransfer(re)===_n?(G!==So||ae!==ua)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",re)),I}function st(Q){return typeof HTMLImageElement<"u"&&Q instanceof HTMLImageElement?(c.width=Q.naturalWidth||Q.width,c.height=Q.naturalHeight||Q.height):typeof VideoFrame<"u"&&Q instanceof VideoFrame?(c.width=Q.displayWidth,c.height=Q.displayHeight):(c.width=Q.width,c.height=Q.height),c}this.allocateTextureUnit=H,this.resetTextureUnits=z,this.setTexture2D=K,this.setTexture2DArray=q,this.setTexture3D=ee,this.setTextureCube=O,this.rebindTextures=Pe,this.setupRenderTarget=et,this.updateRenderTargetMipmap=te,this.updateMultisampleRenderTarget=ht,this.setupDepthRenderbuffer=Ve,this.setupFrameBufferTexture=fe,this.useMultisampledRTT=St}function Ppe(t,e){function n(r,i=Jl){let s;const o=hn.getTransfer(i);if(r===ua)return t.UNSIGNED_BYTE;if(r===AA)return t.UNSIGNED_SHORT_4_4_4_4;if(r===RA)return t.UNSIGNED_SHORT_5_5_5_1;if(r===kB)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===RB)return t.BYTE;if(r===NB)return t.SHORT;if(r===Fm)return t.UNSIGNED_SHORT;if(r===TA)return t.INT;if(r===td)return t.UNSIGNED_INT;if(r===Ga)return t.FLOAT;if(r===Cg)return t.HALF_FLOAT;if(r===PB)return t.ALPHA;if(r===DB)return t.RGB;if(r===So)return t.RGBA;if(r===Um)return t.DEPTH_COMPONENT;if(r===zm)return t.DEPTH_STENCIL;if(r===IB)return t.RED;if(r===NA)return t.RED_INTEGER;if(r===LB)return t.RG;if(r===kA)return t.RG_INTEGER;if(r===PA)return t.RGBA_INTEGER;if(r===rx||r===ix||r===sx||r===ox)if(o===_n)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===rx)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===ix)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===sx)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===ox)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===rx)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===ix)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===sx)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===ox)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===yC||r===vC||r===xC||r===wC)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===yC)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===vC)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===xC)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===wC)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===bC||r===SC||r===_C)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===bC||r===SC)return o===_n?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===_C)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===EC||r===CC||r===MC||r===TC||r===AC||r===RC||r===NC||r===kC||r===PC||r===DC||r===IC||r===LC||r===OC||r===FC)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===EC)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===CC)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===MC)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===TC)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===AC)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===RC)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===NC)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===kC)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===PC)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===DC)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===IC)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===LC)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===OC)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===FC)return o===_n?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===ax||r===jC||r===UC)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===ax)return o===_n?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===jC)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===UC)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===OB||r===zC||r===BC||r===HC)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===ax)return s.COMPRESSED_RED_RGTC1_EXT;if(r===zC)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===BC)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===HC)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===jm?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const Dpe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Ipe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Lpe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new qi,s=e.properties.get(i);s.__webglTexture=n.texture,(n.depthNear!==r.depthNear||n.depthFar!==r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new Dc({vertexShader:Dpe,fragmentShader:Ipe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Ir(new Cw(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Ope extends Lh{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,p=null,m=null,x=null;const w=new Lpe,v=n.getContextAttributes();let y=null,S=null;const E=[],C=[],A=new bn;let T=null;const k=new Ws;k.viewport=new Kn;const R=new Ws;R.viewport=new Kn;const P=[k,R],M=new rue;let L=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Y){let oe=E[Y];return oe===void 0&&(oe=new j1,E[Y]=oe),oe.getTargetRaySpace()},this.getControllerGrip=function(Y){let oe=E[Y];return oe===void 0&&(oe=new j1,E[Y]=oe),oe.getGripSpace()},this.getHand=function(Y){let oe=E[Y];return oe===void 0&&(oe=new j1,E[Y]=oe),oe.getHandSpace()};function H(Y){const oe=C.indexOf(Y.inputSource);if(oe===-1)return;const ne=E[oe];ne!==void 0&&(ne.update(Y.inputSource,Y.frame,c||o),ne.dispatchEvent({type:Y.type,data:Y.inputSource}))}function B(){i.removeEventListener("select",H),i.removeEventListener("selectstart",H),i.removeEventListener("selectend",H),i.removeEventListener("squeeze",H),i.removeEventListener("squeezestart",H),i.removeEventListener("squeezeend",H),i.removeEventListener("end",B),i.removeEventListener("inputsourceschange",K);for(let Y=0;Y<E.length;Y++){const oe=C[Y];oe!==null&&(C[Y]=null,E[Y].disconnect(oe))}L=null,z=null,w.reset(),e.setRenderTarget(y),m=null,p=null,d=null,i=null,S=null,U.stop(),r.isPresenting=!1,e.setPixelRatio(T),e.setSize(A.width,A.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Y){s=Y,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Y){a=Y,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(Y){c=Y},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return d},this.getFrame=function(){return x},this.getSession=function(){return i},this.setSession=async function(Y){if(i=Y,i!==null){if(y=e.getRenderTarget(),i.addEventListener("select",H),i.addEventListener("selectstart",H),i.addEventListener("selectend",H),i.addEventListener("squeeze",H),i.addEventListener("squeezestart",H),i.addEventListener("squeezeend",H),i.addEventListener("end",B),i.addEventListener("inputsourceschange",K),v.xrCompatible!==!0&&await n.makeXRCompatible(),T=e.getPixelRatio(),e.getSize(A),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let ne=null,Z=null,fe=null;v.depth&&(fe=v.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ne=v.stencil?zm:Um,Z=v.stencil?jm:td);const we={colorFormat:n.RGBA8,depthFormat:fe,scaleFactor:s};d=new XRWebGLBinding(i,n),p=d.createProjectionLayer(we),i.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),S=new nd(p.textureWidth,p.textureHeight,{format:So,type:ua,depthTexture:new qB(p.textureWidth,p.textureHeight,Z,void 0,void 0,void 0,void 0,void 0,void 0,ne),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}else{const ne={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,n,ne),i.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),S=new nd(m.framebufferWidth,m.framebufferHeight,{format:So,type:ua,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),U.setContext(i),U.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function K(Y){for(let oe=0;oe<Y.removed.length;oe++){const ne=Y.removed[oe],Z=C.indexOf(ne);Z>=0&&(C[Z]=null,E[Z].disconnect(ne))}for(let oe=0;oe<Y.added.length;oe++){const ne=Y.added[oe];let Z=C.indexOf(ne);if(Z===-1){for(let we=0;we<E.length;we++)if(we>=C.length){C.push(ne),Z=we;break}else if(C[we]===null){C[we]=ne,Z=we;break}if(Z===-1)break}const fe=E[Z];fe&&fe.connect(ne)}}const q=new Ee,ee=new Ee;function O(Y,oe,ne){q.setFromMatrixPosition(oe.matrixWorld),ee.setFromMatrixPosition(ne.matrixWorld);const Z=q.distanceTo(ee),fe=oe.projectionMatrix.elements,we=ne.projectionMatrix.elements,xe=fe[14]/(fe[10]-1),Ve=fe[14]/(fe[10]+1),Pe=(fe[9]+1)/fe[5],et=(fe[9]-1)/fe[5],te=(fe[8]-1)/fe[0],ft=(we[8]+1)/we[0],Ye=xe*te,ht=xe*ft,Qe=Z/(-te+ft),St=Qe*-te;if(oe.matrixWorld.decompose(Y.position,Y.quaternion,Y.scale),Y.translateX(St),Y.translateZ(Qe),Y.matrixWorld.compose(Y.position,Y.quaternion,Y.scale),Y.matrixWorldInverse.copy(Y.matrixWorld).invert(),fe[10]===-1)Y.projectionMatrix.copy(oe.projectionMatrix),Y.projectionMatrixInverse.copy(oe.projectionMatrixInverse);else{const Ne=xe+Qe,Me=Ve+Qe,st=Ye-St,Q=ht+(Z-St),I=Pe*Ve/Me*Ne,re=et*Ve/Me*Ne;Y.projectionMatrix.makePerspective(st,Q,I,re,Ne,Me),Y.projectionMatrixInverse.copy(Y.projectionMatrix).invert()}}function F(Y,oe){oe===null?Y.matrixWorld.copy(Y.matrix):Y.matrixWorld.multiplyMatrices(oe.matrixWorld,Y.matrix),Y.matrixWorldInverse.copy(Y.matrixWorld).invert()}this.updateCamera=function(Y){if(i===null)return;let oe=Y.near,ne=Y.far;w.texture!==null&&(w.depthNear>0&&(oe=w.depthNear),w.depthFar>0&&(ne=w.depthFar)),M.near=R.near=k.near=oe,M.far=R.far=k.far=ne,(L!==M.near||z!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),L=M.near,z=M.far),k.layers.mask=Y.layers.mask|2,R.layers.mask=Y.layers.mask|4,M.layers.mask=k.layers.mask|R.layers.mask;const Z=Y.parent,fe=M.cameras;F(M,Z);for(let we=0;we<fe.length;we++)F(fe[we],Z);fe.length===2?O(M,k,R):M.projectionMatrix.copy(k.projectionMatrix),D(Y,M,Z)};function D(Y,oe,ne){ne===null?Y.matrix.copy(oe.matrixWorld):(Y.matrix.copy(ne.matrixWorld),Y.matrix.invert(),Y.matrix.multiply(oe.matrixWorld)),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale),Y.updateMatrixWorld(!0),Y.projectionMatrix.copy(oe.projectionMatrix),Y.projectionMatrixInverse.copy(oe.projectionMatrixInverse),Y.isPerspectiveCamera&&(Y.fov=VC*2*Math.atan(1/Y.projectionMatrix.elements[5]),Y.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(Y){l=Y,p!==null&&(p.fixedFoveation=Y),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=Y)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(M)};let ie=null;function $(Y,oe){if(u=oe.getViewerPose(c||o),x=oe,u!==null){const ne=u.views;m!==null&&(e.setRenderTargetFramebuffer(S,m.framebuffer),e.setRenderTarget(S));let Z=!1;ne.length!==M.cameras.length&&(M.cameras.length=0,Z=!0);for(let xe=0;xe<ne.length;xe++){const Ve=ne[xe];let Pe=null;if(m!==null)Pe=m.getViewport(Ve);else{const te=d.getViewSubImage(p,Ve);Pe=te.viewport,xe===0&&(e.setRenderTargetTextures(S,te.colorTexture,te.depthStencilTexture),e.setRenderTarget(S))}let et=P[xe];et===void 0&&(et=new Ws,et.layers.enable(xe),et.viewport=new Kn,P[xe]=et),et.matrix.fromArray(Ve.transform.matrix),et.matrix.decompose(et.position,et.quaternion,et.scale),et.projectionMatrix.fromArray(Ve.projectionMatrix),et.projectionMatrixInverse.copy(et.projectionMatrix).invert(),et.viewport.set(Pe.x,Pe.y,Pe.width,Pe.height),xe===0&&(M.matrix.copy(et.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),Z===!0&&M.cameras.push(et)}const fe=i.enabledFeatures;if(fe&&fe.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&d){const xe=d.getDepthInformation(ne[0]);xe&&xe.isValid&&xe.texture&&w.init(e,xe,i.renderState)}}for(let ne=0;ne<E.length;ne++){const Z=C[ne],fe=E[ne];Z!==null&&fe!==void 0&&fe.update(Z,oe,c||o)}ie&&ie(Y,oe),oe.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:oe}),x=null}const U=new YB;U.setAnimationLoop($),this.setAnimationLoop=function(Y){ie=Y},this.dispose=function(){}}}const pu=new al,Fpe=new Yn;function jpe(t,e){function n(v,y){v.matrixAutoUpdate===!0&&v.updateMatrix(),y.value.copy(v.matrix)}function r(v,y){y.color.getRGB(v.fogColor.value,$B(t)),y.isFog?(v.fogNear.value=y.near,v.fogFar.value=y.far):y.isFogExp2&&(v.fogDensity.value=y.density)}function i(v,y,S,E,C){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(v,y):y.isMeshToonMaterial?(s(v,y),d(v,y)):y.isMeshPhongMaterial?(s(v,y),u(v,y)):y.isMeshStandardMaterial?(s(v,y),p(v,y),y.isMeshPhysicalMaterial&&m(v,y,C)):y.isMeshMatcapMaterial?(s(v,y),x(v,y)):y.isMeshDepthMaterial?s(v,y):y.isMeshDistanceMaterial?(s(v,y),w(v,y)):y.isMeshNormalMaterial?s(v,y):y.isLineBasicMaterial?(o(v,y),y.isLineDashedMaterial&&a(v,y)):y.isPointsMaterial?l(v,y,S,E):y.isSpriteMaterial?c(v,y):y.isShadowMaterial?(v.color.value.copy(y.color),v.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function s(v,y){v.opacity.value=y.opacity,y.color&&v.diffuse.value.copy(y.color),y.emissive&&v.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(v.map.value=y.map,n(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,n(y.alphaMap,v.alphaMapTransform)),y.bumpMap&&(v.bumpMap.value=y.bumpMap,n(y.bumpMap,v.bumpMapTransform),v.bumpScale.value=y.bumpScale,y.side===Gi&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,n(y.normalMap,v.normalMapTransform),v.normalScale.value.copy(y.normalScale),y.side===Gi&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,n(y.displacementMap,v.displacementMapTransform),v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap,n(y.emissiveMap,v.emissiveMapTransform)),y.specularMap&&(v.specularMap.value=y.specularMap,n(y.specularMap,v.specularMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);const S=e.get(y),E=S.envMap,C=S.envMapRotation;E&&(v.envMap.value=E,pu.copy(C),pu.x*=-1,pu.y*=-1,pu.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(pu.y*=-1,pu.z*=-1),v.envMapRotation.value.setFromMatrix4(Fpe.makeRotationFromEuler(pu)),v.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=y.reflectivity,v.ior.value=y.ior,v.refractionRatio.value=y.refractionRatio),y.lightMap&&(v.lightMap.value=y.lightMap,v.lightMapIntensity.value=y.lightMapIntensity,n(y.lightMap,v.lightMapTransform)),y.aoMap&&(v.aoMap.value=y.aoMap,v.aoMapIntensity.value=y.aoMapIntensity,n(y.aoMap,v.aoMapTransform))}function o(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,y.map&&(v.map.value=y.map,n(y.map,v.mapTransform))}function a(v,y){v.dashSize.value=y.dashSize,v.totalSize.value=y.dashSize+y.gapSize,v.scale.value=y.scale}function l(v,y,S,E){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.size.value=y.size*S,v.scale.value=E*.5,y.map&&(v.map.value=y.map,n(y.map,v.uvTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,n(y.alphaMap,v.alphaMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}function c(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.rotation.value=y.rotation,y.map&&(v.map.value=y.map,n(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,n(y.alphaMap,v.alphaMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}function u(v,y){v.specular.value.copy(y.specular),v.shininess.value=Math.max(y.shininess,1e-4)}function d(v,y){y.gradientMap&&(v.gradientMap.value=y.gradientMap)}function p(v,y){v.metalness.value=y.metalness,y.metalnessMap&&(v.metalnessMap.value=y.metalnessMap,n(y.metalnessMap,v.metalnessMapTransform)),v.roughness.value=y.roughness,y.roughnessMap&&(v.roughnessMap.value=y.roughnessMap,n(y.roughnessMap,v.roughnessMapTransform)),y.envMap&&(v.envMapIntensity.value=y.envMapIntensity)}function m(v,y,S){v.ior.value=y.ior,y.sheen>0&&(v.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),v.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(v.sheenColorMap.value=y.sheenColorMap,n(y.sheenColorMap,v.sheenColorMapTransform)),y.sheenRoughnessMap&&(v.sheenRoughnessMap.value=y.sheenRoughnessMap,n(y.sheenRoughnessMap,v.sheenRoughnessMapTransform))),y.clearcoat>0&&(v.clearcoat.value=y.clearcoat,v.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(v.clearcoatMap.value=y.clearcoatMap,n(y.clearcoatMap,v.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,n(y.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(v.clearcoatNormalMap.value=y.clearcoatNormalMap,n(y.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===Gi&&v.clearcoatNormalScale.value.negate())),y.dispersion>0&&(v.dispersion.value=y.dispersion),y.iridescence>0&&(v.iridescence.value=y.iridescence,v.iridescenceIOR.value=y.iridescenceIOR,v.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(v.iridescenceMap.value=y.iridescenceMap,n(y.iridescenceMap,v.iridescenceMapTransform)),y.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=y.iridescenceThicknessMap,n(y.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),y.transmission>0&&(v.transmission.value=y.transmission,v.transmissionSamplerMap.value=S.texture,v.transmissionSamplerSize.value.set(S.width,S.height),y.transmissionMap&&(v.transmissionMap.value=y.transmissionMap,n(y.transmissionMap,v.transmissionMapTransform)),v.thickness.value=y.thickness,y.thicknessMap&&(v.thicknessMap.value=y.thicknessMap,n(y.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=y.attenuationDistance,v.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(v.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(v.anisotropyMap.value=y.anisotropyMap,n(y.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=y.specularIntensity,v.specularColor.value.copy(y.specularColor),y.specularColorMap&&(v.specularColorMap.value=y.specularColorMap,n(y.specularColorMap,v.specularColorMapTransform)),y.specularIntensityMap&&(v.specularIntensityMap.value=y.specularIntensityMap,n(y.specularIntensityMap,v.specularIntensityMapTransform))}function x(v,y){y.matcap&&(v.matcap.value=y.matcap)}function w(v,y){const S=e.get(y).light;v.referencePosition.value.setFromMatrixPosition(S.matrixWorld),v.nearDistance.value=S.shadow.camera.near,v.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Upe(t,e,n,r){let i={},s={},o=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,E){const C=E.program;r.uniformBlockBinding(S,C)}function c(S,E){let C=i[S.id];C===void 0&&(x(S),C=u(S),i[S.id]=C,S.addEventListener("dispose",v));const A=E.program;r.updateUBOMapping(S,A);const T=e.render.frame;s[S.id]!==T&&(p(S),s[S.id]=T)}function u(S){const E=d();S.__bindingPointIndex=E;const C=t.createBuffer(),A=S.__size,T=S.usage;return t.bindBuffer(t.UNIFORM_BUFFER,C),t.bufferData(t.UNIFORM_BUFFER,A,T),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,E,C),C}function d(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(S){const E=i[S.id],C=S.uniforms,A=S.__cache;t.bindBuffer(t.UNIFORM_BUFFER,E);for(let T=0,k=C.length;T<k;T++){const R=Array.isArray(C[T])?C[T]:[C[T]];for(let P=0,M=R.length;P<M;P++){const L=R[P];if(m(L,T,P,A)===!0){const z=L.__offset,H=Array.isArray(L.value)?L.value:[L.value];let B=0;for(let K=0;K<H.length;K++){const q=H[K],ee=w(q);typeof q=="number"||typeof q=="boolean"?(L.__data[0]=q,t.bufferSubData(t.UNIFORM_BUFFER,z+B,L.__data)):q.isMatrix3?(L.__data[0]=q.elements[0],L.__data[1]=q.elements[1],L.__data[2]=q.elements[2],L.__data[3]=0,L.__data[4]=q.elements[3],L.__data[5]=q.elements[4],L.__data[6]=q.elements[5],L.__data[7]=0,L.__data[8]=q.elements[6],L.__data[9]=q.elements[7],L.__data[10]=q.elements[8],L.__data[11]=0):(q.toArray(L.__data,B),B+=ee.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,z,L.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function m(S,E,C,A){const T=S.value,k=E+"_"+C;if(A[k]===void 0)return typeof T=="number"||typeof T=="boolean"?A[k]=T:A[k]=T.clone(),!0;{const R=A[k];if(typeof T=="number"||typeof T=="boolean"){if(R!==T)return A[k]=T,!0}else if(R.equals(T)===!1)return R.copy(T),!0}return!1}function x(S){const E=S.uniforms;let C=0;const A=16;for(let k=0,R=E.length;k<R;k++){const P=Array.isArray(E[k])?E[k]:[E[k]];for(let M=0,L=P.length;M<L;M++){const z=P[M],H=Array.isArray(z.value)?z.value:[z.value];for(let B=0,K=H.length;B<K;B++){const q=H[B],ee=w(q),O=C%A,F=O%ee.boundary,D=O+F;C+=F,D!==0&&A-D<ee.storage&&(C+=A-D),z.__data=new Float32Array(ee.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=C,C+=ee.storage}}}const T=C%A;return T>0&&(C+=A-T),S.__size=C,S.__cache={},this}function w(S){const E={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(E.boundary=4,E.storage=4):S.isVector2?(E.boundary=8,E.storage=8):S.isVector3||S.isColor?(E.boundary=16,E.storage=12):S.isVector4?(E.boundary=16,E.storage=16):S.isMatrix3?(E.boundary=48,E.storage=48):S.isMatrix4?(E.boundary=64,E.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),E}function v(S){const E=S.target;E.removeEventListener("dispose",v);const C=o.indexOf(E.__bindingPointIndex);o.splice(C,1),t.deleteBuffer(i[E.id]),delete i[E.id],delete s[E.id]}function y(){for(const S in i)t.deleteBuffer(i[S]);o=[],i={},s={}}return{bind:l,update:c,dispose:y}}class zpe{constructor(e={}){const{canvas:n=xce(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:p=!1}=e;this.isWebGLRenderer=!0;let m;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");m=r.getContextAttributes().alpha}else m=o;const x=new Uint32Array(4),w=new Int32Array(4);let v=null,y=null;const S=[],E=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=bc,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const C=this;let A=!1;this._outputColorSpace=Us;let T=0,k=0,R=null,P=-1,M=null;const L=new Kn,z=new Kn;let H=null;const B=new yn(0);let K=0,q=n.width,ee=n.height,O=1,F=null,D=null;const ie=new Kn(0,0,q,ee),$=new Kn(0,0,q,ee);let U=!1;const Y=new LA;let oe=!1,ne=!1;const Z=new Yn,fe=new Yn,we=new Ee,xe=new Kn,Ve={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Pe=!1;function et(){return R===null?O:1}let te=r;function ft(W,pe){return n.getContext(W,pe)}try{const W={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${MA}`),n.addEventListener("webglcontextlost",rt,!1),n.addEventListener("webglcontextrestored",je,!1),n.addEventListener("webglcontextcreationerror",ke,!1),te===null){const pe="webgl2";if(te=ft(pe,W),te===null)throw ft(pe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(W){throw console.error("THREE.WebGLRenderer: "+W.message),W}let Ye,ht,Qe,St,Ne,Me,st,Q,I,re,G,ae,ce,Ae,De,Je,me,ge,be,Oe,Xe,Ge,wt,de;function ot(){Ye=new Yfe(te),Ye.init(),Ge=new Ppe(te,Ye),ht=new Vfe(te,Ye,e,Ge),Qe=new Npe(te,Ye),ht.reverseDepthBuffer&&p&&Qe.buffers.depth.setReversed(!0),St=new Zfe(te),Ne=new ype,Me=new kpe(te,Ye,Qe,Ne,ht,Ge,St),st=new Wfe(C),Q=new Kfe(C),I=new sue(te),wt=new Bfe(te,I),re=new Jfe(te,I,St,wt),G=new the(te,re,I,St),be=new ehe(te,ht,Me),Je=new $fe(Ne),ae=new gpe(C,st,Q,Ye,ht,wt,Je),ce=new jpe(C,Ne),Ae=new xpe,De=new Cpe(Ye),ge=new zfe(C,st,Q,Qe,G,m,l),me=new Ape(C,G,ht),de=new Upe(te,St,ht,Qe),Oe=new Hfe(te,Ye,St),Xe=new Qfe(te,Ye,St),St.programs=ae.programs,C.capabilities=ht,C.extensions=Ye,C.properties=Ne,C.renderLists=Ae,C.shadowMap=me,C.state=Qe,C.info=St}ot();const We=new Ope(C,te);this.xr=We,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const W=Ye.get("WEBGL_lose_context");W&&W.loseContext()},this.forceContextRestore=function(){const W=Ye.get("WEBGL_lose_context");W&&W.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(W){W!==void 0&&(O=W,this.setSize(q,ee,!1))},this.getSize=function(W){return W.set(q,ee)},this.setSize=function(W,pe,_e=!0){if(We.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}q=W,ee=pe,n.width=Math.floor(W*O),n.height=Math.floor(pe*O),_e===!0&&(n.style.width=W+"px",n.style.height=pe+"px"),this.setViewport(0,0,W,pe)},this.getDrawingBufferSize=function(W){return W.set(q*O,ee*O).floor()},this.setDrawingBufferSize=function(W,pe,_e){q=W,ee=pe,O=_e,n.width=Math.floor(W*_e),n.height=Math.floor(pe*_e),this.setViewport(0,0,W,pe)},this.getCurrentViewport=function(W){return W.copy(L)},this.getViewport=function(W){return W.copy(ie)},this.setViewport=function(W,pe,_e,Se){W.isVector4?ie.set(W.x,W.y,W.z,W.w):ie.set(W,pe,_e,Se),Qe.viewport(L.copy(ie).multiplyScalar(O).round())},this.getScissor=function(W){return W.copy($)},this.setScissor=function(W,pe,_e,Se){W.isVector4?$.set(W.x,W.y,W.z,W.w):$.set(W,pe,_e,Se),Qe.scissor(z.copy($).multiplyScalar(O).round())},this.getScissorTest=function(){return U},this.setScissorTest=function(W){Qe.setScissorTest(U=W)},this.setOpaqueSort=function(W){F=W},this.setTransparentSort=function(W){D=W},this.getClearColor=function(W){return W.copy(ge.getClearColor())},this.setClearColor=function(){ge.setClearColor(...arguments)},this.getClearAlpha=function(){return ge.getClearAlpha()},this.setClearAlpha=function(){ge.setClearAlpha(...arguments)},this.clear=function(W=!0,pe=!0,_e=!0){let Se=0;if(W){let J=!1;if(R!==null){const le=R.texture.format;J=le===PA||le===kA||le===NA}if(J){const le=R.texture.type,ve=le===ua||le===td||le===Fm||le===jm||le===AA||le===RA,Ie=ge.getClearColor(),Fe=ge.getClearAlpha(),at=Ie.r,gt=Ie.g,mt=Ie.b;ve?(x[0]=at,x[1]=gt,x[2]=mt,x[3]=Fe,te.clearBufferuiv(te.COLOR,0,x)):(w[0]=at,w[1]=gt,w[2]=mt,w[3]=Fe,te.clearBufferiv(te.COLOR,0,w))}else Se|=te.COLOR_BUFFER_BIT}pe&&(Se|=te.DEPTH_BUFFER_BIT),_e&&(Se|=te.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),te.clear(Se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",rt,!1),n.removeEventListener("webglcontextrestored",je,!1),n.removeEventListener("webglcontextcreationerror",ke,!1),ge.dispose(),Ae.dispose(),De.dispose(),Ne.dispose(),st.dispose(),Q.dispose(),G.dispose(),wt.dispose(),de.dispose(),ae.dispose(),We.dispose(),We.removeEventListener("sessionstart",Pn),We.removeEventListener("sessionend",vn),dn.stop()};function rt(W){W.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function je(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const W=St.autoReset,pe=me.enabled,_e=me.autoUpdate,Se=me.needsUpdate,J=me.type;ot(),St.autoReset=W,me.enabled=pe,me.autoUpdate=_e,me.needsUpdate=Se,me.type=J}function ke(W){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",W.statusMessage)}function Ue(W){const pe=W.target;pe.removeEventListener("dispose",Ue),tt(pe)}function tt(W){pt(W),Ne.remove(W)}function pt(W){const pe=Ne.get(W).programs;pe!==void 0&&(pe.forEach(function(_e){ae.releaseProgram(_e)}),W.isShaderMaterial&&ae.releaseShaderCache(W))}this.renderBufferDirect=function(W,pe,_e,Se,J,le){pe===null&&(pe=Ve);const ve=J.isMesh&&J.matrixWorld.determinant()<0,Ie=_d(W,pe,_e,Se,J);Qe.setMaterial(Se,ve);let Fe=_e.index,at=1;if(Se.wireframe===!0){if(Fe=re.getWireframeAttribute(_e),Fe===void 0)return;at=2}const gt=_e.drawRange,mt=_e.attributes.position;let Et=gt.start*at,qt=(gt.start+gt.count)*at;le!==null&&(Et=Math.max(Et,le.start*at),qt=Math.min(qt,(le.start+le.count)*at)),Fe!==null?(Et=Math.max(Et,0),qt=Math.min(qt,Fe.count)):mt!=null&&(Et=Math.max(Et,0),qt=Math.min(qt,mt.count));const pn=qt-Et;if(pn<0||pn===1/0)return;wt.setup(J,Se,Ie,_e,Fe);let Xt,Kt=Oe;if(Fe!==null&&(Xt=I.get(Fe),Kt=Xe,Kt.setIndex(Xt)),J.isMesh)Se.wireframe===!0?(Qe.setLineWidth(Se.wireframeLinewidth*et()),Kt.setMode(te.LINES)):Kt.setMode(te.TRIANGLES);else if(J.isLine){let Ct=Se.linewidth;Ct===void 0&&(Ct=1),Qe.setLineWidth(Ct*et()),J.isLineSegments?Kt.setMode(te.LINES):J.isLineLoop?Kt.setMode(te.LINE_LOOP):Kt.setMode(te.LINE_STRIP)}else J.isPoints?Kt.setMode(te.POINTS):J.isSprite&&Kt.setMode(te.TRIANGLES);if(J.isBatchedMesh)if(J._multiDrawInstances!==null)Ff("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Kt.renderMultiDrawInstances(J._multiDrawStarts,J._multiDrawCounts,J._multiDrawCount,J._multiDrawInstances);else if(Ye.get("WEBGL_multi_draw"))Kt.renderMultiDraw(J._multiDrawStarts,J._multiDrawCounts,J._multiDrawCount);else{const Ct=J._multiDrawStarts,Jn=J._multiDrawCounts,sn=J._multiDrawCount,Vr=Fe?I.get(Fe).bytesPerElement:1,xa=Ne.get(Se).currentProgram.getUniforms();for(let ui=0;ui<sn;ui++)xa.setValue(te,"_gl_DrawID",ui),Kt.render(Ct[ui]/Vr,Jn[ui])}else if(J.isInstancedMesh)Kt.renderInstances(Et,pn,J.count);else if(_e.isInstancedBufferGeometry){const Ct=_e._maxInstanceCount!==void 0?_e._maxInstanceCount:1/0,Jn=Math.min(_e.instanceCount,Ct);Kt.renderInstances(Et,pn,Jn)}else Kt.render(Et,pn)};function Tt(W,pe,_e){W.transparent===!0&&W.side===ea&&W.forceSinglePass===!1?(W.side=Gi,W.needsUpdate=!0,xl(W,pe,_e),W.side=Pc,W.needsUpdate=!0,xl(W,pe,_e),W.side=ea):xl(W,pe,_e)}this.compile=function(W,pe,_e=null){_e===null&&(_e=W),y=De.get(_e),y.init(pe),E.push(y),_e.traverseVisible(function(J){J.isLight&&J.layers.test(pe.layers)&&(y.pushLight(J),J.castShadow&&y.pushShadow(J))}),W!==_e&&W.traverseVisible(function(J){J.isLight&&J.layers.test(pe.layers)&&(y.pushLight(J),J.castShadow&&y.pushShadow(J))}),y.setupLights();const Se=new Set;return W.traverse(function(J){if(!(J.isMesh||J.isPoints||J.isLine||J.isSprite))return;const le=J.material;if(le)if(Array.isArray(le))for(let ve=0;ve<le.length;ve++){const Ie=le[ve];Tt(Ie,_e,J),Se.add(Ie)}else Tt(le,_e,J),Se.add(le)}),y=E.pop(),Se},this.compileAsync=function(W,pe,_e=null){const Se=this.compile(W,pe,_e);return new Promise(J=>{function le(){if(Se.forEach(function(ve){Ne.get(ve).currentProgram.isReady()&&Se.delete(ve)}),Se.size===0){J(W);return}setTimeout(le,10)}Ye.get("KHR_parallel_shader_compile")!==null?le():setTimeout(le,10)})};let rn=null;function $t(W){rn&&rn(W)}function Pn(){dn.stop()}function vn(){dn.start()}const dn=new YB;dn.setAnimationLoop($t),typeof self<"u"&&dn.setContext(self),this.setAnimationLoop=function(W){rn=W,We.setAnimationLoop(W),W===null?dn.stop():dn.start()},We.addEventListener("sessionstart",Pn),We.addEventListener("sessionend",vn),this.render=function(W,pe){if(pe!==void 0&&pe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(A===!0)return;if(W.matrixWorldAutoUpdate===!0&&W.updateMatrixWorld(),pe.parent===null&&pe.matrixWorldAutoUpdate===!0&&pe.updateMatrixWorld(),We.enabled===!0&&We.isPresenting===!0&&(We.cameraAutoUpdate===!0&&We.updateCamera(pe),pe=We.getCamera()),W.isScene===!0&&W.onBeforeRender(C,W,pe,R),y=De.get(W,E.length),y.init(pe),E.push(y),fe.multiplyMatrices(pe.projectionMatrix,pe.matrixWorldInverse),Y.setFromProjectionMatrix(fe),ne=this.localClippingEnabled,oe=Je.init(this.clippingPlanes,ne),v=Ae.get(W,S.length),v.init(),S.push(v),We.enabled===!0&&We.isPresenting===!0){const le=C.xr.getDepthSensingMesh();le!==null&&Zi(le,pe,-1/0,C.sortObjects)}Zi(W,pe,0,C.sortObjects),v.finish(),C.sortObjects===!0&&v.sort(F,D),Pe=We.enabled===!1||We.isPresenting===!1||We.hasDepthSensing()===!1,Pe&&ge.addToRenderList(v,W),this.info.render.frame++,oe===!0&&Je.beginShadows();const _e=y.state.shadowsArray;me.render(_e,W,pe),oe===!0&&Je.endShadows(),this.info.autoReset===!0&&this.info.reset();const Se=v.opaque,J=v.transmissive;if(y.setupLights(),pe.isArrayCamera){const le=pe.cameras;if(J.length>0)for(let ve=0,Ie=le.length;ve<Ie;ve++){const Fe=le[ve];li(Se,J,W,Fe)}Pe&&ge.render(W);for(let ve=0,Ie=le.length;ve<Ie;ve++){const Fe=le[ve];As(v,W,Fe,Fe.viewport)}}else J.length>0&&li(Se,J,W,pe),Pe&&ge.render(W),As(v,W,pe);R!==null&&k===0&&(Me.updateMultisampleRenderTarget(R),Me.updateRenderTargetMipmap(R)),W.isScene===!0&&W.onAfterRender(C,W,pe),wt.resetDefaultState(),P=-1,M=null,E.pop(),E.length>0?(y=E[E.length-1],oe===!0&&Je.setGlobalState(C.clippingPlanes,y.state.camera)):y=null,S.pop(),S.length>0?v=S[S.length-1]:v=null};function Zi(W,pe,_e,Se){if(W.visible===!1)return;if(W.layers.test(pe.layers)){if(W.isGroup)_e=W.renderOrder;else if(W.isLOD)W.autoUpdate===!0&&W.update(pe);else if(W.isLight)y.pushLight(W),W.castShadow&&y.pushShadow(W);else if(W.isSprite){if(!W.frustumCulled||Y.intersectsSprite(W)){Se&&xe.setFromMatrixPosition(W.matrixWorld).applyMatrix4(fe);const ve=G.update(W),Ie=W.material;Ie.visible&&v.push(W,ve,Ie,_e,xe.z,null)}}else if((W.isMesh||W.isLine||W.isPoints)&&(!W.frustumCulled||Y.intersectsObject(W))){const ve=G.update(W),Ie=W.material;if(Se&&(W.boundingSphere!==void 0?(W.boundingSphere===null&&W.computeBoundingSphere(),xe.copy(W.boundingSphere.center)):(ve.boundingSphere===null&&ve.computeBoundingSphere(),xe.copy(ve.boundingSphere.center)),xe.applyMatrix4(W.matrixWorld).applyMatrix4(fe)),Array.isArray(Ie)){const Fe=ve.groups;for(let at=0,gt=Fe.length;at<gt;at++){const mt=Fe[at],Et=Ie[mt.materialIndex];Et&&Et.visible&&v.push(W,ve,Et,_e,xe.z,mt)}}else Ie.visible&&v.push(W,ve,Ie,_e,xe.z,null)}}const le=W.children;for(let ve=0,Ie=le.length;ve<Ie;ve++)Zi(le[ve],pe,_e,Se)}function As(W,pe,_e,Se){const J=W.opaque,le=W.transmissive,ve=W.transparent;y.setupLightsView(_e),oe===!0&&Je.setGlobalState(C.clippingPlanes,_e),Se&&Qe.viewport(L.copy(Se)),J.length>0&&ci(J,pe,_e),le.length>0&&ci(le,pe,_e),ve.length>0&&ci(ve,pe,_e),Qe.buffers.depth.setTest(!0),Qe.buffers.depth.setMask(!0),Qe.buffers.color.setMask(!0),Qe.setPolygonOffset(!1)}function li(W,pe,_e,Se){if((_e.isScene===!0?_e.overrideMaterial:null)!==null)return;y.state.transmissionRenderTarget[Se.id]===void 0&&(y.state.transmissionRenderTarget[Se.id]=new nd(1,1,{generateMipmaps:!0,type:Ye.has("EXT_color_buffer_half_float")||Ye.has("EXT_color_buffer_float")?Cg:ua,minFilter:Nu,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:hn.workingColorSpace}));const le=y.state.transmissionRenderTarget[Se.id],ve=Se.viewport||L;le.setSize(ve.z*C.transmissionResolutionScale,ve.w*C.transmissionResolutionScale);const Ie=C.getRenderTarget();C.setRenderTarget(le),C.getClearColor(B),K=C.getClearAlpha(),K<1&&C.setClearColor(16777215,.5),C.clear(),Pe&&ge.render(_e);const Fe=C.toneMapping;C.toneMapping=bc;const at=Se.viewport;if(Se.viewport!==void 0&&(Se.viewport=void 0),y.setupLightsView(Se),oe===!0&&Je.setGlobalState(C.clippingPlanes,Se),ci(W,_e,Se),Me.updateMultisampleRenderTarget(le),Me.updateRenderTargetMipmap(le),Ye.has("WEBGL_multisampled_render_to_texture")===!1){let gt=!1;for(let mt=0,Et=pe.length;mt<Et;mt++){const qt=pe[mt],pn=qt.object,Xt=qt.geometry,Kt=qt.material,Ct=qt.group;if(Kt.side===ea&&pn.layers.test(Se.layers)){const Jn=Kt.side;Kt.side=Gi,Kt.needsUpdate=!0,Fo(pn,_e,Se,Xt,Kt,Ct),Kt.side=Jn,Kt.needsUpdate=!0,gt=!0}}gt===!0&&(Me.updateMultisampleRenderTarget(le),Me.updateRenderTargetMipmap(le))}C.setRenderTarget(Ie),C.setClearColor(B,K),at!==void 0&&(Se.viewport=at),C.toneMapping=Fe}function ci(W,pe,_e){const Se=pe.isScene===!0?pe.overrideMaterial:null;for(let J=0,le=W.length;J<le;J++){const ve=W[J],Ie=ve.object,Fe=ve.geometry,at=ve.group;let gt=ve.material;gt.allowOverride===!0&&Se!==null&&(gt=Se),Ie.layers.test(_e.layers)&&Fo(Ie,pe,_e,Fe,gt,at)}}function Fo(W,pe,_e,Se,J,le){W.onBeforeRender(C,pe,_e,Se,J,le),W.modelViewMatrix.multiplyMatrices(_e.matrixWorldInverse,W.matrixWorld),W.normalMatrix.getNormalMatrix(W.modelViewMatrix),J.onBeforeRender(C,pe,_e,Se,W,le),J.transparent===!0&&J.side===ea&&J.forceSinglePass===!1?(J.side=Gi,J.needsUpdate=!0,C.renderBufferDirect(_e,pe,Se,J,W,le),J.side=Pc,J.needsUpdate=!0,C.renderBufferDirect(_e,pe,Se,J,W,le),J.side=ea):C.renderBufferDirect(_e,pe,Se,J,W,le),W.onAfterRender(C,pe,_e,Se,J,le)}function xl(W,pe,_e){pe.isScene!==!0&&(pe=Ve);const Se=Ne.get(W),J=y.state.lights,le=y.state.shadowsArray,ve=J.state.version,Ie=ae.getParameters(W,J.state,le,pe,_e),Fe=ae.getProgramCacheKey(Ie);let at=Se.programs;Se.environment=W.isMeshStandardMaterial?pe.environment:null,Se.fog=pe.fog,Se.envMap=(W.isMeshStandardMaterial?Q:st).get(W.envMap||Se.environment),Se.envMapRotation=Se.environment!==null&&W.envMap===null?pe.environmentRotation:W.envMapRotation,at===void 0&&(W.addEventListener("dispose",Ue),at=new Map,Se.programs=at);let gt=at.get(Fe);if(gt!==void 0){if(Se.currentProgram===gt&&Se.lightsStateVersion===ve)return Sd(W,Ie),gt}else Ie.uniforms=ae.getUniforms(W),W.onBeforeCompile(Ie,C),gt=ae.acquireProgram(Ie,Fe),at.set(Fe,gt),Se.uniforms=Ie.uniforms;const mt=Se.uniforms;return(!W.isShaderMaterial&&!W.isRawShaderMaterial||W.clipping===!0)&&(mt.clippingPlanes=Je.uniform),Sd(W,Ie),Se.needsLights=Gh(W),Se.lightsStateVersion=ve,Se.needsLights&&(mt.ambientLightColor.value=J.state.ambient,mt.lightProbe.value=J.state.probe,mt.directionalLights.value=J.state.directional,mt.directionalLightShadows.value=J.state.directionalShadow,mt.spotLights.value=J.state.spot,mt.spotLightShadows.value=J.state.spotShadow,mt.rectAreaLights.value=J.state.rectArea,mt.ltc_1.value=J.state.rectAreaLTC1,mt.ltc_2.value=J.state.rectAreaLTC2,mt.pointLights.value=J.state.point,mt.pointLightShadows.value=J.state.pointShadow,mt.hemisphereLights.value=J.state.hemi,mt.directionalShadowMap.value=J.state.directionalShadowMap,mt.directionalShadowMatrix.value=J.state.directionalShadowMatrix,mt.spotShadowMap.value=J.state.spotShadowMap,mt.spotLightMatrix.value=J.state.spotLightMatrix,mt.spotLightMap.value=J.state.spotLightMap,mt.pointShadowMap.value=J.state.pointShadowMap,mt.pointShadowMatrix.value=J.state.pointShadowMatrix),Se.currentProgram=gt,Se.uniformsList=null,gt}function bd(W){if(W.uniformsList===null){const pe=W.currentProgram.getUniforms();W.uniformsList=lx.seqWithValue(pe.seq,W.uniforms)}return W.uniformsList}function Sd(W,pe){const _e=Ne.get(W);_e.outputColorSpace=pe.outputColorSpace,_e.batching=pe.batching,_e.batchingColor=pe.batchingColor,_e.instancing=pe.instancing,_e.instancingColor=pe.instancingColor,_e.instancingMorph=pe.instancingMorph,_e.skinning=pe.skinning,_e.morphTargets=pe.morphTargets,_e.morphNormals=pe.morphNormals,_e.morphColors=pe.morphColors,_e.morphTargetsCount=pe.morphTargetsCount,_e.numClippingPlanes=pe.numClippingPlanes,_e.numIntersection=pe.numClipIntersection,_e.vertexAlphas=pe.vertexAlphas,_e.vertexTangents=pe.vertexTangents,_e.toneMapping=pe.toneMapping}function _d(W,pe,_e,Se,J){pe.isScene!==!0&&(pe=Ve),Me.resetTextureUnits();const le=pe.fog,ve=Se.isMeshStandardMaterial?pe.environment:null,Ie=R===null?C.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:hh,Fe=(Se.isMeshStandardMaterial?Q:st).get(Se.envMap||ve),at=Se.vertexColors===!0&&!!_e.attributes.color&&_e.attributes.color.itemSize===4,gt=!!_e.attributes.tangent&&(!!Se.normalMap||Se.anisotropy>0),mt=!!_e.morphAttributes.position,Et=!!_e.morphAttributes.normal,qt=!!_e.morphAttributes.color;let pn=bc;Se.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(pn=C.toneMapping);const Xt=_e.morphAttributes.position||_e.morphAttributes.normal||_e.morphAttributes.color,Kt=Xt!==void 0?Xt.length:0,Ct=Ne.get(Se),Jn=y.state.lights;if(oe===!0&&(ne===!0||W!==M)){const gr=W===M&&Se.id===P;Je.setState(Se,W,gr)}let sn=!1;Se.version===Ct.__version?(Ct.needsLights&&Ct.lightsStateVersion!==Jn.state.version||Ct.outputColorSpace!==Ie||J.isBatchedMesh&&Ct.batching===!1||!J.isBatchedMesh&&Ct.batching===!0||J.isBatchedMesh&&Ct.batchingColor===!0&&J.colorTexture===null||J.isBatchedMesh&&Ct.batchingColor===!1&&J.colorTexture!==null||J.isInstancedMesh&&Ct.instancing===!1||!J.isInstancedMesh&&Ct.instancing===!0||J.isSkinnedMesh&&Ct.skinning===!1||!J.isSkinnedMesh&&Ct.skinning===!0||J.isInstancedMesh&&Ct.instancingColor===!0&&J.instanceColor===null||J.isInstancedMesh&&Ct.instancingColor===!1&&J.instanceColor!==null||J.isInstancedMesh&&Ct.instancingMorph===!0&&J.morphTexture===null||J.isInstancedMesh&&Ct.instancingMorph===!1&&J.morphTexture!==null||Ct.envMap!==Fe||Se.fog===!0&&Ct.fog!==le||Ct.numClippingPlanes!==void 0&&(Ct.numClippingPlanes!==Je.numPlanes||Ct.numIntersection!==Je.numIntersection)||Ct.vertexAlphas!==at||Ct.vertexTangents!==gt||Ct.morphTargets!==mt||Ct.morphNormals!==Et||Ct.morphColors!==qt||Ct.toneMapping!==pn||Ct.morphTargetsCount!==Kt)&&(sn=!0):(sn=!0,Ct.__version=Se.version);let Vr=Ct.currentProgram;sn===!0&&(Vr=xl(Se,pe,J));let xa=!1,ui=!1,wl=!1;const En=Vr.getUniforms(),$r=Ct.uniforms;if(Qe.useProgram(Vr.program)&&(xa=!0,ui=!0,wl=!0),Se.id!==P&&(P=Se.id,ui=!0),xa||M!==W){Qe.buffers.depth.getReversed()?(Z.copy(W.projectionMatrix),bce(Z),Sce(Z),En.setValue(te,"projectionMatrix",Z)):En.setValue(te,"projectionMatrix",W.projectionMatrix),En.setValue(te,"viewMatrix",W.matrixWorldInverse);const yr=En.map.cameraPosition;yr!==void 0&&yr.setValue(te,we.setFromMatrixPosition(W.matrixWorld)),ht.logarithmicDepthBuffer&&En.setValue(te,"logDepthBufFC",2/(Math.log(W.far+1)/Math.LN2)),(Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshLambertMaterial||Se.isMeshBasicMaterial||Se.isMeshStandardMaterial||Se.isShaderMaterial)&&En.setValue(te,"isOrthographic",W.isOrthographicCamera===!0),M!==W&&(M=W,ui=!0,wl=!0)}if(J.isSkinnedMesh){En.setOptional(te,J,"bindMatrix"),En.setOptional(te,J,"bindMatrixInverse");const gr=J.skeleton;gr&&(gr.boneTexture===null&&gr.computeBoneTexture(),En.setValue(te,"boneTexture",gr.boneTexture,Me))}J.isBatchedMesh&&(En.setOptional(te,J,"batchingTexture"),En.setValue(te,"batchingTexture",J._matricesTexture,Me),En.setOptional(te,J,"batchingIdTexture"),En.setValue(te,"batchingIdTexture",J._indirectTexture,Me),En.setOptional(te,J,"batchingColorTexture"),J._colorsTexture!==null&&En.setValue(te,"batchingColorTexture",J._colorsTexture,Me));const Ri=_e.morphAttributes;if((Ri.position!==void 0||Ri.normal!==void 0||Ri.color!==void 0)&&be.update(J,_e,Vr),(ui||Ct.receiveShadow!==J.receiveShadow)&&(Ct.receiveShadow=J.receiveShadow,En.setValue(te,"receiveShadow",J.receiveShadow)),Se.isMeshGouraudMaterial&&Se.envMap!==null&&($r.envMap.value=Fe,$r.flipEnvMap.value=Fe.isCubeTexture&&Fe.isRenderTargetTexture===!1?-1:1),Se.isMeshStandardMaterial&&Se.envMap===null&&pe.environment!==null&&($r.envMapIntensity.value=pe.environmentIntensity),ui&&(En.setValue(te,"toneMappingExposure",C.toneMappingExposure),Ct.needsLights&&Wh($r,wl),le&&Se.fog===!0&&ce.refreshFogUniforms($r,le),ce.refreshMaterialUniforms($r,Se,O,ee,y.state.transmissionRenderTarget[W.id]),lx.upload(te,bd(Ct),$r,Me)),Se.isShaderMaterial&&Se.uniformsNeedUpdate===!0&&(lx.upload(te,bd(Ct),$r,Me),Se.uniformsNeedUpdate=!1),Se.isSpriteMaterial&&En.setValue(te,"center",J.center),En.setValue(te,"modelViewMatrix",J.modelViewMatrix),En.setValue(te,"normalMatrix",J.normalMatrix),En.setValue(te,"modelMatrix",J.matrixWorld),Se.isShaderMaterial||Se.isRawShaderMaterial){const gr=Se.uniformsGroups;for(let yr=0,Zc=gr.length;yr<Zc;yr++){const Ni=gr[yr];de.update(Ni,Vr),de.bind(Ni,Vr)}}return Vr}function Wh(W,pe){W.ambientLightColor.needsUpdate=pe,W.lightProbe.needsUpdate=pe,W.directionalLights.needsUpdate=pe,W.directionalLightShadows.needsUpdate=pe,W.pointLights.needsUpdate=pe,W.pointLightShadows.needsUpdate=pe,W.spotLights.needsUpdate=pe,W.spotLightShadows.needsUpdate=pe,W.rectAreaLights.needsUpdate=pe,W.hemisphereLights.needsUpdate=pe}function Gh(W){return W.isMeshLambertMaterial||W.isMeshToonMaterial||W.isMeshPhongMaterial||W.isMeshStandardMaterial||W.isShadowMaterial||W.isShaderMaterial&&W.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(W,pe,_e){const Se=Ne.get(W);Se.__autoAllocateDepthBuffer=W.resolveDepthBuffer===!1,Se.__autoAllocateDepthBuffer===!1&&(Se.__useRenderToTexture=!1),Ne.get(W.texture).__webglTexture=pe,Ne.get(W.depthTexture).__webglTexture=Se.__autoAllocateDepthBuffer?void 0:_e,Se.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(W,pe){const _e=Ne.get(W);_e.__webglFramebuffer=pe,_e.__useDefaultFramebuffer=pe===void 0};const qh=te.createFramebuffer();this.setRenderTarget=function(W,pe=0,_e=0){R=W,T=pe,k=_e;let Se=!0,J=null,le=!1,ve=!1;if(W){const Fe=Ne.get(W);if(Fe.__useDefaultFramebuffer!==void 0)Qe.bindFramebuffer(te.FRAMEBUFFER,null),Se=!1;else if(Fe.__webglFramebuffer===void 0)Me.setupRenderTarget(W);else if(Fe.__hasExternalTextures)Me.rebindTextures(W,Ne.get(W.texture).__webglTexture,Ne.get(W.depthTexture).__webglTexture);else if(W.depthBuffer){const mt=W.depthTexture;if(Fe.__boundDepthTexture!==mt){if(mt!==null&&Ne.has(mt)&&(W.width!==mt.image.width||W.height!==mt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Me.setupDepthRenderbuffer(W)}}const at=W.texture;(at.isData3DTexture||at.isDataArrayTexture||at.isCompressedArrayTexture)&&(ve=!0);const gt=Ne.get(W).__webglFramebuffer;W.isWebGLCubeRenderTarget?(Array.isArray(gt[pe])?J=gt[pe][_e]:J=gt[pe],le=!0):W.samples>0&&Me.useMultisampledRTT(W)===!1?J=Ne.get(W).__webglMultisampledFramebuffer:Array.isArray(gt)?J=gt[_e]:J=gt,L.copy(W.viewport),z.copy(W.scissor),H=W.scissorTest}else L.copy(ie).multiplyScalar(O).floor(),z.copy($).multiplyScalar(O).floor(),H=U;if(_e!==0&&(J=qh),Qe.bindFramebuffer(te.FRAMEBUFFER,J)&&Se&&Qe.drawBuffers(W,J),Qe.viewport(L),Qe.scissor(z),Qe.setScissorTest(H),le){const Fe=Ne.get(W.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+pe,Fe.__webglTexture,_e)}else if(ve){const Fe=Ne.get(W.texture),at=pe;te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,Fe.__webglTexture,_e,at)}else if(W!==null&&_e!==0){const Fe=Ne.get(W.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Fe.__webglTexture,_e)}P=-1},this.readRenderTargetPixels=function(W,pe,_e,Se,J,le,ve,Ie=0){if(!(W&&W.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Fe=Ne.get(W).__webglFramebuffer;if(W.isWebGLCubeRenderTarget&&ve!==void 0&&(Fe=Fe[ve]),Fe){Qe.bindFramebuffer(te.FRAMEBUFFER,Fe);try{const at=W.textures[Ie],gt=at.format,mt=at.type;if(!ht.textureFormatReadable(gt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ht.textureTypeReadable(mt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}pe>=0&&pe<=W.width-Se&&_e>=0&&_e<=W.height-J&&(W.textures.length>1&&te.readBuffer(te.COLOR_ATTACHMENT0+Ie),te.readPixels(pe,_e,Se,J,Ge.convert(gt),Ge.convert(mt),le))}finally{const at=R!==null?Ne.get(R).__webglFramebuffer:null;Qe.bindFramebuffer(te.FRAMEBUFFER,at)}}},this.readRenderTargetPixelsAsync=async function(W,pe,_e,Se,J,le,ve,Ie=0){if(!(W&&W.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Fe=Ne.get(W).__webglFramebuffer;if(W.isWebGLCubeRenderTarget&&ve!==void 0&&(Fe=Fe[ve]),Fe)if(pe>=0&&pe<=W.width-Se&&_e>=0&&_e<=W.height-J){Qe.bindFramebuffer(te.FRAMEBUFFER,Fe);const at=W.textures[Ie],gt=at.format,mt=at.type;if(!ht.textureFormatReadable(gt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ht.textureTypeReadable(mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Et=te.createBuffer();te.bindBuffer(te.PIXEL_PACK_BUFFER,Et),te.bufferData(te.PIXEL_PACK_BUFFER,le.byteLength,te.STREAM_READ),W.textures.length>1&&te.readBuffer(te.COLOR_ATTACHMENT0+Ie),te.readPixels(pe,_e,Se,J,Ge.convert(gt),Ge.convert(mt),0);const qt=R!==null?Ne.get(R).__webglFramebuffer:null;Qe.bindFramebuffer(te.FRAMEBUFFER,qt);const pn=te.fenceSync(te.SYNC_GPU_COMMANDS_COMPLETE,0);return te.flush(),await wce(te,pn,4),te.bindBuffer(te.PIXEL_PACK_BUFFER,Et),te.getBufferSubData(te.PIXEL_PACK_BUFFER,0,le),te.deleteBuffer(Et),te.deleteSync(pn),le}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(W,pe=null,_e=0){const Se=Math.pow(2,-_e),J=Math.floor(W.image.width*Se),le=Math.floor(W.image.height*Se),ve=pe!==null?pe.x:0,Ie=pe!==null?pe.y:0;Me.setTexture2D(W,0),te.copyTexSubImage2D(te.TEXTURE_2D,_e,0,0,ve,Ie,J,le),Qe.unbindTexture()};const Xh=te.createFramebuffer(),Kh=te.createFramebuffer();this.copyTextureToTexture=function(W,pe,_e=null,Se=null,J=0,le=null){le===null&&(J!==0?(Ff("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),le=J,J=0):le=0);let ve,Ie,Fe,at,gt,mt,Et,qt,pn;const Xt=W.isCompressedTexture?W.mipmaps[le]:W.image;if(_e!==null)ve=_e.max.x-_e.min.x,Ie=_e.max.y-_e.min.y,Fe=_e.isBox3?_e.max.z-_e.min.z:1,at=_e.min.x,gt=_e.min.y,mt=_e.isBox3?_e.min.z:0;else{const Ri=Math.pow(2,-J);ve=Math.floor(Xt.width*Ri),Ie=Math.floor(Xt.height*Ri),W.isDataArrayTexture?Fe=Xt.depth:W.isData3DTexture?Fe=Math.floor(Xt.depth*Ri):Fe=1,at=0,gt=0,mt=0}Se!==null?(Et=Se.x,qt=Se.y,pn=Se.z):(Et=0,qt=0,pn=0);const Kt=Ge.convert(pe.format),Ct=Ge.convert(pe.type);let Jn;pe.isData3DTexture?(Me.setTexture3D(pe,0),Jn=te.TEXTURE_3D):pe.isDataArrayTexture||pe.isCompressedArrayTexture?(Me.setTexture2DArray(pe,0),Jn=te.TEXTURE_2D_ARRAY):(Me.setTexture2D(pe,0),Jn=te.TEXTURE_2D),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,pe.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pe.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,pe.unpackAlignment);const sn=te.getParameter(te.UNPACK_ROW_LENGTH),Vr=te.getParameter(te.UNPACK_IMAGE_HEIGHT),xa=te.getParameter(te.UNPACK_SKIP_PIXELS),ui=te.getParameter(te.UNPACK_SKIP_ROWS),wl=te.getParameter(te.UNPACK_SKIP_IMAGES);te.pixelStorei(te.UNPACK_ROW_LENGTH,Xt.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,Xt.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,at),te.pixelStorei(te.UNPACK_SKIP_ROWS,gt),te.pixelStorei(te.UNPACK_SKIP_IMAGES,mt);const En=W.isDataArrayTexture||W.isData3DTexture,$r=pe.isDataArrayTexture||pe.isData3DTexture;if(W.isDepthTexture){const Ri=Ne.get(W),gr=Ne.get(pe),yr=Ne.get(Ri.__renderTarget),Zc=Ne.get(gr.__renderTarget);Qe.bindFramebuffer(te.READ_FRAMEBUFFER,yr.__webglFramebuffer),Qe.bindFramebuffer(te.DRAW_FRAMEBUFFER,Zc.__webglFramebuffer);for(let Ni=0;Ni<Fe;Ni++)En&&(te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Ne.get(W).__webglTexture,J,mt+Ni),te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Ne.get(pe).__webglTexture,le,pn+Ni)),te.blitFramebuffer(at,gt,ve,Ie,Et,qt,ve,Ie,te.DEPTH_BUFFER_BIT,te.NEAREST);Qe.bindFramebuffer(te.READ_FRAMEBUFFER,null),Qe.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else if(J!==0||W.isRenderTargetTexture||Ne.has(W)){const Ri=Ne.get(W),gr=Ne.get(pe);Qe.bindFramebuffer(te.READ_FRAMEBUFFER,Xh),Qe.bindFramebuffer(te.DRAW_FRAMEBUFFER,Kh);for(let yr=0;yr<Fe;yr++)En?te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Ri.__webglTexture,J,mt+yr):te.framebufferTexture2D(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Ri.__webglTexture,J),$r?te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,gr.__webglTexture,le,pn+yr):te.framebufferTexture2D(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,gr.__webglTexture,le),J!==0?te.blitFramebuffer(at,gt,ve,Ie,Et,qt,ve,Ie,te.COLOR_BUFFER_BIT,te.NEAREST):$r?te.copyTexSubImage3D(Jn,le,Et,qt,pn+yr,at,gt,ve,Ie):te.copyTexSubImage2D(Jn,le,Et,qt,at,gt,ve,Ie);Qe.bindFramebuffer(te.READ_FRAMEBUFFER,null),Qe.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else $r?W.isDataTexture||W.isData3DTexture?te.texSubImage3D(Jn,le,Et,qt,pn,ve,Ie,Fe,Kt,Ct,Xt.data):pe.isCompressedArrayTexture?te.compressedTexSubImage3D(Jn,le,Et,qt,pn,ve,Ie,Fe,Kt,Xt.data):te.texSubImage3D(Jn,le,Et,qt,pn,ve,Ie,Fe,Kt,Ct,Xt):W.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,le,Et,qt,ve,Ie,Kt,Ct,Xt.data):W.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,le,Et,qt,Xt.width,Xt.height,Kt,Xt.data):te.texSubImage2D(te.TEXTURE_2D,le,Et,qt,ve,Ie,Kt,Ct,Xt);te.pixelStorei(te.UNPACK_ROW_LENGTH,sn),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,Vr),te.pixelStorei(te.UNPACK_SKIP_PIXELS,xa),te.pixelStorei(te.UNPACK_SKIP_ROWS,ui),te.pixelStorei(te.UNPACK_SKIP_IMAGES,wl),le===0&&pe.generateMipmaps&&te.generateMipmap(Jn),Qe.unbindTexture()},this.copyTextureToTexture3D=function(W,pe,_e=null,Se=null,J=0){return Ff('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(W,pe,_e,Se,J)},this.initRenderTarget=function(W){Ne.get(W).__webglFramebuffer===void 0&&Me.setupRenderTarget(W)},this.initTexture=function(W){W.isCubeTexture?Me.setTextureCube(W,0):W.isData3DTexture?Me.setTexture3D(W,0):W.isDataArrayTexture||W.isCompressedArrayTexture?Me.setTexture2DArray(W,0):Me.setTexture2D(W,0),Qe.unbindTexture()},this.resetState=function(){T=0,k=0,R=null,Qe.reset(),wt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return qa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=hn._getDrawingBufferColorSpace(e),n.unpackColorSpace=hn._getUnpackColorSpace()}}const Bpe=({width:t=128,height:e=128,cloudCount:n=6,isLightTheme:r=!1})=>{const i=b.useRef(null),s=b.useRef(),o=()=>{const a=new jp,l=new _f(.3,12,8),c=new Ir(l);c.position.set(0,0,0),a.add(c);const u=new _f(.2,10,6),d=new Ir(u);d.position.set(-.25,-.05,0),a.add(d);const p=new _f(.25,10,6),m=new Ir(p);m.position.set(.3,.05,0),a.add(m);const x=new _f(.18,8,6),w=new Ir(x);return w.position.set(.05,.25,0),a.add(w),a};return b.useEffect(()=>{if(!i.current)return;const a=new Xce,l=new Ws(75,t/e,.1,1e3);l.position.z=5;const c=new zpe({antialias:!0,alpha:!0});c.setSize(t,e),c.setClearColor(0,0),i.current.appendChild(c.domElement),a.add(new nue(16777215,.3));const u=new tue(16777215,.2);u.position.set(2,5,3),a.add(u);const d=[],p=r?3900150:6333946,m=r?.4:.5,x=new n0({color:new yn(p),transparent:!0,opacity:m,side:ea}),w=l.fov/2*(Math.PI/180),v=2*Math.tan(w)*l.position.z,y=v*(t/e),S=Math.ceil(Math.sqrt(n*1.5)),E=Math.ceil(n/S),C=y*1.4/S,A=v*1/E;for(let k=0;k<n;k++){const R=o();R.traverse(ee=>{ee instanceof Ir&&(ee.material=x.clone())});const P=.6+Math.random()*.2,M=(Math.random()-.5)*6;R.scale.setScalar(P*(1-Math.abs(M)*.02));const L=k%S,z=Math.floor(k/S),H=L*C-y*.7+C*.5,B=z*A-v*.5+A*.5,K=(Math.random()-.5)*C*.6,q=(Math.random()-.5)*A*.6;R.position.set(H+K,B+q,M),d.push({mesh:R,speed:.003+Math.random()*.001,initialY:R.position.y,assignedRow:z,cellHeight:A,zDepth:M,verticalOffset:Math.random()*Math.PI*2,baseOpacity:m}),a.add(R)}const T=()=>{s.current=requestAnimationFrame(T);for(const k of d){const{mesh:R,speed:P,zDepth:M,assignedRow:L,cellHeight:z,verticalOffset:H,baseOpacity:B}=k;R.position.x+=P*(1+Math.abs(M)*.03),R.position.y=k.initialY+Math.sin(performance.now()*5e-4+H)*.1;const K=0,q=0,ee=y*.4,O=v*.6,F=Math.abs(R.position.x-K),D=Math.abs(R.position.y-q),ie=F<ee/2,$=D<O/2;let U=B;if(ie&&$){const Y=1-F/(ee/2),oe=1-D/(O/2),ne=Math.max(Y,oe);U=B*(1-ne*.8)}if(R.traverse(Y=>{Y instanceof Ir&&Y.material instanceof n0&&(Y.material.opacity=U)}),R.position.x>y/2+3){R.position.x=-y/2-3;const Y=L*z-v*.5+z*.5,oe=(Math.random()-.5)*z*.6;k.initialY=Y+oe,R.position.y=k.initialY}}c.render(a,l)};return T(),()=>{s.current&&cancelAnimationFrame(s.current),i.current&&c.domElement&&i.current.removeChild(c.domElement),c.dispose(),x.dispose(),d.forEach(k=>{k.mesh.traverse(R=>{var P,M;R instanceof Ir&&(R.geometry&&R.geometry.dispose(),R.material&&(Array.isArray(R.material)?R.material.forEach(L=>{var z;return(z=L==null?void 0:L.dispose)==null?void 0:z.call(L)}):(M=(P=R.material)==null?void 0:P.dispose)==null||M.call(P)))})}),a.traverse(k=>{var R,P;k instanceof Ir&&(k.geometry&&k.geometry.dispose(),k.material&&(Array.isArray(k.material)?k.material.forEach(M=>{var L;return(L=M==null?void 0:M.dispose)==null?void 0:L.call(M)}):(P=(R=k.material)==null?void 0:R.dispose)==null||P.call(R)))})}},[t,e,n,r]),h.jsx("div",{ref:i,style:{width:`${t}px`,height:`${e}px`,display:"inline-block"}})},WC=({opacity:t=.05,cloudCount:e=4,isLight:n=!1})=>{const[r,i]=b.useState({width:typeof window<"u"?window.innerWidth:1e3,height:typeof window<"u"?window.innerHeight:800}),[s,o]=b.useState(!1);return b.useEffect(()=>{const a=()=>{const c=navigator.userAgent||"",u=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(c.toLowerCase()),d=window.innerWidth<=1024;return u||d},l=()=>{const c=a();o(c),c||i({width:window.innerWidth,height:window.innerHeight})};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),s?null:h.jsx("div",{className:"fixed pointer-events-none z-0",style:{opacity:t,top:"80px",left:0,right:0,bottom:"150px",overflow:"hidden"},children:h.jsx(Bpe,{width:r.width,height:r.height-230,cloudCount:e,isLightTheme:n})})},Hpe=()=>{const{login:t,currentUser:e,isAuthenticated:n,token:r}=to(),{theme:i}=Ts(),s=ya(),o=Re.useRef(!1),a=i==="light",l=a?"bg-gradient-to-br from-blue-50 to-indigo-100":"bg-gradient-to-br from-slate-900 to-slate-800",c=a?"text-gray-900":"text-slate-100",u=a?"text-gray-600":"text-slate-400",d=a?"bg-white":"bg-slate-800",p=a?"border-gray-100":"border-slate-700",m=a?"bg-blue-400":"bg-slate-600",x=a?"none":"invert(1) brightness(1.2)";console.log("Home component rendered:",{hasUser:!!e,hasToken:!!r,isAuthenticated:n,alreadyNavigated:o.current}),Re.useEffect(()=>{n&&!o.current&&(console.log("Navigating to /canvas due to authenticated user:",{user:e,token:r}),o.current=!0,setTimeout(()=>s("/canvas"),0))},[e,s,n,r]);const w=async()=>{try{console.log("Starting login process"),o.current=!1,await t(),console.log("Login process completed, will navigate to /canvas after auth context updates")}catch(v){console.error("Login failed:",v)}};return h.jsxs("div",{className:`min-h-screen ${l} overflow-hidden relative`,children:[h.jsx(WC,{opacity:a?.2:.15,cloudCount:15,isLight:a}),h.jsx("div",{className:"absolute inset-0 z-0 opacity-20",children:h.jsx("div",{className:"absolute top-0 left-0 w-full h-full",children:Array.from({length:10}).map((v,y)=>h.jsx("div",{className:`absolute rounded-full ${m}`,style:{width:`${Math.random()*300+50}px`,height:`${Math.random()*300+50}px`,top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,opacity:Math.random()*.2,transform:`scale(${Math.random()*1+.5})`,filter:"blur(60px)"}},`pattern-${y}`))})}),h.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("div",{className:"mb-2",children:h.jsx("img",{src:"/icon.png",alt:"Itemize",className:"h-20 md:h-24 w-auto mx-auto"})}),h.jsxs("h1",{className:`text-4xl font-light italic tracking-tight ${c} sm:text-5xl md:text-6xl`,style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsxs("div",{className:"flex flex-col items-center md:hidden gap-1 pb-2",children:[h.jsx("div",{className:"text-center w-full",children:h.jsx("div",{className:"text-2xl md:text-xl inline-block whitespace-nowrap font-light",children:"Organize confidently with"})}),h.jsx("div",{className:"mt-1",children:h.jsx("div",{className:`text-2xl md:text-2xl font-light italic tracking-wide ${u}`,children:"ITEMIZE"})})]}),h.jsxs("div",{className:"hidden md:flex flex-row items-center justify-center gap-3",children:[h.jsx("span",{children:"Organize your life"}),h.jsx("span",{children:"with"}),h.jsx("img",{src:"/profile.png",alt:"Itemize",className:"h-64 inline-block",style:{filter:x}})]})]}),h.jsx("p",{className:`mt-2 max-w-md mx-auto text-base ${u} sm:text-lg md:mt-3 md:text-xl md:max-w-3xl`,style:{fontFamily:'"Raleway", sans-serif'},children:"A complete organizational ecosystem with lists, notes, whiteboarding, and intelligent tools to streamline your workflow."}),h.jsx("div",{className:"mt-6 flex flex-col sm:flex-row gap-4 justify-center",children:h.jsxs($e,{onClick:w,className:"rounded-md px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 font-light text-white",size:"lg",children:["Get Started Free",h.jsx(e1,{className:"ml-2 h-5 w-5"})]})})]}),h.jsxs("div",{className:"mt-16 mb-12",children:[h.jsx("h2",{className:`text-3xl font-light italic text-center ${c} mb-8`,style:{fontFamily:'"Raleway", sans-serif'},children:"Tools to stay organized"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12",children:[h.jsxs("div",{className:`${d} p-8 rounded-xl shadow-sm border ${p} transform transition-all duration-300 hover:shadow-md hover:-translate-y-1`,children:[h.jsx("div",{className:`w-14 h-14 ${a?"bg-blue-100":"bg-blue-900"} rounded-full flex items-center justify-center mb-5`,children:h.jsx(mte,{className:"h-7 w-7 text-blue-600"})}),h.jsx("h3",{className:`text-xl font-semibold ${c} mb-3`,style:{fontFamily:'"Raleway", sans-serif'},children:"Organizational Tools"}),h.jsx("p",{className:u,style:{fontFamily:'"Raleway", sans-serif'},children:"Create and manage lists, notes, and any organizational content you need. From shopping lists to project notes, everything in one place."}),h.jsxs("div",{className:`mt-6 pt-4 border-t ${p}`,children:[h.jsxs("div",{className:"flex items-center text-sm text-blue-600",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(kr,{className:"h-4 w-4 mr-2"}),h.jsx("span",{children:"Lists, Notes, & Whiteboards"})]}),h.jsxs("div",{className:"flex items-center text-sm text-blue-600 mt-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(kr,{className:"h-4 w-4 mr-2"}),h.jsx("span",{children:"Easy categories & color groupings"})]})]})]}),h.jsxs("div",{className:`${d} p-8 rounded-xl shadow-sm border ${p} transform transition-all duration-300 hover:shadow-md hover:-translate-y-1`,children:[h.jsx("div",{className:`w-14 h-14 ${a?"bg-blue-100":"bg-blue-900"} rounded-full flex items-center justify-center mb-5`,children:h.jsx(oc,{className:"h-7 w-7 text-blue-600"})}),h.jsx("h3",{className:`text-xl font-semibold ${c} mb-3`,style:{fontFamily:'"Raleway", sans-serif'},children:"Smart Suggestions"}),h.jsx("p",{className:u,style:{fontFamily:'"Raleway", sans-serif'},children:"Let AI help you build lists faster with intelligent item suggestions and effortless autocomplete."}),h.jsxs("div",{className:`mt-6 pt-4 border-t ${p}`,children:[h.jsxs("div",{className:"flex items-center text-sm text-blue-600",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(kr,{className:"h-4 w-4 mr-2"}),h.jsx("span",{children:"AI-powered item suggestions"})]}),h.jsxs("div",{className:"flex items-center text-sm text-blue-600 mt-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(kr,{className:"h-4 w-4 mr-2"}),h.jsx("span",{children:"Effortless autocomplete"})]}),h.jsxs("div",{className:"flex items-center text-sm text-blue-600 mt-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(kr,{className:"h-4 w-4 mr-2"}),h.jsx("span",{children:"Context-aware suggestions"})]})]})]}),h.jsxs("div",{className:`${d} p-8 rounded-xl shadow-sm border ${p} transform transition-all duration-300 hover:shadow-md hover:-translate-y-1`,children:[h.jsx("div",{className:`w-14 h-14 ${a?"bg-blue-100":"bg-blue-900"} rounded-full flex items-center justify-center mb-5`,children:h.jsx(ste,{className:"h-7 w-7 text-blue-600"})}),h.jsx("h3",{className:`text-xl font-semibold ${c} mb-3`,style:{fontFamily:'"Raleway", sans-serif'},children:"Access Anywhere"}),h.jsx("p",{className:u,style:{fontFamily:'"Raleway", sans-serif'},children:"Your organizational tools are synced and available across all your devices whenever and wherever you need them."}),h.jsxs("div",{className:`mt-6 pt-4 border-t ${p}`,children:[h.jsxs("div",{className:"flex items-center text-sm text-blue-600",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(kr,{className:"h-4 w-4 mr-2"}),h.jsx("span",{children:"Real-time synchronization"})]}),h.jsxs("div",{className:"flex items-center text-sm text-blue-600 mt-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(kr,{className:"h-4 w-4 mr-2"}),h.jsx("span",{children:"Works offline too"})]})]})]})]})]}),h.jsxs("div",{className:"mt-16 mb-12",children:[h.jsx("div",{className:"text-center mb-8",children:h.jsx("h2",{className:`text-3xl font-light italic ${c} mb-4`,style:{fontFamily:'"Raleway", sans-serif'},children:"See them in action"})}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-7xl mx-auto",children:[h.jsxs("div",{className:`${d} rounded-xl shadow-sm border ${p} overflow-hidden`,children:[h.jsx("div",{className:"p-4 pb-2",children:h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`inline-block w-3 h-3 rounded-full border ${a?"border-gray-400":"border-slate-500"}`,style:{backgroundColor:"#4F46E5"}}),h.jsx(md,{className:`h-4 w-4 ${a?"text-slate-500":"text-slate-400"}`}),h.jsx("h3",{className:`text-lg font-medium ${c}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Features"})]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx(Wa,{className:`h-4 w-4 ${a?"text-gray-400":"text-slate-500"}`}),h.jsx("button",{className:"ml-2 p-1",children:h.jsxs("div",{className:"h-4 w-4 flex flex-col justify-center items-center",children:[h.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full mb-0.5`}),h.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full mb-0.5`}),h.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full`})]})})]})]})}),h.jsx("div",{className:"mb-2 px-6",children:h.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${a?"border-gray-300 bg-white text-gray-700":"border-slate-600 bg-slate-700 text-slate-300"} cursor-pointer`,style:{fontFamily:'"Raleway", sans-serif'},children:"Productivity"})}),h.jsxs("div",{className:"px-6 py-2",children:[h.jsx("div",{className:`w-full ${a?"bg-gray-100":"bg-slate-700"} rounded-full h-2 mb-1`,children:h.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:"75%",backgroundColor:"#4F46E5"}})}),h.jsx("div",{className:`text-xs ${a?"text-gray-500":"text-slate-400"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"6 of 8 completed"})]}),h.jsxs("div",{className:"px-6 py-2 space-y-0.5",children:[h.jsx("div",{className:"flex items-center py-1 group",children:h.jsxs("div",{className:"flex items-center flex-grow",children:[h.jsx("div",{className:"w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#4F46E5",borderColor:"#4F46E5"},children:h.jsx(kr,{className:"h-3 w-3 text-white"})}),h.jsx("span",{className:`line-through ${a?"text-gray-400":"text-slate-500"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Custom color coding"})]})}),h.jsx("div",{className:"flex items-center py-1 group",children:h.jsxs("div",{className:"flex items-center flex-grow",children:[h.jsx("div",{className:"w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#4F46E5",borderColor:"#4F46E5"},children:h.jsx(kr,{className:"h-3 w-3 text-white"})}),h.jsx("span",{className:`line-through ${a?"text-gray-400":"text-slate-500"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Cloud synchronization"})]})}),h.jsx("div",{className:"flex items-center py-1 group",children:h.jsxs("div",{className:"flex items-center flex-grow",children:[h.jsx("div",{className:"w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#4F46E5",borderColor:"#4F46E5"},children:h.jsx(kr,{className:"h-3 w-3 text-white"})}),h.jsx("span",{className:`line-through ${a?"text-gray-400":"text-slate-500"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Category assignment"})]})}),h.jsx("div",{className:"flex items-center py-1 group",children:h.jsxs("div",{className:"flex items-center flex-grow",children:[h.jsx("div",{className:"w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#4F46E5",borderColor:"#4F46E5"},children:h.jsx(kr,{className:"h-3 w-3 text-white"})}),h.jsx("span",{className:`line-through ${a?"text-gray-400":"text-slate-500"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Real-time collaboration"})]})}),h.jsx("div",{className:"flex items-center py-1 group",children:h.jsxs("div",{className:"flex items-center flex-grow",children:[h.jsx("div",{className:"w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#4F46E5",borderColor:"#4F46E5"},children:h.jsx(kr,{className:"h-3 w-3 text-white"})}),h.jsx("span",{className:`line-through ${a?"text-gray-400":"text-slate-500"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Drag & drop reordering"})]})}),h.jsx("div",{className:"flex items-center py-1 group",children:h.jsxs("div",{className:"flex items-center flex-grow",children:[h.jsx("div",{className:"w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#4F46E5",borderColor:"#4F46E5"},children:h.jsx(kr,{className:"h-3 w-3 text-white"})}),h.jsx("span",{className:c,style:{fontFamily:'"Raleway", sans-serif'},children:"AI-powered suggestions"})]})}),h.jsx("div",{className:"flex items-center py-1 group",children:h.jsxs("div",{className:"flex items-center flex-grow",children:[h.jsx("div",{className:"w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#4F46E5",borderColor:"#4F46E5"},children:h.jsx(kr,{className:"h-3 w-3 text-white"})}),h.jsx("span",{className:c,style:{fontFamily:'"Raleway", sans-serif'},children:"Cross-device access"})]})})]}),h.jsx("div",{className:`px-6 py-4 border-t ${p}`,children:h.jsxs("div",{className:`flex items-center space-x-2 ${a?"text-gray-400":"text-slate-500"}`,children:[h.jsx(mg,{className:"h-4 w-4"}),h.jsx("span",{className:"text-sm",style:{fontFamily:'"Raleway", sans-serif'},children:"Add new item..."}),h.jsx("div",{className:"ml-auto",children:h.jsx(oc,{className:"h-4 w-4 text-blue-600"})})]})})]}),h.jsxs("div",{className:`${d} rounded-xl shadow-sm border ${p} overflow-hidden h-full flex flex-col`,children:[h.jsx("div",{className:"p-4 pb-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`inline-block w-3 h-3 rounded-full border ${a?"border-gray-400":"border-slate-500"}`,style:{backgroundColor:"#F59E0B"}}),h.jsx(gd,{className:`h-4 w-4 ${a?"text-slate-500":"text-slate-400"}`}),h.jsx("h3",{className:`font-semibold ${c}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Combined Approach"})]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx(Wa,{className:`h-4 w-4 ${a?"text-gray-400":"text-slate-500"}`}),h.jsx("button",{className:"ml-2 p-1",children:h.jsxs("div",{className:"h-4 w-4 flex flex-col justify-center items-center",children:[h.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full mb-0.5`}),h.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full mb-0.5`}),h.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full`})]})})]})]})}),h.jsx("div",{className:"mb-2 px-6",children:h.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${a?"border-gray-300 bg-white text-gray-700":"border-slate-600 bg-slate-700 text-slate-300"} cursor-pointer`,style:{fontFamily:'"Raleway", sans-serif'},children:"Strategy"})}),h.jsx("div",{className:"mx-6 mb-3",children:h.jsxs("div",{className:`flex items-center gap-1 p-2 border-b ${p} ${a?"bg-gray-50":"bg-slate-700"}`,children:[h.jsxs("div",{className:`w-16 h-7 text-xs ${d} border ${p} rounded px-1 flex items-center justify-between`,children:[h.jsx(t4,{className:"h-3 w-3"}),h.jsx(Wa,{className:"h-2 w-2"})]}),h.jsxs("div",{className:"flex",children:[h.jsx("button",{className:"h-7 w-7 p-0 bg-accent text-accent-foreground rounded flex items-center justify-center",children:h.jsx(GU,{className:"h-3 w-3"})}),h.jsx("button",{className:`h-7 w-7 p-0 ${a?"hover:bg-gray-100":"hover:bg-slate-600"} rounded flex items-center justify-center`,children:h.jsx(JU,{className:"h-3 w-3"})}),h.jsx("button",{className:`h-7 w-7 p-0 ${a?"hover:bg-gray-100":"hover:bg-slate-600"} rounded flex items-center justify-center`,children:h.jsx(n4,{className:"h-3 w-3"})})]}),h.jsx("div",{className:`h-5 w-px ${a?"bg-gray-300":"bg-slate-600"}`}),h.jsxs("div",{className:"flex",children:[h.jsx("button",{className:"h-7 w-7 p-0 bg-accent text-accent-foreground rounded flex items-center justify-center",children:h.jsx(WU,{className:"h-3 w-3"})}),h.jsx("button",{className:`h-7 w-7 p-0 ${a?"hover:bg-gray-100":"hover:bg-slate-600"} rounded flex items-center justify-center`,children:h.jsx($U,{className:"h-3 w-3"})})]}),h.jsx("div",{className:`h-5 w-px ${a?"bg-gray-300":"bg-slate-600"}`}),h.jsxs("div",{className:"flex",children:[h.jsx("button",{className:`h-7 w-7 p-0 ${a?"hover:bg-gray-100":"hover:bg-slate-600"} rounded flex items-center justify-center`,children:h.jsx(ZU,{className:"h-3 w-3"})}),h.jsx("button",{className:`h-7 w-7 p-0 ${a?"hover:bg-gray-100":"hover:bg-slate-600"} rounded flex items-center justify-center`,children:h.jsx(QU,{className:"h-3 w-3"})}),h.jsx("button",{className:`h-7 w-7 p-0 ${a?"hover:bg-gray-100":"hover:bg-slate-600"} rounded flex items-center justify-center`,children:h.jsx(e4,{className:"h-3 w-3"})})]})]})}),h.jsx("div",{className:"flex-1 mx-6 mb-3",children:h.jsxs("div",{className:`${a?"bg-white":"bg-slate-800"} rounded-lg p-4 space-y-3 min-h-[200px]`,children:[h.jsx("h2",{className:`text-lg font-semibold ${a?"text-gray-900":"text-white"}`,children:"An Easy Choice"}),h.jsxs("p",{className:`text-sm ${a?"text-gray-700":"text-gray-300"}`,style:{fontFamily:'"Raleway", sans-serif'},children:["Intelligently combining ",h.jsx("strong",{children:"lists,"})," ",h.jsx("u",{children:"notes"})," and ",h.jsx("em",{children:"whiteboards"})," into one platform. Planning tasks or brainstorming projects? We got your ticket to an easy productivity boost."]}),h.jsx("div",{className:"space-y-1",children:h.jsxs("p",{className:`text-sm ${a?"text-gray-700":"text-gray-300"}`,style:{fontFamily:'"Raleway", sans-serif'},children:["Key benefits include custom color coding for visual organization, real-time cloud synchr",h.jsx("span",{className:a?"text-gray-400":"text-slate-500",children:"onization across all your devices, intelligent AI suggestions to boost productivity, and seamless category management to keep everything organized."})]})})]})}),h.jsx("div",{className:`px-6 py-4 border-t ${p}`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:`text-xs ${a?"text-gray-500":"text-slate-400"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Last edited: Just now"}),h.jsx("div",{title:"AI-powered suggestions",children:h.jsx(oc,{className:"h-4 w-4 text-amber-500"})})]})})]}),h.jsxs("div",{className:`${d} rounded-xl shadow-sm border ${p} overflow-hidden h-full flex flex-col`,children:[h.jsx("div",{className:"p-4 pb-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:`inline-block w-3 h-3 rounded-full border ${a?"border-gray-400":"border-slate-500"}`,style:{backgroundColor:"#10B981"}}),h.jsx(cl,{className:`h-4 w-4 ${a?"text-slate-500":"text-slate-400"}`}),h.jsx("h3",{className:`font-semibold ${c}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Project Brainstorming"})]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx(Wa,{className:`h-4 w-4 ${a?"text-gray-400":"text-slate-500"}`}),h.jsx("button",{className:"ml-2 p-1",children:h.jsxs("div",{className:"h-4 w-4 flex flex-col justify-center items-center",children:[h.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full mb-0.5`}),h.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full mb-0.5`}),h.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full`})]})})]})]})}),h.jsx("div",{className:"mb-3 px-6",children:h.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${a?"border-gray-300 bg-white text-gray-700":"border-slate-600 bg-slate-700 text-slate-300"} cursor-pointer`,style:{fontFamily:'"Raleway", sans-serif'},children:"Design"})}),h.jsx("div",{className:"mx-6 mb-3",children:h.jsxs("div",{className:`flex items-center gap-2 p-2 border ${p} ${a?"bg-gray-50":"bg-slate-700"} rounded-t-lg`,children:[h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{className:"h-6 w-6 p-0 bg-blue-600 hover:bg-blue-700 text-white rounded flex items-center justify-center",children:h.jsx(XU,{className:"h-3 w-3"})}),h.jsx("button",{className:`h-6 w-6 p-0 ${a?"hover:bg-gray-100":"hover:bg-slate-600"} rounded flex items-center justify-center`,children:h.jsx(YU,{className:"h-3 w-3"})})]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{className:"w-5 h-5 rounded border-2 border-blue-700 shadow-sm",style:{backgroundColor:"#2563eb"}}),h.jsx("button",{className:`w-5 h-5 rounded border ${a?"border-gray-300 hover:border-gray-400":"border-slate-600 hover:border-slate-500"} shadow-sm`,style:{backgroundColor:"#000000"}}),h.jsx("button",{className:`w-5 h-5 rounded border ${a?"border-gray-300 hover:border-gray-400":"border-slate-600 hover:border-slate-500"} shadow-sm`,style:{backgroundColor:"#FF0000"}}),h.jsx("button",{className:`w-5 h-5 rounded border ${a?"border-gray-300 hover:border-gray-400":"border-slate-600 hover:border-slate-500"} shadow-sm`,style:{backgroundColor:"#00FF00"}})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("span",{className:`text-xs ${a?"text-gray-600":"text-slate-400"}`,children:"Size:"}),h.jsx("div",{className:`w-8 h-1.5 ${a?"bg-gray-200":"bg-slate-600"} rounded-full relative`,children:h.jsx("div",{className:"absolute left-1/3 top-1/2 transform -translate-y-1/2 w-2 h-2 bg-blue-600 rounded-full border border-white shadow"})})]})]})}),h.jsx("div",{className:"flex-1 mx-6 mb-3",children:h.jsx("div",{className:"bg-white rounded-b-lg h-full flex flex-col relative border border-gray-200 border-t-0",style:{minHeight:"280px"},children:h.jsx("div",{className:"p-4 flex-1 flex flex-col justify-center items-center",children:h.jsx("img",{src:"/icon.png",alt:"Itemize logo",className:"w-32 h-32 object-contain"})})})}),h.jsx("div",{className:`px-6 py-4 border-t ${p}`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:`text-xs ${a?"text-gray-500":"text-slate-400"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Last edited: Just now"}),h.jsx("div",{title:"AI-powered suggestions",children:h.jsx(oc,{className:"h-4 w-4 text-green-500"})})]})})]})]}),h.jsx("div",{className:"text-center mt-8",children:h.jsxs($e,{onClick:w,className:"rounded-md px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 font-light text-white text-lg",size:"lg",children:["Start Organizing Today",h.jsx(e1,{className:"ml-2 h-6 w-6"})]})})]}),h.jsxs("div",{className:"max-w-6xl mx-auto mt-20",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("h2",{className:`text-3xl font-light italic ${c} mb-4`,style:{fontFamily:'"Raleway", sans-serif'},children:"Roadmap to 1.0"}),h.jsx("div",{className:"mb-8 flex justify-center",children:h.jsxs("button",{onClick:()=>s("/help/Version/0.8.2-overview"),className:"text-sm text-blue-500 hover:text-blue-600 flex items-center transition-colors",style:{fontFamily:'"Raleway", sans-serif'},children:["Version 0.8.2 Notes",h.jsx(e1,{className:"w-4 h-4 ml-1"})]})})]}),h.jsx("div",{className:`${d} rounded-lg p-8 border ${p} max-w-4xl mx-auto mb-12`,children:h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("span",{className:`progress-bar-text text-lg font-medium italic ${c}`,style:{fontFamily:'"Raleway", sans-serif'},children:"v0.8.2"}),h.jsx("span",{className:`progress-bar-text text-lg font-medium italic ${c}`,style:{fontFamily:'"Raleway", sans-serif'},children:"v1.0 Stable Release"})]}),h.jsx("div",{className:`w-full bg-gray-300 rounded-full h-3 ${a?"bg-gray-300":"bg-slate-700"}`,children:h.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-3 rounded-full transition-all duration-500",style:{width:"82%"}})})]})})})]})]})]})},Sn=b.forwardRef(({className:t,type:e,...n},r)=>h.jsx("input",{type:e,className:dt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Sn.displayName="Input";var Tw="Popover",[t5,W2e]=Mi(Tw,[Uc]),Ng=Uc(),[Vpe,Hc]=t5(Tw),n5=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=Ng(e),l=b.useRef(null),[c,u]=b.useState(!1),[d,p]=_s({prop:r,defaultProp:i??!1,onChange:s,caller:Tw});return h.jsx(lA,{...a,children:h.jsx(Vpe,{scope:e,contentId:Ur(),triggerRef:l,open:d,onOpenChange:p,onOpenToggle:b.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:c,onCustomAnchorAdd:b.useCallback(()=>u(!0),[]),onCustomAnchorRemove:b.useCallback(()=>u(!1),[]),modal:o,children:n})})};n5.displayName=Tw;var r5="PopoverAnchor",$pe=b.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Hc(r5,n),s=Ng(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return b.useEffect(()=>(o(),()=>a()),[o,a]),h.jsx(yg,{...s,...r,ref:e})});$pe.displayName=r5;var i5="PopoverTrigger",s5=b.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Hc(i5,n),s=Ng(n),o=Lt(e,i.triggerRef),a=h.jsx(bt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":u5(i.open),...r,ref:o,onClick:it(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:h.jsx(yg,{asChild:!0,...s,children:a})});s5.displayName=i5;var FA="PopoverPortal",[Wpe,Gpe]=t5(FA,{forceMount:void 0}),o5=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=Hc(FA,e);return h.jsx(Wpe,{scope:e,forceMount:n,children:h.jsx(Ms,{present:n||s.open,children:h.jsx(Ah,{asChild:!0,container:i,children:r})})})};o5.displayName=FA;var mh="PopoverContent",a5=b.forwardRef((t,e)=>{const n=Gpe(mh,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=Hc(mh,t.__scopePopover);return h.jsx(Ms,{present:r||s.open,children:s.modal?h.jsx(Xpe,{...i,ref:e}):h.jsx(Kpe,{...i,ref:e})})});a5.displayName=mh;var qpe=Rc("PopoverContent.RemoveScroll"),Xpe=b.forwardRef((t,e)=>{const n=Hc(mh,t.__scopePopover),r=b.useRef(null),i=Lt(e,r),s=b.useRef(!1);return b.useEffect(()=>{const o=r.current;if(o)return gw(o)},[]),h.jsx(bg,{as:qpe,allowPinchZoom:!0,children:h.jsx(l5,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:it(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:it(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:it(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Kpe=b.forwardRef((t,e)=>{const n=Hc(mh,t.__scopePopover),r=b.useRef(!1),i=b.useRef(!1);return h.jsx(l5,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),l5=b.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,p=Hc(mh,n),m=Ng(n);return pw(),h.jsx(xg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:h.jsx(pd,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:h.jsx(sw,{"data-state":u5(p.open),role:"dialog",id:p.contentId,...m,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),c5="PopoverClose",Ype=b.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Hc(c5,n);return h.jsx(bt.button,{type:"button",...r,ref:e,onClick:it(t.onClick,()=>i.onOpenChange(!1))})});Ype.displayName=c5;var Jpe="PopoverArrow",Qpe=b.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Ng(n);return h.jsx(ow,{...i,...r,ref:e})});Qpe.displayName=Jpe;function u5(t){return t?"open":"closed"}var Zpe=n5,eme=s5,tme=o5,d5=a5;const f5=Zpe,h5=eme,jA=b.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>h.jsx(tme,{children:h.jsx(d5,{ref:i,align:e,sideOffset:n,className:dt("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));jA.displayName=d5.displayName;var jI=1,nme=.9,rme=.8,ime=.17,q1=.1,X1=.999,sme=.9999,ome=.99,ame=/[\\\/_+.#"@\[\(\{&]/,lme=/[\\\/_+.#"@\[\(\{&]/g,cme=/[\s-]/,p5=/[\s-]/g;function GC(t,e,n,r,i,s,o){if(s===e.length)return i===t.length?jI:ome;var a=`${i},${s}`;if(o[a]!==void 0)return o[a];for(var l=r.charAt(s),c=n.indexOf(l,i),u=0,d,p,m,x;c>=0;)d=GC(t,e,n,r,c+1,s+1,o),d>u&&(c===i?d*=jI:ame.test(t.charAt(c-1))?(d*=rme,m=t.slice(i,c-1).match(lme),m&&i>0&&(d*=Math.pow(X1,m.length))):cme.test(t.charAt(c-1))?(d*=nme,x=t.slice(i,c-1).match(p5),x&&i>0&&(d*=Math.pow(X1,x.length))):(d*=ime,i>0&&(d*=Math.pow(X1,c-i))),t.charAt(c)!==e.charAt(s)&&(d*=sme)),(d<q1&&n.charAt(c-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(c-1)!==r.charAt(s))&&(p=GC(t,e,n,r,c+1,s+2,o),p*q1>d&&(d=p*q1)),d>u&&(u=d),c=n.indexOf(l,c+1);return o[a]=u,u}function UI(t){return t.toLowerCase().replace(p5," ")}function ume(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,GC(t,e,UI(t),UI(e),0,0,{})}var Aw="Dialog",[m5,g5]=Mi(Aw),[dme,Io]=m5(Aw),y5=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=b.useRef(null),l=b.useRef(null),[c,u]=_s({prop:r,defaultProp:i??!1,onChange:s,caller:Aw});return h.jsx(dme,{scope:e,triggerRef:a,contentRef:l,contentId:Ur(),titleId:Ur(),descriptionId:Ur(),open:c,onOpenChange:u,onOpenToggle:b.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};y5.displayName=Aw;var v5="DialogTrigger",x5=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Io(v5,n),s=Lt(e,i.triggerRef);return h.jsx(bt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":BA(i.open),...r,ref:s,onClick:it(t.onClick,i.onOpenToggle)})});x5.displayName=v5;var UA="DialogPortal",[fme,w5]=m5(UA,{forceMount:void 0}),b5=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Io(UA,e);return h.jsx(fme,{scope:e,forceMount:n,children:b.Children.map(r,o=>h.jsx(Ms,{present:n||s.open,children:h.jsx(Ah,{asChild:!0,container:i,children:o})}))})};b5.displayName=UA;var r0="DialogOverlay",S5=b.forwardRef((t,e)=>{const n=w5(r0,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Io(r0,t.__scopeDialog);return s.modal?h.jsx(Ms,{present:r||s.open,children:h.jsx(pme,{...i,ref:e})}):null});S5.displayName=r0;var hme=Rc("DialogOverlay.RemoveScroll"),pme=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Io(r0,n);return h.jsx(bg,{as:hme,allowPinchZoom:!0,shards:[i.contentRef],children:h.jsx(bt.div,{"data-state":BA(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),rd="DialogContent",_5=b.forwardRef((t,e)=>{const n=w5(rd,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Io(rd,t.__scopeDialog);return h.jsx(Ms,{present:r||s.open,children:s.modal?h.jsx(mme,{...i,ref:e}):h.jsx(gme,{...i,ref:e})})});_5.displayName=rd;var mme=b.forwardRef((t,e)=>{const n=Io(rd,t.__scopeDialog),r=b.useRef(null),i=Lt(e,n.contentRef,r);return b.useEffect(()=>{const s=r.current;if(s)return gw(s)},[]),h.jsx(E5,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:it(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:it(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:it(t.onFocusOutside,s=>s.preventDefault())})}),gme=b.forwardRef((t,e)=>{const n=Io(rd,t.__scopeDialog),r=b.useRef(!1),i=b.useRef(!1);return h.jsx(E5,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),E5=b.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Io(rd,n),l=b.useRef(null),c=Lt(e,l);return pw(),h.jsxs(h.Fragment,{children:[h.jsx(xg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:h.jsx(pd,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":BA(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(vme,{titleId:a.titleId}),h.jsx(wme,{contentRef:l,descriptionId:a.descriptionId})]})]})}),zA="DialogTitle",C5=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Io(zA,n);return h.jsx(bt.h2,{id:i.titleId,...r,ref:e})});C5.displayName=zA;var M5="DialogDescription",T5=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Io(M5,n);return h.jsx(bt.p,{id:i.descriptionId,...r,ref:e})});T5.displayName=M5;var A5="DialogClose",R5=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Io(A5,n);return h.jsx(bt.button,{type:"button",...r,ref:e,onClick:it(t.onClick,()=>i.onOpenChange(!1))})});R5.displayName=A5;function BA(t){return t?"open":"closed"}var N5="DialogTitleWarning",[yme,k5]=oee(N5,{contentName:rd,titleName:zA,docsSlug:"dialog"}),vme=({titleId:t})=>{const e=k5(N5),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},xme="DialogDescriptionWarning",wme=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${k5(xme).contentName}}.`;return b.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},HA=y5,bme=x5,VA=b5,Rw=S5,Nw=_5,$A=C5,WA=T5,GA=R5,Tp='[cmdk-group=""]',K1='[cmdk-group-items=""]',Sme='[cmdk-group-heading=""]',P5='[cmdk-item=""]',zI=`${P5}:not([aria-disabled="true"])`,qC="cmdk-item-select",of="data-value",_me=(t,e,n)=>ume(t,e,n),D5=b.createContext(void 0),kg=()=>b.useContext(D5),I5=b.createContext(void 0),qA=()=>b.useContext(I5),L5=b.createContext(void 0),O5=b.forwardRef((t,e)=>{let n=af(()=>{var $,U;return{search:"",value:(U=($=t.value)!=null?$:t.defaultValue)!=null?U:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=af(()=>new Set),i=af(()=>new Map),s=af(()=>new Map),o=af(()=>new Set),a=F5(t),{label:l,children:c,value:u,onValueChange:d,filter:p,shouldFilter:m,loop:x,disablePointerSelection:w=!1,vimBindings:v=!0,...y}=t,S=Ur(),E=Ur(),C=Ur(),A=b.useRef(null),T=Ime();id(()=>{if(u!==void 0){let $=u.trim();n.current.value=$,k.emit()}},[u]),id(()=>{T(6,H)},[]);let k=b.useMemo(()=>({subscribe:$=>(o.current.add($),()=>o.current.delete($)),snapshot:()=>n.current,setState:($,U,Y)=>{var oe,ne,Z,fe;if(!Object.is(n.current[$],U)){if(n.current[$]=U,$==="search")z(),M(),T(1,L);else if($==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let we=document.getElementById(C);we?we.focus():(oe=document.getElementById(S))==null||oe.focus()}if(T(7,()=>{var we;n.current.selectedItemId=(we=B())==null?void 0:we.id,k.emit()}),Y||T(5,H),((ne=a.current)==null?void 0:ne.value)!==void 0){let we=U??"";(fe=(Z=a.current).onValueChange)==null||fe.call(Z,we);return}}k.emit()}},emit:()=>{o.current.forEach($=>$())}}),[]),R=b.useMemo(()=>({value:($,U,Y)=>{var oe;U!==((oe=s.current.get($))==null?void 0:oe.value)&&(s.current.set($,{value:U,keywords:Y}),n.current.filtered.items.set($,P(U,Y)),T(2,()=>{M(),k.emit()}))},item:($,U)=>(r.current.add($),U&&(i.current.has(U)?i.current.get(U).add($):i.current.set(U,new Set([$]))),T(3,()=>{z(),M(),n.current.value||L(),k.emit()}),()=>{s.current.delete($),r.current.delete($),n.current.filtered.items.delete($);let Y=B();T(4,()=>{z(),(Y==null?void 0:Y.getAttribute("id"))===$&&L(),k.emit()})}),group:$=>(i.current.has($)||i.current.set($,new Set),()=>{s.current.delete($),i.current.delete($)}),filter:()=>a.current.shouldFilter,label:l||t["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:S,inputId:C,labelId:E,listInnerRef:A}),[]);function P($,U){var Y,oe;let ne=(oe=(Y=a.current)==null?void 0:Y.filter)!=null?oe:_me;return $?ne($,n.current.search,U):0}function M(){if(!n.current.search||a.current.shouldFilter===!1)return;let $=n.current.filtered.items,U=[];n.current.filtered.groups.forEach(oe=>{let ne=i.current.get(oe),Z=0;ne.forEach(fe=>{let we=$.get(fe);Z=Math.max(we,Z)}),U.push([oe,Z])});let Y=A.current;K().sort((oe,ne)=>{var Z,fe;let we=oe.getAttribute("id"),xe=ne.getAttribute("id");return((Z=$.get(xe))!=null?Z:0)-((fe=$.get(we))!=null?fe:0)}).forEach(oe=>{let ne=oe.closest(K1);ne?ne.appendChild(oe.parentElement===ne?oe:oe.closest(`${K1} > *`)):Y.appendChild(oe.parentElement===Y?oe:oe.closest(`${K1} > *`))}),U.sort((oe,ne)=>ne[1]-oe[1]).forEach(oe=>{var ne;let Z=(ne=A.current)==null?void 0:ne.querySelector(`${Tp}[${of}="${encodeURIComponent(oe[0])}"]`);Z==null||Z.parentElement.appendChild(Z)})}function L(){let $=K().find(Y=>Y.getAttribute("aria-disabled")!=="true"),U=$==null?void 0:$.getAttribute(of);k.setState("value",U||void 0)}function z(){var $,U,Y,oe;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let ne=0;for(let Z of r.current){let fe=(U=($=s.current.get(Z))==null?void 0:$.value)!=null?U:"",we=(oe=(Y=s.current.get(Z))==null?void 0:Y.keywords)!=null?oe:[],xe=P(fe,we);n.current.filtered.items.set(Z,xe),xe>0&&ne++}for(let[Z,fe]of i.current)for(let we of fe)if(n.current.filtered.items.get(we)>0){n.current.filtered.groups.add(Z);break}n.current.filtered.count=ne}function H(){var $,U,Y;let oe=B();oe&&((($=oe.parentElement)==null?void 0:$.firstChild)===oe&&((Y=(U=oe.closest(Tp))==null?void 0:U.querySelector(Sme))==null||Y.scrollIntoView({block:"nearest"})),oe.scrollIntoView({block:"nearest"}))}function B(){var $;return($=A.current)==null?void 0:$.querySelector(`${P5}[aria-selected="true"]`)}function K(){var $;return Array.from((($=A.current)==null?void 0:$.querySelectorAll(zI))||[])}function q($){let U=K()[$];U&&k.setState("value",U.getAttribute(of))}function ee($){var U;let Y=B(),oe=K(),ne=oe.findIndex(fe=>fe===Y),Z=oe[ne+$];(U=a.current)!=null&&U.loop&&(Z=ne+$<0?oe[oe.length-1]:ne+$===oe.length?oe[0]:oe[ne+$]),Z&&k.setState("value",Z.getAttribute(of))}function O($){let U=B(),Y=U==null?void 0:U.closest(Tp),oe;for(;Y&&!oe;)Y=$>0?Pme(Y,Tp):Dme(Y,Tp),oe=Y==null?void 0:Y.querySelector(zI);oe?k.setState("value",oe.getAttribute(of)):ee($)}let F=()=>q(K().length-1),D=$=>{$.preventDefault(),$.metaKey?F():$.altKey?O(1):ee(1)},ie=$=>{$.preventDefault(),$.metaKey?q(0):$.altKey?O(-1):ee(-1)};return b.createElement(bt.div,{ref:e,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:$=>{var U;(U=y.onKeyDown)==null||U.call(y,$);let Y=$.nativeEvent.isComposing||$.keyCode===229;if(!($.defaultPrevented||Y))switch($.key){case"n":case"j":{v&&$.ctrlKey&&D($);break}case"ArrowDown":{D($);break}case"p":case"k":{v&&$.ctrlKey&&ie($);break}case"ArrowUp":{ie($);break}case"Home":{$.preventDefault(),q(0);break}case"End":{$.preventDefault(),F();break}case"Enter":{$.preventDefault();let oe=B();if(oe){let ne=new Event(qC);oe.dispatchEvent(ne)}}}}},b.createElement("label",{"cmdk-label":"",htmlFor:R.inputId,id:R.labelId,style:Ome},l),kw(t,$=>b.createElement(I5.Provider,{value:k},b.createElement(D5.Provider,{value:R},$))))}),Eme=b.forwardRef((t,e)=>{var n,r;let i=Ur(),s=b.useRef(null),o=b.useContext(L5),a=kg(),l=F5(t),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;id(()=>{if(!c)return a.item(i,o==null?void 0:o.id)},[c]);let u=j5(i,s,[t.value,t.children,s],t.keywords),d=qA(),p=Ic(T=>T.value&&T.value===u.current),m=Ic(T=>c||a.filter()===!1?!0:T.search?T.filtered.items.get(i)>0:!0);b.useEffect(()=>{let T=s.current;if(!(!T||t.disabled))return T.addEventListener(qC,x),()=>T.removeEventListener(qC,x)},[m,t.onSelect,t.disabled]);function x(){var T,k;w(),(k=(T=l.current).onSelect)==null||k.call(T,u.current)}function w(){d.setState("value",u.current,!0)}if(!m)return null;let{disabled:v,value:y,onSelect:S,forceMount:E,keywords:C,...A}=t;return b.createElement(bt.div,{ref:il(s,e),...A,id:i,"cmdk-item":"",role:"option","aria-disabled":!!v,"aria-selected":!!p,"data-disabled":!!v,"data-selected":!!p,onPointerMove:v||a.getDisablePointerSelection()?void 0:w,onClick:v?void 0:x},t.children)}),Cme=b.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:i,...s}=t,o=Ur(),a=b.useRef(null),l=b.useRef(null),c=Ur(),u=kg(),d=Ic(m=>i||u.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);id(()=>u.group(o),[]),j5(o,a,[t.value,t.heading,l]);let p=b.useMemo(()=>({id:o,forceMount:i}),[i]);return b.createElement(bt.div,{ref:il(a,e),...s,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&b.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),kw(t,m=>b.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},b.createElement(L5.Provider,{value:p},m))))}),Mme=b.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,i=b.useRef(null),s=Ic(o=>!o.search);return!n&&!s?null:b.createElement(bt.div,{ref:il(i,e),...r,"cmdk-separator":"",role:"separator"})}),Tme=b.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,i=t.value!=null,s=qA(),o=Ic(c=>c.search),a=Ic(c=>c.selectedItemId),l=kg();return b.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),b.createElement(bt.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":a,id:l.inputId,type:"text",value:i?t.value:o,onChange:c=>{i||s.setState("search",c.target.value),n==null||n(c.target.value)}})}),Ame=b.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...i}=t,s=b.useRef(null),o=b.useRef(null),a=Ic(c=>c.selectedItemId),l=kg();return b.useEffect(()=>{if(o.current&&s.current){let c=o.current,u=s.current,d,p=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let m=c.offsetHeight;u.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return p.observe(c),()=>{cancelAnimationFrame(d),p.unobserve(c)}}},[]),b.createElement(bt.div,{ref:il(s,e),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":r,id:l.listId},kw(t,c=>b.createElement("div",{ref:il(o,l.listInnerRef),"cmdk-list-sizer":""},c)))}),Rme=b.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:s,container:o,...a}=t;return b.createElement(HA,{open:n,onOpenChange:r},b.createElement(VA,{container:o},b.createElement(Rw,{"cmdk-overlay":"",className:i}),b.createElement(Nw,{"aria-label":t.label,"cmdk-dialog":"",className:s},b.createElement(O5,{ref:e,...a}))))}),Nme=b.forwardRef((t,e)=>Ic(n=>n.filtered.count===0)?b.createElement(bt.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),kme=b.forwardRef((t,e)=>{let{progress:n,children:r,label:i="Loading...",...s}=t;return b.createElement(bt.div,{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},kw(t,o=>b.createElement("div",{"aria-hidden":!0},o)))}),Yi=Object.assign(O5,{List:Ame,Item:Eme,Input:Tme,Group:Cme,Separator:Mme,Dialog:Rme,Empty:Nme,Loading:kme});function Pme(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function Dme(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function F5(t){let e=b.useRef(t);return id(()=>{e.current=t}),e}var id=typeof window>"u"?b.useEffect:b.useLayoutEffect;function af(t){let e=b.useRef();return e.current===void 0&&(e.current=t()),e}function Ic(t){let e=qA(),n=()=>t(e.snapshot());return b.useSyncExternalStore(e.subscribe,n,n)}function j5(t,e,n,r=[]){let i=b.useRef(),s=kg();return id(()=>{var o;let a=(()=>{var c;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():i.current}})(),l=r.map(c=>c.trim());s.value(t,a,l),(o=e.current)==null||o.setAttribute(of,a),i.current=a}),i}var Ime=()=>{let[t,e]=b.useState(),n=af(()=>new Map);return id(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,i)=>{n.current.set(r,i),e({})}};function Lme(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function kw({asChild:t,children:e},n){return t&&b.isValidElement(e)?b.cloneElement(Lme(e),{ref:e.ref},n(e.props.children)):n(e)}var Ome={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Vc=HA,Fme=VA,U5=b.forwardRef(({className:t,...e},n)=>h.jsx(Rw,{ref:n,className:dt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));U5.displayName=Rw.displayName;const dl=b.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(Fme,{children:[h.jsx(U5,{}),h.jsxs(Nw,{ref:r,className:dt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,h.jsxs(GA,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[h.jsx(Do,{className:"h-4 w-4"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));dl.displayName=Nw.displayName;const fl=({className:t,...e})=>h.jsx("div",{className:dt("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});fl.displayName="DialogHeader";const hl=b.forwardRef(({className:t,...e},n)=>h.jsx($A,{ref:n,className:dt("text-lg font-semibold leading-none tracking-tight",t),...e}));hl.displayName=$A.displayName;const Pw=b.forwardRef(({className:t,...e},n)=>h.jsx(WA,{ref:n,className:dt("text-sm text-muted-foreground",t),...e}));Pw.displayName=WA.displayName;const z5=b.forwardRef(({className:t,...e},n)=>h.jsx(Yi,{ref:n,className:dt("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));z5.displayName=Yi.displayName;const B5=b.forwardRef(({className:t,...e},n)=>h.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[h.jsx(Ko,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),h.jsx(Yi.Input,{ref:n,className:dt("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));B5.displayName=Yi.Input.displayName;const H5=b.forwardRef(({className:t,...e},n)=>h.jsx(Yi.List,{ref:n,className:dt("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));H5.displayName=Yi.List.displayName;const V5=b.forwardRef((t,e)=>h.jsx(Yi.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));V5.displayName=Yi.Empty.displayName;const $5=b.forwardRef(({className:t,...e},n)=>h.jsx(Yi.Group,{ref:n,className:dt("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));$5.displayName=Yi.Group.displayName;const jme=b.forwardRef(({className:t,...e},n)=>h.jsx(Yi.Separator,{ref:n,className:dt("-mx-1 h-px bg-border",t),...e}));jme.displayName=Yi.Separator.displayName;const cx=b.forwardRef(({className:t,...e},n)=>h.jsx(Yi.Item,{ref:n,className:dt("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",t),...e}));cx.displayName=Yi.Item.displayName;const W5=({isOpen:t,onClose:e,onCreateList:n,existingCategories:r})=>{const[i,s]=b.useState(""),[o,a]=b.useState(""),[l,c]=b.useState(!1),[u,d]=b.useState(""),[p,m]=b.useState("#3B82F6");b.useEffect(()=>{u&&a(u)},[u]),b.useEffect(()=>{o||d("")},[o]);const x=v=>{if(v.preventDefault(),i.trim()){const y=o.trim()||"General";n(i.trim(),y,p),s(""),a(""),m("#3B82F6")}},w=()=>{s(""),a(""),m("#3B82F6"),e()};return h.jsx(Vc,{open:t,onOpenChange:w,children:h.jsxs(dl,{className:"sm:max-w-md",children:[h.jsx(fl,{children:h.jsx(hl,{children:"Create New List"})}),h.jsxs("form",{onSubmit:x,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx(Un,{htmlFor:"title",children:"List Title"}),h.jsx(Sn,{id:"title",placeholder:"Enter list title...",value:i,onChange:v=>s(v.target.value),className:"mt-1",autoFocus:!0})]}),h.jsxs("div",{children:[h.jsx(Un,{htmlFor:"customType",children:"Category (Optional)"}),h.jsxs(f5,{open:l,onOpenChange:c,children:[h.jsx(h5,{asChild:!0,children:h.jsxs($e,{variant:"outline",role:"combobox","aria-expanded":l,className:"w-full justify-between mt-1 font-normal",children:[o||"Select category or type new...",h.jsx(rte,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),h.jsx(jA,{className:"w-[--radix-popover-trigger-width] p-0",children:h.jsxs(z5,{children:[h.jsx(B5,{placeholder:"Search or create category...",value:o,onValueChange:v=>{a(v),d("")}}),h.jsxs(H5,{children:[h.jsx(V5,{children:o.trim()?`Create "${o}"`:"No category found."}),h.jsxs($5,{children:[!r.includes("General")&&h.jsxs(cx,{value:"General",onSelect:v=>{d(v===u?"":v),a(v===o?"":v),c(!1)},children:[h.jsx(wi,{className:dt("mr-2 h-4 w-4",o==="General"?"opacity-100":"opacity-0")}),"General"]},"General"),r.map(v=>h.jsxs(cx,{value:v,onSelect:y=>{d(y===u?"":y),a(y===o?"":y),c(!1)},children:[h.jsx(wi,{className:dt("mr-2 h-4 w-4",o===v?"opacity-100":"opacity-0")}),v]},v))]}),o.trim()&&!r.includes(o.trim())&&h.jsxs(cx,{value:o.trim(),onSelect:()=>{d(o.trim()),c(!1)},children:[h.jsx(xo,{className:"mr-2 h-4 w-4"}),'Create "',o.trim(),'"']},o.trim())]})]})})]}),h.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select an existing category, type a new one, or leave empty for "General".'}),r.length===0&&h.jsx("p",{className:"text-xs text-blue-600 mt-1",children:'No categories available yet. You can create your first category or use "General".'})]}),h.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[h.jsx($e,{type:"button",variant:"outline",onClick:w,children:"Cancel"}),h.jsx($e,{type:"submit",disabled:!i.trim(),className:"bg-blue-600 hover:bg-blue-700",children:"Create List"})]})]})]})})},ji=b.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:dt("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ji.displayName="Card";const hs=b.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:dt("flex flex-col space-y-1.5 p-6",t),...e}));hs.displayName="CardHeader";const Jo=b.forwardRef(({className:t,...e},n)=>h.jsx("h3",{ref:n,className:dt("text-2xl font-semibold leading-none tracking-tight",t),...e}));Jo.displayName="CardTitle";const Ume=b.forwardRef(({className:t,...e},n)=>h.jsx("p",{ref:n,className:dt("text-sm text-muted-foreground",t),...e}));Ume.displayName="CardDescription";const zs=b.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:dt("p-6 pt-0",t),...e}));zs.displayName="CardContent";const zme=b.forwardRef(({className:t,...e},n)=>h.jsx("div",{ref:n,className:dt("flex items-center p-6 pt-0",t),...e}));zme.displayName="CardFooter";var Dw="Collapsible",[Bme,G2e]=Mi(Dw),[Hme,XA]=Bme(Dw),G5=b.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:o,...a}=t,[l,c]=_s({prop:r,defaultProp:i??!1,onChange:o,caller:Dw});return h.jsx(Hme,{scope:n,disabled:s,contentId:Ur(),open:l,onOpenToggle:b.useCallback(()=>c(u=>!u),[c]),children:h.jsx(bt.div,{"data-state":YA(l),"data-disabled":s?"":void 0,...a,ref:e})})});G5.displayName=Dw;var q5="CollapsibleTrigger",X5=b.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=XA(q5,n);return h.jsx(bt.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":YA(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:it(t.onClick,i.onOpenToggle)})});X5.displayName=q5;var KA="CollapsibleContent",K5=b.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=XA(KA,t.__scopeCollapsible);return h.jsx(Ms,{present:n||i.open,children:({present:s})=>h.jsx(Vme,{...r,ref:e,present:s})})});K5.displayName=KA;var Vme=b.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...s}=t,o=XA(KA,n),[a,l]=b.useState(r),c=b.useRef(null),u=Lt(e,c),d=b.useRef(0),p=d.current,m=b.useRef(0),x=m.current,w=o.open||a,v=b.useRef(w),y=b.useRef(void 0);return b.useEffect(()=>{const S=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(S)},[]),Mr(()=>{const S=c.current;if(S){y.current=y.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";const E=S.getBoundingClientRect();d.current=E.height,m.current=E.width,v.current||(S.style.transitionDuration=y.current.transitionDuration,S.style.animationName=y.current.animationName),l(r)}},[o.open,r]),h.jsx(bt.div,{"data-state":YA(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!w,...s,ref:u,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...t.style},children:w&&i})});function YA(t){return t?"open":"closed"}var $me=G5;const JA=$me,QA=X5,ZA=K5,Wme=30*60*1e3,Gme=500,BI=2e3,qme=({enabled:t,listTitle:e,existingItems:n})=>{const[r,i]=b.useState([]),[s,o]=b.useState(0),[a,l]=b.useState(null),[c,u]=b.useState(!1),[d,p]=b.useState(null),m=b.useRef(null),x=b.useRef(0),{token:w}=to();b.useEffect(()=>{t||l(null)},[t]);const v=b.useCallback(()=>{try{const R=`itemize-suggestions-${e}-${n.join(",")}`,P=localStorage.getItem(R);if(P){const{suggestions:M,timestamp:L}=JSON.parse(P);if(Date.now()-L<Wme&&M&&M.length>0)return M}}catch(R){console.warn("Failed to read suggestion cache:",R)}return null},[e,n]),y=b.useCallback(R=>{try{if(!e||!R.length)return;const P=`itemize-suggestions-${e}-${n.join(",")}`,M={suggestions:R,timestamp:Date.now()};localStorage.setItem(P,JSON.stringify(M))}catch(P){console.warn("Failed to cache suggestions:",P)}},[e,n]),S=b.useCallback(async()=>{var L;if(m.current&&(clearTimeout(m.current),m.current=null),!t||!e||n.length===0){i([]),l(null);return}if(!w){p("You must be logged in to use AI suggestions");return}const R=v();if(R){console.log("Using cached suggestions for:",e),i(R),l(R[0]||null),u(!1);return}const M=Date.now()-x.current;if(M<BI){u(!0);const z=BI-M;console.log(`Throttling API call for ${z}ms`),m.current=setTimeout(()=>{S()},z);return}try{u(!0),p(null),x.current=Date.now();const z=Am(),H=await Tn.post(`${z}/api/suggestions`,{listTitle:e,existingItems:n.filter(B=>B.trim()!=="")},{withCredentials:!0,headers:{Authorization:`Bearer ${w}`}});if(H.data&&H.data.suggestions&&H.data.suggestions.length>0){const B=H.data.suggestions;i(B),l(B[0]),o(0),y(B)}else i([]),l(null)}catch(z){console.error("Failed to fetch AI suggestions:",z),((L=z==null?void 0:z.response)==null?void 0:L.status)===401?p("Session expired. Please log in again to use AI suggestions."):p(z instanceof Error?z.message:"Failed to get suggestions"),i([]),l(null)}finally{u(!1)}},[t,e,n,w,v,y]),E=b.useCallback(()=>{m.current&&clearTimeout(m.current),u(!0),m.current=setTimeout(()=>{S()},Gme)},[S]),C=b.useCallback(R=>{if(!t||!R.trim())return null;if(r.length>0){const P=R.toLowerCase().trim(),M=r.filter(z=>z.toLowerCase().startsWith(P)&&z.toLowerCase()!==P);if(M.length>0)return console.log("Using API suggestion (prefix match):",M[0]),M[0];const L=r.filter(z=>z.toLowerCase().includes(P)&&z.toLowerCase()!==P);if(L.length>0)return console.log("Using API suggestion (contains match):",L[0]),L[0]}return null},[t,r]),A=b.useCallback(R=>{const P=r.filter(M=>M.toLowerCase()!==R.toLowerCase());return P.length>0?l(P[0]):l(null),R},[r]),T=b.useCallback(()=>{if(r.length===0)return null;const R=(s+1)%r.length;o(R);const P=r[R];return l(P),P},[r,s]),k=b.useCallback(()=>r.length>0?r[0]:null,[r]);return b.useEffect(()=>{if(t&&!a){const R=k();R?l(R):E()}},[t,a,k,E]),{currentSuggestion:a,suggestions:r,isLoading:c,error:d,debouncedFetchSuggestions:E,fetchSuggestions:S,getSuggestionForInput:C,acceptSuggestion:A,getNextSuggestion:T,generateContextSuggestion:k}},Xme=({list:t,onUpdate:e,onDelete:n,isCollapsed:r,onToggleCollapsed:i,existingCategories:s=[],addCategory:o,updateCategory:a})=>{const{aiEnabled:l,setAiEnabled:c}=gA(),u=t.items.map(Ne=>Ne.text),{currentSuggestion:d,suggestions:p,isLoading:m,debouncedFetchSuggestions:x,getNextSuggestion:w,getSuggestionForInput:v}=qme({enabled:l,listTitle:t.title,existingItems:u});b.useEffect(()=>{l&&!d&&x()},[l,d,x]);const{toast:y}=rr(),[S,E]=b.useState(!0),C=r!==void 0?!r:S,A=i||E,[T,k]=b.useState(!1),[R,P]=b.useState(t.title),[M,L]=b.useState(!1),[z,H]=b.useState(!1),[B,K]=b.useState(""),[q,ee]=b.useState(""),[O,F]=b.useState(null),[D,ie]=b.useState(""),[$,U]=b.useState(!1),Y=b.useRef(null),oe=b.useRef(null);b.useEffect(()=>{P(t.title)},[t.title]);const ne=()=>{R.trim()!==""?(e({...t,title:R.trim()}),k(!1)):y({title:"Title cannot be empty",description:"Please enter a valid list title",variant:"destructive"})},Z=()=>{n(t.id)},fe=async Ne=>{if(Ne==="__custom__"){H(!0);return}if(Ne.trim()&&!s.find(Me=>Me.name===Ne)&&o)try{await o({name:Ne.trim(),color_value:"#3B82F6"})}catch(Me){console.error("Failed to create category in database:",Me)}e({...t,type:Ne}),L(!1),H(!1)},we=async()=>{if(B.trim()!=="")try{o&&await o({name:B.trim(),color_value:"#3B82F6"}),e({...t,type:B.trim()}),L(!1),H(!1),K("")}catch(Ne){console.error("Failed to create category:",Ne),y({title:"Error creating category",description:"Could not create the category. Please try again.",variant:"destructive"})}else y({title:"Category cannot be empty",description:"Please enter a valid category name",variant:"destructive"})},xe=async(Ne,Me)=>{try{await a(Ne,{color_value:Me})}catch(st){console.error("Failed to update category color:",st),y({title:"Error",description:"Could not update category color.",variant:"destructive"})}},Ve=()=>{if(q.trim()!==""){const Ne={id:crypto.randomUUID(),text:q.trim(),completed:!1};e({...t,items:[...t.items,Ne]}),ee("")}},Pe=Ne=>{const Me=t.items.map(st=>st.id===Ne?{...st,completed:!st.completed}:st);e({...t,items:Me})},et=Ne=>{const Me=t.items.filter(st=>st.id!==Ne);e({...t,items:Me})},te=Ne=>{F(Ne.id),ie(Ne.text)},ft=()=>{if(O&&D.trim()!==""){const Ne=t.items.map(Me=>Me.id===O?{...Me,text:D.trim()}:Me);e({...t,items:Ne}),F(null),ie("")}else D.trim()===""&&y({title:"Item text cannot be empty",description:"Please enter valid text for the item",variant:"destructive"})},Ye=b.useMemo(()=>!l||!q?null:v(q),[l,q,v]);return{isCollapsibleOpen:C,setIsCollapsibleOpen:A,isEditing:T,setIsEditing:k,editTitle:R,setEditTitle:P,handleEditTitle:ne,handleDeleteList:Z,handleSaveListColor:async Ne=>{U(!0);try{await new Promise(Me=>setTimeout(Me,1e3)),e({...t,color_value:Ne})}catch(Me){throw console.error("Failed to save list color:",Me),Me}finally{U(!1)}},isSavingColor:$,isEditingCategory:M,setIsEditingCategory:L,showNewCategoryInput:z,setShowNewCategoryInput:H,newCategory:B,setNewCategory:K,handleEditCategory:fe,handleAddCustomCategory:we,handleUpdateCategoryColor:xe,newItemText:q,setNewItemText:ee,editingItemId:O,editingItemText:D,setEditingItemText:ie,handleAddItem:Ve,toggleItemCompleted:Pe,removeItem:et,startEditingItem:te,handleEditItem:ft,suggestions:p,isLoadingSuggestions:m,aiEnabled:l,setAiEnabled:c,currentSuggestion:d,currentInputSuggestion:Ye,handleGetSuggestion:()=>{if(console.log("Getting next suggestion"),!l)c(!0),setTimeout(()=>x(),100);else if(d){const Ne={id:crypto.randomUUID(),text:d,completed:!1};e({...t,items:[...t.items,Ne]}),w()}else x()},handleAcceptSuggestion:()=>{Ye?ee(Ye):d&&ee(d)},titleEditRef:Y,newItemInputRef:oe}},Kme=["#EF4444","#F97316","#EAB308","#22C55E","#10B981","#14B8A6","#06B6D4","#3B82F6","#6366F1","#8B5CF6","#A855F7","#EC4899","#F87171","#FBBF24","#4ADE80","#60A5FA","#C084FC","#78716C","#D1D5DB","#9CA3AF","#6B7280","#4B5563","#374151","#1F2937"],pl=({color:t,onChange:e,onSave:n,children:r,className:i})=>{const[s,o]=Re.useState(!1),a=l=>{e(l),n&&n(l),o(!1)};return h.jsxs(f5,{open:s,onOpenChange:o,children:[h.jsx(h5,{asChild:!0,className:i,children:r}),h.jsx(jA,{className:"w-auto p-2 shadow-xl grid grid-cols-6 gap-1",align:"start",children:Kme.map(l=>h.jsx("button",{title:l,onClick:()=>a(l),className:`w-6 h-6 rounded-full border-2 transition-all
                        ${t===l?"ring-2 ring-offset-1 ring-primary":"hover:opacity-80"}
                        focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-primary`,style:{backgroundColor:l,borderColor:l===t?"var(--primary)":l}},l))})]})},Yme=({title:t,listColor:e,isEditing:n,editTitle:r,isCollapsibleOpen:i,setEditTitle:s,setIsEditing:o,handleEditTitle:a,handleDeleteList:l,handleShareList:c,titleEditRef:u,onColorSave:d,isSavingColor:p})=>{const{toast:m}=rr(),[x,w]=Re.useState(e||"#808080");Re.useEffect(()=>{w(e||"#808080")},[e]);const v=x;return h.jsx(hs,{className:"pb-2",children:h.jsx("div",{className:"flex justify-between items-center",children:n?h.jsxs("div",{className:"flex gap-1 w-full",children:[h.jsx(Sn,{ref:u,value:r,onChange:y=>s(y.target.value),className:"h-8",autoFocus:!0,onKeyDown:y=>{y.key==="Enter"&&a()}}),h.jsx($e,{size:"sm",variant:"ghost",onClick:a,className:"h-8 w-8 p-0",children:h.jsx(wi,{className:"h-4 w-4"})}),h.jsx($e,{size:"sm",variant:"ghost",onClick:()=>o(!1),className:"h-8 w-8 p-0",children:h.jsx(Do,{className:"h-4 w-4"})})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(pl,{color:v,onChange:y=>{w(y)},onSave:async y=>{if(y!==(e||"#808080"))try{await d(y)}catch{m({title:"Error",description:"Could not save color. Reverting preview.",variant:"destructive"}),w(e||"#808080")}},children:h.jsxs($e,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0 rounded-full flex items-center justify-center relative","aria-label":"Change list color",disabled:p,children:[h.jsx("span",{className:"inline-block w-3 h-3 rounded-full border border-gray-400 transition-colors duration-150",style:{backgroundColor:v}}),p&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 rounded-full",children:h.jsx("div",{className:"h-2 w-2 animate-spin rounded-full border-2 border-solid border-current border-r-transparent"})})]})}),h.jsx(md,{className:"h-4 w-4 text-slate-500"}),h.jsx(Jo,{className:"text-lg font-medium cursor-pointer",style:{fontFamily:'"Raleway", sans-serif'},onClick:()=>o(!0),children:t})]}),h.jsxs("div",{className:"flex",children:[h.jsx(QA,{asChild:!0,children:h.jsx($e,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:h.jsx(Wa,{className:dt("h-4 w-4 transition-transform",i?"":"transform rotate-180")})})}),h.jsxs(bw,{children:[h.jsx(Sw,{asChild:!0,children:h.jsx($e,{variant:"ghost",className:"h-8 w-8 p-0",children:h.jsx(qT,{className:"h-4 w-4"})})}),h.jsxs(Eg,{align:"end",children:[h.jsxs(xs,{onClick:()=>o(!0),style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(mg,{className:"mr-2 h-4 w-4"}),"Edit Title"]}),h.jsxs(xs,{onClick:c,style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(Rh,{className:"mr-2 h-4 w-4"}),"Share"]}),h.jsxs(xs,{onClick:l,className:"text-red-600",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(tw,{className:"mr-2 h-4 w-4"}),"Delete List"]})]})]})]})]})})})};function i0(t,[e,n]){return Math.min(n,Math.max(e,t))}var Jme=[" ","Enter","ArrowUp","ArrowDown"],Qme=[" ","Enter"],sd="Select",[Iw,Lw,Zme]=fg(sd),[Fh,q2e]=Mi(sd,[Zme,Uc]),Ow=Uc(),[ege,$c]=Fh(sd),[tge,nge]=Fh(sd),Y5=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:p,required:m,form:x}=t,w=Ow(e),[v,y]=b.useState(null),[S,E]=b.useState(null),[C,A]=b.useState(!1),T=vg(c),[k,R]=_s({prop:r,defaultProp:i??!1,onChange:s,caller:sd}),[P,M]=_s({prop:o,defaultProp:a,onChange:l,caller:sd}),L=b.useRef(null),z=v?x||!!v.closest("form"):!0,[H,B]=b.useState(new Set),K=Array.from(H).map(q=>q.props.value).join(";");return h.jsx(lA,{...w,children:h.jsxs(ege,{required:m,scope:e,trigger:v,onTriggerChange:y,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:A,contentId:Ur(),value:P,onValueChange:M,open:k,onOpenChange:R,dir:T,triggerPointerDownPosRef:L,disabled:p,children:[h.jsx(Iw.Provider,{scope:e,children:h.jsx(tge,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(q=>{B(ee=>new Set(ee).add(q))},[]),onNativeOptionRemove:b.useCallback(q=>{B(ee=>{const O=new Set(ee);return O.delete(q),O})},[]),children:n})}),z?h.jsxs(wH,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:d,value:P,onChange:q=>M(q.target.value),disabled:p,form:x,children:[P===void 0?h.jsx("option",{value:""}):null,Array.from(H)]},K):null]})})};Y5.displayName=sd;var J5="SelectTrigger",Q5=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=Ow(n),o=$c(J5,n),a=o.disabled||r,l=Lt(e,o.onTriggerChange),c=Lw(n),u=b.useRef("touch"),[d,p,m]=SH(w=>{const v=c().filter(E=>!E.disabled),y=v.find(E=>E.value===o.value),S=_H(v,w,y);S!==void 0&&o.onValueChange(S.value)}),x=w=>{a||(o.onOpenChange(!0),m()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return h.jsx(yg,{asChild:!0,...s,children:h.jsx(bt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":bH(o.value)?"":void 0,...i,ref:l,onClick:it(i.onClick,w=>{w.currentTarget.focus(),u.current!=="mouse"&&x(w)}),onPointerDown:it(i.onPointerDown,w=>{u.current=w.pointerType;const v=w.target;v.hasPointerCapture(w.pointerId)&&v.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(x(w),w.preventDefault())}),onKeyDown:it(i.onKeyDown,w=>{const v=d.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&p(w.key),!(v&&w.key===" ")&&Jme.includes(w.key)&&(x(),w.preventDefault())})})})});Q5.displayName=J5;var Z5="SelectValue",eH=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=$c(Z5,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=Lt(e,l.onValueNodeChange);return Mr(()=>{c(u)},[c,u]),h.jsx(bt.span,{...a,ref:d,style:{pointerEvents:"none"},children:bH(l.value)?h.jsx(h.Fragment,{children:o}):s})});eH.displayName=Z5;var rge="SelectIcon",tH=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return h.jsx(bt.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});tH.displayName=rge;var ige="SelectPortal",nH=t=>h.jsx(Ah,{asChild:!0,...t});nH.displayName=ige;var od="SelectContent",rH=b.forwardRef((t,e)=>{const n=$c(od,t.__scopeSelect),[r,i]=b.useState();if(Mr(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?Ks.createPortal(h.jsx(iH,{scope:t.__scopeSelect,children:h.jsx(Iw.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),s):null}return h.jsx(sH,{...t,ref:e})});rH.displayName=od;var fo=10,[iH,Wc]=Fh(od),sge="SelectContentImpl",oge=Rc("SelectContent.RemoveScroll"),sH=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:p,collisionPadding:m,sticky:x,hideWhenDetached:w,avoidCollisions:v,...y}=t,S=$c(od,n),[E,C]=b.useState(null),[A,T]=b.useState(null),k=Lt(e,Z=>C(Z)),[R,P]=b.useState(null),[M,L]=b.useState(null),z=Lw(n),[H,B]=b.useState(!1),K=b.useRef(!1);b.useEffect(()=>{if(E)return gw(E)},[E]),pw();const q=b.useCallback(Z=>{const[fe,...we]=z().map(Pe=>Pe.ref.current),[xe]=we.slice(-1),Ve=document.activeElement;for(const Pe of Z)if(Pe===Ve||(Pe==null||Pe.scrollIntoView({block:"nearest"}),Pe===fe&&A&&(A.scrollTop=0),Pe===xe&&A&&(A.scrollTop=A.scrollHeight),Pe==null||Pe.focus(),document.activeElement!==Ve))return},[z,A]),ee=b.useCallback(()=>q([R,E]),[q,R,E]);b.useEffect(()=>{H&&ee()},[H,ee]);const{onOpenChange:O,triggerPointerDownPosRef:F}=S;b.useEffect(()=>{if(E){let Z={x:0,y:0};const fe=xe=>{var Ve,Pe;Z={x:Math.abs(Math.round(xe.pageX)-(((Ve=F.current)==null?void 0:Ve.x)??0)),y:Math.abs(Math.round(xe.pageY)-(((Pe=F.current)==null?void 0:Pe.y)??0))}},we=xe=>{Z.x<=10&&Z.y<=10?xe.preventDefault():E.contains(xe.target)||O(!1),document.removeEventListener("pointermove",fe),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",fe),document.addEventListener("pointerup",we,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",fe),document.removeEventListener("pointerup",we,{capture:!0})}}},[E,O,F]),b.useEffect(()=>{const Z=()=>O(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[O]);const[D,ie]=SH(Z=>{const fe=z().filter(Ve=>!Ve.disabled),we=fe.find(Ve=>Ve.ref.current===document.activeElement),xe=_H(fe,Z,we);xe&&setTimeout(()=>xe.ref.current.focus())}),$=b.useCallback((Z,fe,we)=>{const xe=!K.current&&!we;(S.value!==void 0&&S.value===fe||xe)&&(P(Z),xe&&(K.current=!0))},[S.value]),U=b.useCallback(()=>E==null?void 0:E.focus(),[E]),Y=b.useCallback((Z,fe,we)=>{const xe=!K.current&&!we;(S.value!==void 0&&S.value===fe||xe)&&L(Z)},[S.value]),oe=r==="popper"?XC:oH,ne=oe===XC?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:p,collisionPadding:m,sticky:x,hideWhenDetached:w,avoidCollisions:v}:{};return h.jsx(iH,{scope:n,content:E,viewport:A,onViewportChange:T,itemRefCallback:$,selectedItem:R,onItemLeave:U,itemTextRefCallback:Y,focusSelectedItem:ee,selectedItemText:M,position:r,isPositioned:H,searchRef:D,children:h.jsx(bg,{as:oge,allowPinchZoom:!0,children:h.jsx(xg,{asChild:!0,trapped:S.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:it(i,Z=>{var fe;(fe=S.trigger)==null||fe.focus({preventScroll:!0}),Z.preventDefault()}),children:h.jsx(pd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:h.jsx(oe,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Z=>Z.preventDefault(),...y,...ne,onPlaced:()=>B(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:it(y.onKeyDown,Z=>{const fe=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!fe&&Z.key.length===1&&ie(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let xe=z().filter(Ve=>!Ve.disabled).map(Ve=>Ve.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(xe=xe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const Ve=Z.target,Pe=xe.indexOf(Ve);xe=xe.slice(Pe+1)}setTimeout(()=>q(xe)),Z.preventDefault()}})})})})})})});sH.displayName=sge;var age="SelectItemAlignedPosition",oH=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=$c(od,n),o=Wc(od,n),[a,l]=b.useState(null),[c,u]=b.useState(null),d=Lt(e,k=>u(k)),p=Lw(n),m=b.useRef(!1),x=b.useRef(!0),{viewport:w,selectedItem:v,selectedItemText:y,focusSelectedItem:S}=o,E=b.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&w&&v&&y){const k=s.trigger.getBoundingClientRect(),R=c.getBoundingClientRect(),P=s.valueNode.getBoundingClientRect(),M=y.getBoundingClientRect();if(s.dir!=="rtl"){const Ve=M.left-R.left,Pe=P.left-Ve,et=k.left-Pe,te=k.width+et,ft=Math.max(te,R.width),Ye=window.innerWidth-fo,ht=i0(Pe,[fo,Math.max(fo,Ye-ft)]);a.style.minWidth=te+"px",a.style.left=ht+"px"}else{const Ve=R.right-M.right,Pe=window.innerWidth-P.right-Ve,et=window.innerWidth-k.right-Pe,te=k.width+et,ft=Math.max(te,R.width),Ye=window.innerWidth-fo,ht=i0(Pe,[fo,Math.max(fo,Ye-ft)]);a.style.minWidth=te+"px",a.style.right=ht+"px"}const L=p(),z=window.innerHeight-fo*2,H=w.scrollHeight,B=window.getComputedStyle(c),K=parseInt(B.borderTopWidth,10),q=parseInt(B.paddingTop,10),ee=parseInt(B.borderBottomWidth,10),O=parseInt(B.paddingBottom,10),F=K+q+H+O+ee,D=Math.min(v.offsetHeight*5,F),ie=window.getComputedStyle(w),$=parseInt(ie.paddingTop,10),U=parseInt(ie.paddingBottom,10),Y=k.top+k.height/2-fo,oe=z-Y,ne=v.offsetHeight/2,Z=v.offsetTop+ne,fe=K+q+Z,we=F-fe;if(fe<=Y){const Ve=L.length>0&&v===L[L.length-1].ref.current;a.style.bottom="0px";const Pe=c.clientHeight-w.offsetTop-w.offsetHeight,et=Math.max(oe,ne+(Ve?U:0)+Pe+ee),te=fe+et;a.style.height=te+"px"}else{const Ve=L.length>0&&v===L[0].ref.current;a.style.top="0px";const et=Math.max(Y,K+w.offsetTop+(Ve?$:0)+ne)+we;a.style.height=et+"px",w.scrollTop=fe-Y+w.offsetTop}a.style.margin=`${fo}px 0`,a.style.minHeight=D+"px",a.style.maxHeight=z+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[p,s.trigger,s.valueNode,a,c,w,v,y,s.dir,r]);Mr(()=>E(),[E]);const[C,A]=b.useState();Mr(()=>{c&&A(window.getComputedStyle(c).zIndex)},[c]);const T=b.useCallback(k=>{k&&x.current===!0&&(E(),S==null||S(),x.current=!1)},[E,S]);return h.jsx(cge,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:T,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:h.jsx(bt.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});oH.displayName=age;var lge="SelectPopperPosition",XC=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=fo,...s}=t,o=Ow(n);return h.jsx(sw,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});XC.displayName=lge;var[cge,eR]=Fh(od,{}),KC="SelectViewport",aH=b.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=Wc(KC,n),o=eR(KC,n),a=Lt(e,s.onViewportChange),l=b.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),h.jsx(Iw.Slot,{scope:n,children:h.jsx(bt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:it(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&d){const m=Math.abs(l.current-u.scrollTop);if(m>0){const x=window.innerHeight-fo*2,w=parseFloat(d.style.minHeight),v=parseFloat(d.style.height),y=Math.max(w,v);if(y<x){const S=y+m,E=Math.min(x,S),C=S-E;d.style.height=E+"px",d.style.bottom==="0px"&&(u.scrollTop=C>0?C:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});aH.displayName=KC;var lH="SelectGroup",[uge,dge]=Fh(lH),fge=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Ur();return h.jsx(uge,{scope:n,id:i,children:h.jsx(bt.div,{role:"group","aria-labelledby":i,...r,ref:e})})});fge.displayName=lH;var cH="SelectLabel",uH=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=dge(cH,n);return h.jsx(bt.div,{id:i.id,...r,ref:e})});uH.displayName=cH;var s0="SelectItem",[hge,dH]=Fh(s0),fH=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=$c(s0,n),l=Wc(s0,n),c=a.value===r,[u,d]=b.useState(s??""),[p,m]=b.useState(!1),x=Lt(e,S=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,S,r,i)}),w=Ur(),v=b.useRef("touch"),y=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(hge,{scope:n,value:r,disabled:i,textId:w,isSelected:c,onItemTextChange:b.useCallback(S=>{d(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:h.jsx(Iw.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:h.jsx(bt.div,{role:"option","aria-labelledby":w,"data-highlighted":p?"":void 0,"aria-selected":c&&p,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:x,onFocus:it(o.onFocus,()=>m(!0)),onBlur:it(o.onBlur,()=>m(!1)),onClick:it(o.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:it(o.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:it(o.onPointerDown,S=>{v.current=S.pointerType}),onPointerMove:it(o.onPointerMove,S=>{var E;v.current=S.pointerType,i?(E=l.onItemLeave)==null||E.call(l):v.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:it(o.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:it(o.onKeyDown,S=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&S.key===" "||(Qme.includes(S.key)&&y(),S.key===" "&&S.preventDefault())})})})})});fH.displayName=s0;var zp="SelectItemText",hH=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=$c(zp,n),a=Wc(zp,n),l=dH(zp,n),c=nge(zp,n),[u,d]=b.useState(null),p=Lt(e,y=>d(y),l.onItemTextChange,y=>{var S;return(S=a.itemTextRefCallback)==null?void 0:S.call(a,y,l.value,l.disabled)}),m=u==null?void 0:u.textContent,x=b.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:w,onNativeOptionRemove:v}=c;return Mr(()=>(w(x),()=>v(x)),[w,v,x]),h.jsxs(h.Fragment,{children:[h.jsx(bt.span,{id:l.textId,...s,ref:p}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ks.createPortal(s.children,o.valueNode):null]})});hH.displayName=zp;var pH="SelectItemIndicator",mH=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return dH(pH,n).isSelected?h.jsx(bt.span,{"aria-hidden":!0,...r,ref:e}):null});mH.displayName=pH;var YC="SelectScrollUpButton",gH=b.forwardRef((t,e)=>{const n=Wc(YC,t.__scopeSelect),r=eR(YC,t.__scopeSelect),[i,s]=b.useState(!1),o=Lt(e,r.onScrollButtonChange);return Mr(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?h.jsx(vH,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});gH.displayName=YC;var JC="SelectScrollDownButton",yH=b.forwardRef((t,e)=>{const n=Wc(JC,t.__scopeSelect),r=eR(JC,t.__scopeSelect),[i,s]=b.useState(!1),o=Lt(e,r.onScrollButtonChange);return Mr(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?h.jsx(vH,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});yH.displayName=JC;var vH=b.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=Wc("SelectScrollButton",n),o=b.useRef(null),a=Lw(n),l=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>l(),[l]),Mr(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(bt.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:it(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:it(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:it(i.onPointerLeave,()=>{l()})})}),pge="SelectSeparator",xH=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return h.jsx(bt.div,{"aria-hidden":!0,...r,ref:e})});xH.displayName=pge;var QC="SelectArrow",mge=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Ow(n),s=$c(QC,n),o=Wc(QC,n);return s.open&&o.position==="popper"?h.jsx(ow,{...i,...r,ref:e}):null});mge.displayName=QC;var gge="SelectBubbleInput",wH=b.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=b.useRef(null),s=Lt(r,i),o=vA(e);return b.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(bt.select,{...n,style:{...bU,...n.style},ref:s,defaultValue:e})});wH.displayName=gge;function bH(t){return t===""||t===void 0}function SH(t){const e=Ki(t),n=b.useRef(""),r=b.useRef(0),i=b.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=b.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function _H(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=yge(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function yge(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var vge=Y5,EH=Q5,xge=eH,wge=tH,bge=nH,CH=rH,Sge=aH,MH=uH,TH=fH,_ge=hH,Ege=mH,AH=gH,RH=yH,NH=xH;const Gc=vge,qc=xge,ml=b.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(EH,{ref:r,className:dt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,h.jsx(wge,{asChild:!0,children:h.jsx(Wa,{className:"h-4 w-4 opacity-50"})})]}));ml.displayName=EH.displayName;const kH=b.forwardRef(({className:t,...e},n)=>h.jsx(AH,{ref:n,className:dt("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(nte,{className:"h-4 w-4"})}));kH.displayName=AH.displayName;const PH=b.forwardRef(({className:t,...e},n)=>h.jsx(RH,{ref:n,className:dt("flex cursor-default items-center justify-center py-1",t),...e,children:h.jsx(Wa,{className:"h-4 w-4"})}));PH.displayName=RH.displayName;const gl=b.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>h.jsx(bge,{children:h.jsxs(CH,{ref:i,className:dt("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[h.jsx(kH,{}),h.jsx(Sge,{className:dt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),h.jsx(PH,{})]})}));gl.displayName=CH.displayName;const Cge=b.forwardRef(({className:t,...e},n)=>h.jsx(MH,{ref:n,className:dt("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Cge.displayName=MH.displayName;const tr=b.forwardRef(({className:t,children:e,...n},r)=>h.jsxs(TH,{ref:r,className:dt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:h.jsx(Ege,{children:h.jsx(wi,{className:"h-4 w-4"})})}),h.jsx(_ge,{children:e})]}));tr.displayName=TH.displayName;const Mge=b.forwardRef(({className:t,...e},n)=>h.jsx(NH,{ref:n,className:dt("-mx-1 my-1 h-px bg-muted",t),...e}));Mge.displayName=NH.displayName;const Tge=pg("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function tR({className:t,variant:e,...n}){return h.jsx("div",{className:dt(Tge({variant:e}),t),...n})}const Age=({currentCategory:t,categoryColor:e,itemColor:n,existingCategories:r,isEditingCategory:i,showNewCategoryInput:s,newCategory:o,setNewCategory:a,setIsEditingCategory:l,setShowNewCategoryInput:c,handleEditCategory:u,handleAddCustomCategory:d,handleUpdateCategoryColor:p})=>{const m=t&&t!==""?t:"General",x=e||n||"#808080",w=()=>"#ffffff";return h.jsx("div",{className:"mb-2 px-6 flex items-center gap-2",children:i?h.jsx("div",{className:"mb-2 w-full",children:s?h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(Sn,{value:o,onChange:v=>a(v.target.value),placeholder:"Enter new category",className:"h-8",autoFocus:!0,onKeyDown:v=>{v.key==="Enter"&&d()}}),h.jsx($e,{size:"sm",variant:"ghost",onClick:d,className:"h-8 w-8 p-0",children:h.jsx(wi,{className:"h-4 w-4"})}),h.jsx($e,{size:"sm",variant:"ghost",onClick:()=>{c(!1),a("")},className:"h-8 w-8 p-0",children:h.jsx(Do,{className:"h-4 w-4"})})]}):h.jsxs("div",{className:"flex flex-col space-y-2",children:[h.jsxs(Gc,{onValueChange:u,defaultValue:m,children:[h.jsx(ml,{className:"h-8",style:{fontFamily:'"Raleway", sans-serif'},children:h.jsx(qc,{placeholder:"Select a category"})}),h.jsxs(gl,{children:[r.map(v=>h.jsx(tr,{value:v.name,style:{fontFamily:'"Raleway", sans-serif'},children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"inline-block w-3 h-3 rounded-full border",style:{backgroundColor:v.color_value}}),v.name]})},v.name)),h.jsx(tr,{value:"__custom__",className:"text-blue-600",style:{fontFamily:'"Raleway", sans-serif'},children:"+ Add new category"})]})]}),m!=="__custom__"&&h.jsx("div",{className:"flex items-center gap-2 ml-2",children:h.jsx(pl,{color:x,onChange:v=>p(m,v),onSave:v=>p(m,v),children:h.jsxs($e,{variant:"outline",size:"sm",className:"h-8 px-3 flex items-center gap-2",children:[h.jsx("span",{className:"inline-block w-3 h-3 rounded-full border",style:{backgroundColor:x}}),"Category Color"]})})}),h.jsx($e,{size:"sm",variant:"ghost",className:"self-start",style:{fontFamily:'"Raleway", sans-serif'},onClick:()=>l(!1),children:"Cancel"})]})}):h.jsx(tR,{variant:"outline",className:"cursor-pointer hover:opacity-80 transition-opacity border-none",style:{fontFamily:'"Raleway", sans-serif',backgroundColor:x,color:w()},onClick:()=>l(!0),children:m})})};function Rge(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return b.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const Fw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function jh(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function nR(t){return"nodeType"in t}function Ji(t){var e,n;return t?jh(t)?t:nR(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function rR(t){const{Document:e}=Ji(t);return t instanceof e}function Pg(t){return jh(t)?!1:t instanceof Ji(t).HTMLElement}function DH(t){return t instanceof Ji(t).SVGElement}function Uh(t){return t?jh(t)?t.document:nR(t)?rR(t)?t:Pg(t)||DH(t)?t.ownerDocument:document:document:document}const da=Fw?b.useLayoutEffect:b.useEffect;function iR(t){const e=b.useRef(t);return da(()=>{e.current=t}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function Nge(){const t=b.useRef(null),e=b.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=b.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Bm(t,e){e===void 0&&(e=[t]);const n=b.useRef(t);return da(()=>{n.current!==t&&(n.current=t)},e),n}function Dg(t,e){const n=b.useRef();return b.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function o0(t){const e=iR(t),n=b.useRef(null),r=b.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function ZC(t){const e=b.useRef();return b.useEffect(()=>{e.current=t},[t]),e.current}let Y1={};function Ig(t,e){return b.useMemo(()=>{if(e)return e;const n=Y1[t]==null?0:Y1[t]+1;return Y1[t]=n,t+"-"+n},[t,e])}function IH(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const a=Object.entries(o);for(const[l,c]of a){const u=s[l];u!=null&&(s[l]=u+t*c)}return s},{...e})}}const Uf=IH(1),Hm=IH(-1);function kge(t){return"clientX"in t&&"clientY"in t}function sR(t){if(!t)return!1;const{KeyboardEvent:e}=Ji(t.target);return e&&t instanceof e}function Pge(t){if(!t)return!1;const{TouchEvent:e}=Ji(t.target);return e&&t instanceof e}function eM(t){if(Pge(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return kge(t)?{x:t.clientX,y:t.clientY}:null}const Vm=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Vm.Translate.toString(t),Vm.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),HI="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Dge(t){return t.matches(HI)?t:t.querySelector(HI)}const Ige={display:"none"};function Lge(t){let{id:e,value:n}=t;return Re.createElement("div",{id:e,style:Ige},n)}function Oge(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Re.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function Fge(){const[t,e]=b.useState("");return{announce:b.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const LH=b.createContext(null);function jge(t){const e=b.useContext(LH);b.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Uge(){const[t]=b.useState(()=>new Set),e=b.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[b.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var a;return(a=o[i])==null?void 0:a.call(o,s)})},[t]),e]}const zge={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Bge={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Hge(t){let{announcements:e=Bge,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=zge}=t;const{announce:s,announcement:o}=Fge(),a=Ig("DndLiveRegion"),[l,c]=b.useState(!1);if(b.useEffect(()=>{c(!0)},[]),jge(b.useMemo(()=>({onDragStart(d){let{active:p}=d;s(e.onDragStart({active:p}))},onDragMove(d){let{active:p,over:m}=d;e.onDragMove&&s(e.onDragMove({active:p,over:m}))},onDragOver(d){let{active:p,over:m}=d;s(e.onDragOver({active:p,over:m}))},onDragEnd(d){let{active:p,over:m}=d;s(e.onDragEnd({active:p,over:m}))},onDragCancel(d){let{active:p,over:m}=d;s(e.onDragCancel({active:p,over:m}))}}),[s,e])),!l)return null;const u=Re.createElement(Re.Fragment,null,Re.createElement(Lge,{id:r,value:i.draggable}),Re.createElement(Oge,{id:a,announcement:o}));return n?Ks.createPortal(u,n):u}var fr;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(fr||(fr={}));function a0(){}function VI(t,e){return b.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function Vge(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return b.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const No=Object.freeze({x:0,y:0});function OH(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function FH(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function $ge(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function $I(t){let{left:e,top:n,height:r,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+r},{x:e+i,y:n+r}]}function jH(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function WI(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const Wge=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=WI(e,e.left,e.top),s=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const c=OH(WI(l),i);s.push({id:a,data:{droppableContainer:o,value:c}})}}return s.sort(FH)},Gge=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=$I(e),s=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const c=$I(l),u=i.reduce((p,m,x)=>p+OH(c[x],m),0),d=Number((u/4).toFixed(4));s.push({id:a,data:{droppableContainer:o,value:d}})}}return s.sort(FH)};function qge(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,a=s-n;if(r<i&&n<s){const l=e.width*e.height,c=t.width*t.height,u=o*a,d=u/(l+c-u);return Number(d.toFixed(4))}return 0}const Xge=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,a=n.get(o);if(a){const l=qge(a,e);l>0&&i.push({id:o,data:{droppableContainer:s,value:l}})}}return i.sort($ge)};function Kge(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function UH(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:No}function Yge(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const Jge=Yge(1);function Qge(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Zge(t,e,n){const r=Qge(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=t.left-o-(1-i)*parseFloat(n),c=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?t.width/i:t.width,d=s?t.height/s:t.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}const eye={ignoreTransform:!1};function zh(t,e){e===void 0&&(e=eye);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:u}=Ji(t).getComputedStyle(t);c&&(n=Zge(n,c,u))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function GI(t){return zh(t,{ignoreTransform:!0})}function tye(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function nye(t,e){return e===void 0&&(e=Ji(t).getComputedStyle(t)),e.position==="fixed"}function rye(t,e){e===void 0&&(e=Ji(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function jw(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(rR(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Pg(i)||DH(i)||n.includes(i))return n;const s=Ji(t).getComputedStyle(i);return i!==t&&rye(i,s)&&n.push(i),nye(i,s)?n:r(i.parentNode)}return t?r(t):n}function zH(t){const[e]=jw(t,1);return e??null}function J1(t){return!Fw||!t?null:jh(t)?t:nR(t)?rR(t)||t===Uh(t).scrollingElement?window:Pg(t)?t:null:null}function BH(t){return jh(t)?t.scrollX:t.scrollLeft}function HH(t){return jh(t)?t.scrollY:t.scrollTop}function tM(t){return{x:BH(t),y:HH(t)}}var br;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(br||(br={}));function VH(t){return!Fw||!t?!1:t===document.scrollingElement}function $H(t){const e={x:0,y:0},n=VH(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const iye={x:.2,y:.2};function sye(t,e,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=iye);const{isTop:c,isBottom:u,isLeft:d,isRight:p}=$H(t),m={x:0,y:0},x={x:0,y:0},w={height:e.height*i.y,width:e.width*i.x};return!c&&s<=e.top+w.height?(m.y=br.Backward,x.y=r*Math.abs((e.top+w.height-s)/w.height)):!u&&l>=e.bottom-w.height&&(m.y=br.Forward,x.y=r*Math.abs((e.bottom-w.height-l)/w.height)),!p&&a>=e.right-w.width?(m.x=br.Forward,x.x=r*Math.abs((e.right-w.width-a)/w.width)):!d&&o<=e.left+w.width&&(m.x=br.Backward,x.x=r*Math.abs((e.left+w.width-o)/w.width)),{direction:m,speed:x}}function oye(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function WH(t){return t.reduce((e,n)=>Uf(e,tM(n)),No)}function aye(t){return t.reduce((e,n)=>e+BH(n),0)}function lye(t){return t.reduce((e,n)=>e+HH(n),0)}function cye(t,e){if(e===void 0&&(e=zh),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);zH(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const uye=[["x",["left","right"],aye],["y",["top","bottom"],lye]];class oR{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=jw(n),i=WH(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,a]of uye)for(const l of o)Object.defineProperty(this,l,{get:()=>{const c=a(r),u=i[s]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class em{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function dye(t){const{EventTarget:e}=Ji(t);return t instanceof e?t:Uh(t)}function Q1(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Bs;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Bs||(Bs={}));function qI(t){t.preventDefault()}function fye(t){t.stopPropagation()}var an;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(an||(an={}));const GH={start:[an.Space,an.Enter],cancel:[an.Esc],end:[an.Space,an.Enter,an.Tab]},hye=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case an.Right:return{...n,x:n.x+25};case an.Left:return{...n,x:n.x-25};case an.Down:return{...n,y:n.y+25};case an.Up:return{...n,y:n.y-25}}};class aR{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new em(Uh(n)),this.windowListeners=new em(Ji(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Bs.Resize,this.handleCancel),this.windowListeners.add(Bs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Bs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&cye(r),n(No)}handleKeyDown(e){if(sR(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=GH,coordinateGetter:o=hye,scrollBehavior:a="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:No;this.referenceCoordinates||(this.referenceCoordinates=u);const d=o(e,{active:n,context:r.current,currentCoordinates:u});if(d){const p=Hm(d,u),m={x:0,y:0},{scrollableAncestors:x}=r.current;for(const w of x){const v=e.code,{isTop:y,isRight:S,isLeft:E,isBottom:C,maxScroll:A,minScroll:T}=$H(w),k=oye(w),R={x:Math.min(v===an.Right?k.right-k.width/2:k.right,Math.max(v===an.Right?k.left:k.left+k.width/2,d.x)),y:Math.min(v===an.Down?k.bottom-k.height/2:k.bottom,Math.max(v===an.Down?k.top:k.top+k.height/2,d.y))},P=v===an.Right&&!S||v===an.Left&&!E,M=v===an.Down&&!C||v===an.Up&&!y;if(P&&R.x!==d.x){const L=w.scrollLeft+p.x,z=v===an.Right&&L<=A.x||v===an.Left&&L>=T.x;if(z&&!p.y){w.scrollTo({left:L,behavior:a});return}z?m.x=w.scrollLeft-L:m.x=v===an.Right?w.scrollLeft-A.x:w.scrollLeft-T.x,m.x&&w.scrollBy({left:-m.x,behavior:a});break}else if(M&&R.y!==d.y){const L=w.scrollTop+p.y,z=v===an.Down&&L<=A.y||v===an.Up&&L>=T.y;if(z&&!p.x){w.scrollTo({top:L,behavior:a});return}z?m.y=w.scrollTop-L:m.y=v===an.Down?w.scrollTop-A.y:w.scrollTop-T.y,m.y&&w.scrollBy({top:-m.y,behavior:a});break}}this.handleMove(e,Uf(Hm(d,this.referenceCoordinates),m))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}aR.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=GH,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function XI(t){return!!(t&&"distance"in t)}function KI(t){return!!(t&&"delay"in t)}class lR{constructor(e,n,r){var i;r===void 0&&(r=dye(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=Uh(o),this.documentListeners=new em(this.document),this.listeners=new em(r),this.windowListeners=new em(Ji(o)),this.initialCoordinates=(i=eM(s))!=null?i:No,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Bs.Resize,this.handleCancel),this.windowListeners.add(Bs.DragStart,qI),this.windowListeners.add(Bs.VisibilityChange,this.handleCancel),this.windowListeners.add(Bs.ContextMenu,qI),this.documentListeners.add(Bs.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(KI(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(XI(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Bs.Click,fye,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Bs.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;const l=(n=eM(e))!=null?n:No,c=Hm(i,l);if(!r&&a){if(XI(a)){if(a.tolerance!=null&&Q1(c,a.tolerance))return this.handleCancel();if(Q1(c,a.distance))return this.handleStart()}if(KI(a)&&Q1(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===an.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const pye={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class cR extends lR{constructor(e){const{event:n}=e,r=Uh(n.target);super(e,pye,r)}}cR.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const mye={move:{name:"mousemove"},end:{name:"mouseup"}};var nM;(function(t){t[t.RightClick=2]="RightClick"})(nM||(nM={}));class gye extends lR{constructor(e){super(e,mye,Uh(e.event.target))}}gye.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===nM.RightClick?!1:(r==null||r({event:n}),!0)}}];const Z1={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class yye extends lR{constructor(e){super(e,Z1)}static setup(){return window.addEventListener(Z1.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Z1.move.name,e)};function e(){}}}yye.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var tm;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(tm||(tm={}));var l0;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(l0||(l0={}));function vye(t){let{acceleration:e,activator:n=tm.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=l0.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:p}=t;const m=wye({delta:d,disabled:!s}),[x,w]=Nge(),v=b.useRef({x:0,y:0}),y=b.useRef({x:0,y:0}),S=b.useMemo(()=>{switch(n){case tm.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case tm.DraggableRect:return i}},[n,i,l]),E=b.useRef(null),C=b.useCallback(()=>{const T=E.current;if(!T)return;const k=v.current.x*y.current.x,R=v.current.y*y.current.y;T.scrollBy(k,R)},[]),A=b.useMemo(()=>a===l0.TreeOrder?[...c].reverse():c,[a,c]);b.useEffect(()=>{if(!s||!c.length||!S){w();return}for(const T of A){if((r==null?void 0:r(T))===!1)continue;const k=c.indexOf(T),R=u[k];if(!R)continue;const{direction:P,speed:M}=sye(T,R,S,e,p);for(const L of["x","y"])m[L][P[L]]||(M[L]=0,P[L]=0);if(M.x>0||M.y>0){w(),E.current=T,x(C,o),v.current=M,y.current=P;return}}v.current={x:0,y:0},y.current={x:0,y:0},w()},[e,C,r,w,s,o,JSON.stringify(S),JSON.stringify(m),x,c,A,u,JSON.stringify(p)])}const xye={x:{[br.Backward]:!1,[br.Forward]:!1},y:{[br.Backward]:!1,[br.Forward]:!1}};function wye(t){let{delta:e,disabled:n}=t;const r=ZC(e);return Dg(i=>{if(n||!r||!i)return xye;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[br.Backward]:i.x[br.Backward]||s.x===-1,[br.Forward]:i.x[br.Forward]||s.x===1},y:{[br.Backward]:i.y[br.Backward]||s.y===-1,[br.Forward]:i.y[br.Forward]||s.y===1}}},[n,e,r])}function bye(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Dg(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function Sye(t,e){return b.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var $m;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})($m||($m={}));var rM;(function(t){t.Optimized="optimized"})(rM||(rM={}));const YI=new Map;function _ye(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=b.useState(null),{frequency:a,measure:l,strategy:c}=i,u=b.useRef(t),d=v(),p=Bm(d),m=b.useCallback(function(y){y===void 0&&(y=[]),!p.current&&o(S=>S===null?y:S.concat(y.filter(E=>!S.includes(E))))},[p]),x=b.useRef(null),w=Dg(y=>{if(d&&!n)return YI;if(!y||y===YI||u.current!==t||s!=null){const S=new Map;for(let E of t){if(!E)continue;if(s&&s.length>0&&!s.includes(E.id)&&E.rect.current){S.set(E.id,E.rect.current);continue}const C=E.node.current,A=C?new oR(l(C),C):null;E.rect.current=A,A&&S.set(E.id,A)}return S}return y},[t,s,n,d,l]);return b.useEffect(()=>{u.current=t},[t]),b.useEffect(()=>{d||m()},[n,d]),b.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),b.useEffect(()=>{d||typeof a!="number"||x.current!==null||(x.current=setTimeout(()=>{m(),x.current=null},a))},[a,d,m,...r]),{droppableRects:w,measureDroppableContainers:m,measuringScheduled:s!=null};function v(){switch(c){case $m.Always:return!1;case $m.BeforeDragging:return n;default:return!n}}}function qH(t,e){return Dg(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Eye(t,e){return qH(t,e)}function Cye(t){let{callback:e,disabled:n}=t;const r=iR(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Uw(t){let{callback:e,disabled:n}=t;const r=iR(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Mye(t){return new oR(zh(t),t)}function JI(t,e,n){e===void 0&&(e=Mye);const[r,i]=b.useState(null);function s(){i(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l??n)!=null?c:null}const u=e(t);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const o=Cye({callback(l){if(t)for(const c of l){const{type:u,target:d}=c;if(u==="childList"&&d instanceof HTMLElement&&d.contains(t)){s();break}}}}),a=Uw({callback:s});return da(()=>{s(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function Tye(t){const e=qH(t);return UH(t,e)}const QI=[];function Aye(t){const e=b.useRef(t),n=Dg(r=>t?r&&r!==QI&&t&&e.current&&t.parentNode===e.current.parentNode?r:jw(t):QI,[t]);return b.useEffect(()=>{e.current=t},[t]),n}function Rye(t){const[e,n]=b.useState(null),r=b.useRef(t),i=b.useCallback(s=>{const o=J1(s.target);o&&n(a=>a?(a.set(o,tM(o)),new Map(a)):null)},[]);return b.useEffect(()=>{const s=r.current;if(t!==s){o(s);const a=t.map(l=>{const c=J1(l);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,tM(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(s)};function o(a){a.forEach(l=>{const c=J1(l);c==null||c.removeEventListener("scroll",i)})}},[i,t]),b.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>Uf(s,o),No):WH(t):No,[t,e])}function ZI(t,e){e===void 0&&(e=[]);const n=b.useRef(null);return b.useEffect(()=>{n.current=null},e),b.useEffect(()=>{const r=t!==No;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Hm(t,n.current):No}function Nye(t){b.useEffect(()=>{if(!Fw)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function kye(t,e){return b.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function XH(t){return b.useMemo(()=>t?tye(t):null,[t])}const eL=[];function Pye(t,e){e===void 0&&(e=zh);const[n]=t,r=XH(n?Ji(n):null),[i,s]=b.useState(eL);function o(){s(()=>t.length?t.map(l=>VH(l)?r:new oR(e(l),l)):eL)}const a=Uw({callback:o});return da(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),i}function Dye(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Pg(e)?e:t}function Iye(t){let{measure:e}=t;const[n,r]=b.useState(null),i=b.useCallback(c=>{for(const{target:u}of c)if(Pg(u)){r(d=>{const p=e(u);return d?{...d,width:p.width,height:p.height}:p});break}},[e]),s=Uw({callback:i}),o=b.useCallback(c=>{const u=Dye(c);s==null||s.disconnect(),u&&(s==null||s.observe(u)),r(u?e(u):null)},[e,s]),[a,l]=o0(o);return b.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const Lye=[{sensor:cR,options:{}},{sensor:aR,options:{}}],Oye={current:{}},ux={draggable:{measure:GI},droppable:{measure:GI,strategy:$m.WhileDragging,frequency:rM.Optimized},dragOverlay:{measure:zh}};class nm extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const Fye={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new nm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:a0},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ux,measureDroppableContainers:a0,windowRect:null,measuringScheduled:!1},jye={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:a0,draggableNodes:new Map,over:null,measureDroppableContainers:a0},zw=b.createContext(jye),KH=b.createContext(Fye);function Uye(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new nm}}}function zye(t,e){switch(e.type){case fr.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case fr.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case fr.DragEnd:case fr.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case fr.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new nm(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case fr.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new nm(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case fr.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new nm(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function Bye(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=b.useContext(zw),s=ZC(r),o=ZC(n==null?void 0:n.id);return b.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!sR(s)||document.activeElement===s.target)return;const a=i.get(o);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const d=Dge(u);if(d){d.focus();break}}})}},[r,e,i,o,s]),null}function Hye(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function Vye(t){return b.useMemo(()=>({draggable:{...ux.draggable,...t==null?void 0:t.draggable},droppable:{...ux.droppable,...t==null?void 0:t.droppable},dragOverlay:{...ux.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function $ye(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=b.useRef(!1),{x:o,y:a}=typeof i=="boolean"?{x:i,y:i}:i;da(()=>{if(!o&&!a||!e){s.current=!1;return}if(s.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const u=n(c),d=UH(u,r);if(o||(d.x=0),a||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const p=zH(c);p&&p.scrollBy({top:d.y,left:d.x})}},[e,o,a,r,n])}const YH=b.createContext({...No,scaleX:1,scaleY:1});var Gl;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Gl||(Gl={}));const Wye=b.memo(function(e){var n,r,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:c,sensors:u=Lye,collisionDetection:d=Xge,measuring:p,modifiers:m,...x}=e;const w=b.useReducer(zye,void 0,Uye),[v,y]=w,[S,E]=Uge(),[C,A]=b.useState(Gl.Uninitialized),T=C===Gl.Initialized,{draggable:{active:k,nodes:R,translate:P},droppable:{containers:M}}=v,L=k!=null?R.get(k):null,z=b.useRef({initial:null,translated:null}),H=b.useMemo(()=>{var rt;return k!=null?{id:k,data:(rt=L==null?void 0:L.data)!=null?rt:Oye,rect:z}:null},[k,L]),B=b.useRef(null),[K,q]=b.useState(null),[ee,O]=b.useState(null),F=Bm(x,Object.values(x)),D=Ig("DndDescribedBy",o),ie=b.useMemo(()=>M.getEnabled(),[M]),$=Vye(p),{droppableRects:U,measureDroppableContainers:Y,measuringScheduled:oe}=_ye(ie,{dragging:T,dependencies:[P.x,P.y],config:$.droppable}),ne=bye(R,k),Z=b.useMemo(()=>ee?eM(ee):null,[ee]),fe=We(),we=Eye(ne,$.draggable.measure);$ye({activeNode:k!=null?R.get(k):null,config:fe.layoutShiftCompensation,initialRect:we,measure:$.draggable.measure});const xe=JI(ne,$.draggable.measure,we),Ve=JI(ne?ne.parentElement:null),Pe=b.useRef({activatorEvent:null,active:null,activeNode:ne,collisionRect:null,collisions:null,droppableRects:U,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),et=M.getNodeFor((n=Pe.current.over)==null?void 0:n.id),te=Iye({measure:$.dragOverlay.measure}),ft=(r=te.nodeRef.current)!=null?r:ne,Ye=T?(i=te.rect)!=null?i:xe:null,ht=!!(te.nodeRef.current&&te.rect),Qe=Tye(ht?null:xe),St=XH(ft?Ji(ft):null),Ne=Aye(T?et??ne:null),Me=Pye(Ne),st=Hye(m,{transform:{x:P.x-Qe.x,y:P.y-Qe.y,scaleX:1,scaleY:1},activatorEvent:ee,active:H,activeNodeRect:xe,containerNodeRect:Ve,draggingNodeRect:Ye,over:Pe.current.over,overlayNodeRect:te.rect,scrollableAncestors:Ne,scrollableAncestorRects:Me,windowRect:St}),Q=Z?Uf(Z,P):null,I=Rye(Ne),re=ZI(I),G=ZI(I,[xe]),ae=Uf(st,re),ce=Ye?Jge(Ye,st):null,Ae=H&&ce?d({active:H,collisionRect:ce,droppableRects:U,droppableContainers:ie,pointerCoordinates:Q}):null,De=jH(Ae,"id"),[Je,me]=b.useState(null),ge=ht?st:Uf(st,G),be=Kge(ge,(s=Je==null?void 0:Je.rect)!=null?s:null,xe),Oe=b.useRef(null),Xe=b.useCallback((rt,je)=>{let{sensor:ke,options:Ue}=je;if(B.current==null)return;const tt=R.get(B.current);if(!tt)return;const pt=rt.nativeEvent,Tt=new ke({active:B.current,activeNode:tt,event:pt,options:Ue,context:Pe,onAbort($t){if(!R.get($t))return;const{onDragAbort:vn}=F.current,dn={id:$t};vn==null||vn(dn),S({type:"onDragAbort",event:dn})},onPending($t,Pn,vn,dn){if(!R.get($t))return;const{onDragPending:As}=F.current,li={id:$t,constraint:Pn,initialCoordinates:vn,offset:dn};As==null||As(li),S({type:"onDragPending",event:li})},onStart($t){const Pn=B.current;if(Pn==null)return;const vn=R.get(Pn);if(!vn)return;const{onDragStart:dn}=F.current,Zi={activatorEvent:pt,active:{id:Pn,data:vn.data,rect:z}};Ks.unstable_batchedUpdates(()=>{dn==null||dn(Zi),A(Gl.Initializing),y({type:fr.DragStart,initialCoordinates:$t,active:Pn}),S({type:"onDragStart",event:Zi}),q(Oe.current),O(pt)})},onMove($t){y({type:fr.DragMove,coordinates:$t})},onEnd:rn(fr.DragEnd),onCancel:rn(fr.DragCancel)});Oe.current=Tt;function rn($t){return async function(){const{active:vn,collisions:dn,over:Zi,scrollAdjustedTranslate:As}=Pe.current;let li=null;if(vn&&As){const{cancelDrop:ci}=F.current;li={activatorEvent:pt,active:vn,collisions:dn,delta:As,over:Zi},$t===fr.DragEnd&&typeof ci=="function"&&await Promise.resolve(ci(li))&&($t=fr.DragCancel)}B.current=null,Ks.unstable_batchedUpdates(()=>{y({type:$t}),A(Gl.Uninitialized),me(null),q(null),O(null),Oe.current=null;const ci=$t===fr.DragEnd?"onDragEnd":"onDragCancel";if(li){const Fo=F.current[ci];Fo==null||Fo(li),S({type:ci,event:li})}})}}},[R]),Ge=b.useCallback((rt,je)=>(ke,Ue)=>{const tt=ke.nativeEvent,pt=R.get(Ue);if(B.current!==null||!pt||tt.dndKit||tt.defaultPrevented)return;const Tt={active:pt};rt(ke,je.options,Tt)===!0&&(tt.dndKit={capturedBy:je.sensor},B.current=Ue,Xe(ke,je))},[R,Xe]),wt=Sye(u,Ge);Nye(u),da(()=>{xe&&C===Gl.Initializing&&A(Gl.Initialized)},[xe,C]),b.useEffect(()=>{const{onDragMove:rt}=F.current,{active:je,activatorEvent:ke,collisions:Ue,over:tt}=Pe.current;if(!je||!ke)return;const pt={active:je,activatorEvent:ke,collisions:Ue,delta:{x:ae.x,y:ae.y},over:tt};Ks.unstable_batchedUpdates(()=>{rt==null||rt(pt),S({type:"onDragMove",event:pt})})},[ae.x,ae.y]),b.useEffect(()=>{const{active:rt,activatorEvent:je,collisions:ke,droppableContainers:Ue,scrollAdjustedTranslate:tt}=Pe.current;if(!rt||B.current==null||!je||!tt)return;const{onDragOver:pt}=F.current,Tt=Ue.get(De),rn=Tt&&Tt.rect.current?{id:Tt.id,rect:Tt.rect.current,data:Tt.data,disabled:Tt.disabled}:null,$t={active:rt,activatorEvent:je,collisions:ke,delta:{x:tt.x,y:tt.y},over:rn};Ks.unstable_batchedUpdates(()=>{me(rn),pt==null||pt($t),S({type:"onDragOver",event:$t})})},[De]),da(()=>{Pe.current={activatorEvent:ee,active:H,activeNode:ne,collisionRect:ce,collisions:Ae,droppableRects:U,draggableNodes:R,draggingNode:ft,draggingNodeRect:Ye,droppableContainers:M,over:Je,scrollableAncestors:Ne,scrollAdjustedTranslate:ae},z.current={initial:Ye,translated:ce}},[H,ne,Ae,ce,R,ft,Ye,U,M,Je,Ne,ae]),vye({...fe,delta:P,draggingRect:ce,pointerCoordinates:Q,scrollableAncestors:Ne,scrollableAncestorRects:Me});const de=b.useMemo(()=>({active:H,activeNode:ne,activeNodeRect:xe,activatorEvent:ee,collisions:Ae,containerNodeRect:Ve,dragOverlay:te,draggableNodes:R,droppableContainers:M,droppableRects:U,over:Je,measureDroppableContainers:Y,scrollableAncestors:Ne,scrollableAncestorRects:Me,measuringConfiguration:$,measuringScheduled:oe,windowRect:St}),[H,ne,xe,ee,Ae,Ve,te,R,M,U,Je,Y,Ne,Me,$,oe,St]),ot=b.useMemo(()=>({activatorEvent:ee,activators:wt,active:H,activeNodeRect:xe,ariaDescribedById:{draggable:D},dispatch:y,draggableNodes:R,over:Je,measureDroppableContainers:Y}),[ee,wt,H,xe,y,D,R,Je,Y]);return Re.createElement(LH.Provider,{value:E},Re.createElement(zw.Provider,{value:ot},Re.createElement(KH.Provider,{value:de},Re.createElement(YH.Provider,{value:be},c)),Re.createElement(Bye,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Re.createElement(Hge,{...a,hiddenTextDescribedById:D}));function We(){const rt=(K==null?void 0:K.autoScrollEnabled)===!1,je=typeof l=="object"?l.enabled===!1:l===!1,ke=T&&!rt&&!je;return typeof l=="object"?{...l,enabled:ke}:{enabled:ke}}}),Gye=b.createContext(null),tL="button",qye="Draggable";function Xye(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=Ig(qye),{activators:o,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:p}=b.useContext(zw),{role:m=tL,roleDescription:x="draggable",tabIndex:w=0}=i??{},v=(l==null?void 0:l.id)===e,y=b.useContext(v?YH:Gye),[S,E]=o0(),[C,A]=o0(),T=kye(o,e),k=Bm(n);da(()=>(d.set(e,{id:e,key:s,node:S,activatorNode:C,data:k}),()=>{const P=d.get(e);P&&P.key===s&&d.delete(e)}),[d,e]);const R=b.useMemo(()=>({role:m,tabIndex:w,"aria-disabled":r,"aria-pressed":v&&m===tL?!0:void 0,"aria-roledescription":x,"aria-describedby":u.draggable}),[r,m,w,v,x,u.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:R,isDragging:v,listeners:r?void 0:T,node:S,over:p,setNodeRef:E,setActivatorNodeRef:A,transform:y}}function Kye(){return b.useContext(KH)}const Yye="Droppable",Jye={timeout:25};function Qye(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=Ig(Yye),{active:o,dispatch:a,over:l,measureDroppableContainers:c}=b.useContext(zw),u=b.useRef({disabled:n}),d=b.useRef(!1),p=b.useRef(null),m=b.useRef(null),{disabled:x,updateMeasurementsFor:w,timeout:v}={...Jye,...i},y=Bm(w??r),S=b.useCallback(()=>{if(!d.current){d.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{c(Array.isArray(y.current)?y.current:[y.current]),m.current=null},v)},[v]),E=Uw({callback:S,disabled:x||!o}),C=b.useCallback((R,P)=>{E&&(P&&(E.unobserve(P),d.current=!1),R&&E.observe(R))},[E]),[A,T]=o0(C),k=Bm(e);return b.useEffect(()=>{!E||!A.current||(E.disconnect(),d.current=!1,E.observe(A.current))},[A,E]),b.useEffect(()=>(a({type:fr.RegisterDroppable,element:{id:r,key:s,disabled:n,node:A,rect:p,data:k}}),()=>a({type:fr.UnregisterDroppable,key:s,id:r})),[r]),b.useEffect(()=>{n!==u.current.disabled&&(a({type:fr.SetDroppableDisabled,id:r,key:s,disabled:n}),u.current.disabled=n)},[r,s,n,a]),{active:o,rect:p,isOver:(l==null?void 0:l.id)===r,node:A,over:l,setNodeRef:T}}function uR(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function Zye(t,e){return t.reduce((n,r,i)=>{const s=e.get(r);return s&&(n[i]=s),n},Array(t.length))}function wv(t){return t!==null&&t>=0}function eve(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function tve(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const JH=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const s=uR(e,r,n),o=e[i],a=s[i];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},bv={scaleX:1,scaleY:1},nve=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:o}=t;const a=(e=s[n])!=null?e:r;if(!a)return null;if(i===n){const c=s[o];return c?{x:0,y:n<o?c.top+c.height-(a.top+a.height):c.top-a.top,...bv}:null}const l=rve(s,i,n);return i>n&&i<=o?{x:0,y:-a.height-l,...bv}:i<n&&i>=o?{x:0,y:a.height+l,...bv}:{x:0,y:0,...bv}};function rve(t,e,n){const r=t[e],i=t[e-1],s=t[e+1];return r?n<e?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const QH="Sortable",ZH=Re.createContext({activeIndex:-1,containerId:QH,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:JH,disabled:{draggable:!1,droppable:!1}});function ive(t){let{children:e,id:n,items:r,strategy:i=JH,disabled:s=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:u}=Kye(),d=Ig(QH,n),p=a.rect!==null,m=b.useMemo(()=>r.map(T=>typeof T=="object"&&"id"in T?T.id:T),[r]),x=o!=null,w=o?m.indexOf(o.id):-1,v=c?m.indexOf(c.id):-1,y=b.useRef(m),S=!eve(m,y.current),E=v!==-1&&w===-1||S,C=tve(s);da(()=>{S&&x&&u(m)},[S,m,x,u]),b.useEffect(()=>{y.current=m},[m]);const A=b.useMemo(()=>({activeIndex:w,containerId:d,disabled:C,disableTransforms:E,items:m,overIndex:v,useDragOverlay:p,sortedRects:Zye(m,l),strategy:i}),[w,d,C.draggable,C.droppable,E,m,v,l,p,i]);return Re.createElement(ZH.Provider,{value:A},e)}const sve=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return uR(n,r,i).indexOf(e)},ove=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:a,previousContainerId:l,transition:c}=t;return!c||!r||a!==s&&i===o?!1:n?!0:o!==i&&e===l},ave={duration:200,easing:"ease"},e6="transform",lve=Vm.Transition.toString({property:e6,duration:0,easing:"linear"}),cve={roleDescription:"sortable"};function uve(t){let{disabled:e,index:n,node:r,rect:i}=t;const[s,o]=b.useState(null),a=b.useRef(n);return da(()=>{if(!e&&n!==a.current&&r.current){const l=i.current;if(l){const c=zh(r.current,{ignoreTransform:!0}),u={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(u.x||u.y)&&o(u)}}n!==a.current&&(a.current=n)},[e,n,r,i]),b.useEffect(()=>{s&&o(null)},[s]),s}function dve(t){let{animateLayoutChanges:e=ove,attributes:n,disabled:r,data:i,getNewIndex:s=sve,id:o,strategy:a,resizeObserverConfig:l,transition:c=ave}=t;const{items:u,containerId:d,activeIndex:p,disabled:m,disableTransforms:x,sortedRects:w,overIndex:v,useDragOverlay:y,strategy:S}=b.useContext(ZH),E=fve(r,m),C=u.indexOf(o),A=b.useMemo(()=>({sortable:{containerId:d,index:C,items:u},...i}),[d,i,C,u]),T=b.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:k,node:R,isOver:P,setNodeRef:M}=Qye({id:o,data:A,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:T,...l}}),{active:L,activatorEvent:z,activeNodeRect:H,attributes:B,setNodeRef:K,listeners:q,isDragging:ee,over:O,setActivatorNodeRef:F,transform:D}=Xye({id:o,data:A,attributes:{...cve,...n},disabled:E.draggable}),ie=Rge(M,K),$=!!L,U=$&&!x&&wv(p)&&wv(v),Y=!y&&ee,oe=Y&&U?D:null,Z=U?oe??(a??S)({rects:w,activeNodeRect:H,activeIndex:p,overIndex:v,index:C}):null,fe=wv(p)&&wv(v)?s({id:o,items:u,activeIndex:p,overIndex:v}):C,we=L==null?void 0:L.id,xe=b.useRef({activeId:we,items:u,newIndex:fe,containerId:d}),Ve=u!==xe.current.items,Pe=e({active:L,containerId:d,isDragging:ee,isSorting:$,id:o,index:C,items:u,newIndex:xe.current.newIndex,previousItems:xe.current.items,previousContainerId:xe.current.containerId,transition:c,wasDragging:xe.current.activeId!=null}),et=uve({disabled:!Pe,index:C,node:R,rect:k});return b.useEffect(()=>{$&&xe.current.newIndex!==fe&&(xe.current.newIndex=fe),d!==xe.current.containerId&&(xe.current.containerId=d),u!==xe.current.items&&(xe.current.items=u)},[$,fe,d,u]),b.useEffect(()=>{if(we===xe.current.activeId)return;if(we!=null&&xe.current.activeId==null){xe.current.activeId=we;return}const ft=setTimeout(()=>{xe.current.activeId=we},50);return()=>clearTimeout(ft)},[we]),{active:L,activeIndex:p,attributes:B,data:A,rect:k,index:C,newIndex:fe,items:u,isOver:P,isSorting:$,isDragging:ee,listeners:q,node:R,overIndex:v,over:O,setNodeRef:ie,setActivatorNodeRef:F,setDroppableNodeRef:M,setDraggableNodeRef:K,transform:et??Z,transition:te()};function te(){if(et||Ve&&xe.current.newIndex===C)return lve;if(!(Y&&!sR(z)||!c)&&($||Pe))return Vm.Transition.toString({...c,property:e6})}}function fve(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function c0(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const hve=[an.Down,an.Right,an.Up,an.Left],pve=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:s,over:o,scrollableAncestors:a}}=e;if(hve.includes(t.code)){if(t.preventDefault(),!n||!r)return;const l=[];s.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const p=i.get(d.id);if(p)switch(t.code){case an.Down:r.top<p.top&&l.push(d);break;case an.Up:r.top>p.top&&l.push(d);break;case an.Left:r.left>p.left&&l.push(d);break;case an.Right:r.left<p.left&&l.push(d);break}});const c=Gge({collisionRect:r,droppableRects:i,droppableContainers:l});let u=jH(c,"id");if(u===(o==null?void 0:o.id)&&c.length>1&&(u=c[1].id),u!=null){const d=s.get(n.id),p=s.get(u),m=p?i.get(p.id):null,x=p==null?void 0:p.node.current;if(x&&m&&d&&p){const v=jw(x).some((T,k)=>a[k]!==T),y=t6(d,p),S=mve(d,p),E=v||!y?{x:0,y:0}:{x:S?r.width-m.width:0,y:S?r.height-m.height:0},C={x:m.left,y:m.top};return E.x&&E.y?C:Hm(C,E)}}}};function t6(t,e){return!c0(t)||!c0(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function mve(t,e){return!c0(t)||!c0(e)||!t6(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const gve=({item:t,editingItemId:e,editingItemText:n,setEditingItemText:r,toggleItemCompleted:i,startEditingItem:s,handleEditItem:o,removeItem:a})=>{const l=e===t.id,{attributes:c,listeners:u,setNodeRef:d,transform:p,transition:m,isDragging:x}=dve({id:t.id,disabled:l}),w={transform:Vm.Transform.toString(p),transition:m,opacity:x?.5:1};return h.jsx("div",{ref:d,style:w,className:"flex items-center py-1 group","data-sortable-item":!0,children:l?h.jsxs("div",{className:"flex items-center gap-1 w-full",children:[h.jsx(Sn,{value:n,onChange:v=>r(v.target.value),className:"h-8 flex-grow",autoFocus:!0,onKeyDown:v=>{v.key==="Enter"&&o()}}),h.jsx($e,{size:"sm",variant:"ghost",onClick:o,className:"h-8 w-8 p-0",children:h.jsx(wi,{className:"h-4 w-4"})}),h.jsx($e,{size:"sm",variant:"ghost",onClick:()=>r(""),className:"h-8 w-8 p-0",children:h.jsx(Do,{className:"h-4 w-4"})})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{...c,...u,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing mr-2 p-1","data-sortable-handle":!0,children:h.jsx(fte,{className:"h-4 w-4 text-gray-400 dark:text-gray-300","data-lucide":"grip-vertical"})}),h.jsxs("div",{className:"flex items-center flex-grow cursor-pointer",onClick:()=>i(t.id),children:[h.jsx("div",{style:t.completed?{backgroundColor:"var(--list-color)",borderColor:"var(--list-color)"}:{},className:`w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0 ${t.completed?"":"border-gray-300 hover:border-[var(--list-color)]"}`,children:t.completed&&h.jsx(wi,{className:"h-3 w-3 text-white"})}),h.jsx("span",{className:`${t.completed?"line-through text-gray-400 dark:text-gray-300":""}`,style:{fontFamily:'"Raleway", sans-serif'},children:t.text})]}),h.jsxs("div",{className:"flex opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx($e,{size:"sm",variant:"ghost",onClick:()=>s(t),className:"h-8 w-8 p-0",children:h.jsx(mg,{className:"h-4 w-4"})}),h.jsx($e,{size:"sm",variant:"ghost",onClick:()=>a(t.id),className:"h-8 w-8 p-0 text-red-600",children:h.jsx(tw,{className:"h-4 w-4"})})]})]})})},yve=({progress:t,totalItems:e,completedItems:n})=>h.jsxs("div",{className:"px-6 py-2",children:[h.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2 mb-1",children:h.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${t}%`,backgroundColor:"var(--list-color)"}})}),h.jsxs("div",{className:"text-xs text-gray-500 dark:text-white",style:{fontFamily:'"Raleway", sans-serif'},children:[n," of ",e," completed"]})]}),vve=t=>{const{newItemText:e,setNewItemText:n,handleAddItem:r,inputRef:i,currentInputSuggestion:s,currentSuggestion:o,handleAcceptSuggestion:a,handleGetSuggestion:l,aiEnabled:c,isLoadingSuggestions:u}=t,d=p=>{if(console.log("Key pressed:",p.key,{currentInputSuggestion:s}),p.key==="Enter")r();else if(p.key==="Escape")n("");else if(p.key==="Tab"&&s)p.preventDefault(),a(),console.log("Accepting suggestion with Tab");else if(p.key==="ArrowRight"&&s){const m=p.currentTarget;m.selectionStart===m.value.length&&(p.preventDefault(),a(),console.log("Accepting suggestion with ArrowRight"))}};return h.jsxs("div",{className:"flex flex-col p-2 border-t",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"relative flex-1 rounded-md border",children:[h.jsx(Sn,{ref:i,value:e,onChange:p=>n(p.target.value),placeholder:"Add new item...",className:`h-8 border-0 focus-visible:ring-0 focus-visible:ring-offset-0 ${c?"pr-8":""}`,style:{fontFamily:'"Raleway", sans-serif'},onKeyDown:d}),c&&h.jsx("button",{type:"button",onClick:l,className:"absolute right-2 top-1/2 transform -translate-y-1/2 cursor-pointer",children:h.jsx(oc,{size:14,style:{color:"var(--list-color)"},className:`${u?"animate-pulse":""}`})}),c&&s&&e&&s.toLowerCase().startsWith(e.toLowerCase())&&h.jsx("div",{className:"absolute left-0 top-0 right-8 bottom-0 flex items-center pointer-events-none z-10",children:h.jsxs("div",{className:"px-3 flex items-center w-full pr-2",children:[h.jsx("span",{className:"text-transparent",children:e}),h.jsx("span",{className:"text-gray-500 overflow-hidden text-ellipsis whitespace-nowrap font-medium",style:{pointerEvents:"none",fontFamily:'"Raleway", sans-serif',maxWidth:"calc(100% - 2rem)"},title:"Press Tab or Right Arrow to accept",children:s.substring(e.length)})]})})]}),h.jsx($e,{size:"sm",variant:"secondary",onClick:r,className:"h-8 w-8 p-0",disabled:!e.trim(),children:h.jsx(xo,{className:"h-4 w-4"})}),h.jsxs($e,{size:"sm",variant:"ghost",onClick:()=>n(""),className:"h-8 w-8 p-0",children:[h.jsx("span",{className:"sr-only",children:"Clear"}),h.jsx("span",{"aria-hidden":"true",children:"×"})]})]}),c&&h.jsxs("button",{onClick:l,className:"mt-2 w-full flex items-center gap-1.5 px-2 py-1.5 text-sm text-foreground hover:bg-muted rounded-md transition-colors",style:{fontFamily:'"Raleway", sans-serif'},disabled:u,children:[h.jsx(oc,{className:"w-4 h-4",style:{color:"var(--list-color)"}}),h.jsx("span",{className:"font-medium",children:"Suggest:"}),o&&h.jsx("span",{style:{color:"var(--list-color)"},className:"font-medium overflow-hidden text-ellipsis whitespace-nowrap",children:o})]})]})};var n6="AlertDialog",[xve,X2e]=Mi(n6,[g5]),yl=g5(),r6=t=>{const{__scopeAlertDialog:e,...n}=t,r=yl(e);return h.jsx(HA,{...r,...n,modal:!0})};r6.displayName=n6;var wve="AlertDialogTrigger",bve=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=yl(n);return h.jsx(bme,{...i,...r,ref:e})});bve.displayName=wve;var Sve="AlertDialogPortal",i6=t=>{const{__scopeAlertDialog:e,...n}=t,r=yl(e);return h.jsx(VA,{...r,...n})};i6.displayName=Sve;var _ve="AlertDialogOverlay",s6=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=yl(n);return h.jsx(Rw,{...i,...r,ref:e})});s6.displayName=_ve;var zf="AlertDialogContent",[Eve,Cve]=xve(zf),Mve=yU("AlertDialogContent"),o6=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,s=yl(n),o=b.useRef(null),a=Lt(e,o),l=b.useRef(null);return h.jsx(yme,{contentName:zf,titleName:a6,docsSlug:"alert-dialog",children:h.jsx(Eve,{scope:n,cancelRef:l,children:h.jsxs(Nw,{role:"alertdialog",...s,...i,ref:a,onOpenAutoFocus:it(i.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[h.jsx(Mve,{children:r}),h.jsx(Ave,{contentRef:o})]})})})});o6.displayName=zf;var a6="AlertDialogTitle",l6=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=yl(n);return h.jsx($A,{...i,...r,ref:e})});l6.displayName=a6;var c6="AlertDialogDescription",u6=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=yl(n);return h.jsx(WA,{...i,...r,ref:e})});u6.displayName=c6;var Tve="AlertDialogAction",d6=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=yl(n);return h.jsx(GA,{...i,...r,ref:e})});d6.displayName=Tve;var f6="AlertDialogCancel",h6=b.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=Cve(f6,n),s=yl(n),o=Lt(e,i);return h.jsx(GA,{...s,...r,ref:o})});h6.displayName=f6;var Ave=({contentRef:t})=>{const e=`\`${zf}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${zf}\` by passing a \`${c6}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${zf}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return b.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},Rve=r6,Nve=i6,p6=s6,m6=o6,g6=d6,y6=h6,v6=l6,x6=u6;const dR=Rve,kve=Nve,w6=b.forwardRef(({className:t,...e},n)=>h.jsx(p6,{className:dt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));w6.displayName=p6.displayName;const Bw=b.forwardRef(({className:t,...e},n)=>h.jsxs(kve,{children:[h.jsx(w6,{}),h.jsx(m6,{ref:n,className:dt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Bw.displayName=m6.displayName;const Hw=({className:t,...e})=>h.jsx("div",{className:dt("flex flex-col space-y-2 text-center sm:text-left",t),...e});Hw.displayName="AlertDialogHeader";const Vw=({className:t,...e})=>h.jsx("div",{className:dt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Vw.displayName="AlertDialogFooter";const $w=b.forwardRef(({className:t,...e},n)=>h.jsx(v6,{ref:n,className:dt("text-lg font-semibold",t),...e}));$w.displayName=v6.displayName;const Ww=b.forwardRef(({className:t,...e},n)=>h.jsx(x6,{ref:n,className:dt("text-sm text-muted-foreground",t),...e}));Ww.displayName=x6.displayName;const Gw=b.forwardRef(({className:t,...e},n)=>h.jsx(g6,{ref:n,className:dt(yA(),t),...e}));Gw.displayName=g6.displayName;const qw=b.forwardRef(({className:t,...e},n)=>h.jsx(y6,{ref:n,className:dt(yA({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));qw.displayName=y6.displayName;const Pve=({isOpen:t,onClose:e,listId:n,listTitle:r,onDelete:i})=>{const[s,o]=b.useState(!1),{toast:a}=rr(),l=async()=>{o(!0);try{await i(n)?(a({title:"List deleted",description:"The list has been permanently deleted."}),e()):a({title:"Error deleting list",description:"Failed to delete the list. Please try again.",variant:"destructive"})}catch{a({title:"Error deleting list",description:"Failed to delete the list. Please try again.",variant:"destructive"})}finally{o(!1)}};return t?h.jsx(dR,{open:t,onOpenChange:c=>!c&&!s&&e(),children:h.jsxs(Bw,{className:"sm:max-w-[425px]",children:[h.jsxs(Hw,{children:[h.jsxs($w,{className:"flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(XT,{className:"h-5 w-5 text-red-500"}),"Delete List"]}),h.jsx(Ww,{style:{fontFamily:'"Raleway", sans-serif'},children:"This will permanently delete the list and all its items. This action cannot be undone."})]}),h.jsx("div",{className:"space-y-4",children:h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",style:{fontFamily:'"Raleway", sans-serif'},children:"List to delete"}),h.jsx("div",{className:"p-3 bg-gray-50 dark:bg-slate-700 rounded-md border",children:h.jsxs("p",{className:"font-medium text-sm flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(md,{className:"h-4 w-4 text-slate-500"}),r]})})]})}),h.jsxs(Vw,{children:[h.jsx(qw,{onClick:e,disabled:s,style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"}),h.jsx(Gw,{onClick:l,disabled:s,className:"bg-red-600 hover:bg-red-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:s?"Deleting...":"Delete List"})]})]})}):null},fR=({list:t,onUpdate:e,onDelete:n,onShare:r,existingCategories:i,isCollapsed:s,onToggleCollapsed:o,addCategory:a,updateCategory:l})=>{var Ne;const[c,u]=b.useState(!1),{isCollapsibleOpen:d,isEditing:p,setIsEditing:m,editTitle:x,setEditTitle:w,handleEditTitle:v,handleSaveListColor:y,isSavingColor:S,isEditingCategory:E,setIsEditingCategory:C,showNewCategoryInput:A,setShowNewCategoryInput:T,newCategory:k,setNewCategory:R,handleEditCategory:P,handleAddCustomCategory:M,handleUpdateCategoryColor:L,newItemText:z,setNewItemText:H,editingItemId:B,editingItemText:K,setEditingItemText:q,handleAddItem:ee,toggleItemCompleted:O,removeItem:F,startEditingItem:D,handleEditItem:ie,isLoadingSuggestions:$,handleGetSuggestion:U,handleAcceptSuggestion:Y,currentSuggestion:oe,currentInputSuggestion:ne,aiEnabled:Z,titleEditRef:fe,newItemInputRef:we}=Xme({list:t,onUpdate:e,onDelete:n,isCollapsed:s,onToggleCollapsed:o,existingCategories:i,addCategory:a,updateCategory:l}),xe=()=>{r(t.id)},Ve=()=>{u(!0)},Pe=async Me=>await n(Me),et=Vge(VI(cR),VI(aR,{coordinateGetter:pve})),te=Me=>{const{active:st,over:Q}=Me;if(Q&&st.id!==Q.id){const I=t.items.findIndex(ce=>ce.id===st.id),re=t.items.findIndex(ce=>ce.id===Q.id),G=uR(t.items,I,re),ae={...t,items:G};e(ae)}};b.useEffect(()=>{if(!p)return;const Me=st=>{fe.current&&!fe.current.contains(st.target)&&v()};return document.addEventListener("mousedown",Me),()=>{document.removeEventListener("mousedown",Me)}},[p,v]);const ft=t.items.length,Ye=t.items.filter(Me=>Me.completed).length,ht=ft>0?Ye/ft*100:0,Qe=(Ne=i.find(Me=>Me.name===t.type))==null?void 0:Ne.color_value,St=t.color_value||Qe||"#808080";return h.jsxs(JA,{open:d,onOpenChange:Me=>{o&&s!==void 0&&!s!==Me&&o()},className:"w-full",style:{"--list-color":St},children:[h.jsxs(ji,{className:"w-full border shadow-sm",children:[h.jsx(Yme,{title:t.title,listColor:t.color_value,isEditing:p,editTitle:x,isCollapsibleOpen:d,setEditTitle:w,setIsEditing:m,handleEditTitle:v,handleDeleteList:Ve,handleShareList:xe,titleEditRef:fe,onColorSave:y,isSavingColor:S}),h.jsx(Age,{currentCategory:t.type,categoryColor:Qe,itemColor:t.color_value,existingCategories:i,isEditingCategory:E,showNewCategoryInput:A,newCategory:k,setNewCategory:R,setIsEditingCategory:C,setShowNewCategoryInput:T,handleEditCategory:P,handleAddCustomCategory:M,handleUpdateCategoryColor:L}),h.jsx(ZA,{children:h.jsxs(zs,{className:"p-0",children:[ft>0&&h.jsx(yve,{progress:ht,totalItems:ft,completedItems:Ye}),h.jsxs("div",{className:"px-6 py-2 space-y-0.5",children:[h.jsx(Wye,{sensors:et,collisionDetection:Wge,onDragEnd:te,children:h.jsx(ive,{items:t.items.map(Me=>Me.id),strategy:nve,children:t.items.map(Me=>h.jsx(gve,{item:Me,editingItemId:B,editingItemText:K,setEditingItemText:q,toggleItemCompleted:O,startEditingItem:D,handleEditItem:ie,removeItem:F},Me.id))})}),t.items.length===0&&h.jsx("div",{className:"text-gray-400 dark:text-gray-300 text-sm py-2 italic",style:{fontFamily:'"Raleway", sans-serif'},children:"No items yet. Add one below or use AI suggestions."})]}),h.jsx(vve,{newItemText:z,setNewItemText:H,handleAddItem:ee,inputRef:we,currentInputSuggestion:ne,currentSuggestion:oe,handleAcceptSuggestion:Y,handleGetSuggestion:U,aiEnabled:Z,isLoadingSuggestions:$})]})})]}),h.jsx(Pve,{isOpen:c,onClose:()=>u(!1),listId:t.id,listTitle:t.title,onDelete:Pe})]})},Dve=()=>{const[t,e]=b.useState([]),[n,r]=b.useState(""),[i,s]=b.useState(!1),[o,a]=b.useState("all"),[l,c]=b.useState(!0),{toast:u}=rr(),{isAuthenticated:d,token:p}=to();b.useEffect(()=>{d&&m()},[d]);const m=async()=>{try{c(!0);const T=(await Zt.get("/api/lists",{headers:{Authorization:`Bearer ${p}`}})).data.map(k=>({id:k.id,title:k.title,type:k.category||"General",items:k.items||[],createdAt:new Date(k.createdAt),color_value:k.color_value||"#808080"}));e(T)}catch(A){console.error("Failed to fetch lists:",A),u({title:"Error fetching lists",description:"Could not retrieve your lists. Please try again later.",variant:"destructive"})}finally{c(!1)}},x=async(A,T)=>{try{const k=await Zt.post("/api/lists",{title:A,category:T,items:[]},{headers:{Authorization:`Bearer ${p}`}}),R={...k.data,type:k.data.category,items:k.data.items||[],createdAt:new Date(k.data.createdAt),color_value:k.data.color_value||"#808080"};e(P=>[R,...P]),s(!1),u({title:"List created!",description:`Your ${T} list "${A}" has been created.`})}catch(k){console.error("Failed to create list:",k),u({title:"Error creating list",description:"Could not create your list. Please try again.",variant:"destructive"})}},w=async A=>{try{await Zt.delete(`/api/lists/${A}`,{headers:{Authorization:`Bearer ${p}`}}),e(T=>T.filter(k=>k.id!==A)),u({title:"List deleted",description:"Your list has been removed."})}catch(T){console.error("Failed to delete list:",T),u({title:"Error deleting list",description:"Could not delete your list. Please try again.",variant:"destructive"})}},v=async A=>{try{const T={title:A.title,category:A.type,items:A.items,color_value:A.color_value};await Zt.put(`/api/lists/${A.id}`,T,{headers:{Authorization:`Bearer ${p}`}});const k=A.type,R=t.find(M=>M.id===A.id),P=R?R.type:void 0;e(M=>M.map(L=>L.id===A.id?{...A,color_value:A.color_value||"#808080"}:L))}catch(T){console.error("Failed to update list:",T),u({title:"Error updating list",description:"Could not update your list. Please try again.",variant:"destructive"})}},y=t.filter(A=>{const T=A.title.toLowerCase().includes(n.toLowerCase())||A.items.some(R=>R.text.toLowerCase().includes(n.toLowerCase())),k=o==="all"||A.type===o;return T&&k}),S=()=>{const A=new Set(t.map(T=>T.type||"General"));return["all",...Array.from(A).sort()]},E=()=>{const A=Array.from(new Set(t.map(T=>T.type).filter(T=>T&&T.toLowerCase()!=="general")));return A.length===0&&t.some(T=>T.type&&T.type.toLowerCase()==="general")?["General"]:A.length>0?A.sort():["General"]},C=()=>{const A={all:t.length};return t.forEach(T=>{A[T.type]=(A[T.type]||0)+1}),A};return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted/50",children:[h.jsx("div",{className:"bg-background border-b border-border sticky top-0 z-40",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsx("div",{className:"py-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"My Lists"}),h.jsxs("div",{className:"relative hidden sm:block ml-4",children:[h.jsx(Ko,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),h.jsx(Sn,{placeholder:"Search lists...",value:n,onChange:A=>r(A.target.value),className:"pl-10 w-48 h-9"})]})]}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsxs($e,{onClick:()=>s(!0),size:"sm",className:"bg-blue-600 hover:bg-blue-700 whitespace-nowrap",children:[h.jsx(xo,{className:"h-4 w-4 mr-1"}),h.jsx("span",{className:"hidden sm:inline",children:"New List"}),h.jsx("span",{className:"sm:hidden",children:"New"})]})})]})}),h.jsx("div",{className:"sm:hidden pb-4",children:h.jsxs("div",{className:"relative",children:[h.jsx(Ko,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),h.jsx(Sn,{placeholder:"Search lists...",value:n,onChange:A=>r(A.target.value),className:"pl-10"})]})})]})}),h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:S().map(A=>{const T=C()[A]||0;return h.jsxs($e,{variant:o===A?"default":"outline",size:"sm",onClick:()=>a(A),className:`capitalize ${o===A?"bg-blue-600 hover:bg-blue-700":""}`,children:[A," (",T,")"]},A)})}),l?h.jsx("div",{className:"text-center py-12",children:h.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[h.jsx("div",{className:"h-8 bg-slate-200 rounded w-32 mb-4"}),h.jsx("div",{className:"h-4 bg-slate-200 rounded w-64"})]})}):y.length===0?h.jsx("div",{className:"text-center py-12",children:t.length===0?h.jsx("div",{className:"max-w-md mx-auto",children:h.jsxs("div",{className:"bg-card rounded-lg shadow-sm border border-border p-8",children:[h.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(xo,{className:"h-8 w-8 text-blue-600"})}),h.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Create your first list"}),h.jsx("p",{className:"text-muted-foreground mb-6",children:"Get organized with custom lists for any purpose - shopping, notes, tasks, and more."}),h.jsxs($e,{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700",children:[h.jsx(xo,{className:"h-4 w-4 mr-2"}),"Create List"]})]})}):h.jsxs("div",{className:"text-muted-foreground",children:[h.jsx(Ko,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),h.jsx("p",{children:"No lists match your search criteria."})]})}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(A=>h.jsx(fR,{list:A,onUpdate:v,onDelete:w,existingCategories:E()},A.id))})]}),h.jsx(W5,{isOpen:i,onClose:()=>s(!1),onCreateList:x,existingCategories:E()})]})},Ive=()=>{const t=ul();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),h.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),h.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Lve=()=>{const t=ya();return b.useEffect(()=>{(async()=>{var n,r,i;try{const s=new URLSearchParams(window.location.search),o=s.get("code"),a=s.get("error");if(console.log("AuthCallback received:",{hasCode:!!o,codeLength:o==null?void 0:o.length,error:a||"none",searchParams:window.location.search}),a){console.error("OAuth error:",a),window.opener?(window.opener.postMessage({type:"GOOGLE_AUTH_ERROR",error:a},window.location.origin),window.close()):t("/",{replace:!0});return}if(!o){console.error("No authorization code received"),window.opener?(window.opener.postMessage({type:"GOOGLE_AUTH_ERROR",error:"No authorization code received"},window.location.origin),window.close()):t("/",{replace:!0});return}const l=Am();console.log("Authorization code found, length:",o.length),console.log("Sending request to backend at:",`${l}/api/auth/google-login`);const c=await fetch(`${l}/api/auth/google-login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:o})});if(console.log("Backend response received, status:",c.status),!c.ok)throw new Error("Failed to authenticate with backend");const u=await c.json();console.log("User authenticated successfully:",((n=u.user)==null?void 0:n.email)||"unknown"),window.opener?(console.log("Window opener found, posting success message"),window.opener.postMessage({type:"GOOGLE_AUTH_SUCCESS",user:u.user,token:u.accessToken},window.location.origin),window.close()):(console.log("No opener window, navigating to home page"),t("/",{replace:!0}))}catch(s){console.error("Error during auth callback:",s),console.error("Response data:",(r=s.response)==null?void 0:r.data),console.error("Response status:",(i=s.response)==null?void 0:i.status),window.opener?(window.opener.postMessage({type:"GOOGLE_AUTH_ERROR",error:s instanceof Error?s.message:"Authentication failed"},window.location.origin),window.close()):t("/",{replace:!0})}})()},[t]),h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600",children:"Completing authentication..."})]})})};function Ove(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Fve=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,jve=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Uve={};function nL(t,e){return(Uve.jsx?jve:Fve).test(t)}const zve=/[ \t\n\f\r]/g;function Bve(t){return typeof t=="object"?t.type==="text"?rL(t.value):!1:rL(t)}function rL(t){return t.replace(zve,"")===""}let Lg=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};Lg.prototype.normal={};Lg.prototype.property={};Lg.prototype.space=void 0;function b6(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Lg(n,r,e)}function iM(t){return t.toLowerCase()}class Qi{constructor(e,n){this.attribute=n,this.property=e}}Qi.prototype.attribute="";Qi.prototype.booleanish=!1;Qi.prototype.boolean=!1;Qi.prototype.commaOrSpaceSeparated=!1;Qi.prototype.commaSeparated=!1;Qi.prototype.defined=!1;Qi.prototype.mustUseProperty=!1;Qi.prototype.number=!1;Qi.prototype.overloadedBoolean=!1;Qi.prototype.property="";Qi.prototype.spaceSeparated=!1;Qi.prototype.space=void 0;let Hve=0;const Bt=xd(),sr=xd(),sM=xd(),nt=xd(),Nn=xd(),Bf=xd(),us=xd();function xd(){return 2**++Hve}const oM=Object.freeze(Object.defineProperty({__proto__:null,boolean:Bt,booleanish:sr,commaOrSpaceSeparated:us,commaSeparated:Bf,number:nt,overloadedBoolean:sM,spaceSeparated:Nn},Symbol.toStringTag,{value:"Module"})),e_=Object.keys(oM);class hR extends Qi{constructor(e,n,r,i){let s=-1;if(super(e,n),iL(this,"space",i),typeof r=="number")for(;++s<e_.length;){const o=e_[s];iL(this,e_[s],(r&oM[o])===oM[o])}}}hR.prototype.defined=!0;function iL(t,e,n){n&&(t[e]=n)}function Bh(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new hR(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[iM(r)]=r,n[iM(s.attribute)]=r}return new Lg(e,n,t.space)}const S6=Bh({properties:{ariaActiveDescendant:null,ariaAtomic:sr,ariaAutoComplete:null,ariaBusy:sr,ariaChecked:sr,ariaColCount:nt,ariaColIndex:nt,ariaColSpan:nt,ariaControls:Nn,ariaCurrent:null,ariaDescribedBy:Nn,ariaDetails:null,ariaDisabled:sr,ariaDropEffect:Nn,ariaErrorMessage:null,ariaExpanded:sr,ariaFlowTo:Nn,ariaGrabbed:sr,ariaHasPopup:null,ariaHidden:sr,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Nn,ariaLevel:nt,ariaLive:null,ariaModal:sr,ariaMultiLine:sr,ariaMultiSelectable:sr,ariaOrientation:null,ariaOwns:Nn,ariaPlaceholder:null,ariaPosInSet:nt,ariaPressed:sr,ariaReadOnly:sr,ariaRelevant:null,ariaRequired:sr,ariaRoleDescription:Nn,ariaRowCount:nt,ariaRowIndex:nt,ariaRowSpan:nt,ariaSelected:sr,ariaSetSize:nt,ariaSort:null,ariaValueMax:nt,ariaValueMin:nt,ariaValueNow:nt,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function _6(t,e){return e in t?t[e]:e}function E6(t,e){return _6(t,e.toLowerCase())}const Vve=Bh({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Bf,acceptCharset:Nn,accessKey:Nn,action:null,allow:null,allowFullScreen:Bt,allowPaymentRequest:Bt,allowUserMedia:Bt,alt:null,as:null,async:Bt,autoCapitalize:null,autoComplete:Nn,autoFocus:Bt,autoPlay:Bt,blocking:Nn,capture:null,charSet:null,checked:Bt,cite:null,className:Nn,cols:nt,colSpan:null,content:null,contentEditable:sr,controls:Bt,controlsList:Nn,coords:nt|Bf,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Bt,defer:Bt,dir:null,dirName:null,disabled:Bt,download:sM,draggable:sr,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Bt,formTarget:null,headers:Nn,height:nt,hidden:sM,high:nt,href:null,hrefLang:null,htmlFor:Nn,httpEquiv:Nn,id:null,imageSizes:null,imageSrcSet:null,inert:Bt,inputMode:null,integrity:null,is:null,isMap:Bt,itemId:null,itemProp:Nn,itemRef:Nn,itemScope:Bt,itemType:Nn,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Bt,low:nt,manifest:null,max:null,maxLength:nt,media:null,method:null,min:null,minLength:nt,multiple:Bt,muted:Bt,name:null,nonce:null,noModule:Bt,noValidate:Bt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Bt,optimum:nt,pattern:null,ping:Nn,placeholder:null,playsInline:Bt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Bt,referrerPolicy:null,rel:Nn,required:Bt,reversed:Bt,rows:nt,rowSpan:nt,sandbox:Nn,scope:null,scoped:Bt,seamless:Bt,selected:Bt,shadowRootClonable:Bt,shadowRootDelegatesFocus:Bt,shadowRootMode:null,shape:null,size:nt,sizes:null,slot:null,span:nt,spellCheck:sr,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nt,step:null,style:null,tabIndex:nt,target:null,title:null,translate:null,type:null,typeMustMatch:Bt,useMap:null,value:sr,width:nt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Nn,axis:null,background:null,bgColor:null,border:nt,borderColor:null,bottomMargin:nt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Bt,declare:Bt,event:null,face:null,frame:null,frameBorder:null,hSpace:nt,leftMargin:nt,link:null,longDesc:null,lowSrc:null,marginHeight:nt,marginWidth:nt,noResize:Bt,noHref:Bt,noShade:Bt,noWrap:Bt,object:null,profile:null,prompt:null,rev:null,rightMargin:nt,rules:null,scheme:null,scrolling:sr,standby:null,summary:null,text:null,topMargin:nt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Bt,disableRemotePlayback:Bt,prefix:null,property:null,results:nt,security:null,unselectable:null},space:"html",transform:E6}),$ve=Bh({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:us,accentHeight:nt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nt,amplitude:nt,arabicForm:null,ascent:nt,attributeName:null,attributeType:null,azimuth:nt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nt,by:null,calcMode:null,capHeight:nt,className:Nn,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nt,diffuseConstant:nt,direction:null,display:null,dur:null,divisor:nt,dominantBaseline:null,download:Bt,dx:null,dy:null,edgeMode:null,editable:null,elevation:nt,enableBackground:null,end:null,event:null,exponent:nt,externalResourcesRequired:null,fill:null,fillOpacity:nt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Bf,g2:Bf,glyphName:Bf,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nt,horizOriginX:nt,horizOriginY:nt,id:null,ideographic:nt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nt,k:nt,k1:nt,k2:nt,k3:nt,k4:nt,kernelMatrix:us,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nt,overlineThickness:nt,paintOrder:null,panose1:null,path:null,pathLength:nt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Nn,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nt,pointsAtY:nt,pointsAtZ:nt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:us,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:us,rev:us,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:us,requiredFeatures:us,requiredFonts:us,requiredFormats:us,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nt,specularExponent:nt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nt,strikethroughThickness:nt,string:null,stroke:null,strokeDashArray:us,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nt,strokeOpacity:nt,strokeWidth:null,style:null,surfaceScale:nt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:us,tabIndex:nt,tableValues:null,target:null,targetX:nt,targetY:nt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:us,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nt,underlineThickness:nt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nt,values:null,vAlphabetic:nt,vMathematical:nt,vectorEffect:null,vHanging:nt,vIdeographic:nt,version:null,vertAdvY:nt,vertOriginX:nt,vertOriginY:nt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:_6}),C6=Bh({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),M6=Bh({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:E6}),T6=Bh({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),Wve={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Gve=/[A-Z]/g,sL=/-[a-z]/g,qve=/^data[-\w.:]+$/i;function Xve(t,e){const n=iM(e);let r=e,i=Qi;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&qve.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(sL,Yve);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!sL.test(s)){let o=s.replace(Gve,Kve);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=hR}return new i(r,e)}function Kve(t){return"-"+t.toLowerCase()}function Yve(t){return t.charAt(1).toUpperCase()}const Jve=b6([S6,Vve,C6,M6,T6],"html"),pR=b6([S6,$ve,C6,M6,T6],"svg");function Qve(t){return t.join(" ").trim()}var mR={},oL=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Zve=/\n/g,exe=/^\s*/,txe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,nxe=/^:\s*/,rxe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,ixe=/^[;\s]*/,sxe=/^\s+|\s+$/g,oxe=`
`,aL="/",lL="*",Su="",axe="comment",lxe="declaration",cxe=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(x){var w=x.match(Zve);w&&(n+=w.length);var v=x.lastIndexOf(oxe);r=~v?x.length-v:r+x.length}function s(){var x={line:n,column:r};return function(w){return w.position=new o(x),c(),w}}function o(x){this.start=x,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(x){var w=new Error(e.source+":"+n+":"+r+": "+x);if(w.reason=x,w.filename=e.source,w.line=n,w.column=r,w.source=t,!e.silent)throw w}function l(x){var w=x.exec(t);if(w){var v=w[0];return i(v),t=t.slice(v.length),w}}function c(){l(exe)}function u(x){var w;for(x=x||[];w=d();)w!==!1&&x.push(w);return x}function d(){var x=s();if(!(aL!=t.charAt(0)||lL!=t.charAt(1))){for(var w=2;Su!=t.charAt(w)&&(lL!=t.charAt(w)||aL!=t.charAt(w+1));)++w;if(w+=2,Su===t.charAt(w-1))return a("End of comment missing");var v=t.slice(2,w-2);return r+=2,i(v),t=t.slice(w),r+=2,x({type:axe,comment:v})}}function p(){var x=s(),w=l(txe);if(w){if(d(),!l(nxe))return a("property missing ':'");var v=l(rxe),y=x({type:lxe,property:cL(w[0].replace(oL,Su)),value:v?cL(v[0].replace(oL,Su)):Su});return l(ixe),y}}function m(){var x=[];u(x);for(var w;w=p();)w!==!1&&(x.push(w),u(x));return x}return c(),m()};function cL(t){return t?t.replace(sxe,Su):Su}var uxe=Ha&&Ha.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mR,"__esModule",{value:!0});mR.default=fxe;var dxe=uxe(cxe);function fxe(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,dxe.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?e(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Xw={};Object.defineProperty(Xw,"__esModule",{value:!0});Xw.camelCase=void 0;var hxe=/^--[a-zA-Z0-9_-]+$/,pxe=/-([a-z])/g,mxe=/^[^-]+$/,gxe=/^-(webkit|moz|ms|o|khtml)-/,yxe=/^-(ms)-/,vxe=function(t){return!t||mxe.test(t)||hxe.test(t)},xxe=function(t,e){return e.toUpperCase()},uL=function(t,e){return"".concat(e,"-")},wxe=function(t,e){return e===void 0&&(e={}),vxe(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(yxe,uL):t=t.replace(gxe,uL),t.replace(pxe,xxe))};Xw.camelCase=wxe;var bxe=Ha&&Ha.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Sxe=bxe(mR),_xe=Xw;function aM(t,e){var n={};return!t||typeof t!="string"||(0,Sxe.default)(t,function(r,i){r&&i&&(n[(0,_xe.camelCase)(r,e)]=i)}),n}aM.default=aM;var Exe=aM;const Cxe=R0(Exe),A6=R6("end"),gR=R6("start");function R6(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Mxe(t){const e=gR(t),n=A6(t);if(e&&n)return{start:e,end:n}}function rm(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?dL(t.position):"start"in t||"end"in t?dL(t):"line"in t||"column"in t?lM(t):""}function lM(t){return fL(t&&t.line)+":"+fL(t&&t.column)}function dL(t){return lM(t&&t.start)+"-"+lM(t&&t.end)}function fL(t){return t&&typeof t=="number"?t:1}class oi extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=rm(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}oi.prototype.file="";oi.prototype.name="";oi.prototype.reason="";oi.prototype.message="";oi.prototype.stack="";oi.prototype.column=void 0;oi.prototype.line=void 0;oi.prototype.ancestors=void 0;oi.prototype.cause=void 0;oi.prototype.fatal=void 0;oi.prototype.place=void 0;oi.prototype.ruleId=void 0;oi.prototype.source=void 0;const yR={}.hasOwnProperty,Txe=new Map,Axe=/[A-Z]/g,Rxe=new Set(["table","tbody","thead","tfoot","tr"]),Nxe=new Set(["td","th"]),N6="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function kxe(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Uxe(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=jxe(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?pR:Jve,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=k6(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function k6(t,e,n){if(e.type==="element")return Pxe(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Dxe(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Lxe(t,e,n);if(e.type==="mdxjsEsm")return Ixe(t,e);if(e.type==="root")return Oxe(t,e,n);if(e.type==="text")return Fxe(t,e)}function Pxe(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=pR,t.schema=i),t.ancestors.push(e);const s=D6(t,e.tagName,!1),o=zxe(t,e);let a=xR(t,e);return Rxe.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!Bve(l):!0})),P6(t,o,s,e),vR(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function Dxe(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Wm(t,e.position)}function Ixe(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Wm(t,e.position)}function Lxe(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=pR,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:D6(t,e.name,!0),o=Bxe(t,e),a=xR(t,e);return P6(t,o,s,e),vR(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function Oxe(t,e,n){const r={};return vR(r,xR(t,e)),t.create(e,t.Fragment,r,n)}function Fxe(t,e){return e.value}function P6(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function vR(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function jxe(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function Uxe(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=gR(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function zxe(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&yR.call(e.properties,i)){const s=Hxe(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Nxe.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Bxe(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else Wm(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else Wm(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function xR(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:Txe;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=k6(t,s,o);a!==void 0&&n.push(a)}return n}function Hxe(t,e,n){const r=Xve(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Ove(n):Qve(n)),r.property==="style"){let i=typeof n=="object"?n:Vxe(t,String(n));return t.stylePropertyNameCase==="css"&&(i=$xe(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?Wve[r.property]||r.property:r.attribute,n]}}function Vxe(t,e){try{return Cxe(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new oi("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=N6+"#cannot-parse-style-attribute",i}}function D6(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=nL(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=nL(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return yR.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);Wm(t)}function Wm(t,e){const n=new oi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=N6+"#cannot-handle-mdx-estrees-without-createevaluater",n}function $xe(t){const e={};let n;for(n in t)yR.call(t,n)&&(e[Wxe(n)]=t[n]);return e}function Wxe(t){let e=t.replace(Axe,Gxe);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Gxe(t){return"-"+t.toLowerCase()}const t_={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},qxe={};function wR(t,e){const n=qxe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return I6(t,r,i)}function I6(t,e,n){if(Xxe(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return hL(t.children,e,n)}return Array.isArray(t)?hL(t,e,n):""}function hL(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=I6(t[i],e,n);return r.join("")}function Xxe(t){return!!(t&&typeof t=="object")}const pL=document.createElement("i");function bR(t){const e="&"+t+";";pL.innerHTML=e;const n=pL.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function ws(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Gs(t,e){return t.length>0?(ws(t,t.length,0,e),t):e}const mL={}.hasOwnProperty;function L6(t){const e={};let n=-1;for(;++n<t.length;)Kxe(e,t[n]);return e}function Kxe(t,e){let n;for(n in e){const i=(mL.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){mL.call(i,o)||(i[o]=[]);const a=s[o];Yxe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Yxe(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);ws(t,0,0,r)}function O6(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function Mo(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const vi=Xc(/[A-Za-z]/),ni=Xc(/[\dA-Za-z]/),Jxe=Xc(/[#-'*+\--9=?A-Z^-~]/);function u0(t){return t!==null&&(t<32||t===127)}const cM=Xc(/\d/),Qxe=Xc(/[\dA-Fa-f]/),Zxe=Xc(/[!-/:-@[-`{-~]/);function Rt(t){return t!==null&&t<-2}function An(t){return t!==null&&(t<0||t===32)}function en(t){return t===-2||t===-1||t===32}const Kw=Xc(new RegExp("\\p{P}|\\p{S}","u")),ad=Xc(/\s/);function Xc(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Hh(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&ni(t.charCodeAt(n+1))&&ni(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o="�"}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function cn(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return en(l)?(t.enter(n),a(l)):e(l)}function a(l){return en(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const e0e={tokenize:t0e};function t0e(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),cn(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Rt(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const n0e={tokenize:r0e},gL={tokenize:i0e};function r0e(t){const e=this,n=[];let r=0,i,s,o;return a;function a(E){if(r<n.length){const C=n[r];return e.containerState=C[1],t.attempt(C[0].continuation,l,c)(E)}return c(E)}function l(E){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&S();const C=e.events.length;let A=C,T;for(;A--;)if(e.events[A][0]==="exit"&&e.events[A][1].type==="chunkFlow"){T=e.events[A][1].end;break}y(r);let k=C;for(;k<e.events.length;)e.events[k][1].end={...T},k++;return ws(e.events,A+1,0,e.events.slice(C)),e.events.length=k,c(E)}return a(E)}function c(E){if(r===n.length){if(!i)return p(E);if(i.currentConstruct&&i.currentConstruct.concrete)return x(E);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(gL,u,d)(E)}function u(E){return i&&S(),y(r),p(E)}function d(E){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,x(E)}function p(E){return e.containerState={},t.attempt(gL,m,x)(E)}function m(E){return r++,n.push([e.currentConstruct,e.containerState]),p(E)}function x(E){if(E===null){i&&S(),y(0),t.consume(E);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),w(E)}function w(E){if(E===null){v(t.exit("chunkFlow"),!0),y(0),t.consume(E);return}return Rt(E)?(t.consume(E),v(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(E),w)}function v(E,C){const A=e.sliceStream(E);if(C&&A.push(null),E.previous=s,s&&(s.next=E),s=E,i.defineSkip(E.start),i.write(A),e.parser.lazy[E.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<o&&(!i.events[T][1].end||i.events[T][1].end.offset>o))return;const k=e.events.length;let R=k,P,M;for(;R--;)if(e.events[R][0]==="exit"&&e.events[R][1].type==="chunkFlow"){if(P){M=e.events[R][1].end;break}P=!0}for(y(r),T=k;T<e.events.length;)e.events[T][1].end={...M},T++;ws(e.events,R+1,0,e.events.slice(k)),e.events.length=T}}function y(E){let C=n.length;for(;C-- >E;){const A=n[C];e.containerState=A[1],A[0].exit.call(e,t)}n.length=E}function S(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function i0e(t,e,n){return cn(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function gh(t){if(t===null||An(t)||ad(t))return 1;if(Kw(t))return 2}function Yw(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const uM={name:"attention",resolveAll:s0e,tokenize:o0e};function s0e(t,e){let n=-1,r,i,s,o,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d={...t[r][1].end},p={...t[n][1].start};yL(d,-l),yL(p,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:p},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Gs(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Gs(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=Gs(c,Yw(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Gs(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=Gs(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,ws(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function o0e(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=gh(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),u=gh(l),d=!u||u===2&&i||n.includes(l),p=!i||i===2&&u||n.includes(r);return c._open=!!(s===42?d:d&&(i||!p)),c._close=!!(s===42?p:p&&(u||!d)),e(l)}}function yL(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const a0e={name:"autolink",tokenize:l0e};function l0e(t,e,n){let r=0;return i;function i(m){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(m){return vi(m)?(t.consume(m),o):m===64?n(m):c(m)}function o(m){return m===43||m===45||m===46||ni(m)?(r=1,a(m)):c(m)}function a(m){return m===58?(t.consume(m),r=0,l):(m===43||m===45||m===46||ni(m))&&r++<32?(t.consume(m),a):(r=0,c(m))}function l(m){return m===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.exit("autolink"),e):m===null||m===32||m===60||u0(m)?n(m):(t.consume(m),l)}function c(m){return m===64?(t.consume(m),u):Jxe(m)?(t.consume(m),c):n(m)}function u(m){return ni(m)?d(m):n(m)}function d(m){return m===46?(t.consume(m),r=0,u):m===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(m),t.exit("autolinkMarker"),t.exit("autolink"),e):p(m)}function p(m){if((m===45||ni(m))&&r++<63){const x=m===45?p:d;return t.consume(m),x}return n(m)}}const Og={partial:!0,tokenize:c0e};function c0e(t,e,n){return r;function r(s){return en(s)?cn(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Rt(s)?e(s):n(s)}}const F6={continuation:{tokenize:d0e},exit:f0e,name:"blockQuote",tokenize:u0e};function u0e(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return en(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function d0e(t,e,n){const r=this;return i;function i(o){return en(o)?cn(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(F6,e,n)(o)}}function f0e(t){t.exit("blockQuote")}const j6={name:"characterEscape",tokenize:h0e};function h0e(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return Zxe(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const U6={name:"characterReference",tokenize:p0e};function p0e(t,e,n){const r=this;let i=0,s,o;return a;function a(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),l}function l(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=ni,u(d))}function c(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=Qxe,u):(t.enter("characterReferenceValue"),s=7,o=cM,u(d))}function u(d){if(d===59&&i){const p=t.exit("characterReferenceValue");return o===ni&&!bR(r.sliceSerialize(p))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(d)&&i++<s?(t.consume(d),u):n(d)}}const vL={partial:!0,tokenize:g0e},xL={concrete:!0,name:"codeFenced",tokenize:m0e};function m0e(t,e,n){const r=this,i={partial:!0,tokenize:A};let s=0,o=0,a;return l;function l(T){return c(T)}function c(T){const k=r.events[r.events.length-1];return s=k&&k[1].type==="linePrefix"?k[2].sliceSerialize(k[1],!0).length:0,a=T,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(T)}function u(T){return T===a?(o++,t.consume(T),u):o<3?n(T):(t.exit("codeFencedFenceSequence"),en(T)?cn(t,d,"whitespace")(T):d(T))}function d(T){return T===null||Rt(T)?(t.exit("codeFencedFence"),r.interrupt?e(T):t.check(vL,w,C)(T)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===null||Rt(T)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(T)):en(T)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),cn(t,m,"whitespace")(T)):T===96&&T===a?n(T):(t.consume(T),p)}function m(T){return T===null||Rt(T)?d(T):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),x(T))}function x(T){return T===null||Rt(T)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(T)):T===96&&T===a?n(T):(t.consume(T),x)}function w(T){return t.attempt(i,C,v)(T)}function v(T){return t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),y}function y(T){return s>0&&en(T)?cn(t,S,"linePrefix",s+1)(T):S(T)}function S(T){return T===null||Rt(T)?t.check(vL,w,C)(T):(t.enter("codeFlowValue"),E(T))}function E(T){return T===null||Rt(T)?(t.exit("codeFlowValue"),S(T)):(t.consume(T),E)}function C(T){return t.exit("codeFenced"),e(T)}function A(T,k,R){let P=0;return M;function M(K){return T.enter("lineEnding"),T.consume(K),T.exit("lineEnding"),L}function L(K){return T.enter("codeFencedFence"),en(K)?cn(T,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):z(K)}function z(K){return K===a?(T.enter("codeFencedFenceSequence"),H(K)):R(K)}function H(K){return K===a?(P++,T.consume(K),H):P>=o?(T.exit("codeFencedFenceSequence"),en(K)?cn(T,B,"whitespace")(K):B(K)):R(K)}function B(K){return K===null||Rt(K)?(T.exit("codeFencedFence"),k(K)):R(K)}}}function g0e(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const n_={name:"codeIndented",tokenize:v0e},y0e={partial:!0,tokenize:x0e};function v0e(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),cn(t,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):Rt(c)?t.attempt(y0e,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||Rt(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function x0e(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Rt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):cn(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Rt(o)?i(o):n(o)}}const w0e={name:"codeText",previous:S0e,resolve:b0e,tokenize:_0e};function b0e(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function S0e(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function _0e(t,e,n){let r=0,i,s;return o;function o(d){return t.enter("codeText"),t.enter("codeTextSequence"),a(d)}function a(d){return d===96?(t.consume(d),r++,a):(t.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),l):d===96?(s=t.enter("codeTextSequence"),i=0,u(d)):Rt(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(d))}function c(d){return d===null||d===32||d===96||Rt(d)?(t.exit("codeTextData"),l(d)):(t.consume(d),c)}function u(d){return d===96?(t.consume(d),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(s.type="codeTextData",c(d))}}class E0e{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Ap(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Ap(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Ap(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Ap(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Ap(this.left,n.reverse())}}}function Ap(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function z6(t){const e={};let n=-1,r,i,s,o,a,l,c;const u=new E0e(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,C0e(u,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},a=u.slice(i,n),a.unshift(r),u.splice(i,n-i+1,a))}}return ws(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function C0e(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let u,d,p=-1,m=n,x=0,w=0;const v=[w];for(;m;){for(;t.get(++i)[1]!==m;);s.push(i),m._tokenizer||(u=r.sliceStream(m),m.next||u.push(null),d&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=m,m=m.next}for(m=n;++p<a.length;)a[p][0]==="exit"&&a[p-1][0]==="enter"&&a[p][1].type===a[p-1][1].type&&a[p][1].start.line!==a[p][1].end.line&&(w=p+1,v.push(w),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):v.pop(),p=v.length;p--;){const y=a.slice(v[p],v[p+1]),S=s.pop();l.push([S,S+y.length-1]),t.splice(S,2,y)}for(l.reverse(),p=-1;++p<l.length;)c[x+l[p][0]]=x+l[p][1],x+=l[p][1]-l[p][0]-1;return c}const M0e={resolve:A0e,tokenize:R0e},T0e={partial:!0,tokenize:N0e};function A0e(t){return z6(t),t}function R0e(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Rt(a)?t.check(T0e,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function N0e(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),cn(t,s,"linePrefix")}function s(o){if(o===null||Rt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function B6(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return d;function d(y){return y===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(y),t.exit(s),p):y===null||y===32||y===41||u0(y)?n(y):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),w(y))}function p(y){return y===62?(t.enter(s),t.consume(y),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),m(y))}function m(y){return y===62?(t.exit("chunkString"),t.exit(a),p(y)):y===null||y===60||Rt(y)?n(y):(t.consume(y),y===92?x:m)}function x(y){return y===60||y===62||y===92?(t.consume(y),m):m(y)}function w(y){return!u&&(y===null||y===41||An(y))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(y)):u<c&&y===40?(t.consume(y),u++,w):y===41?(t.consume(y),u--,w):y===null||y===32||y===40||u0(y)?n(y):(t.consume(y),y===92?v:w)}function v(y){return y===40||y===41||y===92?(t.consume(y),w):w(y)}}function H6(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(m){return t.enter(r),t.enter(i),t.consume(m),t.exit(i),t.enter(s),u}function u(m){return a>999||m===null||m===91||m===93&&!l||m===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(m):m===93?(t.exit(s),t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):Rt(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===null||m===91||m===93||Rt(m)||a++>999?(t.exit("chunkString"),u(m)):(t.consume(m),l||(l=!en(m)),m===92?p:d)}function p(m){return m===91||m===92||m===93?(t.consume(m),a++,d):d(m)}}function V6(t,e,n,r,i,s){let o;return a;function a(p){return p===34||p===39||p===40?(t.enter(r),t.enter(i),t.consume(p),t.exit(i),o=p===40?41:p,l):n(p)}function l(p){return p===o?(t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):(t.enter(s),c(p))}function c(p){return p===o?(t.exit(s),l(o)):p===null?n(p):Rt(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),cn(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(p))}function u(p){return p===o||p===null||Rt(p)?(t.exit("chunkString"),c(p)):(t.consume(p),p===92?d:u)}function d(p){return p===o||p===92?(t.consume(p),u):u(p)}}function im(t,e){let n;return r;function r(i){return Rt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):en(i)?cn(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const k0e={name:"definition",tokenize:D0e},P0e={partial:!0,tokenize:I0e};function D0e(t,e,n){const r=this;let i;return s;function s(m){return t.enter("definition"),o(m)}function o(m){return H6.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function a(m){return i=Mo(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(t.enter("definitionMarker"),t.consume(m),t.exit("definitionMarker"),l):n(m)}function l(m){return An(m)?im(t,c)(m):c(m)}function c(m){return B6(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function u(m){return t.attempt(P0e,d,d)(m)}function d(m){return en(m)?cn(t,p,"whitespace")(m):p(m)}function p(m){return m===null||Rt(m)?(t.exit("definition"),r.parser.defined.push(i),e(m)):n(m)}}function I0e(t,e,n){return r;function r(a){return An(a)?im(t,i)(a):n(a)}function i(a){return V6(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return en(a)?cn(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Rt(a)?e(a):n(a)}}const L0e={name:"hardBreakEscape",tokenize:O0e};function O0e(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Rt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const F0e={name:"headingAtx",resolve:j0e,tokenize:U0e};function j0e(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},ws(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function U0e(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||An(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||Rt(u)?(t.exit("atxHeading"),e(u)):en(u)?cn(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||An(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const z0e=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],wL=["pre","script","style","textarea"],B0e={concrete:!0,name:"htmlFlow",resolveTo:$0e,tokenize:W0e},H0e={partial:!0,tokenize:q0e},V0e={partial:!0,tokenize:G0e};function $0e(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function W0e(t,e,n){const r=this;let i,s,o,a,l;return c;function c(U){return u(U)}function u(U){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(U),d}function d(U){return U===33?(t.consume(U),p):U===47?(t.consume(U),s=!0,w):U===63?(t.consume(U),i=3,r.interrupt?e:D):vi(U)?(t.consume(U),o=String.fromCharCode(U),v):n(U)}function p(U){return U===45?(t.consume(U),i=2,m):U===91?(t.consume(U),i=5,a=0,x):vi(U)?(t.consume(U),i=4,r.interrupt?e:D):n(U)}function m(U){return U===45?(t.consume(U),r.interrupt?e:D):n(U)}function x(U){const Y="CDATA[";return U===Y.charCodeAt(a++)?(t.consume(U),a===Y.length?r.interrupt?e:z:x):n(U)}function w(U){return vi(U)?(t.consume(U),o=String.fromCharCode(U),v):n(U)}function v(U){if(U===null||U===47||U===62||An(U)){const Y=U===47,oe=o.toLowerCase();return!Y&&!s&&wL.includes(oe)?(i=1,r.interrupt?e(U):z(U)):z0e.includes(o.toLowerCase())?(i=6,Y?(t.consume(U),y):r.interrupt?e(U):z(U)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(U):s?S(U):E(U))}return U===45||ni(U)?(t.consume(U),o+=String.fromCharCode(U),v):n(U)}function y(U){return U===62?(t.consume(U),r.interrupt?e:z):n(U)}function S(U){return en(U)?(t.consume(U),S):M(U)}function E(U){return U===47?(t.consume(U),M):U===58||U===95||vi(U)?(t.consume(U),C):en(U)?(t.consume(U),E):M(U)}function C(U){return U===45||U===46||U===58||U===95||ni(U)?(t.consume(U),C):A(U)}function A(U){return U===61?(t.consume(U),T):en(U)?(t.consume(U),A):E(U)}function T(U){return U===null||U===60||U===61||U===62||U===96?n(U):U===34||U===39?(t.consume(U),l=U,k):en(U)?(t.consume(U),T):R(U)}function k(U){return U===l?(t.consume(U),l=null,P):U===null||Rt(U)?n(U):(t.consume(U),k)}function R(U){return U===null||U===34||U===39||U===47||U===60||U===61||U===62||U===96||An(U)?A(U):(t.consume(U),R)}function P(U){return U===47||U===62||en(U)?E(U):n(U)}function M(U){return U===62?(t.consume(U),L):n(U)}function L(U){return U===null||Rt(U)?z(U):en(U)?(t.consume(U),L):n(U)}function z(U){return U===45&&i===2?(t.consume(U),q):U===60&&i===1?(t.consume(U),ee):U===62&&i===4?(t.consume(U),ie):U===63&&i===3?(t.consume(U),D):U===93&&i===5?(t.consume(U),F):Rt(U)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(H0e,$,H)(U)):U===null||Rt(U)?(t.exit("htmlFlowData"),H(U)):(t.consume(U),z)}function H(U){return t.check(V0e,B,$)(U)}function B(U){return t.enter("lineEnding"),t.consume(U),t.exit("lineEnding"),K}function K(U){return U===null||Rt(U)?H(U):(t.enter("htmlFlowData"),z(U))}function q(U){return U===45?(t.consume(U),D):z(U)}function ee(U){return U===47?(t.consume(U),o="",O):z(U)}function O(U){if(U===62){const Y=o.toLowerCase();return wL.includes(Y)?(t.consume(U),ie):z(U)}return vi(U)&&o.length<8?(t.consume(U),o+=String.fromCharCode(U),O):z(U)}function F(U){return U===93?(t.consume(U),D):z(U)}function D(U){return U===62?(t.consume(U),ie):U===45&&i===2?(t.consume(U),D):z(U)}function ie(U){return U===null||Rt(U)?(t.exit("htmlFlowData"),$(U)):(t.consume(U),ie)}function $(U){return t.exit("htmlFlow"),e(U)}}function G0e(t,e,n){const r=this;return i;function i(o){return Rt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function q0e(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Og,e,n)}}const X0e={name:"htmlText",tokenize:K0e};function K0e(t,e,n){const r=this;let i,s,o;return a;function a(D){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(D),l}function l(D){return D===33?(t.consume(D),c):D===47?(t.consume(D),A):D===63?(t.consume(D),E):vi(D)?(t.consume(D),R):n(D)}function c(D){return D===45?(t.consume(D),u):D===91?(t.consume(D),s=0,x):vi(D)?(t.consume(D),S):n(D)}function u(D){return D===45?(t.consume(D),m):n(D)}function d(D){return D===null?n(D):D===45?(t.consume(D),p):Rt(D)?(o=d,ee(D)):(t.consume(D),d)}function p(D){return D===45?(t.consume(D),m):d(D)}function m(D){return D===62?q(D):D===45?p(D):d(D)}function x(D){const ie="CDATA[";return D===ie.charCodeAt(s++)?(t.consume(D),s===ie.length?w:x):n(D)}function w(D){return D===null?n(D):D===93?(t.consume(D),v):Rt(D)?(o=w,ee(D)):(t.consume(D),w)}function v(D){return D===93?(t.consume(D),y):w(D)}function y(D){return D===62?q(D):D===93?(t.consume(D),y):w(D)}function S(D){return D===null||D===62?q(D):Rt(D)?(o=S,ee(D)):(t.consume(D),S)}function E(D){return D===null?n(D):D===63?(t.consume(D),C):Rt(D)?(o=E,ee(D)):(t.consume(D),E)}function C(D){return D===62?q(D):E(D)}function A(D){return vi(D)?(t.consume(D),T):n(D)}function T(D){return D===45||ni(D)?(t.consume(D),T):k(D)}function k(D){return Rt(D)?(o=k,ee(D)):en(D)?(t.consume(D),k):q(D)}function R(D){return D===45||ni(D)?(t.consume(D),R):D===47||D===62||An(D)?P(D):n(D)}function P(D){return D===47?(t.consume(D),q):D===58||D===95||vi(D)?(t.consume(D),M):Rt(D)?(o=P,ee(D)):en(D)?(t.consume(D),P):q(D)}function M(D){return D===45||D===46||D===58||D===95||ni(D)?(t.consume(D),M):L(D)}function L(D){return D===61?(t.consume(D),z):Rt(D)?(o=L,ee(D)):en(D)?(t.consume(D),L):P(D)}function z(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(t.consume(D),i=D,H):Rt(D)?(o=z,ee(D)):en(D)?(t.consume(D),z):(t.consume(D),B)}function H(D){return D===i?(t.consume(D),i=void 0,K):D===null?n(D):Rt(D)?(o=H,ee(D)):(t.consume(D),H)}function B(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||An(D)?P(D):(t.consume(D),B)}function K(D){return D===47||D===62||An(D)?P(D):n(D)}function q(D){return D===62?(t.consume(D),t.exit("htmlTextData"),t.exit("htmlText"),e):n(D)}function ee(D){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(D),t.exit("lineEnding"),O}function O(D){return en(D)?cn(t,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):F(D)}function F(D){return t.enter("htmlTextData"),o(D)}}const SR={name:"labelEnd",resolveAll:Z0e,resolveTo:ewe,tokenize:twe},Y0e={tokenize:nwe},J0e={tokenize:rwe},Q0e={tokenize:iwe};function Z0e(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&ws(t,0,t.length,n),t}function ewe(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=Gs(a,t.slice(s+1,s+r+3)),a=Gs(a,[["enter",u,e]]),a=Gs(a,Yw(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=Gs(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=Gs(a,t.slice(o+1)),a=Gs(a,[["exit",l,e]]),ws(t,s,t.length,a),t}function twe(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(p){return s?s._inactive?d(p):(o=r.parser.defined.includes(Mo(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(p),t.exit("labelMarker"),t.exit("labelEnd"),l):n(p)}function l(p){return p===40?t.attempt(Y0e,u,o?u:d)(p):p===91?t.attempt(J0e,u,o?c:d)(p):o?u(p):d(p)}function c(p){return t.attempt(Q0e,u,d)(p)}function u(p){return e(p)}function d(p){return s._balanced=!0,n(p)}}function nwe(t,e,n){return r;function r(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),i}function i(d){return An(d)?im(t,s)(d):s(d)}function s(d){return d===41?u(d):B6(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return An(d)?im(t,l)(d):u(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?V6(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function c(d){return An(d)?im(t,u)(d):u(d)}function u(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function rwe(t,e,n){const r=this;return i;function i(a){return H6.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Mo(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function iwe(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const swe={name:"labelStartImage",resolveAll:SR.resolveAll,tokenize:owe};function owe(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const awe={name:"labelStartLink",resolveAll:SR.resolveAll,tokenize:lwe};function lwe(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const r_={name:"lineEnding",tokenize:cwe};function cwe(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),cn(t,e,"linePrefix")}}const dx={name:"thematicBreak",tokenize:uwe};function uwe(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Rt(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),en(c)?cn(t,a,"whitespace")(c):a(c))}}const Oi={continuation:{tokenize:pwe},exit:gwe,name:"list",tokenize:hwe},dwe={partial:!0,tokenize:ywe},fwe={partial:!0,tokenize:mwe};function hwe(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(m){const x=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:cM(m)){if(r.containerState.type||(r.containerState.type=x,t.enter(x,{_container:!0})),x==="listUnordered")return t.enter("listItemPrefix"),m===42||m===45?t.check(dx,n,c)(m):c(m);if(!r.interrupt||m===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(m)}return n(m)}function l(m){return cM(m)&&++o<10?(t.consume(m),l):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(t.exit("listItemValue"),c(m)):n(m)}function c(m){return t.enter("listItemMarker"),t.consume(m),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,t.check(Og,r.interrupt?n:u,t.attempt(dwe,p,d))}function u(m){return r.containerState.initialBlankLine=!0,s++,p(m)}function d(m){return en(m)?(t.enter("listItemPrefixWhitespace"),t.consume(m),t.exit("listItemPrefixWhitespace"),p):n(m)}function p(m){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(m)}}function pwe(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Og,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,cn(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!en(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(fwe,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,cn(t,t.attempt(Oi,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function mwe(t,e,n){const r=this;return cn(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function gwe(t){t.exit(this.containerState.type)}function ywe(t,e,n){const r=this;return cn(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!en(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const bL={name:"setextUnderline",resolveTo:vwe,tokenize:xwe};function vwe(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function xwe(t,e,n){const r=this;let i;return s;function s(c){let u=r.events.length,d;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){d=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),en(c)?cn(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Rt(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const wwe={tokenize:bwe};function bwe(t){const e=this,n=t.attempt(Og,r,t.attempt(this.parser.constructs.flowInitial,i,cn(t,t.attempt(this.parser.constructs.flow,i,t.attempt(M0e,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Swe={resolveAll:W6()},_we=$6("string"),Ewe=$6("text");function $6(t){return{resolveAll:W6(t==="text"?Cwe:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(u){return c(u)?s(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const d=i[u];let p=-1;if(d)for(;++p<d.length;){const m=d[p];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function W6(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function Cwe(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const Mwe={42:Oi,43:Oi,45:Oi,48:Oi,49:Oi,50:Oi,51:Oi,52:Oi,53:Oi,54:Oi,55:Oi,56:Oi,57:Oi,62:F6},Twe={91:k0e},Awe={[-2]:n_,[-1]:n_,32:n_},Rwe={35:F0e,42:dx,45:[bL,dx],60:B0e,61:bL,95:dx,96:xL,126:xL},Nwe={38:U6,92:j6},kwe={[-5]:r_,[-4]:r_,[-3]:r_,33:swe,38:U6,42:uM,60:[a0e,X0e],91:awe,92:[L0e,j6],93:SR,95:uM,96:w0e},Pwe={null:[uM,Swe]},Dwe={null:[42,95]},Iwe={null:[]},Lwe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Dwe,contentInitial:Twe,disable:Iwe,document:Mwe,flow:Rwe,flowInitial:Awe,insideSpan:Pwe,string:Nwe,text:kwe},Symbol.toStringTag,{value:"Module"}));function Owe(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:k(A),check:k(T),consume:S,enter:E,exit:C,interrupt:k(T,{interrupt:!0})},c={code:null,containerState:{},defineSkip:w,events:[],now:x,parser:t,previous:null,sliceSerialize:p,sliceStream:m,write:d};let u=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function d(L){return o=Gs(o,L),v(),o[o.length-1]!==null?[]:(R(e,0),c.events=Yw(s,c.events,c),c.events)}function p(L,z){return jwe(m(L),z)}function m(L){return Fwe(o,L)}function x(){const{_bufferIndex:L,_index:z,line:H,column:B,offset:K}=r;return{_bufferIndex:L,_index:z,line:H,column:B,offset:K}}function w(L){i[L.line]=L.column,M()}function v(){let L;for(;r._index<o.length;){const z=o[r._index];if(typeof z=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<z.length;)y(z.charCodeAt(r._bufferIndex));else y(z)}}function y(L){u=u(L)}function S(L){Rt(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,M()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=L}function E(L,z){const H=z||{};return H.type=L,H.start=x(),c.events.push(["enter",H,c]),a.push(H),H}function C(L){const z=a.pop();return z.end=x(),c.events.push(["exit",z,c]),z}function A(L,z){R(L,z.from)}function T(L,z){z.restore()}function k(L,z){return H;function H(B,K,q){let ee,O,F,D;return Array.isArray(B)?$(B):"tokenize"in B?$([B]):ie(B);function ie(ne){return Z;function Z(fe){const we=fe!==null&&ne[fe],xe=fe!==null&&ne.null,Ve=[...Array.isArray(we)?we:we?[we]:[],...Array.isArray(xe)?xe:xe?[xe]:[]];return $(Ve)(fe)}}function $(ne){return ee=ne,O=0,ne.length===0?q:U(ne[O])}function U(ne){return Z;function Z(fe){return D=P(),F=ne,ne.partial||(c.currentConstruct=ne),ne.name&&c.parser.constructs.disable.null.includes(ne.name)?oe():ne.tokenize.call(z?Object.assign(Object.create(c),z):c,l,Y,oe)(fe)}}function Y(ne){return L(F,D),K}function oe(ne){return D.restore(),++O<ee.length?U(ee[O]):q}}}function R(L,z){L.resolveAll&&!s.includes(L)&&s.push(L),L.resolve&&ws(c.events,z,c.events.length-z,L.resolve(c.events.slice(z),c)),L.resolveTo&&(c.events=L.resolveTo(c.events,c))}function P(){const L=x(),z=c.previous,H=c.currentConstruct,B=c.events.length,K=Array.from(a);return{from:B,restore:q};function q(){r=L,c.previous=z,c.currentConstruct=H,c.events.length=B,a=K,M()}}function M(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Fwe(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function jwe(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function Uwe(t){const r={constructs:L6([Lwe,...(t||{}).extensions||[]]),content:i(e0e),defined:[],document:i(n0e),flow:i(wwe),lazy:{},string:i(_we),text:i(Ewe)};return r;function i(s){return o;function o(a){return Owe(r,s,a)}}}function zwe(t){for(;!z6(t););return t}const SL=/[\0\t\n\r]/g;function Bwe(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,u,d,p,m;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,e="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(SL.lastIndex=d,c=SL.exec(s),p=c&&c.index!==void 0?c.index:s.length,m=s.charCodeAt(p),!c){e=s.slice(d);break}if(m===10&&d===p&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<p&&(l.push(s.slice(d,p)),t+=p-d),m){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}d=p+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const Hwe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Vwe(t){return t.replace(Hwe,$we)}function $we(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return O6(n.slice(s?2:1),s?16:10)}return bR(n)||t}const G6={}.hasOwnProperty;function Wwe(t,e,n){return typeof e!="string"&&(n=e,e=void 0),Gwe(n)(zwe(Uwe(n).document().write(Bwe()(t,e,!0))))}function Gwe(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(St),autolinkProtocol:P,autolinkEmail:P,atxHeading:s(ft),blockQuote:s(xe),characterEscape:P,characterReference:P,codeFenced:s(Ve),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ve,o),codeText:s(Pe,o),codeTextData:P,data:P,codeFlowValue:P,definition:s(et),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(te),hardBreakEscape:s(Ye),hardBreakTrailing:s(Ye),htmlFlow:s(ht,o),htmlFlowData:P,htmlText:s(ht,o),htmlTextData:P,image:s(Qe),label:o,link:s(St),listItem:s(Me),listItemValue:p,listOrdered:s(Ne,d),listUnordered:s(Ne),paragraph:s(st),reference:U,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ft),strong:s(Q),thematicBreak:s(re)},exit:{atxHeading:l(),atxHeadingSequence:A,autolink:l(),autolinkEmail:we,autolinkProtocol:fe,blockQuote:l(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:oe,characterReferenceMarkerNumeric:oe,characterReferenceValue:ne,characterReference:Z,codeFenced:l(v),codeFencedFence:w,codeFencedFenceInfo:m,codeFencedFenceMeta:x,codeFlowValue:M,codeIndented:l(y),codeText:l(K),codeTextData:M,data:M,definition:l(),definitionDestinationString:C,definitionLabelString:S,definitionTitleString:E,emphasis:l(),hardBreakEscape:l(z),hardBreakTrailing:l(z),htmlFlow:l(H),htmlFlowData:M,htmlText:l(B),htmlTextData:M,image:l(ee),label:F,labelText:O,lineEnding:L,link:l(q),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:Y,resourceDestinationString:D,resourceTitleString:ie,resource:$,setextHeading:l(R),setextHeadingLineSequence:k,setextHeadingText:T,strong:l(),thematicBreak:l()}};q6(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(G){let ae={type:"root",children:[]};const ce={stack:[ae],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:n},Ae=[];let De=-1;for(;++De<G.length;)if(G[De][1].type==="listOrdered"||G[De][1].type==="listUnordered")if(G[De][0]==="enter")Ae.push(De);else{const Je=Ae.pop();De=i(G,Je,De)}for(De=-1;++De<G.length;){const Je=e[G[De][0]];G6.call(Je,G[De][1].type)&&Je[G[De][1].type].call(Object.assign({sliceSerialize:G[De][2].sliceSerialize},ce),G[De][1])}if(ce.tokenStack.length>0){const Je=ce.tokenStack[ce.tokenStack.length-1];(Je[1]||_L).call(ce,void 0,Je[0])}for(ae.position={start:Ul(G.length>0?G[0][1].start:{line:1,column:1,offset:0}),end:Ul(G.length>0?G[G.length-2][1].end:{line:1,column:1,offset:0})},De=-1;++De<e.transforms.length;)ae=e.transforms[De](ae)||ae;return ae}function i(G,ae,ce){let Ae=ae-1,De=-1,Je=!1,me,ge,be,Oe;for(;++Ae<=ce;){const Xe=G[Ae];switch(Xe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Xe[0]==="enter"?De++:De--,Oe=void 0;break}case"lineEndingBlank":{Xe[0]==="enter"&&(me&&!Oe&&!De&&!be&&(be=Ae),Oe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Oe=void 0}if(!De&&Xe[0]==="enter"&&Xe[1].type==="listItemPrefix"||De===-1&&Xe[0]==="exit"&&(Xe[1].type==="listUnordered"||Xe[1].type==="listOrdered")){if(me){let Ge=Ae;for(ge=void 0;Ge--;){const wt=G[Ge];if(wt[1].type==="lineEnding"||wt[1].type==="lineEndingBlank"){if(wt[0]==="exit")continue;ge&&(G[ge][1].type="lineEndingBlank",Je=!0),wt[1].type="lineEnding",ge=Ge}else if(!(wt[1].type==="linePrefix"||wt[1].type==="blockQuotePrefix"||wt[1].type==="blockQuotePrefixWhitespace"||wt[1].type==="blockQuoteMarker"||wt[1].type==="listItemIndent"))break}be&&(!ge||be<ge)&&(me._spread=!0),me.end=Object.assign({},ge?G[ge][1].start:Xe[1].end),G.splice(ge||Ae,0,["exit",me,Xe[2]]),Ae++,ce++}if(Xe[1].type==="listItemPrefix"){const Ge={type:"listItem",_spread:!1,start:Object.assign({},Xe[1].start),end:void 0};me=Ge,G.splice(Ae,0,["enter",Ge,Xe[2]]),Ae++,ce++,be=void 0,Oe=!0}}}return G[ae][1]._spread=Je,ce}function s(G,ae){return ce;function ce(Ae){a.call(this,G(Ae),Ae),ae&&ae.call(this,Ae)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(G,ae,ce){this.stack[this.stack.length-1].children.push(G),this.stack.push(G),this.tokenStack.push([ae,ce||void 0]),G.position={start:Ul(ae.start),end:void 0}}function l(G){return ae;function ae(ce){G&&G.call(this,ce),c.call(this,ce)}}function c(G,ae){const ce=this.stack.pop(),Ae=this.tokenStack.pop();if(Ae)Ae[0].type!==G.type&&(ae?ae.call(this,G,Ae[0]):(Ae[1]||_L).call(this,G,Ae[0]));else throw new Error("Cannot close `"+G.type+"` ("+rm({start:G.start,end:G.end})+"): it’s not open");ce.position.end=Ul(G.end)}function u(){return wR(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function p(G){if(this.data.expectingFirstListItemValue){const ae=this.stack[this.stack.length-2];ae.start=Number.parseInt(this.sliceSerialize(G),10),this.data.expectingFirstListItemValue=void 0}}function m(){const G=this.resume(),ae=this.stack[this.stack.length-1];ae.lang=G}function x(){const G=this.resume(),ae=this.stack[this.stack.length-1];ae.meta=G}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function v(){const G=this.resume(),ae=this.stack[this.stack.length-1];ae.value=G.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const G=this.resume(),ae=this.stack[this.stack.length-1];ae.value=G.replace(/(\r?\n|\r)$/g,"")}function S(G){const ae=this.resume(),ce=this.stack[this.stack.length-1];ce.label=ae,ce.identifier=Mo(this.sliceSerialize(G)).toLowerCase()}function E(){const G=this.resume(),ae=this.stack[this.stack.length-1];ae.title=G}function C(){const G=this.resume(),ae=this.stack[this.stack.length-1];ae.url=G}function A(G){const ae=this.stack[this.stack.length-1];if(!ae.depth){const ce=this.sliceSerialize(G).length;ae.depth=ce}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function k(G){const ae=this.stack[this.stack.length-1];ae.depth=this.sliceSerialize(G).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function P(G){const ce=this.stack[this.stack.length-1].children;let Ae=ce[ce.length-1];(!Ae||Ae.type!=="text")&&(Ae=I(),Ae.position={start:Ul(G.start),end:void 0},ce.push(Ae)),this.stack.push(Ae)}function M(G){const ae=this.stack.pop();ae.value+=this.sliceSerialize(G),ae.position.end=Ul(G.end)}function L(G){const ae=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ce=ae.children[ae.children.length-1];ce.position.end=Ul(G.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ae.type)&&(P.call(this,G),M.call(this,G))}function z(){this.data.atHardBreak=!0}function H(){const G=this.resume(),ae=this.stack[this.stack.length-1];ae.value=G}function B(){const G=this.resume(),ae=this.stack[this.stack.length-1];ae.value=G}function K(){const G=this.resume(),ae=this.stack[this.stack.length-1];ae.value=G}function q(){const G=this.stack[this.stack.length-1];if(this.data.inReference){const ae=this.data.referenceType||"shortcut";G.type+="Reference",G.referenceType=ae,delete G.url,delete G.title}else delete G.identifier,delete G.label;this.data.referenceType=void 0}function ee(){const G=this.stack[this.stack.length-1];if(this.data.inReference){const ae=this.data.referenceType||"shortcut";G.type+="Reference",G.referenceType=ae,delete G.url,delete G.title}else delete G.identifier,delete G.label;this.data.referenceType=void 0}function O(G){const ae=this.sliceSerialize(G),ce=this.stack[this.stack.length-2];ce.label=Vwe(ae),ce.identifier=Mo(ae).toLowerCase()}function F(){const G=this.stack[this.stack.length-1],ae=this.resume(),ce=this.stack[this.stack.length-1];if(this.data.inReference=!0,ce.type==="link"){const Ae=G.children;ce.children=Ae}else ce.alt=ae}function D(){const G=this.resume(),ae=this.stack[this.stack.length-1];ae.url=G}function ie(){const G=this.resume(),ae=this.stack[this.stack.length-1];ae.title=G}function $(){this.data.inReference=void 0}function U(){this.data.referenceType="collapsed"}function Y(G){const ae=this.resume(),ce=this.stack[this.stack.length-1];ce.label=ae,ce.identifier=Mo(this.sliceSerialize(G)).toLowerCase(),this.data.referenceType="full"}function oe(G){this.data.characterReferenceType=G.type}function ne(G){const ae=this.sliceSerialize(G),ce=this.data.characterReferenceType;let Ae;ce?(Ae=O6(ae,ce==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ae=bR(ae);const De=this.stack[this.stack.length-1];De.value+=Ae}function Z(G){const ae=this.stack.pop();ae.position.end=Ul(G.end)}function fe(G){M.call(this,G);const ae=this.stack[this.stack.length-1];ae.url=this.sliceSerialize(G)}function we(G){M.call(this,G);const ae=this.stack[this.stack.length-1];ae.url="mailto:"+this.sliceSerialize(G)}function xe(){return{type:"blockquote",children:[]}}function Ve(){return{type:"code",lang:null,meta:null,value:""}}function Pe(){return{type:"inlineCode",value:""}}function et(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function te(){return{type:"emphasis",children:[]}}function ft(){return{type:"heading",depth:0,children:[]}}function Ye(){return{type:"break"}}function ht(){return{type:"html",value:""}}function Qe(){return{type:"image",title:null,url:"",alt:null}}function St(){return{type:"link",title:null,url:"",children:[]}}function Ne(G){return{type:"list",ordered:G.type==="listOrdered",start:null,spread:G._spread,children:[]}}function Me(G){return{type:"listItem",spread:G._spread,checked:null,children:[]}}function st(){return{type:"paragraph",children:[]}}function Q(){return{type:"strong",children:[]}}function I(){return{type:"text",value:""}}function re(){return{type:"thematicBreak"}}}function Ul(t){return{line:t.line,column:t.column,offset:t.offset}}function q6(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?q6(t,r):qwe(t,r)}}function qwe(t,e){let n;for(n in e)if(G6.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function _L(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+rm({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+rm({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+rm({start:e.start,end:e.end})+") is still open")}function Xwe(t){const e=this;e.parser=n;function n(r){return Wwe(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Kwe(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function Ywe(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function Jwe(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function Qwe(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Zwe(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function ebe(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Hh(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function tbe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function nbe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function X6(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function rbe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return X6(t,e);const i={src:Hh(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function ibe(t,e){const n={src:Hh(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function sbe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function obe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return X6(t,e);const i={href:Hh(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function abe(t,e){const n={href:Hh(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function lbe(t,e,n){const r=t.all(e),i=n?cbe(n):K6(e),s={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function cbe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=K6(n[r])}return e}function K6(t){const e=t.spread;return e??t.children.length>1}function ube(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function dbe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function fbe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function hbe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function pbe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=gR(e.children[1]),l=A6(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function mbe(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const d=e.children[l],p={},m=o?o[l]:void 0;m&&(p.align=m);let x={type:"element",tagName:s,properties:p,children:[]};d&&(x.children=t.all(d),t.patch(d,x),x=t.applyData(d,x)),c.push(x)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function gbe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const EL=9,CL=32;function ybe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(ML(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(ML(e.slice(i),i>0,!1)),s.join("")}function ML(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===EL||s===CL;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===EL||s===CL;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function vbe(t,e){const n={type:"text",value:ybe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function xbe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const wbe={blockquote:Kwe,break:Ywe,code:Jwe,delete:Qwe,emphasis:Zwe,footnoteReference:ebe,heading:tbe,html:nbe,imageReference:rbe,image:ibe,inlineCode:sbe,linkReference:obe,link:abe,listItem:lbe,list:ube,paragraph:dbe,root:fbe,strong:hbe,table:pbe,tableCell:gbe,tableRow:mbe,text:vbe,thematicBreak:xbe,toml:Sv,yaml:Sv,definition:Sv,footnoteDefinition:Sv};function Sv(){}const Y6=-1,Jw=0,sm=1,d0=2,_R=3,ER=4,CR=5,MR=6,J6=7,Q6=8,TL=typeof self=="object"?self:globalThis,bbe=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case Jw:case Y6:return n(o,i);case sm:{const a=n([],i);for(const l of o)a.push(r(l));return a}case d0:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case _R:return n(new Date(o),i);case ER:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case CR:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case MR:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case J6:{const{name:a,message:l}=o;return n(new TL[a](l),i)}case Q6:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new TL[s](o),i)};return r},AL=t=>bbe(new Map,t)(0),tf="",{toString:Sbe}={},{keys:_be}=Object,Rp=t=>{const e=typeof t;if(e!=="object"||!t)return[Jw,e];const n=Sbe.call(t).slice(8,-1);switch(n){case"Array":return[sm,tf];case"Object":return[d0,tf];case"Date":return[_R,tf];case"RegExp":return[ER,tf];case"Map":return[CR,tf];case"Set":return[MR,tf];case"DataView":return[sm,n]}return n.includes("Array")?[sm,n]:n.includes("Error")?[J6,n]:[d0,n]},_v=([t,e])=>t===Jw&&(e==="function"||e==="symbol"),Ebe=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=Rp(o);switch(a){case Jw:{let u=o;switch(l){case"bigint":a=Q6,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([Y6],o)}return i([a,u],o)}case sm:{if(l){let p=o;return l==="DataView"?p=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(p=new Uint8Array(o)),i([l,[...p]],o)}const u=[],d=i([a,u],o);for(const p of o)u.push(s(p));return d}case d0:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],d=i([a,u],o);for(const p of _be(o))(t||!_v(Rp(o[p])))&&u.push([s(p),s(o[p])]);return d}case _R:return i([a,o.toISOString()],o);case ER:{const{source:u,flags:d}=o;return i([a,{source:u,flags:d}],o)}case CR:{const u=[],d=i([a,u],o);for(const[p,m]of o)(t||!(_v(Rp(p))||_v(Rp(m))))&&u.push([s(p),s(m)]);return d}case MR:{const u=[],d=i([a,u],o);for(const p of o)(t||!_v(Rp(p)))&&u.push(s(p));return d}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},RL=(t,{json:e,lossy:n}={})=>{const r=[];return Ebe(!(e||n),!!e,new Map,r)(t),r},f0=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?AL(RL(t,e)):structuredClone(t):(t,e)=>AL(RL(t,e));function Cbe(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Mbe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Tbe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Cbe,r=t.options.footnoteBackLabel||Mbe,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),d=String(c.identifier).toUpperCase(),p=Hh(d.toLowerCase());let m=0;const x=[],w=t.footnoteCounts.get(d);for(;w!==void 0&&++m<=w;){x.length>0&&x.push({type:"text",value:" "});let S=typeof n=="string"?n:n(l,m);typeof S=="string"&&(S={type:"text",value:S}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+p+(m>1?"-"+m:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,m),className:["data-footnote-backref"]},children:Array.isArray(S)?S:[S]})}const v=u[u.length-1];if(v&&v.type==="element"&&v.tagName==="p"){const S=v.children[v.children.length-1];S&&S.type==="text"?S.value+=" ":v.children.push({type:"text",value:" "}),v.children.push(...x)}else u.push(...x);const y={type:"element",tagName:"li",properties:{id:e+"fn-"+p},children:t.wrap(u,!0)};t.patch(c,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...f0(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const Qw=function(t){if(t==null)return kbe;if(typeof t=="function")return Zw(t);if(typeof t=="object")return Array.isArray(t)?Abe(t):Rbe(t);if(typeof t=="string")return Nbe(t);throw new Error("Expected function, string, or object as test")};function Abe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Qw(t[n]);return Zw(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function Rbe(t){const e=t;return Zw(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function Nbe(t){return Zw(e);function e(n){return n&&n.type===t}}function Zw(t){return e;function e(n,r,i){return!!(Pbe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function kbe(){return!0}function Pbe(t){return t!==null&&typeof t=="object"&&"type"in t}const Z6=[],Dbe=!0,dM=!1,Ibe="skip";function eV(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=Qw(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,u){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const m=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(l.type+(m?"<"+m+">":""))+")"})}return p;function p(){let m=Z6,x,w,v;if((!e||s(l,c,u[u.length-1]||void 0))&&(m=Lbe(n(l,u)),m[0]===dM))return m;if("children"in l&&l.children){const y=l;if(y.children&&m[0]!==Ibe)for(w=(r?y.children.length:-1)+o,v=u.concat(y);w>-1&&w<y.children.length;){const S=y.children[w];if(x=a(S,w,v)(),x[0]===dM)return x;w=typeof x[1]=="number"?x[1]:w+o}}return m}}}function Lbe(t){return Array.isArray(t)?t:typeof t=="number"?[Dbe,t]:t==null?Z6:[t]}function TR(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),eV(t,s,a,i);function a(l,c){const u=c[c.length-1],d=u?u.children.indexOf(l):void 0;return o(l,d,u)}}const fM={}.hasOwnProperty,Obe={};function Fbe(t,e){const n=e||Obe,r=new Map,i=new Map,s=new Map,o={...wbe,...n.handlers},a={all:c,applyData:Ube,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:jbe,wrap:Bbe};return TR(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?r:i,p=String(u.identifier).toUpperCase();d.has(p)||d.set(p,u)}}),a;function l(u,d){const p=u.type,m=a.handlers[p];if(fM.call(a.handlers,p)&&m)return m(a,u,d);if(a.options.passThrough&&a.options.passThrough.includes(p)){if("children"in u){const{children:w,...v}=u,y=f0(v);return y.children=a.all(u),y}return f0(u)}return(a.options.unknownHandler||zbe)(a,u,d)}function c(u){const d=[];if("children"in u){const p=u.children;let m=-1;for(;++m<p.length;){const x=a.one(p[m],u);if(x){if(m&&p[m-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=NL(x.value)),!Array.isArray(x)&&x.type==="element")){const w=x.children[0];w&&w.type==="text"&&(w.value=NL(w.value))}Array.isArray(x)?d.push(...x):d.push(x)}}}return d}}function jbe(t,e){t.position&&(e.position=Mxe(t))}function Ube(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,f0(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function zbe(t,e){const n=e.data||{},r="value"in e&&!(fM.call(n,"hProperties")||fM.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Bbe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function NL(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function kL(t,e){const n=Fbe(t,e),r=n.one(t,void 0),i=Tbe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Hbe(t,e){return t&&"run"in t?async function(n,r){const i=kL(n,{file:r,...e});await t.run(i,r)}:function(n,r){return kL(n,{file:r,...t||e})}}function PL(t){if(t)throw t}var fx=Object.prototype.hasOwnProperty,tV=Object.prototype.toString,DL=Object.defineProperty,IL=Object.getOwnPropertyDescriptor,LL=function(e){return typeof Array.isArray=="function"?Array.isArray(e):tV.call(e)==="[object Array]"},OL=function(e){if(!e||tV.call(e)!=="[object Object]")return!1;var n=fx.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&fx.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||fx.call(e,i)},FL=function(e,n){DL&&n.name==="__proto__"?DL(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},jL=function(e,n){if(n==="__proto__")if(fx.call(e,n)){if(IL)return IL(e,n).value}else return;return e[n]},Vbe=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=jL(a,n),i=jL(e,n),a!==i&&(u&&i&&(OL(i)||(s=LL(i)))?(s?(s=!1,o=r&&LL(r)?r:[]):o=r&&OL(r)?r:{},FL(a,{name:n,newValue:t(u,o,i)})):typeof i<"u"&&FL(a,{name:n,newValue:i}));return a};const i_=R0(Vbe);function hM(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function $be(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const u=t[++s];let d=-1;if(l){o(l);return}for(;++d<i.length;)(c[d]===null||c[d]===void 0)&&(c[d]=i[d]);i=c,u?Wbe(u,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function Wbe(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&n)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const $o={basename:Gbe,dirname:qbe,extname:Xbe,join:Kbe,sep:"/"};function Gbe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Fg(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function qbe(t){if(Fg(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Xbe(t){Fg(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function Kbe(...t){let e=-1,n;for(;++e<t.length;)Fg(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Ybe(n)}function Ybe(t){Fg(t);const e=t.codePointAt(0)===47;let n=Jbe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Jbe(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Fg(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Qbe={cwd:Zbe};function Zbe(){return"/"}function pM(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function eSe(t){if(typeof t=="string")t=new URL(t);else if(!pM(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return tSe(t)}function tSe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const s_=["history","path","basename","stem","extname","dirname"];class nV{constructor(e){let n;e?pM(e)?n={path:e}:typeof e=="string"||nSe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Qbe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<s_.length;){const s=s_[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)s_.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?$o.basename(this.path):void 0}set basename(e){a_(e,"basename"),o_(e,"basename"),this.path=$o.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?$o.dirname(this.path):void 0}set dirname(e){UL(this.basename,"dirname"),this.path=$o.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?$o.extname(this.path):void 0}set extname(e){if(o_(e,"extname"),UL(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=$o.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){pM(e)&&(e=eSe(e)),a_(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?$o.basename(this.path,this.extname):void 0}set stem(e){a_(e,"stem"),o_(e,"stem"),this.path=$o.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new oi(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function o_(t,e){if(t&&t.includes($o.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+$o.sep+"`")}function a_(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function UL(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function nSe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const rSe=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},iSe={}.hasOwnProperty;class AR extends rSe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=$be()}copy(){const e=new AR;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(i_(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(u_("data",this.frozen),this.namespace[e]=n,this):iSe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(u_("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Ev(e),r=this.parser||this.Parser;return l_("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),l_("process",this.parser||this.Parser),c_("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=Ev(e),l=r.parse(a);r.run(l,a,function(u,d,p){if(u||!d||!p)return c(u);const m=d,x=r.stringify(m,p);aSe(x)?p.value=x:p.result=x,c(u,p)});function c(u,d){u||!d?o(u):s?s(d):n(void 0,d)}}}processSync(e){let n=!1,r;return this.freeze(),l_("processSync",this.parser||this.Parser),c_("processSync",this.compiler||this.Compiler),this.process(e,i),BL("processSync","process",n),r;function i(s,o){n=!0,PL(s),r=o}}run(e,n,r){zL(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=Ev(n);i.run(e,l,c);function c(u,d,p){const m=d||e;u?a(u):o?o(m):r(void 0,m,p)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),BL("runSync","run",r),i;function s(o,a){PL(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=Ev(n),i=this.compiler||this.Compiler;return c_("stringify",i),zL(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(u_("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...d]=c;l(u,d)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=i_(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const d=c[u];s(d)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let d=-1,p=-1;for(;++d<r.length;)if(r[d][0]===c){p=d;break}if(p===-1)r.push([c,...u]);else if(u.length>0){let[m,...x]=u;const w=r[p][1];hM(w)&&hM(m)&&(m=i_(!0,w,m)),r[p]=[c,m,...x]}}}}const sSe=new AR().freeze();function l_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function c_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function u_(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function zL(t){if(!hM(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function BL(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Ev(t){return oSe(t)?t:new nV(t)}function oSe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function aSe(t){return typeof t=="string"||lSe(t)}function lSe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const cSe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",HL=[],VL={allowDangerousHtml:!0},uSe=/^(https?|ircs?|mailto|xmpp)$/i,dSe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function fSe(t){const e=hSe(t),n=pSe(t);return mSe(e.runSync(e.parse(n),n),t)}function hSe(t){const e=t.rehypePlugins||HL,n=t.remarkPlugins||HL,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...VL}:VL;return sSe().use(Xwe).use(n).use(Hbe,r).use(e)}function pSe(t){const e=t.children||"",n=new nV;return typeof e=="string"&&(n.value=e),n}function mSe(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||gSe;for(const u of dSe)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+cSe+u.id,void 0);return e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),TR(t,c),kxe(t,{Fragment:h.Fragment,components:i,ignoreInvalidStyle:!0,jsx:h.jsx,jsxs:h.jsxs,passKeys:!0,passNode:!0});function c(u,d,p){if(u.type==="raw"&&p&&typeof d=="number")return o?p.children.splice(d,1):p.children[d]={type:"text",value:u.value},d;if(u.type==="element"){let m;for(m in t_)if(Object.hasOwn(t_,m)&&Object.hasOwn(u.properties,m)){const x=u.properties[m],w=t_[m];(w===null||w.includes(u.tagName))&&(u.properties[m]=l(String(x||""),m,u))}}if(u.type==="element"){let m=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!m&&r&&typeof d=="number"&&(m=!r(u,d,p)),m&&p&&typeof d=="number")return a&&u.children?p.children.splice(d,1,...u.children):p.children.splice(d,1),d}}}function gSe(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||uSe.test(t.slice(0,e))?t:""}function $L(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function ySe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function vSe(t,e,n){const i=Qw((n||{}).ignore||[]),s=xSe(e);let o=-1;for(;++o<s.length;)eV(t,"text",a);function a(c,u){let d=-1,p;for(;++d<u.length;){const m=u[d],x=p?p.children:void 0;if(i(m,x?x.indexOf(m):void 0,p))return;p=m}if(p)return l(c,u)}function l(c,u){const d=u[u.length-1],p=s[o][0],m=s[o][1];let x=0;const v=d.children.indexOf(c);let y=!1,S=[];p.lastIndex=0;let E=p.exec(c.value);for(;E;){const C=E.index,A={index:E.index,input:E.input,stack:[...u,c]};let T=m(...E,A);if(typeof T=="string"&&(T=T.length>0?{type:"text",value:T}:void 0),T===!1?p.lastIndex=C+1:(x!==C&&S.push({type:"text",value:c.value.slice(x,C)}),Array.isArray(T)?S.push(...T):T&&S.push(T),x=C+E[0].length,y=!0),!p.global)break;E=p.exec(c.value)}return y?(x<c.value.length&&S.push({type:"text",value:c.value.slice(x)}),d.children.splice(v,1,...S)):S=[c],v+S.length}}function xSe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([wSe(i[0]),bSe(i[1])])}return e}function wSe(t){return typeof t=="string"?new RegExp(ySe(t),"g"):t}function bSe(t){return typeof t=="function"?t:function(){return t}}const d_="phrasing",f_=["autolink","link","image","label"];function SSe(){return{transforms:[RSe],enter:{literalAutolink:ESe,literalAutolinkEmail:h_,literalAutolinkHttp:h_,literalAutolinkWww:h_},exit:{literalAutolink:ASe,literalAutolinkEmail:TSe,literalAutolinkHttp:CSe,literalAutolinkWww:MSe}}}function _Se(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:d_,notInConstruct:f_},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:d_,notInConstruct:f_},{character:":",before:"[ps]",after:"\\/",inConstruct:d_,notInConstruct:f_}]}}function ESe(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function h_(t){this.config.enter.autolinkProtocol.call(this,t)}function CSe(t){this.config.exit.autolinkProtocol.call(this,t)}function MSe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function TSe(t){this.config.exit.autolinkEmail.call(this,t)}function ASe(t){this.exit(t)}function RSe(t){vSe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,NSe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),kSe]],{ignore:["link","linkReference"]})}function NSe(t,e,n,r,i){let s="";if(!rV(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!PSe(n)))return!1;const o=DSe(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function kSe(t,e,n,r){return!rV(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function PSe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function DSe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=$L(t,"(");let s=$L(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function rV(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||ad(n)||Kw(n))&&(!e||n!==47)}iV.peek=HSe;function ISe(){this.buffer()}function LSe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function OSe(){this.buffer()}function FSe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function jSe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Mo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function USe(t){this.exit(t)}function zSe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Mo(this.sliceSerialize(t)).toLowerCase(),n.label=e}function BSe(t){this.exit(t)}function HSe(){return"["}function iV(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function VSe(){return{enter:{gfmFootnoteCallString:ISe,gfmFootnoteCall:LSe,gfmFootnoteDefinitionLabelString:OSe,gfmFootnoteDefinition:FSe},exit:{gfmFootnoteCallString:jSe,gfmFootnoteCall:USe,gfmFootnoteDefinitionLabelString:zSe,gfmFootnoteDefinition:BSe}}}function $Se(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:iV},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const c=s.enter("footnoteDefinition"),u=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?sV:WSe))),c(),l}}function WSe(t,e,n){return e===0?t:sV(t,e,n)}function sV(t,e,n){return(n?"":"    ")+t}const GSe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];oV.peek=JSe;function qSe(){return{canContainEols:["delete"],enter:{strikethrough:KSe},exit:{strikethrough:YSe}}}function XSe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:GSe}],handlers:{delete:oV}}}function KSe(t){this.enter({type:"delete",children:[]},t)}function YSe(t){this.exit(t)}function oV(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function JSe(){return"~"}function QSe(t){return t.length}function ZSe(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||QSe,s=[],o=[],a=[],l=[];let c=0,u=-1;for(;++u<t.length;){const w=[],v=[];let y=-1;for(t[u].length>c&&(c=t[u].length);++y<t[u].length;){const S=e1e(t[u][y]);if(n.alignDelimiters!==!1){const E=i(S);v[y]=E,(l[y]===void 0||E>l[y])&&(l[y]=E)}w.push(S)}o[u]=w,a[u]=v}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<c;)s[d]=WL(r[d]);else{const w=WL(r);for(;++d<c;)s[d]=w}d=-1;const p=[],m=[];for(;++d<c;){const w=s[d];let v="",y="";w===99?(v=":",y=":"):w===108?v=":":w===114&&(y=":");let S=n.alignDelimiters===!1?1:Math.max(1,l[d]-v.length-y.length);const E=v+"-".repeat(S)+y;n.alignDelimiters!==!1&&(S=v.length+S+y.length,S>l[d]&&(l[d]=S),m[d]=S),p[d]=E}o.splice(1,0,p),a.splice(1,0,m),u=-1;const x=[];for(;++u<o.length;){const w=o[u],v=a[u];d=-1;const y=[];for(;++d<c;){const S=w[d]||"";let E="",C="";if(n.alignDelimiters!==!1){const A=l[d]-(v[d]||0),T=s[d];T===114?E=" ".repeat(A):T===99?A%2?(E=" ".repeat(A/2+.5),C=" ".repeat(A/2-.5)):(E=" ".repeat(A/2),C=E):C=" ".repeat(A)}n.delimiterStart!==!1&&!d&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&S==="")&&(n.delimiterStart!==!1||d)&&y.push(" "),n.alignDelimiters!==!1&&y.push(E),y.push(S),n.alignDelimiters!==!1&&y.push(C),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||d!==c-1)&&y.push("|")}x.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return x.join(`
`)}function e1e(t){return t==null?"":String(t)}function WL(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function t1e(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),n1e);return i(),o}function n1e(t,e,n){return">"+(n?"":" ")+t}function r1e(t,e){return GL(t,e.inConstruct,!0)&&!GL(t,e.notInConstruct,!1)}function GL(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function qL(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&r1e(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function i1e(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function s1e(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function o1e(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function a1e(t,e,n,r){const i=o1e(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(s1e(t,n)){const d=n.enter("codeIndented"),p=n.indentLines(s,l1e);return d(),p}const a=n.createTracker(r),l=i.repeat(Math.max(i1e(s,i)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(t.lang){const d=n.enter(`codeFencedLang${o}`);u+=a.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),d()}if(t.lang&&t.meta){const d=n.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),d()}return u+=a.move(`
`),s&&(u+=a.move(s+`
`)),u+=a.move(l),c(),u}function l1e(t,e,n){return(n?"":"    ")+t}function RR(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function c1e(t,e,n,r){const i=RR(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function u1e(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Gm(t){return"&#x"+t.toString(16).toUpperCase()+";"}function h0(t,e,n){const r=gh(t),i=gh(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}aV.peek=d1e;function aV(t,e,n,r){const i=u1e(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=h0(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=Gm(c)+l.slice(1));const d=l.charCodeAt(l.length-1),p=h0(r.after.charCodeAt(0),d,i);p.inside&&(l=l.slice(0,-1)+Gm(d));const m=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:p.outside,before:u.outside},a+l+m}function d1e(t,e,n){return n.options.emphasis||"*"}function f1e(t,e){let n=!1;return TR(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,dM}),!!((!t.depth||t.depth<3)&&wR(t)&&(e.options.setext||n))}function h1e(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(f1e(t,n)){const u=n.enter("headingSetext"),d=n.enter("phrasing"),p=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return d(),u(),p+`
`+(i===1?"=":"-").repeat(p.length-(Math.max(p.lastIndexOf("\r"),p.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=Gm(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}lV.peek=p1e;function lV(t){return t.value||""}function p1e(){return"<"}cV.peek=m1e;function cV(t,e,n,r){const i=RR(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function m1e(){return"!"}uV.peek=g1e;function uV(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function g1e(){return"!"}dV.peek=y1e;function dV(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function y1e(){return"`"}function fV(t,e){const n=wR(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}hV.peek=v1e;function hV(t,e,n,r){const i=RR(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(fV(t,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(t,{before:d,after:">",...o.current()})),d+=o.move(">"),a(),n.stack=u,d}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function v1e(t,e,n){return fV(t,n)?"<":"["}pV.peek=x1e;function pV(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function x1e(){return"["}function NR(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function w1e(t){const e=NR(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function b1e(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function mV(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function S1e(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?b1e(n):NR(n);const a=t.ordered?o==="."?")":".":w1e(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),mV(n)===o&&u){let d=-1;for(;++d<t.children.length;){const p=t.children[d];if(p&&p.type==="listItem"&&p.children&&p.children[0]&&p.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),c}function _1e(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function E1e(t,e,n,r){const i=_1e(n);let s=n.bulletCurrent||NR(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),u);return l(),c;function u(d,p,m){return p?(m?"":" ".repeat(o))+d:(m?s:s+" ".repeat(o-s.length))+d}}function C1e(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const M1e=Qw(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function T1e(t,e,n,r){return(t.children.some(function(o){return M1e(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function A1e(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}gV.peek=R1e;function gV(t,e,n,r){const i=A1e(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=h0(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=Gm(c)+l.slice(1));const d=l.charCodeAt(l.length-1),p=h0(r.after.charCodeAt(0),d,i);p.inside&&(l=l.slice(0,-1)+Gm(d));const m=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:p.outside,before:u.outside},a+l+m}function R1e(t,e,n){return n.options.strong||"*"}function N1e(t,e,n,r){return n.safe(t.value,r)}function k1e(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function P1e(t,e,n){const r=(mV(n)+(n.options.ruleSpaces?" ":"")).repeat(k1e(n));return n.options.ruleSpaces?r.slice(0,-1):r}const yV={blockquote:t1e,break:qL,code:a1e,definition:c1e,emphasis:aV,hardBreak:qL,heading:h1e,html:lV,image:cV,imageReference:uV,inlineCode:dV,link:hV,linkReference:pV,list:S1e,listItem:E1e,paragraph:C1e,root:T1e,strong:gV,text:N1e,thematicBreak:P1e};function D1e(){return{enter:{table:I1e,tableData:XL,tableHeader:XL,tableRow:O1e},exit:{codeText:F1e,table:L1e,tableData:p_,tableHeader:p_,tableRow:p_}}}function I1e(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function L1e(t){this.exit(t),this.data.inTable=void 0}function O1e(t){this.enter({type:"tableRow",children:[]},t)}function p_(t){this.exit(t)}function XL(t){this.enter({type:"tableCell",children:[]},t)}function F1e(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,j1e));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function j1e(t,e){return e==="|"?e:t}function U1e(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:p,table:o,tableCell:l,tableRow:a}};function o(m,x,w,v){return c(u(m,w,v),m.align)}function a(m,x,w,v){const y=d(m,w,v),S=c([y]);return S.slice(0,S.indexOf(`
`))}function l(m,x,w,v){const y=w.enter("tableCell"),S=w.enter("phrasing"),E=w.containerPhrasing(m,{...v,before:s,after:s});return S(),y(),E}function c(m,x){return ZSe(m,{align:x,alignDelimiters:r,padding:n,stringLength:i})}function u(m,x,w){const v=m.children;let y=-1;const S=[],E=x.enter("table");for(;++y<v.length;)S[y]=d(v[y],x,w);return E(),S}function d(m,x,w){const v=m.children;let y=-1;const S=[],E=x.enter("tableRow");for(;++y<v.length;)S[y]=l(v[y],m,x,w);return E(),S}function p(m,x,w){let v=yV.inlineCode(m,x,w);return w.stack.includes("tableCell")&&(v=v.replace(/\|/g,"\\$&")),v}}function z1e(){return{exit:{taskListCheckValueChecked:KL,taskListCheckValueUnchecked:KL,paragraph:H1e}}}function B1e(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:V1e}}}function KL(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function H1e(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function V1e(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=yV.listItem(t,e,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+o}}function $1e(){return[SSe(),VSe(),qSe(),D1e(),z1e()]}function W1e(t){return{extensions:[_Se(),$Se(t),XSe(),U1e(t),B1e()]}}const G1e={tokenize:Q1e,partial:!0},vV={tokenize:Z1e,partial:!0},xV={tokenize:e_e,partial:!0},wV={tokenize:t_e,partial:!0},q1e={tokenize:n_e,partial:!0},bV={name:"wwwAutolink",tokenize:Y1e,previous:_V},SV={name:"protocolAutolink",tokenize:J1e,previous:EV},vl={name:"emailAutolink",tokenize:K1e,previous:CV},va={};function X1e(){return{text:va}}let mu=48;for(;mu<123;)va[mu]=vl,mu++,mu===58?mu=65:mu===91&&(mu=97);va[43]=vl;va[45]=vl;va[46]=vl;va[95]=vl;va[72]=[vl,SV];va[104]=[vl,SV];va[87]=[vl,bV];va[119]=[vl,bV];function K1e(t,e,n){const r=this;let i,s;return o;function o(d){return!mM(d)||!CV.call(r,r.previous)||kR(r.events)?n(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(d))}function a(d){return mM(d)?(t.consume(d),a):d===64?(t.consume(d),l):n(d)}function l(d){return d===46?t.check(q1e,u,c)(d):d===45||d===95||ni(d)?(s=!0,t.consume(d),l):u(d)}function c(d){return t.consume(d),i=!0,l}function u(d){return s&&i&&vi(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(d)):n(d)}}function Y1e(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!_V.call(r,r.previous)||kR(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(G1e,t.attempt(vV,t.attempt(xV,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function J1e(t,e,n){const r=this;let i="",s=!1;return o;function o(d){return(d===72||d===104)&&EV.call(r,r.previous)&&!kR(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(d),t.consume(d),a):n(d)}function a(d){if(vi(d)&&i.length<5)return i+=String.fromCodePoint(d),t.consume(d),a;if(d===58){const p=i.toLowerCase();if(p==="http"||p==="https")return t.consume(d),l}return n(d)}function l(d){return d===47?(t.consume(d),s?c:(s=!0,l)):n(d)}function c(d){return d===null||u0(d)||An(d)||ad(d)||Kw(d)?n(d):t.attempt(vV,t.attempt(xV,u),n)(d)}function u(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(d)}}function Q1e(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function Z1e(t,e,n){let r,i,s;return o;function o(c){return c===46||c===95?t.check(wV,l,a)(c):c===null||An(c)||ad(c)||c!==45&&Kw(c)?l(c):(s=!0,t.consume(c),o)}function a(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),o}function l(c){return i||r||!s?n(c):e(c)}}function e_e(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(wV,e,s)(o):o===null||An(o)||ad(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function t_e(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||An(a)||ad(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||An(a)||ad(a)?e(a):r(a)}function s(a){return vi(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):vi(a)?(t.consume(a),o):n(a)}}function n_e(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return ni(s)?n(s):e(s)}}function _V(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||An(t)}function EV(t){return!vi(t)}function CV(t){return!(t===47||mM(t))}function mM(t){return t===43||t===45||t===46||t===95||ni(t)}function kR(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const r_e={tokenize:d_e,partial:!0};function i_e(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:l_e,continuation:{tokenize:c_e},exit:u_e}},text:{91:{name:"gfmFootnoteCall",tokenize:a_e},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:s_e,resolveTo:o_e}}}}function s_e(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const c=Mo(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function o_e(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function a_e(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(d){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),l}function l(d){return d!==94?n(d):(t.enter("gfmFootnoteCallMarker"),t.consume(d),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(d){if(s>999||d===93&&!o||d===null||d===91||An(d))return n(d);if(d===93){t.exit("chunkString");const p=t.exit("gfmFootnoteCallString");return i.includes(Mo(r.sliceSerialize(p)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(d)}return An(d)||(o=!0),s++,t.consume(d),d===92?u:c}function u(d){return d===91||d===92||d===93?(t.consume(d),s++,c):c(d)}}function l_e(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(x){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(x){return x===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(x)}function u(x){if(o>999||x===93&&!a||x===null||x===91||An(x))return n(x);if(x===93){t.exit("chunkString");const w=t.exit("gfmFootnoteDefinitionLabelString");return s=Mo(r.sliceSerialize(w)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),p}return An(x)||(a=!0),o++,t.consume(x),x===92?d:u}function d(x){return x===91||x===92||x===93?(t.consume(x),o++,u):u(x)}function p(x){return x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),i.includes(s)||i.push(s),cn(t,m,"gfmFootnoteDefinitionWhitespace")):n(x)}function m(x){return e(x)}}function c_e(t,e,n){return t.check(Og,e,t.attempt(r_e,e,n))}function u_e(t){t.exit("gfmFootnoteDefinition")}function d_e(t,e,n){const r=this;return cn(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function f_e(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},d={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},p=[["enter",u,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",d,a]],m=a.parser.constructs.insideSpan.null;m&&ws(p,p.length,0,Yw(m,o.slice(c+1,l),a)),ws(p,p.length,0,[["exit",d,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",u,a]]),ws(o,c-1,l-c+3,p),l=c+p.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const c=this.previous,u=this.events;let d=0;return p;function p(x){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(x):(o.enter("strikethroughSequenceTemporary"),m(x))}function m(x){const w=gh(c);if(x===126)return d>1?l(x):(o.consume(x),d++,m);if(d<2&&!n)return l(x);const v=o.exit("strikethroughSequenceTemporary"),y=gh(x);return v._open=!y||y===2&&!!w,v._close=!w||w===2&&!!y,a(x)}}}class h_e{constructor(){this.map=[]}add(e,n,r){p_e(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function p_e(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function m_e(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function g_e(){return{flow:{null:{name:"table",tokenize:y_e,resolveAll:v_e}}}}function y_e(t,e,n){const r=this;let i=0,s=0,o;return a;function a(M){let L=r.events.length-1;for(;L>-1;){const B=r.events[L][1].type;if(B==="lineEnding"||B==="linePrefix")L--;else break}const z=L>-1?r.events[L][1].type:null,H=z==="tableHead"||z==="tableRow"?T:l;return H===T&&r.parser.lazy[r.now().line]?n(M):H(M)}function l(M){return t.enter("tableHead"),t.enter("tableRow"),c(M)}function c(M){return M===124||(o=!0,s+=1),u(M)}function u(M){return M===null?n(M):Rt(M)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),m):n(M):en(M)?cn(t,u,"whitespace")(M):(s+=1,o&&(o=!1,i+=1),M===124?(t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),d(M)))}function d(M){return M===null||M===124||An(M)?(t.exit("data"),u(M)):(t.consume(M),M===92?p:d)}function p(M){return M===92||M===124?(t.consume(M),d):d(M)}function m(M){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(M):(t.enter("tableDelimiterRow"),o=!1,en(M)?cn(t,x,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):x(M))}function x(M){return M===45||M===58?v(M):M===124?(o=!0,t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),w):A(M)}function w(M){return en(M)?cn(t,v,"whitespace")(M):v(M)}function v(M){return M===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(M),t.exit("tableDelimiterMarker"),y):M===45?(s+=1,y(M)):M===null||Rt(M)?C(M):A(M)}function y(M){return M===45?(t.enter("tableDelimiterFiller"),S(M)):A(M)}function S(M){return M===45?(t.consume(M),S):M===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(M),t.exit("tableDelimiterMarker"),E):(t.exit("tableDelimiterFiller"),E(M))}function E(M){return en(M)?cn(t,C,"whitespace")(M):C(M)}function C(M){return M===124?x(M):M===null||Rt(M)?!o||i!==s?A(M):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(M)):A(M)}function A(M){return n(M)}function T(M){return t.enter("tableRow"),k(M)}function k(M){return M===124?(t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),k):M===null||Rt(M)?(t.exit("tableRow"),e(M)):en(M)?cn(t,k,"whitespace")(M):(t.enter("data"),R(M))}function R(M){return M===null||M===124||An(M)?(t.exit("data"),k(M)):(t.consume(M),M===92?P:R)}function P(M){return M===92||M===124?(t.consume(M),R):R(M)}}function v_e(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,u,d;const p=new h_e;for(;++n<t.length;){const m=t[n],x=m[1];m[0]==="enter"?x.type==="tableHead"?(a=!1,l!==0&&(YL(p,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},p.add(n,0,[["enter",c,e]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},p.add(n,0,[["enter",u,e]])),i=x.type==="tableDelimiterRow"?2:u?3:1):i&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=Cv(p,e,s,i,void 0,d),s=[0,0,0,0]),o[2]=n)):x.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],d=Cv(p,e,s,i,void 0,d)),s=o,o=[s[1],n,0,0])):x.type==="tableHead"?(a=!0,l=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],d=Cv(p,e,s,i,n,d)):o[1]!==0&&(d=Cv(p,e,o,i,n,d)),i=0):i&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&YL(p,e,l,c,u),p.consume(e.events),n=-1;++n<e.events.length;){const m=e.events[n];m[0]==="enter"&&m[1].type==="table"&&(m[1]._align=m_e(e.events,n))}return t}function Cv(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},lf(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=lf(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const c=lf(e.events,n[2]),u=lf(e.events,n[3]),d={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",d,e]]),r!==2){const p=e.events[n[2]],m=e.events[n[3]];if(p[1].end=Object.assign({},m[1].end),p[1].type="chunkText",p[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,w=n[3]-n[2]-1;t.add(x,w,[])}}t.add(n[3]+1,0,[["exit",d,e]])}return i!==void 0&&(s.end=Object.assign({},lf(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function YL(t,e,n,r,i){const s=[],o=lf(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function lf(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const x_e={name:"tasklistCheck",tokenize:b_e};function w_e(){return{text:{91:x_e}}}function b_e(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return An(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return Rt(l)?e(l):en(l)?t.check({tokenize:S_e},e,n)(l):n(l)}}function S_e(t,e,n){return cn(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function __e(t){return L6([X1e(),i_e(),f_e(t),g_e(),w_e()])}const E_e={};function C_e(t){const e=this,n=t||E_e,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(__e(n)),s.push($1e()),o.push(W1e(n))}const M_e=`
# Getting Started with Itemize.cloud

## Overview

Itemize.cloud is a comprehensive productivity platform that helps you organize your thoughts, tasks, and ideas through lists, notes, and whiteboards. The platform provides a seamless experience across devices with real-time synchronization and collaboration features.

## Prerequisites

Before you begin, make sure you have the following installed:
- Node.js (v18 or higher)
- npm or yarn
- PostgreSQL
- Git

## Quick Start

### 1. Clone the Repository

\`\`\`bash
git clone https://github.com/your-repo/itemize-cloud.git
cd itemize-cloud
\`\`\`

### 2. Install Dependencies

\`\`\`bash
# Install frontend dependencies
cd frontend
npm install

# Install backend dependencies
cd ../backend
npm install
\`\`\`

### 3. Environment Setup

Create environment files in both frontend and backend directories:

**Backend (.env)**:
\`\`\`env
PORT=3001
NODE_ENV=development
DATABASE_URL=postgresql://username:password@localhost:5432/itemize_db
JWT_SECRET=your_jwt_secret_key
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
\`\`\`

**Frontend (.env)**:
\`\`\`env
VITE_API_URL=http://localhost:3001
VITE_GOOGLE_CLIENT_ID=your_google_client_id
\`\`\`

### 4. Database Setup

\`\`\`bash
# Run database migrations
cd backend
npm run migrate
\`\`\`

### 5. Run the Application

**Development Mode:**

Terminal 1 - Backend:
\`\`\`bash
cd backend
npm run dev
\`\`\`

Terminal 2 - Frontend:
\`\`\`bash
cd frontend
npm run dev
\`\`\`

### 6. Access the Application

- **Frontend**: http://localhost:5173
- **Backend API**: http://localhost:3001

## Key Features

### Lists
- Create and manage task lists
- Add, edit, and complete items
- Organize with categories and colors
- Share lists publicly

### Notes
- Rich text editing with markdown support
- Organize notes with categories
- Search and filter capabilities
- Share notes publicly

### Whiteboards
- Infinite canvas for visual thinking
- Drawing tools and shapes
- Collaborative editing
- Export and sharing options

## Next Steps

1. **Read the API Documentation**: Start with [API Overview](./API/api-overview.md)
2. **Explore Features**: Check [Implementations](./Implementations/) for detailed guides
3. **Configuration**: Review [Config Documentation](./Config/) for advanced setup
4. **Security**: See [Security Documentation](./Security/) before production deployment

## Support

- **Issues**: File issues on GitHub repository
- **Documentation**: All docs are in the \`!docs/\` directory
- **API Reference**: Available at \`/api/docs\` when running the backend

For detailed information about specific components, see the respective documentation sections in the \`!docs/\` directory.
`;class T_e{async getDocContent(e){try{return(await Zt.get(`/docs/content?path=${encodeURIComponent(e)}`)).data.content}catch(n){return console.error("Error fetching doc content for path:",e,n),e==="getting-started"||e===""||e==="/"?M_e+`

---
*This is fallback content. The actual content could not be loaded.*`:this.getFallbackContent(e)}}async getDocStructure(){try{return(await Zt.get("/docs/structure")).data}catch(e){return console.error("Error fetching doc structure:",e),this.getStaticStructure()}}async searchDocs(e){try{return(await Zt.get(`/docs/search?q=${encodeURIComponent(e)}`)).data}catch(n){return console.error("Error searching docs:",n),[]}}generateFolderContent(e){const n=this.getStaticStructure(),r=this.findFolderByPath(n,e);if(!r||r.type!=="folder")return this.getFallbackContent(e);const i=r.name;let s=`# ${i}

`;const o=e.split("/");o.length>1&&(o.forEach((l,c)=>{const u=l.charAt(0).toUpperCase()+l.slice(1);if(c===0)s+=`[${u}](/help/${l})`;else{const d=o.slice(0,c+1).join("/");s+=` > [${u}](/help/${d})`}}),s+=`

`);const a=this.getFolderDescription(e,i);if(s+=`${a}

`,r.children&&r.children.length>0){s+=`## Contents

`;const l=r.children.filter(u=>u.type==="folder"),c=r.children.filter(u=>u.type==="file");l.length>0&&(s+=`### 📁 Folders

`,l.forEach(u=>{var d,p;s+=`- **[${u.name}](/help/${u.path})** - `,s+=`${((d=u.children)==null?void 0:d.length)||0} item${(((p=u.children)==null?void 0:p.length)||0)!==1?"s":""}
`}),s+=`
`),c.length>0&&(s+=`### 📄 Documentation Files

`,c.forEach(u=>{s+=`- **[${u.name}](/help/${u.path})**
`}),s+=`
`),s+=`## Quick Navigation

`,s+=`| Name | Type | Path |
`,s+=`|------|------|------|
`,r.children.forEach(u=>{const d=u.type==="folder"?"📁":"📄";s+=`| ${d} [${u.name}](/help/${u.path}) | ${u.type} | \`${u.path}\` |
`})}else s+=`*This folder is currently empty or has no documented items.*

`;return s+=`
---

`,s+=`💡 **Tip**: Use the sidebar navigation or search above to quickly find specific documentation.

`,s+="[🏠 Back to Documentation Home](/help)",s}findFolderByPath(e,n){for(const r of e){if(r.path===n)return r;if(r.children){const i=this.findFolderByPath(r.children,n);if(i)return i}}return null}getFallbackContent(e){var r;return`# ${((r=e.split("/").pop())==null?void 0:r.replace(/-/g," ").replace(/\b\w/g,i=>i.toUpperCase()))||"Documentation"}

## Content Not Available

The content for \`${e}\` could not be loaded. Please check the API or try again later.

---
*This is fallback content.*`}getStaticStructure(){return[{name:"Getting Started",path:"getting-started",type:"file"},{name:"API",path:"API",type:"folder",children:[{name:"API Overview",path:"API/api-overview",type:"file"},{name:"API Structure",path:"API/api-structure",type:"file"},{name:"Authentication",path:"API/authentication",type:"file"},{name:"CORS Configuration",path:"API/cors-configuration",type:"file"},{name:"Endpoints",path:"API/endpoints",type:"folder",children:[{name:"AI Suggestions",path:"API/endpoints/ai-suggestions",type:"file"},{name:"Categories",path:"API/endpoints/categories",type:"file"},{name:"Items",path:"API/endpoints/items",type:"file"},{name:"Lists",path:"API/endpoints/lists",type:"file"},{name:"Notes",path:"API/endpoints/notes",type:"file"},{name:"Whiteboards",path:"API/endpoints/whiteboards",type:"file"}]}]},{name:"Config",path:"Config",type:"folder",children:[{name:"Backend Config",path:"Config/backend-config",type:"file"},{name:"Frontend Config",path:"Config/frontend-config",type:"file"}]},{name:"Data",path:"Data",type:"folder",children:[{name:"Categories PostgreSQL",path:"Data/categories-postgres",type:"file"},{name:"Lists PostgreSQL",path:"Data/lists-postgres",type:"file"},{name:"Notes PostgreSQL",path:"Data/notes-postgres",type:"file"},{name:"Users PostgreSQL",path:"Data/users-postgres",type:"file"},{name:"Whiteboards PostgreSQL",path:"Data/whiteboards-postgres",type:"file"}]},{name:"Dependencies",path:"Dependencies",type:"folder",children:[{name:"Dependencies Overview",path:"Dependencies/dependencies-overview",type:"file"}]},{name:"Deploy",path:"Deploy",type:"folder",children:[{name:"Deployment Overview",path:"Deploy/deployment-overview",type:"file"}]},{name:"Implementations",path:"Implementations",type:"folder",children:[{name:"Caching",path:"Implementations/Caching",type:"folder",children:[{name:"Caching Overview",path:"Implementations/Caching/caching-overview",type:"file"}]},{name:"Categories",path:"Implementations/Categories",type:"folder",children:[{name:"Categories Overview",path:"Implementations/Categories/categories-overview",type:"file"}]},{name:"Gemini",path:"Implementations/Gemini",type:"folder",children:[{name:"Gemini Overview",path:"Implementations/Gemini/gemini-overview",type:"file"}]},{name:"Infinite Canvas",path:"Implementations/InfiniteCanvas",type:"folder",children:[{name:"Infinite Canvas Overview",path:"Implementations/InfiniteCanvas/infinite-canvas-overview",type:"file"}]},{name:"Lists",path:"Implementations/Lists",type:"folder",children:[{name:"Lists Overview",path:"Implementations/Lists/lists-overview",type:"file"}]},{name:"Loading",path:"Implementations/Loading",type:"folder",children:[{name:"Loading Overview",path:"Implementations/Loading/loading-overview",type:"file"}]},{name:"Notes",path:"Implementations/Notes",type:"folder",children:[{name:"Notes Overview",path:"Implementations/Notes/notes-overview",type:"file"}]},{name:"OAuth",path:"Implementations/OAuth",type:"folder",children:[{name:"OAuth Overview",path:"Implementations/OAuth/oauth-overview",type:"file"}]},{name:"Sessions",path:"Implementations/Sessions",type:"folder",children:[{name:"Sessions Overview",path:"Implementations/Sessions/sessions-overview",type:"file"}]},{name:"Toast",path:"Implementations/Toast",type:"folder",children:[{name:"Toast Overview",path:"Implementations/Toast/toast-overview",type:"file"}]},{name:"Whiteboards",path:"Implementations/Whiteboards",type:"folder",children:[{name:"Whiteboards Overview",path:"Implementations/Whiteboards/whiteboards-overview",type:"file"}]}]},{name:"Security",path:"Security",type:"folder",children:[{name:"Content Security Policy",path:"Security/content-security-policy",type:"file"},{name:"Platform Security",path:"Security/platform-security",type:"file"},{name:"Preproduction Checklist",path:"Security/preproduction-checklist",type:"file"},{name:"Rate Limiting",path:"Security/rate-limiting",type:"file"},{name:"Security Overview",path:"Security/security-overview",type:"file"}]},{name:"Sitemap",path:"Sitemap",type:"folder",children:[{name:"Architecture Overview",path:"Sitemap/architecture-overview",type:"file"},{name:"Routing and Layouts",path:"Sitemap/routing-and-layouts",type:"file"},{name:"Sitemap Overview",path:"Sitemap/sitemap-overview",type:"file"}]},{name:"Stack",path:"Stack",type:"folder",children:[{name:"Stack Overview",path:"Stack/stack-overview",type:"file"}]},{name:"Tests",path:"Tests",type:"folder",children:[{name:"Backend",path:"Tests/Backend",type:"folder",children:[]},{name:"Frontend",path:"Tests/Frontend",type:"folder",children:[]}]},{name:"Version",path:"Version",type:"folder",children:[{name:"0.8.2 Overview",path:"Version/0.8.2-overview",type:"file"}]}]}getFolderDescription(e,n){return{API:"Complete API documentation including endpoints, authentication, and configuration.",Config:"Configuration files and environment setup guides for frontend and backend.",Data:"Database schemas, data structures, and PostgreSQL table definitions.",Dependencies:"Project dependencies and package management documentation.",Deploy:"Deployment guides and production setup instructions.",Implementations:"Detailed implementation guides for various features and integrations.",Security:"Security implementation details, policies, and best practices.",Sitemap:"Application structure, routing, and architectural overview.",Stack:"Technology stack overview and architectural decisions.",Tests:"Testing strategies, test suites, and quality assurance documentation.",Version:"Version history and release notes.",Caching:"Caching strategies and implementation details.",Categories:"Category system implementation and management.",Gemini:"Google Gemini AI integration for suggestions and enhancements.",InfiniteCanvas:"Infinite canvas implementation for whiteboards.",Lists:"List management system and functionality.",Loading:"Loading states and user experience patterns.",Notes:"Note-taking system and rich text editing.",OAuth:"OAuth authentication and Google integration.",Sessions:"Session management and user state handling.",Toast:"Toast notification system implementation.",Whiteboards:"Whiteboard functionality and drawing tools.",Backend:"Backend testing strategies and test suites.",Frontend:"Frontend testing approaches and component tests."}[n]||`Documentation for ${n} related topics and configurations.`}}const Mv=new T_e,A_e=()=>{const{"*":t}=fw(),{theme:e}=Ts(),n=ya(),[r,i]=b.useState(""),[s,o]=b.useState(null),[a,l]=b.useState([]),[c,u]=b.useState(!0),[d,p]=b.useState(!1),[m,x]=b.useState(""),w=b.useRef(null),v=e==="dark"?"bg-slate-800":"bg-gray-50",y=e==="dark"?"bg-slate-700":"bg-white",S=e==="dark"?"text-slate-100":"text-gray-900",E=e==="dark"?"text-slate-400":"text-gray-500",C=e==="dark"?"border-slate-600":"border-gray-200",A=e==="dark"?"hover:bg-slate-600":"hover:bg-gray-100",T=e==="dark"?"bg-blue-900 text-blue-300":"bg-blue-200 text-blue-800",k=e==="dark"?"bg-slate-600 hover:bg-slate-500":"bg-gray-200 hover:bg-gray-300",R=e==="dark"?"shadow-slate-900/50":"shadow-md",P=H=>H.replace(/-/g," ").replace(/\b\w/g,B=>B.toUpperCase()),M=(H,B)=>{if(!B.trim())return H;const K=B.toLowerCase(),q=ee=>{const O=[];for(const F of ee){const D=P(F.name).toLowerCase().includes(K),ie=F.path.toLowerCase().includes(K);if(F.children){const $=q(F.children);(D||ie||$.length>0)&&O.push({...F,children:$.length>0?$:F.children})}else(D||ie)&&O.push(F)}return O};return q(H)},L=(H,B=0)=>Array.isArray(H)?H.map(K=>h.jsxs("div",{style:{paddingLeft:`${B*16}px`},children:[h.jsxs(Yse,{to:`/help/${K.path}`,className:`flex items-center px-3 py-2.5 rounded-lg text-sm transition-all duration-200 ${t===K.path||t===void 0&&K.path==="getting-started"?T+" shadow-sm":`${S} ${A}`}`,style:{fontFamily:'"Raleway", sans-serif'},onClick:()=>p(!1),children:[K.type==="folder"?h.jsx(cte,{className:`h-4 w-4 mr-3 flex-shrink-0 ${t===K.path||t===void 0&&K.path==="getting-started"?e==="dark"?"text-blue-300":"text-blue-600":e==="dark"?"text-blue-400":"text-blue-500"}`}):h.jsx(lte,{className:`h-4 w-4 mr-3 flex-shrink-0 ${t===K.path||t===void 0&&K.path==="getting-started"?e==="dark"?"text-blue-300":"text-blue-600":e==="dark"?"text-blue-400":"text-blue-500"}`}),h.jsx("span",{className:"truncate font-medium",children:P(K.name)})]}),K.children&&h.jsx("div",{className:"mt-1 space-y-1",children:L(K.children,B+1)})]},K.path)):(console.warn("renderDocTree received non-array items:",H),[]),z=(H,B)=>{for(const K of H){if(K.path===B)return K;if(K.children){const q=z(K.children,B);if(q)return q}}return null};return b.useEffect(()=>{const H=async()=>{var K;u(!0);try{o(null);const q=!t||t==="/"?"getting-started":t,ee=await Mv.getDocStructure(),O=((K=z(ee,q))==null?void 0:K.type)==="folder";let F;O?F=Mv.generateFolderContent(q):F=await Mv.getDocContent(q),i(F)}catch(q){console.error("Error fetching documentation content:",q),o("Failed to load documentation content. Please try again later."),i("")}finally{u(!1)}},B=async()=>{try{const K=await Mv.getDocStructure(),q=Array.isArray(K)?K:[];l(q)}catch(K){console.error("Error fetching documentation structure:",K),l([])}};H(),B()},[t]),b.useEffect(()=>{const H=B=>{var K;if(B.key==="/"&&!B.ctrlKey&&!B.metaKey&&!B.altKey){const q=document.activeElement;if(q&&(q.tagName==="INPUT"||q.tagName==="TEXTAREA"))return;B.preventDefault(),(K=w.current)==null||K.focus()}};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[]),s?h.jsx("div",{className:`min-h-screen flex items-center justify-center ${v}`,style:{fontFamily:'"Raleway", sans-serif'},children:h.jsxs("div",{className:`max-w-md mx-auto p-8 text-center rounded-lg border ${C} ${y} ${R}`,children:[h.jsx("div",{className:`text-lg font-medium mb-2 ${e==="dark"?"text-red-400":"text-red-600"}`,children:"Documentation Error"}),h.jsx("div",{className:E,children:s})]})}):h.jsxs("div",{className:`flex min-h-screen ${v} ${S}`,style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx("div",{className:`w-80 ${y} overflow-y-auto fixed inset-y-0 left-0 transform transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 z-30 border-r ${C} ${d?"translate-x-0":"-translate-x-full"}`,style:{fontFamily:'"Raleway", sans-serif'},children:h.jsxs("div",{className:"p-6",children:[h.jsx("h2",{className:`text-xl font-bold mb-6 ${S}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Documentation"}),h.jsxs("div",{className:"mb-6",children:[h.jsxs("div",{className:"relative",children:[h.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),h.jsx("input",{ref:w,type:"text",value:m,onChange:H=>x(H.target.value),placeholder:"Search documentation... (Press / to focus)",className:`w-full pl-10 pr-4 py-2 rounded-lg border ${C} ${e==="dark"?"bg-slate-700 text-slate-100 placeholder-slate-400":"bg-gray-50 text-gray-900 placeholder-gray-500"} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors`,style:{fontFamily:'"Raleway", sans-serif'}}),m&&h.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:h.jsx(Do,{className:"w-4 h-4"})})]}),m&&h.jsx("div",{className:`mt-2 text-xs ${E}`,style:{fontFamily:'"Raleway", sans-serif'},children:(()=>{const B=M(a,m).reduce((K,q)=>{const ee=O=>O.reduce((F,D)=>F+1+(D.children?ee(D.children):0),0);return K+ee([q])},0);return B===0?"No results found":`${B} result${B===1?"":"s"} found`})()})]}),h.jsx("nav",{className:"space-y-1",children:c&&a.length===0?h.jsx("div",{className:`text-center py-4 ${E}`,style:{fontFamily:'"Raleway", sans-serif'},children:h.jsx("div",{className:"text-sm",children:"Loading structure..."})}):(()=>{const H=M(a,m);return H.length===0&&m?h.jsxs("div",{className:`text-center py-4 ${E}`,style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsxs("div",{className:"text-sm",children:['No results found for "',m,'"']}),h.jsx("button",{onClick:()=>x(""),className:`text-xs mt-2 ${e==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"} transition-colors`,children:"Clear search"})]}):L(H)})()})]})}),d&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:()=>p(!1)}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"py-4",children:[h.jsx("div",{className:"hidden lg:block",children:h.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex items-center",children:[h.jsx("div",{className:"w-24 sm:w-28 lg:w-32"}),h.jsxs($e,{onClick:()=>n("/"),size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white font-normal",children:[h.jsx(JP,{className:"h-4 w-4 mr-2"}),"Back"]})]})})}),h.jsx("div",{className:"lg:hidden px-4 sm:px-6",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs($e,{onClick:()=>n("/"),size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white font-normal",children:[h.jsx(JP,{className:"h-4 w-4 mr-2"}),"Back"]}),h.jsxs("button",{onClick:()=>p(!0),className:`flex items-center px-4 py-3 rounded-lg ${k} ${S} transition-colors shadow-sm`,style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(vte,{className:"h-5 w-5 mr-3"}),h.jsx("span",{className:"text-sm font-medium",children:"Documentation Menu"})]})]})})]}),h.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pb-8",children:c&&!r?h.jsx("div",{className:`text-center py-12 ${E}`,style:{fontFamily:'"Raleway", sans-serif'},children:h.jsx("div",{className:"text-lg",children:"Loading documentation..."})}):h.jsx("div",{className:`prose lg:prose-xl max-w-none ${e==="dark"?"prose-invert prose-headings:text-slate-100 prose-p:text-slate-300 prose-strong:text-slate-200 prose-code:text-slate-200 prose-pre:bg-slate-700 prose-blockquote:text-slate-300":"prose-headings:text-gray-900 prose-p:text-gray-700"}`,style:{fontFamily:'"Raleway", sans-serif',"--tw-prose-body":'"Raleway", sans-serif',"--tw-prose-headings":'"Raleway", sans-serif',"--tw-prose-lead":'"Raleway", sans-serif',"--tw-prose-links":'"Raleway", sans-serif',"--tw-prose-bold":'"Raleway", sans-serif',"--tw-prose-counters":'"Raleway", sans-serif',"--tw-prose-bullets":'"Raleway", sans-serif',"--tw-prose-hr":'"Raleway", sans-serif',"--tw-prose-quotes":'"Raleway", sans-serif',"--tw-prose-quote-borders":'"Raleway", sans-serif',"--tw-prose-captions":'"Raleway", sans-serif',"--tw-prose-kbd":'"Raleway", sans-serif',"--tw-prose-code":'"Raleway", sans-serif',"--tw-prose-pre-code":'"Raleway", sans-serif',"--tw-prose-th-borders":'"Raleway", sans-serif'},children:h.jsx("div",{className:`prose prose-lg max-w-none ${e==="dark"?"prose-invert prose-headings:text-white prose-p:text-gray-200 prose-li:text-gray-200 prose-strong:text-white":"prose-gray"}`,children:h.jsx(fSe,{remarkPlugins:[C_e],children:r})})})})]})]})},R_e=()=>{const{theme:t}=Ts(),[e,n]=b.useState(null),[r,i]=b.useState(!0),[s,o]=b.useState(null),[a,l]=b.useState(new Date),c=t==="light",u=async()=>{var y,S;try{i(!0),o(null);const E=await Zt.get("/api/status");n(E.data),l(new Date)}catch(E){o(((S=(y=E.response)==null?void 0:y.data)==null?void 0:S.error)||E.message||"Failed to fetch status"),n(null)}finally{i(!1)}};b.useEffect(()=>{u();const y=setInterval(u,3e4);return()=>clearInterval(y)},[]);const d=y=>{const S=Math.floor(y/3600),E=Math.floor(y%3600/60),C=Math.floor(y%60);return S>0?`${S}h ${E}m ${C}s`:E>0?`${E}m ${C}s`:`${C}s`},p=y=>{switch(y.toLowerCase()){case"healthy":case"operational":return h.jsx(kr,{className:"w-5 h-5 text-green-500"});case"unhealthy":case"error":case"unavailable":return h.jsx(t1,{className:"w-5 h-5 text-red-500"});case"degraded":return h.jsx(QP,{className:"w-5 h-5 text-yellow-500"});default:return h.jsx(QP,{className:"w-5 h-5 text-yellow-500"})}},m=y=>{switch(y.toLowerCase()){case"healthy":case"operational":return"text-green-500";case"unhealthy":case"error":case"unavailable":return"text-red-500";case"degraded":return"text-yellow-500";default:return"text-yellow-500"}},x=y=>{switch(y.toLowerCase()){case"api":return"API";case"database":return"Database";case"auth":return"Authentication";default:return y.charAt(0).toUpperCase()+y.slice(1)}},w=y=>y.charAt(0).toUpperCase()+y.slice(1),v=y=>{switch(y.toLowerCase()){case"express":return"Express Server";case"cors":return"CORS";case"json_parser":return"JSON Parser";case"database":return"Database Connection";default:return y.replace("_"," ").replace(/\b\w/g,S=>S.toUpperCase())}};return r&&!e?h.jsxs("div",{className:"min-h-screen bg-background text-foreground p-6 relative overflow-hidden",children:[h.jsx(WC,{opacity:c?.2:.15,cloudCount:12,isLight:c}),h.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:h.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:h.jsxs("div",{className:"text-center",children:[h.jsx(ZP,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),h.jsx("p",{children:"Loading backend status..."})]})})})]}):h.jsxs("div",{className:"min-h-screen bg-background text-foreground p-6 force-raleway relative overflow-hidden",children:[h.jsx(WC,{opacity:c?.2:.15,cloudCount:12,isLight:c}),h.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[h.jsxs("div",{className:"mb-8",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(Ete,{className:"w-8 h-8 mr-3 text-blue-600"}),h.jsx("h1",{className:"text-3xl font-bold",children:"System Status"})]}),h.jsxs($e,{onClick:u,disabled:r,className:"bg-blue-600 hover:bg-blue-700 text-white font-normal flex items-center",children:[r?h.jsx(ZP,{className:"w-4 h-4 animate-spin mr-2"}):h.jsx(GT,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),h.jsx("p",{className:"text-muted-foreground",children:"Real-time status and health information for itemize.cloud services"}),h.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Last updated: ",a.toLocaleTimeString()]})]}),s&&h.jsx(ji,{className:"mb-6 border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-950",children:h.jsxs(zs,{className:"p-4",children:[h.jsxs("div",{className:"flex items-center text-red-700 dark:text-red-300",children:[h.jsx(t1,{className:"w-5 h-5 mr-2"}),h.jsx("span",{className:"font-medium",children:"Error fetching status:"})]}),h.jsx("p",{className:"mt-1 text-red-600 dark:text-red-400",children:s})]})}),e&&h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[h.jsxs(ji,{children:[h.jsxs(hs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[h.jsx(Jo,{className:"text-lg font-semibold",children:"Overall Status"}),p(e.status)]}),h.jsxs(zs,{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Status:"}),h.jsx("span",{className:`font-medium ${m(e.status)}`,children:w(e.status)})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Environment:"}),h.jsx("span",{className:"font-medium",children:w(e.environment)})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Version:"}),h.jsx("span",{className:"font-medium",children:e.version})]})]})]}),h.jsxs(ji,{children:[h.jsxs(hs,{className:"flex flex-row items-center space-y-0 pb-2",children:[h.jsx(ote,{className:"w-5 h-5 mr-2"}),h.jsx(Jo,{className:"text-lg font-semibold",children:"Server Info"})]}),h.jsxs(zs,{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Port:"}),h.jsx("span",{className:"font-medium",children:e.server.port})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Platform:"}),h.jsx("span",{className:"font-medium",children:e.server.platform})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Node.js:"}),h.jsx("span",{className:"font-medium",children:e.server.nodeVersion})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Uptime:"}),h.jsx("span",{className:"font-medium",children:d(e.uptime)})]})]})]}),h.jsxs(ji,{children:[h.jsxs(hs,{className:"flex flex-row items-center space-y-0 pb-2",children:[h.jsx(hte,{className:"w-5 h-5 mr-2"}),h.jsx(Jo,{className:"text-lg font-semibold",children:"Memory Usage"})]}),h.jsxs(zs,{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Used:"}),h.jsx("span",{className:"font-medium",children:e.server.memory.used})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"Total:"}),h.jsx("span",{className:"font-medium",children:e.server.memory.total})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-muted-foreground",children:"External:"}),h.jsx("span",{className:"font-medium",children:e.server.memory.external})]})]})]}),h.jsxs(ji,{children:[h.jsxs(hs,{className:"flex flex-row items-center space-y-0 pb-2",children:[h.jsx(bte,{className:"w-5 h-5 mr-2"}),h.jsx(Jo,{className:"text-lg font-semibold",children:"Services"})]}),h.jsx(zs,{className:"space-y-2",children:Object.entries(e.services).map(([y,S])=>h.jsxs("div",{className:"flex justify-between",children:[h.jsxs("span",{className:"text-muted-foreground",children:[x(y),":"]}),h.jsxs("div",{className:"flex items-center",children:[p(S),h.jsx("span",{className:`ml-2 font-medium ${m(S)}`,children:w(S)})]})]},y))})]}),h.jsxs(ji,{children:[h.jsxs(hs,{className:"flex flex-row items-center space-y-0 pb-2",children:[h.jsx(kr,{className:"w-5 h-5 mr-2"}),h.jsx(Jo,{className:"text-lg font-semibold",children:"Health Checks"})]}),h.jsx(zs,{className:"space-y-2",children:Object.entries(e.healthChecks).map(([y,S])=>h.jsxs("div",{className:"flex justify-between",children:[h.jsxs("span",{className:"text-muted-foreground",children:[v(y),":"]}),h.jsxs("div",{className:"flex items-center",children:[S?h.jsx(kr,{className:"w-4 h-4 text-green-500"}):h.jsx(t1,{className:"w-4 h-4 text-red-500"}),h.jsx("span",{className:`ml-2 font-medium ${S?"text-green-500":"text-red-500"}`,children:S?"Pass":"Fail"})]})]},y))})]}),h.jsxs(ji,{children:[h.jsxs(hs,{className:"flex flex-row items-center space-y-0 pb-2",children:[h.jsx(ate,{className:"w-5 h-5 mr-2"}),h.jsx(Jo,{className:"text-lg font-semibold",children:"API Endpoints"})]}),h.jsxs(zs,{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between mb-3",children:[h.jsx("span",{className:"text-muted-foreground",children:"Total Available:"}),h.jsx("span",{className:"font-medium text-green-500",children:e.endpoints.total})]}),h.jsx("div",{className:"max-h-32 overflow-y-auto",children:e.endpoints.available.map((y,S)=>h.jsx("div",{className:"text-sm text-muted-foreground py-1",children:y},S))})]})]})]})]})]})},Ja=({children:t,title:e,contentType:n,onBackToHome:r})=>{const{theme:i}=Ts(),s=i==="dark"?"bg-slate-800":"bg-gray-50",o=i==="dark"?"text-slate-100":"text-gray-900",a=i==="dark"?"text-slate-400":"text-gray-500",l=()=>{r?r():window.location.href="https://itemize.cloud"},c=()=>{window.location.href="https://itemize.cloud"};return h.jsx("div",{className:`min-h-screen ${s}`,children:h.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[h.jsx("div",{className:"mb-6",children:h.jsxs($e,{onClick:l,size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(pte,{className:"h-4 w-4"}),"Home"]})}),h.jsx("div",{className:"flex justify-center",children:t}),h.jsx("div",{className:"mt-12 text-center",children:h.jsxs("div",{className:"max-w-md mx-auto",children:[h.jsxs("h3",{className:`text-lg font-semibold ${o} mb-2`,style:{fontFamily:'"Raleway", sans-serif'},children:["Create your own ",n,"s"]}),h.jsx("p",{className:`text-sm ${a} mb-4`,style:{fontFamily:'"Raleway", sans-serif'},children:"Join Itemize.cloud to organize your thoughts, tasks, and ideas with lists, notes, and whiteboards."}),h.jsx($e,{onClick:c,className:"bg-blue-600 hover:bg-blue-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:"Get Started Free"})]})})]})})},N_e=({listData:t})=>{const e=t.items.length,n=t.items.filter(s=>s.completed).length,r=e>0?n/e*100:0,i=t.color_value||"#3B82F6";return h.jsxs("div",{className:"w-full max-w-md mx-auto",children:[h.jsxs(ji,{className:"w-full shadow-lg border-2 transition-all duration-200",style:{borderColor:i,"--list-color":i},children:[h.jsx(hs,{className:"pb-3",children:h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",style:{fontFamily:'"Raleway", sans-serif'},children:t.title}),t.category&&h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",style:{fontFamily:'"Raleway", sans-serif'},children:t.category})]})})}),h.jsxs(zs,{className:"p-0",children:[e>0&&h.jsxs("div",{className:"px-6 pb-4",children:[h.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[h.jsxs("span",{className:"text-gray-600 dark:text-gray-400 italic",style:{fontFamily:'"Raleway", sans-serif'},children:[n," of ",e," completed"]}),h.jsxs("span",{className:"text-gray-600 dark:text-gray-400 italic",style:{fontFamily:'"Raleway", sans-serif'},children:[Math.round(r),"%"]})]}),h.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:h.jsx("div",{className:"h-2 rounded-full transition-all duration-300 ease-in-out",style:{width:`${r}%`,backgroundColor:i}})})]}),h.jsxs("div",{className:"px-6 py-2 space-y-0.5",children:[t.items.map(s=>h.jsxs("div",{className:"flex items-center space-x-3 py-2 px-2 rounded-md hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[h.jsx("div",{className:"flex-shrink-0",children:s.completed?h.jsx(ite,{className:"h-5 w-5 text-green-500",style:{color:i}}):h.jsx(KU,{className:"h-5 w-5 text-gray-400"})}),h.jsx("span",{className:`flex-1 text-sm ${s.completed?"line-through text-gray-500 dark:text-gray-400":"text-gray-900 dark:text-gray-100"}`,style:{fontFamily:'"Raleway", sans-serif'},children:s.text})]},s.id)),t.items.length===0&&h.jsx("div",{className:"text-gray-400 dark:text-gray-300 text-sm py-4 italic text-center",style:{fontFamily:'"Raleway", sans-serif'},children:"This list is empty."})]})]})]}),h.jsx("div",{className:"mt-4 text-center",children:h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",style:{fontFamily:'"Raleway", sans-serif'},children:["Created by ",h.jsx("span",{className:"font-medium",children:t.creator_name})," on"," ",new Date(t.created_at).toLocaleDateString()]})})]})},k_e=()=>{const{token:t}=fw(),e=ya(),{toast:n}=rr(),[r,i]=b.useState(null),[s,o]=b.useState(!0),[a,l]=b.useState(null);b.useEffect(()=>{(async()=>{var d,p;if(!t){l("Invalid share link"),o(!1);return}try{const m=await Zt.get(`/api/shared/list/${t}`);i(m.data),document.title=`${m.data.title} on Itemize.cloud`;const x=document.querySelector('meta[name="description"]');x&&x.setAttribute("content",`View this list shared from Itemize.cloud. Created by ${m.data.creator_name} on ${new Date(m.data.created_at).toLocaleDateString()}.`)}catch(m){console.error("Error fetching shared list:",m),((d=m.response)==null?void 0:d.status)===404?l("This shared list is no longer available or the link is invalid."):((p=m.response)==null?void 0:p.status)===429?l("Too many requests. Please try again later."):l("Failed to load shared content. Please try again later."),n({title:"Error loading shared list",description:a||"The shared list could not be loaded.",variant:"destructive"})}finally{o(!1)}})()},[t,n,a]);const c=()=>{e("/")};return s?h.jsx(Ja,{title:"Loading...",contentType:"list",onBackToHome:c,children:h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):a||!r?h.jsx(Ja,{title:"Error",contentType:"list",onBackToHome:c,children:h.jsx("div",{className:"text-center py-12",children:h.jsxs("div",{className:"max-w-md mx-auto",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",style:{fontFamily:'"Raleway", sans-serif'},children:"Content Not Available"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",style:{fontFamily:'"Raleway", sans-serif'},children:a||"The shared list you're looking for could not be found."}),h.jsx("button",{onClick:c,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-colors",style:{fontFamily:'"Raleway", sans-serif'},children:"Go to Itemize.cloud"})]})})}):h.jsx(Ja,{title:r.title,contentType:"list",onBackToHome:c,children:h.jsx(N_e,{listData:r})})},P_e=({noteData:t})=>{const e=t.color_value||"#FFFFE0",n=r=>r?r.split(`
`).map((s,o)=>s.trim()===""?h.jsx("br",{},o):h.jsx("p",{className:"text-gray-900 dark:text-gray-100 text-sm mb-2 last:mb-0",style:{fontFamily:'"Raleway", sans-serif'},children:s},o)):h.jsx("p",{className:"text-gray-400 dark:text-gray-300 text-sm italic",style:{fontFamily:'"Raleway", sans-serif'},children:"This note is empty."});return h.jsxs("div",{className:"w-full max-w-md mx-auto",children:[h.jsxs(ji,{className:"w-full shadow-lg border-2 transition-all duration-200",style:{backgroundColor:e,borderColor:e,filter:"brightness(0.95)"},children:[h.jsx(hs,{className:"pb-3",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(gd,{className:"h-5 w-5 text-gray-600"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",style:{fontFamily:'"Raleway", sans-serif'},children:t.title}),t.category&&h.jsx("p",{className:"text-sm text-gray-600",style:{fontFamily:'"Raleway", sans-serif'},children:t.category})]})]})}),h.jsx(zs,{className:"pt-0",children:h.jsx("div",{className:"prose prose-sm max-w-none",children:n(t.content)})})]}),h.jsx("div",{className:"mt-4 text-center",children:h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",style:{fontFamily:'"Raleway", sans-serif'},children:["Created by ",h.jsx("span",{className:"font-medium",children:t.creator_name})," on"," ",new Date(t.created_at).toLocaleDateString()]})})]})},D_e=()=>{const{token:t}=fw(),e=ya(),{toast:n}=rr(),[r,i]=b.useState(null),[s,o]=b.useState(!0),[a,l]=b.useState(null);b.useEffect(()=>{(async()=>{var d,p;if(!t){l("Invalid share link"),o(!1);return}try{const m=await Zt.get(`/api/shared/note/${t}`);i(m.data),document.title=`${m.data.title} on Itemize.cloud`;const x=document.querySelector('meta[name="description"]');x&&x.setAttribute("content",`View this note shared from Itemize.cloud. Created by ${m.data.creator_name} on ${new Date(m.data.created_at).toLocaleDateString()}.`)}catch(m){console.error("Error fetching shared note:",m),((d=m.response)==null?void 0:d.status)===404?l("This shared note is no longer available or the link is invalid."):((p=m.response)==null?void 0:p.status)===429?l("Too many requests. Please try again later."):l("Failed to load shared content. Please try again later."),n({title:"Error loading shared note",description:a||"The shared note could not be loaded.",variant:"destructive"})}finally{o(!1)}})()},[t,n,a]);const c=()=>{e("/")};return s?h.jsx(Ja,{title:"Loading...",contentType:"note",onBackToHome:c,children:h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):a||!r?h.jsx(Ja,{title:"Error",contentType:"note",onBackToHome:c,children:h.jsx("div",{className:"text-center py-12",children:h.jsxs("div",{className:"max-w-md mx-auto",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",style:{fontFamily:'"Raleway", sans-serif'},children:"Content Not Available"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",style:{fontFamily:'"Raleway", sans-serif'},children:a||"The shared note you're looking for could not be found."}),h.jsx("button",{onClick:c,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-colors",style:{fontFamily:'"Raleway", sans-serif'},children:"Go to Itemize.cloud"})]})})}):h.jsx(Ja,{title:r.title,contentType:"note",onBackToHome:c,children:h.jsx(P_e,{noteData:r})})};function JL(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(c){n(c);return}a.done?e(l):Promise.resolve(l).then(r,i)}function I_e(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(l){JL(s,r,i,o,a,"next",l)}function a(l){JL(s,r,i,o,a,"throw",l)}o(void 0)})}}function Hu(){return Hu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hu.apply(this,arguments)}var MV={exports:{}};(function(t){var e=function(n){var r=Object.prototype,i=r.hasOwnProperty,s,o=typeof Symbol=="function"?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(O,F,D){return Object.defineProperty(O,F,{value:D,enumerable:!0,configurable:!0,writable:!0}),O[F]}try{u({},"")}catch{u=function(F,D,ie){return F[D]=ie}}function d(O,F,D,ie){var $=F&&F.prototype instanceof S?F:S,U=Object.create($.prototype),Y=new K(ie||[]);return U._invoke=L(O,D,Y),U}n.wrap=d;function p(O,F,D){try{return{type:"normal",arg:O.call(F,D)}}catch(ie){return{type:"throw",arg:ie}}}var m="suspendedStart",x="suspendedYield",w="executing",v="completed",y={};function S(){}function E(){}function C(){}var A={};u(A,a,function(){return this});var T=Object.getPrototypeOf,k=T&&T(T(q([])));k&&k!==r&&i.call(k,a)&&(A=k);var R=C.prototype=S.prototype=Object.create(A);E.prototype=C,u(R,"constructor",C),u(C,"constructor",E),E.displayName=u(C,c,"GeneratorFunction");function P(O){["next","throw","return"].forEach(function(F){u(O,F,function(D){return this._invoke(F,D)})})}n.isGeneratorFunction=function(O){var F=typeof O=="function"&&O.constructor;return F?F===E||(F.displayName||F.name)==="GeneratorFunction":!1},n.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,C):(O.__proto__=C,u(O,c,"GeneratorFunction")),O.prototype=Object.create(R),O},n.awrap=function(O){return{__await:O}};function M(O,F){function D(U,Y,oe,ne){var Z=p(O[U],O,Y);if(Z.type==="throw")ne(Z.arg);else{var fe=Z.arg,we=fe.value;return we&&typeof we=="object"&&i.call(we,"__await")?F.resolve(we.__await).then(function(xe){D("next",xe,oe,ne)},function(xe){D("throw",xe,oe,ne)}):F.resolve(we).then(function(xe){fe.value=xe,oe(fe)},function(xe){return D("throw",xe,oe,ne)})}}var ie;function $(U,Y){function oe(){return new F(function(ne,Z){D(U,Y,ne,Z)})}return ie=ie?ie.then(oe,oe):oe()}this._invoke=$}P(M.prototype),u(M.prototype,l,function(){return this}),n.AsyncIterator=M,n.async=function(O,F,D,ie,$){$===void 0&&($=Promise);var U=new M(d(O,F,D,ie),$);return n.isGeneratorFunction(F)?U:U.next().then(function(Y){return Y.done?Y.value:U.next()})};function L(O,F,D){var ie=m;return function(U,Y){if(ie===w)throw new Error("Generator is already running");if(ie===v){if(U==="throw")throw Y;return ee()}for(D.method=U,D.arg=Y;;){var oe=D.delegate;if(oe){var ne=z(oe,D);if(ne){if(ne===y)continue;return ne}}if(D.method==="next")D.sent=D._sent=D.arg;else if(D.method==="throw"){if(ie===m)throw ie=v,D.arg;D.dispatchException(D.arg)}else D.method==="return"&&D.abrupt("return",D.arg);ie=w;var Z=p(O,F,D);if(Z.type==="normal"){if(ie=D.done?v:x,Z.arg===y)continue;return{value:Z.arg,done:D.done}}else Z.type==="throw"&&(ie=v,D.method="throw",D.arg=Z.arg)}}}function z(O,F){var D=O.iterator[F.method];if(D===s){if(F.delegate=null,F.method==="throw"){if(O.iterator.return&&(F.method="return",F.arg=s,z(O,F),F.method==="throw"))return y;F.method="throw",F.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var ie=p(D,O.iterator,F.arg);if(ie.type==="throw")return F.method="throw",F.arg=ie.arg,F.delegate=null,y;var $=ie.arg;if(!$)return F.method="throw",F.arg=new TypeError("iterator result is not an object"),F.delegate=null,y;if($.done)F[O.resultName]=$.value,F.next=O.nextLoc,F.method!=="return"&&(F.method="next",F.arg=s);else return $;return F.delegate=null,y}P(R),u(R,c,"Generator"),u(R,a,function(){return this}),u(R,"toString",function(){return"[object Generator]"});function H(O){var F={tryLoc:O[0]};1 in O&&(F.catchLoc=O[1]),2 in O&&(F.finallyLoc=O[2],F.afterLoc=O[3]),this.tryEntries.push(F)}function B(O){var F=O.completion||{};F.type="normal",delete F.arg,O.completion=F}function K(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(H,this),this.reset(!0)}n.keys=function(O){var F=[];for(var D in O)F.push(D);return F.reverse(),function ie(){for(;F.length;){var $=F.pop();if($ in O)return ie.value=$,ie.done=!1,ie}return ie.done=!0,ie}};function q(O){if(O){var F=O[a];if(F)return F.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var D=-1,ie=function $(){for(;++D<O.length;)if(i.call(O,D))return $.value=O[D],$.done=!1,$;return $.value=s,$.done=!0,$};return ie.next=ie}}return{next:ee}}n.values=q;function ee(){return{value:s,done:!0}}return K.prototype={constructor:K,reset:function(O){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(B),!O)for(var F in this)F.charAt(0)==="t"&&i.call(this,F)&&!isNaN(+F.slice(1))&&(this[F]=s)},stop:function(){this.done=!0;var O=this.tryEntries[0],F=O.completion;if(F.type==="throw")throw F.arg;return this.rval},dispatchException:function(O){if(this.done)throw O;var F=this;function D(ne,Z){return U.type="throw",U.arg=O,F.next=ne,Z&&(F.method="next",F.arg=s),!!Z}for(var ie=this.tryEntries.length-1;ie>=0;--ie){var $=this.tryEntries[ie],U=$.completion;if($.tryLoc==="root")return D("end");if($.tryLoc<=this.prev){var Y=i.call($,"catchLoc"),oe=i.call($,"finallyLoc");if(Y&&oe){if(this.prev<$.catchLoc)return D($.catchLoc,!0);if(this.prev<$.finallyLoc)return D($.finallyLoc)}else if(Y){if(this.prev<$.catchLoc)return D($.catchLoc,!0)}else if(oe){if(this.prev<$.finallyLoc)return D($.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(O,F){for(var D=this.tryEntries.length-1;D>=0;--D){var ie=this.tryEntries[D];if(ie.tryLoc<=this.prev&&i.call(ie,"finallyLoc")&&this.prev<ie.finallyLoc){var $=ie;break}}$&&(O==="break"||O==="continue")&&$.tryLoc<=F&&F<=$.finallyLoc&&($=null);var U=$?$.completion:{};return U.type=O,U.arg=F,$?(this.method="next",this.next=$.finallyLoc,y):this.complete(U)},complete:function(O,F){if(O.type==="throw")throw O.arg;return O.type==="break"||O.type==="continue"?this.next=O.arg:O.type==="return"?(this.rval=this.arg=O.arg,this.method="return",this.next="end"):O.type==="normal"&&F&&(this.next=F),y},finish:function(O){for(var F=this.tryEntries.length-1;F>=0;--F){var D=this.tryEntries[F];if(D.finallyLoc===O)return this.complete(D.completion,D.afterLoc),B(D),y}},catch:function(O){for(var F=this.tryEntries.length-1;F>=0;--F){var D=this.tryEntries[F];if(D.tryLoc===O){var ie=D.completion;if(ie.type==="throw"){var $=ie.arg;B(D)}return $}}throw new Error("illegal catch attempt")},delegateYield:function(O,F,D){return this.delegate={iterator:q(O),resultName:F,nextLoc:D},this.method==="next"&&(this.arg=s),y}},n}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(MV);var QL=MV.exports,TV=function(e){var n=e.paths,r=e.id,i=e.strokeWidth,s=e.strokeColor,o=e.command,a=o===void 0?AV:o;if(n.length===1){var l=n[0],c=l.x,u=l.y,d=i/2;return b.createElement("circle",{key:r,id:r,cx:c,cy:u,r:d,stroke:s,fill:s})}var p=n.reduce(function(m,x,w,v){return w===0?"M "+x.x+","+x.y:m+" "+a(x,w,v)},"");return b.createElement("path",{key:r,id:r,d:p,fill:"none",strokeLinecap:"round",stroke:s,strokeWidth:i})},L_e=function(e,n){var r=n.x-e.x,i=n.y-e.y;return{length:Math.sqrt(Math.pow(r,2)+Math.pow(i,2)),angle:Math.atan2(i,r)}},Tv=function(e){var n=e.current,r=e.next,i=e.previous,s=e.reverse,o=i||n,a=r||n,l=.2,c=L_e(o,a),u=c.angle+(s?Math.PI:0),d=c.length*l,p=n.x+Math.cos(u)*d,m=n.y+Math.sin(u)*d;return[p,m]},AV=function(e,n,r){var i=null,s=null;switch(n){case 0:var o=Tv({current:e});i=o[0],s=o[1];break;case 1:var a=Tv({current:r[n-1],next:e});i=a[0],s=a[1];break;default:var l=Tv({current:r[n-1],previous:r[n-2],next:e});i=l[0],s=l[1];break}var c=Tv({current:e,previous:r[n-1],next:r[n+1],reverse:!0}),u=c[0],d=c[1];return"C "+i+","+s+" "+u+","+d+" "+e.x+", "+e.y},O_e=function(e){var n=e.id,r=e.paths;return b.createElement(b.Fragment,null,r.map(function(i,s){return b.createElement(TV,{key:n+"__"+s,paths:i.paths,id:n+"__"+s,strokeWidth:i.strokeWidth,strokeColor:i.strokeColor,command:AV})}))},ZL=function(e){return new Promise(function(n,r){var i=new Image;i.addEventListener("load",function(){i.width>0&&n(i),r("Image not found")}),i.addEventListener("error",function(s){return r(s)}),i.src=e,i.setAttribute("crossorigin","anonymous")})};function eO(t){var e,n=(e=t.firstChild)==null?void 0:e.cloneNode(!0),r=t.offsetWidth,i=t.offsetHeight;return n.setAttribute("viewBox","0 0 "+r+" "+i),n.setAttribute("width",r.toString()),n.setAttribute("height",i.toString()),{svgCanvas:n,width:r,height:i}}var F_e=b.forwardRef(function(t,e){var n=t.paths,r=t.isDrawing,i=t.onPointerDown,s=t.onPointerMove,o=t.onPointerUp,a=t.id,l=a===void 0?"react-sketch-canvas":a,c=t.width,u=c===void 0?"100%":c,d=t.height,p=d===void 0?"100%":d,m=t.className,x=m===void 0?"react-sketch-canvas":m,w=t.canvasColor,v=w===void 0?"red":w,y=t.backgroundImage,S=y===void 0?"":y,E=t.exportWithBackgroundImage,C=E===void 0?!1:E,A=t.preserveBackgroundImageAspectRatio,T=A===void 0?"none":A,k=t.allowOnlyPointerType,R=k===void 0?"all":k,P=t.style,M=P===void 0?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:P,L=t.svgStyle,z=L===void 0?{}:L,H=b.useRef(null),B=function($){var U,Y,oe,ne=(U=H.current)==null?void 0:U.getBoundingClientRect(),Z=(Y=window.scrollX)!=null?Y:0,fe=(oe=window.scrollY)!=null?oe:0;if(!ne)return{x:0,y:0};var we={x:$.pageX-ne.left-Z,y:$.pageY-ne.top-fe};return we},K=function($){if(!(R!=="all"&&$.pointerType!==R)&&!($.pointerType==="mouse"&&$.button!==0)){var U=B($);i(U)}},q=function($){if(r&&!(R!=="all"&&$.pointerType!==R)){var U=B($);s(U)}},ee=function($){$.pointerType==="mouse"&&$.button!==0||R!=="all"&&$.pointerType!==R||o()};b.useImperativeHandle(e,function(){return{exportImage:function($){return new Promise(function(){var U=I_e(QL.mark(function Y(oe,ne){var Z,fe,we,xe,Ve,Pe,et,te;return QL.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(Ye.prev=0,Z=H.current,Z){Ye.next=4;break}throw Error("Canvas not rendered yet");case 4:return fe=eO(Z),we=fe.svgCanvas,xe=fe.width,Ve=fe.height,Pe="data:image/svg+xml;base64,"+btoa(we.outerHTML),Ye.next=8,ZL(Pe);case 8:if(Ye.t0=Ye.sent,et=[Ye.t0],!C){Ye.next=21;break}return Ye.prev=11,Ye.next=14,ZL(S);case 14:te=Ye.sent,et.push(te),Ye.next=21;break;case 18:Ye.prev=18,Ye.t1=Ye.catch(11),console.warn("exportWithBackgroundImage props is set without a valid background image URL. This option is ignored");case 21:Promise.all(et).then(function(ht){var Qe=document.createElement("canvas");Qe.setAttribute("width",xe.toString()),Qe.setAttribute("height",Ve.toString());var St=Qe.getContext("2d");if(!St)throw Error("Canvas not rendered yet");ht.reverse().forEach(function(Ne){St.drawImage(Ne,0,0)}),oe(Qe.toDataURL("image/"+$))}).catch(function(ht){throw ht}),Ye.next=27;break;case 24:Ye.prev=24,Ye.t2=Ye.catch(0),ne(Ye.t2);case 27:case"end":return Ye.stop()}},Y,null,[[0,24],[11,18]])}));return function(Y,oe){return U.apply(this,arguments)}}())},exportSvg:function(){return new Promise(function($,U){try{var Y,oe=(Y=H.current)!=null?Y:null;if(oe!==null){var ne,Z,fe=eO(oe),we=fe.svgCanvas;if(C){$(we.outerHTML);return}(ne=we.querySelector("#"+l+"__background"))==null||ne.remove(),(Z=we.querySelector("#"+l+"__canvas-background"))==null||Z.setAttribute("fill",v),$(we.outerHTML)}U(new Error("Canvas not loaded"))}catch(xe){U(xe)}})}}}),b.useEffect(function(){return document.addEventListener("pointerup",ee),function(){document.removeEventListener("pointerup",ee)}},[ee]);var O=n.filter(function(ie){return!ie.drawMode}),F=0,D=n.reduce(function(ie,$){return $.drawMode?(ie[F]===void 0&&(ie[F]=[]),ie[F].push($),ie):(F+=1,ie)},[[]]);return b.createElement("div",{role:"presentation",ref:H,className:x,style:Hu({touchAction:"none",width:u,height:p},M),"touch-action":"none",onPointerDown:K,onPointerMove:q,onPointerUp:ee},b.createElement("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:Hu({width:"100%",height:"100%"},z),id:l},b.createElement("g",{id:l+"__eraser-stroke-group",display:"none"},b.createElement("rect",{id:l+"__mask-background",x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),O.map(function(ie,$){return b.createElement(TV,{key:l+"__eraser-"+$,id:l+"__eraser-"+$,paths:ie.paths,strokeColor:"#000000",strokeWidth:ie.strokeWidth})})),b.createElement("defs",null,S&&b.createElement("pattern",{id:l+"__background",x:"0",y:"0",width:"100%",height:"100%",patternUnits:"userSpaceOnUse"},b.createElement("image",{x:"0",y:"0",width:"100%",height:"100%",xlinkHref:S,preserveAspectRatio:T})),O.map(function(ie,$){return b.createElement("mask",{id:l+"__eraser-mask-"+$,key:l+"__eraser-mask-"+$,maskUnits:"userSpaceOnUse"},b.createElement("use",{href:"#"+l+"__mask-background"}),Array.from({length:O.length-$},function(U,Y){return Y+$}).map(function(U){return b.createElement("use",{key:U.toString(),href:"#"+l+"__eraser-"+U.toString()})}))})),b.createElement("g",{id:l+"__canvas-background-group"},b.createElement("rect",{id:l+"__canvas-background",x:"0",y:"0",width:"100%",height:"100%",fill:S?"url(#"+l+"__background)":v})),D.map(function(ie,$){return b.createElement("g",{id:l+"__stroke-group-"+$,key:l+"__stroke-group-"+$,mask:"url(#"+l+"__eraser-mask-"+$+")"},b.createElement(O_e,{id:l,paths:ie}))})))}),RV=b.forwardRef(function(t,e){var n=t.id,r=n===void 0?"react-sketch-canvas":n,i=t.width,s=i===void 0?"100%":i,o=t.height,a=o===void 0?"100%":o,l=t.className,c=l===void 0?"":l,u=t.canvasColor,d=u===void 0?"white":u,p=t.strokeColor,m=p===void 0?"red":p,x=t.backgroundImage,w=x===void 0?"":x,v=t.exportWithBackgroundImage,y=v===void 0?!1:v,S=t.preserveBackgroundImageAspectRatio,E=S===void 0?"none":S,C=t.strokeWidth,A=C===void 0?4:C,T=t.eraserWidth,k=T===void 0?8:T,R=t.allowOnlyPointerType,P=R===void 0?"all":R,M=t.style,L=M===void 0?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:M,z=t.svgStyle,H=z===void 0?{}:z,B=t.onChange,K=B===void 0?function(Ne){}:B,q=t.onStroke,ee=q===void 0?function(Ne,Me){}:q,O=t.withTimestamp,F=O===void 0?!1:O,D=b.createRef(),ie=b.useState(!0),$=ie[0],U=ie[1],Y=b.useState(!1),oe=Y[0],ne=Y[1],Z=b.useState([]),fe=Z[0],we=Z[1],xe=b.useState([]),Ve=xe[0],Pe=xe[1],et=b.useState([]),te=et[0],ft=et[1],Ye=b.useCallback(function(){var Ne,Me,st=(Ne=(Me=te.slice(-1))==null?void 0:Me[0])!=null?Ne:null;if(st===null){console.warn("No stroke found!");return}ee(st,!st.drawMode)},[oe]);b.useEffect(function(){Ye()},[oe]),b.useEffect(function(){K(te)},[te]),b.useImperativeHandle(e,function(){return{eraseMode:function(Me){U(!Me)},clearCanvas:function(){we([].concat(te)),ft([])},undo:function(){if(fe.length!==0){ft([].concat(fe)),we([]);return}Pe(function(Me){return[].concat(Me,te.slice(-1))}),ft(function(Me){return Me.slice(0,-1)})},redo:function(){Ve.length!==0&&(ft(function(Me){return[].concat(Me,Ve.slice(-1))}),Pe(function(Me){return Me.slice(0,-1)}))},exportImage:function(Me){var st,Q=(st=D.current)==null?void 0:st.exportImage;if(Q)return Q(Me);throw Error("Export function called before canvas loaded")},exportSvg:function(){return new Promise(function(Me,st){var Q,I=(Q=D.current)==null?void 0:Q.exportSvg;I?I().then(function(re){Me(re)}).catch(function(re){st(re)}):st(Error("Export function called before canvas loaded"))})},exportPaths:function(){return new Promise(function(Me,st){try{Me(te)}catch(Q){st(Q)}})},loadPaths:function(Me){ft(function(st){return[].concat(st,Me)})},getSketchingTime:function(){return new Promise(function(Me,st){F||st(new Error("Set 'withTimestamp' prop to get sketching time"));try{var Q=te.reduce(function(I,re){var G,ae,ce=(G=re.startTimestamp)!=null?G:0,Ae=(ae=re.endTimestamp)!=null?ae:0;return I+(Ae-ce)},0);Me(Q)}catch(I){st(I)}})},resetCanvas:function(){we([]),Pe([]),ft([])}}});var ht=function(Me){ne(!0),Pe([]);var st={drawMode:$,strokeColor:$?m:"#000000",strokeWidth:$?A:k,paths:[Me]};F&&(st=Hu({},st,{startTimestamp:Date.now(),endTimestamp:0})),ft(function(Q){return[].concat(Q,[st])})},Qe=function(Me){if(oe){var st=te.slice(-1)[0],Q=Hu({},st,{paths:[].concat(st.paths,[Me])});ft(function(I){return[].concat(I.slice(0,-1),[Q])})}},St=function(){var Me,st;if(oe&&(ne(!1),!!F)){var Q=(Me=(st=te.slice(-1))==null?void 0:st[0])!=null?Me:null;if(Q!==null){var I=Hu({},Q,{endTimestamp:Date.now()});ft(function(re){return[].concat(re.slice(0,-1),[I])})}}};return b.createElement(F_e,{ref:D,id:r,width:s,height:a,className:c,canvasColor:d,backgroundImage:w,exportWithBackgroundImage:y,preserveBackgroundImageAspectRatio:E,allowOnlyPointerType:P,style:L,svgStyle:H,paths:te,isDrawing:oe,onPointerDown:ht,onPointerMove:Qe,onPointerUp:St})});const j_e=({whiteboardData:t})=>{const e=b.useRef(null),[n,r]=b.useState(!1),[i,s]=b.useState(void 0);b.useEffect(()=>{const l=()=>{r(window.innerWidth<768)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),b.useEffect(()=>{if(n&&t.canvas_width&&t.canvas_height){const c=t.canvas_height/t.canvas_width,u=Math.max(320*c,300);s(u)}else s(void 0)},[n,t.canvas_width,t.canvas_height]),b.useEffect(()=>{if(e.current&&t.canvas_data)try{e.current.loadPaths(t.canvas_data)}catch(l){console.warn("Failed to load canvas data:",l)}},[t.canvas_data]);const o=n?"100%":t.canvas_width||400,a=n?i||300:t.canvas_height||300;return h.jsxs("div",{className:"w-full max-w-2xl mx-auto",children:[h.jsxs(ji,{className:"w-full shadow-lg border-2 transition-all duration-200",style:{borderColor:t.color_value,"--whiteboard-color":t.color_value},children:[h.jsx(hs,{className:"pb-3",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(cl,{className:"h-5 w-5 text-gray-600"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 truncate",style:{fontFamily:'"Raleway", sans-serif'},children:t.title}),t.category&&h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",style:{fontFamily:'"Raleway", sans-serif'},children:t.category})]})]})}),h.jsxs(zs,{className:"p-4",children:[h.jsxs("div",{className:"relative border-2 border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",style:{backgroundColor:t.background_color||"#FFFFFF",width:"100%",maxWidth:n?"100%":`${t.canvas_width||400}px`},children:[h.jsx(RV,{ref:e,style:{border:"none",borderRadius:"0.5rem"},width:o,height:a,strokeWidth:4,strokeColor:"#000000",canvasColor:t.background_color||"#FFFFFF",backgroundImage:"",exportWithBackgroundImage:!1,allowOnlyPointerType:"all",withTimestamp:!1,readOnly:!0}),h.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{zIndex:10}})]}),h.jsx("div",{className:"mt-3 text-center",children:h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",style:{fontFamily:'"Raleway", sans-serif'},children:[t.canvas_width," × ",t.canvas_height," pixels"]})})]})]}),h.jsx("div",{className:"mt-4 text-center",children:h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",style:{fontFamily:'"Raleway", sans-serif'},children:["Created by ",h.jsx("span",{className:"font-medium",children:t.creator_name})," on"," ",new Date(t.created_at).toLocaleDateString()]})})]})},U_e=()=>{const{token:t}=fw(),e=ya(),{toast:n}=rr(),[r,i]=b.useState(null),[s,o]=b.useState(!0),[a,l]=b.useState(null);b.useEffect(()=>{(async()=>{var d,p;if(!t){l("Invalid share link"),o(!1);return}try{const m=await Zt.get(`/api/shared/whiteboard/${t}`);i(m.data),document.title=`${m.data.title} on Itemize.cloud`;const x=document.querySelector('meta[name="description"]');x&&x.setAttribute("content",`View this whiteboard shared from Itemize.cloud. Created by ${m.data.creator_name} on ${new Date(m.data.created_at).toLocaleDateString()}.`)}catch(m){console.error("Error fetching shared whiteboard:",m),((d=m.response)==null?void 0:d.status)===404?l("This shared whiteboard is no longer available or the link is invalid."):((p=m.response)==null?void 0:p.status)===429?l("Too many requests. Please try again later."):l("Failed to load shared content. Please try again later."),n({title:"Error loading shared whiteboard",description:a||"The shared whiteboard could not be loaded.",variant:"destructive"})}finally{o(!1)}})()},[t,n,a]);const c=()=>{e("/")};return s?h.jsx(Ja,{title:"Loading...",contentType:"whiteboard",onBackToHome:c,children:h.jsx("div",{className:"flex items-center justify-center py-12",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})}):a||!r?h.jsx(Ja,{title:"Error",contentType:"whiteboard",onBackToHome:c,children:h.jsx("div",{className:"text-center py-12",children:h.jsxs("div",{className:"max-w-md mx-auto",children:[h.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4",style:{fontFamily:'"Raleway", sans-serif'},children:"Content Not Available"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",style:{fontFamily:'"Raleway", sans-serif'},children:a||"The shared whiteboard you're looking for could not be found."}),h.jsx("button",{onClick:c,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-colors",style:{fontFamily:'"Raleway", sans-serif'},children:"Go to Itemize.cloud"})]})})}):h.jsx(Ja,{title:r.title,contentType:"whiteboard",onBackToHome:c,children:h.jsx(j_e,{whiteboardData:r})})},z_e=({children:t})=>{const{currentUser:e,loading:n,isAuthenticated:r}=to();return console.log("ProtectedRoute evaluation:",{hasUser:!!e,loading:n,isAuthenticated:r,userData:e}),n?(console.log("Protected route loading state"),h.jsx("div",{className:"flex items-center justify-center min-h-screen",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})):e?(console.log("Protected route rendering content"),t?h.jsx(h.Fragment,{children:t}):h.jsx(jse,{})):(console.log("Protected route redirect - not authenticated"),h.jsx(QE,{to:"/home",replace:!0}))},B_e=({list:t,onUpdate:e,onDelete:n,onShare:r,existingCategories:i,canvasTransform:s,onPositionChange:o,isCollapsed:a,onToggleCollapsed:l,addCategory:c,updateCategory:u})=>{const d=b.useRef(null),[p,m]=b.useState(!1),[x,w]=b.useState(!1),[v,y]=b.useState({x:0,y:0}),[S,E]=b.useState({startX:0,startY:0,startWidth:0,startHeight:0});b.useEffect(()=>{d.current&&(d.current.style.left=`${t.position_x||0}px`,d.current.style.top=`${t.position_y||0}px`)},[t.position_x,t.position_y]);const C=R=>{var M;if(!R.target.closest('input, textarea, button, [role="button"], [role="menuitem"], .resize-handle')&&(R.preventDefault(),d.current)){const L=(M=d.current.parentElement)==null?void 0:M.getBoundingClientRect();if(L){const z=(R.clientX-L.left-s.x)/s.scale,H=(R.clientY-L.top-s.y)/s.scale,B=parseFloat(d.current.style.left)||0,K=parseFloat(d.current.style.top)||0;y({x:(z-B)*s.scale,y:(H-K)*s.scale}),m(!0)}}},A=R=>{var P;if(p&&d.current){const M=(P=d.current.parentElement)==null?void 0:P.getBoundingClientRect();if(!M)return;const L=(R.clientX-M.left-s.x)/s.scale,z=(R.clientY-M.top-s.y)/s.scale,H=L-v.x/s.scale,B=z-v.y/s.scale;d.current.style.left=`${H}px`,d.current.style.top=`${B}px`}if(x&&d.current){const L=(R.clientX-S.startX)/s.scale,z=Math.max(320,S.startWidth+L);d.current.style.width=`${z}px`}},T=()=>{if(p&&d.current){m(!1);const R=parseFloat(d.current.style.left)||0,P=parseFloat(d.current.style.top)||0,M={x:Math.round(R),y:Math.round(P)};o(t.id,M)}if(x&&d.current){w(!1);const R=parseFloat(d.current.style.left)||0,P=parseFloat(d.current.style.top)||0,M=parseFloat(d.current.style.width)||t.width||340;e({...t,position_x:Math.round(R),position_y:Math.round(P),width:Math.round(M)})}};b.useEffect(()=>((p||x)&&(window.addEventListener("mousemove",A),window.addEventListener("mouseup",T)),()=>{window.removeEventListener("mousemove",A),window.removeEventListener("mouseup",T)}),[p,x,v,S]);const k=R=>{if(R.preventDefault(),R.stopPropagation(),d.current){const P=parseFloat(d.current.style.width)||t.width||340;E({startX:R.clientX,startY:R.clientY,startWidth:P,startHeight:0}),w(!0)}};return h.jsxs("div",{ref:d,onMouseDown:C,className:"draggable-list-card shadow-lg rounded-lg flex flex-col overflow-hidden border relative",style:{position:"absolute",width:`${t.width||340}px`,height:"auto",minHeight:"150px",zIndex:p||x?1e3:1,cursor:p?"grabbing":x?"ew-resize":"grab",transition:p||x?"none":"box-shadow 0.2s, transform 0.1s",boxShadow:p||x?"0 8px 16px rgba(0,0,0,0.2)":"0 4px 6px rgba(0, 0, 0, 0.1)",transform:p||x?"scale(1.01)":"scale(1)",userSelect:"none",touchAction:"none"},children:[h.jsx(fR,{list:t,onUpdate:e,onDelete:n,onShare:r,existingCategories:i,isCollapsed:a,onToggleCollapsed:l,addCategory:c,updateCategory:u}),!a&&h.jsx("div",{className:"resize-handle absolute bottom-0 right-0 w-4 h-4 cursor-ew-resize",onMouseDown:k,style:{background:"linear-gradient(90deg, transparent 40%, #ccc 40%, #ccc 60%, transparent 60%)",opacity:.6,zIndex:10}})]})},NV=({position:t,onAddList:e,onAddNote:n,onAddWhiteboard:r,onClose:i,isFromButton:s=!1,absolutePosition:o})=>{const a=(l,c)=>{l.stopPropagation(),c()};return h.jsx("div",{className:`context-menu ${s?"dropdown-menu":""} bg-background border border-border rounded-md shadow-lg`,style:{position:s?"fixed":"absolute",top:s&&o?`${o.y}px`:`${t.y}px`,left:s&&o?`${o.x}px`:`${t.x}px`,transform:"translateX(-50%)",zIndex:2e3,padding:"0.5rem 0",minWidth:"180px",marginTop:s?"0":"10px"},onClick:l=>l.stopPropagation(),children:h.jsxs("div",{className:"menu-items",children:[h.jsxs("button",{className:"menu-item flex items-center px-4 py-3 cursor-pointer bg-transparent border-none w-full text-left font-light text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-foreground",onClick:l=>a(l,e),children:[h.jsx(md,{className:"h-4 w-4 mr-3 text-muted-foreground"}),h.jsx("span",{children:"Add List"})]}),n&&h.jsxs("button",{className:"menu-item flex items-center px-4 py-3 cursor-pointer bg-transparent border-none w-full text-left font-light text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-foreground",onClick:l=>a(l,n),children:[h.jsx(gd,{className:"h-4 w-4 mr-3 text-muted-foreground"}),h.jsx("span",{children:"Add Note"})]}),r&&h.jsxs("button",{className:"menu-item flex items-center px-4 py-3 cursor-pointer bg-transparent border-none w-full text-left font-light text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-foreground",onClick:l=>a(l,r),children:[h.jsx(cl,{className:"h-4 w-4 mr-3 text-muted-foreground"}),h.jsx("span",{children:"Add Whiteboard"})]})]})})},Hr=t=>t?{Authorization:`Bearer ${t}`}:{},kV=async t=>(await Zt.get("/api/canvas/lists",{headers:Hr(t)})).data,PV=async(t,e)=>{const n={...t,category:t.type||t.category||"General"};delete n.type;const r=await Zt.post("/api/lists",n,{headers:Hr(e)});return{...r.data,type:r.data.category}},DV=async(t,e)=>{const n={...t,category:t.type||t.category};delete n.type;const r=await Zt.put(`/api/lists/${t.id}`,n,{headers:Hr(e)});return{...r.data,type:r.data.category}},IV=async(t,e)=>(await Zt.delete(`/api/lists/${t}`,{headers:Hr(e)})).data,H_e=async(t,e,n,r)=>(await Zt.put(`/api/lists/${t}/position`,{x:e,y:n},{headers:Hr(r)})).data,V_e=async t=>(await Zt.get("/api/notes",{headers:Hr(t)})).data,tO=async(t,e)=>(await Zt.post("/api/notes",t,{headers:Hr(e)})).data,$_e=async(t,e,n)=>(await Zt.put(`/api/notes/${t}`,e,{headers:Hr(n)})).data,W_e=async(t,e)=>(await Zt.delete(`/api/notes/${t}`,{headers:Hr(e)})).data,G_e=async t=>(await Zt.get("/api/whiteboards",{headers:Hr(t)})).data,q_e=async(t,e)=>(await Zt.post("/api/whiteboards",t,{headers:Hr(e)})).data,X_e=async(t,e,n)=>(console.log("Sending whiteboard update to backend:",{whiteboardId:t,whiteboardData:e}),(await Zt.put(`/api/whiteboards/${t}`,e,{headers:Hr(n)})).data),K_e=async(t,e)=>(await Zt.delete(`/api/whiteboards/${t}`,{headers:Hr(e)})).data,Y_e=async t=>(await Zt.get("/api/categories",{headers:Hr(t)})).data,J_e=async(t,e)=>(await Zt.post("/api/categories",t,{headers:Hr(e)})).data,Q_e=async(t,e,n)=>(await Zt.put(`/api/categories/${t}`,e,{headers:Hr(n)})).data,Z_e=async(t,e)=>(await Zt.delete(`/api/categories/${t}`,{headers:Hr(e)})).data,LV=({isOpen:t,onClose:e,onListCreated:n,existingCategories:r,position:i})=>{const{token:s}=to(),[o,a]=b.useState(""),[l,c]=b.useState(""),[u,d]=b.useState(""),[p,m]=b.useState(!1),[x,w]=b.useState("#3B82F6"),[v,y]=b.useState(!1),[S,E]=b.useState(""),C=async A=>{if(A.preventDefault(),!o.trim()){E("Please enter a title");return}const k=(p?u.trim():l)||"General";y(!0),E("");try{const R={title:o,type:k,color_value:x,items:[],...i&&{position_x:i.x,position_y:i.y}},P=await PV(R,s);n(P),a(""),c(""),d(""),m(!1),w("#3B82F6"),e()}catch(R){console.error("Failed to create list:",R),E("Failed to create list. Please try again.")}finally{y(!1)}};return h.jsx(Vc,{open:t,onOpenChange:A=>!A&&e(),children:h.jsxs(dl,{className:"sm:max-w-[425px]",children:[h.jsx(fl,{children:h.jsxs(hl,{className:"flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(md,{className:"h-5 w-5 text-slate-500"}),"Add List"]})}),h.jsxs("form",{onSubmit:C,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{htmlFor:"title",className:"text-sm font-medium",style:{fontFamily:'"Raleway", sans-serif'},children:"Title"}),h.jsx(Sn,{id:"title",value:o,onChange:A=>a(A.target.value),placeholder:"Enter list title",autoFocus:!0})]}),h.jsxs("div",{className:"grid grid-cols-[1fr_60px] gap-4 items-start",children:[p?h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{htmlFor:"newCategory",className:"text-sm font-medium",style:{fontFamily:'"Raleway", sans-serif'},children:"New Category"}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(Sn,{id:"newCategory",value:u,onChange:A=>d(A.target.value),placeholder:"Enter new category",autoFocus:!0,onKeyDown:A=>{A.key==="Enter"&&u.trim()&&(c(u.trim()),m(!1),E(""))}}),h.jsx($e,{type:"button",variant:"outline",onClick:()=>{u.trim()&&(c(u.trim()),m(!1),E(""))},disabled:!u.trim(),style:{fontFamily:'"Raleway", sans-serif'},children:"Add"}),h.jsx($e,{type:"button",variant:"outline",onClick:()=>{m(!1),d("")},style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"})]})]}):h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{htmlFor:"category",className:"text-sm font-medium",style:{fontFamily:'"Raleway", sans-serif'},children:"Category"}),h.jsxs(Gc,{value:l,onValueChange:A=>{A==="__add_new__"?(m(!0),c("")):(c(A),E(""))},children:[h.jsx(ml,{children:h.jsx(qc,{placeholder:"Select a category"})}),h.jsxs(gl,{children:[!r.includes("General")&&h.jsx(tr,{value:"General",children:"General"}),r.map(A=>h.jsx(tr,{value:A,children:A},A)),h.jsx(tr,{value:"__add_new__",className:"text-blue-600",children:"+ Add new category"})]})]}),h.jsx("p",{className:"text-xs text-gray-500",style:{fontFamily:'"Raleway", sans-serif'},children:r.length===0?'No categories yet. Leave empty to use "General" or create a new one from the dropdown.':'Select a category or leave empty to use "General".'})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",style:{fontFamily:'"Raleway", sans-serif'},children:"Color"}),h.jsx(pl,{color:x,onChange:w,onSave:w,children:h.jsx($e,{type:"button",variant:"outline",size:"icon",className:"h-10 w-10 p-0 rounded-full","aria-label":"Change list color",children:h.jsx("span",{className:"inline-block w-6 h-6 rounded-full border border-gray-300",style:{backgroundColor:x}})})})]})]}),S&&h.jsx("p",{className:"text-red-500 text-sm",style:{fontFamily:'"Raleway", sans-serif'},children:S}),h.jsxs("div",{className:"flex justify-end space-x-2",children:[h.jsx($e,{type:"button",variant:"outline",onClick:e,style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"}),h.jsx($e,{type:"submit",disabled:v,className:"bg-blue-600 hover:bg-blue-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:v?"Creating...":"Create List"})]})]})]})})},eEe=({size:t="md",className:e=""})=>{const r={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[t];return h.jsx("div",{className:`${e}`,children:h.jsx("div",{className:`${r} animate-spin rounded-full border-2 border-t-transparent border-primary`})})},tEe=({note:t,onUpdate:e,onDelete:n,isCollapsed:r,onToggleCollapsed:i,updateCategory:s,addCategory:o})=>{const{toast:a}=rr(),[l,c]=b.useState(!0),u=r!==void 0?!r:l,d=i||c,[p,m]=b.useState(!1),[x,w]=b.useState(t.title||"Untitled Note"),[v,y]=b.useState(!1),[S,E]=b.useState(t.content||""),[C,A]=b.useState(!1),[T,k]=b.useState(!1),[R,P]=b.useState(!1),[M,L]=b.useState(""),z=b.useRef(null),H=b.useRef(null);Re.useEffect(()=>{w(t.title||"Untitled Note")},[t.title]),Re.useEffect(()=>{E(t.content||"")},[t.content]);const B=b.useCallback(async()=>{x.trim()!==t.title&&await e(t.id,{title:x.trim()}),m(!1)},[x,t.title,t.id,e]),K=b.useCallback(async()=>{S.trim()!==t.content&&await e(t.id,{content:S.trim(),updated_at:new Date().toISOString()}),y(!1)},[S,t.content,t.id,e]),q=b.useCallback(async()=>{await n(t.id)},[t.id,n]),ee=b.useCallback(async D=>{A(!0);try{await e(t.id,{color_value:D})}catch(ie){throw console.error("Failed to save note color:",ie),a({title:"Error updating color",description:"Could not update note color. Please try again.",variant:"destructive"}),ie}finally{A(!1)}},[t.id,e,a]),O=b.useCallback(async D=>{if(D==="__custom__"){P(!0);return}try{await e(t.id,{category:D}),k(!1),P(!1)}catch(ie){console.error("Failed to update note category:",ie),a({title:"Error updating category",description:"Could not update note category. Please try again.",variant:"destructive"})}},[t.id,e,a]),F=b.useCallback(async()=>{if(M.trim()!=="")try{await e(t.id,{category:M.trim()}),k(!1),P(!1),L("")}catch(D){console.error("Failed to add custom category:",D),a({title:"Error adding category",description:"Could not add custom category. Please try again.",variant:"destructive"})}else a({title:"Category cannot be empty",description:"Please enter a valid category name",variant:"destructive"})},[M,t.id,e,a]);return{noteTitle:t.title||"Untitled Note",isCollapsibleOpen:u,setIsCollapsibleOpen:d,isEditing:p,setIsEditing:m,editTitle:x,setEditTitle:w,handleEditTitle:B,isEditingContent:v,setIsEditingContent:y,editContent:S,setEditContent:E,handleEditContent:K,handleDeleteNote:q,handleSaveNoteColor:ee,isSavingColor:C,isEditingCategory:T,setIsEditingCategory:k,showNewCategoryInput:R,setShowNewCategoryInput:P,newCategory:M,setNewCategory:L,handleEditCategory:O,handleAddCustomCategory:F,titleEditRef:z,contentEditRef:H}};function Dr(t){this.content=t}Dr.prototype={constructor:Dr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Dr(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Dr(n)},addToStart:function(t,e){return new Dr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Dr(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Dr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Dr.from(t),t.size?new Dr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Dr.from(t),t.size?new Dr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Dr.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Dr.from=function(t){if(t instanceof Dr)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Dr(e)};function OV(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=OV(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function FV(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=FV(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class Ke{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Ke(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Ke(r,i)}cutByIndex(e,n){return e==n?Ke.empty:e==0&&n==this.content.length?this:new Ke(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Ke(i,s)}addToStart(e){return new Ke([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ke(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return OV(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return FV(this,e,n,r)}findIndex(e,n=-1){if(e==0)return Av(0,e);if(e==this.size)return Av(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?Av(r+1,o):Av(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Ke.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ke(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ke.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Ke(n||e,r)}static from(e){if(!e)return Ke.empty;if(e instanceof Ke)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ke([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ke.empty=new Ke([],0);const m_={index:0,offset:0};function Av(t,e){return m_.index=t,m_.offset=e,m_}function p0(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!p0(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!p0(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Mn=class gM{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&p0(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return gM.none;if(e instanceof gM)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Mn.none=[];class m0 extends Error{}class ut{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=UV(this.content,e+this.openStart,n);return r&&new ut(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ut(jV(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ut.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ut(Ke.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new ut(e,r,i)}}ut.empty=new ut(Ke.empty,0,0);function jV(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(jV(s.content,e-i-1,n-i-1)))}function UV(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=UV(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function nEe(t,e,n){if(n.openStart>t.depth)throw new m0("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new m0("Inconsistent open depths");return zV(t,e,n,0)}function zV(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=zV(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return $u(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=rEe(n,t);return $u(s,HV(t,o,a,e,r))}else return $u(s,g0(t,e,r))}function BV(t,e){if(!e.type.compatibleContent(t.type))throw new m0("Cannot join "+e.type.name+" onto "+t.type.name)}function yM(t,e,n){let r=t.node(n);return BV(r,e.node(n)),r}function Vu(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function om(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Vu(t.nodeAfter,r),s++));for(let a=s;a<o;a++)Vu(i.child(a),r);e&&e.depth==n&&e.textOffset&&Vu(e.nodeBefore,r)}function $u(t,e){return t.type.checkContent(e),t.copy(e)}function HV(t,e,n,r,i){let s=t.depth>i&&yM(t,e,i+1),o=r.depth>i&&yM(n,r,i+1),a=[];return om(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(BV(s,o),Vu($u(s,HV(t,e,n,r,i+1)),a)):(s&&Vu($u(s,g0(t,e,i+1)),a),om(e,n,i,a),o&&Vu($u(o,g0(n,r,i+1)),a)),om(r,null,i,a),new Ke(a)}function g0(t,e,n){let r=[];if(om(null,t,n,r),t.depth>n){let i=yM(t,e,n+1);Vu($u(i,g0(t,e,n+1)),r)}return om(e,null,n,r),new Ke(r)}function rEe(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(Ke.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class qm{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Mn.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new y0(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new qm(n,r,s)}static resolveCached(e,n){let r=nO.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else nO.set(e,r=new iEe);let i=r.elts[r.i]=qm.resolve(e,n);return r.i=(r.i+1)%sEe,i}}class iEe{constructor(){this.elts=[],this.i=0}}const sEe=12,nO=new WeakMap;class y0{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const oEe=Object.create(null);let Sc=class vM{constructor(e,n,r,i=Mn.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Ke.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&p0(this.attrs,n||e.defaultAttrs||oEe)&&Mn.sameSet(this.marks,r||Mn.none)}copy(e=null){return e==this.content?this:new vM(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new vM(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ut.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new ut(c,i.depth-o,s.depth-o)}replace(e,n,r){return nEe(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return qm.resolveCached(this,e)}resolveNoCache(e){return qm.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),VV(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Ke.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Mn.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Mn.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Ke.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Sc.prototype.text=void 0;class v0 extends Sc{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):VV(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new v0(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new v0(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function VV(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ld{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new aEe(e,n);if(r.next==null)return ld.empty;let i=$V(r);r.next&&r.err("Unexpected trailing text");let s=pEe(hEe(i));return mEe(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return Ke.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let p=s(d,a.concat(u));if(p)return p}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}ld.empty=new ld(!0);class aEe{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function $V(t){let e=[];do e.push(lEe(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function lEe(t){let e=[];do e.push(cEe(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function cEe(t){let e=fEe(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=uEe(t,e);else break;return e}function rO(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function uEe(t,e){let n=rO(t),r=n;return t.eat(",")&&(t.next!="}"?r=rO(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function dEe(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function fEe(t){if(t.eat("(")){let e=$V(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=dEe(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function hEe(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function WV(t,e){return e-t}function iO(t,e){let n=[];return r(e),n.sort(WV);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function pEe(t){let e=Object.create(null);return n(iO(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);iO(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new ld(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(WV);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function mEe(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function GV(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function qV(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function XV(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function KV(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new yEe(t,r,e[r]);return n}let sO=class YV{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=KV(e,r.attrs),this.defaultAttrs=GV(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ld.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:qV(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Sc(this,this.computeAttrs(e),Ke.from(n),Mn.setFrom(r))}createChecked(e=null,n,r){return n=Ke.from(n),this.checkContent(n),new Sc(this,this.computeAttrs(e),n,Mn.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Ke.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(Ke.empty,!0);return s?new Sc(this,e,n.append(s),Mn.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){XV(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Mn.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new YV(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function gEe(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class yEe{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?gEe(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class eb{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=KV(e,i.attrs),this.excluded=null;let s=GV(this.attrs);this.instance=s?new Mn(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Mn(this,qV(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new eb(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){XV(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class JV{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Dr.from(e.nodes),n.marks=Dr.from(e.marks||{}),this.nodes=sO.compile(this.spec.nodes,this),this.marks=eb.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=ld.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?oO(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:oO(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof sO){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new v0(r,r.defaultAttrs,e,Mn.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Sc.fromJSON(this,e)}markFromJSON(e){return Mn.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function oO(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function vEe(t){return t.tag!=null}function xEe(t){return t.style!=null}class _c{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(vEe(i))this.tags.push(i);else if(xEe(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new lO(this,n,!1);return r.addAll(e,Mn.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new lO(this,n,!0);return r.addAll(e,Mn.none,n.from,n.to),ut.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(SEe(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=cO(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=cO(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new _c(e,_c.schemaRules(e)))}}const QV={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},wEe={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ZV={ol:!0,ul:!0},Xm=1,xM=2,am=4;function aO(t,e,n){return e!=null?(e?Xm:0)|(e==="full"?xM:0):t&&t.whitespace=="pre"?Xm|xM:n&~am}class Rv{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Mn.none,this.match=s||(o&am?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ke.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Xm)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=Ke.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Ke.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!QV.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class lO{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=aO(null,n.preserveWhitespace,0)|(r?am:0);i?s=new Rv(i.type,i.attrs,Mn.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Rv(null,null,Mn.none,!0,null,o):s=new Rv(e.schema.topNodeType,null,Mn.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&xM?"full":this.localPreserveWS||(i.options&Xm)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;ZV.hasOwnProperty(o)&&this.parser.normalizeLists&&bEe(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:wEe.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(QV.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Mn.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):uO(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=aO(e,s,o.options);o.options&am&&o.content.length==0&&(a|=am);let l=Mn.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):uO(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Rv(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Xm)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function bEe(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&ZV.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function SEe(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function cO(t){let e={};for(let n in t)e[n]=t[n];return e}function uO(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class wd{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=g_(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=hx(g_(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&hx(g_(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return hx(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new wd(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=dO(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return dO(e.marks)}}function dO(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function g_(t){return t.document||window.document}const fO=new WeakMap;function _Ee(t){let e=fO.get(t);return e===void 0&&fO.set(t,e=EEe(t)),e}function EEe(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function hx(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=_Ee(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let p=d.indexOf(" ");p>0?l.setAttributeNS(d.slice(0,p),d.slice(p+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let p=e[d];if(p===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:m,contentDOM:x}=hx(t,p,n,r);if(l.appendChild(m),x){if(a)throw new RangeError("Multiple content holes");a=x}}}return{dom:l,contentDOM:a}}const e$=65535,t$=Math.pow(2,16);function CEe(t,e){return t+e*t$}function hO(t){return t&e$}function MEe(t){return(t-(t&e$))/t$}const n$=1,r$=2,px=4,i$=8;class wM{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&i$)>0}get deletedBefore(){return(this.delInfo&(n$|px))>0}get deletedAfter(){return(this.delInfo&(r$|px))>0}get deletedAcross(){return(this.delInfo&px)>0}}class ps{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&ps.empty)return ps.empty}recover(e){let n=0,r=hO(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+MEe(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(e<=d){let p=c?e==l?-1:e==d?1:n:n,m=l+i+(p<0?0:u);if(r)return m;let x=e==(n<0?l:d)?null:CEe(a/3,e-l),w=e==l?r$:e==d?n$:px;return(n<0?e!=l:e!=d)&&(w|=i$),new wM(m,w,x)}i+=u-c}return r?e+i:new wM(e+i,0,null)}touches(e,n){let r=0,i=hO(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new ps(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ps.empty:new ps(e<0?[0,-e,0]:[0,0,e])}}ps.empty=new ps([]);class Km{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Km(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Km;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new wM(e,i,null)}}const y_=Object.create(null);class ai{getMap(){return ps.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=y_[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in y_)throw new RangeError("Duplicate use of step JSON ID "+e);return y_[e]=n,n.prototype.jsonID=e,n}}class lr{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new lr(e,null)}static fail(e){return new lr(null,e)}static fromReplace(e,n,r,i){try{return lr.ok(e.replace(n,r,i))}catch(s){if(s instanceof m0)return lr.fail(s.message);throw s}}}function PR(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(PR(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return Ke.fromArray(r)}class lc extends ai{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new ut(PR(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return lr.fromReplace(e,this.from,this.to,s)}invert(){return new ra(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new lc(n.pos,r.pos,this.mark)}merge(e){return e instanceof lc&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new lc(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new lc(n.from,n.to,e.markFromJSON(n.mark))}}ai.jsonID("addMark",lc);class ra extends ai{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ut(PR(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return lr.fromReplace(e,this.from,this.to,r)}invert(){return new lc(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ra(n.pos,r.pos,this.mark)}merge(e){return e instanceof ra&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ra(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ra(n.from,n.to,e.markFromJSON(n.mark))}}ai.jsonID("removeMark",ra);class cc extends ai{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return lr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return lr.fromReplace(e,this.pos,this.pos+1,new ut(Ke.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new cc(this.pos,n.marks[i]);return new cc(this.pos,this.mark)}}return new cd(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new cc(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new cc(n.pos,e.markFromJSON(n.mark))}}ai.jsonID("addNodeMark",cc);class cd extends ai{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return lr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return lr.fromReplace(e,this.pos,this.pos+1,new ut(Ke.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new cc(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new cd(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new cd(n.pos,e.markFromJSON(n.mark))}}ai.jsonID("removeNodeMark",cd);class Sr extends ai{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&bM(e,this.from,this.to)?lr.fail("Structure replace would overwrite content"):lr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ps([this.from,this.to-this.from,this.slice.size])}invert(e){return new Sr(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Sr(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Sr)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ut.empty:new ut(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Sr(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ut.empty:new ut(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Sr(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Sr(n.from,n.to,ut.fromJSON(e,n.slice),!!n.structure)}}ai.jsonID("replace",Sr);class Er extends ai{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(bM(e,this.from,this.gapFrom)||bM(e,this.gapTo,this.to)))return lr.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return lr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?lr.fromReplace(e,this.from,this.to,r):lr.fail("Content does not fit in gap")}getMap(){return new ps([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Er(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Er(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Er(n.from,n.to,n.gapFrom,n.gapTo,ut.fromJSON(e,n.slice),n.insert,!!n.structure)}}ai.jsonID("replaceAround",Er);function bM(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function TEe(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let p=Math.max(c,e),m=Math.min(c+l.nodeSize,n),x=r.addToSet(d);for(let w=0;w<d.length;w++)d[w].isInSet(x)||(o&&o.to==p&&o.mark.eq(d[w])?o.to=m:i.push(o=new ra(p,m,d[w])));a&&a.to==p?a.to=m:s.push(a=new lc(p,m,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function AEe(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof eb){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],p;for(let m=0;m<i.length;m++){let x=i[m];x.step==s-1&&d.eq(i[m].style)&&(p=x)}p?(p.to=c,p.step=s):i.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new ra(o.from,o.to,o.style)))}function DR(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new Sr(a,u,ut.empty));else{r=d;for(let p=0;p<c.marks.length;p++)n.allowsMarkType(c.marks[p].type)||t.step(new ra(a,u,c.marks[p]));if(i&&c.isText&&n.whitespace!="pre"){let p,m=/\r?\n|\r/g,x;for(;p=m.exec(c.text);)x||(x=new ut(Ke.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new Sr(a+p.index,a+p.index+p[0].length,x))}}a=u}if(!r.validEnd){let l=r.fillBefore(Ke.empty,!0);t.replace(a,a,new ut(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function REe(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Vh(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!REe(i,s,o))break}return null}function NEe(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=Ke.empty,d=0;for(let x=s,w=!1;x>n;x--)w||r.index(x)>0?(w=!0,u=Ke.from(r.node(x).copy(u)),d++):l--;let p=Ke.empty,m=0;for(let x=s,w=!1;x>n;x--)w||i.after(x+1)<i.end(x)?(w=!0,p=Ke.from(i.node(x).copy(p)),m++):c++;t.step(new Er(l,c,o,a,new ut(u.append(p),d,m),u.size-d,!0))}function IR(t,e,n=null,r=t){let i=kEe(t,e),s=i&&PEe(r,e);return s?i.map(pO).concat({type:e,attrs:n}).concat(s.map(pO)):null}function pO(t){return{type:t,attrs:null}}function kEe(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function PEe(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function DEe(t,e,n){let r=Ke.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ke.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new Er(i,s,i,s,new ut(r,0,0),n.length,!0))}function IEe(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&LEe(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let m=r.whitespace=="pre",x=!!r.contentMatch.matchType(r.schema.linebreakReplacement);m&&!x?c=!1:!m&&x&&(c=!0)}c===!1&&o$(t,o,a,s),DR(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let u=t.mapping.slice(s),d=u.map(a,1),p=u.map(a+o.nodeSize,1);return t.step(new Er(d,p,d+1,p-1,new ut(Ke.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&s$(t,o,a,s),!1}})}function s$(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function o$(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function LEe(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function OEe(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Er(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new ut(Ke.from(o),0,0),1,!0))}function Qa(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let d=i.node(c),p=i.index(c);if(d.type.spec.isolating)return!1;let m=d.content.cutByIndex(p,d.childCount),x=r&&r[u+1];x&&(m=m.replaceChild(0,x.type.create(x.attrs)));let w=r&&r[u]||d;if(!d.canReplace(p+1,d.childCount)||!w.type.validContent(m))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function FEe(t,e,n=1,r){let i=t.doc.resolve(e),s=Ke.empty,o=Ke.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=Ke.from(i.node(a).copy(s));let u=r&&r[c];o=Ke.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new Sr(e,e,new ut(s.append(o),n,n),!0))}function Kc(t,e){let n=t.resolve(e),r=n.index();return a$(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function jEe(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function a$(t,e){return!!(t&&e&&!t.isLeaf&&jEe(t,e))}function tb(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&a$(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function UEe(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);o$(t,u.node(),u.before(),a)}o.inlineContent&&DR(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new Sr(c,l.map(e+n,-1),ut.empty,!0)),r===!0){let u=t.doc.resolve(c);s$(t,u.node(),u.before(),t.steps.length)}return t}function zEe(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function l$(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function nb(t,e,n=e,r=ut.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return c$(i,s,r)?new Sr(e,n,r):new BEe(i,s,r).fit()}function c$(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class BEe{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ke.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Ke.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new ut(s,o,a);return e>-1?new Er(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Sr(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=v_(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(Ke.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=v_(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ut(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=v_(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new ut(Bp(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new ut(Bp(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let w=0;w<s.length;w++)this.openFrontierNode(s[w]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:p}=this.frontier[n];if(i){for(let w=0;w<i.childCount;w++)u.push(i.child(w));d=d.matchFragment(i)}let m=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let w=a.child(c),v=d.matchType(w.type);if(!v)break;c++,(c>1||l==0||w.content.size)&&(d=v,u.push(u$(w.mark(p.allowedMarks(w.marks)),c==1?l:0,c==a.childCount?m:-1)))}let x=c==a.childCount;x||(m=-1),this.placed=Hp(this.placed,n,Ke.from(u)),this.frontier[n].match=d,x&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,v=a;w<m;w++){let y=v.lastChild;this.frontier.push({type:y.type,match:y.contentMatchAt(y.childCount)}),v=y.content}this.unplaced=x?e==0?ut.empty:new ut(Bp(o.content,e-1,1),e-1,m<0?o.openEnd:e-1):new ut(Bp(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!x_(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=x_(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=x_(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Hp(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Hp(this.placed,this.depth,Ke.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ke.empty,!0);n.childCount&&(this.placed=Hp(this.placed,this.frontier.length,n))}}function Bp(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Bp(t.firstChild.content,e-1,n)))}function Hp(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Hp(t.lastChild.content,e-1,n)))}function v_(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function u$(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,u$(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Ke.empty,!0)))),t.copy(r)}function x_(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!HEe(n,s.content,o)?a:null}function HEe(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function VEe(t){return t.spec.defining||t.spec.definingForContent}function $Ee(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(c$(i,s,r))return t.step(new Sr(e,n,r));let o=f$(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let p=i.depth,m=i.pos-1;p>0;p--,m--){let x=i.node(p).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;o.indexOf(p)>-1?a=p:i.before(p)==m&&o.splice(1,0,-p)}let l=o.indexOf(a),c=[],u=r.openStart;for(let p=r.content,m=0;;m++){let x=p.firstChild;if(c.push(x),m==r.openStart)break;p=x.content}for(let p=u-1;p>=0;p--){let m=c[p],x=VEe(m.type);if(x&&!m.sameMarkup(i.node(Math.abs(a)-1)))u=p;else if(x||!m.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let m=(p+u+1)%(r.openStart+1),x=c[m];if(x)for(let w=0;w<o.length;w++){let v=o[(w+l)%o.length],y=!0;v<0&&(y=!1,v=-v);let S=i.node(v-1),E=i.index(v-1);if(S.canReplaceWith(E,E,x.type,x.marks))return t.replace(i.before(v),y?s.after(v):n,new ut(d$(r.content,0,r.openStart,m),m,r.openEnd))}}let d=t.steps.length;for(let p=o.length-1;p>=0&&(t.replace(e,n,r),!(t.steps.length>d));p--){let m=o[p];m<0||(e=i.before(m),n=s.after(m))}}function d$(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(d$(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Ke.empty,!0))}return t}function WEe(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=zEe(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new ut(Ke.from(r),0,0))}function GEe(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=f$(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function f$(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class Hf extends ai{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return lr.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return lr.fromReplace(e,this.pos,this.pos+1,new ut(Ke.from(i),0,n.isLeaf?0:1))}getMap(){return ps.empty}invert(e){return new Hf(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Hf(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Hf(n.pos,n.attr,n.value)}}ai.jsonID("attr",Hf);class Ym extends ai{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return lr.ok(r)}getMap(){return ps.empty}invert(e){return new Ym(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ym(n.attr,n.value)}}ai.jsonID("docAttr",Ym);let yh=class extends Error{};yh=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};yh.prototype=Object.create(Error.prototype);yh.prototype.constructor=yh;yh.prototype.name="TransformError";class qEe{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Km}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new yh(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ut.empty){let i=nb(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new ut(Ke.from(r),0,0))}delete(e,n){return this.replace(e,n,ut.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return $Ee(this,e,n,r),this}replaceRangeWith(e,n,r){return WEe(this,e,n,r),this}deleteRange(e,n){return GEe(this,e,n),this}lift(e,n){return NEe(this,e,n),this}join(e,n=1){return UEe(this,e,n),this}wrap(e,n){return DEe(this,e,n),this}setBlockType(e,n=e,r,i=null){return IEe(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return OEe(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Hf(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ym(e,n)),this}addNodeMark(e,n){return this.step(new cc(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Mn)n.isInSet(r.marks)&&this.step(new cd(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new cd(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return FEe(this,e,n,r),this}addMark(e,n,r){return TEe(this,e,n,r),this}removeMark(e,n,r){return AEe(this,e,n,r),this}clearIncompatible(e,n,r){return DR(this,e,n,r),this}}const w_=Object.create(null);class Vt{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new XEe(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ut.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?ut.empty:n),a==0&&yO(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),yO(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Dt(e):cf(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?cf(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):cf(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new bs(e.node(0))}static atStart(e){return cf(e,e,0,0,1)||new bs(e)}static atEnd(e){return cf(e,e,e.content.size,e.childCount,-1)||new bs(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=w_[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in w_)throw new RangeError("Duplicate use of selection JSON ID "+e);return w_[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Dt.between(this.$anchor,this.$head).getBookmark()}}Vt.prototype.visible=!0;class XEe{constructor(e,n){this.$from=e,this.$to=n}}let mO=!1;function gO(t){!mO&&!t.parent.inlineContent&&(mO=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Dt extends Vt{constructor(e,n=e){gO(e),gO(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Vt.near(r);let i=e.resolve(n.map(this.anchor));return new Dt(i.parent.inlineContent?i:r,r)}replace(e,n=ut.empty){if(super.replace(e,n),n==ut.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Dt&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new rb(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Dt(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Vt.findFrom(n,r,!0)||Vt.findFrom(n,-r,!0);if(s)n=s.$head;else return Vt.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Vt.findFrom(e,-r,!0)||Vt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Dt(e,n)}}Vt.jsonID("text",Dt);class rb{constructor(e,n){this.anchor=e,this.head=n}map(e){return new rb(e.map(this.anchor),e.map(this.head))}resolve(e){return Dt.between(e.resolve(this.anchor),e.resolve(this.head))}}class At extends Vt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?Vt.near(s):new At(s)}content(){return new ut(Ke.from(this.node),0,0)}eq(e){return e instanceof At&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new LR(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new At(e.resolve(n.anchor))}static create(e,n){return new At(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}At.prototype.visible=!1;Vt.jsonID("node",At);class LR{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new rb(r,r):new LR(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&At.isSelectable(r)?new At(n):Vt.near(n)}}class bs extends Vt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ut.empty){if(n==ut.empty){e.delete(0,e.doc.content.size);let r=Vt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new bs(e)}map(e){return new bs(e)}eq(e){return e instanceof bs}getBookmark(){return KEe}}Vt.jsonID("all",bs);const KEe={map(){return this},resolve(t){return new bs(t)}};function cf(t,e,n,r,i,s=!1){if(e.inlineContent)return Dt.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&At.isSelectable(a))return At.create(t,n-(i<0?a.nodeSize:0))}else{let l=cf(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function yO(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Sr||i instanceof Er))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(Vt.near(t.doc.resolve(o),n))}const vO=1,Nv=2,xO=4;class YEe extends qEe{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|vO)&~Nv,this.storedMarks=null,this}get selectionSet(){return(this.updated&vO)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Nv,this}ensureMarks(e){return Mn.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Nv)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Nv,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Mn.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(Vt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=xO,this}get scrolledIntoView(){return(this.updated&xO)>0}}function wO(t,e){return!e||!t?t:t.bind(e)}class Vp{constructor(e,n,r){this.name=e,this.init=wO(n.init,r),this.apply=wO(n.apply,r)}}const JEe=[new Vp("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Vp("selection",{init(t,e){return t.selection||Vt.atStart(e.doc)},apply(t){return t.selection}}),new Vp("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Vp("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class b_{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=JEe.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Vp(r.key,r.spec.state,r))})}}class Cf{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Cf(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new YEe(this)}static create(e){let n=new b_(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Cf(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new b_(this.schema,e.plugins),r=n.fields,i=new Cf(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new b_(e.schema,e.plugins),s=new Cf(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Sc.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=Vt.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function h$(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=h$(i,e,{})),n[r]=i}return n}class Ai{constructor(e){this.spec=e,this.props={},e.props&&h$(e.props,this,this.props),this.key=e.key?e.key.key:p$("plugin")}getState(e){return e[this.key]}}const S_=Object.create(null);function p$(t){return t in S_?t+"$"+ ++S_[t]:(S_[t]=0,t+"$")}class Lo{constructor(e="key"){this.key=p$(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Lr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},vh=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let SM=null;const Ua=function(t,e,n){let r=SM||(SM=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},QEe=function(){SM=null},ud=function(t,e,n,r){return n&&(bO(t,e,n,r,-1)||bO(t,e,n,r,1))},ZEe=/^(img|br|input|textarea|hr)$/i;function bO(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:qs(t))){let o=t.parentNode;if(!o||o.nodeType!=1||jg(t)||ZEe.test(t.nodeName)||t.contentEditable=="false")return!1;e=Lr(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?qs(t):0}else return!1}}function qs(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function eCe(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=qs(t)}else if(t.parentNode&&!jg(t))e=Lr(t),t=t.parentNode;else return null}}function tCe(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!jg(t))e=Lr(t)+1,t=t.parentNode;else return null}}function nCe(t,e,n){for(let r=e==0,i=e==qs(t);r||i;){if(t==n)return!0;let s=Lr(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==qs(t)}}function jg(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const ib=function(t){return t.focusNode&&ud(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function _u(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function rCe(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function iCe(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(qs(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(qs(r.startContainer),r.startOffset)}}}const fa=typeof navigator<"u"?navigator:null,SO=typeof document<"u"?document:null,Yc=fa&&fa.userAgent||"",_M=/Edge\/(\d+)/.exec(Yc),m$=/MSIE \d/.exec(Yc),EM=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Yc),Xi=!!(m$||EM||_M),Ec=m$?document.documentMode:EM?+EM[1]:_M?+_M[1]:0,ko=!Xi&&/gecko\/(\d+)/i.test(Yc);ko&&+(/Firefox\/(\d+)/.exec(Yc)||[0,0])[1];const CM=!Xi&&/Chrome\/(\d+)/.exec(Yc),ri=!!CM,g$=CM?+CM[1]:0,bi=!Xi&&!!fa&&/Apple Computer/.test(fa.vendor),xh=bi&&(/Mobile\/\w+/.test(Yc)||!!fa&&fa.maxTouchPoints>2),Hs=xh||(fa?/Mac/.test(fa.platform):!1),sCe=fa?/Win/.test(fa.platform):!1,Xa=/Android \d/.test(Yc),Ug=!!SO&&"webkitFontSmoothing"in SO.documentElement.style,oCe=Ug?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function aCe(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function La(t,e){return typeof t=="number"?t:t[e]}function lCe(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function _O(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=vh(o);continue}let a=o,l=a==s.body,c=l?aCe(s):lCe(a),u=0,d=0;if(e.top<c.top+La(r,"top")?d=-(c.top-e.top+La(i,"top")):e.bottom>c.bottom-La(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+La(i,"top")-c.top:e.bottom-c.bottom+La(i,"bottom")),e.left<c.left+La(r,"left")?u=-(c.left-e.left+La(i,"left")):e.right>c.right-La(r,"right")&&(u=e.right-c.right+La(i,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let m=a.scrollLeft,x=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let w=a.scrollLeft-m,v=a.scrollTop-x;e={left:e.left-w,top:e.top-v,right:e.right-w,bottom:e.bottom-v}}let p=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(p))break;o=p=="absolute"?o.offsetParent:vh(o)}}function cCe(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:y$(t.dom)}}function y$(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=vh(r));return e}function uCe({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;v$(n,r==0?0:r-e)}function v$(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let nf=null;function dCe(t){if(t.setActive)return t.setActive();if(nf)return t.focus(nf);let e=y$(t);t.focus(nf==null?{get preventScroll(){return nf={preventScroll:!0},!0}}:void 0),nf||(nf=!1,v$(e,0))}function x$(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let p;if(u.nodeType==1)p=u.getClientRects();else if(u.nodeType==3)p=Ua(u).getClientRects();else continue;for(let m=0;m<p.length;m++){let x=p[m];if(x.top<=o&&x.bottom>=a){o=Math.max(x.bottom,o),a=Math.min(x.top,a);let w=x.left>e.left?x.left-e.left:x.right<e.left?e.left-x.right:0;if(w<r){n=u,r=w,i=w&&n.nodeType==3?{left:x.right<e.left?x.right:x.left,top:e.top}:e,u.nodeType==1&&w&&(s=d+(e.left>=(x.left+x.right)/2?1:0));continue}}else x.top>e.top&&!l&&x.left<=e.left&&x.right>=e.left&&(l=u,c={left:Math.max(x.left,Math.min(x.right,e.left)),top:x.top});!n&&(e.left>=x.right&&e.top>=x.top||e.left>=x.left&&e.top>=x.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?fCe(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:x$(n,i)}function fCe(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=Hl(r,1);if(s.top!=s.bottom&&OR(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function OR(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function hCe(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function pCe(t,e,n){let{node:r,offset:i}=x$(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function mCe(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function w$(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(OR(e,c))return w$(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function gCe(t,e){let n=t.dom.ownerDocument,r,i=0,s=iCe(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!OR(e,c)||(o=w$(t.dom,e,c),!o))return null}if(bi)for(let c=o;r&&c;c=vh(c))c.draggable&&(r=void 0);if(o=hCe(o,e),r){if(ko&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;Ug&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=mCe(t,r,i,e))}a==null&&(a=pCe(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function EO(t){return t.top<t.bottom||t.left<t.right}function Hl(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(EO(r))return r}return Array.prototype.find.call(n,EO)||t.getBoundingClientRect()}const yCe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function b$(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Ug||ko;if(r.nodeType==3)if(o&&(yCe.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Hl(Ua(r,i,i),n);if(ko&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Hl(Ua(r,i-1,i-1),-1);if(c.top==l.top){let u=Hl(Ua(r,i,i+1),-1);if(u.top!=l.top)return Np(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,Np(Hl(Ua(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==qs(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return __(l.getBoundingClientRect(),!1)}if(s==null&&i<qs(r)){let l=r.childNodes[i];if(l.nodeType==1)return __(l.getBoundingClientRect(),!0)}return __(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==qs(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Ua(l,qs(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Np(Hl(c,1),!1)}if(s==null&&i<qs(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Ua(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Np(Hl(c,-1),!0)}return Np(Hl(r.nodeType==3?Ua(r):r,-n),n>=0)}function Np(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function __(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function S$(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function vCe(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return S$(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=b$(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Ua(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const xCe=/[\u0590-\u08ac]/;function wCe(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return a?!xCe.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:S$(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),p=a.caretBidiLevel;a.modify("move",n,"character");let m=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:x,focusOffset:w}=t.domSelectionRange(),v=x&&!m.contains(x.nodeType==1?x:x.parentNode)||l==x&&c==w;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return p!=null&&(a.caretBidiLevel=p),v}):r.pos==r.start()||r.pos==r.end()}let CO=null,MO=null,TO=!1;function bCe(t,e,n){return CO==e&&MO==n?TO:(CO=e,MO=n,TO=n=="up"||n=="down"?vCe(t,e,n):wCe(t,e,n))}const Qs=0,AO=1,ku=2,ha=3;class zg{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Qs,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Lr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof E$){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof _$&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Lr(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Lr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let p=this.children[d-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=Lr(p.dom)+1;break}e-=p.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Lr(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let m=0,x=0;m<this.children.length;m++){let w=this.children[m],v=x+w.size;if(s>x&&o<v)return w.setSelection(e-x-w.border,n-x-w.border,r,i);x=v}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((ko||bi)&&e==n){let{node:m,offset:x}=a;if(m.nodeType==3){if(d=!!(x&&m.nodeValue[x-1]==`
`),d&&x==m.nodeValue.length)for(let w=m,v;w;w=w.parentNode){if(v=w.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:Lr(v)+1});break}let y=w.pmViewDesc;if(y&&y.node&&y.node.isBlock)break}}else{let w=m.childNodes[x-1];d=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(ko&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let m=u.focusNode.childNodes[u.focusOffset];m&&m.contentEditable=="false"&&(i=!0)}if(!(i||d&&bi)&&ud(a.node,a.offset,u.anchorNode,u.anchorOffset)&&ud(l.node,l.offset,u.focusNode,u.focusOffset))return;let p=!1;if((c.extend||e==n)&&!d){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),p=!0}catch{}}if(!p){if(e>n){let x=a;a=l,l=x}let m=document.createRange();m.setEnd(l.node,l.offset),m.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(m)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?ku:AO,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=ha:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ku:ha}r=o}this.dirty=ku}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?ku:AO;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class _$ extends zg{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Qs&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class SCe extends zg{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class dd extends zg{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=wd.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new dd(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&ha||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ha&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Qs){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Qs}}slice(e,n,r){let i=dd.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=TM(s,n,o,r)),e>0&&(s=TM(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Cc extends zg{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=wd.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let p=u;return u=T$(u,r,n),c?l=new _Ce(e,n,r,i,u,d||null,p,c,s,o+1):n.isText?new sb(e,n,r,i,u,p,s):new Cc(e,n,r,i,u,d||null,p,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ke.empty)}return e}matchesNode(e,n,r){return this.dirty==Qs&&e.eq(this.node)&&x0(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new CCe(this,o&&o.node,e);ACe(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Mn.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,p)=>{l.syncToMarks(c.marks,r,e);let m;l.findNodeMatch(c,u,d,p)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(m=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,m,e)||l.updateNextNode(c,u,d,e,p,i)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ku)&&(o&&this.protectLocalComposition(e,o),C$(this.contentDOM,this.children,e),xh&&RCe(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Dt)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=NCe(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new SCe(this,s,n,i);e.input.compositionNodes.push(o),this.children=TM(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==ha||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Qs}updateOuterDeco(e){if(x0(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=M$(this.dom,this.nodeDOM,MM(this.outerDeco,this.node,n),MM(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function RO(t,e,n,r,i){T$(r,e,t);let s=new Cc(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class sb extends Cc{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==ha||this.dirty!=Qs&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Qs||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Qs,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new sb(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=ha)}get domAtom(){return!1}isText(e){return this.node.text==e}}class E$ extends zg{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Qs&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class _Ce extends Cc{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==ha)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function C$(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=NO(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof dd){let l=r?r.previousSibling:t.lastChild;C$(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=NO(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const lm=function(t){t&&(this.nodeName=t)};lm.prototype=Object.create(null);const Pu=[new lm];function MM(t,e,n){if(t.length==0)return Pu;let r=n?Pu[0]:new lm,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new lm(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new lm(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function M$(t,e,n,r){if(n==Pu&&r==Pu)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Pu[0]),i=l}ECe(i,a||Pu[0],o)}return i}function ECe(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function T$(t,e,n){return M$(t,t,Pu,MM(e,n,t.nodeType!=1))}function x0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function NO(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class CCe{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=MCe(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Qs,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=dd.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==ha&&o.dom==o.contentDOM&&(o.dirty=ku),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Cc){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,p=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=ha&&x0(n,l.outerDeco));if(!p&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!p&&(d=this.recreateWrapper(l,e,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=ku,d.updateChildren(i,o+1),d.dirty=Qs),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!x0(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Cc.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=Cc.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new _$(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof dd;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof sb)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((bi||ri)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new E$(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function MCe(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof dd)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function TCe(t,e){return t.type.side-e.type.side}function ACe(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<i.length&&i[o].to==s;){let v=i[o++];v.widget&&(u?(d||(d=[u])).push(v):u=v)}if(u)if(d){d.sort(TCe);for(let v=0;v<d.length;v++)n(d[v],c,!!l)}else n(u,c,!!l);let p,m;if(l)m=-1,p=l,l=null;else if(c<t.childCount)m=c,p=t.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=s&&a.splice(v--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let x=s+p.nodeSize;if(p.isText){let v=x;o<i.length&&i[o].from<v&&(v=i[o].from);for(let y=0;y<a.length;y++)a[y].to<v&&(v=a[y].to);v<x&&(l=p.cut(v-s),p=p.cut(0,v-s),x=v,m=-1)}else for(;o<i.length&&i[o].to<x;)o++;let w=p.isInline&&!p.isLeaf?a.filter(v=>!v.inline):a.slice();r(p,w,e.forChild(s,p),m),s=x}}function RCe(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function NCe(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function TM(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function FR(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(ib(n)){for(l=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&At.isSelectable(d)&&i.parent&&!(d.isInline&&nCe(n.focusNode,n.focusOffset,i.dom))){let p=i.posBefore;c=new At(o==p?a:r.resolve(p))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,p=o;for(let m=0;m<n.rangeCount;m++){let x=n.getRangeAt(m);d=Math.min(d,t.docView.posFromDOM(x.startContainer,x.startOffset,1)),p=Math.max(p,t.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(d<0)return null;[l,o]=p==t.state.selection.anchor?[p,d]:[d,p],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=jR(t,u,a,d)}return c}function A$(t){return t.editable?t.hasFocus():N$(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Za(t,e=!1){let n=t.state.selection;if(R$(t,n),!!A$(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&ri){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ud(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)PCe(t);else{let{anchor:r,head:i}=n,s,o;kO&&!(n instanceof Dt)&&(n.$from.parent.inlineContent||(s=PO(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=PO(t,n.to))),t.docView.setSelection(r,i,t,e),kO&&(s&&DO(s),o&&DO(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&kCe(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const kO=bi||ri&&g$<63;function PO(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(bi&&i&&i.contentEditable=="false")return E_(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return E_(i);if(s)return E_(s)}}function E_(t){return t.contentEditable="true",bi&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function DO(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function kCe(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!A$(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function PCe(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Lr(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Xi&&Ec<=11&&(r.disabled=!0,r.disabled=!1)}function R$(t,e){if(e instanceof At){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(IO(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else IO(t)}function IO(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function jR(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Dt.between(e,n,r)}function LO(t){return t.editable&&!t.hasFocus()?!1:N$(t)}function N$(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function DCe(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return ud(e.node,e.offset,n.anchorNode,n.anchorOffset)}function AM(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Vt.findFrom(s,e)}function ql(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function OO(t,e,n){let r=t.state.selection;if(r instanceof Dt)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return ql(t,new Dt(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=AM(t.state,e);return i&&i instanceof At?ql(t,i):!1}else if(!(Hs&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?At.isSelectable(s)?ql(t,new At(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Ug?ql(t,new Dt(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof At&&r.node.isInline)return ql(t,new Dt(e>0?r.$to:r.$from));{let i=AM(t.state,e);return i?ql(t,i):!1}}}function w0(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function cm(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function rf(t,e){return e<0?ICe(t):LCe(t)}function ICe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(ko&&n.nodeType==1&&r<w0(n)&&cm(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(cm(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(k$(n))break;{let a=n.previousSibling;for(;a&&cm(a,-1);)i=n.parentNode,s=Lr(a),a=a.previousSibling;if(a)n=a,r=w0(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?RM(t,n,r):i&&RM(t,i,s)}function LCe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=w0(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(cm(a,1))s=n,o=++r;else break}else{if(k$(n))break;{let a=n.nextSibling;for(;a&&cm(a,1);)s=a.parentNode,o=Lr(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=w0(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&RM(t,s,o)}function k$(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function OCe(t,e){for(;t&&e==t.childNodes.length&&!jg(t);)e=Lr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function FCe(t,e){for(;t&&!e&&!jg(t);)e=Lr(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function RM(t,e,n){if(e.nodeType!=3){let s,o;(o=OCe(e,n))?(e=o,n=0):(s=FCe(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(ib(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Za(t)},50)}function FO(t,e){let n=t.state.doc.resolve(e);if(!(ri||sCe)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function jO(t,e,n){let r=t.state.selection;if(r instanceof Dt&&!r.empty||n.indexOf("s")>-1||Hs&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=AM(t.state,e);if(o&&o instanceof At)return ql(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof bs?Vt.near(o,e):Vt.findFrom(o,e);return a?ql(t,a):!1}return!1}function UO(t,e){if(!(t.state.selection instanceof Dt))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function zO(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function jCe(t){if(!bi||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;zO(t,r,"true"),setTimeout(()=>zO(t,r,"false"),20)}return!1}function UCe(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function zCe(t,e){let n=e.keyCode,r=UCe(e);if(n==8||Hs&&n==72&&r=="c")return UO(t,-1)||rf(t,-1);if(n==46&&!e.shiftKey||Hs&&n==68&&r=="c")return UO(t,1)||rf(t,1);if(n==13||n==27)return!0;if(n==37||Hs&&n==66&&r=="c"){let i=n==37?FO(t,t.state.selection.from)=="ltr"?-1:1:-1;return OO(t,i,r)||rf(t,i)}else if(n==39||Hs&&n==70&&r=="c"){let i=n==39?FO(t,t.state.selection.from)=="ltr"?1:-1:1;return OO(t,i,r)||rf(t,i)}else{if(n==38||Hs&&n==80&&r=="c")return jO(t,-1,r)||rf(t,-1);if(n==40||Hs&&n==78&&r=="c")return jCe(t)||jO(t,1,r)||rf(t,1);if(r==(Hs?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function UR(t,e){t.someProp("transformCopied",m=>{e=m(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let m=r.firstChild;n.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),r=m.content}let o=t.someProp("clipboardSerializer")||wd.fromSchema(t.state.schema),a=F$(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=O$[c.nodeName.toLowerCase()]);){for(let m=u.length-1;m>=0;m--){let x=a.createElement(u[m]);for(;l.firstChild;)x.appendChild(l.firstChild);l.appendChild(x),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let p=t.someProp("clipboardTextSerializer",m=>m(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:p,slice:e}}function P$(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",p=>{e=p(e,s||r,t)}),s)return e?new ut(Ke.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):ut.empty;let d=t.someProp("clipboardTextParser",p=>p(e,i,r,t));if(d)a=d;else{let p=i.marks(),{schema:m}=t.state,x=wd.fromSchema(m);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let v=o.appendChild(document.createElement("p"));w&&v.appendChild(x.serializeNode(m.text(w,p)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=$Ce(n),Ug&&WCe(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let p=o.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;o=p}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||_c.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!BCe.test(p.parentNode.nodeName)?{ignore:!0}:null}})),u)a=GCe(BO(a,+u[1],+u[2]),u[4]);else if(a=ut.maxOpen(HCe(a.content,i),!0),a.openStart||a.openEnd){let d=0,p=0;for(let m=a.content.firstChild;d<a.openStart&&!m.type.spec.isolating;d++,m=m.firstChild);for(let m=a.content.lastChild;p<a.openEnd&&!m.type.spec.isolating;p++,m=m.lastChild);a=BO(a,d,p)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const BCe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function HCe(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&I$(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=L$(o[o.length-1],s.length));let u=D$(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return Ke.from(o)}return t}function D$(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Ke.from(t));return t}function I$(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=I$(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Ke.from(D$(n,t,i+1))))}}function L$(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,L$(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Ke.empty,!0);return t.copy(n.append(r))}function NM(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=NM(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Ke.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function BO(t,e,n){return e<t.openStart&&(t=new ut(NM(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ut(NM(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const O$={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let HO=null;function F$(){return HO||(HO=document.implementation.createHTMLDocument("title"))}let C_=null;function VCe(t){let e=window.trustedTypes;return e?(C_||(C_=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),C_.createHTML(t)):t}function $Ce(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=F$().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&O$[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=VCe(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function WCe(t){let e=t.querySelectorAll(ri?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function GCe(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=Ke.from(l.create(r[a+1],i)),s++,o++}return new ut(i,s,o)}const Si={},_i={},qCe={touchstart:!0,touchmove:!0};class XCe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function KCe(t){for(let e in Si){let n=Si[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{JCe(t,r)&&!zR(t,r)&&(t.editable||!(r.type in _i))&&n(t,r)},qCe[e]?{passive:!0}:void 0)}bi&&t.dom.addEventListener("input",()=>null),kM(t)}function uc(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function YCe(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function kM(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>zR(t,r))})}function zR(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function JCe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function QCe(t,e){!zR(t,e)&&Si[e.type]&&(t.editable||!(e.type in _i))&&Si[e.type](t,e)}_i.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!U$(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Xa&&ri&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),xh&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,_u(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||zCe(t,n)?n.preventDefault():uc(t,"key")};_i.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};_i.keypress=(t,e)=>{let n=e;if(U$(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Hs&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Dt)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function ob(t){return{left:t.clientX,top:t.clientY}}function ZCe(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function BR(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Vf(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function eMe(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&At.isSelectable(r)?(Vf(t,new At(n)),!0):!1}function tMe(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof At&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(At.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Vf(t,At.create(t.state.doc,i)),!0):!1}function nMe(t,e,n,r,i){return BR(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?tMe(t,n):eMe(t,n))}function rMe(t,e,n,r){return BR(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function iMe(t,e,n,r){return BR(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||sMe(t,n,r)}function sMe(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Vf(t,Dt.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Vf(t,Dt.create(r,a+1,a+1+o.content.size));else if(At.isSelectable(o))Vf(t,At.create(r,a));else continue;return!0}}function HR(t){return b0(t)}const j$=Hs?"metaKey":"ctrlKey";Si.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=HR(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&ZCe(n,t.input.lastClick)&&!n[j$]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(ob(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new oMe(t,o,n,!!r)):(s=="doubleClick"?rMe:iMe)(t,o.pos,o.inside,n)?n.preventDefault():uc(t,"pointer"))};class oMe{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[j$],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof At&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),uc(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Za(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(ob(e))),this.updateAllowDefault(e),this.allowDefault||!n?uc(this.view,"pointer"):nMe(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||bi&&this.mightDrag&&!this.mightDrag.node.isAtom||ri&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Vf(this.view,Vt.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):uc(this.view,"pointer")}move(e){this.updateAllowDefault(e),uc(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Si.touchstart=t=>{t.input.lastTouch=Date.now(),HR(t),uc(t,"pointer")};Si.touchmove=t=>{t.input.lastTouch=Date.now(),uc(t,"pointer")};Si.contextmenu=t=>HR(t);function U$(t,e){return t.composing?!0:bi&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const aMe=Xa?5e3:-1;_i.compositionstart=_i.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Dt&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),b0(t,!0),t.markCursor=null;else if(b0(t,!e.selection.empty),ko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}z$(t,aMe)};_i.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,z$(t,20))};function z$(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>b0(t),e))}function B$(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=cMe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function lMe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=eCe(e.focusNode,e.focusOffset),r=tCe(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function cMe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function b0(t,e=!1){if(!(Xa&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),B$(t),e||t.docView&&t.docView.dirty){let n=FR(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function uMe(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Jm=Xi&&Ec<15||xh&&oCe<604;Si.copy=_i.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Jm?null:n.clipboardData,o=r.content(),{dom:a,text:l}=UR(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):uMe(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function dMe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function fMe(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Qm(t,r.value,null,i,e):Qm(t,r.textContent,r.innerHTML,i,e)},50)}function Qm(t,e,n,r,i){let s=P$(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||ut.empty)))return!0;if(!s)return!1;let o=dMe(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function H$(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}_i.paste=(t,e)=>{let n=e;if(t.composing&&!Xa)return;let r=Jm?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Qm(t,H$(r),r.getData("text/html"),i,n)?n.preventDefault():fMe(t,n)};class V${constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const hMe=Hs?"altKey":"ctrlKey";function $$(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[hMe]}Si.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(ob(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof At?i.to-1:i.to))){if(r&&r.mightDrag)o=At.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=At.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:u}=UR(t,a);(!n.dataTransfer.files.length||!ri||g$>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Jm?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Jm||n.dataTransfer.setData("text/plain",c),t.dragging=new V$(u,$$(t,n),o)};Si.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};_i.dragover=_i.dragenter=(t,e)=>e.preventDefault();_i.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(ob(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",x=>{o=x(o,t)}):o=P$(t,H$(n.dataTransfer),Jm?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&$$(t,n));if(t.someProp("handleDrop",x=>x(t,n,o||ut.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?l$(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:x}=r;x?x.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,p=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(p))return;let m=c.doc.resolve(u);if(d&&At.isSelectable(o.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new At(m));else{let x=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((w,v,y,S)=>x=S),c.setSelection(jR(t,m,c.doc.resolve(x)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Si.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Za(t)},20))};Si.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Si.beforeinput=(t,e)=>{if(ri&&Xa&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,_u(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in _i)Si[t]=_i[t];function Zm(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class S0{constructor(e,n){this.toDOM=e,this.spec=n||Wu,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new gs(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof S0&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Zm(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Mc{constructor(e,n){this.attrs=e,this.spec=n||Wu}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new gs(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Mc&&Zm(this.attrs,e.attrs)&&Zm(this.spec,e.spec)}static is(e){return e.type instanceof Mc}destroy(){}}class VR{constructor(e,n){this.attrs=e,this.spec=n||Wu}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new gs(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof VR&&Zm(this.attrs,e.attrs)&&Zm(this.spec,e.spec)}destroy(){}}class gs{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new gs(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new gs(e,e,new S0(n,r))}static inline(e,n,r,i){return new gs(e,n,new Mc(r,i))}static node(e,n,r,i){return new gs(e,n,new VR(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Mc}get widget(){return this.type instanceof S0}}const uf=[],Wu={};class or{constructor(e,n){this.local=e.length?e:uf,this.children=n.length?n:uf}static create(e,n){return n.length?_0(n,e,0,Wu):Zr}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==Zr||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Wu)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?pMe(this.children,o||[],e,n,r,i,s):o?new or(o.sort(Gu),uf):Zr}add(e,n){return n.length?this==Zr?or.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=G$(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,_0(u,a,c+1,Wu)),s+=3}});let o=W$(s?q$(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new or(o.length?this.local.concat(o).sort(Gu):this.local,i||this.children)}remove(e){return e.length==0||this==Zr?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=Zr?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new or(i,r):Zr}forChild(e,n){if(this==Zr)return this;if(n.isLeaf)return or.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Mc){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new or(i.sort(Gu),uf);return r?new Ql([a,r]):a}return r||Zr}eq(e){if(this==e)return!0;if(!(e instanceof or)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return $R(this.localsInner(e))}localsInner(e){if(this==Zr)return uf;if(e.inlineContent||!this.local.some(Mc.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Mc||n.push(this.local[r]);return n}forEachSet(e){e(this)}}or.empty=new or([],[]);or.removeOverlap=$R;const Zr=or.empty;class Ql{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,Wu));return Ql.from(r)}forChild(e,n){if(n.isLeaf)return or.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Zr&&(s instanceof Ql?r=r.concat(s.members):r.push(s))}return Ql.from(r)}eq(e){if(!(e instanceof Ql)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?$R(r?n:n.sort(Gu)):uf}static from(e){switch(e.length){case 0:return Zr;case 1:return e[0];default:return new Ql(e.every(n=>n instanceof or)?e:e.reduce((n,r)=>n.concat(r instanceof or?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function pMe(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((p,m,x,w)=>{let v=w-x-(m-p);for(let y=0;y<a.length;y+=3){let S=a[y+1];if(S<0||p>S+u-d)continue;let E=a[y]+u-d;m>=E?a[y+1]=p<=E?-2:-1:p>=u&&v&&(a[y]+=v,a[y+1]+=v)}d+=v}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let p=n.map(t[c+1]+s,-1),m=p-i,{index:x,offset:w}=r.content.findIndex(d),v=r.maybeChild(x);if(v&&w==d&&w+v.nodeSize==m){let y=a[c+2].mapInner(n,v,u+1,t[c]+s+1,o);y!=Zr?(a[c]=d,a[c+1]=m,a[c+2]=y):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=mMe(a,t,e,n,i,s,o),u=_0(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,p=0;d<u.children.length;d+=3){let m=u.children[d];for(;p<a.length&&a[p]<m;)p+=3;a.splice(p,0,u.children[d],u.children[d+1],u.children[d+2])}}return new or(e.sort(Gu),a)}function W$(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new gs(i.from+e,i.to+e,i.type))}return n}function mMe(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function G$(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function q$(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function _0(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=G$(t,a,l+n);if(c){s=!0;let u=_0(c,a,n+l+1,r);u!=Zr&&i.push(l,l+a.nodeSize,u)}});let o=W$(s?q$(t):t,-n).sort(Gu);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new or(o,i):Zr}function Gu(t,e){return t.from-e.from||t.to-e.to}function $R(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),VO(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),VO(e,i,r.copy(s.from,r.to)));break}}}return e}function VO(t,e,n){for(;e<t.length&&Gu(n,t[e])>0;)e++;t.splice(e,0,n)}function M_(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Zr&&e.push(r)}),t.cursorWrapper&&e.push(or.create(t.state.doc,[t.cursorWrapper.deco])),Ql.from(e)}const gMe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},yMe=Xi&&Ec<=11;class vMe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class xMe{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new vMe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Xi&&Ec<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),yMe&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,gMe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(LO(this.view)){if(this.suppressingSelectionUpdates)return Za(this.view);if(Xi&&Ec<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ud(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=vh(s))n.add(s);for(let s=e.anchorNode;s;s=vh(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&LO(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(ko&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,p]=u;d.parentNode&&d.parentNode.parentNode==p.parentNode?p.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let p of u){let m=p.parentNode;m&&m.nodeName=="LI"&&(!d||SMe(e,d)!=m)&&p.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&ib(r)&&(c=FR(e))&&c.eq(Vt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Za(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),wMe(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Za(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Xi&&Ec<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:p}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(s=p)}let o=i&&i.parentNode==e.target?Lr(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Lr(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let $O=new WeakMap,WO=!1;function wMe(t){if(!$O.has(t)&&($O.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ko,WO)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),WO=!0}}function GO(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return ud(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function bMe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return GO(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?GO(t,n):null}function SMe(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function _Me(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],ib(l)||c.push({node:l.focusNode,offset:l.focusOffset})),ri&&t.input.lastKeyCode===8)for(let v=s;v>i;v--){let y=r.childNodes[v-1],S=y.pmViewDesc;if(y.nodeName=="BR"&&!S){s=v;break}if(!S||S.size)break}let d=t.state.doc,p=t.someProp("domParser")||_c.fromSchema(t.state.schema),m=d.resolve(o),x=null,w=p.parse(r,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:i,to:s,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:EMe,context:m});if(c&&c[0].pos!=null){let v=c[0].pos,y=c[1]&&c[1].pos;y==null&&(y=v),x={anchor:v+o,head:y+o}}return{doc:w,sel:x,from:o,to:a}}function EMe(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(bi&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||bi&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const CMe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function MMe(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let R=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,P=FR(t,R);if(P&&!t.state.selection.eq(P)){if(ri&&Xa&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",L=>L(t,_u(13,"Enter"))))return;let M=t.state.tr.setSelection(P);R=="pointer"?M.setMeta("pointer",!0):R=="key"&&M.scrollIntoView(),s&&M.setMeta("composition",s),t.dispatch(M)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=_Me(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),p,m;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(p=t.state.selection.to,m="end"):(p=t.state.selection.from,m="start"),t.input.lastKeyCode=null;let x=RMe(d.content,c.doc.content,c.from,p,m);if(x&&t.input.domChangeCount++,(xh&&t.input.lastIOSEnter>Date.now()-225||Xa)&&i.some(R=>R.nodeType==1&&!CMe.test(R.nodeName))&&(!x||x.endA>=x.endB)&&t.someProp("handleKeyDown",R=>R(t,_u(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!x)if(r&&l instanceof Dt&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))x={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let R=qO(t,t.state.doc,c.sel);if(R&&!R.eq(t.state.selection)){let P=t.state.tr.setSelection(R);s&&P.setMeta("composition",s),t.dispatch(P)}}return}t.state.selection.from<t.state.selection.to&&x.start==x.endB&&t.state.selection instanceof Dt&&(x.start>t.state.selection.from&&x.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?x.start=t.state.selection.from:x.endA<t.state.selection.to&&x.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(x.endB+=t.state.selection.to-x.endA,x.endA=t.state.selection.to)),Xi&&Ec<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>c.from&&c.doc.textBetween(x.start-c.from-1,x.start-c.from+1)=="  "&&(x.start--,x.endA--,x.endB--);let w=c.doc.resolveNoCache(x.start-c.from),v=c.doc.resolveNoCache(x.endB-c.from),y=u.resolve(x.start),S=w.sameParent(v)&&w.parent.inlineContent&&y.end()>=x.endA,E;if((xh&&t.input.lastIOSEnter>Date.now()-225&&(!S||i.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!S&&w.pos<c.doc.content.size&&(!w.sameParent(v)||!w.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(w.pos,v.pos,"",""))&&(E=Vt.findFrom(c.doc.resolve(w.pos+1),1,!0))&&E.head>w.pos)&&t.someProp("handleKeyDown",R=>R(t,_u(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>x.start&&AMe(u,x.start,x.endA,w,v)&&t.someProp("handleKeyDown",R=>R(t,_u(8,"Backspace")))){Xa&&ri&&t.domObserver.suppressSelectionUpdates();return}ri&&x.endB==x.start&&(t.input.lastChromeDelete=Date.now()),Xa&&!S&&w.start()!=v.start()&&v.parentOffset==0&&w.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==x.endA&&(x.endB-=2,v=c.doc.resolveNoCache(x.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(R){return R(t,_u(13,"Enter"))})},20));let C=x.start,A=x.endA,T=R=>{let P=R||t.state.tr.replace(C,A,c.doc.slice(x.start-c.from,x.endB-c.from));if(c.sel){let M=qO(t,P.doc,c.sel);M&&!(ri&&t.composing&&M.empty&&(x.start!=x.endB||t.input.lastChromeDelete<Date.now()-100)&&(M.head==C||M.head==P.mapping.map(A)-1)||Xi&&M.empty&&M.head==C)&&P.setSelection(M)}return s&&P.setMeta("composition",s),P.scrollIntoView()},k;if(S){if(w.pos==v.pos){Xi&&Ec<=11&&w.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Za(t),20));let R=T(t.state.tr.delete(C,A)),P=u.resolve(x.start).marksAcross(u.resolve(x.endA));P&&R.ensureMarks(P),t.dispatch(R)}else if(x.endA==x.endB&&(k=TMe(w.parent.content.cut(w.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,x.endA-y.start())))){let R=T(t.state.tr);k.type=="add"?R.addMark(C,A,k.mark):R.removeMark(C,A,k.mark),t.dispatch(R)}else if(w.parent.child(w.index()).isText&&w.index()==v.index()-(v.textOffset?0:1)){let R=w.parent.textBetween(w.parentOffset,v.parentOffset),P=()=>T(t.state.tr.insertText(R,C,A));t.someProp("handleTextInput",M=>M(t,C,A,R,P))||t.dispatch(P())}}else t.dispatch(T())}function qO(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:jR(t,e.resolve(n.anchor),e.resolve(n.head))}function TMe(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(Ke.from(c).eq(t))return{mark:a,type:o}}function AMe(t,e,n,r,i){if(n-e<=i.pos-r.pos||T_(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(T_(s,!0,!0));return!o.parent.isTextblock||o.pos>n||T_(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function T_(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function RMe(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&XO(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&XO(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function XO(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class X${constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new XCe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(ZO),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=JO(this),YO(this),this.nodeViews=QO(this),this.docView=RO(this.state.doc,KO(this),M_(this),this.dom,this),this.domObserver=new xMe(this,(r,i,s,o)=>MMe(this,r,i,s,o)),this.domObserver.start(),KCe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&kM(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(ZO),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(B$(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let m=QO(this);kMe(m,this.nodeViews)&&(this.nodeViews=m,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&kM(this),this.editable=JO(this),YO(this);let l=M_(this),c=KO(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(i.selection))&&(o=!0);let p=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&cCe(this);if(o){this.domObserver.stop();let m=d&&(Xi||ri)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&NMe(i.selection,e.selection);if(d){let x=ri?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=lMe(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=RO(e.doc,c,l,this.dom,this)),x&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&DCe(this))?Za(this,m):(R$(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():p&&uCe(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof At){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&_O(this,n.getBoundingClientRect(),e)}else _O(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new V$(e.slice,e.move,i<0?void 0:At.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Xi){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&dCe(this.dom),Za(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return gCe(this,e)}coordsAtPos(e,n=1){return b$(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return bCe(this,n||this.state,e)}pasteHTML(e,n){return Qm(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Qm(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return UR(this,e)}destroy(){this.docView&&(YCe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],M_(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,QEe())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return QCe(this,e)}domSelectionRange(){let e=this.domSelection();return e?bi&&this.root.nodeType===11&&rCe(this.dom.ownerDocument)==this.dom&&bMe(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}X$.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function KO(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[gs.node(0,t.state.doc.content.size,e)]}function YO(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:gs.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function JO(t){return!t.someProp("editable",e=>e(t.state)===!1)}function NMe(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function QO(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function kMe(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function ZO(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Lc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},E0={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},PMe=typeof navigator<"u"&&/Mac/.test(navigator.platform),DMe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Or=0;Or<10;Or++)Lc[48+Or]=Lc[96+Or]=String(Or);for(var Or=1;Or<=24;Or++)Lc[Or+111]="F"+Or;for(var Or=65;Or<=90;Or++)Lc[Or]=String.fromCharCode(Or+32),E0[Or]=String.fromCharCode(Or);for(var A_ in Lc)E0.hasOwnProperty(A_)||(E0[A_]=Lc[A_]);function IMe(t){var e=PMe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||DMe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?E0:Lc)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const LMe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),OMe=typeof navigator<"u"&&/Win/.test(navigator.platform);function FMe(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))LMe?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function jMe(t){let e=Object.create(null);for(let n in t)e[FMe(n)]=t[n];return e}function R_(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function UMe(t){return new Ai({props:{handleKeyDown:K$(t)}})}function K$(t){let e=jMe(t);return function(n,r){let i=IMe(r),s,o=e[R_(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[R_(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(OMe&&r.ctrlKey&&r.altKey)&&(s=Lc[r.keyCode])&&s!=i){let a=e[R_(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const WR=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function Y$(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const J$=(t,e,n)=>{let r=Y$(t,n);if(!r)return!1;let i=GR(r);if(!i){let o=r.blockRange(),a=o&&Vh(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(oW(t,i,e,-1))return!0;if(r.parent.content.size==0&&(wh(s,"end")||At.isSelectable(s)))for(let o=r.depth;;o--){let a=nb(t.doc,r.before(o),r.after(o),ut.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(wh(s,"end")?Vt.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):At.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},zMe=(t,e,n)=>{let r=Y$(t,n);if(!r)return!1;let i=GR(r);return i?Q$(t,i,e):!1},BMe=(t,e,n)=>{let r=eW(t,n);if(!r)return!1;let i=qR(r);return i?Q$(t,i,e):!1};function Q$(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=nb(t.doc,s,l,ut.empty);if(!c||c.from!=s||c instanceof Sr&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(Dt.create(u.doc,s)),n(u.scrollIntoView())}return!0}function wh(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Z$=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=GR(r)}let o=s&&s.nodeBefore;return!o||!At.isSelectable(o)?!1:(e&&e(t.tr.setSelection(At.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function GR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function eW(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const tW=(t,e,n)=>{let r=eW(t,n);if(!r)return!1;let i=qR(r);if(!i)return!1;let s=i.nodeAfter;if(oW(t,i,e,1))return!0;if(r.parent.content.size==0&&(wh(s,"start")||At.isSelectable(s))){let o=nb(t.doc,r.before(),r.after(),ut.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(wh(s,"start")?Vt.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):At.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},nW=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=qR(r)}let o=s&&s.nodeAfter;return!o||!At.isSelectable(o)?!1:(e&&e(t.tr.setSelection(At.create(t.doc,s.pos)).scrollIntoView()),!0)};function qR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const HMe=(t,e)=>{let n=t.selection,r=n instanceof At,i;if(r){if(n.node.isTextblock||!Kc(t.doc,n.from))return!1;i=n.from}else if(i=tb(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(At.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},VMe=(t,e)=>{let n=t.selection,r;if(n instanceof At){if(n.node.isTextblock||!Kc(t.doc,n.to))return!1;r=n.to}else if(r=tb(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},$Me=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&Vh(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},rW=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function XR(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const WMe=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=XR(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Vt.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},iW=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof bs||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=XR(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Dt.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},sW=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Qa(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Vh(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function GMe(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof At&&e.selection.node.isBlock)return!r.parentOffset||!Qa(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let m=r.depth;;m--)if(r.node(m).isBlock){l=r.end(m)==r.pos+(r.depth-m),c=r.start(m)==r.pos-(r.depth-m),a=XR(r.node(m-1).contentMatchAt(r.indexAfter(m-1))),s.unshift(l&&a?{type:a}:null),o=m;break}else{if(m==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof Dt||e.selection instanceof bs)&&u.deleteSelection();let d=u.mapping.map(r.pos),p=Qa(u.doc,d,s.length,s);if(p||(s[0]=a?{type:a}:null,p=Qa(u.doc,d,s.length,s)),!p)return!1;if(u.split(d,s.length,s),!l&&c&&r.node(o).type!=a){let m=u.mapping.map(r.before(o)),x=u.doc.resolve(m);a&&r.node(o-1).canReplaceWith(x.index(),x.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(o)),a)}return n&&n(u.scrollIntoView()),!0}}const qMe=GMe(),XMe=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(At.create(t.doc,i))),!0)};function KMe(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Kc(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function oW(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&KMe(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let m=e.pos+s.nodeSize,x=Ke.empty;for(let y=o.length-1;y>=0;y--)x=Ke.from(o[y].create(null,x));x=Ke.from(i.copy(x));let w=t.tr.step(new Er(e.pos-1,m,e.pos,m,new ut(x,1,0),o.length,!0)),v=w.doc.resolve(m+2*o.length);v.nodeAfter&&v.nodeAfter.type==i.type&&Kc(w.doc,v.pos)&&w.join(v.pos),n(w.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:Vt.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),p=d&&Vh(d);if(p!=null&&p>=e.depth)return n&&n(t.tr.lift(d,p).scrollIntoView()),!0;if(c&&wh(s,"start",!0)&&wh(i,"end")){let m=i,x=[];for(;x.push(m),!m.isTextblock;)m=m.lastChild;let w=s,v=1;for(;!w.isTextblock;w=w.firstChild)v++;if(m.canReplace(m.childCount,m.childCount,w.content)){if(n){let y=Ke.empty;for(let E=x.length-1;E>=0;E--)y=Ke.from(x[E].copy(y));let S=t.tr.step(new Er(e.pos-x.length,e.pos+s.nodeSize,e.pos+v,e.pos+s.nodeSize-v,new ut(y,x.length,0),0,!0));n(S.scrollIntoView())}return!0}}return!1}function aW(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Dt.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const YMe=aW(-1),JMe=aW(1);function QMe(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&IR(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function eF(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}function KR(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}KR(WR,J$,Z$);KR(WR,tW,nW);KR(rW,iW,sW,qMe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function ZMe(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return eTe(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function eTe(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new y0(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new y0(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=IR(s,n,r,e);return a?(t&&tTe(t,e,a,i,n),!0):!1}function tTe(t,e,n,r,i){let s=Ke.empty;for(let u=n.length-1;u>=0;u--)s=Ke.from(n[u].type.create(n[u].attrs,s));t.step(new Er(e.start-(r?2:0),e.end,e.start,e.end,new ut(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,p=!0;u<d;u++,p=!1)!p&&Qa(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function nTe(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?rTe(e,n,t,s):iTe(e,n,s):!0:!1}}function rTe(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Er(s-1,o,s,o,new ut(Ke.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new y0(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=Vh(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return Kc(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function iTe(t,e,n){let r=t.tr,i=n.parent;for(let m=n.end,x=n.endIndex-1,w=n.startIndex;x>w;x--)m-=i.child(x).nodeSize,r.delete(m-1,m+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?Ke.empty:Ke.from(i))))return!1;let d=s.pos,p=d+o.nodeSize;return r.step(new Er(d-(a?1:0),p+(l?1:0),d+1,p-1,new ut((a?Ke.empty:Ke.from(i.copy(Ke.empty))).append(l?Ke.empty:Ke.from(i.copy(Ke.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function sTe(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=Ke.from(c?t.create():null),d=new ut(Ke.from(t.create(null,Ke.from(a.type.create(null,u)))),c?3:1,0),p=s.start,m=s.end;n(e.tr.step(new Er(p-(c?3:1),m,p,m,d,1,!0)).scrollIntoView())}return!0}}function ab(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class lb{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(p=>p===!0)),d={...Object.fromEntries(Object.entries(r).map(([p,m])=>[p,(...w)=>{const v=this.buildProps(c,n),y=m(...w)(v);return a.push(y),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:ab({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class oTe{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function _t(t,e,n){return t.config[e]===void 0&&t.parent?_t(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?_t(t.parent,e,n):null}):t.config[e]}function cb(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function lW(t){const e=[],{nodeExtensions:n,markExtensions:r}=cb(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=_t(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([p,m])=>{e.push({type:d,name:p,attribute:{...s,...m}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=_t(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const p={...s,...d};typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,e.push({type:o.name,name:u,attribute:p})})}),e}function Tr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Br(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,p]=u.split(":").map(m=>m.trim());c.set(d,p)}),a.forEach(u=>{const[d,p]=u.split(":").map(m=>m.trim());c.set(d,p)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=s}),r},{})}function PM(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Br(n,r),{})}function cW(t){return typeof t=="function"}function Jt(t,e=void 0,...n){return cW(t)?e?t.bind(e)(...n):t(...n):t}function aTe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function lTe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function tF(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):lTe(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function nF(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&aTe(n)?!1:n!=null))}function cTe(t,e){var n;const r=lW(t),{nodeExtensions:i,markExtensions:s}=cb(t),o=(n=i.find(c=>_t(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},p=t.reduce((y,S)=>{const E=_t(S,"extendNodeSchema",d);return{...y,...E?E(c):{}}},{}),m=nF({...p,content:Jt(_t(c,"content",d)),marks:Jt(_t(c,"marks",d)),group:Jt(_t(c,"group",d)),inline:Jt(_t(c,"inline",d)),atom:Jt(_t(c,"atom",d)),selectable:Jt(_t(c,"selectable",d)),draggable:Jt(_t(c,"draggable",d)),code:Jt(_t(c,"code",d)),whitespace:Jt(_t(c,"whitespace",d)),linebreakReplacement:Jt(_t(c,"linebreakReplacement",d)),defining:Jt(_t(c,"defining",d)),isolating:Jt(_t(c,"isolating",d)),attrs:Object.fromEntries(u.map(y=>{var S;return[y.name,{default:(S=y==null?void 0:y.attribute)===null||S===void 0?void 0:S.default}]}))}),x=Jt(_t(c,"parseHTML",d));x&&(m.parseDOM=x.map(y=>tF(y,u)));const w=_t(c,"renderHTML",d);w&&(m.toDOM=y=>w({node:y,HTMLAttributes:PM(y,u)}));const v=_t(c,"renderText",d);return v&&(m.toText=v),[c.name,m]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},p=t.reduce((v,y)=>{const S=_t(y,"extendMarkSchema",d);return{...v,...S?S(c):{}}},{}),m=nF({...p,inclusive:Jt(_t(c,"inclusive",d)),excludes:Jt(_t(c,"excludes",d)),group:Jt(_t(c,"group",d)),spanning:Jt(_t(c,"spanning",d)),code:Jt(_t(c,"code",d)),attrs:Object.fromEntries(u.map(v=>{var y;return[v.name,{default:(y=v==null?void 0:v.attribute)===null||y===void 0?void 0:y.default}]}))}),x=Jt(_t(c,"parseHTML",d));x&&(m.parseDOM=x.map(v=>tF(v,u)));const w=_t(c,"renderHTML",d);return w&&(m.toDOM=v=>w({mark:v,HTMLAttributes:PM(v,u)})),[c.name,m]}));return new JV({topNode:o,nodes:a,marks:l})}function N_(t,e){return e.nodes[t]||e.marks[t]||null}function rF(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function YR(t,e){const n=wd.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const uTe=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-s))}),n};function JR(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class ub{constructor(e){this.find=e.find,this.handler=e.handler}}const dTe=(t,e)=>{if(JR(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function kv(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(p=>p.type.spec.code))return!1;let u=!1;const d=uTe(c)+s;return o.forEach(p=>{if(u)return;const m=dTe(d,p.find);if(!m)return;const x=l.state.tr,w=ab({state:l.state,transaction:x}),v={from:r-(m[0].length-s.length),to:i},{commands:y,chain:S,can:E}=new lb({editor:n,state:w});p.handler({state:w,range:v,match:m,commands:y,chain:S,can:E})===null||!x.steps.length||(x.setMeta(a,{transform:x,from:r,to:i,text:s}),l.dispatch(x),u=!0)}),u}function fTe(t){const{editor:e,rules:n}=t,r=new Ai({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=YR(Ke.from(u),o.schema);const{from:d}=l,p=d+u.length;kv({editor:e,from:d,to:p,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return kv({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&kv({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?kv({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function hTe(t){return Object.prototype.toString.call(t).slice(8,-1)}function Pv(t){return hTe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function db(t,e){const n={...t};return Pv(t)&&Pv(e)&&Object.keys(e).forEach(r=>{Pv(e[r])&&Pv(t[r])?n[r]=db(t[r],e[r]):n[r]=e[r]}),n}class pa{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Jt(_t(this,"addOptions",{name:this.name}))),this.storage=Jt(_t(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new pa(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>db(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new pa(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Jt(_t(n,"addOptions",{name:n.name})),n.storage=Jt(_t(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function pTe(t){return typeof t=="number"}class mTe{constructor(e){this.find=e.find,this.handler=e.handler}}const gTe=(t,e,n)=>{if(JR(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function yTe(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new lb({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(m,x)=>{if(!m.isTextblock||m.type.spec.code)return;const w=Math.max(r,x),v=Math.min(i,x+m.content.size),y=m.textBetween(w-x,v-x,void 0,"￼");gTe(y,s.find,o).forEach(E=>{if(E.index===void 0)return;const C=w+E.index+1,A=C+E[0].length,T={from:n.tr.mapping.map(C),to:n.tr.mapping.map(A)},k=s.handler({state:n,range:T,match:E,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(k)})}),d.every(m=>m!==null)}let Dv=null;const vTe=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function xTe(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:p,rule:m,pasteEvt:x})=>{const w=u.tr,v=ab({state:u,transaction:w});if(!(!yTe({editor:e,state:v,from:Math.max(d-1,0),to:p.b-1,rule:m,pasteEvent:x,dropEvent:a})||!w.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,w}};return n.map(u=>new Ai({view(d){const p=x=>{var w;r=!((w=d.dom.parentElement)===null||w===void 0)&&w.contains(x.target)?d.dom.parentElement:null,r&&(Dv=e)},m=()=>{Dv&&(Dv=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",m),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",m)}}},props:{handleDOMEvents:{drop:(d,p)=>{if(s=r===d.dom.parentElement,a=p,!s){const m=Dv;m!=null&&m.isEditable&&setTimeout(()=>{const x=m.state.selection;x&&m.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(d,p)=>{var m;const x=(m=p.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return o=p,i=!!(x!=null&&x.includes("data-pm-slice")),!1}}},appendTransaction:(d,p,m)=>{const x=d[0],w=x.getMeta("uiEvent")==="paste"&&!i,v=x.getMeta("uiEvent")==="drop"&&!s,y=x.getMeta("applyPasteRules"),S=!!y;if(!w&&!v&&!S)return;if(S){let{text:A}=y;typeof A=="string"?A=A:A=YR(Ke.from(A),m.schema);const{from:T}=y,k=T+A.length,R=vTe(A);return l({rule:u,state:m,from:T,to:{b:k},pasteEvt:R})}const E=p.doc.content.findDiffStart(m.doc.content),C=p.doc.content.findDiffEnd(m.doc.content);if(!(!pTe(E)||!C||E===C.b))return l({rule:u,state:m,from:E,to:C,pasteEvt:o})}}))}function wTe(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Mf{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Mf.resolve(e),this.schema=cTe(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Mf.sort(Mf.flatten(e)),r=wTe(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=_t(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=_t(r,"priority")||100,o=_t(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:N_(n.name,this.schema)},i=_t(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Mf.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:N_(o.name,this.schema)},l=[],c=_t(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&_t(o,"exitable",a)&&(u.ArrowRight=()=>pa.handleExit({editor:e,mark:o})),c){const w=Object.fromEntries(Object.entries(c()).map(([v,y])=>[v,()=>y({editor:e})]));u={...u,...w}}const d=UMe(u);l.push(d);const p=_t(o,"addInputRules",a);rF(o,e.options.enableInputRules)&&p&&r.push(...p());const m=_t(o,"addPasteRules",a);rF(o,e.options.enablePasteRules)&&m&&i.push(...m());const x=_t(o,"addProseMirrorPlugins",a);if(x){const w=x();l.push(...w)}return l}).flat();return[fTe({editor:e,rules:r}),...xTe({editor:e,rules:i}),...s]}get attributes(){return lW(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=cb(this.extensions);return Object.fromEntries(n.filter(r=>!!_t(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:Tr(r.name,this.schema)},o=_t(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,d,p)=>{const m=PM(l,i);return o()({node:l,view:c,getPos:u,decorations:d,innerDecorations:p,editor:e,extension:r,HTMLAttributes:m})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:N_(e.name,this.schema)};e.type==="mark"&&(!((n=Jt(_t(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=_t(e,"onBeforeCreate",r),s=_t(e,"onCreate",r),o=_t(e,"onUpdate",r),a=_t(e,"onSelectionUpdate",r),l=_t(e,"onTransaction",r),c=_t(e,"onFocus",r),u=_t(e,"onBlur",r),d=_t(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class Ar{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Jt(_t(this,"addOptions",{name:this.name}))),this.storage=Jt(_t(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ar(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>db(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ar({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Jt(_t(n,"addOptions",{name:n.name})),n.storage=Jt(_t(n,"addStorage",{name:n.name,options:n.options})),n}}function uW(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,i,(l,c,u,d)=>{var p;l.isBlock&&c>r&&(a+=s);const m=o==null?void 0:o[l.type.name];if(m)return u&&(a+=m({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(p=l==null?void 0:l.text)===null||p===void 0?void 0:p.slice(Math.max(r,c)-c,i-c))}),a}function dW(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const bTe=Ar.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ai({key:new Lo("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=dW(n);return uW(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),STe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),_Te=(t=!1)=>({commands:e})=>e.setContent("",t),ETe=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),p=c.resolve(u.map(l+a.nodeSize)),m=d.blockRange(p);if(!m)return;const x=Vh(m);if(a.type.isTextblock){const{defaultType:w}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(m.start,w)}(x||x===0)&&e.lift(m,x)})}),!0},CTe=t=>e=>t(e),MTe=()=>({state:t,dispatch:e})=>iW(t,e),TTe=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Dt(r.doc.resolve(o-1))),!0},ATe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},RTe=t=>({tr:e,state:n,dispatch:r})=>{const i=Tr(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},NTe=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},kTe=()=>({state:t,dispatch:e})=>WR(t,e),PTe=()=>({commands:t})=>t.keyboardShortcut("Enter"),DTe=()=>({state:t,dispatch:e})=>WMe(t,e);function C0(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:JR(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function fW(t,e,n={}){return t.find(r=>r.type===e&&C0(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function iF(t,e,n={}){return!!fW(t,e,n)}function QR(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!fW([...i.node.marks],e,n)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&iF([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&iF([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Jc(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const ITe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=Jc(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const d=QR(l,s,e);if(d&&d.from<=c&&d.to>=u){const p=Dt.create(o,d.from,d.to);n.setSelection(p)}}return!0},LTe=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function hW(t){return t instanceof Dt}function Du(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function pW(t,e=null){if(!e)return null;const n=Vt.atStart(t),r=Vt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Dt.create(t,Du(0,i,s),Du(t.content.size,i,s)):Dt.create(t,Du(e,i,s),Du(e,i,s))}function OTe(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function ZR(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const FTe=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(ZR()||OTe())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!hW(n.state.selection))return o(),!0;const a=pW(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},jTe=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),UTe=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),mW=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&mW(r)}return t};function Iv(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return mW(n)}function eg(t,e,n){if(t instanceof Sc||t instanceof Ke)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Ke.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),eg("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const l=new JV({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?_c.fromSchema(l).parseSlice(Iv(t),n.parseOptions):_c.fromSchema(l).parse(Iv(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=_c.fromSchema(e);return n.slice?s.parseSlice(Iv(t),n.parseOptions).content:s.parse(Iv(t),n.parseOptions)}return eg("",e,n)}function zTe(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Sr||i instanceof Er))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(Vt.near(t.doc.resolve(o),n))}const BTe=t=>!("type"in t),HTe=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=v=>{s.emit("contentError",{editor:s,error:v,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{eg(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(v){l(v)}try{a=eg(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(v){return l(v),!1}let{from:u,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},p=!0,m=!0;if((BTe(a)?a:[a]).forEach(v=>{v.check(),p=p?v.isText&&v.marks.length===0:!1,m=m?v.isBlock:!1}),u===d&&m){const{parent:v}=r.doc.resolve(u);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(u-=1,d+=1)}let w;if(p){if(Array.isArray(e))w=e.map(v=>v.text||"").join("");else if(e instanceof Ke){let v="";e.forEach(y=>{y.text&&(v+=y.text)}),w=v}else typeof e=="object"&&e&&e.text?w=e.text:w=e;r.insertText(w,u,d)}else w=a,r.replaceWith(u,d,w);n.updateSelection&&zTe(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:w}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:w})}return!0},VTe=()=>({state:t,dispatch:e})=>HMe(t,e),$Te=()=>({state:t,dispatch:e})=>VMe(t,e),WTe=()=>({state:t,dispatch:e})=>J$(t,e),GTe=()=>({state:t,dispatch:e})=>tW(t,e),qTe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=tb(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},XTe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=tb(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},KTe=()=>({state:t,dispatch:e})=>zMe(t,e),YTe=()=>({state:t,dispatch:e})=>BMe(t,e);function gW(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function JTe(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))ZR()||gW()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const QTe=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=JTe(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function tg(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?Tr(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,p)=>{if(d.isText)return;const m=Math.max(r,p),x=Math.min(i,p+d.nodeSize);a.push({node:d,from:m,to:x})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>C0(d.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((d,p)=>d+p.to-p.from,0)>=l}const ZTe=(t,e={})=>({state:n,dispatch:r})=>{const i=Tr(t,n.schema);return tg(n,i,e)?$Me(n,r):!1},eAe=()=>({state:t,dispatch:e})=>sW(t,e),tAe=t=>({state:e,dispatch:n})=>{const r=Tr(t,e.schema);return nTe(r)(e,n)},nAe=()=>({state:t,dispatch:e})=>rW(t,e);function fb(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function sF(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const rAe=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=fb(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=Tr(t,r.schema)),a==="mark"&&(o=Jc(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,sF(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&n.addMark(u,u+c.nodeSize,o.create(sF(d.attrs,e)))})})}),!0):!1},iAe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),sAe=()=>({tr:t,dispatch:e})=>{if(e){const n=new bs(t.doc);t.setSelection(n)}return!0},oAe=()=>({state:t,dispatch:e})=>Z$(t,e),aAe=()=>({state:t,dispatch:e})=>nW(t,e),lAe=()=>({state:t,dispatch:e})=>XMe(t,e),cAe=()=>({state:t,dispatch:e})=>JMe(t,e),uAe=()=>({state:t,dispatch:e})=>YMe(t,e);function DM(t,e,n={},r={}){return eg(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const dAe=(t,e=!1,n={},r={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{var l,c;const{doc:u}=s;if(n.preserveWhitespace!=="full"){const d=DM(t,i.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function yW(t,e){const n=Jc(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function fAe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function hAe(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function eN(t){return e=>hAe(e.$from,t)}function pAe(t,e){const n={from:0,to:t.content.size};return uW(t,n,e)}function mAe(t,e){const n=Tr(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function gAe(t,e){const n=fb(typeof e=="string"?e:e.name,t.schema);return n==="node"?mAe(t,e):n==="mark"?yW(t,e):{}}function vW(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=QR(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function mx(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function IM(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?Jc(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>C0(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:p})=>{const m=d.pos,x=p.pos;t.doc.nodesBetween(m,x,(w,v)=>{if(!w.isText&&!w.marks.length)return;const y=Math.max(m,v),S=Math.min(x,v+w.nodeSize),E=S-y;o+=E,a.push(...w.marks.map(C=>({mark:C,from:y,to:S})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>C0(d.mark.attrs,n,{strict:!1})).reduce((d,p)=>d+p.to-p.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,p)=>d+p.to-p.from,0);return(l>0?l+c:l)>=o}function yAe(t,e,n={}){if(!e)return tg(t,null,n)||IM(t,null,n);const r=fb(e,t.schema);return r==="node"?tg(t,e,n):r==="mark"?IM(t,e,n):!1}function oF(t,e){const{nodeExtensions:n}=cb(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Jt(_t(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function hb(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(hb(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function vAe(t){return t instanceof At}function xAe(t,e,n){var r;const{selection:i}=e;let s=null;if(hW(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,p)=>{if(c)return!1;if(u.isInline){const m=!p||p.type.allowsMarkType(n),x=!!n.isInSet(u.marks)||!u.marks.some(w=>w.type.excludes(n));c=m&&x}return!c}),c})}const wAe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=Jc(t,r.schema);if(i)if(o){const c=yW(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(p,m)=>{const x=Math.max(m,u),w=Math.min(m+p.nodeSize,d);p.marks.find(y=>y.type===l)?p.marks.forEach(y=>{l===y.type&&n.addMark(x,w,l.create({...y.attrs,...e}))}):n.addMark(x,w,l.create(e))})});return xAe(r,n,l)},bAe=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),SAe=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=Tr(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>eF(s,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>eF(s,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},_Ae=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Du(t,0,r.content.size),s=At.create(r,i);e.setSelection(s)}return!0},EAe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Dt.atStart(r).from,a=Dt.atEnd(r).to,l=Du(i,o,a),c=Du(s,o,a),u=Dt.create(r,l,c);e.setSelection(u)}return!0},CAe=t=>({state:e,dispatch:n})=>{const r=Tr(t,e.schema);return sTe(r)(e,n)};function aF(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const MAe=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=mx(c,a.node().type.name,a.node().attrs);if(s instanceof At&&s.node.isBlock)return!a.parentOffset||!Qa(o,a.pos)?!1:(r&&(t&&aF(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,p=a.depth===0?void 0:fAe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let m=d&&p?[{type:p,attrs:u}]:void 0,x=Qa(e.doc,e.mapping.map(a.pos),1,m);if(!m&&!x&&Qa(e.doc,e.mapping.map(a.pos),1,p?[{type:p}]:void 0)&&(x=!0,m=p?[{type:p,attrs:u}]:void 0),r){if(x&&(s instanceof Dt&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,m),p&&!d&&!a.parentOffset&&a.parent.type!==p)){const w=e.mapping.map(a.before()),v=e.doc.resolve(w);a.node(-1).canReplaceWith(v.index(),v.index()+1,p)&&e.setNodeMarkup(e.mapping.map(a.before()),p)}t&&aF(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return x},TAe=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=Tr(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const p=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let y=Ke.empty;const S=l.index(-1)?1:l.index(-2)?2:3;for(let R=l.depth-S;R>=l.depth-3;R-=1)y=Ke.from(l.node(R).copy(y));const E=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,C={...mx(p,l.node().type.name,l.node().attrs),...e},A=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(C))||void 0;y=y.append(Ke.from(a.createAndFill(null,A)||void 0));const T=l.before(l.depth-(S-1));n.replace(T,l.after(-E),new ut(y,4-S,0));let k=-1;n.doc.nodesBetween(T,n.doc.content.size,(R,P)=>{if(k>-1)return!1;R.isTextblock&&R.content.size===0&&(k=P+1)}),k>-1&&n.setSelection(Dt.near(n.doc.resolve(k))),n.scrollIntoView()}return!0}const m=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,x={...mx(p,d.type.name,d.attrs),...e},w={...mx(p,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const v=m?[{type:a,attrs:x},{type:m,attrs:w}]:[{type:a,attrs:x}];if(!Qa(n.doc,l.pos,2))return!1;if(i){const{selection:y,storedMarks:S}=r,{splittableMarks:E}=s.extensionManager,C=S||y.$to.parentOffset&&y.$from.marks();if(n.split(l.pos,2,v).scrollIntoView(),!C||!i)return!0;const A=C.filter(T=>E.includes(T.type.name));n.ensureMarks(A)}return!0},k_=(t,e)=>{const n=eN(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Kc(t.doc,n.pos)&&t.join(n.pos),!0},P_=(t,e)=>{const n=eN(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Kc(t.doc,r)&&t.join(r),!0},AAe=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:p}=i.extensionManager,m=Tr(t,o.schema),x=Tr(e,o.schema),{selection:w,storedMarks:v}=o,{$from:y,$to:S}=w,E=y.blockRange(S),C=v||w.$to.parentOffset&&w.$from.marks();if(!E)return!1;const A=eN(T=>oF(T.type.name,d))(w);if(E.depth>=1&&A&&E.depth-A.depth<=1){if(A.node.type===m)return c.liftListItem(x);if(oF(A.node.type.name,d)&&m.validContent(A.node.content)&&a)return l().command(()=>(s.setNodeMarkup(A.pos,m),!0)).command(()=>k_(s,m)).command(()=>P_(s,m)).run()}return!n||!C||!a?l().command(()=>u().wrapInList(m,r)?!0:c.clearNodes()).wrapInList(m,r).command(()=>k_(s,m)).command(()=>P_(s,m)).run():l().command(()=>{const T=u().wrapInList(m,r),k=C.filter(R=>p.includes(R.type.name));return s.ensureMarks(k),T?!0:c.clearNodes()}).wrapInList(m,r).command(()=>k_(s,m)).command(()=>P_(s,m)).run()},RAe=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Jc(t,r.schema);return IM(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},NAe=(t,e,n={})=>({state:r,commands:i})=>{const s=Tr(t,r.schema),o=Tr(e,r.schema),a=tg(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},kAe=(t,e={})=>({state:n,commands:r})=>{const i=Tr(t,n.schema);return tg(n,i,e)?r.lift(i):r.wrapIn(i,e)},PAe=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},DAe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},IAe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=Jc(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:p,to:m}=a;const x=(s=c.marks().find(v=>v.type===l))===null||s===void 0?void 0:s.attrs,w=QR(c,l,x);w&&(p=w.from,m=w.to),n.removeMark(p,m,l)}else d.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,l)});return n.removeStoredMark(l),!0},LAe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=fb(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=Tr(t,r.schema)),a==="mark"&&(o=Jc(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,p,m,x;n.selection.empty?r.doc.nodesBetween(c,u,(w,v)=>{s&&s===w.type&&(m=Math.max(v,c),x=Math.min(v+w.nodeSize,u),d=v,p=w)}):r.doc.nodesBetween(c,u,(w,v)=>{v<c&&s&&s===w.type&&(m=Math.max(v,c),x=Math.min(v+w.nodeSize,u),d=v,p=w),v>=c&&v<=u&&(s&&s===w.type&&n.setNodeMarkup(v,void 0,{...w.attrs,...e}),o&&w.marks.length&&w.marks.forEach(y=>{if(o===y.type){const S=Math.max(v,c),E=Math.min(v+w.nodeSize,u);n.addMark(S,E,o.create({...y.attrs,...e}))}}))}),p&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(w=>{o===w.type&&n.addMark(m,x,o.create({...w.attrs,...e}))}))}),!0):!1},OAe=(t,e={})=>({state:n,dispatch:r})=>{const i=Tr(t,n.schema);return QMe(i,e)(n,r)},FAe=(t,e={})=>({state:n,dispatch:r})=>{const i=Tr(t,n.schema);return ZMe(i,e)(n,r)};var jAe=Object.freeze({__proto__:null,blur:STe,clearContent:_Te,clearNodes:ETe,command:CTe,createParagraphNear:MTe,cut:TTe,deleteCurrentNode:ATe,deleteNode:RTe,deleteRange:NTe,deleteSelection:kTe,enter:PTe,exitCode:DTe,extendMarkRange:ITe,first:LTe,focus:FTe,forEach:jTe,insertContent:UTe,insertContentAt:HTe,joinBackward:WTe,joinDown:$Te,joinForward:GTe,joinItemBackward:qTe,joinItemForward:XTe,joinTextblockBackward:KTe,joinTextblockForward:YTe,joinUp:VTe,keyboardShortcut:QTe,lift:ZTe,liftEmptyBlock:eAe,liftListItem:tAe,newlineInCode:nAe,resetAttributes:rAe,scrollIntoView:iAe,selectAll:sAe,selectNodeBackward:oAe,selectNodeForward:aAe,selectParentNode:lAe,selectTextblockEnd:cAe,selectTextblockStart:uAe,setContent:dAe,setMark:wAe,setMeta:bAe,setNode:SAe,setNodeSelection:_Ae,setTextSelection:EAe,sinkListItem:CAe,splitBlock:MAe,splitListItem:TAe,toggleList:AAe,toggleMark:RAe,toggleNode:NAe,toggleWrap:kAe,undoInputRule:PAe,unsetAllMarks:DAe,unsetMark:IAe,updateAttributes:LAe,wrapIn:OAe,wrapInList:FAe});const UAe=Ar.create({name:"commands",addCommands(){return{...jAe}}}),zAe=Ar.create({name:"drop",addProseMirrorPlugins(){return[new Ai({key:new Lo("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),BAe=Ar.create({name:"editable",addProseMirrorPlugins(){return[new Ai({key:new Lo("editable"),props:{editable:()=>this.editor.options.editable}})]}}),HAe=new Lo("focusEvents"),VAe=Ar.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Ai({key:HAe,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),$Ae=Ar.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:p,parent:m}=d,x=d.parent.isTextblock&&p>0?a.doc.resolve(p-1):d,w=x.parent.type.spec.isolating,v=d.pos-d.parentOffset,y=w&&x.parent.childCount===1?v===d.pos:Vt.atStart(c).from===p;return!u||!m.type.isTextblock||m.textContent.length||!y||y&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ZR()||gW()?s:i},addProseMirrorPlugins(){return[new Ai({key:new Lo("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(w=>w.getMeta("composition")))return;const r=t.some(w=>w.docChanged)&&!e.doc.eq(n.doc),i=t.some(w=>w.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=e.selection,l=Vt.atStart(e.doc).from,c=Vt.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!hb(n.doc))return;const p=n.tr,m=ab({state:n,transaction:p}),{commands:x}=new lb({editor:this.editor,state:m});if(x.clearNodes(),!!p.steps.length)return p}})]}}),WAe=Ar.create({name:"paste",addProseMirrorPlugins(){return[new Ai({key:new Lo("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),GAe=Ar.create({name:"tabindex",addProseMirrorPlugins(){return[new Ai({key:new Lo("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Eu{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Eu(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Eu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Eu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Eu(a,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new Eu(a,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const qAe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function XAe(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class KAe extends oTe{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=XAe(qAe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=cW(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;r=r.filter(a=>!a.key.startsWith(o))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[BAe,bTe.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),UAe,VAe,$Ae,GAe,zAe,WAe].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Mf(i,this)}createCommandManager(){this.commandManager=new lb({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=DM(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=DM(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=pW(n,this.options.autofocus);this.view=new X$(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Cf.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return gAe(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return yAe(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return YR(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return pAe(this.state.doc,{blockSeparator:n,textSerializers:{...dW(this.schema),...r}})}get isEmpty(){return hb(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Eu(n,this)}get $doc(){return this.$pos(0)}}function bh(t){return new ub({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Jt(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(vW(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(w=>w===t.type&&w!==m.mark.type)).filter(m=>m.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const p=n.from+l+o.length;s.addMark(n.from+l,p,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function YAe(t){return new ub({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Jt(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()}})}function LM(t){return new ub({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=Jt(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function ng(t){return new ub({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=Jt(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&IR(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:p}=e,{splittableMarks:m}=t.editor.extensionManager,x=p||d.$to.parentOffset&&d.$from.marks();if(x){const w=x.filter(v=>m.includes(v.type.name));o.ensureMarks(w)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Kc(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}let Oo=class OM{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Jt(_t(this,"addOptions",{name:this.name}))),this.storage=Jt(_t(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new OM(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>db(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new OM(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Jt(_t(n,"addOptions",{name:n.name})),n.storage=Jt(_t(n,"addStorage",{name:n.name,options:n.options})),n}};function Sh(t){return new mTe({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=Jt(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),p=d+a.length;if(vW(n.from,n.to,e.doc).filter(x=>x.mark.type.excluded.find(v=>v===t.type&&v!==x.mark.type)).filter(x=>x.to>d).length)return null;p<n.to&&o.delete(p,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function JAe(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof At){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}function QAe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xW={exports:{}},D_={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lF;function ZAe(){if(lF)return D_;lF=1;var t=Re;function e(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(d,p){var m=p(),x=r({inst:{value:m,getSnapshot:p}}),w=x[0].inst,v=x[1];return s(function(){w.value=m,w.getSnapshot=p,l(w)&&v({inst:w})},[d,m,p]),i(function(){return l(w)&&v({inst:w}),d(function(){l(w)&&v({inst:w})})},[d]),o(m),m}function l(d){var p=d.getSnapshot;d=d.value;try{var m=p();return!n(d,m)}catch{return!0}}function c(d,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return D_.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,D_}xW.exports=ZAe();var tN=xW.exports;const eRe=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},tRe=({contentComponent:t})=>{const e=tN.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return Re.createElement(Re.Fragment,null,Object.values(e))};function nRe(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:jT.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class rRe extends Re.Component{constructor(e){var n;super(e),this.editorContentRef=Re.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=nRe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return Re.createElement(Re.Fragment,null,Re.createElement("div",{ref:eRe(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Re.createElement(tRe,{contentComponent:e.contentComponent}))}}const iRe=b.forwardRef((t,e)=>{const n=Re.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Re.createElement(rRe,{key:n,innerRef:e,...t})}),sRe=Re.memo(iRe);var oRe=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},aRe=QAe(oRe),wW={exports:{}},I_={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cF;function lRe(){if(cF)return I_;cF=1;var t=Re,e=tN;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return I_.useSyncExternalStoreWithSelector=function(c,u,d,p,m){var x=s(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=a(function(){function y(T){if(!S){if(S=!0,E=T,T=p(T),m!==void 0&&w.hasValue){var k=w.value;if(m(k,T))return C=k}return C=T}if(k=C,r(E,T))return k;var R=p(T);return m!==void 0&&m(k,R)?k:(E=T,C=R)}var S=!1,E,C,A=d===void 0?null:d;return[function(){return y(u())},A===null?void 0:function(){return y(A())}]},[u,d,p,m]);var v=i(c,x[0],x[1]);return o(function(){w.hasValue=!0,w.value=v},[v]),l(v),v},I_}wW.exports=lRe();var cRe=wW.exports;const uRe=typeof window<"u"?b.useLayoutEffect:b.useEffect;class dRe{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function fRe(t){var e;const[n]=b.useState(()=>new dRe(t.editor)),r=cRe.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:aRe);return uRe(()=>n.watch(t.editor),[t.editor,n]),b.useDebugValue(r),r}const hRe=!1,FM=typeof window>"u",pRe=FM||!!(typeof window<"u"&&window.next);class nN{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?FM||pRe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new KAe(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)===null||o===void 0?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?nN.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function mRe(t={},e=[]){const n=b.useRef(t);n.current=t;const[r]=b.useState(()=>new nN(n)),i=tN.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return b.useDebugValue(i),b.useEffect(r.onRender(e)),fRe({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&s===0?0:s+1}),i}const gRe=b.createContext({editor:null});gRe.Consumer;const yRe=b.createContext({onDragStart:void 0}),vRe=()=>b.useContext(yRe);Re.forwardRef((t,e)=>{const{onDragStart:n}=vRe(),r=t.as||"div";return Re.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const xRe=/^\s*>\s$/,wRe=Oo.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Br(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ng({find:xRe,type:this.type})]}}),bRe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,SRe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,_Re=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,ERe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,CRe=pa.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Br(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[bh({find:bRe,type:this.type}),bh({find:_Re,type:this.type})]},addPasteRules(){return[Sh({find:SRe,type:this.type}),Sh({find:ERe,type:this.type})]}}),MRe="listItem",uF="textStyle",dF=/^\s*([-+*])\s$/,TRe=Oo.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Br(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(MRe,this.editor.getAttributes(uF)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=ng({find:dF,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ng({find:dF,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(uF),editor:this.editor})),[t]}}),ARe=/(^|[^`])`([^`]+)`(?!`)/,RRe=/(^|[^`])`([^`]+)`(?!`)/g,NRe=pa.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Br(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[bh({find:ARe,type:this.type})]},addPasteRules(){return[Sh({find:RRe,type:this.type})]}}),kRe=/^```([a-z]+)?[\s\n]$/,PRe=/^~~~([a-z]+)?[\s\n]$/,DRe=Oo.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Br(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(Vt.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[LM({find:kRe,type:this.type,getAttributes:t=>({language:t[1]})}),LM({find:PRe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Ai({key:new Lo("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Dt.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),IRe=Oo.create({name:"doc",topNode:!0,content:"block+"});function LRe(t={}){return new Ai({view(e){return new ORe(e,t)}})}class ORe{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(n){let d=e.nodeBefore,p=e.nodeAfter;if(d||p){let m=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(m){let x=m.getBoundingClientRect(),w=d?x.bottom:x.top;d&&p&&(w=(w+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*a;r={left:x.left,right:x.right,top:w-v,bottom:w+v}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*o;r={left:d.left-p,right:d.left+p,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=l.getBoundingClientRect(),p=d.width/l.offsetWidth,m=d.height/l.offsetHeight;c=d.left-l.scrollLeft*p,u=d.top-l.scrollTop*m}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=l$(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const FRe=Ar.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[LRe(this.options)]}});class Xn extends Vt{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Xn.valid(r)?new Xn(r):Vt.near(r)}content(){return ut.empty}eq(e){return e instanceof Xn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Xn(e.resolve(n.pos))}getBookmark(){return new rN(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!jRe(e)||!URe(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Xn.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(Xn.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!At.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(Xn.valid(a))return a}return null}}}Xn.prototype.visible=!1;Xn.findFrom=Xn.findGapCursorFrom;Vt.jsonID("gapcursor",Xn);class rN{constructor(e){this.pos=e}map(e){return new rN(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Xn.valid(n)?new Xn(n):Vt.near(n)}}function jRe(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function URe(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function zRe(){return new Ai({props:{decorations:$Re,createSelectionBetween(t,e,n){return e.pos==n.pos&&Xn.valid(n)?new Xn(n):null},handleClick:HRe,handleKeyDown:BRe,handleDOMEvents:{beforeinput:VRe}}})}const BRe=K$({ArrowLeft:Lv("horiz",-1),ArrowRight:Lv("horiz",1),ArrowUp:Lv("vert",-1),ArrowDown:Lv("vert",1)});function Lv(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Dt){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Xn.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new Xn(c))),!0):!1}}function HRe(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Xn.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&At.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Xn(r))),!0)}function VRe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Xn))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Ke.empty;for(let o=r.length-1;o>=0;o--)i=Ke.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new ut(i,0,0));return s.setSelection(Dt.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function $Re(t){if(!(t.selection instanceof Xn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",or.create(t.doc,[gs.widget(t.selection.head,e,{key:"gapcursor"})])}const WRe=Ar.create({name:"gapCursor",addProseMirrorPlugins(){return[zRe()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Jt(_t(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),GRe=Oo.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Br(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(p=>a.includes(p.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),qRe=Oo.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Br(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>LM({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var M0=200,Cr=function(){};Cr.prototype.append=function(e){return e.length?(e=Cr.from(e),!this.length&&e||e.length<M0&&this.leafAppend(e)||this.length<M0&&e.leafPrepend(this)||this.appendInner(e)):this};Cr.prototype.prepend=function(e){return e.length?Cr.from(e).append(this):this};Cr.prototype.appendInner=function(e){return new XRe(this,e)};Cr.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Cr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Cr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Cr.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Cr.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};Cr.from=function(e){return e instanceof Cr?e:e&&e.length?new bW(e):Cr.empty};var bW=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=M0)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=M0)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Cr);Cr.empty=new bW([]);var XRe=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Cr);const KRe=500;class bo{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,p)=>{if(!d.step){i||(i=this.remapping(r,p+1),s=i.maps.length),s--,u.push(d);return}if(i){u.push(new Wo(d.map));let m=d.step.map(i.slice(s)),x;m&&o.maybeStep(m).doc&&(x=o.mapping.maps[o.mapping.maps.length-1],c.push(new Wo(x,void 0,void 0,c.length+u.length))),s--,x&&i.appendMap(x,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new bo(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),p=new Wo(e.mapping.maps[u],d,n),m;(m=l&&l.merge(p))&&(p=m,u?s.pop():a=a.slice(0,a.length-1)),s.push(p),n&&(o++,n=void 0),i||(l=p)}let c=o-r.depth;return c>JRe&&(a=YRe(a,c),o-=c),new bo(a.append(s),o)}remapping(e,n){let r=new Km;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new bo(this.items.append(e.map(n=>new Wo(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(p=>{p.selection&&a--},i);let l=n;this.items.forEach(p=>{let m=s.getMirror(--l);if(m==null)return;o=Math.min(o,m);let x=s.maps[m];if(p.step){let w=e.steps[m].invert(e.docs[m]),v=p.selection&&p.selection.map(s.slice(l+1,m));v&&a++,r.push(new Wo(x,w,v))}else r.push(new Wo(x))},i);let c=[];for(let p=n;p<o;p++)c.push(new Wo(s.maps[p]));let u=this.items.slice(0,i).append(c).append(r),d=new bo(u,a);return d.emptyItemCount()>KRe&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let d=new Wo(c.invert(),l,u),p,m=i.length-1;(p=i.length&&i[m].merge(d))?i[m]=p:i.push(d)}}else o.map&&r--},this.items.length,0),new bo(Cr.from(i.reverse()),s)}}bo.empty=new bo(Cr.empty,0);function YRe(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Wo{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Wo(n.getMap().invert(),n,this.selection)}}}class Xl{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const JRe=20;function QRe(t,e,n,r){let i=n.getMeta(qu),s;if(i)return i.historyState;n.getMeta(tNe)&&(t=new Xl(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(qu))return o.getMeta(qu).redo?new Xl(t.done.addTransform(n,void 0,r,gx(e)),t.undone,fF(n.mapping.maps),t.prevTime,t.prevComposition):new Xl(t.done,t.undone.addTransform(n,void 0,r,gx(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!ZRe(n,t.prevRanges)),c=o?L_(t.prevRanges,n.mapping):fF(n.mapping.maps);return new Xl(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,gx(e)),bo.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Xl(t.done.rebased(n,s),t.undone.rebased(n,s),L_(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Xl(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),L_(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function ZRe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function fF(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function L_(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function eNe(t,e,n){let r=gx(e),i=qu.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new Xl(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(qu,{redo:n,historyState:l})}let O_=!1,hF=null;function gx(t){let e=t.plugins;if(hF!=e){O_=!1,hF=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){O_=!0;break}}return O_}const qu=new Lo("history"),tNe=new Lo("closeHistory");function nNe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Ai({key:qu,state:{init(){return new Xl(bo.empty,bo.empty,null,0,-1)},apply(e,n,r){return QRe(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?_W:r=="historyRedo"?EW:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function SW(t,e){return(n,r)=>{let i=qu.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=eNe(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const _W=SW(!1,!0),EW=SW(!0,!0),rNe=Ar.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>_W(t,e),redo:()=>({state:t,dispatch:e})=>EW(t,e)}},addProseMirrorPlugins(){return[nNe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),iNe=Oo.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Br(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!JAe(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$from:r,$to:i}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):vAe(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:a})=>{var l;if(a){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(Dt.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(At.create(o.doc,c.pos)):o.setSelection(Dt.create(o.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(o.insert(u,d),o.setSelection(Dt.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[YAe({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),sNe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,oNe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,aNe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,lNe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,cNe=pa.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Br(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[bh({find:sNe,type:this.type}),bh({find:aNe,type:this.type})]},addPasteRules(){return[Sh({find:oNe,type:this.type}),Sh({find:lNe,type:this.type})]}}),uNe=Oo.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Br(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),dNe="listItem",pF="textStyle",mF=/^(\d+)\.\s$/,fNe=Oo.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Br(this.options.HTMLAttributes,n),0]:["ol",Br(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(dNe,this.editor.getAttributes(pF)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=ng({find:mF,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=ng({find:mF,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(pF)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),hNe=Oo.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Br(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),pNe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,mNe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,gNe=pa.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Br(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[bh({find:pNe,type:this.type})]},addPasteRules(){return[Sh({find:mNe,type:this.type})]}}),yNe=Oo.create({name:"text",group:"inline"}),vNe=Ar.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(CRe.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(wRe.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(TRe.configure(this.options.bulletList)),this.options.code!==!1&&t.push(NRe.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(DRe.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(IRe.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(FRe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(WRe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(GRe.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(qRe.configure(this.options.heading)),this.options.history!==!1&&t.push(rNe.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(iNe.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(cNe.configure(this.options.italic)),this.options.listItem!==!1&&t.push(uNe.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(fNe.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(hNe.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(gNe.configure(this.options.strike)),this.options.text!==!1&&t.push(yNe.configure(this.options.text)),t}}),xNe=pa.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Br(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),wNe=Ar.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),bNe=Ar.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ai({key:new Lo("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=r>=a&&r<=a+o.nodeSize,c=!o.isLeaf&&hb(o);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];s&&u.push(this.options.emptyEditorClass);const d=gs.node(a,a+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(d)}return this.options.includeChildren}),or.create(t,i)}}})]}}),SNe=t=>{if(!t.children.length)return;const e=t.querySelectorAll("span");e&&e.forEach(n=>{var r,i;const s=n.getAttribute("style"),o=(i=(r=n.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||i===void 0?void 0:i.getAttribute("style");n.setAttribute("style",`${o};${s}`)})},_Ne=pa.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&SNe(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Br(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}});var CW="Toggle",iN=b.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r,onPressedChange:i,...s}=t,[o,a]=_s({prop:n,onChange:i,defaultProp:r??!1,caller:CW});return h.jsx(bt.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":t.disabled?"":void 0,...s,ref:e,onClick:it(t.onClick,()=>{t.disabled||a(!o)})})});iN.displayName=CW;var MW=iN,Qc="ToggleGroup",[TW,Y2e]=Mi(Qc,[mw]),AW=mw(),sN=Re.forwardRef((t,e)=>{const{type:n,...r}=t;if(n==="single"){const i=r;return h.jsx(ENe,{...i,ref:e})}if(n==="multiple"){const i=r;return h.jsx(CNe,{...i,ref:e})}throw new Error(`Missing prop \`type\` expected on \`${Qc}\``)});sN.displayName=Qc;var[RW,NW]=TW(Qc),ENe=Re.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o,a]=_s({prop:n,defaultProp:r??"",onChange:i,caller:Qc});return h.jsx(RW,{scope:t.__scopeToggleGroup,type:"single",value:Re.useMemo(()=>o?[o]:[],[o]),onItemActivate:a,onItemDeactivate:Re.useCallback(()=>a(""),[a]),children:h.jsx(kW,{...s,ref:e})})}),CNe=Re.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o,a]=_s({prop:n,defaultProp:r??[],onChange:i,caller:Qc}),l=Re.useCallback(u=>a((d=[])=>[...d,u]),[a]),c=Re.useCallback(u=>a((d=[])=>d.filter(p=>p!==u)),[a]);return h.jsx(RW,{scope:t.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:l,onItemDeactivate:c,children:h.jsx(kW,{...s,ref:e})})});sN.displayName=Qc;var[MNe,TNe]=TW(Qc),kW=Re.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:i=!0,orientation:s,dir:o,loop:a=!0,...l}=t,c=AW(n),u=vg(o),d={role:"group",dir:u,...l};return h.jsx(MNe,{scope:n,rovingFocus:i,disabled:r,children:i?h.jsx(Sz,{asChild:!0,...c,orientation:s,dir:u,loop:a,children:h.jsx(bt.div,{...d,ref:e})}):h.jsx(bt.div,{...d,ref:e})})}),T0="ToggleGroupItem",PW=Re.forwardRef((t,e)=>{const n=NW(T0,t.__scopeToggleGroup),r=TNe(T0,t.__scopeToggleGroup),i=AW(t.__scopeToggleGroup),s=n.value.includes(t.value),o=r.disabled||t.disabled,a={...t,pressed:s,disabled:o},l=Re.useRef(null);return r.rovingFocus?h.jsx(_z,{asChild:!0,...i,focusable:!o,active:s,ref:l,children:h.jsx(gF,{...a,ref:e})}):h.jsx(gF,{...a,ref:e})});PW.displayName=T0;var gF=Re.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:r,...i}=t,s=NW(T0,n),o={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},a=s.type==="single"?o:void 0;return h.jsx(iN,{...a,...i,ref:e,onPressedChange:l=>{l?s.onItemActivate(r):s.onItemDeactivate(r)}})}),DW=sN,IW=PW;const LW=pg("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),ANe=b.forwardRef(({className:t,variant:e,size:n,...r},i)=>h.jsx(MW,{ref:i,className:dt(LW({variant:e,size:n,className:t})),...r}));ANe.displayName=MW.displayName;const OW=b.createContext({size:"default",variant:"default"}),jM=b.forwardRef(({className:t,variant:e,size:n,children:r,...i},s)=>h.jsx(DW,{ref:s,className:dt("flex items-center justify-center gap-1",t),...i,children:h.jsx(OW.Provider,{value:{variant:e,size:n},children:r})}));jM.displayName=DW.displayName;const Vl=b.forwardRef(({className:t,children:e,variant:n,size:r,...i},s)=>{const o=b.useContext(OW);return h.jsx(IW,{ref:s,className:dt(LW({variant:o.variant||n,size:o.size||r}),t),...i,children:e})});Vl.displayName=IW.displayName;const RNe=({editor:t,className:e})=>{if(!t)return null;const{theme:n}=Ts(),r=n==="light",i=()=>t.isActive("heading",{level:1})?"1":t.isActive("heading",{level:2})?"2":t.isActive("heading",{level:3})?"3":"paragraph",s=()=>t.isActive({textAlign:"left"})?"left":t.isActive({textAlign:"center"})?"center":t.isActive({textAlign:"right"})?"right":"left";return h.jsxs("div",{className:dt("flex items-center flex-wrap gap-2 p-2 border-b","md:gap-3",e),style:{backgroundColor:r?"#f9fafb":"#334155",borderBottomColor:r?"#e5e7eb":"#475569"},children:[h.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:h.jsxs(Gc,{value:i(),onValueChange:o=>{const{from:a,to:l}=t.state.selection;if(a!==l){const u=t.state.doc.textBetween(a,l," ");if(o==="paragraph")t.chain().focus().deleteSelection().insertContent(`<p>${u}</p>`).run();else{const d=parseInt(o);t.chain().focus().deleteSelection().insertContent(`<h${d}>${u}</h${d}>`).run()}}else if(o==="paragraph")t.chain().focus().splitBlock().setParagraph().run();else{const u=parseInt(o);t.chain().focus().splitBlock().setHeading({level:u}).run()}},children:[h.jsxs(ml,{className:"w-20 md:w-24 h-8 text-xs",style:{backgroundColor:r?"white":"#475569",borderColor:r?"#d1d5db":"#64748b",color:r?"#374151":"#e5e7eb"},children:[h.jsx(t4,{className:"h-3 w-3 md:hidden"}),h.jsx(qc,{className:"hidden md:inline"})]}),h.jsxs(gl,{children:[h.jsx(tr,{value:"paragraph",children:"Normal"}),h.jsx(tr,{value:"1",children:"H1"}),h.jsx(tr,{value:"2",children:"H2"}),h.jsx(tr,{value:"3",children:"H3"})]})]})}),h.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:h.jsxs(jM,{type:"multiple",value:[t.isActive("bold")?"bold":"",t.isActive("italic")?"italic":"",t.isActive("underline")?"underline":"",t.isActive("strike")?"strike":""].filter(Boolean),className:"flex gap-0 md:gap-1",children:[h.jsx(Vl,{value:"bold",size:"sm",className:"h-8 w-8 p-0",onClick:()=>t.chain().focus().toggleBold().run(),style:{backgroundColor:t.isActive("bold")?"#2563eb":"transparent",color:t.isActive("bold")?"white":r?"#374151":"#e5e7eb"},onMouseEnter:o=>{t.isActive("bold")||(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{t.isActive("bold")||(o.currentTarget.style.backgroundColor="transparent")},children:h.jsx(GU,{className:"h-3 w-3 md:h-4 md:w-4"})}),h.jsx(Vl,{value:"italic",size:"sm",className:"h-8 w-8 p-0",onClick:()=>t.chain().focus().toggleItalic().run(),style:{backgroundColor:t.isActive("italic")?"#2563eb":"transparent",color:t.isActive("italic")?"white":r?"#374151":"#e5e7eb"},onMouseEnter:o=>{t.isActive("italic")||(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{t.isActive("italic")||(o.currentTarget.style.backgroundColor="transparent")},children:h.jsx(JU,{className:"h-3 w-3 md:h-4 md:w-4"})}),h.jsx(Vl,{value:"underline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>t.chain().focus().toggleUnderline().run(),style:{backgroundColor:t.isActive("underline")?"#2563eb":"transparent",color:t.isActive("underline")?"white":r?"#374151":"#e5e7eb"},onMouseEnter:o=>{t.isActive("underline")||(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{t.isActive("underline")||(o.currentTarget.style.backgroundColor="transparent")},children:h.jsx(n4,{className:"h-3 w-3 md:h-4 md:w-4"})}),h.jsx(Vl,{value:"strike",size:"sm",className:"h-8 w-8 p-0",onClick:()=>t.chain().focus().toggleStrike().run(),style:{backgroundColor:t.isActive("strike")?"#2563eb":"transparent",color:t.isActive("strike")?"white":r?"#374151":"#e5e7eb"},onMouseEnter:o=>{t.isActive("strike")||(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{t.isActive("strike")||(o.currentTarget.style.backgroundColor="transparent")},children:h.jsx(Mte,{className:"h-3 w-3 md:h-4 md:w-4"})})]})}),h.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:h.jsxs(jM,{type:"single",value:s(),onValueChange:o=>{o&&t.chain().focus().setTextAlign(o).run()},className:"flex gap-0 md:gap-1",children:[h.jsx(Vl,{value:"left",size:"sm",className:"h-8 w-8 p-0",style:{backgroundColor:s()==="left"?"#2563eb":"transparent",color:s()==="left"?"white":r?"#374151":"#e5e7eb"},onMouseEnter:o=>{s()!=="left"&&(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{s()!=="left"&&(o.currentTarget.style.backgroundColor="transparent")},children:h.jsx(WU,{className:"h-3 w-3 md:h-4 md:w-4"})}),h.jsx(Vl,{value:"center",size:"sm",className:"h-8 w-8 p-0",style:{backgroundColor:s()==="center"?"#2563eb":"transparent",color:s()==="center"?"white":r?"#374151":"#e5e7eb"},onMouseEnter:o=>{s()!=="center"&&(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{s()!=="center"&&(o.currentTarget.style.backgroundColor="transparent")},children:h.jsx($U,{className:"h-3 w-3 md:h-4 md:w-4"})}),h.jsx(Vl,{value:"right",size:"sm",className:"h-8 w-8 p-0",style:{backgroundColor:s()==="right"?"#2563eb":"transparent",color:s()==="right"?"white":r?"#374151":"#e5e7eb"},onMouseEnter:o=>{s()!=="right"&&(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{s()!=="right"&&(o.currentTarget.style.backgroundColor="transparent")},children:h.jsx(Zee,{className:"h-3 w-3 md:h-4 md:w-4"})})]})}),h.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:h.jsxs("div",{className:"flex gap-0 md:gap-1",children:[h.jsx($e,{variant:"ghost",size:"sm",onClick:()=>t.chain().focus().toggleBulletList().run(),className:dt("h-8 w-8 p-0",t.isActive("bulletList")?"bg-blue-600 hover:bg-blue-700 text-white":""),style:t.isActive("bulletList")?{}:{backgroundColor:"transparent",color:r?"#374151":"#e5e7eb"},onMouseEnter:o=>{t.isActive("bulletList")||(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{t.isActive("bulletList")||(o.currentTarget.style.backgroundColor="transparent")},children:h.jsx(ZU,{className:"h-3 w-3 md:h-4 md:w-4"})}),h.jsx($e,{variant:"ghost",size:"sm",onClick:()=>t.chain().focus().toggleOrderedList().run(),className:dt("h-8 w-8 p-0",t.isActive("orderedList")?"bg-blue-600 hover:bg-blue-700 text-white":""),style:t.isActive("orderedList")?{}:{backgroundColor:"transparent",color:r?"#374151":"#e5e7eb"},onMouseEnter:o=>{t.isActive("orderedList")||(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{t.isActive("orderedList")||(o.currentTarget.style.backgroundColor="transparent")},children:h.jsx(QU,{className:"h-3 w-3 md:h-4 md:w-4"})}),h.jsx($e,{variant:"ghost",size:"sm",onClick:()=>t.chain().focus().toggleBlockquote().run(),className:dt("h-8 w-8 p-0",t.isActive("blockquote")?"bg-blue-600 hover:bg-blue-700 text-white":""),style:t.isActive("blockquote")?{}:{backgroundColor:"transparent",color:r?"#374151":"#e5e7eb"},onMouseEnter:o=>{t.isActive("blockquote")||(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{t.isActive("blockquote")||(o.currentTarget.style.backgroundColor="transparent")},children:h.jsx(e4,{className:"h-3 w-3 md:h-4 md:w-4"})})]})})]})},NNe=1e3,F_=3,kNe=60*60*1e3,PNe=2e3,DNe=({enabled:t,noteContent:e,noteCategory:n})=>{const[r,i]=b.useState([]),[s,o]=b.useState([]),[a,l]=b.useState(null),[c,u]=b.useState(!1),[d,p]=b.useState(null),[m,x]=b.useState(""),w=b.useRef(null),v=b.useRef(0),{token:y}=to(),S=b.useCallback(H=>{if(!H.trim())return"";const K=H.split(/[.!?]+/).filter(q=>q.trim().length>0).slice(-3).join(". ");return K.length>200?K.substring(K.length-200):K},[]),E=b.useCallback(H=>{if(!t||!H.trim())return console.log("❌ Note AI: Disabled or empty content",{enabled:t,contentLength:H.length}),!1;const B=H.trim().split(/\s+/);if(console.log("🔍 Note AI: Checking trigger conditions",{wordCount:B.length,minRequired:F_,content:H.substring(0,50)+"..."}),B.length<F_)return console.log(`❌ Note AI: Not enough words (${B.length}/${F_})`),!1;if(S(H)===m)return!1;if(/[.!?]\s*$/.test(H.trim()))return console.log("✅ Note AI trigger: Sentence completion"),!0;if(/\n\s*\n\s*\w+/.test(H.slice(-50)))return console.log("✅ Note AI trigger: Paragraph break"),!0;const q=Math.abs(H.length-m.length);return q>20?(console.log("✅ Note AI trigger: New content length",q),!0):(console.log("✅ Note AI trigger: Always responsive"),!0)},[t,S,m]),C=b.useCallback(H=>{try{const B=H.replace(/\s+/g," ").trim().split(" ").slice(-20).join(" "),K=`note-suggestions-${btoa(B).slice(-50)}-${n||"general"}`,q=localStorage.getItem(K);if(q){const{suggestions:ee,continuations:O,timestamp:F}=JSON.parse(q);if(Date.now()-F<kNe)return console.log("📦 Found cached suggestions for context:",B.substring(0,50)),{suggestions:ee||[],continuations:O||[]}}}catch(B){console.warn("Failed to read note suggestion cache:",B)}return null},[n]),A=b.useCallback((H,B,K)=>{try{const q=H.replace(/\s+/g," ").trim().split(" ").slice(-20).join(" "),ee=`note-suggestions-${btoa(q).slice(-50)}-${n||"general"}`,O={suggestions:B,continuations:K,timestamp:Date.now()};localStorage.setItem(ee,JSON.stringify(O)),console.log("💾 Cached suggestions for context:",q.substring(0,50))}catch(q){console.warn("Failed to cache note suggestions:",q)}},[n]),T=b.useCallback(H=>{var q;const B=[],K=((q=H.split(/[.!?]/).pop())==null?void 0:q.trim())||"";return K.toLowerCase().includes("i need to")?B.push("remember to","focus on","make sure"):K.toLowerCase().includes("the main")?B.push("point is","goal is","issue is"):K.toLowerCase().includes("next step")&&B.push("is to","would be","should be"),n!=null&&n.toLowerCase().includes("meeting")?B.push("Action items:","Follow up on:","Next meeting:"):n!=null&&n.toLowerCase().includes("project")&&B.push("Timeline:","Resources needed:","Deliverables:"),B},[n]),k=b.useCallback(async(H=!1)=>{var ee;if(!y||!t)return;const B=S(e);if(!B||!E(e)){const O=T(e);i(O),l(O[0]||null);return}const K=C(B);if(K&&!H){console.log("📦 Using cached note suggestions for context:",B.substring(0,50)),i(K.suggestions),o(K.continuations),l(K.suggestions[0]||K.continuations[0]||null);return}const q=Date.now();if(!H&&v.current&&q-v.current<PNe){console.log("⏰ Throttling AI call - too soon since last request");return}H&&console.log("🚀 Force refreshing AI suggestions (bypassing throttle and cache)");try{u(!0),p(null),v.current=Date.now(),x(B);const O=Am(),F=await Tn.post(`${O}/api/note-suggestions`,{context:B,category:n,requestTypes:["completion","continuation"]},{withCredentials:!0,headers:{Authorization:`Bearer ${y}`},timeout:1e4});if(F.data){const{suggestions:D=[],continuations:ie=[]}=F.data;console.log("🚀 Note AI suggestions received:",{suggestions:D.length,continuations:ie.length,firstSuggestion:D[0]||ie[0]||"none",apiResponse:F.data}),i(D),o(ie),l(D[0]||ie[0]||null),A(B,D,ie)}}catch(O){console.error("Failed to fetch note AI suggestions:",O);const F=T(e);i(F),l(F[0]||null),((ee=O==null?void 0:O.response)==null?void 0:ee.status)===401?p("Session expired. Please log in again."):p("AI suggestions temporarily unavailable")}finally{u(!1)}},[y,t,e,n,S,E,C,A,T]),R=b.useCallback(()=>{w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{k()},NNe)},[k]),P=b.useCallback(()=>{w.current&&clearTimeout(w.current),k()},[k]),M=b.useCallback(()=>{w.current&&clearTimeout(w.current),k(!0)},[k]),L=b.useCallback(()=>{console.log("🧹 Clearing suggestions from React state"),i([]),o([]),l(null)},[]),z=b.useCallback((H,B)=>{if(console.log("🎯 Note getSuggestionForInput:",{enabled:t,contentLength:H.length,cursorPosition:B,suggestionsCount:r.length,continuationsCount:s.length}),!t||!H||B<H.length)return null;const K=[...r,...s];if(K.length>0){const q=K[0];return console.log("💡 Note autocomplete suggestion:",q),q}return null},[t,r,s]);return b.useEffect(()=>(t&&e&&R(),()=>{w.current&&clearTimeout(w.current)}),[t,e,R]),{suggestions:r,continuations:s,currentSuggestion:a,isLoading:c,error:d,triggerSuggestions:P,forceRefreshSuggestions:M,clearSuggestions:L,getSuggestionForInput:z,metrics:{lastTriggerContext:m,shouldTrigger:E(e),wordCount:e.trim().split(/\s+/).length,contextWindow:S(e)}}};function Fr(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function INe(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const Ov=43200,yF=1440;let LNe={};function ONe(){return LNe}function vF(t){const e=Fr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function yx(t,e){const n=Fr(t),r=Fr(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function FNe(t){return INe(t,Date.now())}function jNe(t,e){const n=Fr(t),r=Fr(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function UNe(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function zNe(t,e){return+Fr(t)-+Fr(e)}function BNe(t){const e=Fr(t);return e.setHours(23,59,59,999),e}function HNe(t){const e=Fr(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function VNe(t){const e=Fr(t);return+BNe(e)==+HNe(e)}function $Ne(t,e){const n=Fr(t),r=Fr(e),i=yx(n,r),s=Math.abs(jNe(n,r));let o;if(s<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*s);let a=yx(n,r)===-i;VNe(Fr(t))&&s===1&&yx(t,r)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function WNe(t,e,n){const r=zNe(t,e)/1e3;return UNe(n==null?void 0:n.roundingMethod)(r)}const GNe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},qNe=(t,e,n)=>{let r;const i=GNe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function j_(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const XNe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},KNe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},YNe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},JNe={date:j_({formats:XNe,defaultWidth:"full"}),time:j_({formats:KNe,defaultWidth:"full"}),dateTime:j_({formats:YNe,defaultWidth:"full"})},QNe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ZNe=(t,e,n,r)=>QNe[t];function kp(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const eke={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tke={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nke={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rke={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ike={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ske={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},oke=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ake={ordinalNumber:oke,era:kp({values:eke,defaultWidth:"wide"}),quarter:kp({values:tke,defaultWidth:"wide",argumentCallback:t=>t-1}),month:kp({values:nke,defaultWidth:"wide"}),day:kp({values:rke,defaultWidth:"wide"}),dayPeriod:kp({values:ike,defaultWidth:"wide",formattingValues:ske,defaultFormattingWidth:"wide"})};function Pp(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?cke(a,d=>d.test(o)):lke(a,d=>d.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function lke(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function cke(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function uke(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const dke=/^(\d+)(th|st|nd|rd)?/i,fke=/\d+/i,hke={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pke={any:[/^b/i,/^(a|c)/i]},mke={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gke={any:[/1/i,/2/i,/3/i,/4/i]},yke={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vke={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xke={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},wke={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bke={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ske={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_ke={ordinalNumber:uke({matchPattern:dke,parsePattern:fke,valueCallback:t=>parseInt(t,10)}),era:Pp({matchPatterns:hke,defaultMatchWidth:"wide",parsePatterns:pke,defaultParseWidth:"any"}),quarter:Pp({matchPatterns:mke,defaultMatchWidth:"wide",parsePatterns:gke,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Pp({matchPatterns:yke,defaultMatchWidth:"wide",parsePatterns:vke,defaultParseWidth:"any"}),day:Pp({matchPatterns:xke,defaultMatchWidth:"wide",parsePatterns:wke,defaultParseWidth:"any"}),dayPeriod:Pp({matchPatterns:bke,defaultMatchWidth:"any",parsePatterns:Ske,defaultParseWidth:"any"})},Eke={code:"en-US",formatDistance:qNe,formatLong:JNe,formatRelative:ZNe,localize:ake,match:_ke,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Cke(t,e,n){const r=ONe(),i=(n==null?void 0:n.locale)??r.locale??Eke,s=2520,o=yx(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let l,c;o>0?(l=Fr(e),c=Fr(t)):(l=Fr(t),c=Fr(e));const u=WNe(c,l),d=(vF(c)-vF(l))/1e3,p=Math.round((u-d)/60);let m;if(p<2)return n!=null&&n.includeSeconds?u<5?i.formatDistance("lessThanXSeconds",5,a):u<10?i.formatDistance("lessThanXSeconds",10,a):u<20?i.formatDistance("lessThanXSeconds",20,a):u<40?i.formatDistance("halfAMinute",0,a):u<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):p===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",p,a);if(p<45)return i.formatDistance("xMinutes",p,a);if(p<90)return i.formatDistance("aboutXHours",1,a);if(p<yF){const x=Math.round(p/60);return i.formatDistance("aboutXHours",x,a)}else{if(p<s)return i.formatDistance("xDays",1,a);if(p<Ov){const x=Math.round(p/yF);return i.formatDistance("xDays",x,a)}else if(p<Ov*2)return m=Math.round(p/Ov),i.formatDistance("aboutXMonths",m,a)}if(m=$Ne(c,l),m<12){const x=Math.round(p/Ov);return i.formatDistance("xMonths",x,a)}else{const x=m%12,w=Math.trunc(m/12);return x<3?i.formatDistance("aboutXYears",w,a):x<9?i.formatDistance("overXYears",w,a):i.formatDistance("almostXYears",w+1,a)}}function Mke(t,e){return Cke(t,FNe(t),e)}function FW(t){if(!t)return"Unknown";try{const e=t instanceof Date?t:new Date(t);return new Date().getTime()-e.getTime()<6e4?"Just now":Mke(e,{addSuffix:!0})}catch(e){return console.error("Error formatting relative time:",e),"Unknown"}}let Bn={suggestion:null,triggerSuggestions:null,setSuggestionDebounce:null,handleSave:null};const Tke=Ar.create({name:"autocomplete",addKeyboardShortcuts(){return{Tab:()=>{console.log("🔥 TipTap Extension: Tab key pressed!"),console.log("🔥 TipTap Extension: Editor focus state:",this.editor.isFocused),console.log("🔥 TipTap Extension: Local storage object:",JSON.stringify(this.storage,null,2)),console.log("🔥 TipTap Extension: Global storage object:",JSON.stringify(Bn,null,2));const t=Bn.suggestion;if(console.log("🔥 TipTap Extension: Current suggestion from global storage:",t==null?void 0:t.substring(0,30)),t){console.log("✅ TipTap Extension: Accepting suggestion with Tab:",t.substring(0,30)),Bn.suggestion=null,this.editor.commands.insertContent(t);const n=this.editor.getText().trim().split(/\s+/).filter(r=>r.length>0).length;return Bn.setSuggestionDebounce&&Bn.setSuggestionDebounce(n),!0}else console.log("❌ TipTap Extension: No suggestion available in global storage"),console.log("❌ TipTap Extension: Global storage state:",Bn);return!1},ArrowRight:()=>{const t=Bn.suggestion;if(t){console.log("🔥 TipTap Extension: ArrowRight pressed with suggestion:",t.substring(0,30)),Bn.suggestion=null,this.editor.commands.insertContent(t);const n=this.editor.getText().trim().split(/\s+/).filter(r=>r.length>0).length;return Bn.setSuggestionDebounce&&Bn.setSuggestionDebounce(n),!0}return!1}}},addStorage(){return{autocomplete:null}},onBeforeCreate(){var e,n,r;const t=(e=this.storage.autocomplete)==null?void 0:e.suggestion;!this.storage.autocomplete||typeof this.storage.autocomplete!="object"?this.storage.autocomplete={suggestion:null,triggerSuggestions:()=>{},setSuggestionDebounce:()=>{},handleSave:()=>{}}:t&&(this.storage.autocomplete.suggestion=t),console.log("🏗️ TipTap Extension: onBeforeCreate called, preserving suggestion:",((r=(n=this.storage.autocomplete)==null?void 0:n.suggestion)==null?void 0:r.substring(0,30))||"null")},onCreate(){var t,e;console.log("🏗️ TipTap Extension: onCreate called, final storage:",((e=(t=this.storage.autocomplete)==null?void 0:t.suggestion)==null?void 0:e.substring(0,30))||"null")}}),Ake=({content:t,isEditingContent:e,editContent:n,setEditContent:r,setIsEditingContent:i,handleEditContent:s,noteCategory:o,noteColor:a="#FFFFE0",noteId:l,onAutoSave:c,updatedAt:u})=>{const d=b.useRef(null),p=b.useRef(null),[m,x]=b.useState(0),[w,v]=b.useState(!1),[y,S]=b.useState(!1),[E,C]=b.useState(!1),{aiEnabled:A}=gA(),{theme:T}=Ts(),k=T==="light",R=mRe({extensions:[vNe.configure({paragraph:{HTMLAttributes:{class:"text-sm leading-relaxed"}},heading:{levels:[1,2,3],HTMLAttributes:{class:"font-semibold"}},bold:{HTMLAttributes:{class:"font-bold"}},italic:{HTMLAttributes:{class:"italic"}},strike:{HTMLAttributes:{class:"line-through"}},bulletList:{HTMLAttributes:{class:"list-disc list-inside"}},orderedList:{HTMLAttributes:{class:"list-decimal list-inside"}},listItem:{HTMLAttributes:{class:"ml-4"}},blockquote:{HTMLAttributes:{class:"border-l-4 border-gray-300 pl-4 italic text-gray-600"}}}),xNe.configure({HTMLAttributes:{class:"underline"}}),wNe.configure({types:["heading","paragraph"],alignments:["left","center","right"],defaultAlignment:"left"}),_Ne,bNe.configure({placeholder:"Start typing your note...",emptyEditorClass:"is-empty"}),Tke],content:"",editable:!0,immediatelyRender:!1,onUpdate:({editor:ne})=>{const Z=ne.getHTML();r(Z),e||(console.log("🔄 Auto-enabling editing mode because content changed"),i(!0)),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{console.log("💾 Auto-saving rich note content..."),c({content:Z,updated_at:new Date().toISOString()})},3e3)}});b.useEffect(()=>{const ne=Z=>{var fe,we;if(Z.key==="Tab"){console.log("🌍 Global Tab Event:",{target:Z.target,tagName:(fe=Z.target)==null?void 0:fe.tagName,className:(we=Z.target)==null?void 0:we.className,editorFocused:R==null?void 0:R.isFocused,defaultPrevented:Z.defaultPrevented,timeStamp:Z.timeStamp});const xe=Bn.suggestion;if(xe&&!Z.defaultPrevented&&R){console.log("🔄 Global fallback: Handling Tab with suggestion:",xe.substring(0,30)),Z.preventDefault(),Bn.suggestion=null,R.commands.insertContent(xe);const Pe=R.getText().trim().split(/\s+/).filter(et=>et.length>0).length;Bn.setSuggestionDebounce&&Bn.setSuggestionDebounce(Pe)}}};return document.addEventListener("keydown",ne,!0),()=>document.removeEventListener("keydown",ne,!0)},[R]),b.useEffect(()=>{if(!R)return;const ne=Z=>{if(!R.isFocused)return;if(navigator.platform.toUpperCase().indexOf("MAC")>=0?Z.metaKey:Z.ctrlKey)switch(Z.key.toLowerCase()){case"b":Z.preventDefault(),R.chain().focus().toggleBold().run();break;case"i":Z.preventDefault(),R.chain().focus().toggleItalic().run();break;case"u":Z.preventDefault(),R.chain().focus().toggleUnderline().run();break}};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[R]);const P=(R==null?void 0:R.getText())||"",M=(R==null?void 0:R.state.selection.anchor)||0,{suggestions:L,continuations:z,getSuggestionForInput:H,triggerSuggestions:B,forceRefreshSuggestions:K,clearSuggestions:q,currentSuggestion:ee}=DNe({enabled:A,noteContent:P,noteCategory:o});b.useEffect(()=>{if(R&&t!==void 0){const ne=R.getHTML();if(t&&t!=="<p></p>"&&t!==ne)if(!t.includes("<")&&!t.includes(">")){const Z=`<p>${t.replace(/\n/g,"</p><p>")}</p>`;R.commands.setContent(Z,!1),r(Z)}else R.commands.setContent(t,!1),r(t)}},[R,t,r]);const O=P.trim().split(/\s+/).filter(ne=>ne.length>0).length,F=O-m,ie=!w||F>=3;b.useEffect(()=>{w&&ie&&(console.log("🕰️ Debounce period ended, re-enabling suggestions"),v(!1))},[w,ie]);const $=b.useCallback((ne,Z)=>{if(!ne)return ne;const fe=Z.trim(),we=/[.!?]\s*$/.test(fe),xe=!fe||we;let Ve=ne;return xe&&Ve.length>0?Ve=Ve.charAt(0).toUpperCase()+Ve.slice(1):!xe&&Ve.length>0&&(Ve=Ve.charAt(0).toLowerCase()+Ve.slice(1)),console.log("🔤 Grammar fix:",{context:`"${fe.slice(-15)}"`,suggestion:`"${ne.substring(0,20)}"`,fixed:`"${Ve.substring(0,20)}"`,isStartOfSentence:xe,endsWithSentencePunctuation:we}),Ve},[]),U=ie?H(P,P.length):null,Y=U?$(U,P):null;console.log("🔧 Tab Debug:",{shouldShowSuggestions:ie,suggestionJustAccepted:y,rawSuggestion:U==null?void 0:U.substring(0,20),currentAutocomplete:Y==null?void 0:Y.substring(0,20),suggestionsAvailable:L.length,plainTextLength:P.length,willShowInline:e&&Y&&A&&ie&&!y&&P.trim().split(/\s+/).length>=3}),b.useEffect(()=>{R&&R.storage&&typeof R.storage.autocomplete=="object"&&(console.log("🔄 Updating editor autocomplete storage:",{suggestion:Y==null?void 0:Y.substring(0,30),isEditingContent:e,willPassSuggestion:Y!==null,finalSuggestion:(Y==null?void 0:Y.substring(0,30))||"null",storageExists:!!R.storage.autocomplete,editorReady:R.isEditable}),(()=>{var Z,fe,we,xe,Ve,Pe;Bn.suggestion=Y,Bn.triggerSuggestions=B,Bn.setSuggestionDebounce=et=>{console.log("🕰️ Setting suggestion debounce after accepting suggestion, word count:",et),x(et),v(!0),S(!0);try{const te=[];for(let ft=0;ft<localStorage.length;ft++){const Ye=localStorage.key(ft);Ye&&Ye.startsWith("note-suggestions-")&&te.push(Ye)}te.forEach(ft=>localStorage.removeItem(ft)),console.log("🗑️ Cleared note suggestion cache after accepting suggestion")}catch(te){console.warn("Failed to clear note suggestion cache:",te)}console.log("🧹 Clearing in-memory suggestions before refresh",{currentSuggestionsCount:L.length,currentContinuationsCount:z.length,currentSuggestion:ee==null?void 0:ee.substring(0,30)}),q&&q(),Bn.suggestion=null,K&&(console.log("🔄 Force refreshing suggestions after cache clear"),setTimeout(()=>{K()},200)),setTimeout(()=>{S(!1)},100)},Bn.handleSave=()=>{d.current&&clearTimeout(d.current),s()},R&&R.storage&&R.storage.autocomplete&&(R.storage.autocomplete={suggestion:Y,triggerSuggestions:B,setSuggestionDebounce:Bn.setSuggestionDebounce,handleSave:Bn.handleSave}),console.log("✅ Storage after update:",{globalSuggestion:((Z=Bn.suggestion)==null?void 0:Z.substring(0,30))||"null",localSuggestion:((xe=(we=(fe=R==null?void 0:R.storage)==null?void 0:fe.autocomplete)==null?void 0:we.suggestion)==null?void 0:xe.substring(0,30))||"null",hasGlobalStorage:!!Bn.suggestion,hasLocalStorage:!!((Pe=(Ve=R==null?void 0:R.storage)==null?void 0:Ve.autocomplete)!=null&&Pe.suggestion),isEditing:e,timestamp:Date.now()})})())},[R,Y,B,s]),b.useEffect(()=>{var ne,Z;console.log("📝 Rich Note Autocomplete State:",{isEditingContent:e,aiEnabled:A,plainTextContent:P.substring(0,50)+(P.length>50?"...":""),cursorPosition:M,currentAutocomplete:(Y==null?void 0:Y.substring(0,30))+(Y&&Y.length>30?"...":""),suggestionsCount:L.length,continuationsCount:z.length,wordCount:O,shouldShow:e&&Y&&P.trim().split(/\s+/).length>=3,suggestionDebounceActive:w,lastAcceptedSuggestionLength:m,wordsAddedSinceLastSuggestion:F,shouldShowSuggestions:ie,firstSuggestion:(ne=L[0])==null?void 0:ne.substring(0,30),firstContinuation:(Z=z[0])==null?void 0:Z.substring(0,30)})},[e,A,P,M,Y,L.length,z.length,L,z,w,m,ie]),b.useEffect(()=>{C(A&&e&&(L.length>0||z.length>0||ee!==null))},[A,e,L.length,z.length,ee]),b.useEffect(()=>{A&&!e&&(L.length>0||Y)&&(console.log("🎯 Auto-enabling editing mode because suggestions are available"),i(!0),R&&R.commands.focus())},[A,e,L.length,Y,R,i]);const oe=b.useCallback(ne=>{R&&(e||(console.log("🎯 Enabling editing mode and focusing editor on click"),i(!0)),R.commands.focus())},[R,e,i]);return b.useEffect(()=>{if(!e)return;const ne=Z=>{const fe=R==null?void 0:R.view.dom,we=document.querySelector("[data-rich-text-toolbar]");fe&&!fe.contains(Z.target)&&(!we||!we.contains(Z.target))&&(d.current&&clearTimeout(d.current),s())};return document.addEventListener("mousedown",ne),()=>{document.removeEventListener("mousedown",ne)}},[e,s,R]),R?h.jsxs("div",{className:"flex flex-col h-full relative","data-rich-text-editor":!0,tabIndex:-1,children:[h.jsx("div",{"data-rich-text-toolbar":!0,className:"flex-shrink-0",children:h.jsx(RNe,{editor:R})}),h.jsx("div",{className:"flex-1 relative cursor-text overflow-hidden",onClick:oe,style:{paddingBottom:u?"36px":"8px"},children:h.jsxs("div",{className:"relative h-full",children:[h.jsx(sRe,{editor:R,className:`prose prose-sm max-w-none h-full p-3 focus-within:outline-none cursor-text overflow-y-auto ${k?"prose-gray":"prose-invert"}`,style:{borderColor:a,minHeight:"120px",color:k?"#374151":"#e5e7eb"}}),e&&Y&&A&&ie&&!y&&P.trim().split(/\s+/).length>=3&&h.jsx("style",{children:`
                .ProseMirror p:last-child::after {
                  content: "${Y.replace(/"/g,'\\"')}";
                  color: #9CA3AF;
                  font-style: italic;
                  opacity: 0.7;
                  pointer-events: none;
                }
              `}),h.jsx("div",{ref:p,className:"absolute opacity-0 pointer-events-none prose prose-sm max-w-none",style:{fontFamily:"inherit",fontSize:"14px",lineHeight:"20px",padding:"12px",whiteSpace:"pre-wrap",top:0,left:0},children:P})]})}),u&&h.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex-shrink-0 px-2 md:px-3 py-1 md:py-2",style:{borderTop:`1px solid ${a}33`,backgroundColor:k?"#ffffff":"#1e293b",fontSize:"10px"},children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:`${k?"text-gray-500":"text-gray-400"} truncate text-xs md:text-xs`,style:{fontFamily:'"Raleway", sans-serif',fontSize:"inherit"},children:[h.jsx("span",{className:"hidden sm:inline",children:"Last edited: "}),h.jsx("span",{className:"sm:hidden",children:"Edited: "}),FW(u)]}),A&&h.jsx("div",{title:"AI-powered suggestions enabled",className:"flex-shrink-0 ml-1 md:ml-2",children:h.jsx(oc,{className:"h-2.5 w-2.5 md:h-3 md:w-3",style:{color:a}})})]})})]}):h.jsx("div",{className:"p-4",children:"Loading editor..."})},Rke=({currentCategory:t,categoryColor:e,itemColor:n,existingCategories:r,isEditingCategory:i,showNewCategoryInput:s,newCategory:o,setNewCategory:a,setIsEditingCategory:l,setShowNewCategoryInput:c,handleEditCategory:u,handleAddCustomCategory:d,handleUpdateCategoryColor:p})=>{const m=t&&t!==""?t:"General",x=e||n||"#808080",w=()=>"#ffffff";return h.jsx("div",{className:"mb-2 px-6 flex items-center gap-2",children:i?h.jsx("div",{className:"mb-2 w-full",children:s?h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(Sn,{value:o,onChange:v=>a(v.target.value),placeholder:"Enter new category",className:"h-8",autoFocus:!0,onKeyDown:v=>{v.key==="Enter"&&d()}}),h.jsx($e,{size:"sm",variant:"ghost",onClick:d,className:"h-8 w-8 p-0",children:h.jsx(wi,{className:"h-4 w-4"})}),h.jsx($e,{size:"sm",variant:"ghost",onClick:()=>{c(!1),a("")},className:"h-8 w-8 p-0",children:h.jsx(Do,{className:"h-4 w-4"})})]}):h.jsxs("div",{className:"flex flex-col space-y-2",children:[h.jsxs(Gc,{onValueChange:u,defaultValue:m,children:[h.jsx(ml,{className:"h-8",style:{fontFamily:'"Raleway", sans-serif'},children:h.jsx(qc,{placeholder:"Select a category"})}),h.jsxs(gl,{children:[r.map(v=>h.jsx(tr,{value:v.name,style:{fontFamily:'"Raleway", sans-serif'},children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"inline-block w-3 h-3 rounded-full border",style:{backgroundColor:v.color_value}}),v.name]})},v.name)),h.jsx(tr,{value:"__custom__",style:{fontFamily:'"Raleway", sans-serif',color:"#2563eb"},children:"+ Add new category"})]})]}),m!=="__custom__"&&h.jsx("div",{className:"flex items-center gap-2 ml-2",children:h.jsx(pl,{color:x,onChange:v=>p(m,v),onSave:v=>p(m,v),children:h.jsxs($e,{variant:"outline",size:"sm",className:"h-8 px-3 flex items-center gap-2",style:{backgroundColor:"white",borderColor:"#d1d5db",color:"#374151"},children:[h.jsx("span",{className:"inline-block w-3 h-3 rounded-full border",style:{backgroundColor:x,borderColor:"#d1d5db"}}),"Category Color"]})})}),h.jsx($e,{size:"sm",variant:"ghost",className:"self-start",style:{fontFamily:'"Raleway", sans-serif'},onClick:()=>l(!1),children:"Cancel"})]})}):h.jsx(tR,{variant:"outline",className:"cursor-pointer hover:opacity-80 transition-opacity border-none",style:{fontFamily:'"Raleway", sans-serif',backgroundColor:x,color:w()},onClick:()=>l(!0),children:m})})},Nke=({isOpen:t,onClose:e,noteId:n,noteTitle:r,onDelete:i})=>{const[s,o]=b.useState(!1),{toast:a}=rr(),l=async()=>{o(!0);try{await i(n)?(a({title:"Note deleted",description:"The note has been permanently deleted."}),e()):a({title:"Error deleting note",description:"Failed to delete the note. Please try again.",variant:"destructive"})}catch{a({title:"Error deleting note",description:"Failed to delete the note. Please try again.",variant:"destructive"})}finally{o(!1)}};return t?h.jsx(dR,{open:t,onOpenChange:c=>!c&&!s&&e(),children:h.jsxs(Bw,{className:"sm:max-w-[425px]",children:[h.jsxs(Hw,{children:[h.jsxs($w,{className:"flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(XT,{className:"h-5 w-5 text-red-500"}),"Delete Note"]}),h.jsx(Ww,{style:{fontFamily:'"Raleway", sans-serif'},children:"This will permanently delete the note and all its content. This action cannot be undone."})]}),h.jsx("div",{className:"space-y-4",children:h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",style:{fontFamily:'"Raleway", sans-serif'},children:"Note to delete"}),h.jsx("div",{className:"p-3 bg-gray-50 dark:bg-slate-700 rounded-md border",children:h.jsxs("p",{className:"font-medium text-sm flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(gd,{className:"h-4 w-4 text-slate-500"}),r]})})]})}),h.jsxs(Vw,{children:[h.jsx(qw,{onClick:e,disabled:s,style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"}),h.jsx(Gw,{onClick:l,disabled:s,className:"bg-red-600 hover:bg-red-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:s?"Deleting...":"Delete Note"})]})]})}):null},jW=({note:t,onUpdate:e,onDelete:n,onShare:r,existingCategories:i,onCollapsibleChange:s,isCollapsed:o,onToggleCollapsed:a,updateCategory:l})=>{var Ve;const[c,u]=b.useState(!1),{noteTitle:d,isCollapsibleOpen:p,setIsCollapsibleOpen:m,isEditing:x,setIsEditing:w,editTitle:v,setEditTitle:y,handleEditTitle:S,handleSaveNoteColor:E,isSavingColor:C,isEditingCategory:A,setIsEditingCategory:T,showNewCategoryInput:k,setShowNewCategoryInput:R,newCategory:P,setNewCategory:M,handleEditCategory:L,handleAddCustomCategory:z,isEditingContent:H,setIsEditingContent:B,editContent:K,setEditContent:q,handleEditContent:ee,titleEditRef:O,contentEditRef:F}=tEe({note:t,onUpdate:e,onDelete:n,isCollapsed:o,onToggleCollapsed:a,updateCategory:l}),D=()=>{r(t.id)},ie=()=>{u(!0)},$=async Pe=>(await n(parseInt(Pe)),!0),{theme:U}=Ts(),Y=U==="light";b.useEffect(()=>{if(!x)return;const Pe=et=>{O.current&&!O.current.contains(et.target)&&S()};return document.addEventListener("mousedown",Pe),()=>{document.removeEventListener("mousedown",Pe)}},[x,S]);const{toast:oe}=rr(),[ne,Z]=Re.useState(t.color_value||"#FFFFE0");Re.useEffect(()=>{Z(t.color_value||"#FFFFE0")},[t.color_value]);const fe=(Ve=i.find(Pe=>Pe.name===t.category))==null?void 0:Ve.color_value,we=t.color_value||fe||"#FFFFE0",xe=async(Pe,et)=>{await l(Pe,{color_value:et})};return Re.useEffect(()=>{console.log("🎨 Note Color Debug:",{noteId:t.id,noteColorValue:t.color_value,currentColorPreview:ne,noteDisplayColor:we,isEditingContent:H})},[t.id,t.color_value,ne,we,H]),h.jsxs(JA,{open:p,onOpenChange:Pe=>{a&&o!==void 0?!o!==Pe&&a():m(Pe),s==null||s(Pe)},className:"w-full",style:{"--note-color":we},children:[h.jsxs(ji,{className:"w-full shadow-sm h-full flex flex-col",style:{border:"none"},children:[h.jsx(hs,{className:"pb-2",children:h.jsx("div",{className:"flex justify-between items-center",children:x?h.jsxs("div",{className:"flex gap-1 w-full",children:[h.jsx(Sn,{ref:O,value:v,onChange:Pe=>y(Pe.target.value),className:"h-8",autoFocus:!0,onKeyDown:Pe=>{Pe.key==="Enter"&&S()}}),h.jsx($e,{size:"sm",variant:"ghost",onClick:S,className:"h-8 w-8 p-0",children:h.jsx(wi,{className:"h-4 w-4"})}),h.jsx($e,{size:"sm",variant:"ghost",onClick:()=>w(!1),className:"h-8 w-8 p-0",children:h.jsx(Do,{className:"h-4 w-4"})})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(pl,{color:we,onChange:Pe=>{Z(Pe)},onSave:async Pe=>{if(Pe!==(t.color_value||"#FFFFE0"))try{await E(Pe)}catch{oe({title:"Error",description:"Could not save color. Reverting preview.",variant:"destructive"}),Z(t.color_value||"#FFFFE0")}},children:h.jsxs($e,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0 rounded-full flex items-center justify-center relative","aria-label":"Change note color",disabled:C,children:[h.jsx("span",{className:"inline-block w-3 h-3 rounded-full border transition-colors duration-150",style:{backgroundColor:we,borderColor:"#d1d5db"}}),C&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-full",style:{backgroundColor:"rgba(255, 255, 255, 0.8)"},children:h.jsx("div",{className:"h-2 w-2 animate-spin rounded-full border-2 border-solid border-current border-r-transparent"})})]})}),h.jsx(gd,{className:"h-4 w-4 text-slate-500"}),h.jsx(Jo,{className:"text-lg font-medium cursor-pointer",style:{fontFamily:'"Raleway", sans-serif'},onClick:()=>w(!0),children:d})]}),h.jsxs("div",{className:"flex",children:[h.jsx(QA,{asChild:!0,children:h.jsx($e,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:h.jsx(Wa,{className:dt("h-4 w-4 transition-transform",p?"":"transform rotate-180")})})}),h.jsxs(bw,{children:[h.jsx(Sw,{asChild:!0,children:h.jsx($e,{variant:"ghost",className:"h-8 w-8 p-0",children:h.jsx(qT,{className:"h-4 w-4"})})}),h.jsxs(Eg,{align:"end",children:[h.jsxs(xs,{onClick:()=>w(!0),style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(mg,{className:"mr-2 h-4 w-4"}),"Edit Title"]}),h.jsxs(xs,{onClick:D,style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(Rh,{className:"mr-2 h-4 w-4"}),"Share"]}),h.jsxs(xs,{onClick:ie,className:"text-red-600",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(tw,{className:"mr-2 h-4 w-4"}),"Delete Note"]})]})]})]})]})})}),h.jsx(Rke,{currentCategory:t.category||"",categoryColor:fe,itemColor:t.color_value,existingCategories:i,isEditingCategory:A,showNewCategoryInput:k,newCategory:P,setNewCategory:M,setIsEditingCategory:T,setShowNewCategoryInput:R,handleEditCategory:L,handleAddCustomCategory:z,handleUpdateCategoryColor:xe}),h.jsx(ZA,{className:"flex-1",children:h.jsx("div",{className:"rounded-lg mx-2 md:mx-6 mb-6 flex-1 flex flex-col",style:{backgroundColor:Y?"#ffffff":"#1e293b",border:`2px solid ${we} !important`,borderColor:`${we} !important`,height:`${Math.max(180,(t.height||300)-120)}px`},children:h.jsx(Ake,{content:t.content,isEditingContent:H,editContent:K,setEditContent:q,setIsEditingContent:B,handleEditContent:ee,contentEditRef:F,noteCategory:t.category,noteColor:we,noteId:t.id,onAutoSave:async Pe=>{await e(t.id,{content:Pe.content,updated_at:Pe.updated_at})},updatedAt:t.updated_at})})})]}),h.jsx(Nke,{isOpen:c,onClose:()=>u(!1),noteId:t.id.toString(),noteTitle:t.title,onDelete:$})]})},kke=({note:t,onPositionUpdate:e,onUpdate:n,onDelete:r,existingCategories:i,canvasTransform:s,updateCategory:o})=>{const[a,l]=b.useState(!1),[c,u]=b.useState(!1),[d,p]=b.useState(!1),[m,x]=b.useState({x:0,y:0}),[w,v]=b.useState({startX:0,startY:0,startWidth:0,startHeight:0}),y=b.useRef(null);b.useEffect(()=>{y.current&&(y.current.style.left=`${t.position_x}px`,y.current.style.top=`${t.position_y}px`)},[t.position_x,t.position_y]);const S=R=>{var M;if(!R.target.closest('input, textarea, button, [role="button"], [role="menuitem"], .resize-handle, .ProseMirror, [data-rich-text-editor], [data-rich-text-toolbar]')&&(R.preventDefault(),y.current)){const L=(M=y.current.parentElement)==null?void 0:M.getBoundingClientRect();if(L){const z=(R.clientX-L.left-s.x)/s.scale,H=(R.clientY-L.top-s.y)/s.scale,B=parseFloat(y.current.style.left)||0,K=parseFloat(y.current.style.top)||0;x({x:(z-B)*s.scale,y:(H-K)*s.scale}),l(!0)}}},E=R=>{var P;if(a&&y.current){const M=(P=y.current.parentElement)==null?void 0:P.getBoundingClientRect();if(!M)return;const L=(R.clientX-M.left-s.x)/s.scale,z=(R.clientY-M.top-s.y)/s.scale,H=L-m.x/s.scale,B=z-m.y/s.scale;y.current.style.left=`${H}px`,y.current.style.top=`${B}px`}if(c&&y.current){const M=R.clientX-w.startX,L=R.clientY-w.startY,z=M/s.scale,H=L/s.scale,B=Math.max(570,w.startWidth+z),K=Math.max(350,w.startHeight+H);y.current.style.width=`${B}px`,y.current.style.height=`${K}px`}},C=()=>{if(a&&y.current){l(!1);const R=parseFloat(y.current.style.left)||0,P=parseFloat(y.current.style.top)||0,M={x:Math.round(R),y:Math.round(P)};e(t.id,M)}if(c&&y.current){u(!1);const R=parseFloat(y.current.style.left)||0,P=parseFloat(y.current.style.top)||0,M=parseFloat(y.current.style.width)||t.width||200,L=parseFloat(y.current.style.height)||t.height||200,z={x:Math.round(R),y:Math.round(P)},H={width:Math.round(M),height:Math.round(L)};e(t.id,z,H)}};b.useEffect(()=>((a||c)&&(window.addEventListener("mousemove",E),window.addEventListener("mouseup",C)),()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",C)}),[a,c,m,w]);const A=R=>{if(R.preventDefault(),R.stopPropagation(),y.current){const P=parseFloat(y.current.style.width)||t.width||200,M=parseFloat(y.current.style.height)||t.height||200;v({startX:R.clientX,startY:R.clientY,startWidth:P,startHeight:M}),u(!0)}},T=async(R,P)=>{try{await n(R,P)}catch(M){console.error("Failed to update note:",M)}},k=async R=>{try{await r(R)}catch(P){console.error("Failed to delete note:",P)}};return h.jsxs("div",{ref:y,onMouseDown:S,className:"draggable-note-card shadow-lg rounded-lg flex flex-col overflow-hidden border relative",style:{position:"absolute",width:`${t.width||520}px`,height:d?"auto":`${t.height||300}px`,zIndex:a||c?1e3:t.z_index||1,cursor:a?"grabbing":c?"nw-resize":"grab",transition:a||c?"none":"box-shadow 0.2s, transform 0.1s",boxShadow:a||c?"0 8px 16px rgba(0,0,0,0.2)":"0 4px 6px rgba(0, 0, 0, 0.1)",transform:a||c?"scale(1.01)":"scale(1)",userSelect:"none",touchAction:"none"},children:[h.jsx(jW,{note:t,onUpdate:T,onDelete:k,existingCategories:i,onCollapsibleChange:R=>p(!R),updateCategory:o}),!d&&h.jsx("div",{className:"resize-handle absolute bottom-0 right-0 w-4 h-4 cursor-nw-resize",onMouseDown:A,style:{background:"linear-gradient(-45deg, transparent 40%, #ccc 40%, #ccc 60%, transparent 60%)",opacity:.6}})]})},Pke=({whiteboard:t,onUpdate:e,onDelete:n,isCollapsed:r,onToggleCollapsed:i,updateCategory:s,addCategory:o})=>{const{toast:a}=rr(),[l,c]=b.useState(!0),u=r!==void 0?!r:l,d=i||c,[p,m]=b.useState(!1),[x,w]=b.useState(t.title||"Untitled Whiteboard"),[v,y]=b.useState(!1),[S,E]=b.useState(!1),[C,A]=b.useState(!1),[T,k]=b.useState(""),R=b.useRef(null);Re.useEffect(()=>{w(t.title||"Untitled Whiteboard")},[t.title]);const P=b.useCallback(async()=>{x.trim()!==t.title&&await e(t.id,{title:x.trim()}),m(!1)},[x,t.title,t.id,e]),M=b.useCallback(async()=>{await n(t.id)},[t.id,n]),L=b.useCallback(async q=>{y(!0);try{await e(t.id,{color_value:q})}catch(ee){throw console.error("Failed to save whiteboard color:",ee),a({title:"Error updating color",description:"Could not update whiteboard color. Please try again.",variant:"destructive"}),ee}finally{y(!1)}},[t.id,e,a]),z=b.useCallback(async q=>{if(q==="__custom__"){A(!0);return}try{await e(t.id,{category:q}),E(!1),A(!1)}catch(ee){console.error("Failed to update whiteboard category:",ee),a({title:"Error updating category",description:"Could not update whiteboard category. Please try again.",variant:"destructive"})}},[t.id,e,a]),H=b.useCallback(async()=>{if(T.trim()!=="")try{await e(t.id,{category:T.trim()}),E(!1),A(!1),k("")}catch(q){console.error("Failed to add custom category:",q),a({title:"Error adding category",description:"Could not add custom category. Please try again.",variant:"destructive"})}else a({title:"Category cannot be empty",description:"Please enter a valid category name",variant:"destructive"})},[T,t.id,e,a]),B=b.useCallback(q=>{console.log("Canvas changed:",q)},[]),K=b.useCallback(async q=>{var ee;try{console.log("🎨 WhiteboardCardLogic: Saving canvas data:",{whiteboardId:t.id,pathCount:((ee=q.canvas_data)==null?void 0:ee.length)||0,dataType:typeof q.canvas_data,isArray:Array.isArray(q.canvas_data),dataPreview:JSON.stringify(q.canvas_data).substring(0,200)}),await e(t.id,{canvas_data:JSON.stringify(q.canvas_data),updated_at:q.updated_at}),console.log("🎨 WhiteboardCardLogic: Canvas save completed successfully")}catch(O){console.error("Failed to save canvas data:",O),a({title:"Error saving whiteboard",description:"Could not save your drawing. Please try again.",variant:"destructive"})}},[t.id,e,a]);return{whiteboardTitle:t.title||"Untitled Whiteboard",isCollapsibleOpen:u,setIsCollapsibleOpen:d,isEditing:p,setIsEditing:m,editTitle:x,setEditTitle:w,handleEditTitle:P,handleDeleteWhiteboard:M,handleSaveWhiteboardColor:L,isSavingColor:v,isEditingCategory:S,setIsEditingCategory:E,showNewCategoryInput:C,setShowNewCategoryInput:A,newCategory:T,setNewCategory:k,handleEditCategory:z,handleAddCustomCategory:H,handleCanvasChange:B,handleCanvasSave:K,titleEditRef:R}};var UW=["PageUp","PageDown"],zW=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],BW={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},$h="Slider",[UM,Dke,Ike]=fg($h),[HW,J2e]=Mi($h,[Ike]),[Lke,pb]=HW($h),VW=b.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:p=()=>{},inverted:m=!1,form:x,...w}=t,v=b.useRef(new Set),y=b.useRef(0),E=o==="horizontal"?Oke:Fke,[C=[],A]=_s({prop:u,defaultProp:c,onChange:L=>{var H;(H=[...v.current][y.current])==null||H.focus(),d(L)}}),T=b.useRef(C);function k(L){const z=Hke(C,L);M(L,z)}function R(L){M(L,y.current)}function P(){const L=T.current[y.current];C[y.current]!==L&&p(C)}function M(L,z,{commit:H}={commit:!1}){const B=Gke(s),K=qke(Math.round((L-r)/s)*s+r,B),q=i0(K,[r,i]);A((ee=[])=>{const O=zke(ee,q,z);if(Wke(O,l*s)){y.current=O.indexOf(q);const F=String(O)!==String(ee);return F&&H&&p(O),F?O:ee}else return ee})}return h.jsx(Lke,{scope:t.__scopeSlider,name:n,disabled:a,min:r,max:i,valueIndexToChangeRef:y,thumbs:v.current,values:C,orientation:o,form:x,children:h.jsx(UM.Provider,{scope:t.__scopeSlider,children:h.jsx(UM.Slot,{scope:t.__scopeSlider,children:h.jsx(E,{"aria-disabled":a,"data-disabled":a?"":void 0,...w,ref:e,onPointerDown:it(w.onPointerDown,()=>{a||(T.current=C)}),min:r,max:i,inverted:m,onSlideStart:a?void 0:k,onSlideMove:a?void 0:R,onSlideEnd:a?void 0:P,onHomeKeyDown:()=>!a&&M(r,0,{commit:!0}),onEndKeyDown:()=>!a&&M(i,C.length-1,{commit:!0}),onStepKeyDown:({event:L,direction:z})=>{if(!a){const K=UW.includes(L.key)||L.shiftKey&&zW.includes(L.key)?10:1,q=y.current,ee=C[q],O=s*K*z;M(ee+O,q,{commit:!0})}}})})})})});VW.displayName=$h;var[$W,WW]=HW($h,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Oke=b.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,p]=b.useState(null),m=Lt(e,E=>p(E)),x=b.useRef(void 0),w=vg(i),v=w==="ltr",y=v&&!s||!v&&s;function S(E){const C=x.current||d.getBoundingClientRect(),A=[0,C.width],k=oN(A,y?[n,r]:[r,n]);return x.current=C,k(E-C.left)}return h.jsx($W,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:h.jsx(GW,{dir:w,"data-orientation":"horizontal",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=S(E.clientX);o==null||o(C)},onSlideMove:E=>{const C=S(E.clientX);a==null||a(C)},onSlideEnd:()=>{x.current=void 0,l==null||l()},onStepKeyDown:E=>{const A=BW[y?"from-left":"from-right"].includes(E.key);c==null||c({event:E,direction:A?-1:1})}})})}),Fke=b.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=b.useRef(null),d=Lt(e,u),p=b.useRef(void 0),m=!i;function x(w){const v=p.current||u.current.getBoundingClientRect(),y=[0,v.height],E=oN(y,m?[r,n]:[n,r]);return p.current=v,E(w-v.top)}return h.jsx($W,{scope:t.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:h.jsx(GW,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const v=x(w.clientY);s==null||s(v)},onSlideMove:w=>{const v=x(w.clientY);o==null||o(v)},onSlideEnd:()=>{p.current=void 0,a==null||a()},onStepKeyDown:w=>{const y=BW[m?"from-bottom":"from-top"].includes(w.key);l==null||l({event:w,direction:y?-1:1})}})})}),GW=b.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=pb($h,n);return h.jsx(bt.span,{...c,ref:e,onKeyDown:it(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):UW.concat(zW).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:it(t.onPointerDown,d=>{const p=d.target;p.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(p)?p.focus():r(d)}),onPointerMove:it(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:it(t.onPointerUp,d=>{const p=d.target;p.hasPointerCapture(d.pointerId)&&(p.releasePointerCapture(d.pointerId),s(d))})})}),qW="SliderTrack",XW=b.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=pb(qW,n);return h.jsx(bt.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});XW.displayName=qW;var zM="SliderRange",KW=b.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=pb(zM,n),s=WW(zM,n),o=b.useRef(null),a=Lt(e,o),l=i.values.length,c=i.values.map(p=>QW(p,i.min,i.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return h.jsx(bt.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});KW.displayName=zM;var BM="SliderThumb",YW=b.forwardRef((t,e)=>{const n=Dke(t.__scopeSlider),[r,i]=b.useState(null),s=Lt(e,a=>i(a)),o=b.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return h.jsx(jke,{...t,ref:s,index:o})}),jke=b.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...s}=t,o=pb(BM,n),a=WW(BM,n),[l,c]=b.useState(null),u=Lt(e,S=>c(S)),d=l?o.form||!!l.closest("form"):!0,p=sA(l),m=o.values[r],x=m===void 0?0:QW(m,o.min,o.max),w=Bke(r,o.values.length),v=p==null?void 0:p[a.size],y=v?Vke(v,x,a.direction):0;return b.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${x}% + ${y}px)`},children:[h.jsx(UM.ItemSlot,{scope:t.__scopeSlider,children:h.jsx(bt.span,{role:"slider","aria-label":t["aria-label"]||w,"aria-valuemin":o.min,"aria-valuenow":m,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:m===void 0?{display:"none"}:t.style,onFocus:it(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),d&&h.jsx(JW,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:m},r)]})});YW.displayName=BM;var Uke="RadioBubbleInput",JW=b.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const i=b.useRef(null),s=Lt(i,r),o=vA(e);return b.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(bt.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});JW.displayName=Uke;function zke(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function QW(t,e,n){const s=100/(n-e)*(t-e);return i0(s,[0,100])}function Bke(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Hke(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function Vke(t,e,n){const r=t/2,s=oN([0,50],[0,r]);return(r-s(e)*n)*n}function $ke(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Wke(t,e){if(e>0){const n=$ke(t);return Math.min(...n)>=e}return!0}function oN(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Gke(t){return(String(t).split(".")[1]||"").length}function qke(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var ZW=VW,Xke=XW,Kke=KW,Yke=YW;const e8=b.forwardRef(({className:t,...e},n)=>h.jsxs(ZW,{ref:n,className:dt("relative flex w-full touch-none select-none items-center",t),...e,children:[h.jsx(Xke,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:h.jsx(Kke,{className:"absolute h-full bg-primary"})}),h.jsx(Yke,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));e8.displayName=ZW.displayName;var A0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */A0.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",d=1,p=2,m=4,x=1,w=2,v=1,y=2,S=4,E=8,C=16,A=32,T=64,k=128,R=256,P=512,M=30,L="...",z=800,H=16,B=1,K=2,q=3,ee=1/0,O=9007199254740991,F=17976931348623157e292,D=NaN,ie=4294967295,$=ie-1,U=ie>>>1,Y=[["ary",k],["bind",v],["bindKey",y],["curry",E],["curryRight",C],["flip",P],["partial",A],["partialRight",T],["rearg",R]],oe="[object Arguments]",ne="[object Array]",Z="[object AsyncFunction]",fe="[object Boolean]",we="[object Date]",xe="[object DOMException]",Ve="[object Error]",Pe="[object Function]",et="[object GeneratorFunction]",te="[object Map]",ft="[object Number]",Ye="[object Null]",ht="[object Object]",Qe="[object Promise]",St="[object Proxy]",Ne="[object RegExp]",Me="[object Set]",st="[object String]",Q="[object Symbol]",I="[object Undefined]",re="[object WeakMap]",G="[object WeakSet]",ae="[object ArrayBuffer]",ce="[object DataView]",Ae="[object Float32Array]",De="[object Float64Array]",Je="[object Int8Array]",me="[object Int16Array]",ge="[object Int32Array]",be="[object Uint8Array]",Oe="[object Uint8ClampedArray]",Xe="[object Uint16Array]",Ge="[object Uint32Array]",wt=/\b__p \+= '';/g,de=/\b(__p \+=) '' \+/g,ot=/(__e\(.*?\)|\b__t\)) \+\n'';/g,We=/&(?:amp|lt|gt|quot|#39);/g,rt=/[&<>"']/g,je=RegExp(We.source),ke=RegExp(rt.source),Ue=/<%-([\s\S]+?)%>/g,tt=/<%([\s\S]+?)%>/g,pt=/<%=([\s\S]+?)%>/g,Tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rn=/^\w*$/,$t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pn=/[\\^$.*+?()[\]{}|]/g,vn=RegExp(Pn.source),dn=/^\s+/,Zi=/\s/,As=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,li=/\{\n\/\* \[wrapped with (.+)\] \*/,ci=/,? & /,Fo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xl=/[()=,{}\[\]\/\s]/,bd=/\\(\\)?/g,Sd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_d=/\w*$/,Wh=/^[-+]0x[0-9a-f]+$/i,Gh=/^0b[01]+$/i,qh=/^\[object .+?Constructor\]$/,Xh=/^0o[0-7]+$/i,Kh=/^(?:0|[1-9]\d*)$/,W=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pe=/($^)/,_e=/['\n\r\u2028\u2029\\]/g,Se="\\ud800-\\udfff",J="\\u0300-\\u036f",le="\\ufe20-\\ufe2f",ve="\\u20d0-\\u20ff",Ie=J+le+ve,Fe="\\u2700-\\u27bf",at="a-z\\xdf-\\xf6\\xf8-\\xff",gt="\\xac\\xb1\\xd7\\xf7",mt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Et="\\u2000-\\u206f",qt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pn="A-Z\\xc0-\\xd6\\xd8-\\xde",Xt="\\ufe0e\\ufe0f",Kt=gt+mt+Et+qt,Ct="['’]",Jn="["+Se+"]",sn="["+Kt+"]",Vr="["+Ie+"]",xa="\\d+",ui="["+Fe+"]",wl="["+at+"]",En="[^"+Se+Kt+xa+Fe+at+pn+"]",$r="\\ud83c[\\udffb-\\udfff]",Ri="(?:"+Vr+"|"+$r+")",gr="[^"+Se+"]",yr="(?:\\ud83c[\\udde6-\\uddff]){2}",Zc="[\\ud800-\\udbff][\\udc00-\\udfff]",Ni="["+pn+"]",aN="\\u200d",lN="(?:"+wl+"|"+En+")",n8="(?:"+Ni+"|"+En+")",cN="(?:"+Ct+"(?:d|ll|m|re|s|t|ve))?",uN="(?:"+Ct+"(?:D|LL|M|RE|S|T|VE))?",dN=Ri+"?",fN="["+Xt+"]?",r8="(?:"+aN+"(?:"+[gr,yr,Zc].join("|")+")"+fN+dN+")*",i8="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",s8="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",hN=fN+dN+r8,o8="(?:"+[ui,yr,Zc].join("|")+")"+hN,a8="(?:"+[gr+Vr+"?",Vr,yr,Zc,Jn].join("|")+")",l8=RegExp(Ct,"g"),c8=RegExp(Vr,"g"),mb=RegExp($r+"(?="+$r+")|"+a8+hN,"g"),u8=RegExp([Ni+"?"+wl+"+"+cN+"(?="+[sn,Ni,"$"].join("|")+")",n8+"+"+uN+"(?="+[sn,Ni+lN,"$"].join("|")+")",Ni+"?"+lN+"+"+cN,Ni+"+"+uN,s8,i8,xa,o8].join("|"),"g"),d8=RegExp("["+aN+Se+Ie+Xt+"]"),f8=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,h8=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],p8=-1,Dn={};Dn[Ae]=Dn[De]=Dn[Je]=Dn[me]=Dn[ge]=Dn[be]=Dn[Oe]=Dn[Xe]=Dn[Ge]=!0,Dn[oe]=Dn[ne]=Dn[ae]=Dn[fe]=Dn[ce]=Dn[we]=Dn[Ve]=Dn[Pe]=Dn[te]=Dn[ft]=Dn[ht]=Dn[Ne]=Dn[Me]=Dn[st]=Dn[re]=!1;var Rn={};Rn[oe]=Rn[ne]=Rn[ae]=Rn[ce]=Rn[fe]=Rn[we]=Rn[Ae]=Rn[De]=Rn[Je]=Rn[me]=Rn[ge]=Rn[te]=Rn[ft]=Rn[ht]=Rn[Ne]=Rn[Me]=Rn[st]=Rn[Q]=Rn[be]=Rn[Oe]=Rn[Xe]=Rn[Ge]=!0,Rn[Ve]=Rn[Pe]=Rn[re]=!1;var m8={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},g8={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},y8={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},v8={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},x8=parseFloat,w8=parseInt,pN=typeof Ha=="object"&&Ha&&Ha.Object===Object&&Ha,b8=typeof self=="object"&&self&&self.Object===Object&&self,Rr=pN||b8||Function("return this")(),gb=e&&!e.nodeType&&e,eu=gb&&!0&&t&&!t.nodeType&&t,mN=eu&&eu.exports===gb,yb=mN&&pN.process,Rs=function(){try{var he=eu&&eu.require&&eu.require("util").types;return he||yb&&yb.binding&&yb.binding("util")}catch{}}(),gN=Rs&&Rs.isArrayBuffer,yN=Rs&&Rs.isDate,vN=Rs&&Rs.isMap,xN=Rs&&Rs.isRegExp,wN=Rs&&Rs.isSet,bN=Rs&&Rs.isTypedArray;function es(he,Le,Ce){switch(Ce.length){case 0:return he.call(Le);case 1:return he.call(Le,Ce[0]);case 2:return he.call(Le,Ce[0],Ce[1]);case 3:return he.call(Le,Ce[0],Ce[1],Ce[2])}return he.apply(Le,Ce)}function S8(he,Le,Ce,vt){for(var It=-1,mn=he==null?0:he.length;++It<mn;){var cr=he[It];Le(vt,cr,Ce(cr),he)}return vt}function Ns(he,Le){for(var Ce=-1,vt=he==null?0:he.length;++Ce<vt&&Le(he[Ce],Ce,he)!==!1;);return he}function _8(he,Le){for(var Ce=he==null?0:he.length;Ce--&&Le(he[Ce],Ce,he)!==!1;);return he}function SN(he,Le){for(var Ce=-1,vt=he==null?0:he.length;++Ce<vt;)if(!Le(he[Ce],Ce,he))return!1;return!0}function bl(he,Le){for(var Ce=-1,vt=he==null?0:he.length,It=0,mn=[];++Ce<vt;){var cr=he[Ce];Le(cr,Ce,he)&&(mn[It++]=cr)}return mn}function Bg(he,Le){var Ce=he==null?0:he.length;return!!Ce&&Ed(he,Le,0)>-1}function vb(he,Le,Ce){for(var vt=-1,It=he==null?0:he.length;++vt<It;)if(Ce(Le,he[vt]))return!0;return!1}function Fn(he,Le){for(var Ce=-1,vt=he==null?0:he.length,It=Array(vt);++Ce<vt;)It[Ce]=Le(he[Ce],Ce,he);return It}function Sl(he,Le){for(var Ce=-1,vt=Le.length,It=he.length;++Ce<vt;)he[It+Ce]=Le[Ce];return he}function xb(he,Le,Ce,vt){var It=-1,mn=he==null?0:he.length;for(vt&&mn&&(Ce=he[++It]);++It<mn;)Ce=Le(Ce,he[It],It,he);return Ce}function E8(he,Le,Ce,vt){var It=he==null?0:he.length;for(vt&&It&&(Ce=he[--It]);It--;)Ce=Le(Ce,he[It],It,he);return Ce}function wb(he,Le){for(var Ce=-1,vt=he==null?0:he.length;++Ce<vt;)if(Le(he[Ce],Ce,he))return!0;return!1}var C8=bb("length");function M8(he){return he.split("")}function T8(he){return he.match(Fo)||[]}function _N(he,Le,Ce){var vt;return Ce(he,function(It,mn,cr){if(Le(It,mn,cr))return vt=mn,!1}),vt}function Hg(he,Le,Ce,vt){for(var It=he.length,mn=Ce+(vt?1:-1);vt?mn--:++mn<It;)if(Le(he[mn],mn,he))return mn;return-1}function Ed(he,Le,Ce){return Le===Le?U8(he,Le,Ce):Hg(he,EN,Ce)}function A8(he,Le,Ce,vt){for(var It=Ce-1,mn=he.length;++It<mn;)if(vt(he[It],Le))return It;return-1}function EN(he){return he!==he}function CN(he,Le){var Ce=he==null?0:he.length;return Ce?_b(he,Le)/Ce:D}function bb(he){return function(Le){return Le==null?n:Le[he]}}function Sb(he){return function(Le){return he==null?n:he[Le]}}function MN(he,Le,Ce,vt,It){return It(he,function(mn,cr,Cn){Ce=vt?(vt=!1,mn):Le(Ce,mn,cr,Cn)}),Ce}function R8(he,Le){var Ce=he.length;for(he.sort(Le);Ce--;)he[Ce]=he[Ce].value;return he}function _b(he,Le){for(var Ce,vt=-1,It=he.length;++vt<It;){var mn=Le(he[vt]);mn!==n&&(Ce=Ce===n?mn:Ce+mn)}return Ce}function Eb(he,Le){for(var Ce=-1,vt=Array(he);++Ce<he;)vt[Ce]=Le(Ce);return vt}function N8(he,Le){return Fn(Le,function(Ce){return[Ce,he[Ce]]})}function TN(he){return he&&he.slice(0,kN(he)+1).replace(dn,"")}function ts(he){return function(Le){return he(Le)}}function Cb(he,Le){return Fn(Le,function(Ce){return he[Ce]})}function Yh(he,Le){return he.has(Le)}function AN(he,Le){for(var Ce=-1,vt=he.length;++Ce<vt&&Ed(Le,he[Ce],0)>-1;);return Ce}function RN(he,Le){for(var Ce=he.length;Ce--&&Ed(Le,he[Ce],0)>-1;);return Ce}function k8(he,Le){for(var Ce=he.length,vt=0;Ce--;)he[Ce]===Le&&++vt;return vt}var P8=Sb(m8),D8=Sb(g8);function I8(he){return"\\"+v8[he]}function L8(he,Le){return he==null?n:he[Le]}function Cd(he){return d8.test(he)}function O8(he){return f8.test(he)}function F8(he){for(var Le,Ce=[];!(Le=he.next()).done;)Ce.push(Le.value);return Ce}function Mb(he){var Le=-1,Ce=Array(he.size);return he.forEach(function(vt,It){Ce[++Le]=[It,vt]}),Ce}function NN(he,Le){return function(Ce){return he(Le(Ce))}}function _l(he,Le){for(var Ce=-1,vt=he.length,It=0,mn=[];++Ce<vt;){var cr=he[Ce];(cr===Le||cr===u)&&(he[Ce]=u,mn[It++]=Ce)}return mn}function Vg(he){var Le=-1,Ce=Array(he.size);return he.forEach(function(vt){Ce[++Le]=vt}),Ce}function j8(he){var Le=-1,Ce=Array(he.size);return he.forEach(function(vt){Ce[++Le]=[vt,vt]}),Ce}function U8(he,Le,Ce){for(var vt=Ce-1,It=he.length;++vt<It;)if(he[vt]===Le)return vt;return-1}function z8(he,Le,Ce){for(var vt=Ce+1;vt--;)if(he[vt]===Le)return vt;return vt}function Md(he){return Cd(he)?H8(he):C8(he)}function no(he){return Cd(he)?V8(he):M8(he)}function kN(he){for(var Le=he.length;Le--&&Zi.test(he.charAt(Le)););return Le}var B8=Sb(y8);function H8(he){for(var Le=mb.lastIndex=0;mb.test(he);)++Le;return Le}function V8(he){return he.match(mb)||[]}function $8(he){return he.match(u8)||[]}var W8=function he(Le){Le=Le==null?Rr:Td.defaults(Rr.Object(),Le,Td.pick(Rr,h8));var Ce=Le.Array,vt=Le.Date,It=Le.Error,mn=Le.Function,cr=Le.Math,Cn=Le.Object,Tb=Le.RegExp,G8=Le.String,ks=Le.TypeError,$g=Ce.prototype,q8=mn.prototype,Ad=Cn.prototype,Wg=Le["__core-js_shared__"],Gg=q8.toString,xn=Ad.hasOwnProperty,X8=0,PN=function(){var f=/[^.]+$/.exec(Wg&&Wg.keys&&Wg.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),qg=Ad.toString,K8=Gg.call(Cn),Y8=Rr._,J8=Tb("^"+Gg.call(xn).replace(Pn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xg=mN?Le.Buffer:n,El=Le.Symbol,Kg=Le.Uint8Array,DN=Xg?Xg.allocUnsafe:n,Yg=NN(Cn.getPrototypeOf,Cn),IN=Cn.create,LN=Ad.propertyIsEnumerable,Jg=$g.splice,ON=El?El.isConcatSpreadable:n,Jh=El?El.iterator:n,tu=El?El.toStringTag:n,Qg=function(){try{var f=ou(Cn,"defineProperty");return f({},"",{}),f}catch{}}(),Q8=Le.clearTimeout!==Rr.clearTimeout&&Le.clearTimeout,Z8=vt&&vt.now!==Rr.Date.now&&vt.now,eG=Le.setTimeout!==Rr.setTimeout&&Le.setTimeout,Zg=cr.ceil,ey=cr.floor,Ab=Cn.getOwnPropertySymbols,tG=Xg?Xg.isBuffer:n,FN=Le.isFinite,nG=$g.join,rG=NN(Cn.keys,Cn),ur=cr.max,Wr=cr.min,iG=vt.now,sG=Le.parseInt,jN=cr.random,oG=$g.reverse,Rb=ou(Le,"DataView"),Qh=ou(Le,"Map"),Nb=ou(Le,"Promise"),Rd=ou(Le,"Set"),Zh=ou(Le,"WeakMap"),ep=ou(Cn,"create"),ty=Zh&&new Zh,Nd={},aG=au(Rb),lG=au(Qh),cG=au(Nb),uG=au(Rd),dG=au(Zh),ny=El?El.prototype:n,tp=ny?ny.valueOf:n,UN=ny?ny.toString:n;function V(f){if(Wn(f)&&!Ot(f)&&!(f instanceof nn)){if(f instanceof Ps)return f;if(xn.call(f,"__wrapped__"))return zk(f)}return new Ps(f)}var kd=function(){function f(){}return function(g){if(!zn(g))return{};if(IN)return IN(g);f.prototype=g;var _=new f;return f.prototype=n,_}}();function ry(){}function Ps(f,g){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=n}V.templateSettings={escape:Ue,evaluate:tt,interpolate:pt,variable:"",imports:{_:V}},V.prototype=ry.prototype,V.prototype.constructor=V,Ps.prototype=kd(ry.prototype),Ps.prototype.constructor=Ps;function nn(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function fG(){var f=new nn(this.__wrapped__);return f.__actions__=ki(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=ki(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=ki(this.__views__),f}function hG(){if(this.__filtered__){var f=new nn(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function pG(){var f=this.__wrapped__.value(),g=this.__dir__,_=Ot(f),N=g<0,j=_?f.length:0,X=M9(0,j,this.__views__),se=X.start,ue=X.end,ye=ue-se,Be=N?ue:se-1,He=this.__iteratees__,qe=He.length,lt=0,Mt=Wr(ye,this.__takeCount__);if(!_||!N&&j==ye&&Mt==ye)return ck(f,this.__actions__);var kt=[];e:for(;ye--&&lt<Mt;){Be+=g;for(var Wt=-1,Pt=f[Be];++Wt<qe;){var Qt=He[Wt],on=Qt.iteratee,is=Qt.type,hi=on(Pt);if(is==K)Pt=hi;else if(!hi){if(is==B)continue e;break e}}kt[lt++]=Pt}return kt}nn.prototype=kd(ry.prototype),nn.prototype.constructor=nn;function nu(f){var g=-1,_=f==null?0:f.length;for(this.clear();++g<_;){var N=f[g];this.set(N[0],N[1])}}function mG(){this.__data__=ep?ep(null):{},this.size=0}function gG(f){var g=this.has(f)&&delete this.__data__[f];return this.size-=g?1:0,g}function yG(f){var g=this.__data__;if(ep){var _=g[f];return _===l?n:_}return xn.call(g,f)?g[f]:n}function vG(f){var g=this.__data__;return ep?g[f]!==n:xn.call(g,f)}function xG(f,g){var _=this.__data__;return this.size+=this.has(f)?0:1,_[f]=ep&&g===n?l:g,this}nu.prototype.clear=mG,nu.prototype.delete=gG,nu.prototype.get=yG,nu.prototype.has=vG,nu.prototype.set=xG;function wa(f){var g=-1,_=f==null?0:f.length;for(this.clear();++g<_;){var N=f[g];this.set(N[0],N[1])}}function wG(){this.__data__=[],this.size=0}function bG(f){var g=this.__data__,_=iy(g,f);if(_<0)return!1;var N=g.length-1;return _==N?g.pop():Jg.call(g,_,1),--this.size,!0}function SG(f){var g=this.__data__,_=iy(g,f);return _<0?n:g[_][1]}function _G(f){return iy(this.__data__,f)>-1}function EG(f,g){var _=this.__data__,N=iy(_,f);return N<0?(++this.size,_.push([f,g])):_[N][1]=g,this}wa.prototype.clear=wG,wa.prototype.delete=bG,wa.prototype.get=SG,wa.prototype.has=_G,wa.prototype.set=EG;function ba(f){var g=-1,_=f==null?0:f.length;for(this.clear();++g<_;){var N=f[g];this.set(N[0],N[1])}}function CG(){this.size=0,this.__data__={hash:new nu,map:new(Qh||wa),string:new nu}}function MG(f){var g=gy(this,f).delete(f);return this.size-=g?1:0,g}function TG(f){return gy(this,f).get(f)}function AG(f){return gy(this,f).has(f)}function RG(f,g){var _=gy(this,f),N=_.size;return _.set(f,g),this.size+=_.size==N?0:1,this}ba.prototype.clear=CG,ba.prototype.delete=MG,ba.prototype.get=TG,ba.prototype.has=AG,ba.prototype.set=RG;function ru(f){var g=-1,_=f==null?0:f.length;for(this.__data__=new ba;++g<_;)this.add(f[g])}function NG(f){return this.__data__.set(f,l),this}function kG(f){return this.__data__.has(f)}ru.prototype.add=ru.prototype.push=NG,ru.prototype.has=kG;function ro(f){var g=this.__data__=new wa(f);this.size=g.size}function PG(){this.__data__=new wa,this.size=0}function DG(f){var g=this.__data__,_=g.delete(f);return this.size=g.size,_}function IG(f){return this.__data__.get(f)}function LG(f){return this.__data__.has(f)}function OG(f,g){var _=this.__data__;if(_ instanceof wa){var N=_.__data__;if(!Qh||N.length<i-1)return N.push([f,g]),this.size=++_.size,this;_=this.__data__=new ba(N)}return _.set(f,g),this.size=_.size,this}ro.prototype.clear=PG,ro.prototype.delete=DG,ro.prototype.get=IG,ro.prototype.has=LG,ro.prototype.set=OG;function zN(f,g){var _=Ot(f),N=!_&&lu(f),j=!_&&!N&&Rl(f),X=!_&&!N&&!j&&Ld(f),se=_||N||j||X,ue=se?Eb(f.length,G8):[],ye=ue.length;for(var Be in f)(g||xn.call(f,Be))&&!(se&&(Be=="length"||j&&(Be=="offset"||Be=="parent")||X&&(Be=="buffer"||Be=="byteLength"||Be=="byteOffset")||Ca(Be,ye)))&&ue.push(Be);return ue}function BN(f){var g=f.length;return g?f[Bb(0,g-1)]:n}function FG(f,g){return yy(ki(f),iu(g,0,f.length))}function jG(f){return yy(ki(f))}function kb(f,g,_){(_!==n&&!io(f[g],_)||_===n&&!(g in f))&&Sa(f,g,_)}function np(f,g,_){var N=f[g];(!(xn.call(f,g)&&io(N,_))||_===n&&!(g in f))&&Sa(f,g,_)}function iy(f,g){for(var _=f.length;_--;)if(io(f[_][0],g))return _;return-1}function UG(f,g,_,N){return Cl(f,function(j,X,se){g(N,j,_(j),se)}),N}function HN(f,g){return f&&Uo(g,vr(g),f)}function zG(f,g){return f&&Uo(g,Di(g),f)}function Sa(f,g,_){g=="__proto__"&&Qg?Qg(f,g,{configurable:!0,enumerable:!0,value:_,writable:!0}):f[g]=_}function Pb(f,g){for(var _=-1,N=g.length,j=Ce(N),X=f==null;++_<N;)j[_]=X?n:fS(f,g[_]);return j}function iu(f,g,_){return f===f&&(_!==n&&(f=f<=_?f:_),g!==n&&(f=f>=g?f:g)),f}function Ds(f,g,_,N,j,X){var se,ue=g&d,ye=g&p,Be=g&m;if(_&&(se=j?_(f,N,j,X):_(f)),se!==n)return se;if(!zn(f))return f;var He=Ot(f);if(He){if(se=A9(f),!ue)return ki(f,se)}else{var qe=Gr(f),lt=qe==Pe||qe==et;if(Rl(f))return fk(f,ue);if(qe==ht||qe==oe||lt&&!j){if(se=ye||lt?{}:kk(f),!ue)return ye?y9(f,zG(se,f)):g9(f,HN(se,f))}else{if(!Rn[qe])return j?f:{};se=R9(f,qe,ue)}}X||(X=new ro);var Mt=X.get(f);if(Mt)return Mt;X.set(f,se),o2(f)?f.forEach(function(Pt){se.add(Ds(Pt,g,_,Pt,f,X))}):i2(f)&&f.forEach(function(Pt,Qt){se.set(Qt,Ds(Pt,g,_,Qt,f,X))});var kt=Be?ye?Qb:Jb:ye?Di:vr,Wt=He?n:kt(f);return Ns(Wt||f,function(Pt,Qt){Wt&&(Qt=Pt,Pt=f[Qt]),np(se,Qt,Ds(Pt,g,_,Qt,f,X))}),se}function BG(f){var g=vr(f);return function(_){return VN(_,f,g)}}function VN(f,g,_){var N=_.length;if(f==null)return!N;for(f=Cn(f);N--;){var j=_[N],X=g[j],se=f[j];if(se===n&&!(j in f)||!X(se))return!1}return!0}function $N(f,g,_){if(typeof f!="function")throw new ks(o);return cp(function(){f.apply(n,_)},g)}function rp(f,g,_,N){var j=-1,X=Bg,se=!0,ue=f.length,ye=[],Be=g.length;if(!ue)return ye;_&&(g=Fn(g,ts(_))),N?(X=vb,se=!1):g.length>=i&&(X=Yh,se=!1,g=new ru(g));e:for(;++j<ue;){var He=f[j],qe=_==null?He:_(He);if(He=N||He!==0?He:0,se&&qe===qe){for(var lt=Be;lt--;)if(g[lt]===qe)continue e;ye.push(He)}else X(g,qe,N)||ye.push(He)}return ye}var Cl=yk(jo),WN=yk(Ib,!0);function HG(f,g){var _=!0;return Cl(f,function(N,j,X){return _=!!g(N,j,X),_}),_}function sy(f,g,_){for(var N=-1,j=f.length;++N<j;){var X=f[N],se=g(X);if(se!=null&&(ue===n?se===se&&!rs(se):_(se,ue)))var ue=se,ye=X}return ye}function VG(f,g,_,N){var j=f.length;for(_=Ut(_),_<0&&(_=-_>j?0:j+_),N=N===n||N>j?j:Ut(N),N<0&&(N+=j),N=_>N?0:l2(N);_<N;)f[_++]=g;return f}function GN(f,g){var _=[];return Cl(f,function(N,j,X){g(N,j,X)&&_.push(N)}),_}function Nr(f,g,_,N,j){var X=-1,se=f.length;for(_||(_=k9),j||(j=[]);++X<se;){var ue=f[X];g>0&&_(ue)?g>1?Nr(ue,g-1,_,N,j):Sl(j,ue):N||(j[j.length]=ue)}return j}var Db=vk(),qN=vk(!0);function jo(f,g){return f&&Db(f,g,vr)}function Ib(f,g){return f&&qN(f,g,vr)}function oy(f,g){return bl(g,function(_){return Ma(f[_])})}function su(f,g){g=Tl(g,f);for(var _=0,N=g.length;f!=null&&_<N;)f=f[zo(g[_++])];return _&&_==N?f:n}function XN(f,g,_){var N=g(f);return Ot(f)?N:Sl(N,_(f))}function di(f){return f==null?f===n?I:Ye:tu&&tu in Cn(f)?C9(f):j9(f)}function Lb(f,g){return f>g}function $G(f,g){return f!=null&&xn.call(f,g)}function WG(f,g){return f!=null&&g in Cn(f)}function GG(f,g,_){return f>=Wr(g,_)&&f<ur(g,_)}function Ob(f,g,_){for(var N=_?vb:Bg,j=f[0].length,X=f.length,se=X,ue=Ce(X),ye=1/0,Be=[];se--;){var He=f[se];se&&g&&(He=Fn(He,ts(g))),ye=Wr(He.length,ye),ue[se]=!_&&(g||j>=120&&He.length>=120)?new ru(se&&He):n}He=f[0];var qe=-1,lt=ue[0];e:for(;++qe<j&&Be.length<ye;){var Mt=He[qe],kt=g?g(Mt):Mt;if(Mt=_||Mt!==0?Mt:0,!(lt?Yh(lt,kt):N(Be,kt,_))){for(se=X;--se;){var Wt=ue[se];if(!(Wt?Yh(Wt,kt):N(f[se],kt,_)))continue e}lt&&lt.push(kt),Be.push(Mt)}}return Be}function qG(f,g,_,N){return jo(f,function(j,X,se){g(N,_(j),X,se)}),N}function ip(f,g,_){g=Tl(g,f),f=Lk(f,g);var N=f==null?f:f[zo(Ls(g))];return N==null?n:es(N,f,_)}function KN(f){return Wn(f)&&di(f)==oe}function XG(f){return Wn(f)&&di(f)==ae}function KG(f){return Wn(f)&&di(f)==we}function sp(f,g,_,N,j){return f===g?!0:f==null||g==null||!Wn(f)&&!Wn(g)?f!==f&&g!==g:YG(f,g,_,N,sp,j)}function YG(f,g,_,N,j,X){var se=Ot(f),ue=Ot(g),ye=se?ne:Gr(f),Be=ue?ne:Gr(g);ye=ye==oe?ht:ye,Be=Be==oe?ht:Be;var He=ye==ht,qe=Be==ht,lt=ye==Be;if(lt&&Rl(f)){if(!Rl(g))return!1;se=!0,He=!1}if(lt&&!He)return X||(X=new ro),se||Ld(f)?Ak(f,g,_,N,j,X):_9(f,g,ye,_,N,j,X);if(!(_&x)){var Mt=He&&xn.call(f,"__wrapped__"),kt=qe&&xn.call(g,"__wrapped__");if(Mt||kt){var Wt=Mt?f.value():f,Pt=kt?g.value():g;return X||(X=new ro),j(Wt,Pt,_,N,X)}}return lt?(X||(X=new ro),E9(f,g,_,N,j,X)):!1}function JG(f){return Wn(f)&&Gr(f)==te}function Fb(f,g,_,N){var j=_.length,X=j,se=!N;if(f==null)return!X;for(f=Cn(f);j--;){var ue=_[j];if(se&&ue[2]?ue[1]!==f[ue[0]]:!(ue[0]in f))return!1}for(;++j<X;){ue=_[j];var ye=ue[0],Be=f[ye],He=ue[1];if(se&&ue[2]){if(Be===n&&!(ye in f))return!1}else{var qe=new ro;if(N)var lt=N(Be,He,ye,f,g,qe);if(!(lt===n?sp(He,Be,x|w,N,qe):lt))return!1}}return!0}function YN(f){if(!zn(f)||D9(f))return!1;var g=Ma(f)?J8:qh;return g.test(au(f))}function QG(f){return Wn(f)&&di(f)==Ne}function ZG(f){return Wn(f)&&Gr(f)==Me}function e9(f){return Wn(f)&&_y(f.length)&&!!Dn[di(f)]}function JN(f){return typeof f=="function"?f:f==null?Ii:typeof f=="object"?Ot(f)?ek(f[0],f[1]):ZN(f):x2(f)}function jb(f){if(!lp(f))return rG(f);var g=[];for(var _ in Cn(f))xn.call(f,_)&&_!="constructor"&&g.push(_);return g}function t9(f){if(!zn(f))return F9(f);var g=lp(f),_=[];for(var N in f)N=="constructor"&&(g||!xn.call(f,N))||_.push(N);return _}function Ub(f,g){return f<g}function QN(f,g){var _=-1,N=Pi(f)?Ce(f.length):[];return Cl(f,function(j,X,se){N[++_]=g(j,X,se)}),N}function ZN(f){var g=eS(f);return g.length==1&&g[0][2]?Dk(g[0][0],g[0][1]):function(_){return _===f||Fb(_,f,g)}}function ek(f,g){return nS(f)&&Pk(g)?Dk(zo(f),g):function(_){var N=fS(_,f);return N===n&&N===g?hS(_,f):sp(g,N,x|w)}}function ay(f,g,_,N,j){f!==g&&Db(g,function(X,se){if(j||(j=new ro),zn(X))n9(f,g,se,_,ay,N,j);else{var ue=N?N(iS(f,se),X,se+"",f,g,j):n;ue===n&&(ue=X),kb(f,se,ue)}},Di)}function n9(f,g,_,N,j,X,se){var ue=iS(f,_),ye=iS(g,_),Be=se.get(ye);if(Be){kb(f,_,Be);return}var He=X?X(ue,ye,_+"",f,g,se):n,qe=He===n;if(qe){var lt=Ot(ye),Mt=!lt&&Rl(ye),kt=!lt&&!Mt&&Ld(ye);He=ye,lt||Mt||kt?Ot(ue)?He=ue:Qn(ue)?He=ki(ue):Mt?(qe=!1,He=fk(ye,!0)):kt?(qe=!1,He=hk(ye,!0)):He=[]:up(ye)||lu(ye)?(He=ue,lu(ue)?He=c2(ue):(!zn(ue)||Ma(ue))&&(He=kk(ye))):qe=!1}qe&&(se.set(ye,He),j(He,ye,N,X,se),se.delete(ye)),kb(f,_,He)}function tk(f,g){var _=f.length;if(_)return g+=g<0?_:0,Ca(g,_)?f[g]:n}function nk(f,g,_){g.length?g=Fn(g,function(X){return Ot(X)?function(se){return su(se,X.length===1?X[0]:X)}:X}):g=[Ii];var N=-1;g=Fn(g,ts(Nt()));var j=QN(f,function(X,se,ue){var ye=Fn(g,function(Be){return Be(X)});return{criteria:ye,index:++N,value:X}});return R8(j,function(X,se){return m9(X,se,_)})}function r9(f,g){return rk(f,g,function(_,N){return hS(f,N)})}function rk(f,g,_){for(var N=-1,j=g.length,X={};++N<j;){var se=g[N],ue=su(f,se);_(ue,se)&&op(X,Tl(se,f),ue)}return X}function i9(f){return function(g){return su(g,f)}}function zb(f,g,_,N){var j=N?A8:Ed,X=-1,se=g.length,ue=f;for(f===g&&(g=ki(g)),_&&(ue=Fn(f,ts(_)));++X<se;)for(var ye=0,Be=g[X],He=_?_(Be):Be;(ye=j(ue,He,ye,N))>-1;)ue!==f&&Jg.call(ue,ye,1),Jg.call(f,ye,1);return f}function ik(f,g){for(var _=f?g.length:0,N=_-1;_--;){var j=g[_];if(_==N||j!==X){var X=j;Ca(j)?Jg.call(f,j,1):$b(f,j)}}return f}function Bb(f,g){return f+ey(jN()*(g-f+1))}function s9(f,g,_,N){for(var j=-1,X=ur(Zg((g-f)/(_||1)),0),se=Ce(X);X--;)se[N?X:++j]=f,f+=_;return se}function Hb(f,g){var _="";if(!f||g<1||g>O)return _;do g%2&&(_+=f),g=ey(g/2),g&&(f+=f);while(g);return _}function Yt(f,g){return sS(Ik(f,g,Ii),f+"")}function o9(f){return BN(Od(f))}function a9(f,g){var _=Od(f);return yy(_,iu(g,0,_.length))}function op(f,g,_,N){if(!zn(f))return f;g=Tl(g,f);for(var j=-1,X=g.length,se=X-1,ue=f;ue!=null&&++j<X;){var ye=zo(g[j]),Be=_;if(ye==="__proto__"||ye==="constructor"||ye==="prototype")return f;if(j!=se){var He=ue[ye];Be=N?N(He,ye,ue):n,Be===n&&(Be=zn(He)?He:Ca(g[j+1])?[]:{})}np(ue,ye,Be),ue=ue[ye]}return f}var sk=ty?function(f,g){return ty.set(f,g),f}:Ii,l9=Qg?function(f,g){return Qg(f,"toString",{configurable:!0,enumerable:!1,value:mS(g),writable:!0})}:Ii;function c9(f){return yy(Od(f))}function Is(f,g,_){var N=-1,j=f.length;g<0&&(g=-g>j?0:j+g),_=_>j?j:_,_<0&&(_+=j),j=g>_?0:_-g>>>0,g>>>=0;for(var X=Ce(j);++N<j;)X[N]=f[N+g];return X}function u9(f,g){var _;return Cl(f,function(N,j,X){return _=g(N,j,X),!_}),!!_}function ly(f,g,_){var N=0,j=f==null?N:f.length;if(typeof g=="number"&&g===g&&j<=U){for(;N<j;){var X=N+j>>>1,se=f[X];se!==null&&!rs(se)&&(_?se<=g:se<g)?N=X+1:j=X}return j}return Vb(f,g,Ii,_)}function Vb(f,g,_,N){var j=0,X=f==null?0:f.length;if(X===0)return 0;g=_(g);for(var se=g!==g,ue=g===null,ye=rs(g),Be=g===n;j<X;){var He=ey((j+X)/2),qe=_(f[He]),lt=qe!==n,Mt=qe===null,kt=qe===qe,Wt=rs(qe);if(se)var Pt=N||kt;else Be?Pt=kt&&(N||lt):ue?Pt=kt&&lt&&(N||!Mt):ye?Pt=kt&&lt&&!Mt&&(N||!Wt):Mt||Wt?Pt=!1:Pt=N?qe<=g:qe<g;Pt?j=He+1:X=He}return Wr(X,$)}function ok(f,g){for(var _=-1,N=f.length,j=0,X=[];++_<N;){var se=f[_],ue=g?g(se):se;if(!_||!io(ue,ye)){var ye=ue;X[j++]=se===0?0:se}}return X}function ak(f){return typeof f=="number"?f:rs(f)?D:+f}function ns(f){if(typeof f=="string")return f;if(Ot(f))return Fn(f,ns)+"";if(rs(f))return UN?UN.call(f):"";var g=f+"";return g=="0"&&1/f==-ee?"-0":g}function Ml(f,g,_){var N=-1,j=Bg,X=f.length,se=!0,ue=[],ye=ue;if(_)se=!1,j=vb;else if(X>=i){var Be=g?null:b9(f);if(Be)return Vg(Be);se=!1,j=Yh,ye=new ru}else ye=g?[]:ue;e:for(;++N<X;){var He=f[N],qe=g?g(He):He;if(He=_||He!==0?He:0,se&&qe===qe){for(var lt=ye.length;lt--;)if(ye[lt]===qe)continue e;g&&ye.push(qe),ue.push(He)}else j(ye,qe,_)||(ye!==ue&&ye.push(qe),ue.push(He))}return ue}function $b(f,g){return g=Tl(g,f),f=Lk(f,g),f==null||delete f[zo(Ls(g))]}function lk(f,g,_,N){return op(f,g,_(su(f,g)),N)}function cy(f,g,_,N){for(var j=f.length,X=N?j:-1;(N?X--:++X<j)&&g(f[X],X,f););return _?Is(f,N?0:X,N?X+1:j):Is(f,N?X+1:0,N?j:X)}function ck(f,g){var _=f;return _ instanceof nn&&(_=_.value()),xb(g,function(N,j){return j.func.apply(j.thisArg,Sl([N],j.args))},_)}function Wb(f,g,_){var N=f.length;if(N<2)return N?Ml(f[0]):[];for(var j=-1,X=Ce(N);++j<N;)for(var se=f[j],ue=-1;++ue<N;)ue!=j&&(X[j]=rp(X[j]||se,f[ue],g,_));return Ml(Nr(X,1),g,_)}function uk(f,g,_){for(var N=-1,j=f.length,X=g.length,se={};++N<j;){var ue=N<X?g[N]:n;_(se,f[N],ue)}return se}function Gb(f){return Qn(f)?f:[]}function qb(f){return typeof f=="function"?f:Ii}function Tl(f,g){return Ot(f)?f:nS(f,g)?[f]:Uk(gn(f))}var d9=Yt;function Al(f,g,_){var N=f.length;return _=_===n?N:_,!g&&_>=N?f:Is(f,g,_)}var dk=Q8||function(f){return Rr.clearTimeout(f)};function fk(f,g){if(g)return f.slice();var _=f.length,N=DN?DN(_):new f.constructor(_);return f.copy(N),N}function Xb(f){var g=new f.constructor(f.byteLength);return new Kg(g).set(new Kg(f)),g}function f9(f,g){var _=g?Xb(f.buffer):f.buffer;return new f.constructor(_,f.byteOffset,f.byteLength)}function h9(f){var g=new f.constructor(f.source,_d.exec(f));return g.lastIndex=f.lastIndex,g}function p9(f){return tp?Cn(tp.call(f)):{}}function hk(f,g){var _=g?Xb(f.buffer):f.buffer;return new f.constructor(_,f.byteOffset,f.length)}function pk(f,g){if(f!==g){var _=f!==n,N=f===null,j=f===f,X=rs(f),se=g!==n,ue=g===null,ye=g===g,Be=rs(g);if(!ue&&!Be&&!X&&f>g||X&&se&&ye&&!ue&&!Be||N&&se&&ye||!_&&ye||!j)return 1;if(!N&&!X&&!Be&&f<g||Be&&_&&j&&!N&&!X||ue&&_&&j||!se&&j||!ye)return-1}return 0}function m9(f,g,_){for(var N=-1,j=f.criteria,X=g.criteria,se=j.length,ue=_.length;++N<se;){var ye=pk(j[N],X[N]);if(ye){if(N>=ue)return ye;var Be=_[N];return ye*(Be=="desc"?-1:1)}}return f.index-g.index}function mk(f,g,_,N){for(var j=-1,X=f.length,se=_.length,ue=-1,ye=g.length,Be=ur(X-se,0),He=Ce(ye+Be),qe=!N;++ue<ye;)He[ue]=g[ue];for(;++j<se;)(qe||j<X)&&(He[_[j]]=f[j]);for(;Be--;)He[ue++]=f[j++];return He}function gk(f,g,_,N){for(var j=-1,X=f.length,se=-1,ue=_.length,ye=-1,Be=g.length,He=ur(X-ue,0),qe=Ce(He+Be),lt=!N;++j<He;)qe[j]=f[j];for(var Mt=j;++ye<Be;)qe[Mt+ye]=g[ye];for(;++se<ue;)(lt||j<X)&&(qe[Mt+_[se]]=f[j++]);return qe}function ki(f,g){var _=-1,N=f.length;for(g||(g=Ce(N));++_<N;)g[_]=f[_];return g}function Uo(f,g,_,N){var j=!_;_||(_={});for(var X=-1,se=g.length;++X<se;){var ue=g[X],ye=N?N(_[ue],f[ue],ue,_,f):n;ye===n&&(ye=f[ue]),j?Sa(_,ue,ye):np(_,ue,ye)}return _}function g9(f,g){return Uo(f,tS(f),g)}function y9(f,g){return Uo(f,Rk(f),g)}function uy(f,g){return function(_,N){var j=Ot(_)?S8:UG,X=g?g():{};return j(_,f,Nt(N,2),X)}}function Pd(f){return Yt(function(g,_){var N=-1,j=_.length,X=j>1?_[j-1]:n,se=j>2?_[2]:n;for(X=f.length>3&&typeof X=="function"?(j--,X):n,se&&fi(_[0],_[1],se)&&(X=j<3?n:X,j=1),g=Cn(g);++N<j;){var ue=_[N];ue&&f(g,ue,N,X)}return g})}function yk(f,g){return function(_,N){if(_==null)return _;if(!Pi(_))return f(_,N);for(var j=_.length,X=g?j:-1,se=Cn(_);(g?X--:++X<j)&&N(se[X],X,se)!==!1;);return _}}function vk(f){return function(g,_,N){for(var j=-1,X=Cn(g),se=N(g),ue=se.length;ue--;){var ye=se[f?ue:++j];if(_(X[ye],ye,X)===!1)break}return g}}function v9(f,g,_){var N=g&v,j=ap(f);function X(){var se=this&&this!==Rr&&this instanceof X?j:f;return se.apply(N?_:this,arguments)}return X}function xk(f){return function(g){g=gn(g);var _=Cd(g)?no(g):n,N=_?_[0]:g.charAt(0),j=_?Al(_,1).join(""):g.slice(1);return N[f]()+j}}function Dd(f){return function(g){return xb(y2(g2(g).replace(l8,"")),f,"")}}function ap(f){return function(){var g=arguments;switch(g.length){case 0:return new f;case 1:return new f(g[0]);case 2:return new f(g[0],g[1]);case 3:return new f(g[0],g[1],g[2]);case 4:return new f(g[0],g[1],g[2],g[3]);case 5:return new f(g[0],g[1],g[2],g[3],g[4]);case 6:return new f(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new f(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var _=kd(f.prototype),N=f.apply(_,g);return zn(N)?N:_}}function x9(f,g,_){var N=ap(f);function j(){for(var X=arguments.length,se=Ce(X),ue=X,ye=Id(j);ue--;)se[ue]=arguments[ue];var Be=X<3&&se[0]!==ye&&se[X-1]!==ye?[]:_l(se,ye);if(X-=Be.length,X<_)return Ek(f,g,dy,j.placeholder,n,se,Be,n,n,_-X);var He=this&&this!==Rr&&this instanceof j?N:f;return es(He,this,se)}return j}function wk(f){return function(g,_,N){var j=Cn(g);if(!Pi(g)){var X=Nt(_,3);g=vr(g),_=function(ue){return X(j[ue],ue,j)}}var se=f(g,_,N);return se>-1?j[X?g[se]:se]:n}}function bk(f){return Ea(function(g){var _=g.length,N=_,j=Ps.prototype.thru;for(f&&g.reverse();N--;){var X=g[N];if(typeof X!="function")throw new ks(o);if(j&&!se&&my(X)=="wrapper")var se=new Ps([],!0)}for(N=se?N:_;++N<_;){X=g[N];var ue=my(X),ye=ue=="wrapper"?Zb(X):n;ye&&rS(ye[0])&&ye[1]==(k|E|A|R)&&!ye[4].length&&ye[9]==1?se=se[my(ye[0])].apply(se,ye[3]):se=X.length==1&&rS(X)?se[ue]():se.thru(X)}return function(){var Be=arguments,He=Be[0];if(se&&Be.length==1&&Ot(He))return se.plant(He).value();for(var qe=0,lt=_?g[qe].apply(this,Be):He;++qe<_;)lt=g[qe].call(this,lt);return lt}})}function dy(f,g,_,N,j,X,se,ue,ye,Be){var He=g&k,qe=g&v,lt=g&y,Mt=g&(E|C),kt=g&P,Wt=lt?n:ap(f);function Pt(){for(var Qt=arguments.length,on=Ce(Qt),is=Qt;is--;)on[is]=arguments[is];if(Mt)var hi=Id(Pt),ss=k8(on,hi);if(N&&(on=mk(on,N,j,Mt)),X&&(on=gk(on,X,se,Mt)),Qt-=ss,Mt&&Qt<Be){var Zn=_l(on,hi);return Ek(f,g,dy,Pt.placeholder,_,on,Zn,ue,ye,Be-Qt)}var so=qe?_:this,Aa=lt?so[f]:f;return Qt=on.length,ue?on=U9(on,ue):kt&&Qt>1&&on.reverse(),He&&ye<Qt&&(on.length=ye),this&&this!==Rr&&this instanceof Pt&&(Aa=Wt||ap(Aa)),Aa.apply(so,on)}return Pt}function Sk(f,g){return function(_,N){return qG(_,f,g(N),{})}}function fy(f,g){return function(_,N){var j;if(_===n&&N===n)return g;if(_!==n&&(j=_),N!==n){if(j===n)return N;typeof _=="string"||typeof N=="string"?(_=ns(_),N=ns(N)):(_=ak(_),N=ak(N)),j=f(_,N)}return j}}function Kb(f){return Ea(function(g){return g=Fn(g,ts(Nt())),Yt(function(_){var N=this;return f(g,function(j){return es(j,N,_)})})})}function hy(f,g){g=g===n?" ":ns(g);var _=g.length;if(_<2)return _?Hb(g,f):g;var N=Hb(g,Zg(f/Md(g)));return Cd(g)?Al(no(N),0,f).join(""):N.slice(0,f)}function w9(f,g,_,N){var j=g&v,X=ap(f);function se(){for(var ue=-1,ye=arguments.length,Be=-1,He=N.length,qe=Ce(He+ye),lt=this&&this!==Rr&&this instanceof se?X:f;++Be<He;)qe[Be]=N[Be];for(;ye--;)qe[Be++]=arguments[++ue];return es(lt,j?_:this,qe)}return se}function _k(f){return function(g,_,N){return N&&typeof N!="number"&&fi(g,_,N)&&(_=N=n),g=Ta(g),_===n?(_=g,g=0):_=Ta(_),N=N===n?g<_?1:-1:Ta(N),s9(g,_,N,f)}}function py(f){return function(g,_){return typeof g=="string"&&typeof _=="string"||(g=Os(g),_=Os(_)),f(g,_)}}function Ek(f,g,_,N,j,X,se,ue,ye,Be){var He=g&E,qe=He?se:n,lt=He?n:se,Mt=He?X:n,kt=He?n:X;g|=He?A:T,g&=~(He?T:A),g&S||(g&=-4);var Wt=[f,g,j,Mt,qe,kt,lt,ue,ye,Be],Pt=_.apply(n,Wt);return rS(f)&&Ok(Pt,Wt),Pt.placeholder=N,Fk(Pt,f,g)}function Yb(f){var g=cr[f];return function(_,N){if(_=Os(_),N=N==null?0:Wr(Ut(N),292),N&&FN(_)){var j=(gn(_)+"e").split("e"),X=g(j[0]+"e"+(+j[1]+N));return j=(gn(X)+"e").split("e"),+(j[0]+"e"+(+j[1]-N))}return g(_)}}var b9=Rd&&1/Vg(new Rd([,-0]))[1]==ee?function(f){return new Rd(f)}:vS;function Ck(f){return function(g){var _=Gr(g);return _==te?Mb(g):_==Me?j8(g):N8(g,f(g))}}function _a(f,g,_,N,j,X,se,ue){var ye=g&y;if(!ye&&typeof f!="function")throw new ks(o);var Be=N?N.length:0;if(Be||(g&=-97,N=j=n),se=se===n?se:ur(Ut(se),0),ue=ue===n?ue:Ut(ue),Be-=j?j.length:0,g&T){var He=N,qe=j;N=j=n}var lt=ye?n:Zb(f),Mt=[f,g,_,N,j,He,qe,X,se,ue];if(lt&&O9(Mt,lt),f=Mt[0],g=Mt[1],_=Mt[2],N=Mt[3],j=Mt[4],ue=Mt[9]=Mt[9]===n?ye?0:f.length:ur(Mt[9]-Be,0),!ue&&g&(E|C)&&(g&=-25),!g||g==v)var kt=v9(f,g,_);else g==E||g==C?kt=x9(f,g,ue):(g==A||g==(v|A))&&!j.length?kt=w9(f,g,_,N):kt=dy.apply(n,Mt);var Wt=lt?sk:Ok;return Fk(Wt(kt,Mt),f,g)}function Mk(f,g,_,N){return f===n||io(f,Ad[_])&&!xn.call(N,_)?g:f}function Tk(f,g,_,N,j,X){return zn(f)&&zn(g)&&(X.set(g,f),ay(f,g,n,Tk,X),X.delete(g)),f}function S9(f){return up(f)?n:f}function Ak(f,g,_,N,j,X){var se=_&x,ue=f.length,ye=g.length;if(ue!=ye&&!(se&&ye>ue))return!1;var Be=X.get(f),He=X.get(g);if(Be&&He)return Be==g&&He==f;var qe=-1,lt=!0,Mt=_&w?new ru:n;for(X.set(f,g),X.set(g,f);++qe<ue;){var kt=f[qe],Wt=g[qe];if(N)var Pt=se?N(Wt,kt,qe,g,f,X):N(kt,Wt,qe,f,g,X);if(Pt!==n){if(Pt)continue;lt=!1;break}if(Mt){if(!wb(g,function(Qt,on){if(!Yh(Mt,on)&&(kt===Qt||j(kt,Qt,_,N,X)))return Mt.push(on)})){lt=!1;break}}else if(!(kt===Wt||j(kt,Wt,_,N,X))){lt=!1;break}}return X.delete(f),X.delete(g),lt}function _9(f,g,_,N,j,X,se){switch(_){case ce:if(f.byteLength!=g.byteLength||f.byteOffset!=g.byteOffset)return!1;f=f.buffer,g=g.buffer;case ae:return!(f.byteLength!=g.byteLength||!X(new Kg(f),new Kg(g)));case fe:case we:case ft:return io(+f,+g);case Ve:return f.name==g.name&&f.message==g.message;case Ne:case st:return f==g+"";case te:var ue=Mb;case Me:var ye=N&x;if(ue||(ue=Vg),f.size!=g.size&&!ye)return!1;var Be=se.get(f);if(Be)return Be==g;N|=w,se.set(f,g);var He=Ak(ue(f),ue(g),N,j,X,se);return se.delete(f),He;case Q:if(tp)return tp.call(f)==tp.call(g)}return!1}function E9(f,g,_,N,j,X){var se=_&x,ue=Jb(f),ye=ue.length,Be=Jb(g),He=Be.length;if(ye!=He&&!se)return!1;for(var qe=ye;qe--;){var lt=ue[qe];if(!(se?lt in g:xn.call(g,lt)))return!1}var Mt=X.get(f),kt=X.get(g);if(Mt&&kt)return Mt==g&&kt==f;var Wt=!0;X.set(f,g),X.set(g,f);for(var Pt=se;++qe<ye;){lt=ue[qe];var Qt=f[lt],on=g[lt];if(N)var is=se?N(on,Qt,lt,g,f,X):N(Qt,on,lt,f,g,X);if(!(is===n?Qt===on||j(Qt,on,_,N,X):is)){Wt=!1;break}Pt||(Pt=lt=="constructor")}if(Wt&&!Pt){var hi=f.constructor,ss=g.constructor;hi!=ss&&"constructor"in f&&"constructor"in g&&!(typeof hi=="function"&&hi instanceof hi&&typeof ss=="function"&&ss instanceof ss)&&(Wt=!1)}return X.delete(f),X.delete(g),Wt}function Ea(f){return sS(Ik(f,n,Vk),f+"")}function Jb(f){return XN(f,vr,tS)}function Qb(f){return XN(f,Di,Rk)}var Zb=ty?function(f){return ty.get(f)}:vS;function my(f){for(var g=f.name+"",_=Nd[g],N=xn.call(Nd,g)?_.length:0;N--;){var j=_[N],X=j.func;if(X==null||X==f)return j.name}return g}function Id(f){var g=xn.call(V,"placeholder")?V:f;return g.placeholder}function Nt(){var f=V.iteratee||gS;return f=f===gS?JN:f,arguments.length?f(arguments[0],arguments[1]):f}function gy(f,g){var _=f.__data__;return P9(g)?_[typeof g=="string"?"string":"hash"]:_.map}function eS(f){for(var g=vr(f),_=g.length;_--;){var N=g[_],j=f[N];g[_]=[N,j,Pk(j)]}return g}function ou(f,g){var _=L8(f,g);return YN(_)?_:n}function C9(f){var g=xn.call(f,tu),_=f[tu];try{f[tu]=n;var N=!0}catch{}var j=qg.call(f);return N&&(g?f[tu]=_:delete f[tu]),j}var tS=Ab?function(f){return f==null?[]:(f=Cn(f),bl(Ab(f),function(g){return LN.call(f,g)}))}:xS,Rk=Ab?function(f){for(var g=[];f;)Sl(g,tS(f)),f=Yg(f);return g}:xS,Gr=di;(Rb&&Gr(new Rb(new ArrayBuffer(1)))!=ce||Qh&&Gr(new Qh)!=te||Nb&&Gr(Nb.resolve())!=Qe||Rd&&Gr(new Rd)!=Me||Zh&&Gr(new Zh)!=re)&&(Gr=function(f){var g=di(f),_=g==ht?f.constructor:n,N=_?au(_):"";if(N)switch(N){case aG:return ce;case lG:return te;case cG:return Qe;case uG:return Me;case dG:return re}return g});function M9(f,g,_){for(var N=-1,j=_.length;++N<j;){var X=_[N],se=X.size;switch(X.type){case"drop":f+=se;break;case"dropRight":g-=se;break;case"take":g=Wr(g,f+se);break;case"takeRight":f=ur(f,g-se);break}}return{start:f,end:g}}function T9(f){var g=f.match(li);return g?g[1].split(ci):[]}function Nk(f,g,_){g=Tl(g,f);for(var N=-1,j=g.length,X=!1;++N<j;){var se=zo(g[N]);if(!(X=f!=null&&_(f,se)))break;f=f[se]}return X||++N!=j?X:(j=f==null?0:f.length,!!j&&_y(j)&&Ca(se,j)&&(Ot(f)||lu(f)))}function A9(f){var g=f.length,_=new f.constructor(g);return g&&typeof f[0]=="string"&&xn.call(f,"index")&&(_.index=f.index,_.input=f.input),_}function kk(f){return typeof f.constructor=="function"&&!lp(f)?kd(Yg(f)):{}}function R9(f,g,_){var N=f.constructor;switch(g){case ae:return Xb(f);case fe:case we:return new N(+f);case ce:return f9(f,_);case Ae:case De:case Je:case me:case ge:case be:case Oe:case Xe:case Ge:return hk(f,_);case te:return new N;case ft:case st:return new N(f);case Ne:return h9(f);case Me:return new N;case Q:return p9(f)}}function N9(f,g){var _=g.length;if(!_)return f;var N=_-1;return g[N]=(_>1?"& ":"")+g[N],g=g.join(_>2?", ":" "),f.replace(As,`{
/* [wrapped with `+g+`] */
`)}function k9(f){return Ot(f)||lu(f)||!!(ON&&f&&f[ON])}function Ca(f,g){var _=typeof f;return g=g??O,!!g&&(_=="number"||_!="symbol"&&Kh.test(f))&&f>-1&&f%1==0&&f<g}function fi(f,g,_){if(!zn(_))return!1;var N=typeof g;return(N=="number"?Pi(_)&&Ca(g,_.length):N=="string"&&g in _)?io(_[g],f):!1}function nS(f,g){if(Ot(f))return!1;var _=typeof f;return _=="number"||_=="symbol"||_=="boolean"||f==null||rs(f)?!0:rn.test(f)||!Tt.test(f)||g!=null&&f in Cn(g)}function P9(f){var g=typeof f;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?f!=="__proto__":f===null}function rS(f){var g=my(f),_=V[g];if(typeof _!="function"||!(g in nn.prototype))return!1;if(f===_)return!0;var N=Zb(_);return!!N&&f===N[0]}function D9(f){return!!PN&&PN in f}var I9=Wg?Ma:wS;function lp(f){var g=f&&f.constructor,_=typeof g=="function"&&g.prototype||Ad;return f===_}function Pk(f){return f===f&&!zn(f)}function Dk(f,g){return function(_){return _==null?!1:_[f]===g&&(g!==n||f in Cn(_))}}function L9(f){var g=by(f,function(N){return _.size===c&&_.clear(),N}),_=g.cache;return g}function O9(f,g){var _=f[1],N=g[1],j=_|N,X=j<(v|y|k),se=N==k&&_==E||N==k&&_==R&&f[7].length<=g[8]||N==(k|R)&&g[7].length<=g[8]&&_==E;if(!(X||se))return f;N&v&&(f[2]=g[2],j|=_&v?0:S);var ue=g[3];if(ue){var ye=f[3];f[3]=ye?mk(ye,ue,g[4]):ue,f[4]=ye?_l(f[3],u):g[4]}return ue=g[5],ue&&(ye=f[5],f[5]=ye?gk(ye,ue,g[6]):ue,f[6]=ye?_l(f[5],u):g[6]),ue=g[7],ue&&(f[7]=ue),N&k&&(f[8]=f[8]==null?g[8]:Wr(f[8],g[8])),f[9]==null&&(f[9]=g[9]),f[0]=g[0],f[1]=j,f}function F9(f){var g=[];if(f!=null)for(var _ in Cn(f))g.push(_);return g}function j9(f){return qg.call(f)}function Ik(f,g,_){return g=ur(g===n?f.length-1:g,0),function(){for(var N=arguments,j=-1,X=ur(N.length-g,0),se=Ce(X);++j<X;)se[j]=N[g+j];j=-1;for(var ue=Ce(g+1);++j<g;)ue[j]=N[j];return ue[g]=_(se),es(f,this,ue)}}function Lk(f,g){return g.length<2?f:su(f,Is(g,0,-1))}function U9(f,g){for(var _=f.length,N=Wr(g.length,_),j=ki(f);N--;){var X=g[N];f[N]=Ca(X,_)?j[X]:n}return f}function iS(f,g){if(!(g==="constructor"&&typeof f[g]=="function")&&g!="__proto__")return f[g]}var Ok=jk(sk),cp=eG||function(f,g){return Rr.setTimeout(f,g)},sS=jk(l9);function Fk(f,g,_){var N=g+"";return sS(f,N9(N,z9(T9(N),_)))}function jk(f){var g=0,_=0;return function(){var N=iG(),j=H-(N-_);if(_=N,j>0){if(++g>=z)return arguments[0]}else g=0;return f.apply(n,arguments)}}function yy(f,g){var _=-1,N=f.length,j=N-1;for(g=g===n?N:g;++_<g;){var X=Bb(_,j),se=f[X];f[X]=f[_],f[_]=se}return f.length=g,f}var Uk=L9(function(f){var g=[];return f.charCodeAt(0)===46&&g.push(""),f.replace($t,function(_,N,j,X){g.push(j?X.replace(bd,"$1"):N||_)}),g});function zo(f){if(typeof f=="string"||rs(f))return f;var g=f+"";return g=="0"&&1/f==-ee?"-0":g}function au(f){if(f!=null){try{return Gg.call(f)}catch{}try{return f+""}catch{}}return""}function z9(f,g){return Ns(Y,function(_){var N="_."+_[0];g&_[1]&&!Bg(f,N)&&f.push(N)}),f.sort()}function zk(f){if(f instanceof nn)return f.clone();var g=new Ps(f.__wrapped__,f.__chain__);return g.__actions__=ki(f.__actions__),g.__index__=f.__index__,g.__values__=f.__values__,g}function B9(f,g,_){(_?fi(f,g,_):g===n)?g=1:g=ur(Ut(g),0);var N=f==null?0:f.length;if(!N||g<1)return[];for(var j=0,X=0,se=Ce(Zg(N/g));j<N;)se[X++]=Is(f,j,j+=g);return se}function H9(f){for(var g=-1,_=f==null?0:f.length,N=0,j=[];++g<_;){var X=f[g];X&&(j[N++]=X)}return j}function V9(){var f=arguments.length;if(!f)return[];for(var g=Ce(f-1),_=arguments[0],N=f;N--;)g[N-1]=arguments[N];return Sl(Ot(_)?ki(_):[_],Nr(g,1))}var $9=Yt(function(f,g){return Qn(f)?rp(f,Nr(g,1,Qn,!0)):[]}),W9=Yt(function(f,g){var _=Ls(g);return Qn(_)&&(_=n),Qn(f)?rp(f,Nr(g,1,Qn,!0),Nt(_,2)):[]}),G9=Yt(function(f,g){var _=Ls(g);return Qn(_)&&(_=n),Qn(f)?rp(f,Nr(g,1,Qn,!0),n,_):[]});function q9(f,g,_){var N=f==null?0:f.length;return N?(g=_||g===n?1:Ut(g),Is(f,g<0?0:g,N)):[]}function X9(f,g,_){var N=f==null?0:f.length;return N?(g=_||g===n?1:Ut(g),g=N-g,Is(f,0,g<0?0:g)):[]}function K9(f,g){return f&&f.length?cy(f,Nt(g,3),!0,!0):[]}function Y9(f,g){return f&&f.length?cy(f,Nt(g,3),!0):[]}function J9(f,g,_,N){var j=f==null?0:f.length;return j?(_&&typeof _!="number"&&fi(f,g,_)&&(_=0,N=j),VG(f,g,_,N)):[]}function Bk(f,g,_){var N=f==null?0:f.length;if(!N)return-1;var j=_==null?0:Ut(_);return j<0&&(j=ur(N+j,0)),Hg(f,Nt(g,3),j)}function Hk(f,g,_){var N=f==null?0:f.length;if(!N)return-1;var j=N-1;return _!==n&&(j=Ut(_),j=_<0?ur(N+j,0):Wr(j,N-1)),Hg(f,Nt(g,3),j,!0)}function Vk(f){var g=f==null?0:f.length;return g?Nr(f,1):[]}function Q9(f){var g=f==null?0:f.length;return g?Nr(f,ee):[]}function Z9(f,g){var _=f==null?0:f.length;return _?(g=g===n?1:Ut(g),Nr(f,g)):[]}function e7(f){for(var g=-1,_=f==null?0:f.length,N={};++g<_;){var j=f[g];N[j[0]]=j[1]}return N}function $k(f){return f&&f.length?f[0]:n}function t7(f,g,_){var N=f==null?0:f.length;if(!N)return-1;var j=_==null?0:Ut(_);return j<0&&(j=ur(N+j,0)),Ed(f,g,j)}function n7(f){var g=f==null?0:f.length;return g?Is(f,0,-1):[]}var r7=Yt(function(f){var g=Fn(f,Gb);return g.length&&g[0]===f[0]?Ob(g):[]}),i7=Yt(function(f){var g=Ls(f),_=Fn(f,Gb);return g===Ls(_)?g=n:_.pop(),_.length&&_[0]===f[0]?Ob(_,Nt(g,2)):[]}),s7=Yt(function(f){var g=Ls(f),_=Fn(f,Gb);return g=typeof g=="function"?g:n,g&&_.pop(),_.length&&_[0]===f[0]?Ob(_,n,g):[]});function o7(f,g){return f==null?"":nG.call(f,g)}function Ls(f){var g=f==null?0:f.length;return g?f[g-1]:n}function a7(f,g,_){var N=f==null?0:f.length;if(!N)return-1;var j=N;return _!==n&&(j=Ut(_),j=j<0?ur(N+j,0):Wr(j,N-1)),g===g?z8(f,g,j):Hg(f,EN,j,!0)}function l7(f,g){return f&&f.length?tk(f,Ut(g)):n}var c7=Yt(Wk);function Wk(f,g){return f&&f.length&&g&&g.length?zb(f,g):f}function u7(f,g,_){return f&&f.length&&g&&g.length?zb(f,g,Nt(_,2)):f}function d7(f,g,_){return f&&f.length&&g&&g.length?zb(f,g,n,_):f}var f7=Ea(function(f,g){var _=f==null?0:f.length,N=Pb(f,g);return ik(f,Fn(g,function(j){return Ca(j,_)?+j:j}).sort(pk)),N});function h7(f,g){var _=[];if(!(f&&f.length))return _;var N=-1,j=[],X=f.length;for(g=Nt(g,3);++N<X;){var se=f[N];g(se,N,f)&&(_.push(se),j.push(N))}return ik(f,j),_}function oS(f){return f==null?f:oG.call(f)}function p7(f,g,_){var N=f==null?0:f.length;return N?(_&&typeof _!="number"&&fi(f,g,_)?(g=0,_=N):(g=g==null?0:Ut(g),_=_===n?N:Ut(_)),Is(f,g,_)):[]}function m7(f,g){return ly(f,g)}function g7(f,g,_){return Vb(f,g,Nt(_,2))}function y7(f,g){var _=f==null?0:f.length;if(_){var N=ly(f,g);if(N<_&&io(f[N],g))return N}return-1}function v7(f,g){return ly(f,g,!0)}function x7(f,g,_){return Vb(f,g,Nt(_,2),!0)}function w7(f,g){var _=f==null?0:f.length;if(_){var N=ly(f,g,!0)-1;if(io(f[N],g))return N}return-1}function b7(f){return f&&f.length?ok(f):[]}function S7(f,g){return f&&f.length?ok(f,Nt(g,2)):[]}function _7(f){var g=f==null?0:f.length;return g?Is(f,1,g):[]}function E7(f,g,_){return f&&f.length?(g=_||g===n?1:Ut(g),Is(f,0,g<0?0:g)):[]}function C7(f,g,_){var N=f==null?0:f.length;return N?(g=_||g===n?1:Ut(g),g=N-g,Is(f,g<0?0:g,N)):[]}function M7(f,g){return f&&f.length?cy(f,Nt(g,3),!1,!0):[]}function T7(f,g){return f&&f.length?cy(f,Nt(g,3)):[]}var A7=Yt(function(f){return Ml(Nr(f,1,Qn,!0))}),R7=Yt(function(f){var g=Ls(f);return Qn(g)&&(g=n),Ml(Nr(f,1,Qn,!0),Nt(g,2))}),N7=Yt(function(f){var g=Ls(f);return g=typeof g=="function"?g:n,Ml(Nr(f,1,Qn,!0),n,g)});function k7(f){return f&&f.length?Ml(f):[]}function P7(f,g){return f&&f.length?Ml(f,Nt(g,2)):[]}function D7(f,g){return g=typeof g=="function"?g:n,f&&f.length?Ml(f,n,g):[]}function aS(f){if(!(f&&f.length))return[];var g=0;return f=bl(f,function(_){if(Qn(_))return g=ur(_.length,g),!0}),Eb(g,function(_){return Fn(f,bb(_))})}function Gk(f,g){if(!(f&&f.length))return[];var _=aS(f);return g==null?_:Fn(_,function(N){return es(g,n,N)})}var I7=Yt(function(f,g){return Qn(f)?rp(f,g):[]}),L7=Yt(function(f){return Wb(bl(f,Qn))}),O7=Yt(function(f){var g=Ls(f);return Qn(g)&&(g=n),Wb(bl(f,Qn),Nt(g,2))}),F7=Yt(function(f){var g=Ls(f);return g=typeof g=="function"?g:n,Wb(bl(f,Qn),n,g)}),j7=Yt(aS);function U7(f,g){return uk(f||[],g||[],np)}function z7(f,g){return uk(f||[],g||[],op)}var B7=Yt(function(f){var g=f.length,_=g>1?f[g-1]:n;return _=typeof _=="function"?(f.pop(),_):n,Gk(f,_)});function qk(f){var g=V(f);return g.__chain__=!0,g}function H7(f,g){return g(f),f}function vy(f,g){return g(f)}var V7=Ea(function(f){var g=f.length,_=g?f[0]:0,N=this.__wrapped__,j=function(X){return Pb(X,f)};return g>1||this.__actions__.length||!(N instanceof nn)||!Ca(_)?this.thru(j):(N=N.slice(_,+_+(g?1:0)),N.__actions__.push({func:vy,args:[j],thisArg:n}),new Ps(N,this.__chain__).thru(function(X){return g&&!X.length&&X.push(n),X}))});function $7(){return qk(this)}function W7(){return new Ps(this.value(),this.__chain__)}function G7(){this.__values__===n&&(this.__values__=a2(this.value()));var f=this.__index__>=this.__values__.length,g=f?n:this.__values__[this.__index__++];return{done:f,value:g}}function q7(){return this}function X7(f){for(var g,_=this;_ instanceof ry;){var N=zk(_);N.__index__=0,N.__values__=n,g?j.__wrapped__=N:g=N;var j=N;_=_.__wrapped__}return j.__wrapped__=f,g}function K7(){var f=this.__wrapped__;if(f instanceof nn){var g=f;return this.__actions__.length&&(g=new nn(this)),g=g.reverse(),g.__actions__.push({func:vy,args:[oS],thisArg:n}),new Ps(g,this.__chain__)}return this.thru(oS)}function Y7(){return ck(this.__wrapped__,this.__actions__)}var J7=uy(function(f,g,_){xn.call(f,_)?++f[_]:Sa(f,_,1)});function Q7(f,g,_){var N=Ot(f)?SN:HG;return _&&fi(f,g,_)&&(g=n),N(f,Nt(g,3))}function Z7(f,g){var _=Ot(f)?bl:GN;return _(f,Nt(g,3))}var eq=wk(Bk),tq=wk(Hk);function nq(f,g){return Nr(xy(f,g),1)}function rq(f,g){return Nr(xy(f,g),ee)}function iq(f,g,_){return _=_===n?1:Ut(_),Nr(xy(f,g),_)}function Xk(f,g){var _=Ot(f)?Ns:Cl;return _(f,Nt(g,3))}function Kk(f,g){var _=Ot(f)?_8:WN;return _(f,Nt(g,3))}var sq=uy(function(f,g,_){xn.call(f,_)?f[_].push(g):Sa(f,_,[g])});function oq(f,g,_,N){f=Pi(f)?f:Od(f),_=_&&!N?Ut(_):0;var j=f.length;return _<0&&(_=ur(j+_,0)),Ey(f)?_<=j&&f.indexOf(g,_)>-1:!!j&&Ed(f,g,_)>-1}var aq=Yt(function(f,g,_){var N=-1,j=typeof g=="function",X=Pi(f)?Ce(f.length):[];return Cl(f,function(se){X[++N]=j?es(g,se,_):ip(se,g,_)}),X}),lq=uy(function(f,g,_){Sa(f,_,g)});function xy(f,g){var _=Ot(f)?Fn:QN;return _(f,Nt(g,3))}function cq(f,g,_,N){return f==null?[]:(Ot(g)||(g=g==null?[]:[g]),_=N?n:_,Ot(_)||(_=_==null?[]:[_]),nk(f,g,_))}var uq=uy(function(f,g,_){f[_?0:1].push(g)},function(){return[[],[]]});function dq(f,g,_){var N=Ot(f)?xb:MN,j=arguments.length<3;return N(f,Nt(g,4),_,j,Cl)}function fq(f,g,_){var N=Ot(f)?E8:MN,j=arguments.length<3;return N(f,Nt(g,4),_,j,WN)}function hq(f,g){var _=Ot(f)?bl:GN;return _(f,Sy(Nt(g,3)))}function pq(f){var g=Ot(f)?BN:o9;return g(f)}function mq(f,g,_){(_?fi(f,g,_):g===n)?g=1:g=Ut(g);var N=Ot(f)?FG:a9;return N(f,g)}function gq(f){var g=Ot(f)?jG:c9;return g(f)}function yq(f){if(f==null)return 0;if(Pi(f))return Ey(f)?Md(f):f.length;var g=Gr(f);return g==te||g==Me?f.size:jb(f).length}function vq(f,g,_){var N=Ot(f)?wb:u9;return _&&fi(f,g,_)&&(g=n),N(f,Nt(g,3))}var xq=Yt(function(f,g){if(f==null)return[];var _=g.length;return _>1&&fi(f,g[0],g[1])?g=[]:_>2&&fi(g[0],g[1],g[2])&&(g=[g[0]]),nk(f,Nr(g,1),[])}),wy=Z8||function(){return Rr.Date.now()};function wq(f,g){if(typeof g!="function")throw new ks(o);return f=Ut(f),function(){if(--f<1)return g.apply(this,arguments)}}function Yk(f,g,_){return g=_?n:g,g=f&&g==null?f.length:g,_a(f,k,n,n,n,n,g)}function Jk(f,g){var _;if(typeof g!="function")throw new ks(o);return f=Ut(f),function(){return--f>0&&(_=g.apply(this,arguments)),f<=1&&(g=n),_}}var lS=Yt(function(f,g,_){var N=v;if(_.length){var j=_l(_,Id(lS));N|=A}return _a(f,N,g,_,j)}),Qk=Yt(function(f,g,_){var N=v|y;if(_.length){var j=_l(_,Id(Qk));N|=A}return _a(g,N,f,_,j)});function Zk(f,g,_){g=_?n:g;var N=_a(f,E,n,n,n,n,n,g);return N.placeholder=Zk.placeholder,N}function e2(f,g,_){g=_?n:g;var N=_a(f,C,n,n,n,n,n,g);return N.placeholder=e2.placeholder,N}function t2(f,g,_){var N,j,X,se,ue,ye,Be=0,He=!1,qe=!1,lt=!0;if(typeof f!="function")throw new ks(o);g=Os(g)||0,zn(_)&&(He=!!_.leading,qe="maxWait"in _,X=qe?ur(Os(_.maxWait)||0,g):X,lt="trailing"in _?!!_.trailing:lt);function Mt(Zn){var so=N,Aa=j;return N=j=n,Be=Zn,se=f.apply(Aa,so),se}function kt(Zn){return Be=Zn,ue=cp(Qt,g),He?Mt(Zn):se}function Wt(Zn){var so=Zn-ye,Aa=Zn-Be,w2=g-so;return qe?Wr(w2,X-Aa):w2}function Pt(Zn){var so=Zn-ye,Aa=Zn-Be;return ye===n||so>=g||so<0||qe&&Aa>=X}function Qt(){var Zn=wy();if(Pt(Zn))return on(Zn);ue=cp(Qt,Wt(Zn))}function on(Zn){return ue=n,lt&&N?Mt(Zn):(N=j=n,se)}function is(){ue!==n&&dk(ue),Be=0,N=ye=j=ue=n}function hi(){return ue===n?se:on(wy())}function ss(){var Zn=wy(),so=Pt(Zn);if(N=arguments,j=this,ye=Zn,so){if(ue===n)return kt(ye);if(qe)return dk(ue),ue=cp(Qt,g),Mt(ye)}return ue===n&&(ue=cp(Qt,g)),se}return ss.cancel=is,ss.flush=hi,ss}var bq=Yt(function(f,g){return $N(f,1,g)}),Sq=Yt(function(f,g,_){return $N(f,Os(g)||0,_)});function _q(f){return _a(f,P)}function by(f,g){if(typeof f!="function"||g!=null&&typeof g!="function")throw new ks(o);var _=function(){var N=arguments,j=g?g.apply(this,N):N[0],X=_.cache;if(X.has(j))return X.get(j);var se=f.apply(this,N);return _.cache=X.set(j,se)||X,se};return _.cache=new(by.Cache||ba),_}by.Cache=ba;function Sy(f){if(typeof f!="function")throw new ks(o);return function(){var g=arguments;switch(g.length){case 0:return!f.call(this);case 1:return!f.call(this,g[0]);case 2:return!f.call(this,g[0],g[1]);case 3:return!f.call(this,g[0],g[1],g[2])}return!f.apply(this,g)}}function Eq(f){return Jk(2,f)}var Cq=d9(function(f,g){g=g.length==1&&Ot(g[0])?Fn(g[0],ts(Nt())):Fn(Nr(g,1),ts(Nt()));var _=g.length;return Yt(function(N){for(var j=-1,X=Wr(N.length,_);++j<X;)N[j]=g[j].call(this,N[j]);return es(f,this,N)})}),cS=Yt(function(f,g){var _=_l(g,Id(cS));return _a(f,A,n,g,_)}),n2=Yt(function(f,g){var _=_l(g,Id(n2));return _a(f,T,n,g,_)}),Mq=Ea(function(f,g){return _a(f,R,n,n,n,g)});function Tq(f,g){if(typeof f!="function")throw new ks(o);return g=g===n?g:Ut(g),Yt(f,g)}function Aq(f,g){if(typeof f!="function")throw new ks(o);return g=g==null?0:ur(Ut(g),0),Yt(function(_){var N=_[g],j=Al(_,0,g);return N&&Sl(j,N),es(f,this,j)})}function Rq(f,g,_){var N=!0,j=!0;if(typeof f!="function")throw new ks(o);return zn(_)&&(N="leading"in _?!!_.leading:N,j="trailing"in _?!!_.trailing:j),t2(f,g,{leading:N,maxWait:g,trailing:j})}function Nq(f){return Yk(f,1)}function kq(f,g){return cS(qb(g),f)}function Pq(){if(!arguments.length)return[];var f=arguments[0];return Ot(f)?f:[f]}function Dq(f){return Ds(f,m)}function Iq(f,g){return g=typeof g=="function"?g:n,Ds(f,m,g)}function Lq(f){return Ds(f,d|m)}function Oq(f,g){return g=typeof g=="function"?g:n,Ds(f,d|m,g)}function Fq(f,g){return g==null||VN(f,g,vr(g))}function io(f,g){return f===g||f!==f&&g!==g}var jq=py(Lb),Uq=py(function(f,g){return f>=g}),lu=KN(function(){return arguments}())?KN:function(f){return Wn(f)&&xn.call(f,"callee")&&!LN.call(f,"callee")},Ot=Ce.isArray,zq=gN?ts(gN):XG;function Pi(f){return f!=null&&_y(f.length)&&!Ma(f)}function Qn(f){return Wn(f)&&Pi(f)}function Bq(f){return f===!0||f===!1||Wn(f)&&di(f)==fe}var Rl=tG||wS,Hq=yN?ts(yN):KG;function Vq(f){return Wn(f)&&f.nodeType===1&&!up(f)}function $q(f){if(f==null)return!0;if(Pi(f)&&(Ot(f)||typeof f=="string"||typeof f.splice=="function"||Rl(f)||Ld(f)||lu(f)))return!f.length;var g=Gr(f);if(g==te||g==Me)return!f.size;if(lp(f))return!jb(f).length;for(var _ in f)if(xn.call(f,_))return!1;return!0}function Wq(f,g){return sp(f,g)}function Gq(f,g,_){_=typeof _=="function"?_:n;var N=_?_(f,g):n;return N===n?sp(f,g,n,_):!!N}function uS(f){if(!Wn(f))return!1;var g=di(f);return g==Ve||g==xe||typeof f.message=="string"&&typeof f.name=="string"&&!up(f)}function qq(f){return typeof f=="number"&&FN(f)}function Ma(f){if(!zn(f))return!1;var g=di(f);return g==Pe||g==et||g==Z||g==St}function r2(f){return typeof f=="number"&&f==Ut(f)}function _y(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=O}function zn(f){var g=typeof f;return f!=null&&(g=="object"||g=="function")}function Wn(f){return f!=null&&typeof f=="object"}var i2=vN?ts(vN):JG;function Xq(f,g){return f===g||Fb(f,g,eS(g))}function Kq(f,g,_){return _=typeof _=="function"?_:n,Fb(f,g,eS(g),_)}function Yq(f){return s2(f)&&f!=+f}function Jq(f){if(I9(f))throw new It(s);return YN(f)}function Qq(f){return f===null}function Zq(f){return f==null}function s2(f){return typeof f=="number"||Wn(f)&&di(f)==ft}function up(f){if(!Wn(f)||di(f)!=ht)return!1;var g=Yg(f);if(g===null)return!0;var _=xn.call(g,"constructor")&&g.constructor;return typeof _=="function"&&_ instanceof _&&Gg.call(_)==K8}var dS=xN?ts(xN):QG;function eX(f){return r2(f)&&f>=-O&&f<=O}var o2=wN?ts(wN):ZG;function Ey(f){return typeof f=="string"||!Ot(f)&&Wn(f)&&di(f)==st}function rs(f){return typeof f=="symbol"||Wn(f)&&di(f)==Q}var Ld=bN?ts(bN):e9;function tX(f){return f===n}function nX(f){return Wn(f)&&Gr(f)==re}function rX(f){return Wn(f)&&di(f)==G}var iX=py(Ub),sX=py(function(f,g){return f<=g});function a2(f){if(!f)return[];if(Pi(f))return Ey(f)?no(f):ki(f);if(Jh&&f[Jh])return F8(f[Jh]());var g=Gr(f),_=g==te?Mb:g==Me?Vg:Od;return _(f)}function Ta(f){if(!f)return f===0?f:0;if(f=Os(f),f===ee||f===-ee){var g=f<0?-1:1;return g*F}return f===f?f:0}function Ut(f){var g=Ta(f),_=g%1;return g===g?_?g-_:g:0}function l2(f){return f?iu(Ut(f),0,ie):0}function Os(f){if(typeof f=="number")return f;if(rs(f))return D;if(zn(f)){var g=typeof f.valueOf=="function"?f.valueOf():f;f=zn(g)?g+"":g}if(typeof f!="string")return f===0?f:+f;f=TN(f);var _=Gh.test(f);return _||Xh.test(f)?w8(f.slice(2),_?2:8):Wh.test(f)?D:+f}function c2(f){return Uo(f,Di(f))}function oX(f){return f?iu(Ut(f),-O,O):f===0?f:0}function gn(f){return f==null?"":ns(f)}var aX=Pd(function(f,g){if(lp(g)||Pi(g)){Uo(g,vr(g),f);return}for(var _ in g)xn.call(g,_)&&np(f,_,g[_])}),u2=Pd(function(f,g){Uo(g,Di(g),f)}),Cy=Pd(function(f,g,_,N){Uo(g,Di(g),f,N)}),lX=Pd(function(f,g,_,N){Uo(g,vr(g),f,N)}),cX=Ea(Pb);function uX(f,g){var _=kd(f);return g==null?_:HN(_,g)}var dX=Yt(function(f,g){f=Cn(f);var _=-1,N=g.length,j=N>2?g[2]:n;for(j&&fi(g[0],g[1],j)&&(N=1);++_<N;)for(var X=g[_],se=Di(X),ue=-1,ye=se.length;++ue<ye;){var Be=se[ue],He=f[Be];(He===n||io(He,Ad[Be])&&!xn.call(f,Be))&&(f[Be]=X[Be])}return f}),fX=Yt(function(f){return f.push(n,Tk),es(d2,n,f)});function hX(f,g){return _N(f,Nt(g,3),jo)}function pX(f,g){return _N(f,Nt(g,3),Ib)}function mX(f,g){return f==null?f:Db(f,Nt(g,3),Di)}function gX(f,g){return f==null?f:qN(f,Nt(g,3),Di)}function yX(f,g){return f&&jo(f,Nt(g,3))}function vX(f,g){return f&&Ib(f,Nt(g,3))}function xX(f){return f==null?[]:oy(f,vr(f))}function wX(f){return f==null?[]:oy(f,Di(f))}function fS(f,g,_){var N=f==null?n:su(f,g);return N===n?_:N}function bX(f,g){return f!=null&&Nk(f,g,$G)}function hS(f,g){return f!=null&&Nk(f,g,WG)}var SX=Sk(function(f,g,_){g!=null&&typeof g.toString!="function"&&(g=qg.call(g)),f[g]=_},mS(Ii)),_X=Sk(function(f,g,_){g!=null&&typeof g.toString!="function"&&(g=qg.call(g)),xn.call(f,g)?f[g].push(_):f[g]=[_]},Nt),EX=Yt(ip);function vr(f){return Pi(f)?zN(f):jb(f)}function Di(f){return Pi(f)?zN(f,!0):t9(f)}function CX(f,g){var _={};return g=Nt(g,3),jo(f,function(N,j,X){Sa(_,g(N,j,X),N)}),_}function MX(f,g){var _={};return g=Nt(g,3),jo(f,function(N,j,X){Sa(_,j,g(N,j,X))}),_}var TX=Pd(function(f,g,_){ay(f,g,_)}),d2=Pd(function(f,g,_,N){ay(f,g,_,N)}),AX=Ea(function(f,g){var _={};if(f==null)return _;var N=!1;g=Fn(g,function(X){return X=Tl(X,f),N||(N=X.length>1),X}),Uo(f,Qb(f),_),N&&(_=Ds(_,d|p|m,S9));for(var j=g.length;j--;)$b(_,g[j]);return _});function RX(f,g){return f2(f,Sy(Nt(g)))}var NX=Ea(function(f,g){return f==null?{}:r9(f,g)});function f2(f,g){if(f==null)return{};var _=Fn(Qb(f),function(N){return[N]});return g=Nt(g),rk(f,_,function(N,j){return g(N,j[0])})}function kX(f,g,_){g=Tl(g,f);var N=-1,j=g.length;for(j||(j=1,f=n);++N<j;){var X=f==null?n:f[zo(g[N])];X===n&&(N=j,X=_),f=Ma(X)?X.call(f):X}return f}function PX(f,g,_){return f==null?f:op(f,g,_)}function DX(f,g,_,N){return N=typeof N=="function"?N:n,f==null?f:op(f,g,_,N)}var h2=Ck(vr),p2=Ck(Di);function IX(f,g,_){var N=Ot(f),j=N||Rl(f)||Ld(f);if(g=Nt(g,4),_==null){var X=f&&f.constructor;j?_=N?new X:[]:zn(f)?_=Ma(X)?kd(Yg(f)):{}:_={}}return(j?Ns:jo)(f,function(se,ue,ye){return g(_,se,ue,ye)}),_}function LX(f,g){return f==null?!0:$b(f,g)}function OX(f,g,_){return f==null?f:lk(f,g,qb(_))}function FX(f,g,_,N){return N=typeof N=="function"?N:n,f==null?f:lk(f,g,qb(_),N)}function Od(f){return f==null?[]:Cb(f,vr(f))}function jX(f){return f==null?[]:Cb(f,Di(f))}function UX(f,g,_){return _===n&&(_=g,g=n),_!==n&&(_=Os(_),_=_===_?_:0),g!==n&&(g=Os(g),g=g===g?g:0),iu(Os(f),g,_)}function zX(f,g,_){return g=Ta(g),_===n?(_=g,g=0):_=Ta(_),f=Os(f),GG(f,g,_)}function BX(f,g,_){if(_&&typeof _!="boolean"&&fi(f,g,_)&&(g=_=n),_===n&&(typeof g=="boolean"?(_=g,g=n):typeof f=="boolean"&&(_=f,f=n)),f===n&&g===n?(f=0,g=1):(f=Ta(f),g===n?(g=f,f=0):g=Ta(g)),f>g){var N=f;f=g,g=N}if(_||f%1||g%1){var j=jN();return Wr(f+j*(g-f+x8("1e-"+((j+"").length-1))),g)}return Bb(f,g)}var HX=Dd(function(f,g,_){return g=g.toLowerCase(),f+(_?m2(g):g)});function m2(f){return pS(gn(f).toLowerCase())}function g2(f){return f=gn(f),f&&f.replace(W,P8).replace(c8,"")}function VX(f,g,_){f=gn(f),g=ns(g);var N=f.length;_=_===n?N:iu(Ut(_),0,N);var j=_;return _-=g.length,_>=0&&f.slice(_,j)==g}function $X(f){return f=gn(f),f&&ke.test(f)?f.replace(rt,D8):f}function WX(f){return f=gn(f),f&&vn.test(f)?f.replace(Pn,"\\$&"):f}var GX=Dd(function(f,g,_){return f+(_?"-":"")+g.toLowerCase()}),qX=Dd(function(f,g,_){return f+(_?" ":"")+g.toLowerCase()}),XX=xk("toLowerCase");function KX(f,g,_){f=gn(f),g=Ut(g);var N=g?Md(f):0;if(!g||N>=g)return f;var j=(g-N)/2;return hy(ey(j),_)+f+hy(Zg(j),_)}function YX(f,g,_){f=gn(f),g=Ut(g);var N=g?Md(f):0;return g&&N<g?f+hy(g-N,_):f}function JX(f,g,_){f=gn(f),g=Ut(g);var N=g?Md(f):0;return g&&N<g?hy(g-N,_)+f:f}function QX(f,g,_){return _||g==null?g=0:g&&(g=+g),sG(gn(f).replace(dn,""),g||0)}function ZX(f,g,_){return(_?fi(f,g,_):g===n)?g=1:g=Ut(g),Hb(gn(f),g)}function eK(){var f=arguments,g=gn(f[0]);return f.length<3?g:g.replace(f[1],f[2])}var tK=Dd(function(f,g,_){return f+(_?"_":"")+g.toLowerCase()});function nK(f,g,_){return _&&typeof _!="number"&&fi(f,g,_)&&(g=_=n),_=_===n?ie:_>>>0,_?(f=gn(f),f&&(typeof g=="string"||g!=null&&!dS(g))&&(g=ns(g),!g&&Cd(f))?Al(no(f),0,_):f.split(g,_)):[]}var rK=Dd(function(f,g,_){return f+(_?" ":"")+pS(g)});function iK(f,g,_){return f=gn(f),_=_==null?0:iu(Ut(_),0,f.length),g=ns(g),f.slice(_,_+g.length)==g}function sK(f,g,_){var N=V.templateSettings;_&&fi(f,g,_)&&(g=n),f=gn(f),g=Cy({},g,N,Mk);var j=Cy({},g.imports,N.imports,Mk),X=vr(j),se=Cb(j,X),ue,ye,Be=0,He=g.interpolate||pe,qe="__p += '",lt=Tb((g.escape||pe).source+"|"+He.source+"|"+(He===pt?Sd:pe).source+"|"+(g.evaluate||pe).source+"|$","g"),Mt="//# sourceURL="+(xn.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++p8+"]")+`
`;f.replace(lt,function(Pt,Qt,on,is,hi,ss){return on||(on=is),qe+=f.slice(Be,ss).replace(_e,I8),Qt&&(ue=!0,qe+=`' +
__e(`+Qt+`) +
'`),hi&&(ye=!0,qe+=`';
`+hi+`;
__p += '`),on&&(qe+=`' +
((__t = (`+on+`)) == null ? '' : __t) +
'`),Be=ss+Pt.length,Pt}),qe+=`';
`;var kt=xn.call(g,"variable")&&g.variable;if(!kt)qe=`with (obj) {
`+qe+`
}
`;else if(xl.test(kt))throw new It(a);qe=(ye?qe.replace(wt,""):qe).replace(de,"$1").replace(ot,"$1;"),qe="function("+(kt||"obj")+`) {
`+(kt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ue?", __e = _.escape":"")+(ye?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+qe+`return __p
}`;var Wt=v2(function(){return mn(X,Mt+"return "+qe).apply(n,se)});if(Wt.source=qe,uS(Wt))throw Wt;return Wt}function oK(f){return gn(f).toLowerCase()}function aK(f){return gn(f).toUpperCase()}function lK(f,g,_){if(f=gn(f),f&&(_||g===n))return TN(f);if(!f||!(g=ns(g)))return f;var N=no(f),j=no(g),X=AN(N,j),se=RN(N,j)+1;return Al(N,X,se).join("")}function cK(f,g,_){if(f=gn(f),f&&(_||g===n))return f.slice(0,kN(f)+1);if(!f||!(g=ns(g)))return f;var N=no(f),j=RN(N,no(g))+1;return Al(N,0,j).join("")}function uK(f,g,_){if(f=gn(f),f&&(_||g===n))return f.replace(dn,"");if(!f||!(g=ns(g)))return f;var N=no(f),j=AN(N,no(g));return Al(N,j).join("")}function dK(f,g){var _=M,N=L;if(zn(g)){var j="separator"in g?g.separator:j;_="length"in g?Ut(g.length):_,N="omission"in g?ns(g.omission):N}f=gn(f);var X=f.length;if(Cd(f)){var se=no(f);X=se.length}if(_>=X)return f;var ue=_-Md(N);if(ue<1)return N;var ye=se?Al(se,0,ue).join(""):f.slice(0,ue);if(j===n)return ye+N;if(se&&(ue+=ye.length-ue),dS(j)){if(f.slice(ue).search(j)){var Be,He=ye;for(j.global||(j=Tb(j.source,gn(_d.exec(j))+"g")),j.lastIndex=0;Be=j.exec(He);)var qe=Be.index;ye=ye.slice(0,qe===n?ue:qe)}}else if(f.indexOf(ns(j),ue)!=ue){var lt=ye.lastIndexOf(j);lt>-1&&(ye=ye.slice(0,lt))}return ye+N}function fK(f){return f=gn(f),f&&je.test(f)?f.replace(We,B8):f}var hK=Dd(function(f,g,_){return f+(_?" ":"")+g.toUpperCase()}),pS=xk("toUpperCase");function y2(f,g,_){return f=gn(f),g=_?n:g,g===n?O8(f)?$8(f):T8(f):f.match(g)||[]}var v2=Yt(function(f,g){try{return es(f,n,g)}catch(_){return uS(_)?_:new It(_)}}),pK=Ea(function(f,g){return Ns(g,function(_){_=zo(_),Sa(f,_,lS(f[_],f))}),f});function mK(f){var g=f==null?0:f.length,_=Nt();return f=g?Fn(f,function(N){if(typeof N[1]!="function")throw new ks(o);return[_(N[0]),N[1]]}):[],Yt(function(N){for(var j=-1;++j<g;){var X=f[j];if(es(X[0],this,N))return es(X[1],this,N)}})}function gK(f){return BG(Ds(f,d))}function mS(f){return function(){return f}}function yK(f,g){return f==null||f!==f?g:f}var vK=bk(),xK=bk(!0);function Ii(f){return f}function gS(f){return JN(typeof f=="function"?f:Ds(f,d))}function wK(f){return ZN(Ds(f,d))}function bK(f,g){return ek(f,Ds(g,d))}var SK=Yt(function(f,g){return function(_){return ip(_,f,g)}}),_K=Yt(function(f,g){return function(_){return ip(f,_,g)}});function yS(f,g,_){var N=vr(g),j=oy(g,N);_==null&&!(zn(g)&&(j.length||!N.length))&&(_=g,g=f,f=this,j=oy(g,vr(g)));var X=!(zn(_)&&"chain"in _)||!!_.chain,se=Ma(f);return Ns(j,function(ue){var ye=g[ue];f[ue]=ye,se&&(f.prototype[ue]=function(){var Be=this.__chain__;if(X||Be){var He=f(this.__wrapped__),qe=He.__actions__=ki(this.__actions__);return qe.push({func:ye,args:arguments,thisArg:f}),He.__chain__=Be,He}return ye.apply(f,Sl([this.value()],arguments))})}),f}function EK(){return Rr._===this&&(Rr._=Y8),this}function vS(){}function CK(f){return f=Ut(f),Yt(function(g){return tk(g,f)})}var MK=Kb(Fn),TK=Kb(SN),AK=Kb(wb);function x2(f){return nS(f)?bb(zo(f)):i9(f)}function RK(f){return function(g){return f==null?n:su(f,g)}}var NK=_k(),kK=_k(!0);function xS(){return[]}function wS(){return!1}function PK(){return{}}function DK(){return""}function IK(){return!0}function LK(f,g){if(f=Ut(f),f<1||f>O)return[];var _=ie,N=Wr(f,ie);g=Nt(g),f-=ie;for(var j=Eb(N,g);++_<f;)g(_);return j}function OK(f){return Ot(f)?Fn(f,zo):rs(f)?[f]:ki(Uk(gn(f)))}function FK(f){var g=++X8;return gn(f)+g}var jK=fy(function(f,g){return f+g},0),UK=Yb("ceil"),zK=fy(function(f,g){return f/g},1),BK=Yb("floor");function HK(f){return f&&f.length?sy(f,Ii,Lb):n}function VK(f,g){return f&&f.length?sy(f,Nt(g,2),Lb):n}function $K(f){return CN(f,Ii)}function WK(f,g){return CN(f,Nt(g,2))}function GK(f){return f&&f.length?sy(f,Ii,Ub):n}function qK(f,g){return f&&f.length?sy(f,Nt(g,2),Ub):n}var XK=fy(function(f,g){return f*g},1),KK=Yb("round"),YK=fy(function(f,g){return f-g},0);function JK(f){return f&&f.length?_b(f,Ii):0}function QK(f,g){return f&&f.length?_b(f,Nt(g,2)):0}return V.after=wq,V.ary=Yk,V.assign=aX,V.assignIn=u2,V.assignInWith=Cy,V.assignWith=lX,V.at=cX,V.before=Jk,V.bind=lS,V.bindAll=pK,V.bindKey=Qk,V.castArray=Pq,V.chain=qk,V.chunk=B9,V.compact=H9,V.concat=V9,V.cond=mK,V.conforms=gK,V.constant=mS,V.countBy=J7,V.create=uX,V.curry=Zk,V.curryRight=e2,V.debounce=t2,V.defaults=dX,V.defaultsDeep=fX,V.defer=bq,V.delay=Sq,V.difference=$9,V.differenceBy=W9,V.differenceWith=G9,V.drop=q9,V.dropRight=X9,V.dropRightWhile=K9,V.dropWhile=Y9,V.fill=J9,V.filter=Z7,V.flatMap=nq,V.flatMapDeep=rq,V.flatMapDepth=iq,V.flatten=Vk,V.flattenDeep=Q9,V.flattenDepth=Z9,V.flip=_q,V.flow=vK,V.flowRight=xK,V.fromPairs=e7,V.functions=xX,V.functionsIn=wX,V.groupBy=sq,V.initial=n7,V.intersection=r7,V.intersectionBy=i7,V.intersectionWith=s7,V.invert=SX,V.invertBy=_X,V.invokeMap=aq,V.iteratee=gS,V.keyBy=lq,V.keys=vr,V.keysIn=Di,V.map=xy,V.mapKeys=CX,V.mapValues=MX,V.matches=wK,V.matchesProperty=bK,V.memoize=by,V.merge=TX,V.mergeWith=d2,V.method=SK,V.methodOf=_K,V.mixin=yS,V.negate=Sy,V.nthArg=CK,V.omit=AX,V.omitBy=RX,V.once=Eq,V.orderBy=cq,V.over=MK,V.overArgs=Cq,V.overEvery=TK,V.overSome=AK,V.partial=cS,V.partialRight=n2,V.partition=uq,V.pick=NX,V.pickBy=f2,V.property=x2,V.propertyOf=RK,V.pull=c7,V.pullAll=Wk,V.pullAllBy=u7,V.pullAllWith=d7,V.pullAt=f7,V.range=NK,V.rangeRight=kK,V.rearg=Mq,V.reject=hq,V.remove=h7,V.rest=Tq,V.reverse=oS,V.sampleSize=mq,V.set=PX,V.setWith=DX,V.shuffle=gq,V.slice=p7,V.sortBy=xq,V.sortedUniq=b7,V.sortedUniqBy=S7,V.split=nK,V.spread=Aq,V.tail=_7,V.take=E7,V.takeRight=C7,V.takeRightWhile=M7,V.takeWhile=T7,V.tap=H7,V.throttle=Rq,V.thru=vy,V.toArray=a2,V.toPairs=h2,V.toPairsIn=p2,V.toPath=OK,V.toPlainObject=c2,V.transform=IX,V.unary=Nq,V.union=A7,V.unionBy=R7,V.unionWith=N7,V.uniq=k7,V.uniqBy=P7,V.uniqWith=D7,V.unset=LX,V.unzip=aS,V.unzipWith=Gk,V.update=OX,V.updateWith=FX,V.values=Od,V.valuesIn=jX,V.without=I7,V.words=y2,V.wrap=kq,V.xor=L7,V.xorBy=O7,V.xorWith=F7,V.zip=j7,V.zipObject=U7,V.zipObjectDeep=z7,V.zipWith=B7,V.entries=h2,V.entriesIn=p2,V.extend=u2,V.extendWith=Cy,yS(V,V),V.add=jK,V.attempt=v2,V.camelCase=HX,V.capitalize=m2,V.ceil=UK,V.clamp=UX,V.clone=Dq,V.cloneDeep=Lq,V.cloneDeepWith=Oq,V.cloneWith=Iq,V.conformsTo=Fq,V.deburr=g2,V.defaultTo=yK,V.divide=zK,V.endsWith=VX,V.eq=io,V.escape=$X,V.escapeRegExp=WX,V.every=Q7,V.find=eq,V.findIndex=Bk,V.findKey=hX,V.findLast=tq,V.findLastIndex=Hk,V.findLastKey=pX,V.floor=BK,V.forEach=Xk,V.forEachRight=Kk,V.forIn=mX,V.forInRight=gX,V.forOwn=yX,V.forOwnRight=vX,V.get=fS,V.gt=jq,V.gte=Uq,V.has=bX,V.hasIn=hS,V.head=$k,V.identity=Ii,V.includes=oq,V.indexOf=t7,V.inRange=zX,V.invoke=EX,V.isArguments=lu,V.isArray=Ot,V.isArrayBuffer=zq,V.isArrayLike=Pi,V.isArrayLikeObject=Qn,V.isBoolean=Bq,V.isBuffer=Rl,V.isDate=Hq,V.isElement=Vq,V.isEmpty=$q,V.isEqual=Wq,V.isEqualWith=Gq,V.isError=uS,V.isFinite=qq,V.isFunction=Ma,V.isInteger=r2,V.isLength=_y,V.isMap=i2,V.isMatch=Xq,V.isMatchWith=Kq,V.isNaN=Yq,V.isNative=Jq,V.isNil=Zq,V.isNull=Qq,V.isNumber=s2,V.isObject=zn,V.isObjectLike=Wn,V.isPlainObject=up,V.isRegExp=dS,V.isSafeInteger=eX,V.isSet=o2,V.isString=Ey,V.isSymbol=rs,V.isTypedArray=Ld,V.isUndefined=tX,V.isWeakMap=nX,V.isWeakSet=rX,V.join=o7,V.kebabCase=GX,V.last=Ls,V.lastIndexOf=a7,V.lowerCase=qX,V.lowerFirst=XX,V.lt=iX,V.lte=sX,V.max=HK,V.maxBy=VK,V.mean=$K,V.meanBy=WK,V.min=GK,V.minBy=qK,V.stubArray=xS,V.stubFalse=wS,V.stubObject=PK,V.stubString=DK,V.stubTrue=IK,V.multiply=XK,V.nth=l7,V.noConflict=EK,V.noop=vS,V.now=wy,V.pad=KX,V.padEnd=YX,V.padStart=JX,V.parseInt=QX,V.random=BX,V.reduce=dq,V.reduceRight=fq,V.repeat=ZX,V.replace=eK,V.result=kX,V.round=KK,V.runInContext=he,V.sample=pq,V.size=yq,V.snakeCase=tK,V.some=vq,V.sortedIndex=m7,V.sortedIndexBy=g7,V.sortedIndexOf=y7,V.sortedLastIndex=v7,V.sortedLastIndexBy=x7,V.sortedLastIndexOf=w7,V.startCase=rK,V.startsWith=iK,V.subtract=YK,V.sum=JK,V.sumBy=QK,V.template=sK,V.times=LK,V.toFinite=Ta,V.toInteger=Ut,V.toLength=l2,V.toLower=oK,V.toNumber=Os,V.toSafeInteger=oX,V.toString=gn,V.toUpper=aK,V.trim=lK,V.trimEnd=cK,V.trimStart=uK,V.truncate=dK,V.unescape=fK,V.uniqueId=FK,V.upperCase=hK,V.upperFirst=pS,V.each=Xk,V.eachRight=Kk,V.first=$k,yS(V,function(){var f={};return jo(V,function(g,_){xn.call(V.prototype,_)||(f[_]=g)}),f}(),{chain:!1}),V.VERSION=r,Ns(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){V[f].placeholder=V}),Ns(["drop","take"],function(f,g){nn.prototype[f]=function(_){_=_===n?1:ur(Ut(_),0);var N=this.__filtered__&&!g?new nn(this):this.clone();return N.__filtered__?N.__takeCount__=Wr(_,N.__takeCount__):N.__views__.push({size:Wr(_,ie),type:f+(N.__dir__<0?"Right":"")}),N},nn.prototype[f+"Right"]=function(_){return this.reverse()[f](_).reverse()}}),Ns(["filter","map","takeWhile"],function(f,g){var _=g+1,N=_==B||_==q;nn.prototype[f]=function(j){var X=this.clone();return X.__iteratees__.push({iteratee:Nt(j,3),type:_}),X.__filtered__=X.__filtered__||N,X}}),Ns(["head","last"],function(f,g){var _="take"+(g?"Right":"");nn.prototype[f]=function(){return this[_](1).value()[0]}}),Ns(["initial","tail"],function(f,g){var _="drop"+(g?"":"Right");nn.prototype[f]=function(){return this.__filtered__?new nn(this):this[_](1)}}),nn.prototype.compact=function(){return this.filter(Ii)},nn.prototype.find=function(f){return this.filter(f).head()},nn.prototype.findLast=function(f){return this.reverse().find(f)},nn.prototype.invokeMap=Yt(function(f,g){return typeof f=="function"?new nn(this):this.map(function(_){return ip(_,f,g)})}),nn.prototype.reject=function(f){return this.filter(Sy(Nt(f)))},nn.prototype.slice=function(f,g){f=Ut(f);var _=this;return _.__filtered__&&(f>0||g<0)?new nn(_):(f<0?_=_.takeRight(-f):f&&(_=_.drop(f)),g!==n&&(g=Ut(g),_=g<0?_.dropRight(-g):_.take(g-f)),_)},nn.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},nn.prototype.toArray=function(){return this.take(ie)},jo(nn.prototype,function(f,g){var _=/^(?:filter|find|map|reject)|While$/.test(g),N=/^(?:head|last)$/.test(g),j=V[N?"take"+(g=="last"?"Right":""):g],X=N||/^find/.test(g);j&&(V.prototype[g]=function(){var se=this.__wrapped__,ue=N?[1]:arguments,ye=se instanceof nn,Be=ue[0],He=ye||Ot(se),qe=function(Qt){var on=j.apply(V,Sl([Qt],ue));return N&&lt?on[0]:on};He&&_&&typeof Be=="function"&&Be.length!=1&&(ye=He=!1);var lt=this.__chain__,Mt=!!this.__actions__.length,kt=X&&!lt,Wt=ye&&!Mt;if(!X&&He){se=Wt?se:new nn(this);var Pt=f.apply(se,ue);return Pt.__actions__.push({func:vy,args:[qe],thisArg:n}),new Ps(Pt,lt)}return kt&&Wt?f.apply(this,ue):(Pt=this.thru(qe),kt?N?Pt.value()[0]:Pt.value():Pt)})}),Ns(["pop","push","shift","sort","splice","unshift"],function(f){var g=$g[f],_=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",N=/^(?:pop|shift)$/.test(f);V.prototype[f]=function(){var j=arguments;if(N&&!this.__chain__){var X=this.value();return g.apply(Ot(X)?X:[],j)}return this[_](function(se){return g.apply(Ot(se)?se:[],j)})}}),jo(nn.prototype,function(f,g){var _=V[g];if(_){var N=_.name+"";xn.call(Nd,N)||(Nd[N]=[]),Nd[N].push({name:g,func:_})}}),Nd[dy(n,y).name]=[{name:"wrapper",func:n}],nn.prototype.clone=fG,nn.prototype.reverse=hG,nn.prototype.value=pG,V.prototype.at=V7,V.prototype.chain=$7,V.prototype.commit=W7,V.prototype.next=G7,V.prototype.plant=X7,V.prototype.reverse=K7,V.prototype.toJSON=V.prototype.valueOf=V.prototype.value=Y7,V.prototype.first=V.prototype.head,Jh&&(V.prototype[Jh]=q7),V},Td=W8();eu?((eu.exports=Td)._=Td,gb._=Td):Rr._=Td}).call(Ha)})(A0,A0.exports);var Jke=A0.exports;const Qke=["#2563eb","#000000","#FF0000","#00FF00","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#A52A2A"],Zke=({whiteboard:t,onCanvasChange:e,onSave:n,whiteboardColor:r,onAutoSave:i,isMobile:s=!1,onScaledHeightChange:o,updatedAt:a,aiEnabled:l})=>{const c=b.useRef(null);rr();const{theme:u}=Ts(),d=u==="light",[p,m]=b.useState("pen"),[x,w]=b.useState("#2563eb"),[v,y]=b.useState(s?3:2),[S,E]=b.useState(!1),[C,A]=b.useState(1),[T,k]=b.useState(null),[R,P]=b.useState(0),[M,L]=b.useState(!1),[z,H]=b.useState([]),[B,K]=b.useState(0),[q,ee]=b.useState(!1),[O,F]=b.useState(!1),[D,ie]=b.useState({x:0,y:0}),[$,U]=b.useState(1),[Y,oe]=b.useState(0),[ne,Z]=b.useState({x:0,y:0}),[fe,we]=b.useState({width:t.canvas_width||500,height:t.canvas_height||500}),xe=b.useRef(null);b.useEffect(()=>{var I;if(c.current&&t.canvas_data&&!M)try{console.log("🎨 Loading canvas data:",{dataType:typeof t.canvas_data,isArray:Array.isArray(t.canvas_data),dataLength:Array.isArray(t.canvas_data)?t.canvas_data.length:"N/A",dataPreview:typeof t.canvas_data=="string"?t.canvas_data.substring(0,300):JSON.stringify(t.canvas_data).substring(0,300)});let re=t.canvas_data;if(typeof re=="string")try{const G=JSON.parse(re);if(Array.isArray(G))re=G;else if(G&&typeof G=="object"&&G.paths)re=G.paths;else throw new Error("Invalid parsed format")}catch(G){console.warn("🎨 Failed to parse string canvas data:",G),console.warn("🎨 Corrupted data preview:",((I=re==null?void 0:re.substring)==null?void 0:I.call(re,0,200))||"N/A"),re=[]}else re&&typeof re=="object"&&re.paths?(console.log("🎨 Data is in object format with paths, extracting array"),re=re.paths):Array.isArray(re)||(console.warn("🎨 Unknown data format or not an array, using empty array"),re=[]);Array.isArray(re)||(console.warn("🎨 Data is not an array after processing, forcing empty array:",typeof re),re=[]);try{const G=JSON.stringify(re);JSON.parse(G)}catch(G){console.error("🎨 Canvas data fails JSON validation, using empty array:",G),re=[]}if(re.length>0){const G=re[0];(!G.drawMode||!G.strokeColor||!G.strokeWidth)&&(console.log("🎨 Reconstructing missing metadata for canvas paths"),re=re.map((ae,ce)=>({drawMode:!0,strokeColor:ae.strokeColor||"#2563eb",strokeWidth:ae.strokeWidth||2,paths:ae.paths||ae||[]})))}if(console.log("🎨 Final data to load:",{isArray:Array.isArray(re),length:Array.isArray(re)?re.length:"N/A",dataPreview:JSON.stringify(re).substring(0,300)}),Array.isArray(re)){const G=console.warn,ae=console.error;console.warn=(...ce)=>{var Ae,De;(De=(Ae=ce[0])==null?void 0:Ae.includes)!=null&&De.call(Ae,"No stroke found")||G.apply(console,ce)},console.error=(...ce)=>{var Ae,De;(De=(Ae=ce[0])==null?void 0:Ae.includes)!=null&&De.call(Ae,"No stroke found")||ae.apply(console,ce)},c.current.loadPaths(re),L(!0),H(re),K(Date.now()),T&&(clearTimeout(T),k(null),console.log("🎨 Cleared pending auto-save timeout after loading data")),console.log("🎨 Canvas data loaded successfully"),console.warn=G,console.error=ae}else console.warn("🎨 Invalid canvas data format, using empty canvas:",{dataType:typeof re,dataValue:re}),c.current.loadPaths([]),L(!0),H([]),K(Date.now()),T&&(clearTimeout(T),k(null))}catch(re){console.error("🎨 Failed to load canvas data:",re);try{c.current.loadPaths([]),L(!0),H([]),K(Date.now()),T&&(clearTimeout(T),k(null)),console.log("🎨 Auto-fixing corrupted canvas data after load error...");try{n([])}catch(G){console.error("🎨 Failed to auto-fix corrupted data:",G)}}catch(G){console.error("🎨 Failed to load empty canvas:",G)}}},[t.canvas_data,M,T]),b.useEffect(()=>{if(s&&xe.current){const I=new ResizeObserver(re=>{for(let G of re){const ae=G.contentRect.width;if(t.canvas_width&&ae>0){const ce=ae/t.canvas_width;A(ce),o&&o(t.canvas_height*ce)}}});return I.observe(xe.current),()=>I.disconnect()}else s||A(1)},[s,t.canvas_width]),b.useEffect(()=>{if(!xe.current)return;const I=new ResizeObserver(G=>{for(let ae of G){const{width:ce,height:Ae}=ae.contentRect;ce>0&&Ae>0&&(console.log("🎨 Container dimensions changed:",{width:ce,height:Ae}),we({width:Math.floor(ce),height:Math.floor(Ae)}))}});I.observe(xe.current);const re=xe.current.getBoundingClientRect();return re.width>0&&re.height>0&&(console.log("🎨 Initial container dimensions:",{width:re.width,height:re.height}),we({width:Math.floor(re.width),height:Math.floor(re.height)})),()=>I.disconnect()},[a]),b.useEffect(()=>{console.log("🎨 Canvas dimensions updated:",fe)},[fe]);const Ve=b.useCallback(Jke.debounce(async(I,re)=>{try{if(!Array.isArray(I)){console.warn("🎨 Invalid canvas data format - not an array:",typeof I);return}const G=JSON.stringify(I);JSON.parse(G),console.log("🎨 Auto-saving canvas data:",{pathCount:I.length,dataPreview:G.substring(0,100),whiteboardId:re}),await n({canvas_data:I,updated_at:new Date().toISOString()}),console.log("🎨 Canvas auto-save completed successfully")}catch(G){console.error("🎨 Canvas auto-save failed:",G),G instanceof Error&&(G.message.includes("JSON")||G.message.includes("stringify"))&&console.error("🎨 Canvas data is corrupted and cannot be saved. This may be due to a drawing library error.")}},500),[n]),Pe=b.useCallback(async()=>{if(console.log("🎨 handleDrawingEnd called."),E(!1),!c.current)return;const I=Date.now()-B;if(I<2e3){console.log("🎨 Skipping auto-save - too soon after canvas load:",{timeSinceLoad:I});return}try{const re=await c.current.exportPaths();if(console.log("🎨 WhiteboardCanvas: Raw exported paths:",re),!Array.isArray(re)){console.warn("🎨 Invalid canvas data format from exportPaths - not an array:",typeof re);return}try{const Ae=JSON.stringify(re);JSON.parse(Ae)}catch(Ae){console.error("🎨 Canvas data is corrupted and cannot be processed:",Ae);return}let G=[];if(t.canvas_data){if(Array.isArray(t.canvas_data))G=t.canvas_data;else if(typeof t.canvas_data=="object"&&t.canvas_data.paths)G=t.canvas_data.paths||[];else if(typeof t.canvas_data=="string")try{const Ae=JSON.parse(t.canvas_data);G=Array.isArray(Ae)?Ae:Ae.paths||[]}catch{G=[]}}const ae=JSON.stringify(re),ce=JSON.stringify(G);if(console.log("🎨 Canvas change detection:",{currentPaths:(re==null?void 0:re.length)||0,savedPaths:(G==null?void 0:G.length)||0,hasChanges:ae!==ce,currentDataPreview:ae.substring(0,100),savedDataPreview:ce.substring(0,100),currentDataFull:ae,savedDataFull:ce}),ae!==ce){if(console.log("🎨 Canvas changes detected, scheduling auto-save..."),re.length===0&&(z.length>0||G.length>0)&&!q){console.warn("🎨 Preventing accidental canvas clear - expected content but got empty data",{expectedPaths:Math.max(z.length,G.length),currentPaths:re.length,timeSinceLoad:Date.now()-B,lastLoadedCount:z.length,savedDataCount:G.length,isIntentionalClear:q});return}else q&&re.length===0&&console.log("🎨 Allowing intentional canvas clear");T&&clearTimeout(T);const Ae=setTimeout(()=>{Ve(re,t.id)},3e3);k(Ae)}else console.log("🎨 No canvas changes detected, skipping auto-save")}catch(re){console.error("Failed to check canvas changes:",re)}},[T,Ve,t.canvas_data,c,z,B,q]);b.useEffect(()=>()=>{T&&clearTimeout(T)},[T]);const et=I=>{m(I),c.current&&(I==="eraser"?c.current.eraseMode(!0):c.current.eraseMode(!1))},te=I=>{w(I),p==="pen"&&(m("pen"),c.current&&c.current.eraseMode(!1))},ft=I=>{y(I[0])},Ye=()=>{c.current&&c.current.undo()},ht=()=>{c.current&&c.current.redo()},Qe=async()=>{if(c.current){ee(!0),c.current.clearCanvas();try{await n({canvas_data:[],updated_at:new Date().toISOString()}),H([]),console.log("🎨 Canvas cleared and saved successfully")}catch(I){console.error("🎨 Failed to save cleared canvas:",I)}finally{setTimeout(()=>ee(!1),1e3)}}},St=(I,re)=>{const G=I.clientX-re.clientX,ae=I.clientY-re.clientY;return Math.sqrt(G*G+ae*ae)},Ne=(I,re)=>({x:(I.clientX+re.clientX)/2,y:(I.clientY+re.clientY)/2}),Me=I=>{if(s)if(console.log(`Touch start: ${I.touches.length} fingers`),I.touches.length===2){I.preventDefault(),I.stopPropagation(),F(!0),E(!1);const re=St(I.touches[0],I.touches[1]);oe(re);const G=Ne(I.touches[0],I.touches[1]);Z(G),console.log("Multi-touch enabled for pan/zoom")}else I.touches.length===1&&(O||console.log("Single finger - drawing mode"))},st=I=>{if(s)if(I.touches.length===2){if(I.preventDefault(),I.stopPropagation(),!O){F(!0),E(!1);const De=St(I.touches[0],I.touches[1]);oe(De);const Je=Ne(I.touches[0],I.touches[1]);Z(Je),console.log("Multi-touch enabled during move");return}const re=St(I.touches[0],I.touches[1]),G=Ne(I.touches[0],I.touches[1]);if(Y>0){const De=re/Y,Je=Math.min(3,Math.max(.25,$*De));U(Je),oe(re)}const ae=G.x-ne.x,ce=G.y-ne.y,Ae={x:D.x+ae*.8,y:D.y+ce*.8};ie(Ae),Z(G)}else O&&I.touches.length===1&&(I.preventDefault(),I.stopPropagation())},Q=I=>{s&&(console.log(`Touch end: ${I.touches.length} fingers remaining`),I.touches.length<2&&O&&(console.log("Exiting multi-touch mode"),F(!1),oe(0),E(!1)))};return b.useEffect(()=>{if(!s)return;const I=re=>{S&&!O&&re.preventDefault()};return document.addEventListener("touchmove",I,{passive:!1}),()=>document.removeEventListener("touchmove",I)},[S,O,s]),h.jsxs("div",{className:"flex flex-col h-full relative","data-whiteboard-canvas":!0,tabIndex:-1,children:[h.jsx("style",{children:`
          .react-sketch-canvas {
            border: none !important;
            outline: none !important;
            box-shadow: none !important;
            pointer-events: all !important; /* Diagnostic: Ensure canvas receives pointer events */
            z-index: 1000; /* Diagnostic: Bring canvas to front */
          }
          .react-sketch-canvas canvas {
            border: none !important;
            outline: none !important;
            box-shadow: none !important;
            pointer-events: all !important; /* Diagnostic: Ensure canvas receives pointer events */
            z-index: 1000; /* Diagnostic: Bring canvas to front */
          }
          .whiteboard-drawing-area {
            pointer-events: all !important; /* Diagnostic: Ensure parent receives pointer events */
            z-index: 999; /* Diagnostic: Bring parent to front */
          }
        `}),h.jsx("div",{className:"flex items-center justify-between p-2 border-b",style:{backgroundColor:d?"#f9fafb":"#334155",borderBottomColor:d?"#e5e7eb":"#475569"},children:h.jsx("div",{className:"flex flex-col gap-2 w-full",children:h.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[h.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[h.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white rounded-md border",style:{backgroundColor:d?"white":"#475569",borderColor:d?"#d1d5db":"#64748b"},children:[h.jsx($e,{variant:"ghost",size:"sm",onClick:()=>et("pen"),className:dt("h-8 w-8 p-0",p==="pen"?"bg-blue-600 hover:bg-blue-700 text-white":""),style:p!=="pen"?{backgroundColor:"transparent",color:d?"#374151":"#e5e7eb"}:{},onMouseEnter:I=>{p!=="pen"&&(I.currentTarget.style.backgroundColor=d?"#f3f4f6":"#64748b")},onMouseLeave:I=>{p!=="pen"&&(I.currentTarget.style.backgroundColor="transparent")},children:h.jsx(XU,{className:"h-4 w-4"})}),h.jsx($e,{variant:"ghost",size:"sm",onClick:()=>et("eraser"),className:dt("h-8 w-8 p-0",p==="eraser"?"bg-blue-600 hover:bg-blue-700 text-white":""),style:p!=="eraser"?{backgroundColor:"transparent",color:d?"#374151":"#e5e7eb"}:{},onMouseEnter:I=>{p!=="eraser"&&(I.currentTarget.style.backgroundColor=d?"#f3f4f6":"#64748b")},onMouseLeave:I=>{p!=="eraser"&&(I.currentTarget.style.backgroundColor="transparent")},children:h.jsx(YU,{className:"h-4 w-4"})})]}),h.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded-md border",style:{backgroundColor:d?"white":"#475569",borderColor:d?"#d1d5db":"#64748b"},children:[h.jsx("span",{className:"text-xs font-medium min-w-[20px]",style:{color:d?"#374151":"#e5e7eb"},children:v}),h.jsx(e8,{value:[v],onValueChange:ft,max:20,min:1,step:1,style:{"--slider-thumb-bg":d?"#ffffff":"#475569"},className:`w-12 sm:w-24 ${d?"[&>*]:bg-gray-200 [&>*>*]:bg-blue-600 [&>*:last-child]:border-blue-600":"[&>*]:bg-gray-600 [&>*>*]:bg-blue-500 [&>*:last-child]:border-blue-500"} [&>*:last-child]:bg-[var(--slider-thumb-bg)]`})]})]}),p==="pen"&&h.jsx("div",{className:"flex items-center gap-1 p-1 bg-white rounded-md border order-last sm:order-none",style:{backgroundColor:d?"white":"#475569",borderColor:d?"#d1d5db":"#64748b"},children:Qke.map(I=>h.jsx("button",{onClick:()=>te(I),className:`w-6 h-6 rounded-sm border-2 ${x===I?d?"border-gray-800":"border-gray-200":d?"border-gray-300":"border-gray-600"}`,style:{backgroundColor:I},"aria-label":`Select ${I} color`},I))}),h.jsx("div",{className:"flex-grow hidden sm:block"}),h.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1",children:[h.jsx($e,{variant:"ghost",size:"sm",onClick:Ye,className:"h-8 w-8 p-0",style:{backgroundColor:"transparent",color:d?"#374151":"#e5e7eb"},onMouseEnter:I=>I.currentTarget.style.backgroundColor=d?"#f3f4f6":"#64748b",onMouseLeave:I=>I.currentTarget.style.backgroundColor="transparent",children:h.jsx(Rte,{className:"h-4 w-4"})}),h.jsx($e,{variant:"ghost",size:"sm",onClick:ht,className:"h-8 w-8 p-0",style:{backgroundColor:"transparent",color:d?"#374151":"#e5e7eb"},onMouseEnter:I=>I.currentTarget.style.backgroundColor=d?"#f3f4f6":"#64748b",onMouseLeave:I=>I.currentTarget.style.backgroundColor="transparent",children:h.jsx(Ste,{className:"h-4 w-4"})}),h.jsx($e,{variant:"ghost",size:"sm",onClick:Qe,className:"h-8 w-8 p-0",style:{backgroundColor:"transparent",color:d?"#374151":"#e5e7eb"},onMouseEnter:I=>I.currentTarget.style.backgroundColor=d?"#f3f4f6":"#64748b",onMouseLeave:I=>I.currentTarget.style.backgroundColor="transparent",children:h.jsx(Do,{className:"h-4 w-4"})})]})]})})}),h.jsxs("div",{className:"flex-1 relative overflow-hidden",style:{paddingBottom:a?"36px":"8px"},children:[h.jsx("div",{ref:xe,className:"w-full h-full relative whiteboard-drawing-area",onTouchStart:Me,onTouchMove:st,onTouchEnd:I=>{Q(I),S&&!O&&Pe()},style:{transform:s?`translate(${D.x}px, ${D.y}px) scale(${$})`:"none",transformOrigin:"center",transition:O?"none":"transform 0.1s ease-out",cursor:"crosshair"},children:h.jsx(RV,{style:{width:"100%",height:"100%",border:"none",outline:"none",boxShadow:"none",backgroundColor:"#ffffff"},width:`${fe.width}px`,height:`${fe.height}px`,strokeWidth:v,strokeColor:x,canvasColor:"#ffffff",ref:c,onStroke:()=>E(!0)})}),a&&h.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-2 md:px-3 py-1 md:py-2 z-10 border-t",style:{borderTopColor:d?"#e5e7eb":"#475569",backgroundColor:d?"#ffffff":"#1e293b",fontSize:"10px"},children:h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{className:`${d?"text-gray-500":"text-gray-400"} truncate text-xs md:text-xs`,style:{fontFamily:'"Raleway", sans-serif',fontSize:"inherit"},children:[h.jsx("span",{className:"hidden sm:inline",children:"Last edited: "}),h.jsx("span",{className:"sm:hidden",children:"Edited: "}),FW(a)]})})})]})]})},e2e=({currentCategory:t,categoryColor:e,itemColor:n,existingCategories:r,isEditingCategory:i,showNewCategoryInput:s,newCategory:o,setNewCategory:a,setIsEditingCategory:l,setShowNewCategoryInput:c,handleEditCategory:u,handleAddCustomCategory:d,handleUpdateCategoryColor:p})=>{const m=t&&t!==""?t:"General",x=e||n||"#808080",w=()=>"#ffffff";return h.jsx("div",{className:"mb-2 px-6 flex items-center gap-2",children:i?h.jsx("div",{className:"mb-2 w-full",children:s?h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(Sn,{value:o,onChange:v=>a(v.target.value),placeholder:"Enter new category",className:"h-8",autoFocus:!0,onKeyDown:v=>{v.key==="Enter"&&d()}}),h.jsx($e,{size:"sm",variant:"ghost",onClick:d,className:"h-8 w-8 p-0",children:h.jsx(wi,{className:"h-4 w-4"})}),h.jsx($e,{size:"sm",variant:"ghost",onClick:()=>{c(!1),a("")},className:"h-8 w-8 p-0",children:h.jsx(Do,{className:"h-4 w-4"})})]}):h.jsxs("div",{className:"flex flex-col space-y-2",children:[h.jsxs(Gc,{onValueChange:u,defaultValue:m,children:[h.jsx(ml,{className:"h-8",style:{fontFamily:'"Raleway", sans-serif'},children:h.jsx(qc,{placeholder:"Select a category"})}),h.jsxs(gl,{children:[r.map(v=>h.jsx(tr,{value:v.name,style:{fontFamily:'"Raleway", sans-serif'},children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"inline-block w-3 h-3 rounded-full border",style:{backgroundColor:v.color_value}}),v.name]})},v.name)),h.jsx(tr,{value:"__custom__",className:"text-blue-600",style:{fontFamily:'"Raleway", sans-serif'},children:"+ Add new category"})]})]}),m!=="__custom__"&&h.jsx("div",{className:"flex items-center gap-2 ml-2",children:h.jsx(pl,{color:x,onChange:v=>p(m,v),onSave:v=>p(m,v),children:h.jsxs($e,{variant:"outline",size:"sm",className:"h-8 px-3 flex items-center gap-2",children:[h.jsx("span",{className:"inline-block w-3 h-3 rounded-full border",style:{backgroundColor:x}}),"Category Color"]})})}),h.jsx($e,{size:"sm",variant:"ghost",className:"self-start",style:{fontFamily:'"Raleway", sans-serif'},onClick:()=>l(!1),children:"Cancel"})]})}):h.jsx(tR,{variant:"outline",className:"cursor-pointer hover:opacity-80 transition-opacity border-none",style:{fontFamily:'"Raleway", sans-serif',backgroundColor:x,color:w()},onClick:()=>l(!0),children:m})})},t2e=({isOpen:t,onClose:e,whiteboardId:n,whiteboardTitle:r,onDelete:i})=>{const[s,o]=b.useState(!1),{toast:a}=rr(),l=async()=>{o(!0);try{await i(n)?(a({title:"Whiteboard deleted",description:"The whiteboard has been permanently deleted."}),e()):a({title:"Error deleting whiteboard",description:"Failed to delete the whiteboard. Please try again.",variant:"destructive"})}catch{a({title:"Error deleting whiteboard",description:"Failed to delete the whiteboard. Please try again.",variant:"destructive"})}finally{o(!1)}};return t?h.jsx(dR,{open:t,onOpenChange:c=>!c&&!s&&e(),children:h.jsxs(Bw,{className:"sm:max-w-[425px]",children:[h.jsxs(Hw,{children:[h.jsxs($w,{className:"flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(XT,{className:"h-5 w-5 text-red-500"}),"Delete Whiteboard"]}),h.jsx(Ww,{style:{fontFamily:'"Raleway", sans-serif'},children:"This will permanently delete the whiteboard and all its content. This action cannot be undone."})]}),h.jsx("div",{className:"space-y-4",children:h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium",style:{fontFamily:'"Raleway", sans-serif'},children:"Whiteboard to delete"}),h.jsx("div",{className:"p-3 bg-gray-50 dark:bg-slate-700 rounded-md border",children:h.jsxs("p",{className:"font-medium text-sm flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(cl,{className:"h-4 w-4 text-slate-500"}),r]})})]})}),h.jsxs(Vw,{children:[h.jsx(qw,{onClick:e,disabled:s,style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"}),h.jsx(Gw,{onClick:l,disabled:s,className:"bg-red-600 hover:bg-red-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:s?"Deleting...":"Delete Whiteboard"})]})]})}):null},n2e=400,t8=({whiteboard:t,onUpdate:e,onDelete:n,onShare:r,existingCategories:i,isCollapsed:s,onToggleCollapsed:o,updateCategory:a})=>{var oe;const l=(oe=i.find(ne=>ne.name===t.category))==null?void 0:oe.color_value,c=t.color_value||l||"#3B82F6",[u,d]=b.useState(!1),[p,m]=b.useState(void 0),[x,w]=b.useState(!1),v=b.useRef(null);b.useEffect(()=>{const ne=()=>{d(window.innerWidth<768)};return ne(),window.addEventListener("resize",ne),()=>window.removeEventListener("resize",ne)},[]);const{whiteboardTitle:y,isCollapsibleOpen:S,setIsCollapsibleOpen:E,isEditing:C,setIsEditing:A,editTitle:T,setEditTitle:k,handleEditTitle:R,handleSaveWhiteboardColor:P,isSavingColor:M,isEditingCategory:L,setIsEditingCategory:z,showNewCategoryInput:H,setShowNewCategoryInput:B,newCategory:K,setNewCategory:q,handleEditCategory:ee,handleAddCustomCategory:O,handleCanvasChange:F,handleCanvasSave:D,titleEditRef:ie}=Pke({whiteboard:t,onUpdate:e,onDelete:n,isCollapsed:s,onToggleCollapsed:o,updateCategory:a}),$=()=>{r(t.id)},U=()=>{w(!0)},Y=async ne=>(await n(parseInt(ne)),!0);return h.jsxs(JA,{open:S,onOpenChange:ne=>{o&&s!==void 0?!s!==ne&&o():E(ne)},className:"w-full",style:{"--whiteboard-color":c},children:[h.jsxs(ji,{className:"w-full shadow-sm h-full flex flex-col",style:{border:"none"},children:[h.jsx(hs,{className:"pb-2",children:h.jsx("div",{className:"flex justify-between items-center",children:C?h.jsxs("div",{className:"flex gap-1 w-full",children:[h.jsx(Sn,{ref:ie,value:T,onChange:ne=>k(ne.target.value),className:"h-8",autoFocus:!0,onKeyDown:ne=>{ne.key==="Enter"&&R()}}),h.jsx($e,{size:"sm",variant:"ghost",onClick:R,className:"h-8 w-8 p-0",children:h.jsx(wi,{className:"h-4 w-4"})}),h.jsx($e,{size:"sm",variant:"ghost",onClick:()=>A(!1),className:"h-8 w-8 p-0",children:h.jsx(Do,{className:"h-4 w-4"})})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(pl,{color:c,onChange:ne=>{setCurrentColorPreview(ne)},onSave:async ne=>{if(ne!==(t.color_value||"#3B82F6"))try{await P(ne)}catch{toast({title:"Error",description:"Could not save color. Reverting preview.",variant:"destructive"}),setCurrentColorPreview(t.color_value||"#3B82F6")}},children:h.jsxs($e,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0 rounded-full flex items-center justify-center relative","aria-label":"Change whiteboard color",disabled:M,children:[h.jsx("span",{className:"inline-block w-3 h-3 rounded-full border border-border transition-colors duration-150",style:{backgroundColor:c}}),M&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50 rounded-full",children:h.jsx("div",{className:"h-2 w-2 animate-spin rounded-full border-2 border-solid border-current border-r-transparent"})})]})}),h.jsx(cl,{className:"h-4 w-4 text-muted-foreground"}),h.jsx(Jo,{className:"text-lg font-medium cursor-pointer",style:{fontFamily:'"Raleway", sans-serif'},onClick:()=>A(!0),children:y})]}),h.jsxs("div",{className:"flex",children:[h.jsx(QA,{asChild:!0,children:h.jsx($e,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:h.jsx(Wa,{className:dt("h-4 w-4 transition-transform",S?"":"transform rotate-180")})})}),h.jsxs(bw,{children:[h.jsx(Sw,{asChild:!0,children:h.jsx($e,{variant:"ghost",className:"h-8 w-8 p-0",children:h.jsx(qT,{className:"h-4 w-4"})})}),h.jsxs(Eg,{align:"end",children:[h.jsxs(xs,{onClick:()=>A(!0),style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(mg,{className:"mr-2 h-4 w-4"}),"Edit Title"]}),h.jsxs(xs,{onClick:$,style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(Rh,{className:"mr-2 h-4 w-4"}),"Share"]}),h.jsxs(xs,{onClick:U,className:"text-red-600",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(tw,{className:"mr-2 h-4 w-4"}),"Delete Whiteboard"]})]})]})]})]})})}),h.jsx(e2e,{currentCategory:t.category||"",categoryColor:l,itemColor:t.color_value,existingCategories:i,isEditingCategory:L,showNewCategoryInput:H,newCategory:K,setNewCategory:q,setIsEditingCategory:z,setShowNewCategoryInput:B,handleEditCategory:ee,handleAddCustomCategory:O,handleUpdateCategoryColor:a}),h.jsx(ZA,{className:"flex-1",children:h.jsx("div",{className:"rounded-lg mx-6 mb-6 flex-1 flex flex-col relative",style:{backgroundColor:"#ffffff",border:`2px solid ${c} !important`,borderColor:`${c} !important`,height:u&&p!==void 0?`${Math.max(n2e,p-120)}px`:`${Math.max(530,(t.canvas_height||620)-120)}px`},ref:v,children:h.jsx(Zke,{whiteboard:t,onCanvasChange:F,onSave:D,whiteboardColor:c,onAutoSave:D,isMobile:u,onScaledHeightChange:m,updatedAt:t.updated_at,aiEnabled:!0})})})]}),h.jsx(t2e,{isOpen:x,onClose:()=>w(!1),whiteboardId:t.id.toString(),whiteboardTitle:t.title,onDelete:Y})]})},xF=750,wF=650,bF=2400,SF=2400,r2e=({whiteboard:t,onUpdate:e,onDelete:n,existingCategories:r,canvasTransform:i,onPositionChange:s,isCollapsed:o,onToggleCollapsed:a,updateCategory:l})=>{var R,P;const c=b.useRef(null),[u,d]=b.useState(!1),[p,m]=b.useState(!1),[x,w]=b.useState({x:0,y:0}),[v,y]=b.useState({startX:0,startY:0,startWidth:0,startHeight:0});parseFloat(((R=c.current)==null?void 0:R.style.width)||"")||t.canvas_width,parseFloat(((P=c.current)==null?void 0:P.style.height)||"")||t.canvas_height,b.useEffect(()=>{c.current&&(c.current.style.left=`${t.position_x}px`,c.current.style.top=`${t.position_y}px`,console.log(`DraggableWhiteboardCard: Initial position for whiteboard ${t.id}: x=${t.position_x}, y=${t.position_y}`),console.log(`DraggableWhiteboardCard: Initial dimensions for whiteboard ${t.id}: width=${t.canvas_width}, height=${t.canvas_height}`))},[t.position_x,t.position_y,t.canvas_width,t.canvas_height]);const S=M=>{var B;const L=M.target;if(L.closest('input, textarea, button, [role="button"], [role="menuitem"], .resize-handle, .whiteboard-canvas, canvas'))return;const z=L.closest('input, textarea, button, [role="button"], [role="menuitem"], .resize-handle'),H=L.closest("canvas")||L.tagName==="CANVAS"||L.closest(".whiteboard-drawing-area")||L.closest(".react-sketch-canvas")||L.closest('[data-testid="react-sketch-canvas"]');if(!(z||H)&&(M.preventDefault(),c.current)){const K=(B=c.current.parentElement)==null?void 0:B.getBoundingClientRect();if(K){const q=(M.clientX-K.left-i.x)/i.scale,ee=(M.clientY-K.top-i.y)/i.scale,O=parseFloat(c.current.style.left)||0,F=parseFloat(c.current.style.top)||0;w({x:(q-O)*i.scale,y:(ee-F)*i.scale}),d(!0)}}},E=M=>{var L;if(u&&c.current){const z=(L=c.current.parentElement)==null?void 0:L.getBoundingClientRect();if(!z)return;const H=(M.clientX-z.left-i.x)/i.scale,B=(M.clientY-z.top-i.y)/i.scale,K=H-x.x/i.scale,q=B-x.y/i.scale;c.current.style.left=`${K}px`,c.current.style.top=`${q}px`}if(p&&c.current){const z=M.clientX-v.startX,H=M.clientY-v.startY,B=z/i.scale,K=H/i.scale,q=Math.min(bF,Math.max(xF,v.startWidth+B)),ee=Math.min(SF,Math.max(wF,v.startHeight+K));c.current.style.width=`${q}px`,c.current.style.height=`${ee}px`}},C=()=>{if(u&&c.current){d(!1);const M=parseFloat(c.current.style.left)||0,L=parseFloat(c.current.style.top)||0,z={x:Math.round(M),y:Math.round(L)};s(t.id,z)}if(p&&c.current){m(!1);const M=parseFloat(c.current.style.left)||0,L=parseFloat(c.current.style.top)||0,z=parseFloat(c.current.style.width)||t.canvas_width||400,H=parseFloat(c.current.style.height)||t.canvas_height||400,B={x:Math.round(M),y:Math.round(L)};e(t.id,{position_x:B.x,position_y:B.y,canvas_width:Math.min(bF,Math.max(xF,Math.round(z))),canvas_height:Math.min(SF,Math.max(wF,Math.round(H)))})}};b.useEffect(()=>((u||p)&&(window.addEventListener("mousemove",E),window.addEventListener("mouseup",C)),()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",C)}),[u,p,x,v]);const A=M=>{if(M.preventDefault(),M.stopPropagation(),c.current){const L=parseFloat(c.current.style.width)||t.canvas_width||400,z=parseFloat(c.current.style.height)||t.canvas_height||400;y({startX:M.clientX,startY:M.clientY,startWidth:L,startHeight:z}),m(!0)}},T=async(M,L)=>{try{return await e(M,L)}catch(z){return console.error("Failed to update whiteboard:",z),null}},k=async M=>{try{return await n(M)}catch(L){return console.error("Failed to delete whiteboard:",L),!1}};return h.jsxs("div",{ref:c,onMouseDown:S,className:"draggable-whiteboard-card shadow-lg rounded-lg flex flex-col overflow-hidden border relative",style:{position:"absolute",width:`${t.canvas_width||400}px`,height:o?"auto":`${t.canvas_height||400}px`,zIndex:u||p?1e3:t.z_index||1,cursor:u?"grabbing":p?"nw-resize":"grab",transition:u||p?"none":"box-shadow 0.2s, transform 0.1s",boxShadow:u||p?"0 8px 16px rgba(0,0,0,0.2)":"0 4px 6px rgba(0, 0, 0, 0.1)",transform:u||p?"scale(1.01)":"scale(1)",userSelect:"none",touchAction:"none"},children:[h.jsx(t8,{whiteboard:t,onUpdate:T,onDelete:k,existingCategories:r,isCollapsed:o,onToggleCollapsed:a,updateCategory:l}),!o&&h.jsx("div",{className:"resize-handle absolute bottom-0 right-0 w-4 h-4 cursor-nw-resize",onMouseDown:A,style:{background:"linear-gradient(-45deg, transparent 40%, #ccc 40%, #ccc 60%, transparent 60%)",opacity:.6,zIndex:10}})]})},i2e=({existingCategories:t,searchQuery:e="",onReady:n,onOpenNewNoteModal:r,onShareList:i,notes:s,onNoteUpdate:o,onNoteDelete:a,whiteboards:l,onWhiteboardUpdate:c,onWhiteboardDelete:u,onOpenNewWhiteboardModal:d,addCategory:p,updateCategory:m})=>{const{theme:x}=Ts(),{token:w}=to(),[v,y]=b.useState([]),[S,E]=b.useState(!0),[C,A]=b.useState(""),[T,k]=b.useState(!1),[R,P]=b.useState({x:0,y:0}),[M,L]=b.useState(void 0),[z,H]=b.useState(!1),[B,K]=b.useState(!1),[q,ee]=b.useState({x:0,y:0}),[O,F]=b.useState({x:window.innerWidth/2-2e3,y:window.innerHeight/2-2e3,scale:1}),[D,ie]=b.useState(!1),[$,U]=b.useState({x:0,y:0}),[Y,oe]=b.useState("all"),[ne,Z]=b.useState(!1),fe=b.useRef(null),we=b.useRef(null),xe=()=>{k(!1),r&&r(R)},Ve=()=>{k(!1),d&&(console.log("Opening whiteboard modal at position:",R),d(R))};b.useEffect(()=>{n&&n({showAddListMenu:(me,ge=!1,be)=>{if(console.log("showAddListMenu called:",{position:me,isFromButton:ge,absolutePosition:be,currentMenuState:T,currentMenuIsFromButton:z}),T&&z&&ge){console.log("Closing existing button menu"),k(!1);return}console.log("Setting menu state:",{position:me,isFromButton:ge,absolutePosition:be}),P(me),H(ge),L(be||void 0),k(!0),console.log("Context menu should now be visible")},showAddNoteMenu:(me,ge=!1,be)=>{r&&r(me)},showAddWhiteboardMenu:(me,ge=!1,be)=>{d&&d(me)},hideContextMenu:()=>{k(!1)},isMenuOpenFromButton:()=>T&&z,showNewListModal:()=>{K(!0)}})},[n,T,z]),b.useEffect(()=>{const me=async()=>{try{E(!0),kV(w).then(be=>{y(be),E(!1)}).catch(be=>{console.error("Failed to fetch lists:",be),A("Could not load lists."),E(!1)})}finally{E(!1)}},ge=be=>{const{position:Oe,isFromButton:Xe=!1,absolutePosition:Ge}=be.detail;P(Oe),H(Xe),Ge&&L(Ge),k(!0)};return document.addEventListener("showCanvasContextMenu",ge),me(),()=>{document.removeEventListener("showCanvasContextMenu",ge)}},[]);const Pe=me=>{if(me.preventDefault(),me.stopPropagation(),console.log("Right-click context menu triggered"),fe.current){const ge=fe.current.getBoundingClientRect(),be=me.clientX-ge.left,Oe=me.clientY-ge.top,Xe=(be-O.x)/O.scale,Ge=(Oe-O.y)/O.scale;console.log("Context menu position:",{canvasX:Xe,canvasY:Ge,screenX:be,screenY:Oe}),P({x:Xe,y:Ge}),ee({x:Xe,y:Ge}),H(!1),L(void 0),k(!0)}},et=me=>{const ge=me.target;T&&!ge.closest(".context-menu")&&k(!1);const be=ge.closest(".draggable-list-card, .draggable-note-card, .context-menu, button, input, textarea, select");me.button===0&&!be&&(me.target===fe.current||me.target===we.current)&&(ie(!0),U({x:me.clientX-O.x,y:me.clientY-O.y}),me.preventDefault())},te=me=>{D&&F(ge=>({...ge,x:me.clientX-$.x,y:me.clientY-$.y}))},ft=()=>{D&&ie(!1)},Ye=me=>{if(me.preventDefault(),fe.current){const ge=fe.current.getBoundingClientRect(),be=me.clientX-ge.left,Oe=me.clientY-ge.top,Xe=me.deltaY<0?1.1:.9,Ge=Math.max(.1,Math.min(3,O.scale*Xe)),wt=be-(be-O.x)*(Ge/O.scale),de=Oe-(Oe-O.y)*(Ge/O.scale);F({x:wt,y:de,scale:Ge})}};b.useEffect(()=>{const me=be=>{D&&F(Oe=>({...Oe,x:be.clientX-$.x,y:be.clientY-$.y}))},ge=()=>{D&&ie(!1)};return D&&(document.addEventListener("mousemove",me),document.addEventListener("mouseup",ge)),()=>{document.removeEventListener("mousemove",me),document.removeEventListener("mouseup",ge)}},[D,$]);const ht=()=>{},Qe=()=>{k(!1),K(!0)},St=async me=>{const ge=[...v];y(be=>be.map(Oe=>Oe.id===me.id?me:Oe));try{await DV(me,w)}catch(be){console.error("Failed to update list:",be),y(ge)}},Ne=async me=>{const ge=[...v];y(be=>be.filter(Oe=>Oe.id!==me));try{await IV(me,w)}catch(be){console.error("Failed to delete list:",be),y(ge)}},Me=(me,ge)=>{const be=[...v];y(Oe=>Oe.map(Xe=>Xe.id===me?{...Xe,position_x:ge.x,position_y:ge.y}:Xe)),H_e(me,ge.x,ge.y,w).catch(Oe=>{console.error("Failed to update list position:",Oe),y(be)})},st=me=>{const ge={...me,position_x:q.x,position_y:q.y};y(be=>[...be,ge]),K(!1)},Q=()=>{F(me=>({...me,scale:Math.min(3,me.scale*1.2)}))},I=()=>{F(me=>({...me,scale:Math.max(.1,me.scale/1.2)}))},re=()=>{F({x:window.innerWidth/2-2e3,y:window.innerHeight/2-2e3,scale:1})},G=()=>{const me=v.map(Oe=>Oe.type||"General").filter(Boolean),ge=s.map(Oe=>Oe.category||"General").filter(Boolean);return["all",...Array.from(new Set([...me,...ge]))]},ae=()=>{const me={all:v.length+s.length+l.length};return v.forEach(ge=>{const be=ge.type||"General";me[be]=(me[be]||0)+1}),s.forEach(ge=>{const be=ge.category||"General";me[be]=(me[be]||0)+1}),l.forEach(ge=>{const be=ge.category||"General";me[be]=(me[be]||0)+1}),me},ce=()=>{let me=v,ge=s,be=l;return e&&(me=v.filter(Oe=>Oe.title.toLowerCase().includes(e.toLowerCase())||Oe.items&&Oe.items.some(Xe=>Xe.text&&Xe.text.toLowerCase().includes(e.toLowerCase()))),ge=s.filter(Oe=>Oe.title&&Oe.title.toLowerCase().includes(e.toLowerCase())||Oe.content&&Oe.content.toLowerCase().includes(e.toLowerCase())),be=l.filter(Oe=>Oe.title&&Oe.title.toLowerCase().includes(e.toLowerCase()))),Y!=="all"&&(me=me.filter(Oe=>(Oe.type||"General")===Y),ge=ge.filter(Oe=>(Oe.category||"General")===Y),be=be.filter(Oe=>(Oe.category||"General")===Y)),{filteredLists:me,filteredNotes:ge,filteredWhiteboards:be}},{filteredLists:Ae,filteredNotes:De,filteredWhiteboards:Je}=ce();return b.useEffect(()=>{const me=ge=>{if(T){const be=ge.target,Oe=document.querySelector(".context-menu"),Xe=document.getElementById("new-canvas-button");if(Oe&&Oe.contains(ge.target)||z&&Xe&&Xe.contains(ge.target))return;be.closest(".context-menu")||k(!1)}if(ne){const be=ge.target;!be.closest("[data-filter-panel]")&&!be.closest("[data-filter-button]")&&Z(!1)}};return document.addEventListener("mousedown",me),()=>{document.removeEventListener("mousedown",me)}},[T,ne,z]),h.jsxs("div",{className:"canvas-container-wrapper",children:[h.jsx("div",{ref:fe,className:"canvas-area",onContextMenu:Pe,onClick:ht,onMouseDown:et,onMouseMove:te,onMouseUp:ft,onWheel:Ye,style:{position:"relative",width:"100%",height:"100vh",backgroundColor:"var(--background-alt)",borderRadius:"0",overflow:"hidden",padding:"0",boxSizing:"border-box",border:"none",cursor:D?"grabbing":"grab"},children:h.jsx("div",{ref:we,style:{position:"absolute",width:"100%",height:"100%",minWidth:"4000px",minHeight:"4000px",transform:`translate(${O.x}px, ${O.y}px) scale(${O.scale})`,transformOrigin:"0 0",padding:"1rem",backgroundImage:x==="dark"?`
              radial-gradient(circle, rgba(255, 255, 255, 0.08) 1px, transparent 1px),
              radial-gradient(circle, rgba(255, 255, 255, 0.04) 1px, transparent 1px),
              linear-gradient(135deg, rgba(255, 255, 255, 0.01) 0%, rgba(255, 255, 255, 0.04) 50%, rgba(255, 255, 255, 0.01) 100%)
            `:`
              radial-gradient(circle, rgba(0, 0, 0, 0.08) 1px, transparent 1px),
              radial-gradient(circle, rgba(0, 0, 0, 0.04) 1px, transparent 1px),
              linear-gradient(135deg, rgba(0, 0, 0, 0.01) 0%, rgba(0, 0, 0, 0.04) 50%, rgba(0, 0, 0, 0.01) 100%)
            `,backgroundSize:"32px 32px, 8px 8px, 100% 100%",backgroundPosition:"0 0, 0 0, 0 0"},children:S?h.jsx("div",{className:"flex items-center justify-center h-full",children:h.jsx(eEe,{size:"lg"})}):C?h.jsx("div",{className:"flex items-center justify-center h-full text-red-500",children:C}):h.jsxs(h.Fragment,{children:[v.length===0&&s.length===0&&l.length===0&&h.jsx("div",{className:"flex items-center justify-center h-full",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"#64748b",fontFamily:'"Raleway", sans-serif',fontSize:"18px",fontWeight:"300",zIndex:10},children:"No content on your canvas (for now!)"}),Ae.map(me=>h.jsx(B_e,{list:me,onUpdate:St,onDelete:Ne,onShare:i||(()=>{}),existingCategories:t,canvasTransform:O,onPositionChange:Me,addCategory:p,updateCategory:m},me.id)),De.map(me=>h.jsx(kke,{note:me,onPositionUpdate:(ge,be,Oe)=>{const Xe={position_x:be.x,position_y:be.y};Oe&&(Xe.width=Oe.width,Xe.height=Oe.height),o(ge,Xe)},onUpdate:o,onDelete:a,existingCategories:t,canvasTransform:O,updateCategory:m},me.id)),Je.map(me=>h.jsx(r2e,{whiteboard:me,onUpdate:c,onDelete:u,existingCategories:t,canvasTransform:O,onPositionChange:(ge,be)=>{c(ge,{position_x:be.x,position_y:be.y})},updateCategory:m},me.id)),T&&(console.log("Rendering context menu with:",{menuPosition:R,menuAbsolutePosition:M,menuIsFromButton:z,showContextMenu:T}),h.jsx(NV,{position:R,absolutePosition:M,onAddList:Qe,onAddNote:xe,onAddWhiteboard:Ve,onClose:()=>k(!1),isFromButton:z}))]})})}),h.jsxs("div",{style:{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",zIndex:1002,display:"flex",alignItems:"center",gap:"8px",padding:"12px",backgroundColor:"var(--background)",border:"1px solid var(--border)",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",userSelect:"none"},children:[h.jsx("button",{onClick:I,style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--background)",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",color:"var(--text)",transition:"all 0.2s ease"},onMouseEnter:me=>{me.currentTarget.style.backgroundColor="var(--accent)"},onMouseLeave:me=>{me.currentTarget.style.backgroundColor="var(--background)"},title:"Zoom Out",children:h.jsx(xte,{size:18})}),h.jsx("button",{onClick:re,style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--background)",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",color:"var(--text)",transition:"all 0.2s ease"},onMouseEnter:me=>{me.currentTarget.style.backgroundColor="var(--accent)"},onMouseLeave:me=>{me.currentTarget.style.backgroundColor="var(--background)"},title:"Reset View",children:h.jsx(_te,{size:18})}),h.jsxs("div",{style:{padding:"0 12px",fontSize:"14px",fontWeight:"500",color:"var(--text-muted)",fontFamily:"monospace",minWidth:"60px",textAlign:"center"},children:[Math.round(O.scale*100),"%"]}),h.jsx("button",{onClick:Q,style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--background)",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",color:"var(--text)",transition:"all 0.2s ease"},onMouseEnter:me=>{me.currentTarget.style.backgroundColor="var(--accent)"},onMouseLeave:me=>{me.currentTarget.style.backgroundColor="var(--background)"},title:"Zoom In",children:h.jsx(xo,{size:18})}),h.jsx("div",{style:{width:"1px",height:"24px",backgroundColor:"var(--border)",margin:"0 4px"}}),h.jsxs("button",{onClick:()=>Z(!ne),"data-filter-button":!0,style:{minWidth:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 12px",backgroundColor:ne?"var(--accent)":"var(--background)",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",color:"var(--text)",fontSize:"12px",fontWeight:"500",transition:"all 0.2s ease",gap:"6px",whiteSpace:"nowrap"},onMouseEnter:me=>{ne||(me.currentTarget.style.backgroundColor="var(--accent)")},onMouseLeave:me=>{ne||(me.currentTarget.style.backgroundColor="var(--background)")},title:"Filter Content",children:[h.jsx("span",{children:"Category:"}),h.jsx("span",{children:Y==="all"?"All":Y}),h.jsxs("span",{style:{opacity:.7},children:["(",ae()[Y]||0,")"]})]})]}),ne&&h.jsx("div",{"data-filter-panel":!0,style:{position:"fixed",bottom:"80px",left:"50%",transform:"translateX(-50%)",zIndex:1003,display:"flex",alignItems:"center",gap:"6px",padding:"8px",backgroundColor:"var(--background)",border:"1px solid var(--border)",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",userSelect:"none",maxWidth:"600px",flexWrap:"wrap"},children:G().map(me=>{const ge=ae()[me]||0,be=Y===me;return h.jsxs("button",{onClick:()=>{oe(me),Z(!1)},style:{padding:"6px 12px",backgroundColor:be?"#3b82f6":"var(--background)",color:be?"white":"var(--text)",border:"1px solid var(--border)",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"500",transition:"all 0.2s ease",textTransform:"capitalize",whiteSpace:"nowrap"},onMouseEnter:Oe=>{be||(Oe.currentTarget.style.backgroundColor="var(--accent)")},onMouseLeave:Oe=>{be||(Oe.currentTarget.style.backgroundColor="var(--background)")},children:[me," (",ge,")"]},me)})}),B&&h.jsx(LV,{isOpen:B,onClose:()=>K(!1),onListCreated:st,existingCategories:t.map(me=>me.name)})]})},s2e=({isOpen:t,onClose:e,onCreateNote:n,existingCategories:r})=>{const[i,s]=b.useState(""),[o,a]=b.useState(""),[l,c]=b.useState(""),[u,d]=b.useState(!1),p=x=>{if(x.preventDefault(),!i.trim())return;const w=u?l.trim():o;w&&(n(i.trim(),w,"#FFFFE0"),m())},m=()=>{s(""),a(""),c(""),d(!1),e()};return h.jsx(Vc,{open:t,onOpenChange:m,children:h.jsxs(dl,{className:"sm:max-w-md",children:[h.jsx(fl,{children:h.jsx(hl,{children:"Create New Note"})}),h.jsxs("form",{onSubmit:p,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx(Un,{htmlFor:"title",children:"Title"}),h.jsx(Sn,{id:"title",value:i,onChange:x=>s(x.target.value),placeholder:"Enter note title",className:"mt-1",autoFocus:!0,required:!0})]}),u?h.jsxs("div",{children:[h.jsx(Un,{htmlFor:"newCategory",children:"New Category"}),h.jsxs("div",{className:"flex space-x-2 mt-1",children:[h.jsx(Sn,{id:"newCategory",value:l,onChange:x=>c(x.target.value),placeholder:"Enter new category",autoFocus:!0}),h.jsx($e,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]}):h.jsxs("div",{children:[h.jsx(Un,{htmlFor:"category",children:"Category"}),h.jsxs(Gc,{value:o,onValueChange:a,children:[h.jsx(ml,{className:"mt-1",children:h.jsx(qc,{placeholder:"Select a category"})}),h.jsx(gl,{children:r.map(x=>h.jsx(tr,{value:x,children:x},x))})]}),h.jsx($e,{type:"button",variant:"outline",size:"sm",onClick:()=>d(!0),className:"mt-2",children:"Add New Category"})]}),h.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[h.jsx($e,{type:"button",variant:"outline",onClick:m,children:"Cancel"}),h.jsx($e,{type:"submit",disabled:!i.trim()||!o&&!l.trim(),className:"bg-blue-600 hover:bg-blue-700",children:"Create Note"})]})]})]})})},o2e=b.forwardRef(({className:t,...e},n)=>h.jsx("textarea",{className:dt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));o2e.displayName="Textarea";const a2e=({isOpen:t,onClose:e,onCreateNote:n,initialPosition:r,existingCategories:i})=>{const[s,o]=b.useState(""),[a,l]=b.useState(""),[c,u]=b.useState(""),[d,p]=b.useState(!1),[m,x]=b.useState("#3B82F6");b.useEffect(()=>{t&&(o(""),l(""),u(""),p(!1),x("#3B82F6"))},[t]);const w=v=>{if(v.preventDefault(),!s.trim())return;const S=(d?c.trim():a)||"General";n(s.trim(),S,m,r),e()};return t?h.jsx(Vc,{open:t,onOpenChange:v=>!v&&e(),children:h.jsxs(dl,{className:"sm:max-w-[425px]",children:[h.jsx(fl,{children:h.jsxs(hl,{className:"flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(gd,{className:"h-5 w-5 text-slate-500"}),"Add Note"]})}),h.jsxs("form",{onSubmit:w,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{htmlFor:"noteTitle",style:{fontFamily:'"Raleway", sans-serif'},children:"Title"}),h.jsx(Sn,{id:"noteTitle",value:s,onChange:v=>o(v.target.value),placeholder:"Enter note title",autoFocus:!0})]}),h.jsxs("div",{className:"grid grid-cols-[1fr_60px] gap-4 items-start",children:[d?h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{htmlFor:"newNoteCategory",style:{fontFamily:'"Raleway", sans-serif'},children:"New Category"}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(Sn,{id:"newNoteCategory",value:c,onChange:v=>u(v.target.value),placeholder:"Enter new category",autoFocus:!0,onKeyDown:v=>{v.key==="Enter"&&c.trim()&&(l(c.trim()),p(!1))}}),h.jsx($e,{type:"button",variant:"outline",onClick:()=>{c.trim()&&(l(c.trim()),p(!1))},disabled:!c.trim(),style:{fontFamily:'"Raleway", sans-serif'},children:"Add"}),h.jsx($e,{type:"button",variant:"outline",onClick:()=>{p(!1),u("")},style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"})]})]}):h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{htmlFor:"noteCategory",style:{fontFamily:'"Raleway", sans-serif'},children:"Category"}),h.jsxs(Gc,{value:a,onValueChange:v=>{v==="__add_new__"?(p(!0),l("")):l(v)},children:[h.jsx(ml,{children:h.jsx(qc,{placeholder:"Select a category"})}),h.jsxs(gl,{children:[!i.includes("General")&&h.jsx(tr,{value:"General",children:"General"}),i.map(v=>h.jsx(tr,{value:v,children:v},v)),h.jsx(tr,{value:"__add_new__",className:"text-blue-600",children:"+ Add new category"})]})]}),h.jsx("p",{className:"text-xs text-gray-500",style:{fontFamily:'"Raleway", sans-serif'},children:i.length===0?'No categories yet. Leave empty to use "General" or create a new one from the dropdown.':'Select a category or leave empty to use "General".'})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{style:{fontFamily:'"Raleway", sans-serif'},children:"Color"}),h.jsx(pl,{color:m,onChange:x,onSave:x,children:h.jsx($e,{type:"button",variant:"outline",size:"icon",className:"h-10 w-10 p-0 rounded-full","aria-label":"Change note color",children:h.jsx("span",{className:"inline-block w-6 h-6 rounded-full border border-gray-300",style:{backgroundColor:m}})})})]})]}),h.jsxs("div",{className:"flex justify-end space-x-2",children:[h.jsx($e,{type:"button",variant:"outline",onClick:e,style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"}),h.jsx($e,{type:"submit",disabled:!s.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:"Create Note"})]})]})]})}):null},l2e=({isOpen:t,onClose:e,onCreateWhiteboard:n,initialPosition:r,existingCategories:i})=>{const[s,o]=b.useState(""),[a,l]=b.useState(""),[c,u]=b.useState(""),[d,p]=b.useState(!1),[m,x]=b.useState("#3B82F6");b.useEffect(()=>{t&&(o(""),l(""),u(""),p(!1),x("#3B82F6"))},[t]);const w=v=>{if(v.preventDefault(),!s.trim())return;const S=(d?c.trim():a)||"General";n(s.trim(),S,m,r),e()};return t?h.jsx(Vc,{open:t,onOpenChange:v=>!v&&e(),children:h.jsxs(dl,{className:"sm:max-w-[425px]",children:[h.jsx(fl,{children:h.jsxs(hl,{className:"flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(cl,{className:"h-5 w-5 text-slate-500"}),"Add Whiteboard"]})}),h.jsxs("form",{onSubmit:w,className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{htmlFor:"whiteboardTitle",style:{fontFamily:'"Raleway", sans-serif'},children:"Title"}),h.jsx(Sn,{id:"whiteboardTitle",value:s,onChange:v=>o(v.target.value),placeholder:"Enter whiteboard title",autoFocus:!0})]}),h.jsxs("div",{className:"grid grid-cols-[1fr_60px] gap-4 items-start",children:[d?h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{htmlFor:"newWhiteboardCategory",style:{fontFamily:'"Raleway", sans-serif'},children:"New Category"}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(Sn,{id:"newWhiteboardCategory",value:c,onChange:v=>u(v.target.value),placeholder:"Enter new category",autoFocus:!0,onKeyDown:v=>{v.key==="Enter"&&c.trim()&&(l(c.trim()),p(!1))}}),h.jsx($e,{type:"button",variant:"outline",onClick:()=>{c.trim()&&(l(c.trim()),p(!1))},disabled:!c.trim(),style:{fontFamily:'"Raleway", sans-serif'},children:"Add"}),h.jsx($e,{type:"button",variant:"outline",onClick:()=>{p(!1),u("")},style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"})]})]}):h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{htmlFor:"whiteboardCategory",style:{fontFamily:'"Raleway", sans-serif'},children:"Category"}),h.jsxs(Gc,{value:a,onValueChange:v=>{v==="__add_new__"?(p(!0),l("")):l(v)},children:[h.jsx(ml,{children:h.jsx(qc,{placeholder:"Select a category"})}),h.jsxs(gl,{children:[!i.includes("General")&&h.jsx(tr,{value:"General",children:"General"}),i.map(v=>h.jsx(tr,{value:v,children:v},v)),h.jsx(tr,{value:"__add_new__",className:"text-blue-600",children:"+ Add new category"})]})]}),h.jsx("p",{className:"text-xs text-gray-500",style:{fontFamily:'"Raleway", sans-serif'},children:i.length===0?'No categories yet. Leave empty to use "General" or create a new one from the dropdown.':'Select a category or leave empty to use "General".'})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{style:{fontFamily:'"Raleway", sans-serif'},children:"Color"}),h.jsx(pl,{color:m,onChange:x,onSave:x,children:h.jsx($e,{type:"button",variant:"outline",size:"icon",className:"h-10 w-10 p-0 rounded-full","aria-label":"Change whiteboard color",children:h.jsx("span",{className:"inline-block w-6 h-6 rounded-full border border-gray-300",style:{backgroundColor:m}})})})]})]}),h.jsxs("div",{className:"flex justify-end space-x-2",children:[h.jsx($e,{type:"button",variant:"outline",onClick:e,style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"}),h.jsx($e,{type:"submit",disabled:!s.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:"Create Whiteboard"})]})]})]})}):null},c2e=({isOpen:t,onClose:e,listId:n,listTitle:r,onShare:i,onUnshare:s,existingShareData:o})=>{const[a,l]=b.useState(o||null),[c,u]=b.useState(!1),[d,p]=b.useState(!1),{toast:m}=rr(),x=async()=>{u(!0);try{const S=await i(n);l(S),m({title:"List shared successfully",description:"Anyone with this link can view your list."})}catch{m({title:"Error sharing list",description:"Failed to generate share link. Please try again.",variant:"destructive"})}finally{u(!1)}};b.useEffect(()=>{t&&(l(o||null),p(!1),o||x())},[t,o]);const w=async()=>{u(!0);try{await s(n),l(null),m({title:"Sharing revoked",description:"This list is no longer publicly accessible."})}catch{m({title:"Error revoking share",description:"Failed to revoke sharing. Please try again.",variant:"destructive"})}finally{u(!1)}},v=async()=>{if(a!=null&&a.shareUrl)try{await navigator.clipboard.writeText(a.shareUrl),p(!0),m({title:"Link copied",description:"Share link copied to clipboard."}),setTimeout(()=>p(!1),2e3)}catch{m({title:"Failed to copy",description:"Could not copy link to clipboard.",variant:"destructive"})}},y=()=>{a!=null&&a.shareUrl&&window.open(a.shareUrl,"_blank")};return t?h.jsx(Vc,{open:t,onOpenChange:S=>!S&&e(),children:h.jsxs(dl,{className:"sm:max-w-[500px]",children:[h.jsxs(fl,{children:[h.jsxs(hl,{className:"flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(Rh,{className:"h-5 w-5 text-slate-500"}),"Share List"]}),h.jsx(Pw,{style:{fontFamily:'"Raleway", sans-serif'},children:"Create a shareable link for your list"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{style:{fontFamily:'"Raleway", sans-serif'},children:"Sharing"}),h.jsx("div",{className:"p-3 bg-gray-50 dark:bg-slate-700 rounded-md",children:h.jsxs("p",{className:"font-medium text-sm flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(md,{className:"h-4 w-4 text-slate-500"}),r]})})]}),a?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{style:{fontFamily:'"Raleway", sans-serif'},children:"Share Link"}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(Sn,{value:(a==null?void 0:a.shareUrl)||"",readOnly:!0,className:"flex-1"}),h.jsx($e,{type:"button",variant:"outline",size:"icon",onClick:v,disabled:c,"aria-label":"Copy link",children:d?h.jsx(wi,{className:"h-4 w-4 text-green-600"}):h.jsx(oh,{className:"h-4 w-4"})}),h.jsx($e,{type:"button",variant:"outline",size:"icon",onClick:y,disabled:c,"aria-label":"Open link",children:h.jsx(ah,{className:"h-4 w-4"})})]}),h.jsx("p",{className:"text-xs text-gray-500",style:{fontFamily:'"Raleway", sans-serif'},children:"Anyone with this link can view this list"})]}),h.jsxs("div",{className:"flex justify-between space-x-2",children:[h.jsx($e,{type:"button",onClick:w,disabled:c,className:"bg-red-600 hover:bg-red-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:"Revoke Sharing"}),h.jsx($e,{type:"button",onClick:e,className:"bg-blue-600 hover:bg-blue-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:"Done"})]})]}):h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{style:{fontFamily:'"Raleway", sans-serif'},children:"Share Link"}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(Sn,{value:"Generating share link...",readOnly:!0,className:"flex-1",placeholder:"Generating share link..."}),h.jsx($e,{type:"button",variant:"outline",size:"icon",disabled:!0,"aria-label":"Copy link",children:h.jsx(oh,{className:"h-4 w-4"})}),h.jsx($e,{type:"button",variant:"outline",size:"icon",disabled:!0,"aria-label":"Open link",children:h.jsx(ah,{className:"h-4 w-4"})})]}),h.jsx("p",{className:"text-xs text-gray-500",style:{fontFamily:'"Raleway", sans-serif'},children:"Anyone with this link can view this list"})]}),h.jsx("div",{className:"flex justify-end",children:h.jsx($e,{type:"button",variant:"outline",onClick:e,style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"})})]})]})]})}):null},u2e=({isOpen:t,onClose:e,noteId:n,noteTitle:r,onShare:i,onUnshare:s,existingShareData:o})=>{const[a,l]=b.useState(o||null),[c,u]=b.useState(!1),[d,p]=b.useState(!1),{toast:m}=rr(),x=async()=>{u(!0);try{const S=await i(n);l(S),m({title:"Note shared successfully",description:"Anyone with this link can view your note."})}catch{m({title:"Error sharing note",description:"Failed to generate share link. Please try again.",variant:"destructive"})}finally{u(!1)}};b.useEffect(()=>{t&&(l(o||null),p(!1),o||x())},[t,o]);const w=async()=>{u(!0);try{await s(n),l(null),m({title:"Sharing revoked",description:"This note is no longer publicly accessible."})}catch{m({title:"Error revoking share",description:"Failed to revoke sharing. Please try again.",variant:"destructive"})}finally{u(!1)}},v=async()=>{if(a!=null&&a.shareUrl)try{await navigator.clipboard.writeText(a.shareUrl),p(!0),m({title:"Link copied",description:"Share link copied to clipboard."}),setTimeout(()=>p(!1),2e3)}catch{m({title:"Failed to copy",description:"Could not copy link to clipboard.",variant:"destructive"})}},y=()=>{a!=null&&a.shareUrl&&window.open(a.shareUrl,"_blank")};return t?h.jsx(Vc,{open:t,onOpenChange:S=>!S&&e(),children:h.jsxs(dl,{className:"sm:max-w-[500px]",children:[h.jsxs(fl,{children:[h.jsxs(hl,{className:"flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(Rh,{className:"h-5 w-5 text-slate-500"}),"Share Note"]}),h.jsx(Pw,{style:{fontFamily:'"Raleway", sans-serif'},children:"Create a shareable link for your note"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{style:{fontFamily:'"Raleway", sans-serif'},children:"Sharing"}),h.jsx("div",{className:"p-3 bg-gray-50 dark:bg-slate-700 rounded-md",children:h.jsxs("p",{className:"font-medium text-sm flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(CheckSquare,{className:"h-4 w-4 text-slate-500"}),r]})})]}),a?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{style:{fontFamily:'"Raleway", sans-serif'},children:"Share Link"}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(Sn,{value:(a==null?void 0:a.shareUrl)||"",readOnly:!0,className:"flex-1"}),h.jsx($e,{type:"button",variant:"outline",size:"icon",onClick:v,disabled:c,"aria-label":"Copy link",children:d?h.jsx(wi,{className:"h-4 w-4 text-green-600"}):h.jsx(oh,{className:"h-4 w-4"})}),h.jsx($e,{type:"button",variant:"outline",size:"icon",onClick:y,disabled:c,"aria-label":"Open link",children:h.jsx(ah,{className:"h-4 w-4"})})]}),h.jsx("p",{className:"text-xs text-gray-500",style:{fontFamily:'"Raleway", sans-serif'},children:"Anyone with this link can view this note"})]}),h.jsxs("div",{className:"flex justify-between space-x-2",children:[h.jsx($e,{type:"button",onClick:w,disabled:c,className:"bg-red-600 hover:bg-red-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:"Revoke Sharing"}),h.jsx($e,{type:"button",onClick:e,className:"bg-blue-600 hover:bg-blue-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:"Done"})]})]}):h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{style:{fontFamily:'"Raleway", sans-serif'},children:"Share Link"}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(Sn,{value:"Generating share link...",readOnly:!0,className:"flex-1",placeholder:"Generating share link..."}),h.jsx($e,{type:"button",variant:"outline",size:"icon",disabled:!0,"aria-label":"Copy link",children:h.jsx(oh,{className:"h-4 w-4"})}),h.jsx($e,{type:"button",variant:"outline",size:"icon",disabled:!0,"aria-label":"Open link",children:h.jsx(ah,{className:"h-4 w-4"})})]}),h.jsx("p",{className:"text-xs text-gray-500",style:{fontFamily:'"Raleway", sans-serif'},children:"Anyone with this link can view this note"})]}),h.jsx("div",{className:"flex justify-end",children:h.jsx($e,{type:"button",variant:"outline",onClick:e,style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"})})]})]})]})}):null},d2e=({isOpen:t,onClose:e,whiteboardId:n,whiteboardTitle:r,onShare:i,onUnshare:s,existingShareData:o})=>{const[a,l]=b.useState(o||null),[c,u]=b.useState(!1),[d,p]=b.useState(!1),{toast:m}=rr(),x=async()=>{u(!0);try{const S=await i(n);l(S),m({title:"Whiteboard shared successfully",description:"Anyone with this link can view your whiteboard."})}catch{m({title:"Error sharing whiteboard",description:"Failed to generate share link. Please try again.",variant:"destructive"})}finally{u(!1)}};b.useEffect(()=>{t&&(l(o||null),p(!1),o||x())},[t,o]);const w=async()=>{u(!0);try{await s(n),l(null),m({title:"Sharing revoked",description:"This whiteboard is no longer publicly accessible."})}catch{m({title:"Error revoking share",description:"Failed to revoke sharing. Please try again.",variant:"destructive"})}finally{u(!1)}},v=async()=>{if(a!=null&&a.shareUrl)try{await navigator.clipboard.writeText(a.shareUrl),p(!0),m({title:"Link copied",description:"Share link copied to clipboard."}),setTimeout(()=>p(!1),2e3)}catch{m({title:"Failed to copy",description:"Could not copy link to clipboard.",variant:"destructive"})}},y=()=>{a!=null&&a.shareUrl&&window.open(a.shareUrl,"_blank")};return t?h.jsx(Vc,{open:t,onOpenChange:S=>!S&&e(),children:h.jsxs(dl,{className:"sm:max-w-[500px]",children:[h.jsxs(fl,{children:[h.jsxs(hl,{className:"flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(Rh,{className:"h-5 w-5 text-slate-500"}),"Share Whiteboard"]}),h.jsx(Pw,{style:{fontFamily:'"Raleway", sans-serif'},children:"Create a shareable link for your whiteboard"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{style:{fontFamily:'"Raleway", sans-serif'},children:"Sharing"}),h.jsx("div",{className:"p-3 bg-gray-50 dark:bg-slate-700 rounded-md",children:h.jsxs("p",{className:"font-medium text-sm flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[h.jsx(cl,{className:"h-4 w-4 text-slate-500"}),r]})})]}),a?h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{style:{fontFamily:'"Raleway", sans-serif'},children:"Share Link"}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(Sn,{value:(a==null?void 0:a.shareUrl)||"",readOnly:!0,className:"flex-1"}),h.jsx($e,{type:"button",variant:"outline",size:"icon",onClick:v,disabled:c,"aria-label":"Copy link",children:d?h.jsx(wi,{className:"h-4 w-4 text-green-600"}):h.jsx(oh,{className:"h-4 w-4"})}),h.jsx($e,{type:"button",variant:"outline",size:"icon",onClick:y,disabled:c,"aria-label":"Open link",children:h.jsx(ah,{className:"h-4 w-4"})})]}),h.jsx("p",{className:"text-xs text-gray-500",style:{fontFamily:'"Raleway", sans-serif'},children:"Anyone with this link can view this whiteboard"})]}),h.jsxs("div",{className:"flex justify-between space-x-2",children:[h.jsx($e,{type:"button",onClick:w,disabled:c,className:"bg-red-600 hover:bg-red-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:"Revoke Sharing"}),h.jsx($e,{type:"button",onClick:e,className:"bg-blue-600 hover:bg-blue-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:"Done"})]})]}):h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Un,{style:{fontFamily:'"Raleway", sans-serif'},children:"Share Link"}),h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(Sn,{value:"Generating share link...",readOnly:!0,className:"flex-1",placeholder:"Generating share link..."}),h.jsx($e,{type:"button",variant:"outline",size:"icon",disabled:!0,"aria-label":"Copy link",children:h.jsx(oh,{className:"h-4 w-4"})}),h.jsx($e,{type:"button",variant:"outline",size:"icon",disabled:!0,"aria-label":"Open link",children:h.jsx(ah,{className:"h-4 w-4"})})]}),h.jsx("p",{className:"text-xs text-gray-500",style:{fontFamily:'"Raleway", sans-serif'},children:"Anyone with this link can view this whiteboard"})]}),h.jsx("div",{className:"flex justify-end",children:h.jsx($e,{type:"button",variant:"outline",onClick:e,style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"})})]})]})]})}):null},HM="categoriesUpdated",U_=()=>{window.dispatchEvent(new CustomEvent(HM))},f2e=()=>{const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(null),{token:o}=to(),{toast:a}=rr(),l=b.useCallback(async()=>{if(o)try{r(!0);const v=await Y_e(o);e(v),s(null)}catch(v){console.error("Error fetching categories:",v),s("Failed to load categories")}finally{r(!1)}},[o]);b.useEffect(()=>{l()},[l]),b.useEffect(()=>{let v=null;const y=()=>{v||(console.log("🔄 Global category refresh triggered - refreshing categories list"),v=setTimeout(()=>{l(),v=null},1e3))};return window.addEventListener(HM,y),()=>{window.removeEventListener(HM,y),v&&clearTimeout(v)}},[l]);const c=b.useCallback(async v=>{if(!o)return null;try{const y=await J_e(v,o);return e(S=>[...S,y].sort((E,C)=>E.name.localeCompare(C.name))),console.log("📢 Triggering global category refresh after creating:",y.name),U_(),y}catch(y){console.error("Error creating category:",y);const S=y instanceof Error?y.message:"Failed to create category";return a({title:"Error creating category",description:S,variant:"destructive"}),null}},[o,a]),u=b.useCallback(async(v,y)=>{if(!o)return null;try{const S=await Q_e(v,y,o);return e(E=>E.map(C=>C.id===v?S:C).sort((C,A)=>C.name.localeCompare(A.name))),console.log("📢 Triggering global category refresh after updating:",S.name),U_(),S}catch(S){console.error("Error updating category:",S);const E=S instanceof Error?S.message:"Failed to update category";return a({title:"Error updating category",description:E,variant:"destructive"}),null}},[o,a]),d=b.useCallback(async v=>{if(!o)return!1;try{const y=t.find(S=>S.id===v);return await Z_e(v,o),e(S=>S.filter(E=>E.id!==v)),console.log("📢 Triggering global category refresh after deleting:",y==null?void 0:y.name),U_(),!0}catch(y){console.error("Error deleting category:",y);const S=y instanceof Error?y.message:"Failed to delete category";return a({title:"Error deleting category",description:S,variant:"destructive"}),!1}},[o,a,t]),p=t.map(v=>v.name),m=b.useCallback(v=>t.find(y=>y.id===v),[t]),x=b.useCallback(v=>t.find(y=>y.name===v),[t]),w=b.useCallback(v=>t.some(y=>y.name===v),[t]);return{categories:t,categoryNames:p,loading:n,error:i,addCategory:c,editCategory:u,removeCategory:d,refreshCategories:l,getCategoryById:m,getCategoryByName:x,isCategoryInUse:w,totalCategories:t.length}},h2e=()=>{const{theme:t}=Ts(),[e,n]=b.useState([]),[r,i]=b.useState(null),[s,o]=b.useState(!0),[a,l]=b.useState(!0),[c,u]=b.useState(!0),d=s||a||c,[p,m]=b.useState(""),[x,w]=b.useState(!1),[v,y]=b.useState(!1),[S,E]=b.useState(null),[C,A]=b.useState(!1),[T,k]=b.useState(!1),[R,P]=b.useState(!1),[M,L]=b.useState(null),[z,H]=b.useState(!1),[B,K]=b.useState(!1),[q,ee]=b.useState(null),[O,F]=b.useState(!1),[D,ie]=b.useState(!1),[$,U]=b.useState(!1),[Y,oe]=b.useState(null),{toast:ne}=rr(),{token:Z}=to(),[fe,we]=b.useState([]),[xe,Ve]=b.useState(null),[Pe,et]=b.useState([]),[te,ft]=b.useState(null),{categories:Ye,categoryNames:ht,addCategory:Qe,editCategory:St,isCategoryInUse:Ne,getCategoryByName:Me}=f2e(),st=async(J,le)=>{try{const ve=Me(J);if(!ve)throw new Error(`Category "${J}" not found`);const Ie=await St(ve.id,{name:le.name||ve.name,color_value:le.color_value||ve.color_value});if(!Ie)throw new Error("Failed to update category");if(console.log("Category updated successfully:",Ie),le.color_value){const Fe=le.color_value,at=e.filter(Et=>(Et.type||"General")===J);for(const Et of at)try{await rn({...Et,color_value:Fe})}catch(qt){console.error(`Failed to update list ${Et.id} color:`,qt)}const gt=fe.filter(Et=>(Et.category||"General")===J);for(const Et of gt)try{await je(Et.id,{color_value:Fe})}catch(qt){console.error(`Failed to update note ${Et.id} color:`,qt)}const mt=Pe.filter(Et=>(Et.category||"General")===J);for(const Et of mt)try{await tt(Et.id,{color_value:Fe})}catch(qt){console.error(`Failed to update whiteboard ${Et.id} color:`,qt)}console.log(`Category "${J}" and ${at.length+gt.length+mt.length} linked items updated successfully.`)}}catch(ve){console.error("Error updating category:",ve),ne({title:"Error",description:`Failed to update category "${J}". Please try again.`,variant:"destructive"})}};Ye.map(J=>({name:J.name,listCount:0,noteCount:0,totalCount:0}));const Q=J=>{if(!J)return{filteredLists:e,filteredNotes:fe,filteredWhiteboards:Pe};const le=e.filter(Fe=>Fe.type===J),ve=fe.filter(Fe=>Fe.category===J),Ie=Pe.filter(Fe=>Fe.category===J);return{filteredLists:le,filteredNotes:ve,filteredWhiteboards:Ie}},I=b.useRef(null),[re,G]=b.useState(!1),[ae,ce]=b.useState({x:0,y:0}),[Ae,De]=b.useState(new Set),[Je,me]=b.useState(new Set),[ge,be]=b.useState(new Set),Oe=()=>{const gt=[...e.map(Xt=>({x:Xt.position_x||0,y:Xt.position_y||0})),...fe.map(Xt=>({x:Xt.position_x,y:Xt.position_y})),...Pe.map(Xt=>({x:Xt.position_x,y:Xt.position_y}))],mt=(Xt,Kt)=>gt.some(Ct=>{const Jn=Math.abs(Xt-Ct.x),sn=Math.abs(Kt-Ct.y);return Jn<440&&sn<345});let Et=0;const qt=20;let pn;do{const Xt=300+Et*50,Kt=(Math.random()-.5)*Xt*2,Ct=(Math.random()-.5)*Xt*2;pn={x:2e3+Kt,y:2e3+Ct},Et++}while(mt(pn.x,pn.y)&&Et<qt);return pn},Xe=J=>Ae.has(J),Ge=J=>{De(le=>{const ve=new Set(le);return ve.has(J)?ve.delete(J):ve.add(J),ve})},wt=J=>Je.has(J),de=J=>{me(le=>{const ve=new Set(le);return ve.has(J)?ve.delete(J):ve.add(J),ve})},ot=J=>ge.has(J),We=J=>{be(le=>{const ve=new Set(le);return ve.has(J)?ve.delete(J):ve.add(J),ve})};b.useEffect(()=>{const J=()=>{A(window.innerWidth<768)};return J(),window.addEventListener("resize",J),()=>window.removeEventListener("resize",J)},[]),b.useEffect(()=>{(async()=>{try{o(!0),i(null);const le=await kV(Z);n(le)}catch(le){console.error("Error fetching lists:",le),i("Failed to load lists. Please try again.")}finally{o(!1)}})()},[Z,ne]),b.useEffect(()=>{Z&&(async()=>{try{l(!0),Ve(null);const le=await V_e(Z);we(le)}catch(le){console.error("Error fetching notes:",le);const ve=le instanceof Error?le.message:"Failed to load notes. Please try again.";Ve(ve),ne({title:"Error fetching notes",description:ve,variant:"destructive"})}finally{l(!1)}})()},[Z,ne]),b.useEffect(()=>{Z&&(async()=>{try{u(!0),ft(null);const le=await G_e(Z);et(le)}catch(le){console.error("Error fetching whiteboards:",le);const ve=le instanceof Error?le.message:"Failed to load whiteboards. Please try again.";ft(ve),ne({title:"Error fetching whiteboards",description:ve,variant:"destructive"})}finally{u(!1)}})()},[Z,ne]),b.useEffect(()=>{const J=le=>{if(re){const ve=le.target;!ve.closest("#new-canvas-button")&&!ve.closest(".context-menu")&&G(!1)}};return document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[re]);const rt=async(J,le,ve,Ie)=>{try{!Ne(le)&&le!=="General"&&await Qe({name:le,color_value:ve});const Fe={title:J,content:"",color_value:ve,position_x:Ie.x,position_y:Ie.y,width:570,height:350,z_index:0},at=await tO(Fe,Z);we(gt=>[at,...gt]),P(!1)}catch(Fe){console.error("Failed to create note:",Fe);const at=Fe instanceof Error?Fe.message:"Could not create your note. Please try again.";ne({title:"Error creating note",description:at,variant:"destructive"})}},je=async(J,le)=>{try{const ve=await $_e(J,le,Z);return we(Ie=>Ie.map(Fe=>Fe.id===J?ve:Fe)),ve}catch(ve){console.error("Failed to update note:",ve);const Ie=ve instanceof Error?ve.message:"Could not update your note. Please try again.";return ne({title:"Error updating note",description:Ie,variant:"destructive"}),null}},ke=async J=>{try{return await W_e(J,Z),we(le=>le.filter(ve=>ve.id!==J)),ne({title:"Note deleted",description:"Your note has been successfully removed."}),!0}catch(le){console.error("Failed to delete note:",le);const ve=le instanceof Error?le.message:"Could not delete your note. Please try again.";return ne({title:"Error deleting note",description:ve,variant:"destructive"}),!1}},Ue=async(J,le,ve,Ie)=>{try{!Ne(le)&&le!=="General"&&await Qe({name:le,color_value:ve});const Fe={title:J,category:le,canvas_data:'{"paths": [], "shapes": []}',canvas_width:750,canvas_height:620,background_color:"#FFFFFF",position_x:Ie.x,position_y:Ie.y,z_index:0,color_value:ve};console.log("handleCreateWhiteboard payload:",Fe);const at=await q_e(Fe,Z);et(gt=>[at,...gt])}catch(Fe){console.error("Failed to create whiteboard:",Fe);const at=Fe instanceof Error?Fe.message:"Could not create your whiteboard. Please try again.";ne({title:"Error creating whiteboard",description:at,variant:"destructive"})}},tt=async(J,le)=>{try{console.log("🎨 CanvasPage: Updating whiteboard:",{whiteboardId:J,updatedFields:Object.keys(le),hasCanvasData:!!le.canvas_data,canvasDataType:typeof le.canvas_data,canvasDataPreview:le.canvas_data?JSON.stringify(le.canvas_data).substring(0,200):"N/A"});const ve=await X_e(J,le,Z);return console.log("🎨 CanvasPage: Whiteboard update response:",{whiteboardId:ve.id,hasCanvasData:!!ve.canvas_data,canvasDataType:typeof ve.canvas_data,updatedAt:ve.updated_at}),et(Ie=>Ie.map(Fe=>Fe.id===J?ve:Fe)),ve}catch(ve){console.error("Failed to update whiteboard:",ve);const Ie=ve instanceof Error?ve.message:"Could not update your whiteboard. Please try again.";return ne({title:"Error updating whiteboard",description:Ie,variant:"destructive"}),null}},pt=async J=>{try{return await K_e(J,Z),et(le=>le.filter(ve=>ve.id!==J)),ne({title:"Whiteboard deleted",description:"Your whiteboard has been successfully removed."}),!0}catch(le){console.error("Failed to delete whiteboard:",le);const ve=le instanceof Error?le.message:"Could not delete your whiteboard. Please try again.";return ne({title:"Error deleting whiteboard",description:ve,variant:"destructive"}),!1}},Tt=async(J,le,ve)=>{try{const Ie=Oe();!Ne(le)&&le!=="General"&&await Qe({name:le,color_value:ve});const Fe=await PV({title:J,type:le,items:[],position_x:Ie.x,position_y:Ie.y},Z),at={id:Fe.id,title:Fe.title,type:Fe.type||"General",items:Fe.items||[],createdAt:new Date(Fe.createdAt),position_x:Fe.position_x||Ie.x,position_y:Fe.position_y||Ie.y};n(gt=>[at,...gt]),w(!1)}catch(Ie){console.error("Failed to create list:",Ie),ne({title:"Error creating list",description:"Could not create your list. Please try again.",variant:"destructive"})}},rn=async J=>{try{await DV(J,Z),n(le=>le.map(ve=>ve.id===J.id?J:ve))}catch(le){console.error("Failed to update list:",le),ne({title:"Error updating list",description:"Could not update your list. Please try again.",variant:"destructive"})}},$t=async J=>{try{await IV(J,Z),n(le=>le.filter(ve=>ve.id!==J)),ne({title:"List deleted",description:"Your list has been successfully removed."})}catch(le){console.error("Failed to delete list:",le),ne({title:"Error deleting list",description:"Could not delete your list. Please try again.",variant:"destructive"})}},Pn=J=>{n(le=>[J,...le]),H(!1)},vn=J=>{L(J),P(!0)},dn=J=>{console.log("handleOpenNewWhiteboardModal called with position:",J),ee(J),K(!0)},Zi=()=>{G(!1),H(!0)},As=()=>{G(!1),L({x:100,y:100}),P(!0)},li=()=>{G(!1),ee(Oe()),K(!0)},ci=async J=>{const le=e.find(Ie=>Ie.id===J);if(!le)return;const ve=le.share_token&&le.is_public?{shareToken:le.share_token,shareUrl:`${window.location.protocol}//${window.location.host}/shared/list/${le.share_token}`}:void 0;oe({id:J,title:le.title,shareData:ve}),F(!0)},Fo=async J=>{const le=fe.find(ve=>ve.id===J);le&&(oe({id:J,title:le.title}),ie(!0))},xl=async J=>{const le=Pe.find(ve=>ve.id===J);le&&(oe({id:J,title:le.title}),U(!0))},bd=async J=>{try{return(await Zt.post(`/api/lists/${J}/share`,{},{headers:{Authorization:`Bearer ${Z}`}})).data}catch(le){throw console.error("Error sharing list:",le),le}},Sd=async J=>{try{await Zt.delete(`/api/lists/${J}/share`,{headers:{Authorization:`Bearer ${Z}`}})}catch(le){throw console.error("Error unsharing list:",le),le}},_d=async J=>{try{return(await Zt.post(`/api/notes/${J}/share`,{},{headers:{Authorization:`Bearer ${Z}`}})).data}catch(le){throw console.error("Error sharing note:",le),le}},Wh=async J=>{try{await Zt.delete(`/api/notes/${J}/share`,{headers:{Authorization:`Bearer ${Z}`}})}catch(le){throw console.error("Error unsharing note:",le),le}},Gh=async J=>{try{return(await Zt.post(`/api/whiteboards/${J}/share`,{},{headers:{Authorization:`Bearer ${Z}`}})).data}catch(le){throw console.error("Error sharing whiteboard:",le),le}},qh=async J=>{try{await Zt.delete(`/api/whiteboards/${J}/share`,{headers:{Authorization:`Bearer ${Z}`}})}catch(le){throw console.error("Error unsharing whiteboard:",le),le}},Xh=async(J,le,ve)=>{try{!Ne(le)&&le!=="General"&&await Qe({name:le,color_value:ve});const Ie=Oe(),Fe=await tO({title:J,content:"",color_value:ve,position_x:Ie.x,position_y:Ie.y,width:570,height:350,z_index:0},Z);we(at=>[Fe,...at]),y(!1)}catch(Ie){console.error("Failed to create note:",Ie),ne({title:"Error creating note",description:"Could not create your note. Please try again.",variant:"destructive"})}};if(d)return h.jsxs("div",{className:"flex flex-col h-screen",children:[h.jsx("div",{className:"bg-background border-b border-border relative z-10",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsx("div",{className:"py-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[h.jsx("h1",{className:"text-xl font-semibold italic whitespace-nowrap",style:{fontFamily:'"Raleway", sans-serif',color:t==="dark"?"#ffffff":"#374151"},children:"MY CANVAS"}),h.jsxs("div",{className:"relative hidden sm:block ml-4",children:[h.jsx(Ko,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),h.jsx("div",{className:"animate-pulse bg-slate-200 rounded-md w-48 h-9"})]})]}),h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[h.jsx("div",{className:"animate-pulse bg-slate-200 rounded-md w-12 h-6"}),h.jsx("div",{className:"animate-pulse bg-slate-200 rounded-md w-20 h-9"})]})]})}),h.jsx("div",{className:"sm:hidden pb-4",children:h.jsxs("div",{className:"relative",children:[h.jsx(Ko,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),h.jsx("div",{className:"animate-pulse bg-slate-200 rounded-md w-full h-9"})]})})]})}),h.jsx("div",{className:"flex-1 flex items-center justify-center",children:h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mb-4"}),h.jsx("span",{className:"text-lg",style:{color:t==="dark"?"#ffffff":"#374151"},children:"Loading Canvas..."})]})})]});if(r)return h.jsxs("div",{className:"",children:[h.jsx("div",{className:"bg-background border-b border-border",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsx("div",{className:"py-4",children:h.jsx("div",{className:"flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("h1",{className:"text-xl font-semibold italic whitespace-nowrap",style:{fontFamily:'"Raleway", sans-serif',color:t==="dark"?"#ffffff":"#374151"},children:"MY CANVAS"}),h.jsxs("div",{className:"relative hidden sm:block ml-4",children:[h.jsx(Ko,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),h.jsx(Sn,{placeholder:"Search lists...",value:p,onChange:J=>m(J.target.value),className:"pl-10 w-48 h-9",disabled:!0})]})]})})})})}),h.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[h.jsxs("div",{className:"text-destructive text-lg mb-4",children:["⚠️ ",r]}),h.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary text-primary-foreground px-4 py-2 rounded-md hover:bg-primary/90",children:"Retry"})]})]});const Kh=()=>Array.from(new Set(ht.filter(Boolean))),W=()=>{const{filteredLists:J,filteredNotes:le,filteredWhiteboards:ve}=Q(S);let Ie=[...J];p&&(Ie=Ie.filter(gt=>gt.title.toLowerCase().includes(p.toLowerCase())||gt.items&&gt.items.some(mt=>{var Et;return(Et=mt.text)==null?void 0:Et.toLowerCase().includes(p.toLowerCase())})));let Fe=[...le];p&&(Fe=Fe.filter(gt=>{var mt,Et;return((mt=gt.title)==null?void 0:mt.toLowerCase().includes(p.toLowerCase()))||((Et=gt.content)==null?void 0:Et.toLowerCase().includes(p.toLowerCase()))}));let at=[...ve];return p&&(at=at.filter(gt=>{var mt;return(mt=gt.title)==null?void 0:mt.toLowerCase().includes(p.toLowerCase())})),{filteredLists:Ie,filteredNotes:Fe,filteredWhiteboards:at}},pe=()=>{const J={};return e.forEach(le=>{const ve=le.type||"General";J[ve]=(J[ve]||0)+1}),fe.forEach(le=>{const ve=le.category||"General";J[ve]=(J[ve]||0)+1}),J};W();const _e=()=>h.jsx("div",{className:"bg-background border-b border-border relative z-10",children:h.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:[h.jsx("div",{className:"py-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[h.jsx("h1",{className:"text-xl font-semibold italic whitespace-nowrap",style:{fontFamily:'"Raleway", sans-serif',color:t==="dark"?"#ffffff":"#374151"},children:"MY CANVAS"}),h.jsxs("div",{className:"relative hidden sm:block ml-4",children:[h.jsx(Ko,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),h.jsx(Sn,{placeholder:"Search canvas...",value:p,onChange:J=>m(J.target.value),className:"pl-10 w-48 h-9",style:{fontFamily:'"Raleway", sans-serif'}})]})]}),h.jsx("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:h.jsxs($e,{id:"new-canvas-button",onClick:J=>{if(J.preventDefault(),J.stopPropagation(),re)G(!1);else{const le=document.getElementById("new-canvas-button");if(le){const ve=le.getBoundingClientRect();ce({x:ve.left+ve.width/2,y:ve.bottom+5}),G(!0)}}},size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white whitespace-nowrap font-light",children:[h.jsx(xo,{className:"h-4 w-4 mr-2"})," Add"]})})]})}),h.jsx("div",{className:"sm:hidden pb-4",children:h.jsxs("div",{className:"relative",children:[h.jsx(Ko,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),h.jsx(Sn,{placeholder:"Search canvas...",value:p,onChange:J=>m(J.target.value),className:"pl-10 placeholder:font-light",style:{fontFamily:'"Raleway", sans-serif'}})]})})]})}),Se=()=>{const{filteredLists:J,filteredNotes:le,filteredWhiteboards:ve}=W();return h.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-8",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[h.jsx("h3",{className:"text-lg font-light text-foreground flex-shrink-0",children:"Categories"}),h.jsx("div",{className:"flex gap-2 overflow-x-auto flex-1 pb-2 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:Kh().map(Ie=>{const Fe=pe()[Ie]||0,at=S===Ie;return h.jsxs($e,{variant:at?"default":"outline",size:"sm",onClick:()=>{E(at?null:Ie)},className:`capitalize font-light whitespace-nowrap flex-shrink-0 ${at?"bg-blue-600 hover:bg-blue-700 text-white":""}`,children:[Ie," (",Fe,")"]},Ie)})})]}),J.length===0&&le.length===0&&ve.length===0?h.jsx("div",{className:"text-center py-12",children:e.length===0&&fe.length===0&&Pe.length===0?h.jsx("div",{className:"max-w-md mx-auto",children:h.jsxs("div",{className:"bg-card rounded-lg shadow-sm border border-border p-8",children:[h.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(xo,{className:"h-8 w-8 text-blue-600"})}),h.jsxs("h3",{className:"text-lg font-light text-foreground mb-6",children:["No content on your canvas",h.jsx("br",{}),"(for now!)"]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[h.jsxs($e,{onClick:()=>H(!0),className:"bg-blue-600 hover:bg-blue-700 text-white font-normal",children:[h.jsx(xo,{className:"h-4 w-4 mr-2"}),"Add List"]}),h.jsxs($e,{onClick:()=>y(!0),className:"bg-blue-600 hover:bg-blue-700 text-white font-normal",children:[h.jsx(xo,{className:"h-4 w-4 mr-2"}),"Add Note"]}),h.jsxs($e,{onClick:()=>{const Ie=Oe();ee(Ie),K(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white font-normal",children:[h.jsx(xo,{className:"h-4 w-4 mr-2"}),"Add Whiteboard"]})]})]})}):h.jsxs("div",{className:"text-muted-foreground",children:[h.jsx(Ko,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),h.jsx("p",{children:"No content matches your search criteria."})]})}):h.jsxs(h.Fragment,{children:[J.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs("h2",{className:"text-xl font-light text-foreground mb-6 flex items-center gap-2",children:[h.jsx(md,{className:"h-5 w-5 text-muted-foreground"}),"My Lists"]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:J.map(Ie=>h.jsx(fR,{list:Ie,onUpdate:rn,onDelete:$t,onShare:ci,existingCategories:Ye,isCollapsed:Xe(Ie.id),onToggleCollapsed:()=>Ge(Ie.id),addCategory:Qe,updateCategory:st},Ie.id))})]}),le.length>0&&h.jsxs("div",{className:J.length>0?"mt-12":"",children:[h.jsxs("h2",{className:"text-xl font-light text-foreground mb-6 flex items-center gap-2",children:[h.jsx(gd,{className:"h-5 w-5 text-muted-foreground"}),"My Notes"]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:le.map(Ie=>h.jsx(jW,{note:Ie,onUpdate:async(Fe,at)=>{await je(Fe,at)},onDelete:async Fe=>{await ke(Fe)},onShare:Fo,existingCategories:Ye,isCollapsed:wt(Ie.id),onToggleCollapsed:()=>de(Ie.id),updateCategory:st},Ie.id))})]}),ve.length>0&&h.jsxs("div",{className:J.length>0||le.length>0?"mt-12":"",children:[h.jsxs("h2",{className:"text-xl font-light text-foreground mb-6 flex items-center gap-2",children:[h.jsx(cl,{className:"h-5 w-5 text-muted-foreground"}),"My Whiteboards"]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ve.map(Ie=>h.jsx(t8,{whiteboard:Ie,onUpdate:async(Fe,at)=>await tt(Fe,at),onDelete:async Fe=>await pt(Fe),onShare:xl,existingCategories:Ye,isCollapsed:ot(Ie.id),onToggleCollapsed:()=>We(Ie.id),updateCategory:st},Ie.id))})]})]})]})};return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
        ${C?"":`
          body { overflow: hidden !important; }
          html { overflow: hidden !important; }
        `}
        
        /* Hide scrollbar for horizontal category scrolling */
        .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
      `}),h.jsxs("div",{className:`w-full flex flex-col ${C?"min-h-screen":"h-[calc(100vh-4rem)] overflow-hidden"}`,children:[h.jsx(_e,{}),d?h.jsx("div",{className:"flex-1 flex items-center justify-center",children:h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mb-4"}),h.jsx("span",{className:"text-lg",style:{color:t==="dark"?"#ffffff":"#374151"},children:"Loading Canvas..."})]})}):r?h.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[h.jsxs("div",{className:"text-destructive text-lg mb-4",children:["⚠️ ",r]}),h.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary text-primary-foreground px-4 py-2 rounded-md hover:bg-primary/90",children:"Retry"})]}):C?h.jsx("div",{className:"flex-1 overflow-y-auto",children:h.jsx(Se,{})}):h.jsx("div",{className:"w-screen relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] absolute inset-x-0",style:{top:0,bottom:0},children:h.jsx(i2e,{existingCategories:Ye,searchQuery:p,onOpenNewNoteModal:vn,onShareList:ci,notes:fe,onNoteUpdate:je,onNoteDelete:ke,whiteboards:Pe,onWhiteboardUpdate:tt,onWhiteboardDelete:pt,onOpenNewWhiteboardModal:dn,addCategory:Qe,updateCategory:st,onReady:J=>{I.current||(I.current=J,console.log("Canvas methods ready:",J))}})}),h.jsx(W5,{isOpen:x,onClose:()=>w(!1),onCreateList:Tt,existingCategories:ht}),h.jsx(s2e,{isOpen:v,onClose:()=>y(!1),onCreateNote:Xh,existingCategories:ht}),R&&M&&h.jsx(a2e,{isOpen:R,onClose:()=>P(!1),onCreateNote:rt,initialPosition:M,existingCategories:ht}),B&&q&&h.jsx(l2e,{isOpen:B,onClose:()=>K(!1),onCreateWhiteboard:Ue,initialPosition:q,existingCategories:ht}),z&&h.jsx(LV,{isOpen:z,onClose:()=>H(!1),onListCreated:Pn,existingCategories:ht,position:Oe()}),O&&Y&&h.jsx(c2e,{isOpen:O,onClose:()=>{F(!1),oe(null)},listId:Y.id,listTitle:Y.title,onShare:bd,onUnshare:Sd,existingShareData:Y.shareData}),D&&Y&&h.jsx(u2e,{isOpen:D,onClose:()=>{ie(!1),oe(null)},noteId:Y.id,noteTitle:Y.title,onShare:_d,onUnshare:Wh,existingShareData:Y.shareData}),$&&Y&&h.jsx(d2e,{isOpen:$,onClose:()=>{U(!1),oe(null)},whiteboardId:Y.id,whiteboardTitle:Y.title,onShare:Gh,onUnshare:qh,existingShareData:Y.shareData}),re&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,pointerEvents:"auto"},onClick:()=>G(!1),children:h.jsx(NV,{position:{x:0,y:0},absolutePosition:ae,onAddList:Zi,onAddNote:As,onAddWhiteboard:li,onClose:()=>G(!1),isFromButton:!0})})]})]})},p2e=new $ie,m2e="761425672348-63ncpr61i8hv48l94ljju4uloahreohs.apps.googleusercontent.com",g2e=()=>{const{currentUser:t,loading:e}=to();return e?h.jsx("div",{className:"flex items-center justify-center min-h-screen",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})}):t?h.jsx(QE,{to:"/canvas",replace:!0}):h.jsx(QE,{to:"/home",replace:!0})},y2e=()=>{const t=ul(),[e,n]=b.useState(window.innerWidth>=768);b.useEffect(()=>{const s=()=>{n(window.innerWidth>=768)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),b.useEffect(()=>{if(typeof window<"u"&&"scrollRestoration"in history){const s=history.scrollRestoration;return history.scrollRestoration="manual",()=>{history.scrollRestoration=s}}},[]),b.useEffect(()=>{window.scrollTo(0,0)},[t.pathname]);const i=!(t.pathname==="/canvas")||!e;return h.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[h.jsx(Ale,{}),h.jsx("main",{className:"flex-grow",children:h.jsxs(zse,{children:[h.jsx(cs,{path:"/",element:h.jsx(g2e,{})}),h.jsx(cs,{path:"/home",element:h.jsx(Hpe,{})}),h.jsx(cs,{path:"/auth/callback",element:h.jsx(Lve,{})}),h.jsx(cs,{path:"/help/*",element:h.jsx(A_e,{})}),h.jsx(cs,{path:"/status",element:h.jsx(R_e,{})}),h.jsx(cs,{path:"/shared/list/:token",element:h.jsx(k_e,{})}),h.jsx(cs,{path:"/shared/note/:token",element:h.jsx(D_e,{})}),h.jsx(cs,{path:"/shared/whiteboard/:token",element:h.jsx(U_e,{})}),h.jsxs(cs,{element:h.jsx(z_e,{}),children:[h.jsx(cs,{path:"/lists",element:h.jsx(Dve,{})}),h.jsx(cs,{path:"/canvas",element:h.jsx(h2e,{})})]}),h.jsx(cs,{path:"*",element:h.jsx(Ive,{})})]})}),i&&h.jsx(Rle,{})]})},v2e=()=>h.jsx(Gie,{client:p2e,children:h.jsx(wie,{children:h.jsx(mne,{attribute:"class",defaultTheme:"light",enableSystem:!1,themes:["light","dark"],children:h.jsx(Zse,{clientId:m2e,children:h.jsx(roe,{children:h.jsxs(ioe,{children:[h.jsx(fne,{}),h.jsx(qne,{}),h.jsx(qse,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:h.jsx(y2e,{})})]})})})})})});Vj(document.getElementById("root")).render(h.jsx(v2e,{}));
