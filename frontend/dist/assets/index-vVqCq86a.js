var JN=t=>{throw TypeError(t)};var rS=(t,e,n)=>e.has(t)||JN("Cannot "+n);var Le=(t,e,n)=>(rS(t,e,"read from private field"),n?n.call(t):e.get(t)),mn=(t,e,n)=>e.has(t)?JN("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),zt=(t,e,n,r)=>(rS(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ti=(t,e,n)=>(rS(t,e,"access private method"),n);var wv=(t,e,n,r)=>({set _(i){zt(t,e,i,n)},get _(){return Le(t,e,r)}});function cK(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function S0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aF={exports:{}},_0={},lF={exports:{}},nn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym=Symbol.for("react.element"),uK=Symbol.for("react.portal"),dK=Symbol.for("react.fragment"),fK=Symbol.for("react.strict_mode"),hK=Symbol.for("react.profiler"),pK=Symbol.for("react.provider"),mK=Symbol.for("react.context"),gK=Symbol.for("react.forward_ref"),vK=Symbol.for("react.suspense"),yK=Symbol.for("react.memo"),xK=Symbol.for("react.lazy"),QN=Symbol.iterator;function wK(t){return t===null||typeof t!="object"?null:(t=QN&&t[QN]||t["@@iterator"],typeof t=="function"?t:null)}var cF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uF=Object.assign,dF={};function gh(t,e,n){this.props=t,this.context=e,this.refs=dF,this.updater=n||cF}gh.prototype.isReactComponent={};gh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fF(){}fF.prototype=gh.prototype;function CM(t,e,n){this.props=t,this.context=e,this.refs=dF,this.updater=n||cF}var MM=CM.prototype=new fF;MM.constructor=CM;uF(MM,gh.prototype);MM.isPureReactComponent=!0;var ZN=Array.isArray,hF=Object.prototype.hasOwnProperty,TM={current:null},pF={key:!0,ref:!0,__self:!0,__source:!0};function mF(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)hF.call(e,r)&&!pF.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ym,type:t,key:s,ref:o,props:i,_owner:TM.current}}function bK(t,e){return{$$typeof:Ym,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function AM(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ym}function SK(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var eP=/\/+/g;function iS(t,e){return typeof t=="object"&&t!==null&&t.key!=null?SK(""+t.key):e.toString(36)}function ky(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ym:case uK:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+iS(o,0):r,ZN(i)?(n="",t!=null&&(n=t.replace(eP,"$&/")+"/"),ky(i,e,n,"",function(c){return c})):i!=null&&(AM(i)&&(i=bK(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(eP,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ZN(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+iS(s,a);o+=ky(s,e,n,l,i)}else if(l=wK(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+iS(s,a++),o+=ky(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function bv(t,e,n){if(t==null)return t;var r=[],i=0;return ky(t,r,"","",function(s){return e.call(n,s,i++)}),r}function _K(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ki={current:null},Ny={transition:null},EK={ReactCurrentDispatcher:ki,ReactCurrentBatchConfig:Ny,ReactCurrentOwner:TM};function gF(){throw Error("act(...) is not supported in production builds of React.")}nn.Children={map:bv,forEach:function(t,e,n){bv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bv(t,function(){e++}),e},toArray:function(t){return bv(t,function(e){return e})||[]},only:function(t){if(!AM(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};nn.Component=gh;nn.Fragment=dK;nn.Profiler=hK;nn.PureComponent=CM;nn.StrictMode=fK;nn.Suspense=vK;nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EK;nn.act=gF;nn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=uF({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=TM.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)hF.call(e,l)&&!pF.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ym,type:t.type,key:i,ref:s,props:r,_owner:o}};nn.createContext=function(t){return t={$$typeof:mK,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pK,_context:t},t.Consumer=t};nn.createElement=mF;nn.createFactory=function(t){var e=mF.bind(null,t);return e.type=t,e};nn.createRef=function(){return{current:null}};nn.forwardRef=function(t){return{$$typeof:gK,render:t}};nn.isValidElement=AM;nn.lazy=function(t){return{$$typeof:xK,_payload:{_status:-1,_result:t},_init:_K}};nn.memo=function(t,e){return{$$typeof:yK,type:t,compare:e===void 0?null:e}};nn.startTransition=function(t){var e=Ny.transition;Ny.transition={};try{t()}finally{Ny.transition=e}};nn.unstable_act=gF;nn.useCallback=function(t,e){return ki.current.useCallback(t,e)};nn.useContext=function(t){return ki.current.useContext(t)};nn.useDebugValue=function(){};nn.useDeferredValue=function(t){return ki.current.useDeferredValue(t)};nn.useEffect=function(t,e){return ki.current.useEffect(t,e)};nn.useId=function(){return ki.current.useId()};nn.useImperativeHandle=function(t,e,n){return ki.current.useImperativeHandle(t,e,n)};nn.useInsertionEffect=function(t,e){return ki.current.useInsertionEffect(t,e)};nn.useLayoutEffect=function(t,e){return ki.current.useLayoutEffect(t,e)};nn.useMemo=function(t,e){return ki.current.useMemo(t,e)};nn.useReducer=function(t,e,n){return ki.current.useReducer(t,e,n)};nn.useRef=function(t){return ki.current.useRef(t)};nn.useState=function(t){return ki.current.useState(t)};nn.useSyncExternalStore=function(t,e,n){return ki.current.useSyncExternalStore(t,e,n)};nn.useTransition=function(){return ki.current.useTransition()};nn.version="18.3.1";lF.exports=nn;var b=lF.exports;const Me=S0(b),RM=cK({__proto__:null,default:Me},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CK=b,MK=Symbol.for("react.element"),TK=Symbol.for("react.fragment"),AK=Object.prototype.hasOwnProperty,RK=CK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kK={key:!0,ref:!0,__self:!0,__source:!0};function vF(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)AK.call(e,r)&&!kK.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:MK,type:t,key:s,ref:o,props:i,_owner:RK.current}}_0.Fragment=TK;_0.jsx=vF;_0.jsxs=vF;aF.exports=_0;var m=aF.exports,yF={exports:{}},Ms={},xF={exports:{}},wF={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,F){var D=O.length;O.push(F);e:for(;0<D;){var ee=D-1>>>1,W=O[ee];if(0<i(W,F))O[ee]=F,O[D]=W,D=ee;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var F=O[0],D=O.pop();if(D!==F){O[0]=D;e:for(var ee=0,W=O.length,B=W>>>1;ee<B;){var K=2*(ee+1)-1,ie=O[K],oe=K+1,Z=O[oe];if(0>i(ie,D))oe<W&&0>i(Z,ie)?(O[ee]=Z,O[oe]=D,ee=oe):(O[ee]=ie,O[K]=D,ee=K);else if(oe<W&&0>i(Z,D))O[ee]=Z,O[oe]=D,ee=oe;else break e}}return F}function i(O,F){var D=O.sortIndex-F.sortIndex;return D!==0?D:O.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,p=!1,x=!1,w=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(O){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=O)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function C(O){if(w=!1,E(O),!x)if(n(l)!==null)x=!0,q(T);else{var F=n(c);F!==null&&Q(C,F.startTime-O)}}function T(O,F){x=!1,w&&(w=!1,v(R),R=-1),p=!0;var D=h;try{for(E(F),d=n(l);d!==null&&(!(d.expirationTime>F)||O&&!I());){var ee=d.callback;if(typeof ee=="function"){d.callback=null,h=d.priorityLevel;var W=ee(d.expirationTime<=F);F=t.unstable_now(),typeof W=="function"?d.callback=W:d===n(l)&&r(l),E(F)}else r(l);d=n(l)}if(d!==null)var B=!0;else{var K=n(c);K!==null&&Q(C,K.startTime-F),B=!1}return B}finally{d=null,h=D,p=!1}}var A=!1,k=null,R=-1,P=5,M=-1;function I(){return!(t.unstable_now()-M<P)}function z(){if(k!==null){var O=t.unstable_now();M=O;var F=!0;try{F=k(!0,O)}finally{F?H():(A=!1,k=null)}}else A=!1}var H;if(typeof S=="function")H=function(){S(z)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,J=j.port2;j.port1.onmessage=z,H=function(){J.postMessage(null)}}else H=function(){y(z,0)};function q(O){k=O,A||(A=!0,H())}function Q(O,F){R=y(function(){O(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){x||p||(x=!0,q(T))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var D=h;h=F;try{return O()}finally{h=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,F){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var D=h;h=O;try{return F()}finally{h=D}},t.unstable_scheduleCallback=function(O,F,D){var ee=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?ee+D:ee):D=ee,O){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,O={id:u++,callback:F,priorityLevel:O,startTime:D,expirationTime:W,sortIndex:-1},D>ee?(O.sortIndex=D,e(c,O),n(l)===null&&O===n(c)&&(w?(v(R),R=-1):w=!0,Q(C,D-ee))):(O.sortIndex=W,e(l,O),x||p||(x=!0,q(T))),O},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(O){var F=h;return function(){var D=h;h=F;try{return O.apply(this,arguments)}finally{h=D}}}})(wF);xF.exports=wF;var NK=xF.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PK=b,Es=NK;function Ke(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bF=new Set,tm={};function fd(t,e){qf(t,e),qf(t+"Capture",e)}function qf(t,e){for(tm[t]=e,t=0;t<e.length;t++)bF.add(e[t])}var sl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S_=Object.prototype.hasOwnProperty,DK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tP={},nP={};function IK(t){return S_.call(nP,t)?!0:S_.call(tP,t)?!1:DK.test(t)?nP[t]=!0:(tP[t]=!0,!1)}function LK(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function OK(t,e,n,r){if(e===null||typeof e>"u"||LK(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ni(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var qr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qr[t]=new Ni(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qr[e]=new Ni(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qr[t]=new Ni(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qr[t]=new Ni(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qr[t]=new Ni(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qr[t]=new Ni(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qr[t]=new Ni(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qr[t]=new Ni(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qr[t]=new Ni(t,5,!1,t.toLowerCase(),null,!1,!1)});var kM=/[\-:]([a-z])/g;function NM(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kM,NM);qr[e]=new Ni(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kM,NM);qr[e]=new Ni(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kM,NM);qr[e]=new Ni(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qr[t]=new Ni(t,1,!1,t.toLowerCase(),null,!1,!1)});qr.xlinkHref=new Ni("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qr[t]=new Ni(t,1,!1,t.toLowerCase(),null,!0,!0)});function PM(t,e,n,r){var i=qr.hasOwnProperty(e)?qr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(OK(e,n,i,r)&&(n=null),r||i===null?IK(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hl=PK.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sv=Symbol.for("react.element"),af=Symbol.for("react.portal"),lf=Symbol.for("react.fragment"),DM=Symbol.for("react.strict_mode"),__=Symbol.for("react.profiler"),SF=Symbol.for("react.provider"),_F=Symbol.for("react.context"),IM=Symbol.for("react.forward_ref"),E_=Symbol.for("react.suspense"),C_=Symbol.for("react.suspense_list"),LM=Symbol.for("react.memo"),$l=Symbol.for("react.lazy"),EF=Symbol.for("react.offscreen"),rP=Symbol.iterator;function np(t){return t===null||typeof t!="object"?null:(t=rP&&t[rP]||t["@@iterator"],typeof t=="function"?t:null)}var Jn=Object.assign,sS;function Ep(t){if(sS===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sS=e&&e[1]||""}return`
`+sS+t}var oS=!1;function aS(t,e){if(!t||oS)return"";oS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{oS=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ep(t):""}function FK(t){switch(t.tag){case 5:return Ep(t.type);case 16:return Ep("Lazy");case 13:return Ep("Suspense");case 19:return Ep("SuspenseList");case 0:case 2:case 15:return t=aS(t.type,!1),t;case 11:return t=aS(t.type.render,!1),t;case 1:return t=aS(t.type,!0),t;default:return""}}function M_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case lf:return"Fragment";case af:return"Portal";case __:return"Profiler";case DM:return"StrictMode";case E_:return"Suspense";case C_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _F:return(t.displayName||"Context")+".Consumer";case SF:return(t._context.displayName||"Context")+".Provider";case IM:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case LM:return e=t.displayName||null,e!==null?e:M_(t.type)||"Memo";case $l:e=t._payload,t=t._init;try{return M_(t(e))}catch{}}return null}function UK(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M_(e);case 8:return e===DM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tc(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function CF(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BK(t){var e=CF(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _v(t){t._valueTracker||(t._valueTracker=BK(t))}function MF(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=CF(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function T_(t,e){var n=e.checked;return Jn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function iP(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Tc(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TF(t,e){e=e.checked,e!=null&&PM(t,"checked",e,!1)}function A_(t,e){TF(t,e);var n=Tc(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?R_(t,e.type,n):e.hasOwnProperty("defaultValue")&&R_(t,e.type,Tc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sP(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function R_(t,e,n){(e!=="number"||dx(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cp=Array.isArray;function _f(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Tc(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function k_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ke(91));return Jn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function oP(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ke(92));if(Cp(n)){if(1<n.length)throw Error(Ke(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tc(n)}}function AF(t,e){var n=Tc(e.value),r=Tc(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function aP(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function RF(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function N_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?RF(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ev,kF=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ev=Ev||document.createElement("div"),Ev.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ev.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nm(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Lp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zK=["Webkit","ms","Moz","O"];Object.keys(Lp).forEach(function(t){zK.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Lp[e]=Lp[t]})});function NF(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Lp.hasOwnProperty(t)&&Lp[t]?(""+e).trim():e+"px"}function PF(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=NF(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var jK=Jn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function P_(t,e){if(e){if(jK[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ke(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ke(62))}}function D_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var I_=null;function OM(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var L_=null,Ef=null,Cf=null;function lP(t){if(t=Zm(t)){if(typeof L_!="function")throw Error(Ke(280));var e=t.stateNode;e&&(e=A0(e),L_(t.stateNode,t.type,e))}}function DF(t){Ef?Cf?Cf.push(t):Cf=[t]:Ef=t}function IF(){if(Ef){var t=Ef,e=Cf;if(Cf=Ef=null,lP(t),e)for(t=0;t<e.length;t++)lP(e[t])}}function LF(t,e){return t(e)}function OF(){}var lS=!1;function FF(t,e,n){if(lS)return t(e,n);lS=!0;try{return LF(t,e,n)}finally{lS=!1,(Ef!==null||Cf!==null)&&(OF(),IF())}}function rm(t,e){var n=t.stateNode;if(n===null)return null;var r=A0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ke(231,e,typeof n));return n}var O_=!1;if(sl)try{var rp={};Object.defineProperty(rp,"passive",{get:function(){O_=!0}}),window.addEventListener("test",rp,rp),window.removeEventListener("test",rp,rp)}catch{O_=!1}function HK(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Op=!1,fx=null,hx=!1,F_=null,VK={onError:function(t){Op=!0,fx=t}};function $K(t,e,n,r,i,s,o,a,l){Op=!1,fx=null,HK.apply(VK,arguments)}function WK(t,e,n,r,i,s,o,a,l){if($K.apply(this,arguments),Op){if(Op){var c=fx;Op=!1,fx=null}else throw Error(Ke(198));hx||(hx=!0,F_=c)}}function hd(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function UF(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cP(t){if(hd(t)!==t)throw Error(Ke(188))}function GK(t){var e=t.alternate;if(!e){if(e=hd(t),e===null)throw Error(Ke(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return cP(i),t;if(s===r)return cP(i),e;s=s.sibling}throw Error(Ke(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ke(189))}}if(n.alternate!==r)throw Error(Ke(190))}if(n.tag!==3)throw Error(Ke(188));return n.stateNode.current===n?t:e}function BF(t){return t=GK(t),t!==null?zF(t):null}function zF(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zF(t);if(e!==null)return e;t=t.sibling}return null}var jF=Es.unstable_scheduleCallback,uP=Es.unstable_cancelCallback,XK=Es.unstable_shouldYield,qK=Es.unstable_requestPaint,or=Es.unstable_now,KK=Es.unstable_getCurrentPriorityLevel,FM=Es.unstable_ImmediatePriority,HF=Es.unstable_UserBlockingPriority,px=Es.unstable_NormalPriority,YK=Es.unstable_LowPriority,VF=Es.unstable_IdlePriority,E0=null,ca=null;function JK(t){if(ca&&typeof ca.onCommitFiberRoot=="function")try{ca.onCommitFiberRoot(E0,t,void 0,(t.current.flags&128)===128)}catch{}}var To=Math.clz32?Math.clz32:eY,QK=Math.log,ZK=Math.LN2;function eY(t){return t>>>=0,t===0?32:31-(QK(t)/ZK|0)|0}var Cv=64,Mv=4194304;function Mp(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mx(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Mp(a):(s&=o,s!==0&&(r=Mp(s)))}else o=n&~i,o!==0?r=Mp(o):s!==0&&(r=Mp(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-To(e),i=1<<n,r|=t[n],e&=~i;return r}function tY(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nY(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-To(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=tY(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function U_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $F(){var t=Cv;return Cv<<=1,!(Cv&4194240)&&(Cv=64),t}function cS(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jm(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-To(e),t[e]=n}function rY(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-To(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function UM(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-To(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _n=0;function WF(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var GF,BM,XF,qF,KF,B_=!1,Tv=[],dc=null,fc=null,hc=null,im=new Map,sm=new Map,Kl=[],iY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dP(t,e){switch(t){case"focusin":case"focusout":dc=null;break;case"dragenter":case"dragleave":fc=null;break;case"mouseover":case"mouseout":hc=null;break;case"pointerover":case"pointerout":im.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sm.delete(e.pointerId)}}function ip(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Zm(e),e!==null&&BM(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function sY(t,e,n,r,i){switch(e){case"focusin":return dc=ip(dc,t,e,n,r,i),!0;case"dragenter":return fc=ip(fc,t,e,n,r,i),!0;case"mouseover":return hc=ip(hc,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return im.set(s,ip(im.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,sm.set(s,ip(sm.get(s)||null,t,e,n,r,i)),!0}return!1}function YF(t){var e=Cu(t.target);if(e!==null){var n=hd(e);if(n!==null){if(e=n.tag,e===13){if(e=UF(n),e!==null){t.blockedOn=e,KF(t.priority,function(){XF(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Py(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=z_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);I_=r,n.target.dispatchEvent(r),I_=null}else return e=Zm(n),e!==null&&BM(e),t.blockedOn=n,!1;e.shift()}return!0}function fP(t,e,n){Py(t)&&n.delete(e)}function oY(){B_=!1,dc!==null&&Py(dc)&&(dc=null),fc!==null&&Py(fc)&&(fc=null),hc!==null&&Py(hc)&&(hc=null),im.forEach(fP),sm.forEach(fP)}function sp(t,e){t.blockedOn===e&&(t.blockedOn=null,B_||(B_=!0,Es.unstable_scheduleCallback(Es.unstable_NormalPriority,oY)))}function om(t){function e(i){return sp(i,t)}if(0<Tv.length){sp(Tv[0],t);for(var n=1;n<Tv.length;n++){var r=Tv[n];r.blockedOn===t&&(r.blockedOn=null)}}for(dc!==null&&sp(dc,t),fc!==null&&sp(fc,t),hc!==null&&sp(hc,t),im.forEach(e),sm.forEach(e),n=0;n<Kl.length;n++)r=Kl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Kl.length&&(n=Kl[0],n.blockedOn===null);)YF(n),n.blockedOn===null&&Kl.shift()}var Mf=hl.ReactCurrentBatchConfig,gx=!0;function aY(t,e,n,r){var i=_n,s=Mf.transition;Mf.transition=null;try{_n=1,zM(t,e,n,r)}finally{_n=i,Mf.transition=s}}function lY(t,e,n,r){var i=_n,s=Mf.transition;Mf.transition=null;try{_n=4,zM(t,e,n,r)}finally{_n=i,Mf.transition=s}}function zM(t,e,n,r){if(gx){var i=z_(t,e,n,r);if(i===null)xS(t,e,r,vx,n),dP(t,r);else if(sY(i,t,e,n,r))r.stopPropagation();else if(dP(t,r),e&4&&-1<iY.indexOf(t)){for(;i!==null;){var s=Zm(i);if(s!==null&&GF(s),s=z_(t,e,n,r),s===null&&xS(t,e,r,vx,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else xS(t,e,r,null,n)}}var vx=null;function z_(t,e,n,r){if(vx=null,t=OM(r),t=Cu(t),t!==null)if(e=hd(t),e===null)t=null;else if(n=e.tag,n===13){if(t=UF(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vx=t,null}function JF(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KK()){case FM:return 1;case HF:return 4;case px:case YK:return 16;case VF:return 536870912;default:return 16}default:return 16}}var ic=null,jM=null,Dy=null;function QF(){if(Dy)return Dy;var t,e=jM,n=e.length,r,i="value"in ic?ic.value:ic.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Dy=i.slice(t,1<r?1-r:void 0)}function Iy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Av(){return!0}function hP(){return!1}function Ts(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Av:hP,this.isPropagationStopped=hP,this}return Jn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Av)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Av)},persist:function(){},isPersistent:Av}),e}var vh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},HM=Ts(vh),Qm=Jn({},vh,{view:0,detail:0}),cY=Ts(Qm),uS,dS,op,C0=Jn({},Qm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:VM,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==op&&(op&&t.type==="mousemove"?(uS=t.screenX-op.screenX,dS=t.screenY-op.screenY):dS=uS=0,op=t),uS)},movementY:function(t){return"movementY"in t?t.movementY:dS}}),pP=Ts(C0),uY=Jn({},C0,{dataTransfer:0}),dY=Ts(uY),fY=Jn({},Qm,{relatedTarget:0}),fS=Ts(fY),hY=Jn({},vh,{animationName:0,elapsedTime:0,pseudoElement:0}),pY=Ts(hY),mY=Jn({},vh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gY=Ts(mY),vY=Jn({},vh,{data:0}),mP=Ts(vY),yY={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xY={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wY={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bY(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wY[t])?!!e[t]:!1}function VM(){return bY}var SY=Jn({},Qm,{key:function(t){if(t.key){var e=yY[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Iy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xY[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:VM,charCode:function(t){return t.type==="keypress"?Iy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Iy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_Y=Ts(SY),EY=Jn({},C0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gP=Ts(EY),CY=Jn({},Qm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:VM}),MY=Ts(CY),TY=Jn({},vh,{propertyName:0,elapsedTime:0,pseudoElement:0}),AY=Ts(TY),RY=Jn({},C0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kY=Ts(RY),NY=[9,13,27,32],$M=sl&&"CompositionEvent"in window,Fp=null;sl&&"documentMode"in document&&(Fp=document.documentMode);var PY=sl&&"TextEvent"in window&&!Fp,ZF=sl&&(!$M||Fp&&8<Fp&&11>=Fp),vP=" ",yP=!1;function e3(t,e){switch(t){case"keyup":return NY.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function t3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cf=!1;function DY(t,e){switch(t){case"compositionend":return t3(e);case"keypress":return e.which!==32?null:(yP=!0,vP);case"textInput":return t=e.data,t===vP&&yP?null:t;default:return null}}function IY(t,e){if(cf)return t==="compositionend"||!$M&&e3(t,e)?(t=QF(),Dy=jM=ic=null,cf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZF&&e.locale!=="ko"?null:e.data;default:return null}}var LY={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LY[t.type]:e==="textarea"}function n3(t,e,n,r){DF(r),e=yx(e,"onChange"),0<e.length&&(n=new HM("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Up=null,am=null;function OY(t){h3(t,0)}function M0(t){var e=ff(t);if(MF(e))return t}function FY(t,e){if(t==="change")return e}var r3=!1;if(sl){var hS;if(sl){var pS="oninput"in document;if(!pS){var wP=document.createElement("div");wP.setAttribute("oninput","return;"),pS=typeof wP.oninput=="function"}hS=pS}else hS=!1;r3=hS&&(!document.documentMode||9<document.documentMode)}function bP(){Up&&(Up.detachEvent("onpropertychange",i3),am=Up=null)}function i3(t){if(t.propertyName==="value"&&M0(am)){var e=[];n3(e,am,t,OM(t)),FF(OY,e)}}function UY(t,e,n){t==="focusin"?(bP(),Up=e,am=n,Up.attachEvent("onpropertychange",i3)):t==="focusout"&&bP()}function BY(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return M0(am)}function zY(t,e){if(t==="click")return M0(e)}function jY(t,e){if(t==="input"||t==="change")return M0(e)}function HY(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var No=typeof Object.is=="function"?Object.is:HY;function lm(t,e){if(No(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!S_.call(e,i)||!No(t[i],e[i]))return!1}return!0}function SP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _P(t,e){var n=SP(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=SP(n)}}function s3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?s3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function o3(){for(var t=window,e=dx();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dx(t.document)}return e}function WM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function VY(t){var e=o3(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&s3(n.ownerDocument.documentElement,n)){if(r!==null&&WM(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=_P(n,s);var o=_P(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $Y=sl&&"documentMode"in document&&11>=document.documentMode,uf=null,j_=null,Bp=null,H_=!1;function EP(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;H_||uf==null||uf!==dx(r)||(r=uf,"selectionStart"in r&&WM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bp&&lm(Bp,r)||(Bp=r,r=yx(j_,"onSelect"),0<r.length&&(e=new HM("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=uf)))}function Rv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var df={animationend:Rv("Animation","AnimationEnd"),animationiteration:Rv("Animation","AnimationIteration"),animationstart:Rv("Animation","AnimationStart"),transitionend:Rv("Transition","TransitionEnd")},mS={},a3={};sl&&(a3=document.createElement("div").style,"AnimationEvent"in window||(delete df.animationend.animation,delete df.animationiteration.animation,delete df.animationstart.animation),"TransitionEvent"in window||delete df.transitionend.transition);function T0(t){if(mS[t])return mS[t];if(!df[t])return t;var e=df[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in a3)return mS[t]=e[n];return t}var l3=T0("animationend"),c3=T0("animationiteration"),u3=T0("animationstart"),d3=T0("transitionend"),f3=new Map,CP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oc(t,e){f3.set(t,e),fd(e,[t])}for(var gS=0;gS<CP.length;gS++){var vS=CP[gS],WY=vS.toLowerCase(),GY=vS[0].toUpperCase()+vS.slice(1);Oc(WY,"on"+GY)}Oc(l3,"onAnimationEnd");Oc(c3,"onAnimationIteration");Oc(u3,"onAnimationStart");Oc("dblclick","onDoubleClick");Oc("focusin","onFocus");Oc("focusout","onBlur");Oc(d3,"onTransitionEnd");qf("onMouseEnter",["mouseout","mouseover"]);qf("onMouseLeave",["mouseout","mouseover"]);qf("onPointerEnter",["pointerout","pointerover"]);qf("onPointerLeave",["pointerout","pointerover"]);fd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fd("onBeforeInput",["compositionend","keypress","textInput","paste"]);fd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XY=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tp));function MP(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,WK(r,e,void 0,t),t.currentTarget=null}function h3(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;MP(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;MP(i,a,c),s=l}}}if(hx)throw t=F_,hx=!1,F_=null,t}function jn(t,e){var n=e[X_];n===void 0&&(n=e[X_]=new Set);var r=t+"__bubble";n.has(r)||(p3(e,t,2,!1),n.add(r))}function yS(t,e,n){var r=0;e&&(r|=4),p3(n,t,r,e)}var kv="_reactListening"+Math.random().toString(36).slice(2);function cm(t){if(!t[kv]){t[kv]=!0,bF.forEach(function(n){n!=="selectionchange"&&(XY.has(n)||yS(n,!1,t),yS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kv]||(e[kv]=!0,yS("selectionchange",!1,e))}}function p3(t,e,n,r){switch(JF(e)){case 1:var i=aY;break;case 4:i=lY;break;default:i=zM}n=i.bind(null,e,n,t),i=void 0,!O_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function xS(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Cu(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}FF(function(){var c=s,u=OM(n),d=[];e:{var h=f3.get(t);if(h!==void 0){var p=HM,x=t;switch(t){case"keypress":if(Iy(n)===0)break e;case"keydown":case"keyup":p=_Y;break;case"focusin":x="focus",p=fS;break;case"focusout":x="blur",p=fS;break;case"beforeblur":case"afterblur":p=fS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=pP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=dY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=MY;break;case l3:case c3:case u3:p=pY;break;case d3:p=AY;break;case"scroll":p=cY;break;case"wheel":p=kY;break;case"copy":case"cut":case"paste":p=gY;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=gP}var w=(e&4)!==0,y=!w&&t==="scroll",v=w?h!==null?h+"Capture":null:h;w=[];for(var S=c,E;S!==null;){E=S;var C=E.stateNode;if(E.tag===5&&C!==null&&(E=C,v!==null&&(C=rm(S,v),C!=null&&w.push(um(S,C,E)))),y)break;S=S.return}0<w.length&&(h=new p(h,x,null,n,u),d.push({event:h,listeners:w}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==I_&&(x=n.relatedTarget||n.fromElement)&&(Cu(x)||x[ol]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(x=n.relatedTarget||n.toElement,p=c,x=x?Cu(x):null,x!==null&&(y=hd(x),x!==y||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=c),p!==x)){if(w=pP,C="onMouseLeave",v="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(w=gP,C="onPointerLeave",v="onPointerEnter",S="pointer"),y=p==null?h:ff(p),E=x==null?h:ff(x),h=new w(C,S+"leave",p,n,u),h.target=y,h.relatedTarget=E,C=null,Cu(u)===c&&(w=new w(v,S+"enter",x,n,u),w.target=E,w.relatedTarget=y,C=w),y=C,p&&x)t:{for(w=p,v=x,S=0,E=w;E;E=Dd(E))S++;for(E=0,C=v;C;C=Dd(C))E++;for(;0<S-E;)w=Dd(w),S--;for(;0<E-S;)v=Dd(v),E--;for(;S--;){if(w===v||v!==null&&w===v.alternate)break t;w=Dd(w),v=Dd(v)}w=null}else w=null;p!==null&&TP(d,h,p,w,!1),x!==null&&y!==null&&TP(d,y,x,w,!0)}}e:{if(h=c?ff(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var T=FY;else if(xP(h))if(r3)T=jY;else{T=BY;var A=UY}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(T=zY);if(T&&(T=T(t,c))){n3(d,T,n,u);break e}A&&A(t,h,c),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&R_(h,"number",h.value)}switch(A=c?ff(c):window,t){case"focusin":(xP(A)||A.contentEditable==="true")&&(uf=A,j_=c,Bp=null);break;case"focusout":Bp=j_=uf=null;break;case"mousedown":H_=!0;break;case"contextmenu":case"mouseup":case"dragend":H_=!1,EP(d,n,u);break;case"selectionchange":if($Y)break;case"keydown":case"keyup":EP(d,n,u)}var k;if($M)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else cf?e3(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(ZF&&n.locale!=="ko"&&(cf||R!=="onCompositionStart"?R==="onCompositionEnd"&&cf&&(k=QF()):(ic=u,jM="value"in ic?ic.value:ic.textContent,cf=!0)),A=yx(c,R),0<A.length&&(R=new mP(R,t,null,n,u),d.push({event:R,listeners:A}),k?R.data=k:(k=t3(n),k!==null&&(R.data=k)))),(k=PY?DY(t,n):IY(t,n))&&(c=yx(c,"onBeforeInput"),0<c.length&&(u=new mP("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=k))}h3(d,e)})}function um(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yx(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=rm(t,n),s!=null&&r.unshift(um(t,s,i)),s=rm(t,e),s!=null&&r.push(um(t,s,i))),t=t.return}return r}function Dd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function TP(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=rm(n,s),l!=null&&o.unshift(um(n,l,a))):i||(l=rm(n,s),l!=null&&o.push(um(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var qY=/\r\n?/g,KY=/\u0000|\uFFFD/g;function AP(t){return(typeof t=="string"?t:""+t).replace(qY,`
`).replace(KY,"")}function Nv(t,e,n){if(e=AP(e),AP(t)!==e&&n)throw Error(Ke(425))}function xx(){}var V_=null,$_=null;function W_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var G_=typeof setTimeout=="function"?setTimeout:void 0,YY=typeof clearTimeout=="function"?clearTimeout:void 0,RP=typeof Promise=="function"?Promise:void 0,JY=typeof queueMicrotask=="function"?queueMicrotask:typeof RP<"u"?function(t){return RP.resolve(null).then(t).catch(QY)}:G_;function QY(t){setTimeout(function(){throw t})}function wS(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),om(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);om(e)}function pc(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function kP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yh=Math.random().toString(36).slice(2),ra="__reactFiber$"+yh,dm="__reactProps$"+yh,ol="__reactContainer$"+yh,X_="__reactEvents$"+yh,ZY="__reactListeners$"+yh,eJ="__reactHandles$"+yh;function Cu(t){var e=t[ra];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ol]||n[ra]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=kP(t);t!==null;){if(n=t[ra])return n;t=kP(t)}return e}t=n,n=t.parentNode}return null}function Zm(t){return t=t[ra]||t[ol],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ff(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ke(33))}function A0(t){return t[dm]||null}var q_=[],hf=-1;function Fc(t){return{current:t}}function Hn(t){0>hf||(t.current=q_[hf],q_[hf]=null,hf--)}function Fn(t,e){hf++,q_[hf]=t.current,t.current=e}var Ac={},hi=Fc(Ac),Wi=Fc(!1),qu=Ac;function Kf(t,e){var n=t.type.contextTypes;if(!n)return Ac;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Gi(t){return t=t.childContextTypes,t!=null}function wx(){Hn(Wi),Hn(hi)}function NP(t,e,n){if(hi.current!==Ac)throw Error(Ke(168));Fn(hi,e),Fn(Wi,n)}function m3(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ke(108,UK(t)||"Unknown",i));return Jn({},n,r)}function bx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ac,qu=hi.current,Fn(hi,t),Fn(Wi,Wi.current),!0}function PP(t,e,n){var r=t.stateNode;if(!r)throw Error(Ke(169));n?(t=m3(t,e,qu),r.__reactInternalMemoizedMergedChildContext=t,Hn(Wi),Hn(hi),Fn(hi,t)):Hn(Wi),Fn(Wi,n)}var Ga=null,R0=!1,bS=!1;function g3(t){Ga===null?Ga=[t]:Ga.push(t)}function tJ(t){R0=!0,g3(t)}function Uc(){if(!bS&&Ga!==null){bS=!0;var t=0,e=_n;try{var n=Ga;for(_n=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ga=null,R0=!1}catch(i){throw Ga!==null&&(Ga=Ga.slice(t+1)),jF(FM,Uc),i}finally{_n=e,bS=!1}}return null}var pf=[],mf=0,Sx=null,_x=0,Hs=[],Vs=0,Ku=null,Ka=1,Ya="";function gu(t,e){pf[mf++]=_x,pf[mf++]=Sx,Sx=t,_x=e}function v3(t,e,n){Hs[Vs++]=Ka,Hs[Vs++]=Ya,Hs[Vs++]=Ku,Ku=t;var r=Ka;t=Ya;var i=32-To(r)-1;r&=~(1<<i),n+=1;var s=32-To(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ka=1<<32-To(e)+i|n<<i|r,Ya=s+t}else Ka=1<<s|n<<i|r,Ya=t}function GM(t){t.return!==null&&(gu(t,1),v3(t,1,0))}function XM(t){for(;t===Sx;)Sx=pf[--mf],pf[mf]=null,_x=pf[--mf],pf[mf]=null;for(;t===Ku;)Ku=Hs[--Vs],Hs[Vs]=null,Ya=Hs[--Vs],Hs[Vs]=null,Ka=Hs[--Vs],Hs[Vs]=null}var ws=null,ys=null,Wn=!1,So=null;function y3(t,e){var n=Xs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function DP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ws=t,ys=pc(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ws=t,ys=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ku!==null?{id:Ka,overflow:Ya}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ws=t,ys=null,!0):!1;default:return!1}}function K_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Y_(t){if(Wn){var e=ys;if(e){var n=e;if(!DP(t,e)){if(K_(t))throw Error(Ke(418));e=pc(n.nextSibling);var r=ws;e&&DP(t,e)?y3(r,n):(t.flags=t.flags&-4097|2,Wn=!1,ws=t)}}else{if(K_(t))throw Error(Ke(418));t.flags=t.flags&-4097|2,Wn=!1,ws=t}}}function IP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ws=t}function Pv(t){if(t!==ws)return!1;if(!Wn)return IP(t),Wn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!W_(t.type,t.memoizedProps)),e&&(e=ys)){if(K_(t))throw x3(),Error(Ke(418));for(;e;)y3(t,e),e=pc(e.nextSibling)}if(IP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ke(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ys=pc(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ys=null}}else ys=ws?pc(t.stateNode.nextSibling):null;return!0}function x3(){for(var t=ys;t;)t=pc(t.nextSibling)}function Yf(){ys=ws=null,Wn=!1}function qM(t){So===null?So=[t]:So.push(t)}var nJ=hl.ReactCurrentBatchConfig;function ap(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ke(309));var r=n.stateNode}if(!r)throw Error(Ke(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ke(284));if(!n._owner)throw Error(Ke(290,t))}return t}function Dv(t,e){throw t=Object.prototype.toString.call(e),Error(Ke(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function LP(t){var e=t._init;return e(t._payload)}function w3(t){function e(v,S){if(t){var E=v.deletions;E===null?(v.deletions=[S],v.flags|=16):E.push(S)}}function n(v,S){if(!t)return null;for(;S!==null;)e(v,S),S=S.sibling;return null}function r(v,S){for(v=new Map;S!==null;)S.key!==null?v.set(S.key,S):v.set(S.index,S),S=S.sibling;return v}function i(v,S){return v=yc(v,S),v.index=0,v.sibling=null,v}function s(v,S,E){return v.index=E,t?(E=v.alternate,E!==null?(E=E.index,E<S?(v.flags|=2,S):E):(v.flags|=2,S)):(v.flags|=1048576,S)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,S,E,C){return S===null||S.tag!==6?(S=AS(E,v.mode,C),S.return=v,S):(S=i(S,E),S.return=v,S)}function l(v,S,E,C){var T=E.type;return T===lf?u(v,S,E.props.children,C,E.key):S!==null&&(S.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===$l&&LP(T)===S.type)?(C=i(S,E.props),C.ref=ap(v,S,E),C.return=v,C):(C=jy(E.type,E.key,E.props,null,v.mode,C),C.ref=ap(v,S,E),C.return=v,C)}function c(v,S,E,C){return S===null||S.tag!==4||S.stateNode.containerInfo!==E.containerInfo||S.stateNode.implementation!==E.implementation?(S=RS(E,v.mode,C),S.return=v,S):(S=i(S,E.children||[]),S.return=v,S)}function u(v,S,E,C,T){return S===null||S.tag!==7?(S=zu(E,v.mode,C,T),S.return=v,S):(S=i(S,E),S.return=v,S)}function d(v,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return S=AS(""+S,v.mode,E),S.return=v,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Sv:return E=jy(S.type,S.key,S.props,null,v.mode,E),E.ref=ap(v,null,S),E.return=v,E;case af:return S=RS(S,v.mode,E),S.return=v,S;case $l:var C=S._init;return d(v,C(S._payload),E)}if(Cp(S)||np(S))return S=zu(S,v.mode,E,null),S.return=v,S;Dv(v,S)}return null}function h(v,S,E,C){var T=S!==null?S.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return T!==null?null:a(v,S,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Sv:return E.key===T?l(v,S,E,C):null;case af:return E.key===T?c(v,S,E,C):null;case $l:return T=E._init,h(v,S,T(E._payload),C)}if(Cp(E)||np(E))return T!==null?null:u(v,S,E,C,null);Dv(v,E)}return null}function p(v,S,E,C,T){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(E)||null,a(S,v,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Sv:return v=v.get(C.key===null?E:C.key)||null,l(S,v,C,T);case af:return v=v.get(C.key===null?E:C.key)||null,c(S,v,C,T);case $l:var A=C._init;return p(v,S,E,A(C._payload),T)}if(Cp(C)||np(C))return v=v.get(E)||null,u(S,v,C,T,null);Dv(S,C)}return null}function x(v,S,E,C){for(var T=null,A=null,k=S,R=S=0,P=null;k!==null&&R<E.length;R++){k.index>R?(P=k,k=null):P=k.sibling;var M=h(v,k,E[R],C);if(M===null){k===null&&(k=P);break}t&&k&&M.alternate===null&&e(v,k),S=s(M,S,R),A===null?T=M:A.sibling=M,A=M,k=P}if(R===E.length)return n(v,k),Wn&&gu(v,R),T;if(k===null){for(;R<E.length;R++)k=d(v,E[R],C),k!==null&&(S=s(k,S,R),A===null?T=k:A.sibling=k,A=k);return Wn&&gu(v,R),T}for(k=r(v,k);R<E.length;R++)P=p(k,v,R,E[R],C),P!==null&&(t&&P.alternate!==null&&k.delete(P.key===null?R:P.key),S=s(P,S,R),A===null?T=P:A.sibling=P,A=P);return t&&k.forEach(function(I){return e(v,I)}),Wn&&gu(v,R),T}function w(v,S,E,C){var T=np(E);if(typeof T!="function")throw Error(Ke(150));if(E=T.call(E),E==null)throw Error(Ke(151));for(var A=T=null,k=S,R=S=0,P=null,M=E.next();k!==null&&!M.done;R++,M=E.next()){k.index>R?(P=k,k=null):P=k.sibling;var I=h(v,k,M.value,C);if(I===null){k===null&&(k=P);break}t&&k&&I.alternate===null&&e(v,k),S=s(I,S,R),A===null?T=I:A.sibling=I,A=I,k=P}if(M.done)return n(v,k),Wn&&gu(v,R),T;if(k===null){for(;!M.done;R++,M=E.next())M=d(v,M.value,C),M!==null&&(S=s(M,S,R),A===null?T=M:A.sibling=M,A=M);return Wn&&gu(v,R),T}for(k=r(v,k);!M.done;R++,M=E.next())M=p(k,v,R,M.value,C),M!==null&&(t&&M.alternate!==null&&k.delete(M.key===null?R:M.key),S=s(M,S,R),A===null?T=M:A.sibling=M,A=M);return t&&k.forEach(function(z){return e(v,z)}),Wn&&gu(v,R),T}function y(v,S,E,C){if(typeof E=="object"&&E!==null&&E.type===lf&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Sv:e:{for(var T=E.key,A=S;A!==null;){if(A.key===T){if(T=E.type,T===lf){if(A.tag===7){n(v,A.sibling),S=i(A,E.props.children),S.return=v,v=S;break e}}else if(A.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===$l&&LP(T)===A.type){n(v,A.sibling),S=i(A,E.props),S.ref=ap(v,A,E),S.return=v,v=S;break e}n(v,A);break}else e(v,A);A=A.sibling}E.type===lf?(S=zu(E.props.children,v.mode,C,E.key),S.return=v,v=S):(C=jy(E.type,E.key,E.props,null,v.mode,C),C.ref=ap(v,S,E),C.return=v,v=C)}return o(v);case af:e:{for(A=E.key;S!==null;){if(S.key===A)if(S.tag===4&&S.stateNode.containerInfo===E.containerInfo&&S.stateNode.implementation===E.implementation){n(v,S.sibling),S=i(S,E.children||[]),S.return=v,v=S;break e}else{n(v,S);break}else e(v,S);S=S.sibling}S=RS(E,v.mode,C),S.return=v,v=S}return o(v);case $l:return A=E._init,y(v,S,A(E._payload),C)}if(Cp(E))return x(v,S,E,C);if(np(E))return w(v,S,E,C);Dv(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,S!==null&&S.tag===6?(n(v,S.sibling),S=i(S,E),S.return=v,v=S):(n(v,S),S=AS(E,v.mode,C),S.return=v,v=S),o(v)):n(v,S)}return y}var Jf=w3(!0),b3=w3(!1),Ex=Fc(null),Cx=null,gf=null,KM=null;function YM(){KM=gf=Cx=null}function JM(t){var e=Ex.current;Hn(Ex),t._currentValue=e}function J_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Tf(t,e){Cx=t,KM=gf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($i=!0),t.firstContext=null)}function Qs(t){var e=t._currentValue;if(KM!==t)if(t={context:t,memoizedValue:e,next:null},gf===null){if(Cx===null)throw Error(Ke(308));gf=t,Cx.dependencies={lanes:0,firstContext:t}}else gf=gf.next=t;return e}var Mu=null;function QM(t){Mu===null?Mu=[t]:Mu.push(t)}function S3(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,QM(e)):(n.next=i.next,i.next=n),e.interleaved=n,al(t,r)}function al(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wl=!1;function ZM(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function tl(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function mc(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,al(t,n)}return i=r.interleaved,i===null?(e.next=e,QM(r)):(e.next=i.next,i.next=e),r.interleaved=e,al(t,n)}function Ly(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,UM(t,n)}}function OP(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Mx(t,e,n,r){var i=t.updateQueue;Wl=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,p=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,w=a;switch(h=e,p=n,w.tag){case 1:if(x=w.payload,typeof x=="function"){d=x.call(p,d,h);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,h=typeof x=="function"?x.call(p,d,h):x,h==null)break e;d=Jn({},d,h);break e;case 2:Wl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ju|=o,t.lanes=o,t.memoizedState=d}}function FP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ke(191,i));i.call(r)}}}var eg={},ua=Fc(eg),fm=Fc(eg),hm=Fc(eg);function Tu(t){if(t===eg)throw Error(Ke(174));return t}function eT(t,e){switch(Fn(hm,e),Fn(fm,t),Fn(ua,eg),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:N_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=N_(e,t)}Hn(ua),Fn(ua,e)}function Qf(){Hn(ua),Hn(fm),Hn(hm)}function E3(t){Tu(hm.current);var e=Tu(ua.current),n=N_(e,t.type);e!==n&&(Fn(fm,t),Fn(ua,n))}function tT(t){fm.current===t&&(Hn(ua),Hn(fm))}var qn=Fc(0);function Tx(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var SS=[];function nT(){for(var t=0;t<SS.length;t++)SS[t]._workInProgressVersionPrimary=null;SS.length=0}var Oy=hl.ReactCurrentDispatcher,_S=hl.ReactCurrentBatchConfig,Yu=0,Kn=null,vr=null,Mr=null,Ax=!1,zp=!1,pm=0,rJ=0;function ni(){throw Error(Ke(321))}function rT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!No(t[n],e[n]))return!1;return!0}function iT(t,e,n,r,i,s){if(Yu=s,Kn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Oy.current=t===null||t.memoizedState===null?aJ:lJ,t=n(r,i),zp){s=0;do{if(zp=!1,pm=0,25<=s)throw Error(Ke(301));s+=1,Mr=vr=null,e.updateQueue=null,Oy.current=cJ,t=n(r,i)}while(zp)}if(Oy.current=Rx,e=vr!==null&&vr.next!==null,Yu=0,Mr=vr=Kn=null,Ax=!1,e)throw Error(Ke(300));return t}function sT(){var t=pm!==0;return pm=0,t}function Xo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mr===null?Kn.memoizedState=Mr=t:Mr=Mr.next=t,Mr}function Zs(){if(vr===null){var t=Kn.alternate;t=t!==null?t.memoizedState:null}else t=vr.next;var e=Mr===null?Kn.memoizedState:Mr.next;if(e!==null)Mr=e,vr=t;else{if(t===null)throw Error(Ke(310));vr=t,t={memoizedState:vr.memoizedState,baseState:vr.baseState,baseQueue:vr.baseQueue,queue:vr.queue,next:null},Mr===null?Kn.memoizedState=Mr=t:Mr=Mr.next=t}return Mr}function mm(t,e){return typeof e=="function"?e(t):e}function ES(t){var e=Zs(),n=e.queue;if(n===null)throw Error(Ke(311));n.lastRenderedReducer=t;var r=vr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Yu&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Kn.lanes|=u,Ju|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,No(r,e.memoizedState)||($i=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Kn.lanes|=s,Ju|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function CS(t){var e=Zs(),n=e.queue;if(n===null)throw Error(Ke(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);No(s,e.memoizedState)||($i=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function C3(){}function M3(t,e){var n=Kn,r=Zs(),i=e(),s=!No(r.memoizedState,i);if(s&&(r.memoizedState=i,$i=!0),r=r.queue,oT(R3.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Mr!==null&&Mr.memoizedState.tag&1){if(n.flags|=2048,gm(9,A3.bind(null,n,r,i,e),void 0,null),Rr===null)throw Error(Ke(349));Yu&30||T3(n,e,i)}return i}function T3(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Kn.updateQueue,e===null?(e={lastEffect:null,stores:null},Kn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function A3(t,e,n,r){e.value=n,e.getSnapshot=r,k3(e)&&N3(t)}function R3(t,e,n){return n(function(){k3(e)&&N3(t)})}function k3(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!No(t,n)}catch{return!0}}function N3(t){var e=al(t,1);e!==null&&Ao(e,t,1,-1)}function UP(t){var e=Xo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mm,lastRenderedState:t},e.queue=t,t=t.dispatch=oJ.bind(null,Kn,t),[e.memoizedState,t]}function gm(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Kn.updateQueue,e===null?(e={lastEffect:null,stores:null},Kn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function P3(){return Zs().memoizedState}function Fy(t,e,n,r){var i=Xo();Kn.flags|=t,i.memoizedState=gm(1|e,n,void 0,r===void 0?null:r)}function k0(t,e,n,r){var i=Zs();r=r===void 0?null:r;var s=void 0;if(vr!==null){var o=vr.memoizedState;if(s=o.destroy,r!==null&&rT(r,o.deps)){i.memoizedState=gm(e,n,s,r);return}}Kn.flags|=t,i.memoizedState=gm(1|e,n,s,r)}function BP(t,e){return Fy(8390656,8,t,e)}function oT(t,e){return k0(2048,8,t,e)}function D3(t,e){return k0(4,2,t,e)}function I3(t,e){return k0(4,4,t,e)}function L3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function O3(t,e,n){return n=n!=null?n.concat([t]):null,k0(4,4,L3.bind(null,e,t),n)}function aT(){}function F3(t,e){var n=Zs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rT(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function U3(t,e){var n=Zs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rT(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function B3(t,e,n){return Yu&21?(No(n,e)||(n=$F(),Kn.lanes|=n,Ju|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$i=!0),t.memoizedState=n)}function iJ(t,e){var n=_n;_n=n!==0&&4>n?n:4,t(!0);var r=_S.transition;_S.transition={};try{t(!1),e()}finally{_n=n,_S.transition=r}}function z3(){return Zs().memoizedState}function sJ(t,e,n){var r=vc(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},j3(t))H3(e,n);else if(n=S3(t,e,n,r),n!==null){var i=Mi();Ao(n,t,r,i),V3(n,e,r)}}function oJ(t,e,n){var r=vc(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(j3(t))H3(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,No(a,o)){var l=e.interleaved;l===null?(i.next=i,QM(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=S3(t,e,i,r),n!==null&&(i=Mi(),Ao(n,t,r,i),V3(n,e,r))}}function j3(t){var e=t.alternate;return t===Kn||e!==null&&e===Kn}function H3(t,e){zp=Ax=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function V3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,UM(t,n)}}var Rx={readContext:Qs,useCallback:ni,useContext:ni,useEffect:ni,useImperativeHandle:ni,useInsertionEffect:ni,useLayoutEffect:ni,useMemo:ni,useReducer:ni,useRef:ni,useState:ni,useDebugValue:ni,useDeferredValue:ni,useTransition:ni,useMutableSource:ni,useSyncExternalStore:ni,useId:ni,unstable_isNewReconciler:!1},aJ={readContext:Qs,useCallback:function(t,e){return Xo().memoizedState=[t,e===void 0?null:e],t},useContext:Qs,useEffect:BP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fy(4194308,4,L3.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fy(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fy(4,2,t,e)},useMemo:function(t,e){var n=Xo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sJ.bind(null,Kn,t),[r.memoizedState,t]},useRef:function(t){var e=Xo();return t={current:t},e.memoizedState=t},useState:UP,useDebugValue:aT,useDeferredValue:function(t){return Xo().memoizedState=t},useTransition:function(){var t=UP(!1),e=t[0];return t=iJ.bind(null,t[1]),Xo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Kn,i=Xo();if(Wn){if(n===void 0)throw Error(Ke(407));n=n()}else{if(n=e(),Rr===null)throw Error(Ke(349));Yu&30||T3(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,BP(R3.bind(null,r,s,t),[t]),r.flags|=2048,gm(9,A3.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Xo(),e=Rr.identifierPrefix;if(Wn){var n=Ya,r=Ka;n=(r&~(1<<32-To(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=pm++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rJ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lJ={readContext:Qs,useCallback:F3,useContext:Qs,useEffect:oT,useImperativeHandle:O3,useInsertionEffect:D3,useLayoutEffect:I3,useMemo:U3,useReducer:ES,useRef:P3,useState:function(){return ES(mm)},useDebugValue:aT,useDeferredValue:function(t){var e=Zs();return B3(e,vr.memoizedState,t)},useTransition:function(){var t=ES(mm)[0],e=Zs().memoizedState;return[t,e]},useMutableSource:C3,useSyncExternalStore:M3,useId:z3,unstable_isNewReconciler:!1},cJ={readContext:Qs,useCallback:F3,useContext:Qs,useEffect:oT,useImperativeHandle:O3,useInsertionEffect:D3,useLayoutEffect:I3,useMemo:U3,useReducer:CS,useRef:P3,useState:function(){return CS(mm)},useDebugValue:aT,useDeferredValue:function(t){var e=Zs();return vr===null?e.memoizedState=t:B3(e,vr.memoizedState,t)},useTransition:function(){var t=CS(mm)[0],e=Zs().memoizedState;return[t,e]},useMutableSource:C3,useSyncExternalStore:M3,useId:z3,unstable_isNewReconciler:!1};function go(t,e){if(t&&t.defaultProps){e=Jn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Q_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Jn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var N0={isMounted:function(t){return(t=t._reactInternals)?hd(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mi(),i=vc(t),s=tl(r,i);s.payload=e,n!=null&&(s.callback=n),e=mc(t,s,i),e!==null&&(Ao(e,t,i,r),Ly(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mi(),i=vc(t),s=tl(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=mc(t,s,i),e!==null&&(Ao(e,t,i,r),Ly(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mi(),r=vc(t),i=tl(n,r);i.tag=2,e!=null&&(i.callback=e),e=mc(t,i,r),e!==null&&(Ao(e,t,r,n),Ly(e,t,r))}};function zP(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!lm(n,r)||!lm(i,s):!0}function $3(t,e,n){var r=!1,i=Ac,s=e.contextType;return typeof s=="object"&&s!==null?s=Qs(s):(i=Gi(e)?qu:hi.current,r=e.contextTypes,s=(r=r!=null)?Kf(t,i):Ac),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=N0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function jP(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&N0.enqueueReplaceState(e,e.state,null)}function Z_(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ZM(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Qs(s):(s=Gi(e)?qu:hi.current,i.context=Kf(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Q_(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&N0.enqueueReplaceState(i,i.state,null),Mx(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zf(t,e){try{var n="",r=e;do n+=FK(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function MS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function eE(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uJ=typeof WeakMap=="function"?WeakMap:Map;function W3(t,e,n){n=tl(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Nx||(Nx=!0,uE=r),eE(t,e)},n}function G3(t,e,n){n=tl(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){eE(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){eE(t,e),typeof r!="function"&&(gc===null?gc=new Set([this]):gc.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function HP(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new uJ;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=EJ.bind(null,t,e,n),e.then(t,t))}function VP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $P(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=tl(-1,1),e.tag=2,mc(n,e,1))),n.lanes|=1),t)}var dJ=hl.ReactCurrentOwner,$i=!1;function Si(t,e,n,r){e.child=t===null?b3(e,null,n,r):Jf(e,t.child,n,r)}function WP(t,e,n,r,i){n=n.render;var s=e.ref;return Tf(e,i),r=iT(t,e,n,r,s,i),n=sT(),t!==null&&!$i?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ll(t,e,i)):(Wn&&n&&GM(e),e.flags|=1,Si(t,e,r,i),e.child)}function GP(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!mT(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,X3(t,e,s,r,i)):(t=jy(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:lm,n(o,r)&&t.ref===e.ref)return ll(t,e,i)}return e.flags|=1,t=yc(s,r),t.ref=e.ref,t.return=e,e.child=t}function X3(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(lm(s,r)&&t.ref===e.ref)if($i=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&($i=!0);else return e.lanes=t.lanes,ll(t,e,i)}return tE(t,e,n,r,i)}function q3(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fn(yf,ms),ms|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fn(yf,ms),ms|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Fn(yf,ms),ms|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Fn(yf,ms),ms|=r;return Si(t,e,i,n),e.child}function K3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tE(t,e,n,r,i){var s=Gi(n)?qu:hi.current;return s=Kf(e,s),Tf(e,i),n=iT(t,e,n,r,s,i),r=sT(),t!==null&&!$i?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ll(t,e,i)):(Wn&&r&&GM(e),e.flags|=1,Si(t,e,n,i),e.child)}function XP(t,e,n,r,i){if(Gi(n)){var s=!0;bx(e)}else s=!1;if(Tf(e,i),e.stateNode===null)Uy(t,e),$3(e,n,r),Z_(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Qs(c):(c=Gi(n)?qu:hi.current,c=Kf(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&jP(e,o,r,c),Wl=!1;var h=e.memoizedState;o.state=h,Mx(e,r,o,i),l=e.memoizedState,a!==r||h!==l||Wi.current||Wl?(typeof u=="function"&&(Q_(e,n,u,r),l=e.memoizedState),(a=Wl||zP(e,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_3(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:go(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Qs(l):(l=Gi(n)?qu:hi.current,l=Kf(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&jP(e,o,r,l),Wl=!1,h=e.memoizedState,o.state=h,Mx(e,r,o,i);var x=e.memoizedState;a!==d||h!==x||Wi.current||Wl?(typeof p=="function"&&(Q_(e,n,p,r),x=e.memoizedState),(c=Wl||zP(e,n,c,r,h,x,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return nE(t,e,n,r,s,i)}function nE(t,e,n,r,i,s){K3(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&PP(e,n,!1),ll(t,e,s);r=e.stateNode,dJ.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Jf(e,t.child,null,s),e.child=Jf(e,null,a,s)):Si(t,e,a,s),e.memoizedState=r.state,i&&PP(e,n,!0),e.child}function Y3(t){var e=t.stateNode;e.pendingContext?NP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&NP(t,e.context,!1),eT(t,e.containerInfo)}function qP(t,e,n,r,i){return Yf(),qM(i),e.flags|=256,Si(t,e,n,r),e.child}var rE={dehydrated:null,treeContext:null,retryLane:0};function iE(t){return{baseLanes:t,cachePool:null,transitions:null}}function J3(t,e,n){var r=e.pendingProps,i=qn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Fn(qn,i&1),t===null)return Y_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=I0(o,r,0,null),t=zu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=iE(n),e.memoizedState=rE,t):lT(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return fJ(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=yc(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=yc(a,s):(s=zu(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?iE(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=rE,r}return s=t.child,t=s.sibling,r=yc(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lT(t,e){return e=I0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Iv(t,e,n,r){return r!==null&&qM(r),Jf(e,t.child,null,n),t=lT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fJ(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=MS(Error(Ke(422))),Iv(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=I0({mode:"visible",children:r.children},i,0,null),s=zu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Jf(e,t.child,null,o),e.child.memoizedState=iE(o),e.memoizedState=rE,s);if(!(e.mode&1))return Iv(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ke(419)),r=MS(s,r,void 0),Iv(t,e,o,r)}if(a=(o&t.childLanes)!==0,$i||a){if(r=Rr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,al(t,i),Ao(r,t,i,-1))}return pT(),r=MS(Error(Ke(421))),Iv(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=CJ.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ys=pc(i.nextSibling),ws=e,Wn=!0,So=null,t!==null&&(Hs[Vs++]=Ka,Hs[Vs++]=Ya,Hs[Vs++]=Ku,Ka=t.id,Ya=t.overflow,Ku=e),e=lT(e,r.children),e.flags|=4096,e)}function KP(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),J_(t.return,e,n)}function TS(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Q3(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Si(t,e,r.children,n),r=qn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&KP(t,n,e);else if(t.tag===19)KP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Fn(qn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Tx(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),TS(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Tx(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}TS(e,!0,n,null,s);break;case"together":TS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uy(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ll(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ju|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ke(153));if(e.child!==null){for(t=e.child,n=yc(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=yc(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hJ(t,e,n){switch(e.tag){case 3:Y3(e),Yf();break;case 5:E3(e);break;case 1:Gi(e.type)&&bx(e);break;case 4:eT(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Fn(Ex,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Fn(qn,qn.current&1),e.flags|=128,null):n&e.child.childLanes?J3(t,e,n):(Fn(qn,qn.current&1),t=ll(t,e,n),t!==null?t.sibling:null);Fn(qn,qn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Q3(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fn(qn,qn.current),r)break;return null;case 22:case 23:return e.lanes=0,q3(t,e,n)}return ll(t,e,n)}var Z3,sE,eU,tU;Z3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sE=function(){};eU=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Tu(ua.current);var s=null;switch(n){case"input":i=T_(t,i),r=T_(t,r),s=[];break;case"select":i=Jn({},i,{value:void 0}),r=Jn({},r,{value:void 0}),s=[];break;case"textarea":i=k_(t,i),r=k_(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xx)}P_(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(tm.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(tm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&jn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};tU=function(t,e,n,r){n!==r&&(e.flags|=4)};function lp(t,e){if(!Wn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ri(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function pJ(t,e,n){var r=e.pendingProps;switch(XM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(e),null;case 1:return Gi(e.type)&&wx(),ri(e),null;case 3:return r=e.stateNode,Qf(),Hn(Wi),Hn(hi),nT(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pv(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,So!==null&&(hE(So),So=null))),sE(t,e),ri(e),null;case 5:tT(e);var i=Tu(hm.current);if(n=e.type,t!==null&&e.stateNode!=null)eU(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ke(166));return ri(e),null}if(t=Tu(ua.current),Pv(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ra]=e,r[dm]=s,t=(e.mode&1)!==0,n){case"dialog":jn("cancel",r),jn("close",r);break;case"iframe":case"object":case"embed":jn("load",r);break;case"video":case"audio":for(i=0;i<Tp.length;i++)jn(Tp[i],r);break;case"source":jn("error",r);break;case"img":case"image":case"link":jn("error",r),jn("load",r);break;case"details":jn("toggle",r);break;case"input":iP(r,s),jn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},jn("invalid",r);break;case"textarea":oP(r,s),jn("invalid",r)}P_(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Nv(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Nv(r.textContent,a,t),i=["children",""+a]):tm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&jn("scroll",r)}switch(n){case"input":_v(r),sP(r,s,!0);break;case"textarea":_v(r),aP(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=xx)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=RF(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ra]=e,t[dm]=r,Z3(t,e,!1,!1),e.stateNode=t;e:{switch(o=D_(n,r),n){case"dialog":jn("cancel",t),jn("close",t),i=r;break;case"iframe":case"object":case"embed":jn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Tp.length;i++)jn(Tp[i],t);i=r;break;case"source":jn("error",t),i=r;break;case"img":case"image":case"link":jn("error",t),jn("load",t),i=r;break;case"details":jn("toggle",t),i=r;break;case"input":iP(t,r),i=T_(t,r),jn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Jn({},r,{value:void 0}),jn("invalid",t);break;case"textarea":oP(t,r),i=k_(t,r),jn("invalid",t);break;default:i=r}P_(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?PF(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&kF(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&nm(t,l):typeof l=="number"&&nm(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(tm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&jn("scroll",t):l!=null&&PM(t,s,l,o))}switch(n){case"input":_v(t),sP(t,r,!1);break;case"textarea":_v(t),aP(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Tc(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?_f(t,!!r.multiple,s,!1):r.defaultValue!=null&&_f(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=xx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ri(e),null;case 6:if(t&&e.stateNode!=null)tU(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ke(166));if(n=Tu(hm.current),Tu(ua.current),Pv(e)){if(r=e.stateNode,n=e.memoizedProps,r[ra]=e,(s=r.nodeValue!==n)&&(t=ws,t!==null))switch(t.tag){case 3:Nv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nv(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ra]=e,e.stateNode=r}return ri(e),null;case 13:if(Hn(qn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Wn&&ys!==null&&e.mode&1&&!(e.flags&128))x3(),Yf(),e.flags|=98560,s=!1;else if(s=Pv(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ke(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ke(317));s[ra]=e}else Yf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ri(e),s=!1}else So!==null&&(hE(So),So=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qn.current&1?xr===0&&(xr=3):pT())),e.updateQueue!==null&&(e.flags|=4),ri(e),null);case 4:return Qf(),sE(t,e),t===null&&cm(e.stateNode.containerInfo),ri(e),null;case 10:return JM(e.type._context),ri(e),null;case 17:return Gi(e.type)&&wx(),ri(e),null;case 19:if(Hn(qn),s=e.memoizedState,s===null)return ri(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)lp(s,!1);else{if(xr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Tx(t),o!==null){for(e.flags|=128,lp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fn(qn,qn.current&1|2),e.child}t=t.sibling}s.tail!==null&&or()>eh&&(e.flags|=128,r=!0,lp(s,!1),e.lanes=4194304)}else{if(!r)if(t=Tx(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),lp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Wn)return ri(e),null}else 2*or()-s.renderingStartTime>eh&&n!==1073741824&&(e.flags|=128,r=!0,lp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=or(),e.sibling=null,n=qn.current,Fn(qn,r?n&1|2:n&1),e):(ri(e),null);case 22:case 23:return hT(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ms&1073741824&&(ri(e),e.subtreeFlags&6&&(e.flags|=8192)):ri(e),null;case 24:return null;case 25:return null}throw Error(Ke(156,e.tag))}function mJ(t,e){switch(XM(e),e.tag){case 1:return Gi(e.type)&&wx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qf(),Hn(Wi),Hn(hi),nT(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tT(e),null;case 13:if(Hn(qn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ke(340));Yf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Hn(qn),null;case 4:return Qf(),null;case 10:return JM(e.type._context),null;case 22:case 23:return hT(),null;case 24:return null;default:return null}}var Lv=!1,li=!1,gJ=typeof WeakSet=="function"?WeakSet:Set,yt=null;function vf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){er(t,e,r)}else n.current=null}function oE(t,e,n){try{n()}catch(r){er(t,e,r)}}var YP=!1;function vJ(t,e){if(V_=gx,t=o3(),WM(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++u===r&&(l=o),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for($_={focusedElem:t,selectionRange:n},gx=!1,yt=e;yt!==null;)if(e=yt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,yt=t;else for(;yt!==null;){e=yt;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,y=x.memoizedState,v=e.stateNode,S=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:go(e.type,w),y);v.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ke(163))}}catch(C){er(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,yt=t;break}yt=e.return}return x=YP,YP=!1,x}function jp(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&oE(e,n,s)}i=i.next}while(i!==r)}}function P0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function aE(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nU(t){var e=t.alternate;e!==null&&(t.alternate=null,nU(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ra],delete e[dm],delete e[X_],delete e[ZY],delete e[eJ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rU(t){return t.tag===5||t.tag===3||t.tag===4}function JP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rU(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xx));else if(r!==4&&(t=t.child,t!==null))for(lE(t,e,n),t=t.sibling;t!==null;)lE(t,e,n),t=t.sibling}function cE(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(cE(t,e,n),t=t.sibling;t!==null;)cE(t,e,n),t=t.sibling}var zr=null,wo=!1;function kl(t,e,n){for(n=n.child;n!==null;)iU(t,e,n),n=n.sibling}function iU(t,e,n){if(ca&&typeof ca.onCommitFiberUnmount=="function")try{ca.onCommitFiberUnmount(E0,n)}catch{}switch(n.tag){case 5:li||vf(n,e);case 6:var r=zr,i=wo;zr=null,kl(t,e,n),zr=r,wo=i,zr!==null&&(wo?(t=zr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zr.removeChild(n.stateNode));break;case 18:zr!==null&&(wo?(t=zr,n=n.stateNode,t.nodeType===8?wS(t.parentNode,n):t.nodeType===1&&wS(t,n),om(t)):wS(zr,n.stateNode));break;case 4:r=zr,i=wo,zr=n.stateNode.containerInfo,wo=!0,kl(t,e,n),zr=r,wo=i;break;case 0:case 11:case 14:case 15:if(!li&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&oE(n,e,o),i=i.next}while(i!==r)}kl(t,e,n);break;case 1:if(!li&&(vf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){er(n,e,a)}kl(t,e,n);break;case 21:kl(t,e,n);break;case 22:n.mode&1?(li=(r=li)||n.memoizedState!==null,kl(t,e,n),li=r):kl(t,e,n);break;default:kl(t,e,n)}}function QP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gJ),e.forEach(function(r){var i=MJ.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function co(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:zr=a.stateNode,wo=!1;break e;case 3:zr=a.stateNode.containerInfo,wo=!0;break e;case 4:zr=a.stateNode.containerInfo,wo=!0;break e}a=a.return}if(zr===null)throw Error(Ke(160));iU(s,o,i),zr=null,wo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){er(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sU(e,t),e=e.sibling}function sU(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(co(e,t),$o(t),r&4){try{jp(3,t,t.return),P0(3,t)}catch(w){er(t,t.return,w)}try{jp(5,t,t.return)}catch(w){er(t,t.return,w)}}break;case 1:co(e,t),$o(t),r&512&&n!==null&&vf(n,n.return);break;case 5:if(co(e,t),$o(t),r&512&&n!==null&&vf(n,n.return),t.flags&32){var i=t.stateNode;try{nm(i,"")}catch(w){er(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&TF(i,s),D_(a,o);var c=D_(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?PF(i,d):u==="dangerouslySetInnerHTML"?kF(i,d):u==="children"?nm(i,d):PM(i,u,d,c)}switch(a){case"input":A_(i,s);break;case"textarea":AF(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?_f(i,!!s.multiple,p,!1):h!==!!s.multiple&&(s.defaultValue!=null?_f(i,!!s.multiple,s.defaultValue,!0):_f(i,!!s.multiple,s.multiple?[]:"",!1))}i[dm]=s}catch(w){er(t,t.return,w)}}break;case 6:if(co(e,t),$o(t),r&4){if(t.stateNode===null)throw Error(Ke(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){er(t,t.return,w)}}break;case 3:if(co(e,t),$o(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{om(e.containerInfo)}catch(w){er(t,t.return,w)}break;case 4:co(e,t),$o(t);break;case 13:co(e,t),$o(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(dT=or())),r&4&&QP(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(li=(c=li)||u,co(e,t),li=c):co(e,t),$o(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(yt=t,u=t.child;u!==null;){for(d=yt=u;yt!==null;){switch(h=yt,p=h.child,h.tag){case 0:case 11:case 14:case 15:jp(4,h,h.return);break;case 1:vf(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(w){er(r,n,w)}}break;case 5:vf(h,h.return);break;case 22:if(h.memoizedState!==null){e2(d);continue}}p!==null?(p.return=h,yt=p):e2(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=NF("display",o))}catch(w){er(t,t.return,w)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){er(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:co(e,t),$o(t),r&4&&QP(t);break;case 21:break;default:co(e,t),$o(t)}}function $o(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rU(n)){var r=n;break e}n=n.return}throw Error(Ke(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(nm(i,""),r.flags&=-33);var s=JP(t);cE(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=JP(t);lE(t,a,o);break;default:throw Error(Ke(161))}}catch(l){er(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yJ(t,e,n){yt=t,oU(t)}function oU(t,e,n){for(var r=(t.mode&1)!==0;yt!==null;){var i=yt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Lv;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||li;a=Lv;var c=li;if(Lv=o,(li=l)&&!c)for(yt=i;yt!==null;)o=yt,l=o.child,o.tag===22&&o.memoizedState!==null?t2(i):l!==null?(l.return=o,yt=l):t2(i);for(;s!==null;)yt=s,oU(s),s=s.sibling;yt=i,Lv=a,li=c}ZP(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,yt=s):ZP(t)}}function ZP(t){for(;yt!==null;){var e=yt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:li||P0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!li)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:go(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&FP(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}FP(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&om(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ke(163))}li||e.flags&512&&aE(e)}catch(h){er(e,e.return,h)}}if(e===t){yt=null;break}if(n=e.sibling,n!==null){n.return=e.return,yt=n;break}yt=e.return}}function e2(t){for(;yt!==null;){var e=yt;if(e===t){yt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,yt=n;break}yt=e.return}}function t2(t){for(;yt!==null;){var e=yt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{P0(4,e)}catch(l){er(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){er(e,i,l)}}var s=e.return;try{aE(e)}catch(l){er(e,s,l)}break;case 5:var o=e.return;try{aE(e)}catch(l){er(e,o,l)}}}catch(l){er(e,e.return,l)}if(e===t){yt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,yt=a;break}yt=e.return}}var xJ=Math.ceil,kx=hl.ReactCurrentDispatcher,cT=hl.ReactCurrentOwner,Ks=hl.ReactCurrentBatchConfig,fn=0,Rr=null,fr=null,Gr=0,ms=0,yf=Fc(0),xr=0,vm=null,Ju=0,D0=0,uT=0,Hp=null,Vi=null,dT=0,eh=1/0,Va=null,Nx=!1,uE=null,gc=null,Ov=!1,sc=null,Px=0,Vp=0,dE=null,By=-1,zy=0;function Mi(){return fn&6?or():By!==-1?By:By=or()}function vc(t){return t.mode&1?fn&2&&Gr!==0?Gr&-Gr:nJ.transition!==null?(zy===0&&(zy=$F()),zy):(t=_n,t!==0||(t=window.event,t=t===void 0?16:JF(t.type)),t):1}function Ao(t,e,n,r){if(50<Vp)throw Vp=0,dE=null,Error(Ke(185));Jm(t,n,r),(!(fn&2)||t!==Rr)&&(t===Rr&&(!(fn&2)&&(D0|=n),xr===4&&Yl(t,Gr)),Xi(t,r),n===1&&fn===0&&!(e.mode&1)&&(eh=or()+500,R0&&Uc()))}function Xi(t,e){var n=t.callbackNode;nY(t,e);var r=mx(t,t===Rr?Gr:0);if(r===0)n!==null&&uP(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&uP(n),e===1)t.tag===0?tJ(n2.bind(null,t)):g3(n2.bind(null,t)),JY(function(){!(fn&6)&&Uc()}),n=null;else{switch(WF(r)){case 1:n=FM;break;case 4:n=HF;break;case 16:n=px;break;case 536870912:n=VF;break;default:n=px}n=pU(n,aU.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aU(t,e){if(By=-1,zy=0,fn&6)throw Error(Ke(327));var n=t.callbackNode;if(Af()&&t.callbackNode!==n)return null;var r=mx(t,t===Rr?Gr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Dx(t,r);else{e=r;var i=fn;fn|=2;var s=cU();(Rr!==t||Gr!==e)&&(Va=null,eh=or()+500,Bu(t,e));do try{SJ();break}catch(a){lU(t,a)}while(!0);YM(),kx.current=s,fn=i,fr!==null?e=0:(Rr=null,Gr=0,e=xr)}if(e!==0){if(e===2&&(i=U_(t),i!==0&&(r=i,e=fE(t,i))),e===1)throw n=vm,Bu(t,0),Yl(t,r),Xi(t,or()),n;if(e===6)Yl(t,r);else{if(i=t.current.alternate,!(r&30)&&!wJ(i)&&(e=Dx(t,r),e===2&&(s=U_(t),s!==0&&(r=s,e=fE(t,s))),e===1))throw n=vm,Bu(t,0),Yl(t,r),Xi(t,or()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ke(345));case 2:vu(t,Vi,Va);break;case 3:if(Yl(t,r),(r&130023424)===r&&(e=dT+500-or(),10<e)){if(mx(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Mi(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=G_(vu.bind(null,t,Vi,Va),e);break}vu(t,Vi,Va);break;case 4:if(Yl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-To(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=or()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xJ(r/1960))-r,10<r){t.timeoutHandle=G_(vu.bind(null,t,Vi,Va),r);break}vu(t,Vi,Va);break;case 5:vu(t,Vi,Va);break;default:throw Error(Ke(329))}}}return Xi(t,or()),t.callbackNode===n?aU.bind(null,t):null}function fE(t,e){var n=Hp;return t.current.memoizedState.isDehydrated&&(Bu(t,e).flags|=256),t=Dx(t,e),t!==2&&(e=Vi,Vi=n,e!==null&&hE(e)),t}function hE(t){Vi===null?Vi=t:Vi.push.apply(Vi,t)}function wJ(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!No(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yl(t,e){for(e&=~uT,e&=~D0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-To(e),r=1<<n;t[n]=-1,e&=~r}}function n2(t){if(fn&6)throw Error(Ke(327));Af();var e=mx(t,0);if(!(e&1))return Xi(t,or()),null;var n=Dx(t,e);if(t.tag!==0&&n===2){var r=U_(t);r!==0&&(e=r,n=fE(t,r))}if(n===1)throw n=vm,Bu(t,0),Yl(t,e),Xi(t,or()),n;if(n===6)throw Error(Ke(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vu(t,Vi,Va),Xi(t,or()),null}function fT(t,e){var n=fn;fn|=1;try{return t(e)}finally{fn=n,fn===0&&(eh=or()+500,R0&&Uc())}}function Qu(t){sc!==null&&sc.tag===0&&!(fn&6)&&Af();var e=fn;fn|=1;var n=Ks.transition,r=_n;try{if(Ks.transition=null,_n=1,t)return t()}finally{_n=r,Ks.transition=n,fn=e,!(fn&6)&&Uc()}}function hT(){ms=yf.current,Hn(yf)}function Bu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,YY(n)),fr!==null)for(n=fr.return;n!==null;){var r=n;switch(XM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wx();break;case 3:Qf(),Hn(Wi),Hn(hi),nT();break;case 5:tT(r);break;case 4:Qf();break;case 13:Hn(qn);break;case 19:Hn(qn);break;case 10:JM(r.type._context);break;case 22:case 23:hT()}n=n.return}if(Rr=t,fr=t=yc(t.current,null),Gr=ms=e,xr=0,vm=null,uT=D0=Ju=0,Vi=Hp=null,Mu!==null){for(e=0;e<Mu.length;e++)if(n=Mu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Mu=null}return t}function lU(t,e){do{var n=fr;try{if(YM(),Oy.current=Rx,Ax){for(var r=Kn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ax=!1}if(Yu=0,Mr=vr=Kn=null,zp=!1,pm=0,cT.current=null,n===null||n.return===null){xr=1,vm=e,fr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Gr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=VP(o);if(p!==null){p.flags&=-257,$P(p,o,a,s,e),p.mode&1&&HP(s,c,e),e=p,l=c;var x=e.updateQueue;if(x===null){var w=new Set;w.add(l),e.updateQueue=w}else x.add(l);break e}else{if(!(e&1)){HP(s,c,e),pT();break e}l=Error(Ke(426))}}else if(Wn&&a.mode&1){var y=VP(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),$P(y,o,a,s,e),qM(Zf(l,a));break e}}s=l=Zf(l,a),xr!==4&&(xr=2),Hp===null?Hp=[s]:Hp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=W3(s,l,e);OP(s,v);break e;case 1:a=l;var S=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(gc===null||!gc.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=G3(s,a,e);OP(s,C);break e}}s=s.return}while(s!==null)}dU(n)}catch(T){e=T,fr===n&&n!==null&&(fr=n=n.return);continue}break}while(!0)}function cU(){var t=kx.current;return kx.current=Rx,t===null?Rx:t}function pT(){(xr===0||xr===3||xr===2)&&(xr=4),Rr===null||!(Ju&268435455)&&!(D0&268435455)||Yl(Rr,Gr)}function Dx(t,e){var n=fn;fn|=2;var r=cU();(Rr!==t||Gr!==e)&&(Va=null,Bu(t,e));do try{bJ();break}catch(i){lU(t,i)}while(!0);if(YM(),fn=n,kx.current=r,fr!==null)throw Error(Ke(261));return Rr=null,Gr=0,xr}function bJ(){for(;fr!==null;)uU(fr)}function SJ(){for(;fr!==null&&!XK();)uU(fr)}function uU(t){var e=hU(t.alternate,t,ms);t.memoizedProps=t.pendingProps,e===null?dU(t):fr=e,cT.current=null}function dU(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mJ(n,e),n!==null){n.flags&=32767,fr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xr=6,fr=null;return}}else if(n=pJ(n,e,ms),n!==null){fr=n;return}if(e=e.sibling,e!==null){fr=e;return}fr=e=t}while(e!==null);xr===0&&(xr=5)}function vu(t,e,n){var r=_n,i=Ks.transition;try{Ks.transition=null,_n=1,_J(t,e,n,r)}finally{Ks.transition=i,_n=r}return null}function _J(t,e,n,r){do Af();while(sc!==null);if(fn&6)throw Error(Ke(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ke(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(rY(t,s),t===Rr&&(fr=Rr=null,Gr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ov||(Ov=!0,pU(px,function(){return Af(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ks.transition,Ks.transition=null;var o=_n;_n=1;var a=fn;fn|=4,cT.current=null,vJ(t,n),sU(n,t),VY($_),gx=!!V_,$_=V_=null,t.current=n,yJ(n),qK(),fn=a,_n=o,Ks.transition=s}else t.current=n;if(Ov&&(Ov=!1,sc=t,Px=i),s=t.pendingLanes,s===0&&(gc=null),JK(n.stateNode),Xi(t,or()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Nx)throw Nx=!1,t=uE,uE=null,t;return Px&1&&t.tag!==0&&Af(),s=t.pendingLanes,s&1?t===dE?Vp++:(Vp=0,dE=t):Vp=0,Uc(),null}function Af(){if(sc!==null){var t=WF(Px),e=Ks.transition,n=_n;try{if(Ks.transition=null,_n=16>t?16:t,sc===null)var r=!1;else{if(t=sc,sc=null,Px=0,fn&6)throw Error(Ke(331));var i=fn;for(fn|=4,yt=t.current;yt!==null;){var s=yt,o=s.child;if(yt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(yt=c;yt!==null;){var u=yt;switch(u.tag){case 0:case 11:case 15:jp(8,u,s)}var d=u.child;if(d!==null)d.return=u,yt=d;else for(;yt!==null;){u=yt;var h=u.sibling,p=u.return;if(nU(u),u===c){yt=null;break}if(h!==null){h.return=p,yt=h;break}yt=p}}}var x=s.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var y=w.sibling;w.sibling=null,w=y}while(w!==null)}}yt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,yt=o;else e:for(;yt!==null;){if(s=yt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:jp(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,yt=v;break e}yt=s.return}}var S=t.current;for(yt=S;yt!==null;){o=yt;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,yt=E;else e:for(o=S;yt!==null;){if(a=yt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:P0(9,a)}}catch(T){er(a,a.return,T)}if(a===o){yt=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,yt=C;break e}yt=a.return}}if(fn=i,Uc(),ca&&typeof ca.onPostCommitFiberRoot=="function")try{ca.onPostCommitFiberRoot(E0,t)}catch{}r=!0}return r}finally{_n=n,Ks.transition=e}}return!1}function r2(t,e,n){e=Zf(n,e),e=W3(t,e,1),t=mc(t,e,1),e=Mi(),t!==null&&(Jm(t,1,e),Xi(t,e))}function er(t,e,n){if(t.tag===3)r2(t,t,n);else for(;e!==null;){if(e.tag===3){r2(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gc===null||!gc.has(r))){t=Zf(n,t),t=G3(e,t,1),e=mc(e,t,1),t=Mi(),e!==null&&(Jm(e,1,t),Xi(e,t));break}}e=e.return}}function EJ(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mi(),t.pingedLanes|=t.suspendedLanes&n,Rr===t&&(Gr&n)===n&&(xr===4||xr===3&&(Gr&130023424)===Gr&&500>or()-dT?Bu(t,0):uT|=n),Xi(t,e)}function fU(t,e){e===0&&(t.mode&1?(e=Mv,Mv<<=1,!(Mv&130023424)&&(Mv=4194304)):e=1);var n=Mi();t=al(t,e),t!==null&&(Jm(t,e,n),Xi(t,n))}function CJ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fU(t,n)}function MJ(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ke(314))}r!==null&&r.delete(e),fU(t,n)}var hU;hU=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wi.current)$i=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $i=!1,hJ(t,e,n);$i=!!(t.flags&131072)}else $i=!1,Wn&&e.flags&1048576&&v3(e,_x,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Uy(t,e),t=e.pendingProps;var i=Kf(e,hi.current);Tf(e,n),i=iT(null,e,r,t,i,n);var s=sT();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gi(r)?(s=!0,bx(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ZM(e),i.updater=N0,e.stateNode=i,i._reactInternals=e,Z_(e,r,t,n),e=nE(null,e,r,!0,s,n)):(e.tag=0,Wn&&s&&GM(e),Si(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Uy(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=AJ(r),t=go(r,t),i){case 0:e=tE(null,e,r,t,n);break e;case 1:e=XP(null,e,r,t,n);break e;case 11:e=WP(null,e,r,t,n);break e;case 14:e=GP(null,e,r,go(r.type,t),n);break e}throw Error(Ke(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:go(r,i),tE(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:go(r,i),XP(t,e,r,i,n);case 3:e:{if(Y3(e),t===null)throw Error(Ke(387));r=e.pendingProps,s=e.memoizedState,i=s.element,_3(t,e),Mx(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Zf(Error(Ke(423)),e),e=qP(t,e,r,n,i);break e}else if(r!==i){i=Zf(Error(Ke(424)),e),e=qP(t,e,r,n,i);break e}else for(ys=pc(e.stateNode.containerInfo.firstChild),ws=e,Wn=!0,So=null,n=b3(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yf(),r===i){e=ll(t,e,n);break e}Si(t,e,r,n)}e=e.child}return e;case 5:return E3(e),t===null&&Y_(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,W_(r,i)?o=null:s!==null&&W_(r,s)&&(e.flags|=32),K3(t,e),Si(t,e,o,n),e.child;case 6:return t===null&&Y_(e),null;case 13:return J3(t,e,n);case 4:return eT(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Jf(e,null,r,n):Si(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:go(r,i),WP(t,e,r,i,n);case 7:return Si(t,e,e.pendingProps,n),e.child;case 8:return Si(t,e,e.pendingProps.children,n),e.child;case 12:return Si(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Fn(Ex,r._currentValue),r._currentValue=o,s!==null)if(No(s.value,o)){if(s.children===i.children&&!Wi.current){e=ll(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=tl(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),J_(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ke(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),J_(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Si(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Tf(e,n),i=Qs(i),r=r(i),e.flags|=1,Si(t,e,r,n),e.child;case 14:return r=e.type,i=go(r,e.pendingProps),i=go(r.type,i),GP(t,e,r,i,n);case 15:return X3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:go(r,i),Uy(t,e),e.tag=1,Gi(r)?(t=!0,bx(e)):t=!1,Tf(e,n),$3(e,r,i),Z_(e,r,i,n),nE(null,e,r,!0,t,n);case 19:return Q3(t,e,n);case 22:return q3(t,e,n)}throw Error(Ke(156,e.tag))};function pU(t,e){return jF(t,e)}function TJ(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xs(t,e,n,r){return new TJ(t,e,n,r)}function mT(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AJ(t){if(typeof t=="function")return mT(t)?1:0;if(t!=null){if(t=t.$$typeof,t===IM)return 11;if(t===LM)return 14}return 2}function yc(t,e){var n=t.alternate;return n===null?(n=Xs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jy(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")mT(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case lf:return zu(n.children,i,s,e);case DM:o=8,i|=8;break;case __:return t=Xs(12,n,e,i|2),t.elementType=__,t.lanes=s,t;case E_:return t=Xs(13,n,e,i),t.elementType=E_,t.lanes=s,t;case C_:return t=Xs(19,n,e,i),t.elementType=C_,t.lanes=s,t;case EF:return I0(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case SF:o=10;break e;case _F:o=9;break e;case IM:o=11;break e;case LM:o=14;break e;case $l:o=16,r=null;break e}throw Error(Ke(130,t==null?t:typeof t,""))}return e=Xs(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function zu(t,e,n,r){return t=Xs(7,t,r,e),t.lanes=n,t}function I0(t,e,n,r){return t=Xs(22,t,r,e),t.elementType=EF,t.lanes=n,t.stateNode={isHidden:!1},t}function AS(t,e,n){return t=Xs(6,t,null,e),t.lanes=n,t}function RS(t,e,n){return e=Xs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function RJ(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cS(0),this.expirationTimes=cS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cS(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gT(t,e,n,r,i,s,o,a,l){return t=new RJ(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xs(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ZM(s),t}function kJ(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:af,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mU(t){if(!t)return Ac;t=t._reactInternals;e:{if(hd(t)!==t||t.tag!==1)throw Error(Ke(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ke(171))}if(t.tag===1){var n=t.type;if(Gi(n))return m3(t,n,e)}return e}function gU(t,e,n,r,i,s,o,a,l){return t=gT(n,r,!0,t,i,s,o,a,l),t.context=mU(null),n=t.current,r=Mi(),i=vc(n),s=tl(r,i),s.callback=e??null,mc(n,s,i),t.current.lanes=i,Jm(t,i,r),Xi(t,r),t}function L0(t,e,n,r){var i=e.current,s=Mi(),o=vc(i);return n=mU(n),e.context===null?e.context=n:e.pendingContext=n,e=tl(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=mc(i,e,o),t!==null&&(Ao(t,i,o,s),Ly(t,i,o)),o}function Ix(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function i2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vT(t,e){i2(t,e),(t=t.alternate)&&i2(t,e)}function NJ(){return null}var vU=typeof reportError=="function"?reportError:function(t){console.error(t)};function yT(t){this._internalRoot=t}O0.prototype.render=yT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ke(409));L0(t,e,null,null)};O0.prototype.unmount=yT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qu(function(){L0(null,t,null,null)}),e[ol]=null}};function O0(t){this._internalRoot=t}O0.prototype.unstable_scheduleHydration=function(t){if(t){var e=qF();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Kl.length&&e!==0&&e<Kl[n].priority;n++);Kl.splice(n,0,t),n===0&&YF(t)}};function xT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function F0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function s2(){}function PJ(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ix(o);s.call(c)}}var o=gU(e,r,t,0,null,!1,!1,"",s2);return t._reactRootContainer=o,t[ol]=o.current,cm(t.nodeType===8?t.parentNode:t),Qu(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ix(l);a.call(c)}}var l=gT(t,0,!1,null,null,!1,!1,"",s2);return t._reactRootContainer=l,t[ol]=l.current,cm(t.nodeType===8?t.parentNode:t),Qu(function(){L0(e,l,n,r)}),l}function U0(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ix(o);a.call(l)}}L0(e,o,t,i)}else o=PJ(n,e,t,i,r);return Ix(o)}GF=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Mp(e.pendingLanes);n!==0&&(UM(e,n|1),Xi(e,or()),!(fn&6)&&(eh=or()+500,Uc()))}break;case 13:Qu(function(){var r=al(t,1);if(r!==null){var i=Mi();Ao(r,t,1,i)}}),vT(t,1)}};BM=function(t){if(t.tag===13){var e=al(t,134217728);if(e!==null){var n=Mi();Ao(e,t,134217728,n)}vT(t,134217728)}};XF=function(t){if(t.tag===13){var e=vc(t),n=al(t,e);if(n!==null){var r=Mi();Ao(n,t,e,r)}vT(t,e)}};qF=function(){return _n};KF=function(t,e){var n=_n;try{return _n=t,e()}finally{_n=n}};L_=function(t,e,n){switch(e){case"input":if(A_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=A0(r);if(!i)throw Error(Ke(90));MF(r),A_(r,i)}}}break;case"textarea":AF(t,n);break;case"select":e=n.value,e!=null&&_f(t,!!n.multiple,e,!1)}};LF=fT;OF=Qu;var DJ={usingClientEntryPoint:!1,Events:[Zm,ff,A0,DF,IF,fT]},cp={findFiberByHostInstance:Cu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IJ={bundleType:cp.bundleType,version:cp.version,rendererPackageName:cp.rendererPackageName,rendererConfig:cp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=BF(t),t===null?null:t.stateNode},findFiberByHostInstance:cp.findFiberByHostInstance||NJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fv.isDisabled&&Fv.supportsFiber)try{E0=Fv.inject(IJ),ca=Fv}catch{}}Ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DJ;Ms.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xT(e))throw Error(Ke(200));return kJ(t,e,null,n)};Ms.createRoot=function(t,e){if(!xT(t))throw Error(Ke(299));var n=!1,r="",i=vU;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=gT(t,1,!1,null,null,n,!1,r,i),t[ol]=e.current,cm(t.nodeType===8?t.parentNode:t),new yT(e)};Ms.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ke(188)):(t=Object.keys(t).join(","),Error(Ke(268,t)));return t=BF(e),t=t===null?null:t.stateNode,t};Ms.flushSync=function(t){return Qu(t)};Ms.hydrate=function(t,e,n){if(!F0(e))throw Error(Ke(200));return U0(null,t,e,!0,n)};Ms.hydrateRoot=function(t,e,n){if(!xT(t))throw Error(Ke(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=vU;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=gU(e,null,t,1,n??null,i,!1,s,o),t[ol]=e.current,cm(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new O0(e)};Ms.render=function(t,e,n){if(!F0(e))throw Error(Ke(200));return U0(null,t,e,!1,n)};Ms.unmountComponentAtNode=function(t){if(!F0(t))throw Error(Ke(40));return t._reactRootContainer?(Qu(function(){U0(null,null,t,!1,function(){t._reactRootContainer=null,t[ol]=null})}),!0):!1};Ms.unstable_batchedUpdates=fT;Ms.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!F0(n))throw Error(Ke(200));if(t==null||t._reactInternals===void 0)throw Error(Ke(38));return U0(t,e,n,!1,r)};Ms.version="18.3.1-next-f1338f8080-20240426";function yU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yU)}catch(t){console.error(t)}}yU(),yF.exports=Ms;var qs=yF.exports;const wT=S0(qs);var xU,o2=qs;xU=o2.createRoot,o2.hydrateRoot;function wU(t,e){return function(){return t.apply(e,arguments)}}const{toString:LJ}=Object.prototype,{getPrototypeOf:bT}=Object,{iterator:B0,toStringTag:bU}=Symbol,z0=(t=>e=>{const n=LJ.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Oo=t=>(t=t.toLowerCase(),e=>z0(e)===t),j0=t=>e=>typeof e===t,{isArray:xh}=Array,ym=j0("undefined");function OJ(t){return t!==null&&!ym(t)&&t.constructor!==null&&!ym(t.constructor)&&qi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const SU=Oo("ArrayBuffer");function FJ(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&SU(t.buffer),e}const UJ=j0("string"),qi=j0("function"),_U=j0("number"),H0=t=>t!==null&&typeof t=="object",BJ=t=>t===!0||t===!1,Hy=t=>{if(z0(t)!=="object")return!1;const e=bT(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(bU in t)&&!(B0 in t)},zJ=Oo("Date"),jJ=Oo("File"),HJ=Oo("Blob"),VJ=Oo("FileList"),$J=t=>H0(t)&&qi(t.pipe),WJ=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||qi(t.append)&&((e=z0(t))==="formdata"||e==="object"&&qi(t.toString)&&t.toString()==="[object FormData]"))},GJ=Oo("URLSearchParams"),[XJ,qJ,KJ,YJ]=["ReadableStream","Request","Response","Headers"].map(Oo),JJ=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tg(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),xh(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function EU(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Au=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,CU=t=>!ym(t)&&t!==Au;function pE(){const{caseless:t}=CU(this)&&this||{},e={},n=(r,i)=>{const s=t&&EU(e,i)||i;Hy(e[s])&&Hy(r)?e[s]=pE(e[s],r):Hy(r)?e[s]=pE({},r):xh(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&tg(arguments[r],n);return e}const QJ=(t,e,n,{allOwnKeys:r}={})=>(tg(e,(i,s)=>{n&&qi(i)?t[s]=wU(i,n):t[s]=i},{allOwnKeys:r}),t),ZJ=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),eQ=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},tQ=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&bT(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},nQ=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},rQ=t=>{if(!t)return null;if(xh(t))return t;let e=t.length;if(!_U(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},iQ=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&bT(Uint8Array)),sQ=(t,e)=>{const r=(t&&t[B0]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},oQ=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},aQ=Oo("HTMLFormElement"),lQ=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),a2=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),cQ=Oo("RegExp"),MU=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};tg(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},uQ=t=>{MU(t,(e,n)=>{if(qi(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(qi(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},dQ=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return xh(t)?r(t):r(String(t).split(e)),n},fQ=()=>{},hQ=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function pQ(t){return!!(t&&qi(t.append)&&t[bU]==="FormData"&&t[B0])}const mQ=t=>{const e=new Array(10),n=(r,i)=>{if(H0(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=xh(r)?[]:{};return tg(r,(o,a)=>{const l=n(o,i+1);!ym(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},gQ=Oo("AsyncFunction"),vQ=t=>t&&(H0(t)||qi(t))&&qi(t.then)&&qi(t.catch),TU=((t,e)=>t?setImmediate:e?((n,r)=>(Au.addEventListener("message",({source:i,data:s})=>{i===Au&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Au.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",qi(Au.postMessage)),yQ=typeof queueMicrotask<"u"?queueMicrotask.bind(Au):typeof process<"u"&&process.nextTick||TU,xQ=t=>t!=null&&qi(t[B0]),Ee={isArray:xh,isArrayBuffer:SU,isBuffer:OJ,isFormData:WJ,isArrayBufferView:FJ,isString:UJ,isNumber:_U,isBoolean:BJ,isObject:H0,isPlainObject:Hy,isReadableStream:XJ,isRequest:qJ,isResponse:KJ,isHeaders:YJ,isUndefined:ym,isDate:zJ,isFile:jJ,isBlob:HJ,isRegExp:cQ,isFunction:qi,isStream:$J,isURLSearchParams:GJ,isTypedArray:iQ,isFileList:VJ,forEach:tg,merge:pE,extend:QJ,trim:JJ,stripBOM:ZJ,inherits:eQ,toFlatObject:tQ,kindOf:z0,kindOfTest:Oo,endsWith:nQ,toArray:rQ,forEachEntry:sQ,matchAll:oQ,isHTMLForm:aQ,hasOwnProperty:a2,hasOwnProp:a2,reduceDescriptors:MU,freezeMethods:uQ,toObjectSet:dQ,toCamelCase:lQ,noop:fQ,toFiniteNumber:hQ,findKey:EU,global:Au,isContextDefined:CU,isSpecCompliantForm:pQ,toJSONObject:mQ,isAsyncFn:gQ,isThenable:vQ,setImmediate:TU,asap:yQ,isIterable:xQ};function jt(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Ee.inherits(jt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ee.toJSONObject(this.config),code:this.code,status:this.status}}});const AU=jt.prototype,RU={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{RU[t]={value:t}});Object.defineProperties(jt,RU);Object.defineProperty(AU,"isAxiosError",{value:!0});jt.from=(t,e,n,r,i,s)=>{const o=Object.create(AU);return Ee.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),jt.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const wQ=null;function mE(t){return Ee.isPlainObject(t)||Ee.isArray(t)}function kU(t){return Ee.endsWith(t,"[]")?t.slice(0,-2):t}function l2(t,e,n){return t?t.concat(e).map(function(i,s){return i=kU(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function bQ(t){return Ee.isArray(t)&&!t.some(mE)}const SQ=Ee.toFlatObject(Ee,{},null,function(e){return/^is[A-Z]/.test(e)});function V0(t,e,n){if(!Ee.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Ee.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,y){return!Ee.isUndefined(y[w])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Ee.isSpecCompliantForm(e);if(!Ee.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(Ee.isDate(x))return x.toISOString();if(Ee.isBoolean(x))return x.toString();if(!l&&Ee.isBlob(x))throw new jt("Blob is not supported. Use a Buffer instead.");return Ee.isArrayBuffer(x)||Ee.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function u(x,w,y){let v=x;if(x&&!y&&typeof x=="object"){if(Ee.endsWith(w,"{}"))w=r?w:w.slice(0,-2),x=JSON.stringify(x);else if(Ee.isArray(x)&&bQ(x)||(Ee.isFileList(x)||Ee.endsWith(w,"[]"))&&(v=Ee.toArray(x)))return w=kU(w),v.forEach(function(E,C){!(Ee.isUndefined(E)||E===null)&&e.append(o===!0?l2([w],C,s):o===null?w:w+"[]",c(E))}),!1}return mE(x)?!0:(e.append(l2(y,w,s),c(x)),!1)}const d=[],h=Object.assign(SQ,{defaultVisitor:u,convertValue:c,isVisitable:mE});function p(x,w){if(!Ee.isUndefined(x)){if(d.indexOf(x)!==-1)throw Error("Circular reference detected in "+w.join("."));d.push(x),Ee.forEach(x,function(v,S){(!(Ee.isUndefined(v)||v===null)&&i.call(e,v,Ee.isString(S)?S.trim():S,w,h))===!0&&p(v,w?w.concat(S):[S])}),d.pop()}}if(!Ee.isObject(t))throw new TypeError("data must be an object");return p(t),e}function c2(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function ST(t,e){this._pairs=[],t&&V0(t,this,e)}const NU=ST.prototype;NU.append=function(e,n){this._pairs.push([e,n])};NU.toString=function(e){const n=e?function(r){return e.call(this,r,c2)}:c2;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function _Q(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function PU(t,e,n){if(!e)return t;const r=n&&n.encode||_Q;Ee.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Ee.isURLSearchParams(e)?e.toString():new ST(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class u2{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ee.forEach(this.handlers,function(r){r!==null&&e(r)})}}const DU={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},EQ=typeof URLSearchParams<"u"?URLSearchParams:ST,CQ=typeof FormData<"u"?FormData:null,MQ=typeof Blob<"u"?Blob:null,TQ={isBrowser:!0,classes:{URLSearchParams:EQ,FormData:CQ,Blob:MQ},protocols:["http","https","file","blob","url","data"]},_T=typeof window<"u"&&typeof document<"u",gE=typeof navigator=="object"&&navigator||void 0,AQ=_T&&(!gE||["ReactNative","NativeScript","NS"].indexOf(gE.product)<0),RQ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",kQ=_T&&window.location.href||"http://localhost",NQ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:_T,hasStandardBrowserEnv:AQ,hasStandardBrowserWebWorkerEnv:RQ,navigator:gE,origin:kQ},Symbol.toStringTag,{value:"Module"})),ci={...NQ,...TQ};function PQ(t,e){return V0(t,new ci.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return ci.isNode&&Ee.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function DQ(t){return Ee.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function IQ(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function IU(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Ee.isArray(i)?i.length:o,l?(Ee.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Ee.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Ee.isArray(i[o])&&(i[o]=IQ(i[o])),!a)}if(Ee.isFormData(t)&&Ee.isFunction(t.entries)){const n={};return Ee.forEachEntry(t,(r,i)=>{e(DQ(r),i,n,0)}),n}return null}function LQ(t,e,n){if(Ee.isString(t))try{return(e||JSON.parse)(t),Ee.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const ng={transitional:DU,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Ee.isObject(e);if(s&&Ee.isHTMLForm(e)&&(e=new FormData(e)),Ee.isFormData(e))return i?JSON.stringify(IU(e)):e;if(Ee.isArrayBuffer(e)||Ee.isBuffer(e)||Ee.isStream(e)||Ee.isFile(e)||Ee.isBlob(e)||Ee.isReadableStream(e))return e;if(Ee.isArrayBufferView(e))return e.buffer;if(Ee.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return PQ(e,this.formSerializer).toString();if((a=Ee.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return V0(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),LQ(e)):e}],transformResponse:[function(e){const n=this.transitional||ng.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Ee.isResponse(e)||Ee.isReadableStream(e))return e;if(e&&Ee.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?jt.from(a,jt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ci.classes.FormData,Blob:ci.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ee.forEach(["delete","get","head","post","put","patch"],t=>{ng.headers[t]={}});const OQ=Ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),FQ=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&OQ[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},d2=Symbol("internals");function up(t){return t&&String(t).trim().toLowerCase()}function Vy(t){return t===!1||t==null?t:Ee.isArray(t)?t.map(Vy):String(t)}function UQ(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const BQ=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function kS(t,e,n,r,i){if(Ee.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Ee.isString(e)){if(Ee.isString(r))return e.indexOf(r)!==-1;if(Ee.isRegExp(r))return r.test(e)}}function zQ(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function jQ(t,e){const n=Ee.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Ki=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const u=up(l);if(!u)throw new Error("header name must be a non-empty string");const d=Ee.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=Vy(a))}const o=(a,l)=>Ee.forEach(a,(c,u)=>s(c,u,l));if(Ee.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Ee.isString(e)&&(e=e.trim())&&!BQ(e))o(FQ(e),n);else if(Ee.isObject(e)&&Ee.isIterable(e)){let a={},l,c;for(const u of e){if(!Ee.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?Ee.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,n)}else e!=null&&s(n,e,r);return this}get(e,n){if(e=up(e),e){const r=Ee.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return UQ(i);if(Ee.isFunction(n))return n.call(this,i,r);if(Ee.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=up(e),e){const r=Ee.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||kS(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=up(o),o){const a=Ee.findKey(r,o);a&&(!n||kS(r,r[a],a,n))&&(delete r[a],i=!0)}}return Ee.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||kS(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Ee.forEach(this,(i,s)=>{const o=Ee.findKey(r,s);if(o){n[o]=Vy(i),delete n[s];return}const a=e?zQ(s):String(s).trim();a!==s&&delete n[s],n[a]=Vy(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Ee.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Ee.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[d2]=this[d2]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=up(o);r[a]||(jQ(i,o),r[a]=!0)}return Ee.isArray(e)?e.forEach(s):s(e),this}};Ki.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ee.reduceDescriptors(Ki.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Ee.freezeMethods(Ki);function NS(t,e){const n=this||ng,r=e||n,i=Ki.from(r.headers);let s=r.data;return Ee.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function LU(t){return!!(t&&t.__CANCEL__)}function wh(t,e,n){jt.call(this,t??"canceled",jt.ERR_CANCELED,e,n),this.name="CanceledError"}Ee.inherits(wh,jt,{__CANCEL__:!0});function OU(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new jt("Request failed with status code "+n.status,[jt.ERR_BAD_REQUEST,jt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function HQ(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function VQ(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[s];o||(o=c),n[i]=l,r[i]=c;let d=s,h=0;for(;d!==i;)h+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=u&&c-u;return p?Math.round(h*1e3/p):void 0}}function $Q(t,e){let n=0,r=1e3/e,i,s;const o=(c,u=Date.now())=>{n=u,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),d=u-n;d>=r?o(c,u):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-d)))},()=>i&&o(i)]}const Lx=(t,e,n=3)=>{let r=0;const i=VQ(50,250);return $Q(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),u=o<=a;r=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(d)},n)},f2=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},h2=t=>(...e)=>Ee.asap(()=>t(...e)),WQ=ci.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,ci.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(ci.origin),ci.navigator&&/(msie|trident)/i.test(ci.navigator.userAgent)):()=>!0,GQ=ci.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Ee.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Ee.isString(r)&&o.push("path="+r),Ee.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function XQ(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function qQ(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function FU(t,e,n){let r=!XQ(e);return t&&(r||n==!1)?qQ(t,e):e}const p2=t=>t instanceof Ki?{...t}:t;function Zu(t,e){e=e||{};const n={};function r(c,u,d,h){return Ee.isPlainObject(c)&&Ee.isPlainObject(u)?Ee.merge.call({caseless:h},c,u):Ee.isPlainObject(u)?Ee.merge({},u):Ee.isArray(u)?u.slice():u}function i(c,u,d,h){if(Ee.isUndefined(u)){if(!Ee.isUndefined(c))return r(void 0,c,d,h)}else return r(c,u,d,h)}function s(c,u){if(!Ee.isUndefined(u))return r(void 0,u)}function o(c,u){if(Ee.isUndefined(u)){if(!Ee.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,d){if(d in e)return r(c,u);if(d in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,d)=>i(p2(c),p2(u),d,!0)};return Ee.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=l[u]||i,h=d(t[u],e[u],u);Ee.isUndefined(h)&&d!==a||(n[u]=h)}),n}const UU=t=>{const e=Zu({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Ki.from(o),e.url=PU(FU(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Ee.isFormData(n)){if(ci.hasStandardBrowserEnv||ci.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(ci.hasStandardBrowserEnv&&(r&&Ee.isFunction(r)&&(r=r(e)),r||r!==!1&&WQ(e.url))){const c=i&&s&&GQ.read(s);c&&o.set(i,c)}return e},KQ=typeof XMLHttpRequest<"u",YQ=KQ&&function(t){return new Promise(function(n,r){const i=UU(t);let s=i.data;const o=Ki.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,d,h,p,x;function w(){p&&p(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(i.method.toUpperCase(),i.url,!0),y.timeout=i.timeout;function v(){if(!y)return;const E=Ki.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),T={data:!a||a==="text"||a==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:E,config:t,request:y};OU(function(k){n(k),w()},function(k){r(k),w()},T),y=null}"onloadend"in y?y.onloadend=v:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(v)},y.onabort=function(){y&&(r(new jt("Request aborted",jt.ECONNABORTED,t,y)),y=null)},y.onerror=function(){r(new jt("Network Error",jt.ERR_NETWORK,t,y)),y=null},y.ontimeout=function(){let C=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const T=i.transitional||DU;i.timeoutErrorMessage&&(C=i.timeoutErrorMessage),r(new jt(C,T.clarifyTimeoutError?jt.ETIMEDOUT:jt.ECONNABORTED,t,y)),y=null},s===void 0&&o.setContentType(null),"setRequestHeader"in y&&Ee.forEach(o.toJSON(),function(C,T){y.setRequestHeader(T,C)}),Ee.isUndefined(i.withCredentials)||(y.withCredentials=!!i.withCredentials),a&&a!=="json"&&(y.responseType=i.responseType),c&&([h,x]=Lx(c,!0),y.addEventListener("progress",h)),l&&y.upload&&([d,p]=Lx(l),y.upload.addEventListener("progress",d),y.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=E=>{y&&(r(!E||E.type?new wh(null,t,y):E),y.abort(),y=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const S=HQ(i.url);if(S&&ci.protocols.indexOf(S)===-1){r(new jt("Unsupported protocol "+S+":",jt.ERR_BAD_REQUEST,t));return}y.send(s||null)})},JQ=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;r.abort(u instanceof jt?u:new wh(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new jt(`timeout ${e} of ms exceeded`,jt.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Ee.asap(a),l}},QQ=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},ZQ=async function*(t,e){for await(const n of eZ(t))yield*QQ(n,e)},eZ=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},m2=(t,e,n,r)=>{const i=ZQ(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let d=u.byteLength;if(n){let h=s+=d;n(h)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},$0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",BU=$0&&typeof ReadableStream=="function",tZ=$0&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),zU=(t,...e)=>{try{return!!t(...e)}catch{return!1}},nZ=BU&&zU(()=>{let t=!1;const e=new Request(ci.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),g2=64*1024,vE=BU&&zU(()=>Ee.isReadableStream(new Response("").body)),Ox={stream:vE&&(t=>t.body)};$0&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ox[e]&&(Ox[e]=Ee.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new jt(`Response type '${e}' is not supported`,jt.ERR_NOT_SUPPORT,r)})})})(new Response);const rZ=async t=>{if(t==null)return 0;if(Ee.isBlob(t))return t.size;if(Ee.isSpecCompliantForm(t))return(await new Request(ci.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Ee.isArrayBufferView(t)||Ee.isArrayBuffer(t))return t.byteLength;if(Ee.isURLSearchParams(t)&&(t=t+""),Ee.isString(t))return(await tZ(t)).byteLength},iZ=async(t,e)=>{const n=Ee.toFiniteNumber(t.getContentLength());return n??rZ(e)},sZ=$0&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=UU(t);c=c?(c+"").toLowerCase():"text";let p=JQ([i,s&&s.toAbortSignal()],o),x;const w=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let y;try{if(l&&nZ&&n!=="get"&&n!=="head"&&(y=await iZ(u,r))!==0){let T=new Request(e,{method:"POST",body:r,duplex:"half"}),A;if(Ee.isFormData(r)&&(A=T.headers.get("content-type"))&&u.setContentType(A),T.body){const[k,R]=f2(y,Lx(h2(l)));r=m2(T.body,g2,k,R)}}Ee.isString(d)||(d=d?"include":"omit");const v="credentials"in Request.prototype;x=new Request(e,{...h,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:v?d:void 0});let S=await fetch(x,h);const E=vE&&(c==="stream"||c==="response");if(vE&&(a||E&&w)){const T={};["status","statusText","headers"].forEach(P=>{T[P]=S[P]});const A=Ee.toFiniteNumber(S.headers.get("content-length")),[k,R]=a&&f2(A,Lx(h2(a),!0))||[];S=new Response(m2(S.body,g2,k,()=>{R&&R(),w&&w()}),T)}c=c||"text";let C=await Ox[Ee.findKey(Ox,c)||"text"](S,t);return!E&&w&&w(),await new Promise((T,A)=>{OU(T,A,{data:C,headers:Ki.from(S.headers),status:S.status,statusText:S.statusText,config:t,request:x})})}catch(v){throw w&&w(),v&&v.name==="TypeError"&&/Load failed|fetch/i.test(v.message)?Object.assign(new jt("Network Error",jt.ERR_NETWORK,t,x),{cause:v.cause||v}):jt.from(v,v&&v.code,t,x)}}),yE={http:wQ,xhr:YQ,fetch:sZ};Ee.forEach(yE,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const v2=t=>`- ${t}`,oZ=t=>Ee.isFunction(t)||t===null||t===!1,jU={getAdapter:t=>{t=Ee.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!oZ(n)&&(r=yE[(o=String(n)).toLowerCase()],r===void 0))throw new jt(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(v2).join(`
`):" "+v2(s[0]):"as no adapter specified";throw new jt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:yE};function PS(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new wh(null,t)}function y2(t){return PS(t),t.headers=Ki.from(t.headers),t.data=NS.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),jU.getAdapter(t.adapter||ng.adapter)(t).then(function(r){return PS(t),r.data=NS.call(t,t.transformResponse,r),r.headers=Ki.from(r.headers),r},function(r){return LU(r)||(PS(t),r&&r.response&&(r.response.data=NS.call(t,t.transformResponse,r.response),r.response.headers=Ki.from(r.response.headers))),Promise.reject(r)})}const HU="1.10.0",W0={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{W0[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const x2={};W0.transitional=function(e,n,r){function i(s,o){return"[Axios v"+HU+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new jt(i(o," has been removed"+(n?" in "+n:"")),jt.ERR_DEPRECATED);return n&&!x2[o]&&(x2[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};W0.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function aZ(t,e,n){if(typeof t!="object")throw new jt("options must be an object",jt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new jt("option "+s+" must be "+l,jt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new jt("Unknown option "+s,jt.ERR_BAD_OPTION)}}const $y={assertOptions:aZ,validators:W0},Wo=$y.validators;let ju=class{constructor(e){this.defaults=e||{},this.interceptors={request:new u2,response:new u2}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Zu(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&$y.assertOptions(r,{silentJSONParsing:Wo.transitional(Wo.boolean),forcedJSONParsing:Wo.transitional(Wo.boolean),clarifyTimeoutError:Wo.transitional(Wo.boolean)},!1),i!=null&&(Ee.isFunction(i)?n.paramsSerializer={serialize:i}:$y.assertOptions(i,{encode:Wo.function,serialize:Wo.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),$y.assertOptions(n,{baseUrl:Wo.spelling("baseURL"),withXsrfToken:Wo.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Ee.merge(s.common,s[n.method]);s&&Ee.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),n.headers=Ki.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(l=l&&w.synchronous,a.unshift(w.fulfilled,w.rejected))});const c=[];this.interceptors.response.forEach(function(w){c.push(w.fulfilled,w.rejected)});let u,d=0,h;if(!l){const x=[y2.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,c),h=x.length,u=Promise.resolve(n);d<h;)u=u.then(x[d++],x[d++]);return u}h=a.length;let p=n;for(d=0;d<h;){const x=a[d++],w=a[d++];try{p=x(p)}catch(y){w.call(this,y);break}}try{u=y2.call(this,p)}catch(x){return Promise.reject(x)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=Zu(this.defaults,e);const n=FU(e.baseURL,e.url,e.allowAbsoluteUrls);return PU(n,e.params,e.paramsSerializer)}};Ee.forEach(["delete","get","head","options"],function(e){ju.prototype[e]=function(n,r){return this.request(Zu(r||{},{method:e,url:n,data:(r||{}).data}))}});Ee.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(Zu(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ju.prototype[e]=n(),ju.prototype[e+"Form"]=n(!0)});let lZ=class VU{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new wh(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new VU(function(i){e=i}),cancel:e}}};function cZ(t){return function(n){return t.apply(null,n)}}function uZ(t){return Ee.isObject(t)&&t.isAxiosError===!0}const xE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xE).forEach(([t,e])=>{xE[e]=t});function $U(t){const e=new ju(t),n=wU(ju.prototype.request,e);return Ee.extend(n,ju.prototype,e,{allOwnKeys:!0}),Ee.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return $U(Zu(t,i))},n}const Nn=$U(ng);Nn.Axios=ju;Nn.CanceledError=wh;Nn.CancelToken=lZ;Nn.isCancel=LU;Nn.VERSION=HU;Nn.toFormData=V0;Nn.AxiosError=jt;Nn.Cancel=Nn.CanceledError;Nn.all=function(e){return Promise.all(e)};Nn.spread=cZ;Nn.isAxiosError=uZ;Nn.mergeConfig=Zu;Nn.AxiosHeaders=Ki;Nn.formToJSON=t=>IU(Ee.isHTMLForm(t)?new FormData(t):t);Nn.getAdapter=jU.getAdapter;Nn.HttpStatusCode=xE;Nn.default=Nn;const{Axios:cNe,AxiosError:uNe,CanceledError:dNe,isCancel:fNe,CancelToken:hNe,VERSION:pNe,all:mNe,Cancel:gNe,isAxiosError:vNe,spread:yNe,toFormData:xNe,AxiosHeaders:wNe,HttpStatusCode:bNe,formToJSON:SNe,getAdapter:_Ne,mergeConfig:ENe}=Nn,dZ=["/api/credits/recent-expirations","/api/subscription/tier-info"],WU="https://itemize-backend-production-92ad.up.railway.app",kn=Nn.create({baseURL:"http://localhost:3001",withCredentials:!0});kn.interceptors.request.use(t=>{const e=window.location.hostname==="itemize.cloud";t.baseURL=e?WU:"http://localhost:3001";const n=t.url||"";if(dZ.some(i=>n.includes(i))){const s=Nn.CancelToken.source();t.cancelToken=s.token,s.cancel(`Request to ${n} was blocked by interceptor`)}return t},t=>Promise.reject(t));kn.interceptors.response.use(t=>t,t=>{var e;return((e=t.response)==null?void 0:e.status)===401&&(localStorage.removeItem("itemize_token"),localStorage.removeItem("itemize_user"),localStorage.removeItem("itemize_expiry")),Promise.reject(t)});const xm=()=>window.location.hostname==="itemize.cloud"?WU:"http://localhost:3001",fZ=1,hZ=1e6;let DS=0;function pZ(){return DS=(DS+1)%Number.MAX_SAFE_INTEGER,DS.toString()}const IS=new Map,w2=t=>{if(IS.has(t))return;const e=setTimeout(()=>{IS.delete(t),$p({type:"REMOVE_TOAST",toastId:t})},hZ);IS.set(t,e)},mZ=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,fZ)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?w2(n):t.toasts.forEach(r=>{w2(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Wy=[];let Gy={toasts:[]};function $p(t){Gy=mZ(Gy,t),Wy.forEach(e=>{e(Gy)})}function wE({...t}){const e=pZ(),n=i=>$p({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>$p({type:"DISMISS_TOAST",toastId:e});return $p({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function to(){const[t,e]=b.useState(Gy);return b.useEffect(()=>(Wy.push(e),()=>{const n=Wy.indexOf(e);n>-1&&Wy.splice(n,1)}),[t]),{...t,toast:wE,dismiss:n=>$p({type:"DISMISS_TOAST",toastId:n})}}function rt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function b2(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function cl(...t){return e=>{let n=!1;const r=t.map(i=>{const s=b2(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():b2(t[i],null)}}}}function Ht(...t){return b.useCallback(cl(...t),t)}function gZ(t,e){const n=b.createContext(e),r=s=>{const{children:o,...a}=s,l=b.useMemo(()=>a,Object.values(a));return m.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function i(s){const o=b.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function es(t,e=[]){let n=[];function r(s,o){const a=b.createContext(o),l=n.length;n=[...n,o];const c=d=>{var v;const{scope:h,children:p,...x}=d,w=((v=h==null?void 0:h[t])==null?void 0:v[l])||a,y=b.useMemo(()=>x,Object.values(x));return m.jsx(w.Provider,{value:y,children:p})};c.displayName=s+"Provider";function u(d,h){var w;const p=((w=h==null?void 0:h[t])==null?void 0:w[l])||a,x=b.useContext(p);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>b.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return b.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,vZ(i,...e)]}function vZ(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Rc(t){const e=xZ(t),n=b.forwardRef((r,i)=>{const{children:s,...o}=r,a=b.Children.toArray(s),l=a.find(bZ);if(l){const c=l.props.children,u=a.map(d=>d===l?b.Children.count(c)>1?b.Children.only(null):b.isValidElement(c)?c.props.children:null:d);return m.jsx(e,{...o,ref:i,children:b.isValidElement(c)?b.cloneElement(c,void 0,u):null})}return m.jsx(e,{...o,ref:i,children:s})});return n.displayName=`${t}.Slot`,n}var yZ=Rc("Slot");function xZ(t){const e=b.forwardRef((n,r)=>{const{children:i,...s}=n;if(b.isValidElement(i)){const o=_Z(i),a=SZ(s,i.props);return i.type!==b.Fragment&&(a.ref=r?cl(r,o):o),b.cloneElement(i,a)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var GU=Symbol("radix.slottable");function wZ(t){const e=({children:n})=>m.jsx(m.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=GU,e}function bZ(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===GU}function SZ(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function _Z(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function rg(t){const e=t+"CollectionProvider",[n,r]=es(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:y,children:v}=w,S=Me.useRef(null),E=Me.useRef(new Map).current;return m.jsx(i,{scope:y,itemMap:E,collectionRef:S,children:v})};o.displayName=e;const a=t+"CollectionSlot",l=Rc(a),c=Me.forwardRef((w,y)=>{const{scope:v,children:S}=w,E=s(a,v),C=Ht(y,E.collectionRef);return m.jsx(l,{ref:C,children:S})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=Rc(u),p=Me.forwardRef((w,y)=>{const{scope:v,children:S,...E}=w,C=Me.useRef(null),T=Ht(y,C),A=s(u,v);return Me.useEffect(()=>(A.itemMap.set(C,{ref:C,...E}),()=>void A.itemMap.delete(C))),m.jsx(h,{[d]:"",ref:T,children:S})});p.displayName=u;function x(w){const y=s(t+"CollectionConsumer",w);return Me.useCallback(()=>{const S=y.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((A,k)=>E.indexOf(A.ref.current)-E.indexOf(k.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},x,r]}var EZ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xt=EZ.reduce((t,e)=>{const n=Rc(`Primitive.${e}`),r=b.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function ET(t,e){t&&qs.flushSync(()=>t.dispatchEvent(e))}function Zi(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function CZ(t,e=globalThis==null?void 0:globalThis.document){const n=Zi(t);b.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var MZ="DismissableLayer",bE="dismissableLayer.update",TZ="dismissableLayer.pointerDownOutside",AZ="dismissableLayer.focusOutside",S2,XU=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pd=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=b.useContext(XU),[u,d]=b.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=b.useState({}),x=Ht(e,k=>d(k)),w=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=w.indexOf(y),S=u?w.indexOf(u):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,C=S>=v,T=kZ(k=>{const R=k.target,P=[...c.branches].some(M=>M.contains(R));!C||P||(i==null||i(k),o==null||o(k),k.defaultPrevented||a==null||a())},h),A=NZ(k=>{const R=k.target;[...c.branches].some(M=>M.contains(R))||(s==null||s(k),o==null||o(k),k.defaultPrevented||a==null||a())},h);return CZ(k=>{S===c.layers.size-1&&(r==null||r(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},h),b.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(S2=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),_2(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=S2)}},[u,h,n,c]),b.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),_2())},[u,c]),b.useEffect(()=>{const k=()=>p({});return document.addEventListener(bE,k),()=>document.removeEventListener(bE,k)},[]),m.jsx(xt.div,{...l,ref:x,style:{pointerEvents:E?C?"auto":"none":void 0,...t.style},onFocusCapture:rt(t.onFocusCapture,A.onFocusCapture),onBlurCapture:rt(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:rt(t.onPointerDownCapture,T.onPointerDownCapture)})});pd.displayName=MZ;var RZ="DismissableLayerBranch",qU=b.forwardRef((t,e)=>{const n=b.useContext(XU),r=b.useRef(null),i=Ht(e,r);return b.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),m.jsx(xt.div,{...t,ref:i})});qU.displayName=RZ;function kZ(t,e=globalThis==null?void 0:globalThis.document){const n=Zi(t),r=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){KU(TZ,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function NZ(t,e=globalThis==null?void 0:globalThis.document){const n=Zi(t),r=b.useRef(!1);return b.useEffect(()=>{const i=s=>{s.target&&!r.current&&KU(AZ,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function _2(){const t=new CustomEvent(bE);document.dispatchEvent(t)}function KU(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?ET(i,s):i.dispatchEvent(s)}var PZ=pd,DZ=qU,Pr=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},IZ="Portal",bh=b.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,s]=b.useState(!1);Pr(()=>s(!0),[]);const o=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?wT.createPortal(m.jsx(xt.div,{...r,ref:e}),o):null});bh.displayName=IZ;function LZ(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var As=t=>{const{present:e,children:n}=t,r=OZ(e),i=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),s=Ht(r.ref,FZ(i));return typeof n=="function"||r.isPresent?b.cloneElement(i,{ref:s}):null};As.displayName="Presence";function OZ(t){const[e,n]=b.useState(),r=b.useRef(null),i=b.useRef(t),s=b.useRef("none"),o=t?"mounted":"unmounted",[a,l]=LZ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const c=Uv(r.current);s.current=a==="mounted"?c:"none"},[a]),Pr(()=>{const c=r.current,u=i.current;if(u!==t){const h=s.current,p=Uv(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Pr(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const w=Uv(r.current).includes(p.animationName);if(p.target===e&&w&&(l("ANIMATION_END"),!i.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},h=p=>{p.target===e&&(s.current=Uv(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:b.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Uv(t){return(t==null?void 0:t.animationName)||"none"}function FZ(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var UZ=RM[" useInsertionEffect ".trim().toString()]||Pr;function Cs({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,s,o]=BZ({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:i;{const u=b.useRef(t!==void 0);b.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const c=b.useCallback(u=>{var d;if(a){const h=zZ(u)?u(t):u;h!==t&&((d=o.current)==null||d.call(o,h))}else s(u)},[a,t,s,o]);return[l,c]}function BZ({defaultProp:t,onChange:e}){const[n,r]=b.useState(t),i=b.useRef(n),s=b.useRef(e);return UZ(()=>{s.current=e},[e]),b.useEffect(()=>{var o;i.current!==n&&((o=s.current)==null||o.call(s,n),i.current=n)},[n,i]),[n,r,s]}function zZ(t){return typeof t=="function"}var YU=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),jZ="VisuallyHidden",G0=b.forwardRef((t,e)=>m.jsx(xt.span,{...t,ref:e,style:{...YU,...t.style}}));G0.displayName=jZ;var HZ=G0,CT="ToastProvider",[MT,VZ,$Z]=rg("Toast"),[JU,CNe]=es("Toast",[$Z]),[WZ,X0]=JU(CT),QU=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[a,l]=b.useState(null),[c,u]=b.useState(0),d=b.useRef(!1),h=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${CT}\`. Expected non-empty \`string\`.`),m.jsx(MT.Provider,{scope:e,children:m.jsx(WZ,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:b.useCallback(()=>u(p=>p+1),[]),onToastRemove:b.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:o})})};QU.displayName=CT;var ZU="ToastViewport",GZ=["F8"],SE="toast.viewportPause",_E="toast.viewportResume",eB=b.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=GZ,label:i="Notifications ({hotkey})",...s}=t,o=X0(ZU,n),a=VZ(n),l=b.useRef(null),c=b.useRef(null),u=b.useRef(null),d=b.useRef(null),h=Ht(e,d,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;b.useEffect(()=>{const y=v=>{var E;r.length!==0&&r.every(C=>v[C]||v.code===C)&&((E=d.current)==null||E.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),b.useEffect(()=>{const y=l.current,v=d.current;if(x&&y&&v){const S=()=>{if(!o.isClosePausedRef.current){const A=new CustomEvent(SE);v.dispatchEvent(A),o.isClosePausedRef.current=!0}},E=()=>{if(o.isClosePausedRef.current){const A=new CustomEvent(_E);v.dispatchEvent(A),o.isClosePausedRef.current=!1}},C=A=>{!y.contains(A.relatedTarget)&&E()},T=()=>{y.contains(document.activeElement)||E()};return y.addEventListener("focusin",S),y.addEventListener("focusout",C),y.addEventListener("pointermove",S),y.addEventListener("pointerleave",T),window.addEventListener("blur",S),window.addEventListener("focus",E),()=>{y.removeEventListener("focusin",S),y.removeEventListener("focusout",C),y.removeEventListener("pointermove",S),y.removeEventListener("pointerleave",T),window.removeEventListener("blur",S),window.removeEventListener("focus",E)}}},[x,o.isClosePausedRef]);const w=b.useCallback(({tabbingDirection:y})=>{const S=a().map(E=>{const C=E.ref.current,T=[C,...see(C)];return y==="forwards"?T:T.reverse()});return(y==="forwards"?S.reverse():S).flat()},[a]);return b.useEffect(()=>{const y=d.current;if(y){const v=S=>{var T,A,k;const E=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!E){const R=document.activeElement,P=S.shiftKey;if(S.target===y&&P){(T=c.current)==null||T.focus();return}const z=w({tabbingDirection:P?"backwards":"forwards"}),H=z.findIndex(j=>j===R);LS(z.slice(H+1))?S.preventDefault():P?(A=c.current)==null||A.focus():(k=u.current)==null||k.focus()}};return y.addEventListener("keydown",v),()=>y.removeEventListener("keydown",v)}},[a,w]),m.jsxs(DZ,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&m.jsx(EE,{ref:c,onFocusFromOutsideViewport:()=>{const y=w({tabbingDirection:"forwards"});LS(y)}}),m.jsx(MT.Slot,{scope:n,children:m.jsx(xt.ol,{tabIndex:-1,...s,ref:h})}),x&&m.jsx(EE,{ref:u,onFocusFromOutsideViewport:()=>{const y=w({tabbingDirection:"backwards"});LS(y)}})]})});eB.displayName=ZU;var tB="ToastFocusProxy",EE=b.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=X0(tB,n);return m.jsx(G0,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});EE.displayName=tB;var ig="Toast",XZ="toast.swipeStart",qZ="toast.swipeMove",KZ="toast.swipeCancel",YZ="toast.swipeEnd",nB=b.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[a,l]=Cs({prop:r,defaultProp:i??!0,onChange:s,caller:ig});return m.jsx(As,{present:n||a,children:m.jsx(ZZ,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Zi(t.onPause),onResume:Zi(t.onResume),onSwipeStart:rt(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:rt(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:rt(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:rt(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});nB.displayName=ig;var[JZ,QZ]=JU(ig,{onClose(){}}),ZZ=b.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:p,...x}=t,w=X0(ig,n),[y,v]=b.useState(null),S=Ht(e,j=>v(j)),E=b.useRef(null),C=b.useRef(null),T=i||w.duration,A=b.useRef(0),k=b.useRef(T),R=b.useRef(0),{onToastAdd:P,onToastRemove:M}=w,I=Zi(()=>{var J;(y==null?void 0:y.contains(document.activeElement))&&((J=w.viewport)==null||J.focus()),o()}),z=b.useCallback(j=>{!j||j===1/0||(window.clearTimeout(R.current),A.current=new Date().getTime(),R.current=window.setTimeout(I,j))},[I]);b.useEffect(()=>{const j=w.viewport;if(j){const J=()=>{z(k.current),c==null||c()},q=()=>{const Q=new Date().getTime()-A.current;k.current=k.current-Q,window.clearTimeout(R.current),l==null||l()};return j.addEventListener(SE,q),j.addEventListener(_E,J),()=>{j.removeEventListener(SE,q),j.removeEventListener(_E,J)}}},[w.viewport,T,l,c,z]),b.useEffect(()=>{s&&!w.isClosePausedRef.current&&z(T)},[s,T,w.isClosePausedRef,z]),b.useEffect(()=>(P(),()=>M()),[P,M]);const H=b.useMemo(()=>y?cB(y):null,[y]);return w.viewport?m.jsxs(m.Fragment,{children:[H&&m.jsx(eee,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:H}),m.jsx(JZ,{scope:n,onClose:I,children:qs.createPortal(m.jsx(MT.ItemSlot,{scope:n,children:m.jsx(PZ,{asChild:!0,onEscapeKeyDown:rt(a,()=>{w.isFocusedToastEscapeKeyDownRef.current||I(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(xt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":w.swipeDirection,...x,ref:S,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:rt(t.onKeyDown,j=>{j.key==="Escape"&&(a==null||a(j.nativeEvent),j.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:rt(t.onPointerDown,j=>{j.button===0&&(E.current={x:j.clientX,y:j.clientY})}),onPointerMove:rt(t.onPointerMove,j=>{if(!E.current)return;const J=j.clientX-E.current.x,q=j.clientY-E.current.y,Q=!!C.current,O=["left","right"].includes(w.swipeDirection),F=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,D=O?F(0,J):0,ee=O?0:F(0,q),W=j.pointerType==="touch"?10:2,B={x:D,y:ee},K={originalEvent:j,delta:B};Q?(C.current=B,Bv(qZ,d,K,{discrete:!1})):E2(B,w.swipeDirection,W)?(C.current=B,Bv(XZ,u,K,{discrete:!1}),j.target.setPointerCapture(j.pointerId)):(Math.abs(J)>W||Math.abs(q)>W)&&(E.current=null)}),onPointerUp:rt(t.onPointerUp,j=>{const J=C.current,q=j.target;if(q.hasPointerCapture(j.pointerId)&&q.releasePointerCapture(j.pointerId),C.current=null,E.current=null,J){const Q=j.currentTarget,O={originalEvent:j,delta:J};E2(J,w.swipeDirection,w.swipeThreshold)?Bv(YZ,p,O,{discrete:!0}):Bv(KZ,h,O,{discrete:!0}),Q.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),eee=t=>{const{__scopeToast:e,children:n,...r}=t,i=X0(ig,e),[s,o]=b.useState(!1),[a,l]=b.useState(!1);return ree(()=>o(!0)),b.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:m.jsx(bh,{asChild:!0,children:m.jsx(G0,{...r,children:s&&m.jsxs(m.Fragment,{children:[i.label," ",n]})})})},tee="ToastTitle",rB=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(xt.div,{...r,ref:e})});rB.displayName=tee;var nee="ToastDescription",iB=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return m.jsx(xt.div,{...r,ref:e})});iB.displayName=nee;var sB="ToastAction",oB=b.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?m.jsx(lB,{altText:n,asChild:!0,children:m.jsx(TT,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${sB}\`. Expected non-empty \`string\`.`),null)});oB.displayName=sB;var aB="ToastClose",TT=b.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=QZ(aB,n);return m.jsx(lB,{asChild:!0,children:m.jsx(xt.button,{type:"button",...r,ref:e,onClick:rt(t.onClick,i.onClose)})})});TT.displayName=aB;var lB=b.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return m.jsx(xt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function cB(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),iee(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...cB(r))}}),e}function Bv(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?ET(i,s):i.dispatchEvent(s)}var E2=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function ree(t=()=>{}){const e=Zi(t);Pr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function iee(t){return t.nodeType===t.ELEMENT_NODE}function see(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function LS(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var oee=QU,uB=eB,dB=nB,fB=rB,hB=iB,pB=oB,mB=TT;function gB(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=gB(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function vB(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=gB(t))&&(r&&(r+=" "),r+=e);return r}const C2=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,M2=vB,sg=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return M2(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],d=s==null?void 0:s[c];if(u===null)return null;const h=C2(u)||C2(d);return i[c][h]}),a=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:d,className:h,...p}=u;return Object.entries(p).every(x=>{let[w,y]=x;return Array.isArray(y)?y.includes({...s,...a}[w]):{...s,...a}[w]===y})?[...c,d,h]:c},[]);return M2(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aee=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yB=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lee={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cee=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>b.createElement("svg",{ref:l,...lee,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:yB("lucide",i),...a},[...o.map(([c,u])=>b.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=(t,e)=>{const n=b.forwardRef(({className:r,...i},s)=>b.createElement(cee,{ref:s,iconNode:e,className:yB(`lucide-${aee(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=Et("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=Et("AlignCenter",[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=Et("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uee=Et("AlignRight",[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T2=Et("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OS=Et("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dee=Et("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=Et("Bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=Et("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=Et("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eo=Et("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=Et("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fee=Et("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hee=Et("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pee=Et("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A2=Et("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=Et("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=Et("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mee=Et("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gee=Et("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vee=Et("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yee=Et("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=Et("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=Et("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xee=Et("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wee=Et("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bee=Et("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const See=Et("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ee=Et("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eee=Et("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=Et("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cee=Et("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=Et("ListOrdered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=Et("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=Et("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mee=Et("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tee=Et("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aee=Et("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ree=Et("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kee=Et("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nee=Et("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=Et("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=Et("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Et("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=Et("Quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pee=Et("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dee=Et("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=Et("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iee=Et("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lee=Et("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=Et("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=Et("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=Et("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oee=Et("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fee=Et("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=Et("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uee=Et("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=Et("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kB=Et("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bee=Et("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zee=Et("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=Et("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),kT="-",jee=t=>{const e=Vee(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(kT);return a[0]===""&&a.length!==1&&a.shift(),NB(a,e)||Hee(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},NB=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?NB(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(kT);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},k2=/^\[(.+)\]$/,Hee=t=>{if(k2.test(t)){const e=k2.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},Vee=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return Wee(Object.entries(t.classGroups),n).forEach(([s,o])=>{CE(o,r,s,e)}),r},CE=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:N2(e,i);s.classGroupId=n;return}if(typeof i=="function"){if($ee(i)){CE(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{CE(o,N2(e,s),n,r)})})},N2=(t,e)=>{let n=t;return e.split(kT).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},$ee=t=>t.isThemeGetter,Wee=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[n,i]}):t,Gee=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},PB="!",Xee=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=a=>{const l=[];let c=0,u=0,d;for(let y=0;y<a.length;y++){let v=a[y];if(c===0){if(v===i&&(r||a.slice(y,y+s)===e)){l.push(a.slice(u,y)),u=y+s;continue}if(v==="/"){d=y;continue}}v==="["?c++:v==="]"&&c--}const h=l.length===0?a:a.substring(u),p=h.startsWith(PB),x=p?h.substring(1):h,w=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:w}};return n?a=>n({className:a,parseClassName:o}):o},qee=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},Kee=t=>({cache:Gee(t.cacheSize),parseClassName:Xee(t),...jee(t)}),Yee=/\s+/,Jee=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(Yee);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=n(c);let x=!!p,w=r(x?h.substring(0,p):h);if(!w){if(!x){a=c+(a.length>0?" "+a:a);continue}if(w=r(h),!w){a=c+(a.length>0?" "+a:a);continue}x=!1}const y=qee(u).join(":"),v=d?y+PB:y,S=v+w;if(s.includes(S))continue;s.push(S);const E=i(w,x);for(let C=0;C<E.length;++C){const T=E[C];s.push(v+T)}a=c+(a.length>0?" "+a:a)}return a};function Qee(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=DB(e))&&(r&&(r+=" "),r+=n);return r}const DB=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=DB(t[r]))&&(n&&(n+=" "),n+=e);return n};function Zee(t,...e){let n,r,i,s=o;function o(l){const c=e.reduce((u,d)=>d(u),t());return n=Kee(c),r=n.cache.get,i=n.cache.set,s=a,a(l)}function a(l){const c=r(l);if(c)return c;const u=Jee(l,n);return i(l,u),u}return function(){return s(Qee.apply(null,arguments))}}const zn=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},IB=/^\[(?:([a-z-]+):)?(.+)\]$/i,ete=/^\d+\/\d+$/,tte=new Set(["px","full","screen"]),nte=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rte=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ite=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ste=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ote=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ia=t=>Rf(t)||tte.has(t)||ete.test(t),Nl=t=>_h(t,"length",pte),Rf=t=>!!t&&!Number.isNaN(Number(t)),US=t=>_h(t,"number",Rf),dp=t=>!!t&&Number.isInteger(Number(t)),ate=t=>t.endsWith("%")&&Rf(t.slice(0,-1)),$t=t=>IB.test(t),Pl=t=>nte.test(t),lte=new Set(["length","size","percentage"]),cte=t=>_h(t,lte,LB),ute=t=>_h(t,"position",LB),dte=new Set(["image","url"]),fte=t=>_h(t,dte,gte),hte=t=>_h(t,"",mte),fp=()=>!0,_h=(t,e,n)=>{const r=IB.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},pte=t=>rte.test(t)&&!ite.test(t),LB=()=>!1,mte=t=>ste.test(t),gte=t=>ote.test(t),vte=()=>{const t=zn("colors"),e=zn("spacing"),n=zn("blur"),r=zn("brightness"),i=zn("borderColor"),s=zn("borderRadius"),o=zn("borderSpacing"),a=zn("borderWidth"),l=zn("contrast"),c=zn("grayscale"),u=zn("hueRotate"),d=zn("invert"),h=zn("gap"),p=zn("gradientColorStops"),x=zn("gradientColorStopPositions"),w=zn("inset"),y=zn("margin"),v=zn("opacity"),S=zn("padding"),E=zn("saturate"),C=zn("scale"),T=zn("sepia"),A=zn("skew"),k=zn("space"),R=zn("translate"),P=()=>["auto","contain","none"],M=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",$t,e],z=()=>[$t,e],H=()=>["",Ia,Nl],j=()=>["auto",Rf,$t],J=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],q=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",$t],D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>[Rf,$t];return{cacheSize:500,separator:":",theme:{colors:[fp],spacing:[Ia,Nl],blur:["none","",Pl,$t],brightness:ee(),borderColor:[t],borderRadius:["none","","full",Pl,$t],borderSpacing:z(),borderWidth:H(),contrast:ee(),grayscale:F(),hueRotate:ee(),invert:F(),gap:z(),gradientColorStops:[t],gradientColorStopPositions:[ate,Nl],inset:I(),margin:I(),opacity:ee(),padding:z(),saturate:ee(),scale:ee(),sepia:F(),skew:ee(),space:z(),translate:z()},classGroups:{aspect:[{aspect:["auto","square","video",$t]}],container:["container"],columns:[{columns:[Pl]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...J(),$t]}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",dp,$t]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",$t]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",dp,$t]}],"grid-cols":[{"grid-cols":[fp]}],"col-start-end":[{col:["auto",{span:["full",dp,$t]},$t]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[fp]}],"row-start-end":[{row:["auto",{span:[dp,$t]},$t]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",$t]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",$t]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",$t,e]}],"min-w":[{"min-w":[$t,e,"min","max","fit"]}],"max-w":[{"max-w":[$t,e,"none","full","min","max","fit","prose",{screen:[Pl]},Pl]}],h:[{h:[$t,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[$t,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[$t,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[$t,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Pl,Nl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",US]}],"font-family":[{font:[fp]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",$t]}],"line-clamp":[{"line-clamp":["none",Rf,US]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ia,$t]}],"list-image":[{"list-image":["none",$t]}],"list-style-type":[{list:["none","disc","decimal",$t]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ia,Nl]}],"underline-offset":[{"underline-offset":["auto",Ia,$t]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",$t]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",$t]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...J(),ute]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",cte]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fte]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...q(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...q()]}],"outline-offset":[{"outline-offset":[Ia,$t]}],"outline-w":[{outline:[Ia,Nl]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:H()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Ia,Nl]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Pl,hte]}],"shadow-color":[{shadow:[fp]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Pl,$t]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[E]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",$t]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",$t]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",$t]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[dp,$t]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",$t]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",$t]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",$t]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ia,Nl,US]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},yte=Zee(vte);function _t(...t){return yte(vB(t))}const xte=oee,OB=b.forwardRef(({className:t,...e},n)=>m.jsx(uB,{ref:n,className:_t("fixed bottom-0 z-[100] flex max-h-screen w-full flex-col p-4 right-0 md:max-w-[420px]",t),...e}));OB.displayName=uB.displayName;const wte=sg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-bottom-full data-[state=open]:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),FB=b.forwardRef(({className:t,variant:e,...n},r)=>m.jsx(dB,{ref:r,className:_t(wte({variant:e}),t),...n}));FB.displayName=dB.displayName;const bte=b.forwardRef(({className:t,...e},n)=>m.jsx(pB,{ref:n,className:_t("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));bte.displayName=pB.displayName;const UB=b.forwardRef(({className:t,...e},n)=>m.jsx(mB,{ref:n,className:_t("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:m.jsx(Fo,{className:"h-4 w-4"})}));UB.displayName=mB.displayName;const BB=b.forwardRef(({className:t,...e},n)=>m.jsx(fB,{ref:n,className:_t("text-sm font-semibold",t),...e}));BB.displayName=fB.displayName;const zB=b.forwardRef(({className:t,...e},n)=>m.jsx(hB,{ref:n,className:_t("text-sm opacity-90",t),...e}));zB.displayName=hB.displayName;function Ste(){const{toasts:t}=to();return m.jsxs(xte,{children:[t.map(function({id:e,title:n,description:r,action:i,...s}){return m.jsxs(FB,{...s,children:[m.jsxs("div",{className:"grid gap-1",children:[n&&m.jsx(BB,{children:n}),r&&m.jsx(zB,{children:r})]}),i,m.jsx(UB,{})]},e)}),m.jsx(OB,{})]})}var Fx=["light","dark"],NT="(prefers-color-scheme: dark)",_te=typeof window>"u",PT=b.createContext(void 0),Ete={setTheme:t=>{},themes:[]},no=()=>{var t;return(t=b.useContext(PT))!=null?t:Ete},Cte=t=>b.useContext(PT)?t.children:b.createElement(Tte,{...t}),Mte=["light","dark"],Tte=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:n=!0,enableColorScheme:r=!0,storageKey:i="theme",themes:s=Mte,defaultTheme:o=n?"system":"light",attribute:a="data-theme",value:l,children:c,nonce:u})=>{let[d,h]=b.useState(()=>P2(i,o)),[p,x]=b.useState(()=>P2(i)),w=l?Object.values(l):s,y=b.useCallback(C=>{let T=C;if(!T)return;C==="system"&&n&&(T=D2());let A=l?l[T]:T,k=e?Rte():null,R=document.documentElement;if(a==="class"?(R.classList.remove(...w),A&&R.classList.add(A)):A?R.setAttribute(a,A):R.removeAttribute(a),r){let P=Fx.includes(o)?o:null,M=Fx.includes(T)?T:P;R.style.colorScheme=M}k==null||k()},[]),v=b.useCallback(C=>{let T=typeof C=="function"?C(C):C;h(T);try{localStorage.setItem(i,T)}catch{}},[t]),S=b.useCallback(C=>{let T=D2(C);x(T),d==="system"&&n&&!t&&y("system")},[d,t]);b.useEffect(()=>{let C=window.matchMedia(NT);return C.addListener(S),S(C),()=>C.removeListener(S)},[S]),b.useEffect(()=>{let C=T=>{if(T.key!==i)return;let A=T.newValue||o;v(A)};return window.addEventListener("storage",C),()=>window.removeEventListener("storage",C)},[v]),b.useEffect(()=>{y(t??d)},[t,d]);let E=b.useMemo(()=>({theme:d,setTheme:v,forcedTheme:t,resolvedTheme:d==="system"?p:d,themes:n?[...s,"system"]:s,systemTheme:n?p:void 0}),[d,v,t,p,n,s]);return b.createElement(PT.Provider,{value:E},b.createElement(Ate,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:n,enableColorScheme:r,storageKey:i,themes:s,defaultTheme:o,attribute:a,value:l,children:c,attrs:w,nonce:u}),c)},Ate=b.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:s,value:o,attrs:a,nonce:l})=>{let c=s==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${a.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=i?Fx.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(x,w=!1,y=!0)=>{let v=o?o[x]:x,S=w?x+"|| ''":`'${v}'`,E="";return i&&y&&!w&&Fx.includes(x)&&(E+=`d.style.colorScheme = '${x}';`),n==="class"?w||v?E+=`c.add(${S})`:E+="null":v&&(E+=`d[s](n,${S})`),E},p=t?`!function(){${u}${h(t)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${c})){var t='${NT}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}${c?"":"else{"+h(s,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${h(o?"x[e]":"e",!0)}}else{${h(s,!1,!1)};}${d}}catch(t){}}();`;return b.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:p}})}),P2=(t,e)=>{if(_te)return;let n;try{n=localStorage.getItem(t)||void 0}catch{}return n||e},Rte=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},D2=t=>(t||(t=window.matchMedia(NT)),t.matches?"dark":"light"),kte=t=>{switch(t){case"success":return Dte;case"info":return Lte;case"warning":return Ite;case"error":return Ote;default:return null}},Nte=Array(12).fill(0),Pte=({visible:t,className:e})=>Me.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},Me.createElement("div",{className:"sonner-spinner"},Nte.map((n,r)=>Me.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Dte=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Ite=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Lte=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Ote=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Me.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Fte=Me.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Me.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Me.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Ute=()=>{let[t,e]=Me.useState(document.hidden);return Me.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},ME=1,Bte=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...r}=t,i=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:ME++,s=this.toasts.find(a=>a.id===i),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(a=>a.id===i?(this.publish({...a,...t,id:i,title:n}),{...a,...t,id:i,dismissible:o,title:n}):a):this.addToast({title:n,...r,dismissible:o,id:i}),i},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let r=t instanceof Promise?t:t(),i=n!==void 0,s,o=r.then(async l=>{if(s=["resolve",l],Me.isValidElement(l))i=!1,this.create({id:n,type:"default",message:l});else if(jte(l)&&!l.ok){i=!1;let c=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description;this.create({id:n,type:"error",message:c,description:u})}else if(e.success!==void 0){i=!1;let c=typeof e.success=="function"?await e.success(l):e.success,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"success",message:c,description:u})}}).catch(async l=>{if(s=["reject",l],e.error!==void 0){i=!1;let c=typeof e.error=="function"?await e.error(l):e.error,u=typeof e.description=="function"?await e.description(l):e.description;this.create({id:n,type:"error",message:c,description:u})}}).finally(()=>{var l;i&&(this.dismiss(n),n=void 0),(l=e.finally)==null||l.call(e)}),a=()=>new Promise((l,c)=>o.then(()=>s[0]==="reject"?c(s[1]):l(s[1])).catch(c));return typeof n!="string"&&typeof n!="number"?{unwrap:a}:Object.assign(n,{unwrap:a})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||ME++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Hi=new Bte,zte=(t,e)=>{let n=(e==null?void 0:e.id)||ME++;return Hi.addToast({title:t,...e,id:n}),n},jte=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",Hte=zte,Vte=()=>Hi.toasts,$te=()=>Hi.getActiveToasts();Object.assign(Hte,{success:Hi.success,info:Hi.info,warning:Hi.warning,error:Hi.error,custom:Hi.custom,message:Hi.message,promise:Hi.promise,dismiss:Hi.dismiss,loading:Hi.loading},{getHistory:Vte,getToasts:$te});function Wte(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}Wte(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function zv(t){return t.label!==void 0}var Gte=3,Xte="32px",qte="16px",I2=4e3,Kte=356,Yte=14,Jte=20,Qte=200;function uo(...t){return t.filter(Boolean).join(" ")}function Zte(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var ene=t=>{var e,n,r,i,s,o,a,l,c,u,d;let{invert:h,toast:p,unstyled:x,interacting:w,setHeights:y,visibleToasts:v,heights:S,index:E,toasts:C,expanded:T,removeToast:A,defaultRichColors:k,closeButton:R,style:P,cancelButtonStyle:M,actionButtonStyle:I,className:z="",descriptionClassName:H="",duration:j,position:J,gap:q,loadingIcon:Q,expandByDefault:O,classNames:F,icons:D,closeButtonAriaLabel:ee="Close toast",pauseWhenPageIsHidden:W}=t,[B,K]=Me.useState(null),[ie,oe]=Me.useState(null),[Z,pe]=Me.useState(!1),[ye,ge]=Me.useState(!1),[je,We]=Me.useState(!1),[it,te]=Me.useState(!1),[pt,Be]=Me.useState(!1),[ut,Xe]=Me.useState(0),[wt,Ae]=Me.useState(0),Pe=Me.useRef(p.duration||j||I2),ot=Me.useRef(null),Y=Me.useRef(null),L=E===0,ne=E+1<=v,X=p.type,se=p.dismissible!==!1,ae=p.className||"",Ce=p.descriptionClassName||"",Re=Me.useMemo(()=>S.findIndex(Ie=>Ie.toastId===p.id)||0,[S,p.id]),ue=Me.useMemo(()=>{var Ie;return(Ie=p.closeButton)!=null?Ie:R},[p.closeButton,R]),Te=Me.useMemo(()=>p.duration||j||I2,[p.duration,j]),de=Me.useRef(0),_e=Me.useRef(0),Qe=Me.useRef(0),Ye=Me.useRef(null),[qe,mt]=J.split("-"),ce=Me.useMemo(()=>S.reduce((Ie,tt,ft)=>ft>=Re?Ie:Ie+tt.height,0),[S,Re]),st=Ute(),He=p.invert||h,et=X==="loading";_e.current=Me.useMemo(()=>Re*q+ce,[Re,ce]),Me.useEffect(()=>{Pe.current=Te},[Te]),Me.useEffect(()=>{pe(!0)},[]),Me.useEffect(()=>{let Ie=Y.current;if(Ie){let tt=Ie.getBoundingClientRect().height;return Ae(tt),y(ft=>[{toastId:p.id,height:tt,position:p.position},...ft]),()=>y(ft=>ft.filter(Tt=>Tt.toastId!==p.id))}},[y,p.id]),Me.useLayoutEffect(()=>{if(!Z)return;let Ie=Y.current,tt=Ie.style.height;Ie.style.height="auto";let ft=Ie.getBoundingClientRect().height;Ie.style.height=tt,Ae(ft),y(Tt=>Tt.find(cn=>cn.toastId===p.id)?Tt.map(cn=>cn.toastId===p.id?{...cn,height:ft}:cn):[{toastId:p.id,height:ft,position:p.position},...Tt])},[Z,p.title,p.description,y,p.id]);let De=Me.useCallback(()=>{ge(!0),Xe(_e.current),y(Ie=>Ie.filter(tt=>tt.toastId!==p.id)),setTimeout(()=>{A(p)},Qte)},[p,A,y,_e]);Me.useEffect(()=>{if(p.promise&&X==="loading"||p.duration===1/0||p.type==="loading")return;let Ie;return T||w||W&&st?(()=>{if(Qe.current<de.current){let tt=new Date().getTime()-de.current;Pe.current=Pe.current-tt}Qe.current=new Date().getTime()})():Pe.current!==1/0&&(de.current=new Date().getTime(),Ie=setTimeout(()=>{var tt;(tt=p.onAutoClose)==null||tt.call(p,p),De()},Pe.current)),()=>clearTimeout(Ie)},[T,w,p,X,W,st,De]),Me.useEffect(()=>{p.delete&&De()},[De,p.delete]);function ke(){var Ie,tt,ft;return D!=null&&D.loading?Me.createElement("div",{className:uo(F==null?void 0:F.loader,(Ie=p==null?void 0:p.classNames)==null?void 0:Ie.loader,"sonner-loader"),"data-visible":X==="loading"},D.loading):Q?Me.createElement("div",{className:uo(F==null?void 0:F.loader,(tt=p==null?void 0:p.classNames)==null?void 0:tt.loader,"sonner-loader"),"data-visible":X==="loading"},Q):Me.createElement(Pte,{className:uo(F==null?void 0:F.loader,(ft=p==null?void 0:p.classNames)==null?void 0:ft.loader),visible:X==="loading"})}return Me.createElement("li",{tabIndex:0,ref:Y,className:uo(z,ae,F==null?void 0:F.toast,(e=p==null?void 0:p.classNames)==null?void 0:e.toast,F==null?void 0:F.default,F==null?void 0:F[X],(n=p==null?void 0:p.classNames)==null?void 0:n[X]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:k,"data-styled":!(p.jsx||p.unstyled||x),"data-mounted":Z,"data-promise":!!p.promise,"data-swiped":pt,"data-removed":ye,"data-visible":ne,"data-y-position":qe,"data-x-position":mt,"data-index":E,"data-front":L,"data-swiping":je,"data-dismissible":se,"data-type":X,"data-invert":He,"data-swipe-out":it,"data-swipe-direction":ie,"data-expanded":!!(T||O&&Z),style:{"--index":E,"--toasts-before":E,"--z-index":C.length-E,"--offset":`${ye?ut:_e.current}px`,"--initial-height":O?"auto":`${wt}px`,...P,...p.style},onDragEnd:()=>{We(!1),K(null),Ye.current=null},onPointerDown:Ie=>{et||!se||(ot.current=new Date,Xe(_e.current),Ie.target.setPointerCapture(Ie.pointerId),Ie.target.tagName!=="BUTTON"&&(We(!0),Ye.current={x:Ie.clientX,y:Ie.clientY}))},onPointerUp:()=>{var Ie,tt,ft,Tt;if(it||!se)return;Ye.current=null;let cn=Number(((Ie=Y.current)==null?void 0:Ie.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),qt=Number(((tt=Y.current)==null?void 0:tt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Dn=new Date().getTime()-((ft=ot.current)==null?void 0:ft.getTime()),bn=B==="x"?cn:qt,hn=Math.abs(bn)/Dn;if(Math.abs(bn)>=Jte||hn>.11){Xe(_e.current),(Tt=p.onDismiss)==null||Tt.call(p,p),oe(B==="x"?cn>0?"right":"left":qt>0?"down":"up"),De(),te(!0),Be(!1);return}We(!1),K(null)},onPointerMove:Ie=>{var tt,ft,Tt,cn;if(!Ye.current||!se||((tt=window.getSelection())==null?void 0:tt.toString().length)>0)return;let qt=Ie.clientY-Ye.current.y,Dn=Ie.clientX-Ye.current.x,bn=(ft=t.swipeDirections)!=null?ft:Zte(J);!B&&(Math.abs(Dn)>1||Math.abs(qt)>1)&&K(Math.abs(Dn)>Math.abs(qt)?"x":"y");let hn={x:0,y:0};B==="y"?(bn.includes("top")||bn.includes("bottom"))&&(bn.includes("top")&&qt<0||bn.includes("bottom")&&qt>0)&&(hn.y=qt):B==="x"&&(bn.includes("left")||bn.includes("right"))&&(bn.includes("left")&&Dn<0||bn.includes("right")&&Dn>0)&&(hn.x=Dn),(Math.abs(hn.x)>0||Math.abs(hn.y)>0)&&Be(!0),(Tt=Y.current)==null||Tt.style.setProperty("--swipe-amount-x",`${hn.x}px`),(cn=Y.current)==null||cn.style.setProperty("--swipe-amount-y",`${hn.y}px`)}},ue&&!p.jsx?Me.createElement("button",{"aria-label":ee,"data-disabled":et,"data-close-button":!0,onClick:et||!se?()=>{}:()=>{var Ie;De(),(Ie=p.onDismiss)==null||Ie.call(p,p)},className:uo(F==null?void 0:F.closeButton,(i=p==null?void 0:p.classNames)==null?void 0:i.closeButton)},(s=D==null?void 0:D.close)!=null?s:Fte):null,p.jsx||b.isValidElement(p.title)?p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title:Me.createElement(Me.Fragment,null,X||p.icon||p.promise?Me.createElement("div",{"data-icon":"",className:uo(F==null?void 0:F.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||ke():null,p.type!=="loading"?p.icon||(D==null?void 0:D[X])||kte(X):null):null,Me.createElement("div",{"data-content":"",className:uo(F==null?void 0:F.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},Me.createElement("div",{"data-title":"",className:uo(F==null?void 0:F.title,(l=p==null?void 0:p.classNames)==null?void 0:l.title)},typeof p.title=="function"?p.title():p.title),p.description?Me.createElement("div",{"data-description":"",className:uo(H,Ce,F==null?void 0:F.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},typeof p.description=="function"?p.description():p.description):null),b.isValidElement(p.cancel)?p.cancel:p.cancel&&zv(p.cancel)?Me.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||M,onClick:Ie=>{var tt,ft;zv(p.cancel)&&se&&((ft=(tt=p.cancel).onClick)==null||ft.call(tt,Ie),De())},className:uo(F==null?void 0:F.cancelButton,(u=p==null?void 0:p.classNames)==null?void 0:u.cancelButton)},p.cancel.label):null,b.isValidElement(p.action)?p.action:p.action&&zv(p.action)?Me.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||I,onClick:Ie=>{var tt,ft;zv(p.action)&&((ft=(tt=p.action).onClick)==null||ft.call(tt,Ie),!Ie.defaultPrevented&&De())},className:uo(F==null?void 0:F.actionButton,(d=p==null?void 0:p.classNames)==null?void 0:d.actionButton)},p.action.label):null))};function L2(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function tne(t,e){let n={};return[t,e].forEach((r,i)=>{let s=i===1,o=s?"--mobile-offset":"--offset",a=s?qte:Xte;function l(c){["top","right","bottom","left"].forEach(u=>{n[`${o}-${u}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=a:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):l(a)}),n}var nne=b.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:a,offset:l,mobileOffset:c,theme:u="light",richColors:d,duration:h,style:p,visibleToasts:x=Gte,toastOptions:w,dir:y=L2(),gap:v=Yte,loadingIcon:S,icons:E,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:T}=t,[A,k]=Me.useState([]),R=Me.useMemo(()=>Array.from(new Set([r].concat(A.filter(W=>W.position).map(W=>W.position)))),[A,r]),[P,M]=Me.useState([]),[I,z]=Me.useState(!1),[H,j]=Me.useState(!1),[J,q]=Me.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Q=Me.useRef(null),O=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=Me.useRef(null),D=Me.useRef(!1),ee=Me.useCallback(W=>{k(B=>{var K;return(K=B.find(ie=>ie.id===W.id))!=null&&K.delete||Hi.dismiss(W.id),B.filter(({id:ie})=>ie!==W.id)})},[]);return Me.useEffect(()=>Hi.subscribe(W=>{if(W.dismiss){k(B=>B.map(K=>K.id===W.id?{...K,delete:!0}:K));return}setTimeout(()=>{wT.flushSync(()=>{k(B=>{let K=B.findIndex(ie=>ie.id===W.id);return K!==-1?[...B.slice(0,K),{...B[K],...W},...B.slice(K+1)]:[W,...B]})})})}),[]),Me.useEffect(()=>{if(u!=="system"){q(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?q("dark"):q("light")),typeof window>"u")return;let W=window.matchMedia("(prefers-color-scheme: dark)");try{W.addEventListener("change",({matches:B})=>{q(B?"dark":"light")})}catch{W.addListener(({matches:K})=>{try{q(K?"dark":"light")}catch(ie){console.error(ie)}})}},[u]),Me.useEffect(()=>{A.length<=1&&z(!1)},[A]),Me.useEffect(()=>{let W=B=>{var K,ie;i.every(oe=>B[oe]||B.code===oe)&&(z(!0),(K=Q.current)==null||K.focus()),B.code==="Escape"&&(document.activeElement===Q.current||(ie=Q.current)!=null&&ie.contains(document.activeElement))&&z(!1)};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[i]),Me.useEffect(()=>{if(Q.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,D.current=!1)}},[Q.current]),Me.createElement("section",{ref:e,"aria-label":`${C} ${O}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((W,B)=>{var K;let[ie,oe]=W.split("-");return A.length?Me.createElement("ol",{key:W,dir:y==="auto"?L2():y,tabIndex:-1,ref:Q,className:a,"data-sonner-toaster":!0,"data-theme":J,"data-y-position":ie,"data-lifted":I&&A.length>1&&!s,"data-x-position":oe,style:{"--front-toast-height":`${((K=P[0])==null?void 0:K.height)||0}px`,"--width":`${Kte}px`,"--gap":`${v}px`,...p,...tne(l,c)},onBlur:Z=>{D.current&&!Z.currentTarget.contains(Z.relatedTarget)&&(D.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||D.current||(D.current=!0,F.current=Z.relatedTarget)},onMouseEnter:()=>z(!0),onMouseMove:()=>z(!0),onMouseLeave:()=>{H||z(!1)},onDragEnd:()=>z(!1),onPointerDown:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||j(!0)},onPointerUp:()=>j(!1)},A.filter(Z=>!Z.position&&B===0||Z.position===W).map((Z,pe)=>{var ye,ge;return Me.createElement(ene,{key:Z.id,icons:E,index:pe,toast:Z,defaultRichColors:d,duration:(ye=w==null?void 0:w.duration)!=null?ye:h,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:n,visibleToasts:x,closeButton:(ge=w==null?void 0:w.closeButton)!=null?ge:o,interacting:H,position:W,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,removeToast:ee,toasts:A.filter(je=>je.position==Z.position),heights:P.filter(je=>je.position==Z.position),setHeights:M,expandByDefault:s,gap:v,loadingIcon:S,expanded:I,pauseWhenPageIsHidden:T,swipeDirections:t.swipeDirections})})):null}))});const rne=({...t})=>{const{theme:e="system"}=no();return m.jsx(nne,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var ine=RM[" useId ".trim().toString()]||(()=>{}),sne=0;function Xr(t){const[e,n]=b.useState(ine());return Pr(()=>{n(r=>r??String(sne++))},[t]),e?`radix-${e}`:""}const one=["top","right","bottom","left"],kc=Math.min,gs=Math.max,Ux=Math.round,jv=Math.floor,da=t=>({x:t,y:t}),ane={left:"right",right:"left",bottom:"top",top:"bottom"},lne={start:"end",end:"start"};function TE(t,e,n){return gs(t,kc(e,n))}function ul(t,e){return typeof t=="function"?t(e):t}function dl(t){return t.split("-")[0]}function Eh(t){return t.split("-")[1]}function DT(t){return t==="x"?"y":"x"}function IT(t){return t==="y"?"height":"width"}function oa(t){return["top","bottom"].includes(dl(t))?"y":"x"}function LT(t){return DT(oa(t))}function cne(t,e,n){n===void 0&&(n=!1);const r=Eh(t),i=LT(t),s=IT(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Bx(o)),[o,Bx(o)]}function une(t){const e=Bx(t);return[AE(t),e,AE(e)]}function AE(t){return t.replace(/start|end/g,e=>lne[e])}function dne(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function fne(t,e,n,r){const i=Eh(t);let s=dne(dl(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(AE)))),s}function Bx(t){return t.replace(/left|right|bottom|top/g,e=>ane[e])}function hne(t){return{top:0,right:0,bottom:0,left:0,...t}}function jB(t){return typeof t!="number"?hne(t):{top:t,right:t,bottom:t,left:t}}function zx(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function O2(t,e,n){let{reference:r,floating:i}=t;const s=oa(e),o=LT(e),a=IT(o),l=dl(e),c=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let p;switch(l){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(Eh(e)){case"start":p[o]-=h*(n&&c?-1:1);break;case"end":p[o]+=h*(n&&c?-1:1);break}return p}const pne=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=O2(c,r,l),h=r,p={},x=0;for(let w=0;w<a.length;w++){const{name:y,fn:v}=a[w],{x:S,y:E,data:C,reset:T}=await v({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=S??u,d=E??d,p={...p,[y]:{...p[y],...C}},T&&x<=50&&(x++,typeof T=="object"&&(T.placement&&(h=T.placement),T.rects&&(c=T.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):T.rects),{x:u,y:d}=O2(c,h,l)),w=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:p}};async function wm(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=ul(e,t),x=jB(p),y=a[h?d==="floating"?"reference":"floating":d],v=zx(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),S=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),C=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},T=zx(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:S,offsetParent:E,strategy:l}):S);return{top:(v.top-T.top+x.top)/C.y,bottom:(T.bottom-v.bottom+x.bottom)/C.y,left:(v.left-T.left+x.left)/C.x,right:(T.right-v.right+x.right)/C.x}}const mne=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=ul(t,e)||{};if(c==null)return{};const d=jB(u),h={x:n,y:r},p=LT(i),x=IT(p),w=await o.getDimensions(c),y=p==="y",v=y?"top":"left",S=y?"bottom":"right",E=y?"clientHeight":"clientWidth",C=s.reference[x]+s.reference[p]-h[p]-s.floating[x],T=h[p]-s.reference[p],A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let k=A?A[E]:0;(!k||!await(o.isElement==null?void 0:o.isElement(A)))&&(k=a.floating[E]||s.floating[x]);const R=C/2-T/2,P=k/2-w[x]/2-1,M=kc(d[v],P),I=kc(d[S],P),z=M,H=k-w[x]-I,j=k/2-w[x]/2+R,J=TE(z,j,H),q=!l.arrow&&Eh(i)!=null&&j!==J&&s.reference[x]/2-(j<z?M:I)-w[x]/2<0,Q=q?j<z?j-z:j-H:0;return{[p]:h[p]+Q,data:{[p]:J,centerOffset:j-J-Q,...q&&{alignmentOffset:Q}},reset:q}}}),gne=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:w=!0,...y}=ul(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=dl(i),S=oa(a),E=dl(a)===a,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),T=h||(E||!w?[Bx(a)]:une(a)),A=x!=="none";!h&&A&&T.push(...fne(a,w,x,C));const k=[a,...T],R=await wm(e,y),P=[];let M=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&P.push(R[v]),d){const j=cne(i,o,C);P.push(R[j[0]],R[j[1]])}if(M=[...M,{placement:i,overflows:P}],!P.every(j=>j<=0)){var I,z;const j=(((I=s.flip)==null?void 0:I.index)||0)+1,J=k[j];if(J&&(!(d==="alignment"?S!==oa(J):!1)||M.every(O=>O.overflows[0]>0&&oa(O.placement)===S)))return{data:{index:j,overflows:M},reset:{placement:J}};let q=(z=M.filter(Q=>Q.overflows[0]<=0).sort((Q,O)=>Q.overflows[1]-O.overflows[1])[0])==null?void 0:z.placement;if(!q)switch(p){case"bestFit":{var H;const Q=(H=M.filter(O=>{if(A){const F=oa(O.placement);return F===S||F==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(F=>F>0).reduce((F,D)=>F+D,0)]).sort((O,F)=>O[1]-F[1])[0])==null?void 0:H[0];Q&&(q=Q);break}case"initialPlacement":q=a;break}if(i!==q)return{reset:{placement:q}}}return{}}}};function F2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function U2(t){return one.some(e=>t[e]>=0)}const vne=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=ul(t,e);switch(r){case"referenceHidden":{const s=await wm(e,{...i,elementContext:"reference"}),o=F2(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:U2(o)}}}case"escaped":{const s=await wm(e,{...i,altBoundary:!0}),o=F2(s,n.floating);return{data:{escapedOffsets:o,escaped:U2(o)}}}default:return{}}}}};async function yne(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=dl(n),a=Eh(n),l=oa(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=ul(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:x}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof x=="number"&&(p=a==="end"?x*-1:x),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const xne=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await yne(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},wne=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:v,y:S}=y;return{x:v,y:S}}},...l}=ul(t,e),c={x:n,y:r},u=await wm(e,l),d=oa(dl(i)),h=DT(d);let p=c[h],x=c[d];if(s){const y=h==="y"?"top":"left",v=h==="y"?"bottom":"right",S=p+u[y],E=p-u[v];p=TE(S,p,E)}if(o){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",S=x+u[y],E=x-u[v];x=TE(S,x,E)}const w=a.fn({...e,[h]:p,[d]:x});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[h]:s,[d]:o}}}}}},bne=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=ul(t,e),u={x:n,y:r},d=oa(i),h=DT(d);let p=u[h],x=u[d];const w=ul(a,e),y=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(l){const E=h==="y"?"height":"width",C=s.reference[h]-s.floating[E]+y.mainAxis,T=s.reference[h]+s.reference[E]-y.mainAxis;p<C?p=C:p>T&&(p=T)}if(c){var v,S;const E=h==="y"?"width":"height",C=["top","left"].includes(dl(i)),T=s.reference[d]-s.floating[E]+(C&&((v=o.offset)==null?void 0:v[d])||0)+(C?0:y.crossAxis),A=s.reference[d]+s.reference[E]+(C?0:((S=o.offset)==null?void 0:S[d])||0)-(C?y.crossAxis:0);x<T?x=T:x>A&&(x=A)}return{[h]:p,[d]:x}}}},Sne=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=ul(t,e),u=await wm(e,c),d=dl(i),h=Eh(i),p=oa(i)==="y",{width:x,height:w}=s.floating;let y,v;d==="top"||d==="bottom"?(y=d,v=h===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,y=h==="end"?"top":"bottom");const S=w-u.top-u.bottom,E=x-u.left-u.right,C=kc(w-u[y],S),T=kc(x-u[v],E),A=!e.middlewareData.shift;let k=C,R=T;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(R=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=S),A&&!h){const M=gs(u.left,0),I=gs(u.right,0),z=gs(u.top,0),H=gs(u.bottom,0);p?R=x-2*(M!==0||I!==0?M+I:gs(u.left,u.right)):k=w-2*(z!==0||H!==0?z+H:gs(u.top,u.bottom))}await l({...e,availableWidth:R,availableHeight:k});const P=await o.getDimensions(a.floating);return x!==P.width||w!==P.height?{reset:{rects:!0}}:{}}}};function K0(){return typeof window<"u"}function Ch(t){return HB(t)?(t.nodeName||"").toLowerCase():"#document"}function bs(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ba(t){var e;return(e=(HB(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function HB(t){return K0()?t instanceof Node||t instanceof bs(t).Node:!1}function Po(t){return K0()?t instanceof Element||t instanceof bs(t).Element:!1}function ma(t){return K0()?t instanceof HTMLElement||t instanceof bs(t).HTMLElement:!1}function B2(t){return!K0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof bs(t).ShadowRoot}function cg(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Do(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function _ne(t){return["table","td","th"].includes(Ch(t))}function Y0(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function OT(t){const e=FT(),n=Po(t)?Do(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Ene(t){let e=Nc(t);for(;ma(e)&&!th(e);){if(OT(e))return e;if(Y0(e))return null;e=Nc(e)}return null}function FT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function th(t){return["html","body","#document"].includes(Ch(t))}function Do(t){return bs(t).getComputedStyle(t)}function J0(t){return Po(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Nc(t){if(Ch(t)==="html")return t;const e=t.assignedSlot||t.parentNode||B2(t)&&t.host||ba(t);return B2(e)?e.host:e}function VB(t){const e=Nc(t);return th(e)?t.ownerDocument?t.ownerDocument.body:t.body:ma(e)&&cg(e)?e:VB(e)}function bm(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=VB(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=bs(i);if(s){const a=RE(o);return e.concat(o,o.visualViewport||[],cg(i)?i:[],a&&n?bm(a):[])}return e.concat(i,bm(i,[],n))}function RE(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function $B(t){const e=Do(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ma(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=Ux(n)!==s||Ux(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function UT(t){return Po(t)?t:t.contextElement}function kf(t){const e=UT(t);if(!ma(e))return da(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=$B(e);let o=(s?Ux(n.width):n.width)/r,a=(s?Ux(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Cne=da(0);function WB(t){const e=bs(t);return!FT()||!e.visualViewport?Cne:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Mne(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==bs(t)?!1:e}function ed(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=UT(t);let o=da(1);e&&(r?Po(r)&&(o=kf(r)):o=kf(t));const a=Mne(s,n,r)?WB(s):da(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const h=bs(s),p=r&&Po(r)?bs(r):r;let x=h,w=RE(x);for(;w&&r&&p!==x;){const y=kf(w),v=w.getBoundingClientRect(),S=Do(w),E=v.left+(w.clientLeft+parseFloat(S.paddingLeft))*y.x,C=v.top+(w.clientTop+parseFloat(S.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,d*=y.y,l+=E,c+=C,x=bs(w),w=RE(x)}}return zx({width:u,height:d,x:l,y:c})}function BT(t,e){const n=J0(t).scrollLeft;return e?e.left+n:ed(ba(t)).left+n}function GB(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:BT(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function Tne(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=ba(r),a=e?Y0(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=da(1);const u=da(0),d=ma(r);if((d||!d&&!s)&&((Ch(r)!=="body"||cg(o))&&(l=J0(r)),ma(r))){const p=ed(r);c=kf(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const h=o&&!d&&!s?GB(o,l,!0):da(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function Ane(t){return Array.from(t.getClientRects())}function Rne(t){const e=ba(t),n=J0(t),r=t.ownerDocument.body,i=gs(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=gs(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+BT(t);const a=-n.scrollTop;return Do(r).direction==="rtl"&&(o+=gs(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function kne(t,e){const n=bs(t),r=ba(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=FT();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function Nne(t,e){const n=ed(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=ma(t)?kf(t):da(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function z2(t,e,n){let r;if(e==="viewport")r=kne(t,n);else if(e==="document")r=Rne(ba(t));else if(Po(e))r=Nne(e,n);else{const i=WB(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return zx(r)}function XB(t,e){const n=Nc(t);return n===e||!Po(n)||th(n)?!1:Do(n).position==="fixed"||XB(n,e)}function Pne(t,e){const n=e.get(t);if(n)return n;let r=bm(t,[],!1).filter(a=>Po(a)&&Ch(a)!=="body"),i=null;const s=Do(t).position==="fixed";let o=s?Nc(t):t;for(;Po(o)&&!th(o);){const a=Do(o),l=OT(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||cg(o)&&!l&&XB(t,o))?r=r.filter(u=>u!==o):i=a,o=Nc(o)}return e.set(t,r),r}function Dne(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Y0(e)?[]:Pne(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,u)=>{const d=z2(e,u,i);return c.top=gs(d.top,c.top),c.right=kc(d.right,c.right),c.bottom=kc(d.bottom,c.bottom),c.left=gs(d.left,c.left),c},z2(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Ine(t){const{width:e,height:n}=$B(t);return{width:e,height:n}}function Lne(t,e,n){const r=ma(e),i=ba(e),s=n==="fixed",o=ed(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=da(0);function c(){l.x=BT(i)}if(r||!r&&!s)if((Ch(e)!=="body"||cg(i))&&(a=J0(e)),r){const p=ed(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&c();s&&!r&&i&&c();const u=i&&!r&&!s?GB(i,a):da(0),d=o.left+a.scrollLeft-l.x-u.x,h=o.top+a.scrollTop-l.y-u.y;return{x:d,y:h,width:o.width,height:o.height}}function BS(t){return Do(t).position==="static"}function j2(t,e){if(!ma(t)||Do(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ba(t)===n&&(n=n.ownerDocument.body),n}function qB(t,e){const n=bs(t);if(Y0(t))return n;if(!ma(t)){let i=Nc(t);for(;i&&!th(i);){if(Po(i)&&!BS(i))return i;i=Nc(i)}return n}let r=j2(t,e);for(;r&&_ne(r)&&BS(r);)r=j2(r,e);return r&&th(r)&&BS(r)&&!OT(r)?n:r||Ene(t)||n}const One=async function(t){const e=this.getOffsetParent||qB,n=this.getDimensions,r=await n(t.floating);return{reference:Lne(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Fne(t){return Do(t).direction==="rtl"}const Une={convertOffsetParentRelativeRectToViewportRelativeRect:Tne,getDocumentElement:ba,getClippingRect:Dne,getOffsetParent:qB,getElementRects:One,getClientRects:Ane,getDimensions:Ine,getScale:kf,isElement:Po,isRTL:Fne};function KB(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Bne(t,e){let n=null,r;const i=ba(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=c;if(a||e(),!h||!p)return;const x=jv(d),w=jv(i.clientWidth-(u+h)),y=jv(i.clientHeight-(d+p)),v=jv(u),E={rootMargin:-x+"px "+-w+"px "+-y+"px "+-v+"px",threshold:gs(0,kc(1,l))||1};let C=!0;function T(A){const k=A[0].intersectionRatio;if(k!==l){if(!C)return o();k?o(!1,k):r=setTimeout(()=>{o(!1,1e-7)},1e3)}k===1&&!KB(c,t.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(T,{...E,root:i.ownerDocument})}catch{n=new IntersectionObserver(T,E)}n.observe(t)}return o(!0),s}function zne(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=UT(t),u=i||s?[...c?bm(c):[],...bm(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=c&&a?Bne(c,n):null;let h=-1,p=null;o&&(p=new ResizeObserver(v=>{let[S]=v;S&&S.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var E;(E=p)==null||E.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let x,w=l?ed(t):null;l&&y();function y(){const v=ed(t);w&&!KB(w,v)&&n(),w=v,x=requestAnimationFrame(y)}return n(),()=>{var v;u.forEach(S=>{i&&S.removeEventListener("scroll",n),s&&S.removeEventListener("resize",n)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(x)}}const jne=xne,Hne=wne,Vne=gne,$ne=Sne,Wne=vne,H2=mne,Gne=bne,Xne=(t,e,n)=>{const r=new Map,i={platform:Une,...n},s={...i.platform,_c:r};return pne(t,e,{...i,platform:s})};var qne=typeof document<"u",Kne=function(){},Xy=qne?b.useLayoutEffect:Kne;function jx(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!jx(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!jx(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function YB(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function V2(t,e){const n=YB(t);return Math.round(e*n)/n}function zS(t){const e=b.useRef(t);return Xy(()=>{e.current=t}),e}function Yne(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,p]=b.useState(r);jx(h,r)||p(r);const[x,w]=b.useState(null),[y,v]=b.useState(null),S=b.useCallback(O=>{O!==A.current&&(A.current=O,w(O))},[]),E=b.useCallback(O=>{O!==k.current&&(k.current=O,v(O))},[]),C=s||x,T=o||y,A=b.useRef(null),k=b.useRef(null),R=b.useRef(u),P=l!=null,M=zS(l),I=zS(i),z=zS(c),H=b.useCallback(()=>{if(!A.current||!k.current)return;const O={placement:e,strategy:n,middleware:h};I.current&&(O.platform=I.current),Xne(A.current,k.current,O).then(F=>{const D={...F,isPositioned:z.current!==!1};j.current&&!jx(R.current,D)&&(R.current=D,qs.flushSync(()=>{d(D)}))})},[h,e,n,I,z]);Xy(()=>{c===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,d(O=>({...O,isPositioned:!1})))},[c]);const j=b.useRef(!1);Xy(()=>(j.current=!0,()=>{j.current=!1}),[]),Xy(()=>{if(C&&(A.current=C),T&&(k.current=T),C&&T){if(M.current)return M.current(C,T,H);H()}},[C,T,H,M,P]);const J=b.useMemo(()=>({reference:A,floating:k,setReference:S,setFloating:E}),[S,E]),q=b.useMemo(()=>({reference:C,floating:T}),[C,T]),Q=b.useMemo(()=>{const O={position:n,left:0,top:0};if(!q.floating)return O;const F=V2(q.floating,u.x),D=V2(q.floating,u.y);return a?{...O,transform:"translate("+F+"px, "+D+"px)",...YB(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:D}},[n,a,q.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:H,refs:J,elements:q,floatingStyles:Q}),[u,H,J,q,Q])}const Jne=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?H2({element:r.current,padding:i}).fn(n):{}:r?H2({element:r,padding:i}).fn(n):{}}}},Qne=(t,e)=>({...jne(t),options:[t,e]}),Zne=(t,e)=>({...Hne(t),options:[t,e]}),ere=(t,e)=>({...Gne(t),options:[t,e]}),tre=(t,e)=>({...Vne(t),options:[t,e]}),nre=(t,e)=>({...$ne(t),options:[t,e]}),rre=(t,e)=>({...Wne(t),options:[t,e]}),ire=(t,e)=>({...Jne(t),options:[t,e]});var sre="Arrow",JB=b.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return m.jsx(xt.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:m.jsx("polygon",{points:"0,0 30,0 15,10"})})});JB.displayName=sre;var ore=JB;function zT(t){const[e,n]=b.useState(void 0);return Pr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var jT="Popper",[QB,Bc]=es(jT),[are,ZB]=QB(jT),e4=t=>{const{__scopePopper:e,children:n}=t,[r,i]=b.useState(null);return m.jsx(are,{scope:e,anchor:r,onAnchorChange:i,children:n})};e4.displayName=jT;var t4="PopperAnchor",n4=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=ZB(t4,n),o=b.useRef(null),a=Ht(e,o);return b.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:m.jsx(xt.div,{...i,ref:a})});n4.displayName=t4;var HT="PopperContent",[lre,cre]=QB(HT),r4=b.forwardRef((t,e)=>{var Z,pe,ye,ge,je,We;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:x,...w}=t,y=ZB(HT,n),[v,S]=b.useState(null),E=Ht(e,it=>S(it)),[C,T]=b.useState(null),A=zT(C),k=(A==null?void 0:A.width)??0,R=(A==null?void 0:A.height)??0,P=r+(s!=="center"?"-"+s:""),M=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},I=Array.isArray(c)?c:[c],z=I.length>0,H={padding:M,boundary:I.filter(dre),altBoundary:z},{refs:j,floatingStyles:J,placement:q,isPositioned:Q,middlewareData:O}=Yne({strategy:"fixed",placement:P,whileElementsMounted:(...it)=>zne(...it,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[Qne({mainAxis:i+R,alignmentAxis:o}),l&&Zne({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?ere():void 0,...H}),l&&tre({...H}),nre({...H,apply:({elements:it,rects:te,availableWidth:pt,availableHeight:Be})=>{const{width:ut,height:Xe}=te.reference,wt=it.floating.style;wt.setProperty("--radix-popper-available-width",`${pt}px`),wt.setProperty("--radix-popper-available-height",`${Be}px`),wt.setProperty("--radix-popper-anchor-width",`${ut}px`),wt.setProperty("--radix-popper-anchor-height",`${Xe}px`)}}),C&&ire({element:C,padding:a}),fre({arrowWidth:k,arrowHeight:R}),h&&rre({strategy:"referenceHidden",...H})]}),[F,D]=o4(q),ee=Zi(x);Pr(()=>{Q&&(ee==null||ee())},[Q,ee]);const W=(Z=O.arrow)==null?void 0:Z.x,B=(pe=O.arrow)==null?void 0:pe.y,K=((ye=O.arrow)==null?void 0:ye.centerOffset)!==0,[ie,oe]=b.useState();return Pr(()=>{v&&oe(window.getComputedStyle(v).zIndex)},[v]),m.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:Q?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ie,"--radix-popper-transform-origin":[(ge=O.transformOrigin)==null?void 0:ge.x,(je=O.transformOrigin)==null?void 0:je.y].join(" "),...((We=O.hide)==null?void 0:We.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:m.jsx(lre,{scope:n,placedSide:F,onArrowChange:T,arrowX:W,arrowY:B,shouldHideArrow:K,children:m.jsx(xt.div,{"data-side":F,"data-align":D,...w,ref:E,style:{...w.style,animation:Q?void 0:"none"}})})})});r4.displayName=HT;var i4="PopperArrow",ure={top:"bottom",right:"left",bottom:"top",left:"right"},s4=b.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=cre(i4,r),o=ure[s.placedSide];return m.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:m.jsx(ore,{...i,ref:n,style:{...i.style,display:"block"}})})});s4.displayName=i4;function dre(t){return t!==null}var fre=t=>({name:"transformOrigin",options:t,fn(e){var y,v,S;const{placement:n,rects:r,middlewareData:i}=e,o=((y=i.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=o4(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((v=i.arrow)==null?void 0:v.x)??0)+a/2,p=(((S=i.arrow)==null?void 0:S.y)??0)+l/2;let x="",w="";return c==="bottom"?(x=o?d:`${h}px`,w=`${-l}px`):c==="top"?(x=o?d:`${h}px`,w=`${r.floating.height+l}px`):c==="right"?(x=`${-l}px`,w=o?d:`${p}px`):c==="left"&&(x=`${r.floating.width+l}px`,w=o?d:`${p}px`),{data:{x,y:w}}}});function o4(t){const[e,n="center"]=t.split("-");return[e,n]}var VT=e4,ug=n4,Q0=r4,Z0=s4,[ew,MNe]=es("Tooltip",[Bc]),$T=Bc(),a4="TooltipProvider",hre=700,$2="tooltip.open",[pre,l4]=ew(a4),c4=t=>{const{__scopeTooltip:e,delayDuration:n=hre,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:s}=t,o=b.useRef(!0),a=b.useRef(!1),l=b.useRef(0);return b.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),m.jsx(pre,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(c=>{a.current=c},[]),disableHoverableContent:i,children:s})};c4.displayName=a4;var u4="Tooltip",[TNe,tw]=ew(u4),kE="TooltipTrigger",mre=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=tw(kE,n),s=l4(kE,n),o=$T(n),a=b.useRef(null),l=Ht(e,a,i.onTriggerChange),c=b.useRef(!1),u=b.useRef(!1),d=b.useCallback(()=>c.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),m.jsx(ug,{asChild:!0,...o,children:m.jsx(xt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:l,onPointerMove:rt(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:rt(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:rt(t.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:rt(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:rt(t.onBlur,i.onClose),onClick:rt(t.onClick,i.onClose)})})});mre.displayName=kE;var gre="TooltipPortal",[ANe,vre]=ew(gre,{forceMount:void 0}),nh="TooltipContent",d4=b.forwardRef((t,e)=>{const n=vre(nh,t.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=t,o=tw(nh,t.__scopeTooltip);return m.jsx(As,{present:r||o.open,children:o.disableHoverableContent?m.jsx(f4,{side:i,...s,ref:e}):m.jsx(yre,{side:i,...s,ref:e})})}),yre=b.forwardRef((t,e)=>{const n=tw(nh,t.__scopeTooltip),r=l4(nh,t.__scopeTooltip),i=b.useRef(null),s=Ht(e,i),[o,a]=b.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:d}=r,h=b.useCallback(()=>{a(null),d(!1)},[d]),p=b.useCallback((x,w)=>{const y=x.currentTarget,v={x:x.clientX,y:x.clientY},S=_re(v,y.getBoundingClientRect()),E=Ere(v,S),C=Cre(w.getBoundingClientRect()),T=Tre([...E,...C]);a(T),d(!0)},[d]);return b.useEffect(()=>()=>h(),[h]),b.useEffect(()=>{if(l&&u){const x=y=>p(y,u),w=y=>p(y,l);return l.addEventListener("pointerleave",x),u.addEventListener("pointerleave",w),()=>{l.removeEventListener("pointerleave",x),u.removeEventListener("pointerleave",w)}}},[l,u,p,h]),b.useEffect(()=>{if(o){const x=w=>{const y=w.target,v={x:w.clientX,y:w.clientY},S=(l==null?void 0:l.contains(y))||(u==null?void 0:u.contains(y)),E=!Mre(v,o);S?h():E&&(h(),c())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[l,u,o,c,h]),m.jsx(f4,{...t,ref:s})}),[xre,wre]=ew(u4,{isInside:!1}),bre=wZ("TooltipContent"),f4=b.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:o,...a}=t,l=tw(nh,n),c=$T(n),{onClose:u}=l;return b.useEffect(()=>(document.addEventListener($2,u),()=>document.removeEventListener($2,u)),[u]),b.useEffect(()=>{if(l.trigger){const d=h=>{const p=h.target;p!=null&&p.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),m.jsx(pd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:m.jsxs(Q0,{"data-state":l.stateAttribute,...c,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[m.jsx(bre,{children:r}),m.jsx(xre,{scope:n,isInside:!0,children:m.jsx(HZ,{id:l.contentId,role:"tooltip",children:i||r})})]})})});d4.displayName=nh;var h4="TooltipArrow",Sre=b.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=$T(n);return wre(h4,n).isInside?null:m.jsx(Z0,{...i,...r,ref:e})});Sre.displayName=h4;function _re(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Ere(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Cre(t){const{top:e,right:n,bottom:r,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:r},{x:i,y:r}]}function Mre(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,h=l.y;u>r!=h>r&&n<(d-c)*(r-u)/(h-u)+c&&(i=!i)}return i}function Tre(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Are(e)}function Are(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const i=t[r];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const i=t[r];for(;n.length>=2;){const s=n[n.length-1],o=n[n.length-2];if((s.x-o.x)*(i.y-o.y)>=(s.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Rre=c4,p4=d4;const kre=Rre,Nre=b.forwardRef(({className:t,sideOffset:e=4,...n},r)=>m.jsx(p4,{ref:r,sideOffset:e,className:_t("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));Nre.displayName=p4.displayName;var nw=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},rw=typeof window>"u"||"Deno"in globalThis;function vo(){}function Pre(t,e){return typeof t=="function"?t(e):t}function Dre(t){return typeof t=="number"&&t>=0&&t!==1/0}function Ire(t,e){return Math.max(t+(e||0)-Date.now(),0)}function NE(t,e){return typeof t=="function"?t(e):t}function Lre(t,e){return typeof t=="function"?t(e):t}function W2(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==WT(o,e.options))return!1}else if(!_m(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function G2(t,e){const{exact:n,status:r,predicate:i,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(n){if(Sm(e.options.mutationKey)!==Sm(s))return!1}else if(!_m(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function WT(t,e){return((e==null?void 0:e.queryKeyHashFn)||Sm)(t)}function Sm(t){return JSON.stringify(t,(e,n)=>PE(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function _m(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>_m(t[n],e[n])):!1}function m4(t,e){if(t===e)return t;const n=X2(t)&&X2(e);if(n||PE(t)&&PE(e)){const r=n?t:Object.keys(t),i=r.length,s=n?e:Object.keys(e),o=s.length,a=n?[]:{},l=new Set(r);let c=0;for(let u=0;u<o;u++){const d=n?u:s[u];(!n&&l.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,c++):(a[d]=m4(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&c++)}return i===o&&c===i?t:a}return e}function X2(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function PE(t){if(!q2(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!q2(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function q2(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ore(t){return new Promise(e=>{setTimeout(e,t)})}function Fre(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?m4(t,e):e}function Ure(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Bre(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var GT=Symbol();function g4(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===GT?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Iu,Zl,Bf,ZO,zre=(ZO=class extends nw{constructor(){super();mn(this,Iu);mn(this,Zl);mn(this,Bf);zt(this,Bf,e=>{if(!rw&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Le(this,Zl)||this.setEventListener(Le(this,Bf))}onUnsubscribe(){var e;this.hasListeners()||((e=Le(this,Zl))==null||e.call(this),zt(this,Zl,void 0))}setEventListener(e){var n;zt(this,Bf,e),(n=Le(this,Zl))==null||n.call(this),zt(this,Zl,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Le(this,Iu)!==e&&(zt(this,Iu,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Le(this,Iu)=="boolean"?Le(this,Iu):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Iu=new WeakMap,Zl=new WeakMap,Bf=new WeakMap,ZO),v4=new zre,zf,ec,jf,eF,jre=(eF=class extends nw{constructor(){super();mn(this,zf,!0);mn(this,ec);mn(this,jf);zt(this,jf,e=>{if(!rw&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Le(this,ec)||this.setEventListener(Le(this,jf))}onUnsubscribe(){var e;this.hasListeners()||((e=Le(this,ec))==null||e.call(this),zt(this,ec,void 0))}setEventListener(e){var n;zt(this,jf,e),(n=Le(this,ec))==null||n.call(this),zt(this,ec,e(this.setOnline.bind(this)))}setOnline(e){Le(this,zf)!==e&&(zt(this,zf,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Le(this,zf)}},zf=new WeakMap,ec=new WeakMap,jf=new WeakMap,eF),Hx=new jre;function Hre(){let t,e;const n=new Promise((i,s)=>{t=i,e=s});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function Vre(t){return Math.min(1e3*2**t,3e4)}function y4(t){return(t??"online")==="online"?Hx.isOnline():!0}var x4=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function jS(t){return t instanceof x4}function w4(t){let e=!1,n=0,r=!1,i;const s=Hre(),o=w=>{var y;r||(h(new x4(w)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},l=()=>{e=!1},c=()=>v4.isFocused()&&(t.networkMode==="always"||Hx.isOnline())&&t.canRun(),u=()=>y4(t.networkMode)&&t.canRun(),d=w=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,w),i==null||i(),s.resolve(w))},h=w=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,w),i==null||i(),s.reject(w))},p=()=>new Promise(w=>{var y;i=v=>{(r||c())&&w(v)},(y=t.onPause)==null||y.call(t)}).then(()=>{var w;i=void 0,r||(w=t.onContinue)==null||w.call(t)}),x=()=>{if(r)return;let w;const y=n===0?t.initialPromise:void 0;try{w=y??t.fn()}catch(v){w=Promise.reject(v)}Promise.resolve(w).then(d).catch(v=>{var A;if(r)return;const S=t.retry??(rw?0:3),E=t.retryDelay??Vre,C=typeof E=="function"?E(n,v):E,T=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,v);if(e||!T){h(v);return}n++,(A=t.onFail)==null||A.call(t,n,v),Ore(C).then(()=>c()?void 0:p()).then(()=>{e?h(v):x()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:u,start:()=>(u()?x():p().then(x),s)}}var $re=t=>setTimeout(t,0);function Wre(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=$re;const s=a=>{e?t.push(a):i(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var _i=Wre(),Lu,tF,b4=(tF=class{constructor(){mn(this,Lu)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Dre(this.gcTime)&&zt(this,Lu,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(rw?1/0:5*60*1e3))}clearGcTimeout(){Le(this,Lu)&&(clearTimeout(Le(this,Lu)),zt(this,Lu,void 0))}},Lu=new WeakMap,tF),Hf,Vf,Us,Ou,oi,qm,Fu,yo,ja,nF,Gre=(nF=class extends b4{constructor(e){super();mn(this,yo);mn(this,Hf);mn(this,Vf);mn(this,Us);mn(this,Ou);mn(this,oi);mn(this,qm);mn(this,Fu);zt(this,Fu,!1),zt(this,qm,e.defaultOptions),this.setOptions(e.options),this.observers=[],zt(this,Ou,e.client),zt(this,Us,Le(this,Ou).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,zt(this,Hf,qre(this.options)),this.state=e.state??Le(this,Hf),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=Le(this,oi))==null?void 0:e.promise}setOptions(e){this.options={...Le(this,qm),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Le(this,Us).remove(this)}setData(e,n){const r=Fre(this.state.data,e,this.options);return ti(this,yo,ja).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){ti(this,yo,ja).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,i;const n=(r=Le(this,oi))==null?void 0:r.promise;return(i=Le(this,oi))==null||i.cancel(e),n?n.then(vo).catch(vo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Le(this,Hf))}isActive(){return this.observers.some(e=>Lre(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===GT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>NE(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Ire(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=Le(this,oi))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=Le(this,oi))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Le(this,Us).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(Le(this,oi)&&(Le(this,Fu)?Le(this,oi).cancel({revert:!0}):Le(this,oi).cancelRetry()),this.scheduleGc()),Le(this,Us).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ti(this,yo,ja).call(this,{type:"invalidate"})}fetch(e,n){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Le(this,oi))return Le(this,oi).continueRetry(),Le(this,oi).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(p=>p.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(zt(this,Fu,!0),r.signal)})},s=()=>{const h=g4(this.options,n),x=(()=>{const w={client:Le(this,Ou),queryKey:this.queryKey,meta:this.meta};return i(w),w})();return zt(this,Fu,!1),this.options.persister?this.options.persister(h,x,this):h(x)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Le(this,Ou),state:this.state,fetchFn:s};return i(h),h})();(c=this.options.behavior)==null||c.onFetch(a,this),zt(this,Vf,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&ti(this,yo,ja).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=h=>{var p,x,w,y;jS(h)&&h.silent||ti(this,yo,ja).call(this,{type:"error",error:h}),jS(h)||((x=(p=Le(this,Us).config).onError)==null||x.call(p,h,this),(y=(w=Le(this,Us).config).onSettled)==null||y.call(w,this.state.data,h,this)),this.scheduleGc()};return zt(this,oi,w4({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var p,x,w,y;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(v){l(v);return}(x=(p=Le(this,Us).config).onSuccess)==null||x.call(p,h,this),(y=(w=Le(this,Us).config).onSettled)==null||y.call(w,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,p)=>{ti(this,yo,ja).call(this,{type:"failed",failureCount:h,error:p})},onPause:()=>{ti(this,yo,ja).call(this,{type:"pause"})},onContinue:()=>{ti(this,yo,ja).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),Le(this,oi).start()}},Hf=new WeakMap,Vf=new WeakMap,Us=new WeakMap,Ou=new WeakMap,oi=new WeakMap,qm=new WeakMap,Fu=new WeakMap,yo=new WeakSet,ja=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Xre(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return jS(i)&&i.revert&&Le(this,Vf)?{...Le(this,Vf),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),_i.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Le(this,Us).notify({query:this,type:"updated",action:e})})},nF);function Xre(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:y4(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function qre(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Yo,rF,Kre=(rF=class extends nw{constructor(e={}){super();mn(this,Yo);this.config=e,zt(this,Yo,new Map)}build(e,n,r){const i=n.queryKey,s=n.queryHash??WT(i,n);let o=this.get(s);return o||(o=new Gre({client:e,queryKey:i,queryHash:s,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){Le(this,Yo).has(e.queryHash)||(Le(this,Yo).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Le(this,Yo).get(e.queryHash);n&&(e.destroy(),n===e&&Le(this,Yo).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){_i.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Le(this,Yo).get(e)}getAll(){return[...Le(this,Yo).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>W2(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>W2(e,r)):n}notify(e){_i.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){_i.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){_i.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Yo=new WeakMap,rF),Jo,bi,Uu,Qo,zl,iF,Yre=(iF=class extends b4{constructor(e){super();mn(this,Qo);mn(this,Jo);mn(this,bi);mn(this,Uu);this.mutationId=e.mutationId,zt(this,bi,e.mutationCache),zt(this,Jo,[]),this.state=e.state||Jre(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Le(this,Jo).includes(e)||(Le(this,Jo).push(e),this.clearGcTimeout(),Le(this,bi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){zt(this,Jo,Le(this,Jo).filter(n=>n!==e)),this.scheduleGc(),Le(this,bi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Le(this,Jo).length||(this.state.status==="pending"?this.scheduleGc():Le(this,bi).remove(this))}continue(){var e;return((e=Le(this,Uu))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var s,o,a,l,c,u,d,h,p,x,w,y,v,S,E,C,T,A,k,R;const n=()=>{ti(this,Qo,zl).call(this,{type:"continue"})};zt(this,Uu,w4({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(P,M)=>{ti(this,Qo,zl).call(this,{type:"failed",failureCount:P,error:M})},onPause:()=>{ti(this,Qo,zl).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Le(this,bi).canRun(this)}));const r=this.state.status==="pending",i=!Le(this,Uu).canStart();try{if(r)n();else{ti(this,Qo,zl).call(this,{type:"pending",variables:e,isPaused:i}),await((o=(s=Le(this,bi).config).onMutate)==null?void 0:o.call(s,e,this));const M=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,e));M!==this.state.context&&ti(this,Qo,zl).call(this,{type:"pending",context:M,variables:e,isPaused:i})}const P=await Le(this,Uu).start();return await((u=(c=Le(this,bi).config).onSuccess)==null?void 0:u.call(c,P,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,P,e,this.state.context)),await((x=(p=Le(this,bi).config).onSettled)==null?void 0:x.call(p,P,null,this.state.variables,this.state.context,this)),await((y=(w=this.options).onSettled)==null?void 0:y.call(w,P,null,e,this.state.context)),ti(this,Qo,zl).call(this,{type:"success",data:P}),P}catch(P){try{throw await((S=(v=Le(this,bi).config).onError)==null?void 0:S.call(v,P,e,this.state.context,this)),await((C=(E=this.options).onError)==null?void 0:C.call(E,P,e,this.state.context)),await((A=(T=Le(this,bi).config).onSettled)==null?void 0:A.call(T,void 0,P,this.state.variables,this.state.context,this)),await((R=(k=this.options).onSettled)==null?void 0:R.call(k,void 0,P,e,this.state.context)),P}finally{ti(this,Qo,zl).call(this,{type:"error",error:P})}}finally{Le(this,bi).runNext(this)}}},Jo=new WeakMap,bi=new WeakMap,Uu=new WeakMap,Qo=new WeakSet,zl=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),_i.batch(()=>{Le(this,Jo).forEach(r=>{r.onMutationUpdate(e)}),Le(this,bi).notify({mutation:this,type:"updated",action:e})})},iF);function Jre(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Xa,xo,Km,sF,Qre=(sF=class extends nw{constructor(e={}){super();mn(this,Xa);mn(this,xo);mn(this,Km);this.config=e,zt(this,Xa,new Set),zt(this,xo,new Map),zt(this,Km,0)}build(e,n,r){const i=new Yre({mutationCache:this,mutationId:++wv(this,Km)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){Le(this,Xa).add(e);const n=Hv(e);if(typeof n=="string"){const r=Le(this,xo).get(n);r?r.push(e):Le(this,xo).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Le(this,Xa).delete(e)){const n=Hv(e);if(typeof n=="string"){const r=Le(this,xo).get(n);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&Le(this,xo).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Hv(e);if(typeof n=="string"){const r=Le(this,xo).get(n),i=r==null?void 0:r.find(s=>s.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const n=Hv(e);if(typeof n=="string"){const i=(r=Le(this,xo).get(n))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){_i.batch(()=>{Le(this,Xa).forEach(e=>{this.notify({type:"removed",mutation:e})}),Le(this,Xa).clear(),Le(this,xo).clear()})}getAll(){return Array.from(Le(this,Xa))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>G2(n,r))}findAll(e={}){return this.getAll().filter(n=>G2(e,n))}notify(e){_i.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return _i.batch(()=>Promise.all(e.map(n=>n.continue().catch(vo))))}},Xa=new WeakMap,xo=new WeakMap,Km=new WeakMap,sF);function Hv(t){var e;return(e=t.options.scope)==null?void 0:e.id}function K2(t){return{onFetch:(e,n)=>{var u,d,h,p,x;const r=e.options,i=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,s=((p=e.state.data)==null?void 0:p.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let w=!1;const y=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?w=!0:e.signal.addEventListener("abort",()=>{w=!0}),e.signal)})},v=g4(e.options,e.fetchOptions),S=async(E,C,T)=>{if(w)return Promise.reject();if(C==null&&E.pages.length)return Promise.resolve(E);const k=(()=>{const I={client:e.client,queryKey:e.queryKey,pageParam:C,direction:T?"backward":"forward",meta:e.options.meta};return y(I),I})(),R=await v(k),{maxPages:P}=e.options,M=T?Bre:Ure;return{pages:M(E.pages,R,P),pageParams:M(E.pageParams,C,P)}};if(i&&s.length){const E=i==="backward",C=E?Zre:Y2,T={pages:s,pageParams:o},A=C(r,T);a=await S(T,A,E)}else{const E=t??s.length;do{const C=l===0?o[0]??r.initialPageParam:Y2(r,a);if(l>0&&C==null)break;a=await S(a,C),l++}while(l<E)}return a};e.options.persister?e.fetchFn=()=>{var w,y;return(y=(w=e.options).persister)==null?void 0:y.call(w,c,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=c}}}function Y2(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function Zre(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Zn,tc,nc,$f,Wf,rc,Gf,Xf,oF,eie=(oF=class{constructor(t={}){mn(this,Zn);mn(this,tc);mn(this,nc);mn(this,$f);mn(this,Wf);mn(this,rc);mn(this,Gf);mn(this,Xf);zt(this,Zn,t.queryCache||new Kre),zt(this,tc,t.mutationCache||new Qre),zt(this,nc,t.defaultOptions||{}),zt(this,$f,new Map),zt(this,Wf,new Map),zt(this,rc,0)}mount(){wv(this,rc)._++,Le(this,rc)===1&&(zt(this,Gf,v4.subscribe(async t=>{t&&(await this.resumePausedMutations(),Le(this,Zn).onFocus())})),zt(this,Xf,Hx.subscribe(async t=>{t&&(await this.resumePausedMutations(),Le(this,Zn).onOnline())})))}unmount(){var t,e;wv(this,rc)._--,Le(this,rc)===0&&((t=Le(this,Gf))==null||t.call(this),zt(this,Gf,void 0),(e=Le(this,Xf))==null||e.call(this),zt(this,Xf,void 0))}isFetching(t){return Le(this,Zn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Le(this,tc).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Le(this,Zn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=Le(this,Zn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(NE(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return Le(this,Zn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=Le(this,Zn).get(r.queryHash),s=i==null?void 0:i.state.data,o=Pre(e,s);if(o!==void 0)return Le(this,Zn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return _i.batch(()=>Le(this,Zn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Le(this,Zn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Le(this,Zn);_i.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Le(this,Zn);return _i.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=_i.batch(()=>Le(this,Zn).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(vo).catch(vo)}invalidateQueries(t,e={}){return _i.batch(()=>(Le(this,Zn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=_i.batch(()=>Le(this,Zn).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let s=i.fetch(void 0,n);return n.throwOnError||(s=s.catch(vo)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(vo)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Le(this,Zn).build(this,e);return n.isStaleByTime(NE(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(vo).catch(vo)}fetchInfiniteQuery(t){return t.behavior=K2(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(vo).catch(vo)}ensureInfiniteQueryData(t){return t.behavior=K2(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Hx.isOnline()?Le(this,tc).resumePausedMutations():Promise.resolve()}getQueryCache(){return Le(this,Zn)}getMutationCache(){return Le(this,tc)}getDefaultOptions(){return Le(this,nc)}setDefaultOptions(t){zt(this,nc,t)}setQueryDefaults(t,e){Le(this,$f).set(Sm(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Le(this,$f).values()],n={};return e.forEach(r=>{_m(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){Le(this,Wf).set(Sm(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Le(this,Wf).values()],n={};return e.forEach(r=>{_m(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Le(this,nc).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=WT(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===GT&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Le(this,nc).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Le(this,Zn).clear(),Le(this,tc).clear()}},Zn=new WeakMap,tc=new WeakMap,nc=new WeakMap,$f=new WeakMap,Wf=new WeakMap,rc=new WeakMap,Gf=new WeakMap,Xf=new WeakMap,oF),tie=b.createContext(void 0),nie=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(tie.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Em(){return Em=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Em.apply(this,arguments)}var ac;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ac||(ac={}));const J2="popstate";function rie(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return DE("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Vx(i)}return sie(e,n,null,t)}function lr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function S4(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iie(){return Math.random().toString(36).substr(2,8)}function Q2(t,e){return{usr:t.state,key:t.key,idx:e}}function DE(t,e,n,r){return n===void 0&&(n=null),Em({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Mh(e):e,{state:n,key:e&&e.key||r||iie()})}function Vx(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Mh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function sie(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ac.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Em({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=ac.Pop;let y=u(),v=y==null?null:y-c;c=y,l&&l({action:a,location:w.location,delta:v})}function h(y,v){a=ac.Push;let S=DE(w.location,y,v);c=u()+1;let E=Q2(S,c),C=w.createHref(S);try{o.pushState(E,"",C)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(C)}s&&l&&l({action:a,location:w.location,delta:1})}function p(y,v){a=ac.Replace;let S=DE(w.location,y,v);c=u();let E=Q2(S,c),C=w.createHref(S);o.replaceState(E,"",C),s&&l&&l({action:a,location:w.location,delta:0})}function x(y){let v=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof y=="string"?y:Vx(y);return S=S.replace(/ $/,"%20"),lr(v,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,v)}let w={get action(){return a},get location(){return t(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(J2,d),l=y,()=>{i.removeEventListener(J2,d),l=null}},createHref(y){return e(i,y)},createURL:x,encodeLocation(y){let v=x(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(y){return o.go(y)}};return w}var Z2;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Z2||(Z2={}));function oie(t,e,n){return n===void 0&&(n="/"),aie(t,e,n)}function aie(t,e,n,r){let i=typeof e=="string"?Mh(e):e,s=XT(i.pathname||"/",n);if(s==null)return null;let o=_4(t);lie(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=wie(s);a=vie(o[l],c)}return a}function _4(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(lr(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=xc([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(lr(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),_4(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:mie(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of E4(s.path))i(s,o,l)}),e}function E4(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=E4(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function lie(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:gie(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cie=/^:[\w-]+$/,uie=3,die=2,fie=1,hie=10,pie=-2,eD=t=>t==="*";function mie(t,e){let n=t.split("/"),r=n.length;return n.some(eD)&&(r+=pie),e&&(r+=die),n.filter(i=>!eD(i)).reduce((i,s)=>i+(cie.test(s)?uie:s===""?fie:hie),r)}function gie(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function vie(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=yie({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:xc([s,d.pathname]),pathnameBase:Eie(xc([s,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(s=xc([s,d.pathnameBase]))}return o}function yie(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=xie(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:p}=u;if(h==="*"){let w=a[d]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const x=a[d];return p&&!x?c[h]=void 0:c[h]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function xie(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),S4(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function wie(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return S4(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function XT(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function bie(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Mh(t):t;return{pathname:n?n.startsWith("/")?n:Sie(n,e):e,search:Cie(r),hash:Mie(i)}}function Sie(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function HS(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _ie(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function qT(t,e){let n=_ie(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function KT(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Mh(t):(i=Em({},t),lr(!i.pathname||!i.pathname.includes("?"),HS("?","pathname","search",i)),lr(!i.pathname||!i.pathname.includes("#"),HS("#","pathname","hash",i)),lr(!i.search||!i.search.includes("#"),HS("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=bie(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const xc=t=>t.join("/").replace(/\/\/+/g,"/"),Eie=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Cie=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Mie=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Tie(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const C4=["post","put","patch","delete"];new Set(C4);const Aie=["get",...C4];new Set(Aie);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cm(){return Cm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cm.apply(this,arguments)}const YT=b.createContext(null),Rie=b.createContext(null),zc=b.createContext(null),iw=b.createContext(null),Sa=b.createContext({outlet:null,matches:[],isDataRoute:!1}),M4=b.createContext(null);function kie(t,e){let{relative:n}=e===void 0?{}:e;Th()||lr(!1);let{basename:r,navigator:i}=b.useContext(zc),{hash:s,pathname:o,search:a}=A4(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:xc([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Th(){return b.useContext(iw)!=null}function pl(){return Th()||lr(!1),b.useContext(iw).location}function T4(t){b.useContext(zc).static||b.useLayoutEffect(t)}function md(){let{isDataRoute:t}=b.useContext(Sa);return t?Gie():Nie()}function Nie(){Th()||lr(!1);let t=b.useContext(YT),{basename:e,future:n,navigator:r}=b.useContext(zc),{matches:i}=b.useContext(Sa),{pathname:s}=pl(),o=JSON.stringify(qT(i,n.v7_relativeSplatPath)),a=b.useRef(!1);return T4(()=>{a.current=!0}),b.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=KT(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:xc([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}const Pie=b.createContext(null);function Die(t){let e=b.useContext(Sa).outlet;return e&&b.createElement(Pie.Provider,{value:t},e)}function Iie(){let{matches:t}=b.useContext(Sa),e=t[t.length-1];return e?e.params:{}}function A4(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(zc),{matches:i}=b.useContext(Sa),{pathname:s}=pl(),o=JSON.stringify(qT(i,r.v7_relativeSplatPath));return b.useMemo(()=>KT(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function Lie(t,e){return Oie(t,e)}function Oie(t,e,n,r){Th()||lr(!1);let{navigator:i}=b.useContext(zc),{matches:s}=b.useContext(Sa),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=pl(),u;if(e){var d;let y=typeof e=="string"?Mh(e):e;l==="/"||(d=y.pathname)!=null&&d.startsWith(l)||lr(!1),u=y}else u=c;let h=u.pathname||"/",p=h;if(l!=="/"){let y=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let x=oie(t,{pathname:p}),w=jie(x&&x.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:xc([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:xc([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n,r);return e&&w?b.createElement(iw.Provider,{value:{location:Cm({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ac.Pop}},w):w}function Fie(){let t=Wie(),e=Tie(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,null)}const Uie=b.createElement(Fie,null);class Bie extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Sa.Provider,{value:this.props.routeContext},b.createElement(M4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zie(t){let{routeContext:e,match:n,children:r}=t,i=b.useContext(YT);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Sa.Provider,{value:e},r)}function jie(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||lr(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:p}=n,x=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let p,x=!1,w=null,y=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||Uie,l&&(c<0&&h===0?(Xie("route-fallback"),x=!0,y=null):c===h&&(x=!0,y=d.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,h+1)),S=()=>{let E;return p?E=w:x?E=y:d.route.Component?E=b.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=u,b.createElement(zie,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:E})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?b.createElement(Bie,{location:n.location,revalidation:n.revalidation,component:w,error:p,children:S(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):S()},null)}var R4=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(R4||{}),k4=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(k4||{});function Hie(t){let e=b.useContext(YT);return e||lr(!1),e}function Vie(t){let e=b.useContext(Rie);return e||lr(!1),e}function $ie(t){let e=b.useContext(Sa);return e||lr(!1),e}function N4(t){let e=$ie(),n=e.matches[e.matches.length-1];return n.route.id||lr(!1),n.route.id}function Wie(){var t;let e=b.useContext(M4),n=Vie(),r=N4();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Gie(){let{router:t}=Hie(R4.UseNavigateStable),e=N4(k4.UseNavigateStable),n=b.useRef(!1);return T4(()=>{n.current=!0}),b.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Cm({fromRouteId:e},s)))},[t,e])}const tD={};function Xie(t,e,n){tD[t]||(tD[t]=!0)}function qie(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function IE(t){let{to:e,replace:n,state:r,relative:i}=t;Th()||lr(!1);let{future:s,static:o}=b.useContext(zc),{matches:a}=b.useContext(Sa),{pathname:l}=pl(),c=md(),u=KT(e,qT(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return b.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function Kie(t){return Die(t.context)}function Go(t){lr(!1)}function Yie(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ac.Pop,navigator:s,static:o=!1,future:a}=t;Th()&&lr(!1);let l=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:l,navigator:s,static:o,future:Cm({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Mh(r));let{pathname:u="/",search:d="",hash:h="",state:p=null,key:x="default"}=r,w=b.useMemo(()=>{let y=XT(u,l);return y==null?null:{location:{pathname:y,search:d,hash:h,state:p,key:x},navigationType:i}},[l,u,d,h,p,x,i]);return w==null?null:b.createElement(zc.Provider,{value:c},b.createElement(iw.Provider,{children:n,value:w}))}function Jie(t){let{children:e,location:n}=t;return Lie(LE(e),n)}new Promise(()=>{});function LE(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,i)=>{if(!b.isValidElement(r))return;let s=[...e,i];if(r.type===b.Fragment){n.push.apply(n,LE(r.props.children,s));return}r.type!==Go&&lr(!1),!r.props.index||!r.props.children||lr(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=LE(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function OE(){return OE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OE.apply(this,arguments)}function Qie(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Zie(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ese(t,e){return t.button===0&&(!e||e==="_self")&&!Zie(t)}const tse=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],nse="6";try{window.__reactRouterVersion=nse}catch{}const rse="startTransition",nD=RM[rse];function ise(t){let{basename:e,children:n,future:r,window:i}=t,s=b.useRef();s.current==null&&(s.current=rie({window:i,v5Compat:!0}));let o=s.current,[a,l]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=b.useCallback(d=>{c&&nD?nD(()=>l(d)):l(d)},[l,c]);return b.useLayoutEffect(()=>o.listen(u),[o,u]),b.useEffect(()=>qie(r),[r]),b.createElement(Yie,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const sse=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ose=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ase=b.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,h=Qie(e,tse),{basename:p}=b.useContext(zc),x,w=!1;if(typeof c=="string"&&ose.test(c)&&(x=c,sse))try{let E=new URL(window.location.href),C=c.startsWith("//")?new URL(E.protocol+c):new URL(c),T=XT(C.pathname,p);C.origin===E.origin&&T!=null?c=T+C.search+C.hash:w=!0}catch{}let y=kie(c,{relative:i}),v=lse(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function S(E){r&&r(E),E.defaultPrevented||v(E)}return b.createElement("a",OE({},h,{href:x||y,onClick:w||s?r:S,ref:n,target:l}))});var rD;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(rD||(rD={}));var iD;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(iD||(iD={}));function lse(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=md(),c=pl(),u=A4(t,{relative:o});return b.useCallback(d=>{if(ese(d,n)){d.preventDefault();let h=r!==void 0?r:Vx(c)===Vx(u);l(t,{replace:h,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function cse(t={}){const{nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}=t,[i,s]=b.useState(!1),o=b.useRef(n);o.current=n;const a=b.useRef(r);return a.current=r,b.useEffect(()=>{const l=document.createElement("script");return l.src="https://accounts.google.com/gsi/client",l.async=!0,l.defer=!0,l.nonce=e,l.onload=()=>{var c;s(!0),(c=o.current)===null||c===void 0||c.call(o)},l.onerror=()=>{var c;s(!1),(c=a.current)===null||c===void 0||c.call(a)},document.body.appendChild(l),()=>{document.body.removeChild(l)}},[e]),i}const P4=b.createContext(null);function use({clientId:t,nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r,children:i}){const s=cse({nonce:e,onScriptLoadSuccess:n,onScriptLoadError:r}),o=b.useMemo(()=>({clientId:t,scriptLoadedSuccessfully:s}),[t,s]);return Me.createElement(P4.Provider,{value:o},i)}function dse(){const t=b.useContext(P4);if(!t)throw new Error("Google OAuth components must be used within GoogleOAuthProvider");return t}function fse(){var t,e,n;(n=(e=(t=window==null?void 0:window.google)===null||t===void 0?void 0:t.accounts)===null||e===void 0?void 0:e.id)===null||n===void 0||n.disableAutoSelect()}function hse({flow:t="implicit",scope:e="",onSuccess:n,onError:r,onNonOAuthError:i,overrideScope:s,state:o,...a}){const{clientId:l,scriptLoadedSuccessfully:c}=dse(),u=b.useRef(),d=b.useRef(n);d.current=n;const h=b.useRef(r);h.current=r;const p=b.useRef(i);p.current=i,b.useEffect(()=>{var y,v;if(!c)return;const S=t==="implicit"?"initTokenClient":"initCodeClient",E=(v=(y=window==null?void 0:window.google)===null||y===void 0?void 0:y.accounts)===null||v===void 0?void 0:v.oauth2[S]({client_id:l,scope:s?e:`openid profile email ${e}`,callback:C=>{var T,A;if(C.error)return(T=h.current)===null||T===void 0?void 0:T.call(h,C);(A=d.current)===null||A===void 0||A.call(d,C)},error_callback:C=>{var T;(T=p.current)===null||T===void 0||T.call(p,C)},state:o,...a});u.current=E},[l,c,t,e,o]);const x=b.useCallback(y=>{var v;return(v=u.current)===null||v===void 0?void 0:v.requestAccessToken(y)},[]),w=b.useCallback(()=>{var y;return(y=u.current)===null||y===void 0?void 0:y.requestCode()},[]);return t==="implicit"?x:w}const D4=b.createContext(void 0),ro=()=>{const t=b.useContext(D4);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},pse=({children:t})=>{const[e,n]=b.useState(null),[r,i]=b.useState(!0),[s,o]=b.useState(null),[a,l]=b.useState(0),c=b.useRef(0);b.useEffect(()=>{(async()=>{try{console.log("Starting authentication initialization");const y=localStorage.getItem("itemize_token"),v=localStorage.getItem("itemize_user"),S=localStorage.getItem("itemize_expiry");if(console.log("Auth data from storage:",{hasToken:!!y,hasUser:!!v,hasExpiry:!!S}),y&&typeof y=="string"&&v&&typeof v=="string"&&v!=="undefined"&&S&&!isNaN(parseInt(S))&&parseInt(S)>Date.now())try{const E=JSON.parse(v);if(E&&typeof E=="object"&&E.uid)console.log("Restoring authentication with user:",E),o(y),n(E),l(Date.now()),console.log("Authentication restored successfully");else throw console.error("Invalid user data structure:",E),new Error("Invalid user data structure")}catch(E){console.error("Failed to parse saved user data:",E),localStorage.removeItem("itemize_token"),localStorage.removeItem("itemize_user"),localStorage.removeItem("itemize_expiry"),o(null),n(null)}else console.log("No valid authentication found, cleaning up storage"),localStorage.removeItem("itemize_token"),localStorage.removeItem("itemize_user"),localStorage.removeItem("itemize_expiry"),o(null),n(null)}catch(y){console.error("Error initializing auth:",y),o(null),n(null)}finally{console.log("Authentication initialization complete"),i(!1)}})()},[]);const u=hse({onSuccess:async w=>{i(!0);try{console.log("Google login successful, getting user info");const v=(await Nn.get("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${w.access_token}`}})).data;console.log("Received user info from Google:",v);const S=xm();console.log("Sending user info to backend:",`${S}/api/auth/google-login`);try{const E=await Nn.post(`${S}/api/auth/google-login`,{googleId:v.sub,email:v.email,name:v.name,picture:v.picture});if(console.log("Backend auth response:",E.data),!E.data)throw new Error("Empty response data from backend");const C=E.data.token,T=E.data.user;if(!C)throw new Error("Missing token in backend response");if(!T||!T.uid)throw new Error("Missing or invalid user data in backend response");const A=Date.now()+7*24*60*60*1e3;localStorage.setItem("itemize_token",C),localStorage.setItem("itemize_user",JSON.stringify(T)),localStorage.setItem("itemize_expiry",A.toString()),console.log("Setting authentication state with:",{token:C,user:T}),o(C),n(T),l(Date.now()),console.log("Backend auth successful, state updated"),wE({title:"Welcome!",description:"Successfully signed in with Google."})}catch(E){throw console.error("Backend auth error:",E),new Error(`Backend authentication failed: ${E.message}`)}}catch(y){console.error("Google login failed:",y)}finally{i(!1)}},onError:()=>{console.error("Google login failed"),i(!1)},scope:"email profile"}),d=()=>{u()},h=()=>{console.log("Logging out user..."),o(null),n(null),localStorage.removeItem("itemize_token"),localStorage.removeItem("itemize_user"),localStorage.removeItem("itemize_expiry");try{fse()}catch(w){console.error("Error signing out from Google:",w)}if(c.current<3)try{kn.post("/api/auth/logout").catch(w=>{console.error("Backend logout failed:",w),c.current++})}catch(w){console.error("Backend logout failed:",w),c.current++}},p=async w=>{i(!0);try{console.log("Google One Tap login successful");const y=xm(),v=await Nn.post(`${y}/api/auth/google-credential`,{credential:w.credential}),{token:S,user:E}=v.data,C=Date.now()+7*24*60*60*1e3;localStorage.setItem("itemize_token",S),localStorage.setItem("itemize_user",JSON.stringify(E)),localStorage.setItem("itemize_expiry",C.toString()),console.log("Setting authentication state with:",{token:S,user:E}),o(S),n(E),l(Date.now()),wE({title:"Welcome!",description:"Successfully signed in with Google."})}catch(y){console.error("Google credential login failed:",y)}finally{i(!1)}};b.useEffect(()=>{console.log("Auth context changed:",{isAuthenticated:!!e&&!!s,hasUser:!!e,hasToken:!!s,lastAuthenticated:a,userData:e})},[e,s,a]);const x={currentUser:e,loading:r,login:d,logout:h,handleGoogleSuccess:p,token:s,isAuthenticated:!!e&&!!s};return m.jsx(D4.Provider,{value:x,children:t})},sD="itemize-ai-suggest-enabled",I4=b.createContext({aiEnabled:!0,setAiEnabled:()=>{}}),mse=({children:t})=>{const[e,n]=b.useState(()=>{try{const r=localStorage.getItem(sD);return r?JSON.parse(r):!0}catch{return!0}});return b.useEffect(()=>{localStorage.setItem(sD,JSON.stringify(e))},[e]),m.jsx(I4.Provider,{value:{aiEnabled:e,setAiEnabled:n},children:t})},JT=()=>b.useContext(I4),gse=sg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),nt=b.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?yZ:"button";return m.jsx(o,{className:_t(gse({variant:e,size:n,className:t})),ref:s,...i})});nt.displayName="Button";function QT(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var sw="Switch",[vse,RNe]=es(sw),[yse,xse]=vse(sw),L4=b.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[h,p]=b.useState(null),x=Ht(e,E=>p(E)),w=b.useRef(!1),y=h?u||!!h.closest("form"):!0,[v,S]=Cs({prop:i,defaultProp:s??!1,onChange:c,caller:sw});return m.jsxs(yse,{scope:n,checked:v,disabled:a,children:[m.jsx(xt.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":B4(v),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:x,onClick:rt(t.onClick,E=>{S(C=>!C),y&&(w.current=E.isPropagationStopped(),w.current||E.stopPropagation())})}),y&&m.jsx(U4,{control:h,bubbles:!w.current,name:r,value:l,checked:v,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});L4.displayName=sw;var O4="SwitchThumb",F4=b.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=xse(O4,n);return m.jsx(xt.span,{"data-state":B4(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});F4.displayName=O4;var wse="SwitchBubbleInput",U4=b.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...i},s)=>{const o=b.useRef(null),a=Ht(o,s),l=QT(n),c=zT(e);return b.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&p){const x=new Event("click",{bubbles:r});p.call(u,n),u.dispatchEvent(x)}},[l,n,r]),m.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});U4.displayName=wse;function B4(t){return t?"checked":"unchecked"}var z4=L4,bse=F4;const j4=b.forwardRef(({className:t,...e},n)=>m.jsx(z4,{className:_t("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-gradient-to-r data-[state=checked]:from-blue-600 data-[state=checked]:to-indigo-600 data-[state=unchecked]:bg-input",t),...e,ref:n,children:m.jsx(bse,{className:_t("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));j4.displayName=z4.displayName;var Sse="Label",H4=b.forwardRef((t,e)=>m.jsx(xt.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));H4.displayName=Sse;var V4=H4;const _se=sg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ci=b.forwardRef(({className:t,...e},n)=>m.jsx(V4,{ref:n,className:_t(_se(),t),...e}));Ci.displayName=V4.displayName;var Ese=b.createContext(void 0);function dg(t){const e=b.useContext(Ese);return t||e||"ltr"}var VS=0;function ow(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??oD()),document.body.insertAdjacentElement("beforeend",t[1]??oD()),VS++,()=>{VS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),VS--}},[])}function oD(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var $S="focusScope.autoFocusOnMount",WS="focusScope.autoFocusOnUnmount",aD={bubbles:!1,cancelable:!0},Cse="FocusScope",fg=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[a,l]=b.useState(null),c=Zi(i),u=Zi(s),d=b.useRef(null),h=Ht(e,w=>l(w)),p=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let w=function(E){if(p.paused||!a)return;const C=E.target;a.contains(C)?d.current=C:jl(d.current,{select:!0})},y=function(E){if(p.paused||!a)return;const C=E.relatedTarget;C!==null&&(a.contains(C)||jl(d.current,{select:!0}))},v=function(E){if(document.activeElement===document.body)for(const T of E)T.removedNodes.length>0&&jl(a)};document.addEventListener("focusin",w),document.addEventListener("focusout",y);const S=new MutationObserver(v);return a&&S.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",y),S.disconnect()}}},[r,a,p.paused]),b.useEffect(()=>{if(a){cD.add(p);const w=document.activeElement;if(!a.contains(w)){const v=new CustomEvent($S,aD);a.addEventListener($S,c),a.dispatchEvent(v),v.defaultPrevented||(Mse(Nse($4(a)),{select:!0}),document.activeElement===w&&jl(a))}return()=>{a.removeEventListener($S,c),setTimeout(()=>{const v=new CustomEvent(WS,aD);a.addEventListener(WS,u),a.dispatchEvent(v),v.defaultPrevented||jl(w??document.body,{select:!0}),a.removeEventListener(WS,u),cD.remove(p)},0)}}},[a,c,u,p]);const x=b.useCallback(w=>{if(!n&&!r||p.paused)return;const y=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,v=document.activeElement;if(y&&v){const S=w.currentTarget,[E,C]=Tse(S);E&&C?!w.shiftKey&&v===C?(w.preventDefault(),n&&jl(E,{select:!0})):w.shiftKey&&v===E&&(w.preventDefault(),n&&jl(C,{select:!0})):v===S&&w.preventDefault()}},[n,r,p.paused]);return m.jsx(xt.div,{tabIndex:-1,...o,ref:h,onKeyDown:x})});fg.displayName=Cse;function Mse(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(jl(r,{select:e}),document.activeElement!==n)return}function Tse(t){const e=$4(t),n=lD(e,t),r=lD(e.reverse(),t);return[n,r]}function $4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function lD(t,e){for(const n of t)if(!Ase(n,{upTo:e}))return n}function Ase(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Rse(t){return t instanceof HTMLInputElement&&"select"in t}function jl(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Rse(t)&&e&&t.select()}}var cD=kse();function kse(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=uD(t,e),t.unshift(e)},remove(e){var n;t=uD(t,e),(n=t[0])==null||n.resume()}}}function uD(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Nse(t){return t.filter(e=>e.tagName!=="A")}var GS="rovingFocusGroup.onEntryFocus",Pse={bubbles:!1,cancelable:!0},hg="RovingFocusGroup",[FE,W4,Dse]=rg(hg),[Ise,aw]=es(hg,[Dse]),[Lse,Ose]=Ise(hg),G4=b.forwardRef((t,e)=>m.jsx(FE.Provider,{scope:t.__scopeRovingFocusGroup,children:m.jsx(FE.Slot,{scope:t.__scopeRovingFocusGroup,children:m.jsx(Fse,{...t,ref:e})})}));G4.displayName=hg;var Fse=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=b.useRef(null),p=Ht(e,h),x=dg(s),[w,y]=Cs({prop:o,defaultProp:a??null,onChange:l,caller:hg}),[v,S]=b.useState(!1),E=Zi(c),C=W4(n),T=b.useRef(!1),[A,k]=b.useState(0);return b.useEffect(()=>{const R=h.current;if(R)return R.addEventListener(GS,E),()=>R.removeEventListener(GS,E)},[E]),m.jsx(Lse,{scope:n,orientation:r,dir:x,loop:i,currentTabStopId:w,onItemFocus:b.useCallback(R=>y(R),[y]),onItemShiftTab:b.useCallback(()=>S(!0),[]),onFocusableItemAdd:b.useCallback(()=>k(R=>R+1),[]),onFocusableItemRemove:b.useCallback(()=>k(R=>R-1),[]),children:m.jsx(xt.div,{tabIndex:v||A===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:rt(t.onMouseDown,()=>{T.current=!0}),onFocus:rt(t.onFocus,R=>{const P=!T.current;if(R.target===R.currentTarget&&P&&!v){const M=new CustomEvent(GS,Pse);if(R.currentTarget.dispatchEvent(M),!M.defaultPrevented){const I=C().filter(q=>q.focusable),z=I.find(q=>q.active),H=I.find(q=>q.id===w),J=[z,H,...I].filter(Boolean).map(q=>q.ref.current);K4(J,u)}}T.current=!1}),onBlur:rt(t.onBlur,()=>S(!1))})})}),X4="RovingFocusGroupItem",q4=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,children:o,...a}=t,l=Xr(),c=s||l,u=Ose(X4,n),d=u.currentTabStopId===c,h=W4(n),{onFocusableItemAdd:p,onFocusableItemRemove:x,currentTabStopId:w}=u;return b.useEffect(()=>{if(r)return p(),()=>x()},[r,p,x]),m.jsx(FE.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:m.jsx(xt.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:rt(t.onMouseDown,y=>{r?u.onItemFocus(c):y.preventDefault()}),onFocus:rt(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:rt(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const v=zse(y,u.orientation,u.dir);if(v!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let E=h().filter(C=>C.focusable).map(C=>C.ref.current);if(v==="last")E.reverse();else if(v==="prev"||v==="next"){v==="prev"&&E.reverse();const C=E.indexOf(y.currentTarget);E=u.loop?jse(E,C+1):E.slice(C+1)}setTimeout(()=>K4(E))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:w!=null}):o})})});q4.displayName=X4;var Use={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Bse(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function zse(t,e,n){const r=Bse(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Use[r]}function K4(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function jse(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Y4=G4,J4=q4,Hse=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Id=new WeakMap,Vv=new WeakMap,$v={},XS=0,Q4=function(t){return t&&(t.host||Q4(t.parentNode))},Vse=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Q4(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},$se=function(t,e,n,r){var i=Vse(e,Array.isArray(t)?t:[t]);$v[n]||($v[n]=new WeakMap);var s=$v[n],o=[],a=new Set,l=new Set(i),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(a.has(h))u(h);else try{var p=h.getAttribute(r),x=p!==null&&p!=="false",w=(Id.get(h)||0)+1,y=(s.get(h)||0)+1;Id.set(h,w),s.set(h,y),o.push(h),w===1&&x&&Vv.set(h,!0),y===1&&h.setAttribute(n,"true"),x||h.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return u(e),a.clear(),XS++,function(){o.forEach(function(d){var h=Id.get(d)-1,p=s.get(d)-1;Id.set(d,h),s.set(d,p),h||(Vv.has(d)||d.removeAttribute(r),Vv.delete(d)),p||d.removeAttribute(n)}),XS--,XS||(Id=new WeakMap,Id=new WeakMap,Vv=new WeakMap,$v={})}},lw=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=Hse(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),$se(r,i,n,"aria-hidden")):function(){return null}},ia=function(){return ia=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ia.apply(this,arguments)};function Z4(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Wse(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var qy="right-scroll-bar-position",Ky="width-before-scroll-bar",Gse="with-scroll-bars-hidden",Xse="--removed-body-scroll-bar-size";function qS(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function qse(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var Kse=typeof window<"u"?b.useLayoutEffect:b.useEffect,dD=new WeakMap;function Yse(t,e){var n=qse(null,function(r){return t.forEach(function(i){return qS(i,r)})});return Kse(function(){var r=dD.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||qS(a,null)}),s.forEach(function(a){i.has(a)||qS(a,o)})}dD.set(n,t)},[t]),n}function Jse(t){return t}function Qse(t,e){e===void 0&&(e=Jse);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function Zse(t){t===void 0&&(t={});var e=Qse(null);return e.options=ia({async:!0,ssr:!1},t),e}var ez=function(t){var e=t.sideCar,n=Z4(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,ia({},n))};ez.isSideCarExport=!0;function eoe(t,e){return t.useMedium(e),ez}var tz=Zse(),KS=function(){},cw=b.forwardRef(function(t,e){var n=b.useRef(null),r=b.useState({onScrollCapture:KS,onWheelCapture:KS,onTouchMoveCapture:KS}),i=r[0],s=r[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,p=t.noRelative,x=t.noIsolation,w=t.inert,y=t.allowPinchZoom,v=t.as,S=v===void 0?"div":v,E=t.gapMode,C=Z4(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=h,A=Yse([n,e]),k=ia(ia({},C),i);return b.createElement(b.Fragment,null,u&&b.createElement(T,{sideCar:tz,removeScrollBar:c,shards:d,noRelative:p,noIsolation:x,inert:w,setCallbacks:s,allowPinchZoom:!!y,lockRef:n,gapMode:E}),o?b.cloneElement(b.Children.only(a),ia(ia({},k),{ref:A})):b.createElement(S,ia({},k,{className:l,ref:A}),a))});cw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};cw.classNames={fullWidth:Ky,zeroRight:qy};var toe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function noe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=toe();return e&&t.setAttribute("nonce",e),t}function roe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function ioe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var soe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=noe())&&(roe(e,n),ioe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},ooe=function(){var t=soe();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},nz=function(){var t=ooe(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},aoe={left:0,top:0,right:0,gap:0},YS=function(t){return parseInt(t||"",10)||0},loe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[YS(n),YS(r),YS(i)]},coe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return aoe;var e=loe(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},uoe=nz(),Nf="data-scroll-locked",doe=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Gse,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Nf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(qy,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ky,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(qy," .").concat(qy,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ky," .").concat(Ky,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Nf,`] {
    `).concat(Xse,": ").concat(a,`px;
  }
`)},fD=function(){var t=parseInt(document.body.getAttribute(Nf)||"0",10);return isFinite(t)?t:0},foe=function(){b.useEffect(function(){return document.body.setAttribute(Nf,(fD()+1).toString()),function(){var t=fD()-1;t<=0?document.body.removeAttribute(Nf):document.body.setAttribute(Nf,t.toString())}},[])},hoe=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;foe();var s=b.useMemo(function(){return coe(i)},[i]);return b.createElement(uoe,{styles:doe(s,!e,i,n?"":"!important")})},UE=!1;if(typeof window<"u")try{var Wv=Object.defineProperty({},"passive",{get:function(){return UE=!0,!0}});window.addEventListener("test",Wv,Wv),window.removeEventListener("test",Wv,Wv)}catch{UE=!1}var Ld=UE?{passive:!1}:!1,poe=function(t){return t.tagName==="TEXTAREA"},rz=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!poe(t)&&n[e]==="visible")},moe=function(t){return rz(t,"overflowY")},goe=function(t){return rz(t,"overflowX")},hD=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=iz(t,r);if(i){var s=sz(t,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},voe=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},yoe=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},iz=function(t,e){return t==="v"?moe(e):goe(e)},sz=function(t,e){return t==="v"?voe(e):yoe(e)},xoe=function(t,e){return t==="h"&&e==="rtl"?-1:1},woe=function(t,e,n,r,i){var s=xoe(t,window.getComputedStyle(e).direction),o=s*r,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,h=0;do{if(!a)break;var p=sz(t,a),x=p[0],w=p[1],y=p[2],v=w-y-s*x;(x||v)&&iz(t,a)&&(d+=v,h+=x);var S=a.parentNode;a=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},Gv=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},pD=function(t){return[t.deltaX,t.deltaY]},mD=function(t){return t&&"current"in t?t.current:t},boe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Soe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},_oe=0,Od=[];function Eoe(t){var e=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),i=b.useState(_oe++)[0],s=b.useState(nz)[0],o=b.useRef(t);b.useEffect(function(){o.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var w=Wse([t.lockRef.current],(t.shards||[]).map(mD),!0).filter(Boolean);return w.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),w.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=b.useCallback(function(w,y){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var v=Gv(w),S=n.current,E="deltaX"in w?w.deltaX:S[0]-v[0],C="deltaY"in w?w.deltaY:S[1]-v[1],T,A=w.target,k=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in w&&k==="h"&&A.type==="range")return!1;var R=hD(k,A);if(!R)return!0;if(R?T=k:(T=k==="v"?"h":"v",R=hD(k,A)),!R)return!1;if(!r.current&&"changedTouches"in w&&(E||C)&&(r.current=T),!T)return!0;var P=r.current||T;return woe(P,y,w,P==="h"?E:C)},[]),l=b.useCallback(function(w){var y=w;if(!(!Od.length||Od[Od.length-1]!==s)){var v="deltaY"in y?pD(y):Gv(y),S=e.current.filter(function(T){return T.name===y.type&&(T.target===y.target||y.target===T.shadowParent)&&boe(T.delta,v)})[0];if(S&&S.should){y.cancelable&&y.preventDefault();return}if(!S){var E=(o.current.shards||[]).map(mD).filter(Boolean).filter(function(T){return T.contains(y.target)}),C=E.length>0?a(y,E[0]):!o.current.noIsolation;C&&y.cancelable&&y.preventDefault()}}},[]),c=b.useCallback(function(w,y,v,S){var E={name:w,delta:y,target:v,should:S,shadowParent:Coe(v)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(C){return C!==E})},1)},[]),u=b.useCallback(function(w){n.current=Gv(w),r.current=void 0},[]),d=b.useCallback(function(w){c(w.type,pD(w),w.target,a(w,t.lockRef.current))},[]),h=b.useCallback(function(w){c(w.type,Gv(w),w.target,a(w,t.lockRef.current))},[]);b.useEffect(function(){return Od.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Ld),document.addEventListener("touchmove",l,Ld),document.addEventListener("touchstart",u,Ld),function(){Od=Od.filter(function(w){return w!==s}),document.removeEventListener("wheel",l,Ld),document.removeEventListener("touchmove",l,Ld),document.removeEventListener("touchstart",u,Ld)}},[]);var p=t.removeScrollBar,x=t.inert;return b.createElement(b.Fragment,null,x?b.createElement(s,{styles:Soe(i)}):null,p?b.createElement(hoe,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Coe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Moe=eoe(tz,Eoe);var pg=b.forwardRef(function(t,e){return b.createElement(cw,ia({},t,{ref:e,sideCar:Moe}))});pg.classNames=cw.classNames;var BE=["Enter"," "],Toe=["ArrowDown","PageUp","Home"],oz=["ArrowUp","PageDown","End"],Aoe=[...Toe,...oz],Roe={ltr:[...BE,"ArrowRight"],rtl:[...BE,"ArrowLeft"]},koe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},mg="Menu",[Mm,Noe,Poe]=rg(mg),[gd,az]=es(mg,[Poe,Bc,aw]),uw=Bc(),lz=aw(),[Doe,vd]=gd(mg),[Ioe,gg]=gd(mg),cz=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:s,modal:o=!0}=t,a=uw(e),[l,c]=b.useState(null),u=b.useRef(!1),d=Zi(s),h=dg(i);return b.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),m.jsx(VT,{...a,children:m.jsx(Doe,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c,children:m.jsx(Ioe,{scope:e,onClose:b.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:o,children:r})})})};cz.displayName=mg;var Loe="MenuAnchor",ZT=b.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=uw(n);return m.jsx(ug,{...i,...r,ref:e})});ZT.displayName=Loe;var eA="MenuPortal",[Ooe,uz]=gd(eA,{forceMount:void 0}),dz=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,s=vd(eA,e);return m.jsx(Ooe,{scope:e,forceMount:n,children:m.jsx(As,{present:n||s.open,children:m.jsx(bh,{asChild:!0,container:i,children:r})})})};dz.displayName=eA;var Ys="MenuContent",[Foe,tA]=gd(Ys),fz=b.forwardRef((t,e)=>{const n=uz(Ys,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=vd(Ys,t.__scopeMenu),o=gg(Ys,t.__scopeMenu);return m.jsx(Mm.Provider,{scope:t.__scopeMenu,children:m.jsx(As,{present:r||s.open,children:m.jsx(Mm.Slot,{scope:t.__scopeMenu,children:o.modal?m.jsx(Uoe,{...i,ref:e}):m.jsx(Boe,{...i,ref:e})})})})}),Uoe=b.forwardRef((t,e)=>{const n=vd(Ys,t.__scopeMenu),r=b.useRef(null),i=Ht(e,r);return b.useEffect(()=>{const s=r.current;if(s)return lw(s)},[]),m.jsx(nA,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:rt(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Boe=b.forwardRef((t,e)=>{const n=vd(Ys,t.__scopeMenu);return m.jsx(nA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),zoe=Rc("MenuContent.ScrollLock"),nA=b.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,disableOutsideScroll:x,...w}=t,y=vd(Ys,n),v=gg(Ys,n),S=uw(n),E=lz(n),C=Noe(n),[T,A]=b.useState(null),k=b.useRef(null),R=Ht(e,k,y.onContentChange),P=b.useRef(0),M=b.useRef(""),I=b.useRef(0),z=b.useRef(null),H=b.useRef("right"),j=b.useRef(0),J=x?pg:b.Fragment,q=x?{as:zoe,allowPinchZoom:!0}:void 0,Q=F=>{var Z,pe;const D=M.current+F,ee=C().filter(ye=>!ye.disabled),W=document.activeElement,B=(Z=ee.find(ye=>ye.ref.current===W))==null?void 0:Z.textValue,K=ee.map(ye=>ye.textValue),ie=Qoe(K,D,B),oe=(pe=ee.find(ye=>ye.textValue===ie))==null?void 0:pe.ref.current;(function ye(ge){M.current=ge,window.clearTimeout(P.current),ge!==""&&(P.current=window.setTimeout(()=>ye(""),1e3))})(D),oe&&setTimeout(()=>oe.focus())};b.useEffect(()=>()=>window.clearTimeout(P.current),[]),ow();const O=b.useCallback(F=>{var ee,W;return H.current===((ee=z.current)==null?void 0:ee.side)&&eae(F,(W=z.current)==null?void 0:W.area)},[]);return m.jsx(Foe,{scope:n,searchRef:M,onItemEnter:b.useCallback(F=>{O(F)&&F.preventDefault()},[O]),onItemLeave:b.useCallback(F=>{var D;O(F)||((D=k.current)==null||D.focus(),A(null))},[O]),onTriggerLeave:b.useCallback(F=>{O(F)&&F.preventDefault()},[O]),pointerGraceTimerRef:I,onPointerGraceIntentChange:b.useCallback(F=>{z.current=F},[]),children:m.jsx(J,{...q,children:m.jsx(fg,{asChild:!0,trapped:i,onMountAutoFocus:rt(s,F=>{var D;F.preventDefault(),(D=k.current)==null||D.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:m.jsx(pd,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:p,children:m.jsx(Y4,{asChild:!0,...E,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:T,onCurrentTabStopIdChange:A,onEntryFocus:rt(l,F=>{v.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:m.jsx(Q0,{role:"menu","aria-orientation":"vertical","data-state":Az(y.open),"data-radix-menu-content":"",dir:v.dir,...S,...w,ref:R,style:{outline:"none",...w.style},onKeyDown:rt(w.onKeyDown,F=>{const ee=F.target.closest("[data-radix-menu-content]")===F.currentTarget,W=F.ctrlKey||F.altKey||F.metaKey,B=F.key.length===1;ee&&(F.key==="Tab"&&F.preventDefault(),!W&&B&&Q(F.key));const K=k.current;if(F.target!==K||!Aoe.includes(F.key))return;F.preventDefault();const oe=C().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);oz.includes(F.key)&&oe.reverse(),Yoe(oe)}),onBlur:rt(t.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(P.current),M.current="")}),onPointerMove:rt(t.onPointerMove,Tm(F=>{const D=F.target,ee=j.current!==F.clientX;if(F.currentTarget.contains(D)&&ee){const W=F.clientX>j.current?"right":"left";H.current=W,j.current=F.clientX}}))})})})})})})});fz.displayName=Ys;var joe="MenuGroup",rA=b.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return m.jsx(xt.div,{role:"group",...r,ref:e})});rA.displayName=joe;var Hoe="MenuLabel",hz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return m.jsx(xt.div,{...r,ref:e})});hz.displayName=Hoe;var $x="MenuItem",gD="menu.itemSelect",dw=b.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,s=b.useRef(null),o=gg($x,t.__scopeMenu),a=tA($x,t.__scopeMenu),l=Ht(e,s),c=b.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const h=new CustomEvent(gD,{bubbles:!0,cancelable:!0});d.addEventListener(gD,p=>r==null?void 0:r(p),{once:!0}),ET(d,h),h.defaultPrevented?c.current=!1:o.onClose()}};return m.jsx(pz,{...i,ref:l,disabled:n,onClick:rt(t.onClick,u),onPointerDown:d=>{var h;(h=t.onPointerDown)==null||h.call(t,d),c.current=!0},onPointerUp:rt(t.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)==null||h.click()}),onKeyDown:rt(t.onKeyDown,d=>{const h=a.searchRef.current!=="";n||h&&d.key===" "||BE.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});dw.displayName=$x;var pz=b.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...s}=t,o=tA($x,n),a=lz(n),l=b.useRef(null),c=Ht(e,l),[u,d]=b.useState(!1),[h,p]=b.useState("");return b.useEffect(()=>{const x=l.current;x&&p((x.textContent??"").trim())},[s.children]),m.jsx(Mm.ItemSlot,{scope:n,disabled:r,textValue:i??h,children:m.jsx(J4,{asChild:!0,...a,focusable:!r,children:m.jsx(xt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...s,ref:c,onPointerMove:rt(t.onPointerMove,Tm(x=>{r?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:rt(t.onPointerLeave,Tm(x=>o.onItemLeave(x))),onFocus:rt(t.onFocus,()=>d(!0)),onBlur:rt(t.onBlur,()=>d(!1))})})})}),Voe="MenuCheckboxItem",mz=b.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return m.jsx(wz,{scope:t.__scopeMenu,checked:n,children:m.jsx(dw,{role:"menuitemcheckbox","aria-checked":Wx(n)?"mixed":n,...i,ref:e,"data-state":sA(n),onSelect:rt(i.onSelect,()=>r==null?void 0:r(Wx(n)?!0:!n),{checkForDefaultPrevented:!1})})})});mz.displayName=Voe;var gz="MenuRadioGroup",[$oe,Woe]=gd(gz,{value:void 0,onValueChange:()=>{}}),vz=b.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,s=Zi(r);return m.jsx($oe,{scope:t.__scopeMenu,value:n,onValueChange:s,children:m.jsx(rA,{...i,ref:e})})});vz.displayName=gz;var yz="MenuRadioItem",xz=b.forwardRef((t,e)=>{const{value:n,...r}=t,i=Woe(yz,t.__scopeMenu),s=n===i.value;return m.jsx(wz,{scope:t.__scopeMenu,checked:s,children:m.jsx(dw,{role:"menuitemradio","aria-checked":s,...r,ref:e,"data-state":sA(s),onSelect:rt(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});xz.displayName=yz;var iA="MenuItemIndicator",[wz,Goe]=gd(iA,{checked:!1}),bz=b.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,s=Goe(iA,n);return m.jsx(As,{present:r||Wx(s.checked)||s.checked===!0,children:m.jsx(xt.span,{...i,ref:e,"data-state":sA(s.checked)})})});bz.displayName=iA;var Xoe="MenuSeparator",Sz=b.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return m.jsx(xt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Sz.displayName=Xoe;var qoe="MenuArrow",_z=b.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=uw(n);return m.jsx(Z0,{...i,...r,ref:e})});_z.displayName=qoe;var Koe="MenuSub",[kNe,Ez]=gd(Koe),Ap="MenuSubTrigger",Cz=b.forwardRef((t,e)=>{const n=vd(Ap,t.__scopeMenu),r=gg(Ap,t.__scopeMenu),i=Ez(Ap,t.__scopeMenu),s=tA(Ap,t.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>u,[u]),b.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),m.jsx(ZT,{asChild:!0,...c,children:m.jsx(pz,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":Az(n.open),...t,ref:cl(e,i.onTriggerChange),onClick:d=>{var h;(h=t.onClick)==null||h.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:rt(t.onPointerMove,Tm(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:rt(t.onPointerLeave,Tm(d=>{var p,x;u();const h=(p=n.content)==null?void 0:p.getBoundingClientRect();if(h){const w=(x=n.content)==null?void 0:x.dataset.side,y=w==="right",v=y?-5:5,S=h[y?"left":"right"],E=h[y?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:S,y:h.top},{x:E,y:h.top},{x:E,y:h.bottom},{x:S,y:h.bottom}],side:w}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:rt(t.onKeyDown,d=>{var p;const h=s.searchRef.current!=="";t.disabled||h&&d.key===" "||Roe[r.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});Cz.displayName=Ap;var Mz="MenuSubContent",Tz=b.forwardRef((t,e)=>{const n=uz(Ys,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,s=vd(Ys,t.__scopeMenu),o=gg(Ys,t.__scopeMenu),a=Ez(Mz,t.__scopeMenu),l=b.useRef(null),c=Ht(e,l);return m.jsx(Mm.Provider,{scope:t.__scopeMenu,children:m.jsx(As,{present:r||s.open,children:m.jsx(Mm.Slot,{scope:t.__scopeMenu,children:m.jsx(nA,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:rt(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:rt(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:rt(t.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),h=koe[o.dir].includes(u.key);d&&h&&(s.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});Tz.displayName=Mz;function Az(t){return t?"open":"closed"}function Wx(t){return t==="indeterminate"}function sA(t){return Wx(t)?"indeterminate":t?"checked":"unchecked"}function Yoe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Joe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Qoe(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Joe(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function Zoe(t,e){const{x:n,y:r}=t;let i=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,h=l.y;u>r!=h>r&&n<(d-c)*(r-u)/(h-u)+c&&(i=!i)}return i}function eae(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Zoe(n,e)}function Tm(t){return e=>e.pointerType==="mouse"?t(e):void 0}var tae=cz,nae=ZT,rae=dz,iae=fz,sae=rA,oae=hz,aae=dw,lae=mz,cae=vz,uae=xz,dae=bz,fae=Sz,hae=_z,pae=Cz,mae=Tz,fw="DropdownMenu",[gae,NNe]=es(fw,[az]),Pi=az(),[vae,Rz]=gae(fw),kz=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=Pi(e),c=b.useRef(null),[u,d]=Cs({prop:i,defaultProp:s??!1,onChange:o,caller:fw});return m.jsx(vae,{scope:e,triggerId:Xr(),triggerRef:c,contentId:Xr(),open:u,onOpenChange:d,onOpenToggle:b.useCallback(()=>d(h=>!h),[d]),modal:a,children:m.jsx(tae,{...l,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};kz.displayName=fw;var Nz="DropdownMenuTrigger",Pz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,s=Rz(Nz,n),o=Pi(n);return m.jsx(nae,{asChild:!0,...o,children:m.jsx(xt.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:cl(e,s.triggerRef),onPointerDown:rt(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:rt(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});Pz.displayName=Nz;var yae="DropdownMenuPortal",Dz=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Pi(e);return m.jsx(rae,{...r,...n})};Dz.displayName=yae;var Iz="DropdownMenuContent",Lz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Rz(Iz,n),s=Pi(n),o=b.useRef(!1);return m.jsx(iae,{id:i.contentId,"aria-labelledby":i.triggerId,...s,...r,ref:e,onCloseAutoFocus:rt(t.onCloseAutoFocus,a=>{var l;o.current||(l=i.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:rt(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Lz.displayName=Iz;var xae="DropdownMenuGroup",wae=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pi(n);return m.jsx(sae,{...i,...r,ref:e})});wae.displayName=xae;var bae="DropdownMenuLabel",Oz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pi(n);return m.jsx(oae,{...i,...r,ref:e})});Oz.displayName=bae;var Sae="DropdownMenuItem",Fz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pi(n);return m.jsx(aae,{...i,...r,ref:e})});Fz.displayName=Sae;var _ae="DropdownMenuCheckboxItem",Uz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pi(n);return m.jsx(lae,{...i,...r,ref:e})});Uz.displayName=_ae;var Eae="DropdownMenuRadioGroup",Cae=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pi(n);return m.jsx(cae,{...i,...r,ref:e})});Cae.displayName=Eae;var Mae="DropdownMenuRadioItem",Bz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pi(n);return m.jsx(uae,{...i,...r,ref:e})});Bz.displayName=Mae;var Tae="DropdownMenuItemIndicator",zz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pi(n);return m.jsx(dae,{...i,...r,ref:e})});zz.displayName=Tae;var Aae="DropdownMenuSeparator",jz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pi(n);return m.jsx(fae,{...i,...r,ref:e})});jz.displayName=Aae;var Rae="DropdownMenuArrow",kae=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pi(n);return m.jsx(hae,{...i,...r,ref:e})});kae.displayName=Rae;var Nae="DropdownMenuSubTrigger",Hz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pi(n);return m.jsx(pae,{...i,...r,ref:e})});Hz.displayName=Nae;var Pae="DropdownMenuSubContent",Vz=b.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Pi(n);return m.jsx(mae,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Vz.displayName=Pae;var Dae=kz,Iae=Pz,Lae=Dz,$z=Lz,Wz=Oz,Gz=Fz,Xz=Uz,qz=Bz,Kz=zz,Yz=jz,Jz=Hz,Qz=Vz;const hw=Dae,pw=Iae,Oae=b.forwardRef(({className:t,inset:e,children:n,...r},i)=>m.jsxs(Jz,{ref:i,className:_t("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,m.jsx(fee,{className:"ml-auto h-4 w-4"})]}));Oae.displayName=Jz.displayName;const Fae=b.forwardRef(({className:t,...e},n)=>m.jsx(Qz,{ref:n,className:_t("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));Fae.displayName=Qz.displayName;const vg=b.forwardRef(({className:t,sideOffset:e=4,...n},r)=>m.jsx(Lae,{children:m.jsx($z,{ref:r,sideOffset:e,className:_t("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));vg.displayName=$z.displayName;const fa=b.forwardRef(({className:t,inset:e,...n},r)=>m.jsx(Gz,{ref:r,className:_t("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));fa.displayName=Gz.displayName;const Uae=b.forwardRef(({className:t,children:e,checked:n,...r},i)=>m.jsxs(Xz,{ref:i,className:_t("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(Kz,{children:m.jsx(eo,{className:"h-4 w-4"})})}),e]}));Uae.displayName=Xz.displayName;const Bae=b.forwardRef(({className:t,children:e,...n},r)=>m.jsxs(qz,{ref:r,className:_t("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(Kz,{children:m.jsx(mee,{className:"h-2 w-2 fill-current"})})}),e]}));Bae.displayName=qz.displayName;const Zz=b.forwardRef(({className:t,inset:e,...n},r)=>m.jsx(Wz,{ref:r,className:_t("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));Zz.displayName=Wz.displayName;const ef=b.forwardRef(({className:t,...e},n)=>m.jsx(Yz,{ref:n,className:_t("-mx-1 my-1 h-px bg-muted",t),...e}));ef.displayName=Yz.displayName;const zae=()=>{const{currentUser:t,login:e,logout:n}=ro(),{theme:r,setTheme:i}=no(),{aiEnabled:s,setAiEnabled:o}=JT(),{toast:a}=to();pl();const l=md(),c=()=>{try{e()}catch(p){console.error("Error initiating login:",p),a({title:"Error",description:"Could not start sign-in process. Please try again.",variant:"destructive"})}},u=(p,x)=>{if(p&&p.trim()){const w=p.trim().split(" ");return w.length>=2?(w[0][0]+w[w.length-1][0]).toUpperCase():w[0][0].toUpperCase()}return x?x[0].toUpperCase():"U"},d=async()=>{try{await n(),a({title:"Goodbye!",description:"Successfully signed out."})}catch{a({title:"Error",description:"Failed to sign out. Please try again.",variant:"destructive"})}},h=p=>{l(p==="/"?t?"/canvas":"/home":p)};return m.jsx("nav",{className:"border-b backdrop-blur supports-[backdrop-filter]:bg-background/60",style:{backgroundColor:r==="dark"?"#1e293b":"#ffffff",borderBottomColor:r==="dark"?"#475569":"#e5e7eb"},children:m.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex justify-between items-center h-16",children:[m.jsx("div",{className:"flex items-center",children:m.jsx("img",{src:r==="dark"?"/cover_whitetext.png":"/cover.png",alt:"Itemize",className:"h-16 w-auto cursor-pointer",onClick:()=>h("/")})}),m.jsx("div",{className:"flex items-center md:space-x-4",children:t?m.jsxs(hw,{children:[m.jsx(pw,{asChild:!0,children:m.jsx(nt,{variant:"ghost",className:"relative h-9 w-9 rounded-full p-0 bg-blue-600 hover:bg-blue-700 border-0",children:m.jsx(zee,{className:"h-5 w-5 text-white"})})}),m.jsxs(vg,{className:"w-64",align:"end",forceMount:!0,children:[m.jsx(Zz,{className:"font-normal",children:m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-medium text-sm",children:u(t.name||"",t.email||"")}),m.jsxs("div",{className:"flex flex-col space-y-1",children:[m.jsx("p",{className:"text-sm font-medium leading-none",children:t.name||"User"}),m.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:t.email})]})]})}),m.jsx(ef,{}),m.jsxs("div",{className:"px-2 py-2",children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsx(Lee,{className:"mr-2 h-4 w-4 text-blue-600"}),m.jsx("span",{className:"text-sm font-medium",children:"Theme"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2 ml-6",children:[m.jsxs("button",{onClick:()=>i("light"),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm transition-colors ${r==="light"?"bg-accent text-accent-foreground":"hover:bg-accent/80 hover:text-accent-foreground"}`,children:[m.jsx(Fee,{className:"h-4 w-4"}),"Light"]}),m.jsxs("button",{onClick:()=>i("dark"),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm transition-colors ${r==="dark"?"bg-accent text-accent-foreground":"hover:bg-accent/80 hover:text-accent-foreground"}`,children:[m.jsx(kee,{className:"h-4 w-4"}),"Dark"]})]})]}),m.jsx(ef,{}),m.jsxs("div",{className:"px-2 py-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(oc,{className:"mr-2 h-4 w-4 text-blue-600"}),m.jsx(Ci,{htmlFor:"ai-suggest-toggle",className:"text-sm font-medium",children:"AI Enhancements"})]}),m.jsx(j4,{id:"ai-suggest-toggle",checked:s,onCheckedChange:o})]}),m.jsx("p",{className:"text-xs text-muted-foreground mt-1 ml-6",children:"Get AI-powered suggestions"})]}),m.jsx(ef,{}),m.jsxs(fa,{onClick:()=>h("/help"),children:[m.jsx(SB,{className:"mr-2 h-4 w-4 text-blue-600"}),m.jsx("span",{children:"Help"})]}),m.jsx(ef,{}),m.jsxs(fa,{onClick:()=>h("/status"),children:[m.jsx(AT,{className:"mr-2 h-4 w-4 text-blue-600"}),m.jsx("span",{children:"Status"})]}),m.jsx(ef,{}),m.jsxs(fa,{onClick:d,children:[m.jsx(Tee,{className:"mr-2 h-4 w-4 text-red-600"}),m.jsx("span",{children:"Log out"})]})]})]}):m.jsxs(nt,{onClick:c,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-light",size:"sm",children:[m.jsx(Mee,{className:"mr-2 h-4 w-4"}),"Sign in"]})})]})})})},jae=()=>{const{theme:t}=no(),e=md();pl(),to();const{currentUser:n}=ro(),r=new Date().getFullYear(),i=()=>{window.scrollTo({top:0,behavior:"smooth"})},s=o=>{e(o)};return m.jsx("footer",{className:"border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 mt-12",children:m.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("div",{className:"flex items-center mb-4",children:m.jsx("img",{src:t==="dark"?"/cover_whitetext.png":"/cover.png",alt:"Itemize",className:"h-10 w-auto cursor-pointer",onClick:()=>s("/")})}),m.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"Organize thoughts, ideas, projects and more with AI-enhanced tools."})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium mb-4",children:"Quick Links"}),m.jsxs("ul",{className:"space-y-2",children:[m.jsx("li",{}),n&&m.jsx("li",{children:m.jsxs(nt,{variant:"ghost",className:"w-full justify-start pl-2 text-muted-foreground hover:text-foreground",onClick:()=>s("/canvas"),children:[m.jsx(Sh,{className:"mr-2 h-4 w-4"}),"Canvas"]})}),m.jsx("li",{children:m.jsxs(nt,{variant:"ghost",className:"w-full justify-start pl-2 text-muted-foreground hover:text-foreground",onClick:()=>s("/help"),children:[m.jsx(SB,{className:"mr-2 h-4 w-4"}),"Help"]})}),m.jsx("li",{children:m.jsxs(nt,{variant:"ghost",className:"w-full justify-start pl-2 text-muted-foreground hover:text-foreground",onClick:()=>s("/status"),children:[m.jsx(AT,{className:"mr-2 h-4 w-4"}),"Status"]})})]})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-medium mb-4",children:"Connect"}),m.jsxs("div",{className:"flex space-x-4 mb-4",children:[m.jsx(nt,{variant:"outline",size:"icon",onClick:()=>window.open("https://twitter.com/codebymv","_blank"),children:m.jsx(Uee,{className:"h-4 w-4"})}),m.jsx(nt,{variant:"outline",size:"icon",onClick:()=>window.open("https://github.com/codebymv/itemize","_blank"),children:m.jsx(bee,{className:"h-4 w-4"})}),m.jsx(nt,{variant:"outline",size:"icon",onClick:()=>window.open("https://codebymv.com","_blank"),children:m.jsx(See,{className:"h-4 w-4"})})]})]})]}),m.jsxs("div",{className:"border-t pt-6 flex flex-col md:flex-row justify-between items-center",children:[m.jsxs("p",{className:"text-sm text-muted-foreground mb-4 md:mb-0",children:[" ",r," Itemize. All rights reserved."]}),m.jsxs("div",{className:"flex items-center space-x-6",children:[m.jsx(nt,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",onClick:()=>s("/help/terms-of-service"),children:"Terms of Service"}),m.jsxs(nt,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground flex items-center",onClick:i,children:["Back to top",m.jsx(dee,{className:"ml-1 h-4 w-4"})]})]})]})]})})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const oA="177",Hae=0,vD=1,Vae=2,ej=1,$ae=2,Ha=3,Pc=0,Yi=1,sa=2,wc=0,Pf=1,yD=2,xD=3,wD=4,Wae=5,wu=100,Gae=101,Xae=102,qae=103,Kae=104,Yae=200,Jae=201,Qae=202,Zae=203,zE=204,jE=205,ele=206,tle=207,nle=208,rle=209,ile=210,sle=211,ole=212,ale=213,lle=214,HE=0,VE=1,$E=2,rh=3,WE=4,GE=5,XE=6,qE=7,tj=0,cle=1,ule=2,bc=0,dle=1,fle=2,hle=3,ple=4,mle=5,gle=6,vle=7,nj=300,ih=301,sh=302,KE=303,YE=304,mw=306,JE=1e3,Ru=1001,QE=1002,Ro=1003,yle=1004,Xv=1005,aa=1006,JS=1007,ku=1008,ga=1009,rj=1010,ij=1011,Am=1012,aA=1013,td=1014,Qa=1015,yg=1016,lA=1017,cA=1018,Rm=1020,sj=35902,oj=1021,aj=1022,Mo=1023,km=1026,Nm=1027,lj=1028,uA=1029,cj=1030,dA=1031,fA=1033,Yy=33776,Jy=33777,Qy=33778,Zy=33779,ZE=35840,eC=35841,tC=35842,nC=35843,rC=36196,iC=37492,sC=37496,oC=37808,aC=37809,lC=37810,cC=37811,uC=37812,dC=37813,fC=37814,hC=37815,pC=37816,mC=37817,gC=37818,vC=37819,yC=37820,xC=37821,ex=36492,wC=36494,bC=36495,uj=36283,SC=36284,_C=36285,EC=36286,xle=3200,wle=3201,ble=0,Sle=1,Jl="",Bs="srgb",oh="srgb-linear",Gx="linear",Mn="srgb",Fd=7680,bD=519,_le=512,Ele=513,Cle=514,dj=515,Mle=516,Tle=517,Ale=518,Rle=519,SD=35044,_D="300 es",Za=2e3,Xx=2001;class Ah{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){const r=this._listeners;return r===void 0?!1:r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){const r=this._listeners;if(r===void 0)return;const i=r[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const r=n[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const ii=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],QS=Math.PI/180,CC=180/Math.PI;function xg(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ii[t&255]+ii[t>>8&255]+ii[t>>16&255]+ii[t>>24&255]+"-"+ii[e&255]+ii[e>>8&255]+"-"+ii[e>>16&15|64]+ii[e>>24&255]+"-"+ii[n&63|128]+ii[n>>8&255]+"-"+ii[n>>16&255]+ii[n>>24&255]+ii[r&255]+ii[r>>8&255]+ii[r>>16&255]+ii[r>>24&255]).toLowerCase()}function ln(t,e,n){return Math.max(e,Math.min(n,t))}function kle(t,e){return(t%e+e)%e}function ZS(t,e,n){return(1-n)*t+n*e}function hp(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function zi(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}class En{constructor(e=0,n=0){En.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=ln(this.x,e.x,n.x),this.y=ln(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=ln(this.x,e,n),this.y=ln(this.y,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(ln(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(ln(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wg{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],c=r[i+1],u=r[i+2],d=r[i+3];const h=s[o+0],p=s[o+1],x=s[o+2],w=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d;return}if(a===1){e[n+0]=h,e[n+1]=p,e[n+2]=x,e[n+3]=w;return}if(d!==w||l!==h||c!==p||u!==x){let y=1-a;const v=l*h+c*p+u*x+d*w,S=v>=0?1:-1,E=1-v*v;if(E>Number.EPSILON){const T=Math.sqrt(E),A=Math.atan2(T,v*S);y=Math.sin(y*A)/T,a=Math.sin(a*A)/T}const C=a*S;if(l=l*y+h*C,c=c*y+p*C,u=u*y+x*C,d=d*y+w*C,y===1-a){const T=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=T,c*=T,u*=T,d*=T}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=d}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],c=r[i+2],u=r[i+3],d=s[o],h=s[o+1],p=s[o+2],x=s[o+3];return e[n]=a*x+u*d+l*p-c*h,e[n+1]=l*x+u*h+c*d-a*p,e[n+2]=c*x+u*p+a*h-l*d,e[n+3]=u*x-a*d-l*h-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(r/2),u=a(i/2),d=a(s/2),h=l(r/2),p=l(i/2),x=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*p*x,this._y=c*p*d-h*u*x,this._z=c*u*x+h*p*d,this._w=c*u*d-h*p*x;break;case"YXZ":this._x=h*u*d+c*p*x,this._y=c*p*d-h*u*x,this._z=c*u*x-h*p*d,this._w=c*u*d+h*p*x;break;case"ZXY":this._x=h*u*d-c*p*x,this._y=c*p*d+h*u*x,this._z=c*u*x+h*p*d,this._w=c*u*d-h*p*x;break;case"ZYX":this._x=h*u*d-c*p*x,this._y=c*p*d+h*u*x,this._z=c*u*x-h*p*d,this._w=c*u*d+h*p*x;break;case"YZX":this._x=h*u*d+c*p*x,this._y=c*p*d+h*u*x,this._z=c*u*x-h*p*d,this._w=c*u*d-h*p*x;break;case"XZY":this._x=h*u*d-c*p*x,this._y=c*p*d-h*u*x,this._z=c*u*x+h*p*d,this._w=c*u*d+h*p*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],d=n[10],h=r+a+d;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(u-l)*p,this._y=(s-c)*p,this._z=(o-i)*p}else if(r>a&&r>d){const p=2*Math.sqrt(1+r-a-d);this._w=(u-l)/p,this._x=.25*p,this._y=(i+o)/p,this._z=(s+c)/p}else if(a>d){const p=2*Math.sqrt(1+a-r-d);this._w=(s-c)/p,this._x=(i+o)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+d-r-a);this._w=(o-i)/p,this._x=(s+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ln(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=r*u+o*a+i*c-s*l,this._y=i*u+o*l+s*a-r*c,this._z=s*u+o*c+r*l-i*a,this._w=o*u-r*a-i*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-n;return this._w=p*o+n*this._w,this._x=p*r+n*this._x,this._y=p*i+n*this._y,this._z=p*s+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=o*d+this._w*h,this._x=r*d+this._x*h,this._y=i*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),s=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class be{constructor(e=0,n=0,r=0){be.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(ED.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(ED.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*i-a*r),u=2*(a*n-s*i),d=2*(s*r-o*n);return this.x=n+l*c+o*d-a*u,this.y=r+l*u+a*c-s*d,this.z=i+l*d+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=ln(this.x,e.x,n.x),this.y=ln(this.y,e.y,n.y),this.z=ln(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=ln(this.x,e,n),this.y=ln(this.y,e,n),this.z=ln(this.z,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(ln(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return e1.copy(this).projectOnVector(e),this.sub(e1)}reflect(e){return this.sub(e1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(ln(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,r=Math.sqrt(1-n*n);return this.x=r*Math.cos(e),this.y=n,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const e1=new be,ED=new wg;class Gt{constructor(e,n,r,i,s,o,a,l,c){Gt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c)}set(e,n,r,i,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=i,u[2]=a,u[3]=n,u[4]=s,u[5]=l,u[6]=r,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],c=r[1],u=r[4],d=r[7],h=r[2],p=r[5],x=r[8],w=i[0],y=i[3],v=i[6],S=i[1],E=i[4],C=i[7],T=i[2],A=i[5],k=i[8];return s[0]=o*w+a*S+l*T,s[3]=o*y+a*E+l*A,s[6]=o*v+a*C+l*k,s[1]=c*w+u*S+d*T,s[4]=c*y+u*E+d*A,s[7]=c*v+u*C+d*k,s[2]=h*w+p*S+x*T,s[5]=h*y+p*E+x*A,s[8]=h*v+p*C+x*k,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-r*s*u+r*a*l+i*s*c-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,p=c*s-o*l,x=n*d+r*h+i*p;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=d*w,e[1]=(i*c-u*r)*w,e[2]=(a*r-i*o)*w,e[3]=h*w,e[4]=(u*n-i*l)*w,e[5]=(i*s-a*n)*w,e[6]=p*w,e[7]=(r*l-c*n)*w,e[8]=(o*n-r*s)*w,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(r*l,r*c,-r*(l*o+c*a)+o+e,-i*c,i*l,-i*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(t1.makeScale(e,n)),this}rotate(e){return this.premultiply(t1.makeRotation(-e)),this}translate(e,n){return this.premultiply(t1.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const t1=new Gt;function fj(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function qx(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Nle(){const t=qx("canvas");return t.style.display="block",t}const CD={};function Df(t){t in CD||(CD[t]=!0,console.warn(t))}function Ple(t,e,n){return new Promise(function(r,i){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:i();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:r()}}setTimeout(s,n)})}function Dle(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Ile(t){const e=t.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const MD=new Gt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),TD=new Gt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Lle(){const t={enabled:!0,workingColorSpace:oh,spaces:{},convert:function(i,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===Mn&&(i.r=nl(i.r),i.g=nl(i.g),i.b=nl(i.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(i.applyMatrix3(this.spaces[s].toXYZ),i.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Mn&&(i.r=If(i.r),i.g=If(i.g),i.b=If(i.b))),i},workingToColorSpace:function(i,s){return this.convert(i,this.workingColorSpace,s)},colorSpaceToWorking:function(i,s){return this.convert(i,s,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Jl?Gx:this.spaces[i].transfer},getLuminanceCoefficients:function(i,s=this.workingColorSpace){return i.fromArray(this.spaces[s].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,s,o){return i.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,s){return Df("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(i,s)},toWorkingColorSpace:function(i,s){return Df("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(i,s)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[oh]:{primaries:e,whitePoint:r,transfer:Gx,toXYZ:MD,fromXYZ:TD,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:Bs},outputColorSpaceConfig:{drawingBufferColorSpace:Bs}},[Bs]:{primaries:e,whitePoint:r,transfer:Mn,toXYZ:MD,fromXYZ:TD,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:Bs}}}),t}const gn=Lle();function nl(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function If(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Ud;class Ole{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let r;if(e instanceof HTMLCanvasElement)r=e;else{Ud===void 0&&(Ud=qx("canvas")),Ud.width=e.width,Ud.height=e.height;const i=Ud.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),r=Ud}return r.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=qx("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=nl(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(nl(n[r]/255)*255):n[r]=nl(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Fle=0;class hA{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Fle++}),this.uuid=xg(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const n=this.data;return n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(n1(i[o].image)):s.push(n1(i[o]))}else s=n1(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function n1(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Ole.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Ule=0;const r1=new be;class Ji extends Ah{constructor(e=Ji.DEFAULT_IMAGE,n=Ji.DEFAULT_MAPPING,r=Ru,i=Ru,s=aa,o=ku,a=Mo,l=ga,c=Ji.DEFAULT_ANISOTROPY,u=Jl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ule++}),this.uuid=xg(),this.name="",this.source=new hA(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new En(0,0),this.repeat=new En(1,1),this.center=new En(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Gt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(r1).x}get height(){return this.source.getSize(r1).y}get depth(){return this.source.getSize(r1).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Texture.setValues(): parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Texture.setValues(): property '${n}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==nj)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case JE:e.x=e.x-Math.floor(e.x);break;case Ru:e.x=e.x<0?0:1;break;case QE:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case JE:e.y=e.y-Math.floor(e.y);break;case Ru:e.y=e.y<0?0:1;break;case QE:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ji.DEFAULT_IMAGE=null;Ji.DEFAULT_MAPPING=nj;Ji.DEFAULT_ANISOTROPY=1;class nr{constructor(e=0,n=0,r=0,i=1){nr.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,c=l[0],u=l[4],d=l[8],h=l[1],p=l[5],x=l[9],w=l[2],y=l[6],v=l[10];if(Math.abs(u-h)<.01&&Math.abs(d-w)<.01&&Math.abs(x-y)<.01){if(Math.abs(u+h)<.1&&Math.abs(d+w)<.1&&Math.abs(x+y)<.1&&Math.abs(c+p+v-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const E=(c+1)/2,C=(p+1)/2,T=(v+1)/2,A=(u+h)/4,k=(d+w)/4,R=(x+y)/4;return E>C&&E>T?E<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(E),i=A/r,s=k/r):C>T?C<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(C),r=A/i,s=R/i):T<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(T),r=k/s,i=R/s),this.set(r,i,s,n),this}let S=Math.sqrt((y-x)*(y-x)+(d-w)*(d-w)+(h-u)*(h-u));return Math.abs(S)<.001&&(S=1),this.x=(y-x)/S,this.y=(d-w)/S,this.z=(h-u)/S,this.w=Math.acos((c+p+v-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=ln(this.x,e.x,n.x),this.y=ln(this.y,e.y,n.y),this.z=ln(this.z,e.z,n.z),this.w=ln(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=ln(this.x,e,n),this.y=ln(this.y,e,n),this.z=ln(this.z,e,n),this.w=ln(this.w,e,n),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(ln(r,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ble extends Ah{constructor(e=1,n=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:aa,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=r.depth,this.scissor=new nr(0,0,e,n),this.scissorTest=!1,this.viewport=new nr(0,0,e,n);const i={width:e,height:n,depth:r.depth},s=new Ji(i);this.textures=[];const o=r.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){const n={minFilter:aa,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let r=0;r<this.textures.length;r++)this.textures[r].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.textures.length;i<s;i++)this.textures[i].image.width=e,this.textures[i].image.height=n,this.textures[i].image.depth=r,this.textures[i].isArrayTexture=this.textures[i].image.depth>1;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const i=Object.assign({},e.textures[n].image);this.textures[n].source=new hA(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class nd extends Ble{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class hj extends Ji{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Ro,this.minFilter=Ro,this.wrapR=Ru,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class zle extends Ji{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Ro,this.minFilter=Ro,this.wrapR=Ru,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class bg{constructor(e=new be(1/0,1/0,1/0),n=new be(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(fo.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(fo.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=fo.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const s=r.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,fo):fo.fromBufferAttribute(s,o),fo.applyMatrix4(e.matrixWorld),this.expandByPoint(fo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),qv.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),qv.copy(r.boundingBox)),qv.applyMatrix4(e.matrixWorld),this.union(qv)}const i=e.children;for(let s=0,o=i.length;s<o;s++)this.expandByObject(i[s],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,fo),fo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(pp),Kv.subVectors(this.max,pp),Bd.subVectors(e.a,pp),zd.subVectors(e.b,pp),jd.subVectors(e.c,pp),Dl.subVectors(zd,Bd),Il.subVectors(jd,zd),cu.subVectors(Bd,jd);let n=[0,-Dl.z,Dl.y,0,-Il.z,Il.y,0,-cu.z,cu.y,Dl.z,0,-Dl.x,Il.z,0,-Il.x,cu.z,0,-cu.x,-Dl.y,Dl.x,0,-Il.y,Il.x,0,-cu.y,cu.x,0];return!i1(n,Bd,zd,jd,Kv)||(n=[1,0,0,0,1,0,0,0,1],!i1(n,Bd,zd,jd,Kv))?!1:(Yv.crossVectors(Dl,Il),n=[Yv.x,Yv.y,Yv.z],i1(n,Bd,zd,jd,Kv))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,fo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(fo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(La[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),La[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),La[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),La[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),La[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),La[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),La[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),La[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(La),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const La=[new be,new be,new be,new be,new be,new be,new be,new be],fo=new be,qv=new bg,Bd=new be,zd=new be,jd=new be,Dl=new be,Il=new be,cu=new be,pp=new be,Kv=new be,Yv=new be,uu=new be;function i1(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){uu.fromArray(t,s);const a=i.x*Math.abs(uu.x)+i.y*Math.abs(uu.y)+i.z*Math.abs(uu.z),l=e.dot(uu),c=n.dot(uu),u=r.dot(uu);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const jle=new bg,mp=new be,s1=new be;class pA{constructor(e=new be,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):jle.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;mp.subVectors(e,this.center);const n=mp.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(mp,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(s1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(mp.copy(e.center).add(s1)),this.expandByPoint(mp.copy(e.center).sub(s1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Oa=new be,o1=new be,Jv=new be,Ll=new be,a1=new be,Qv=new be,l1=new be;class Hle{constructor(e=new be,n=new be(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Oa)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Oa.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Oa.copy(this.origin).addScaledVector(this.direction,n),Oa.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){o1.copy(e).add(n).multiplyScalar(.5),Jv.copy(n).sub(e).normalize(),Ll.copy(this.origin).sub(o1);const s=e.distanceTo(n)*.5,o=-this.direction.dot(Jv),a=Ll.dot(this.direction),l=-Ll.dot(Jv),c=Ll.lengthSq(),u=Math.abs(1-o*o);let d,h,p,x;if(u>0)if(d=o*l-a,h=o*a-l,x=s*u,d>=0)if(h>=-x)if(h<=x){const w=1/u;d*=w,h*=w,p=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*l)+c;else h<=-x?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),p=-d*d+h*(h+2*l)+c):h<=x?(d=0,h=Math.min(Math.max(-s,-l),s),p=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),p=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*l)+c;return r&&r.copy(this.origin).addScaledVector(this.direction,d),i&&i.copy(o1).addScaledVector(Jv,h),p}intersectSphere(e,n){Oa.subVectors(e.center,this.origin);const r=Oa.dot(this.direction),i=Oa.dot(Oa)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Oa)!==null}intersectTriangle(e,n,r,i,s){a1.subVectors(n,e),Qv.subVectors(r,e),l1.crossVectors(a1,Qv);let o=this.direction.dot(l1),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ll.subVectors(this.origin,e);const l=a*this.direction.dot(Qv.crossVectors(Ll,Qv));if(l<0)return null;const c=a*this.direction.dot(a1.cross(Ll));if(c<0||l+c>o)return null;const u=-a*Ll.dot(l1);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class rr{constructor(e,n,r,i,s,o,a,l,c,u,d,h,p,x,w,y){rr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,c,u,d,h,p,x,w,y)}set(e,n,r,i,s,o,a,l,c,u,d,h,p,x,w,y){const v=this.elements;return v[0]=e,v[4]=n,v[8]=r,v[12]=i,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=d,v[14]=h,v[3]=p,v[7]=x,v[11]=w,v[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new rr().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Hd.setFromMatrixColumn(e,0).length(),s=1/Hd.setFromMatrixColumn(e,1).length(),o=1/Hd.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),c=Math.sin(i),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const h=o*u,p=o*d,x=a*u,w=a*d;n[0]=l*u,n[4]=-l*d,n[8]=c,n[1]=p+x*c,n[5]=h-w*c,n[9]=-a*l,n[2]=w-h*c,n[6]=x+p*c,n[10]=o*l}else if(e.order==="YXZ"){const h=l*u,p=l*d,x=c*u,w=c*d;n[0]=h+w*a,n[4]=x*a-p,n[8]=o*c,n[1]=o*d,n[5]=o*u,n[9]=-a,n[2]=p*a-x,n[6]=w+h*a,n[10]=o*l}else if(e.order==="ZXY"){const h=l*u,p=l*d,x=c*u,w=c*d;n[0]=h-w*a,n[4]=-o*d,n[8]=x+p*a,n[1]=p+x*a,n[5]=o*u,n[9]=w-h*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const h=o*u,p=o*d,x=a*u,w=a*d;n[0]=l*u,n[4]=x*c-p,n[8]=h*c+w,n[1]=l*d,n[5]=w*c+h,n[9]=p*c-x,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const h=o*l,p=o*c,x=a*l,w=a*c;n[0]=l*u,n[4]=w-h*d,n[8]=x*d+p,n[1]=d,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=p*d+x,n[10]=h-w*d}else if(e.order==="XZY"){const h=o*l,p=o*c,x=a*l,w=a*c;n[0]=l*u,n[4]=-d,n[8]=c*u,n[1]=h*d+w,n[5]=o*u,n[9]=p*d-x,n[2]=x*d-p,n[6]=a*u,n[10]=w*d+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Vle,e,$le)}lookAt(e,n,r){const i=this.elements;return fs.subVectors(e,n),fs.lengthSq()===0&&(fs.z=1),fs.normalize(),Ol.crossVectors(r,fs),Ol.lengthSq()===0&&(Math.abs(r.z)===1?fs.x+=1e-4:fs.z+=1e-4,fs.normalize(),Ol.crossVectors(r,fs)),Ol.normalize(),Zv.crossVectors(fs,Ol),i[0]=Ol.x,i[4]=Zv.x,i[8]=fs.x,i[1]=Ol.y,i[5]=Zv.y,i[9]=fs.y,i[2]=Ol.z,i[6]=Zv.z,i[10]=fs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],c=r[12],u=r[1],d=r[5],h=r[9],p=r[13],x=r[2],w=r[6],y=r[10],v=r[14],S=r[3],E=r[7],C=r[11],T=r[15],A=i[0],k=i[4],R=i[8],P=i[12],M=i[1],I=i[5],z=i[9],H=i[13],j=i[2],J=i[6],q=i[10],Q=i[14],O=i[3],F=i[7],D=i[11],ee=i[15];return s[0]=o*A+a*M+l*j+c*O,s[4]=o*k+a*I+l*J+c*F,s[8]=o*R+a*z+l*q+c*D,s[12]=o*P+a*H+l*Q+c*ee,s[1]=u*A+d*M+h*j+p*O,s[5]=u*k+d*I+h*J+p*F,s[9]=u*R+d*z+h*q+p*D,s[13]=u*P+d*H+h*Q+p*ee,s[2]=x*A+w*M+y*j+v*O,s[6]=x*k+w*I+y*J+v*F,s[10]=x*R+w*z+y*q+v*D,s[14]=x*P+w*H+y*Q+v*ee,s[3]=S*A+E*M+C*j+T*O,s[7]=S*k+E*I+C*J+T*F,s[11]=S*R+E*z+C*q+T*D,s[15]=S*P+E*H+C*Q+T*ee,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],p=e[14],x=e[3],w=e[7],y=e[11],v=e[15];return x*(+s*l*d-i*c*d-s*a*h+r*c*h+i*a*p-r*l*p)+w*(+n*l*p-n*c*h+s*o*h-i*o*p+i*c*u-s*l*u)+y*(+n*c*d-n*a*p-s*o*d+r*o*p+s*a*u-r*c*u)+v*(-i*a*u-n*l*d+n*a*h+i*o*d-r*o*h+r*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],p=e[11],x=e[12],w=e[13],y=e[14],v=e[15],S=d*y*c-w*h*c+w*l*p-a*y*p-d*l*v+a*h*v,E=x*h*c-u*y*c-x*l*p+o*y*p+u*l*v-o*h*v,C=u*w*c-x*d*c+x*a*p-o*w*p-u*a*v+o*d*v,T=x*d*l-u*w*l-x*a*h+o*w*h+u*a*y-o*d*y,A=n*S+r*E+i*C+s*T;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/A;return e[0]=S*k,e[1]=(w*h*s-d*y*s-w*i*p+r*y*p+d*i*v-r*h*v)*k,e[2]=(a*y*s-w*l*s+w*i*c-r*y*c-a*i*v+r*l*v)*k,e[3]=(d*l*s-a*h*s-d*i*c+r*h*c+a*i*p-r*l*p)*k,e[4]=E*k,e[5]=(u*y*s-x*h*s+x*i*p-n*y*p-u*i*v+n*h*v)*k,e[6]=(x*l*s-o*y*s-x*i*c+n*y*c+o*i*v-n*l*v)*k,e[7]=(o*h*s-u*l*s+u*i*c-n*h*c-o*i*p+n*l*p)*k,e[8]=C*k,e[9]=(x*d*s-u*w*s-x*r*p+n*w*p+u*r*v-n*d*v)*k,e[10]=(o*w*s-x*a*s+x*r*c-n*w*c-o*r*v+n*a*v)*k,e[11]=(u*a*s-o*d*s-u*r*c+n*d*c+o*r*p-n*a*p)*k,e[12]=T*k,e[13]=(u*w*i-x*d*i+x*r*h-n*w*h-u*r*y+n*d*y)*k,e[14]=(x*a*i-o*w*i-x*r*l+n*w*l+o*r*y-n*a*y)*k,e[15]=(o*d*i-u*a*i+u*r*l-n*d*l-o*r*h+n*a*h)*k,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+r,c*a-i*l,c*l+i*a,0,c*a+i*l,u*a+r,u*l-i*o,0,c*l-i*a,u*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,u=o+o,d=a+a,h=s*c,p=s*u,x=s*d,w=o*u,y=o*d,v=a*d,S=l*c,E=l*u,C=l*d,T=r.x,A=r.y,k=r.z;return i[0]=(1-(w+v))*T,i[1]=(p+C)*T,i[2]=(x-E)*T,i[3]=0,i[4]=(p-C)*A,i[5]=(1-(h+v))*A,i[6]=(y+S)*A,i[7]=0,i[8]=(x+E)*k,i[9]=(y-S)*k,i[10]=(1-(h+w))*k,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=Hd.set(i[0],i[1],i[2]).length();const o=Hd.set(i[4],i[5],i[6]).length(),a=Hd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],ho.copy(this);const c=1/s,u=1/o,d=1/a;return ho.elements[0]*=c,ho.elements[1]*=c,ho.elements[2]*=c,ho.elements[4]*=u,ho.elements[5]*=u,ho.elements[6]*=u,ho.elements[8]*=d,ho.elements[9]*=d,ho.elements[10]*=d,n.setFromRotationMatrix(ho),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o,a=Za){const l=this.elements,c=2*s/(n-e),u=2*s/(r-i),d=(n+e)/(n-e),h=(r+i)/(r-i);let p,x;if(a===Za)p=-(o+s)/(o-s),x=-2*o*s/(o-s);else if(a===Xx)p=-o/(o-s),x=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,s,o,a=Za){const l=this.elements,c=1/(n-e),u=1/(r-i),d=1/(o-s),h=(n+e)*c,p=(r+i)*u;let x,w;if(a===Za)x=(o+s)*d,w=-2*d;else if(a===Xx)x=s*d,w=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=w,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Hd=new be,ho=new rr,Vle=new be(0,0,0),$le=new be(1,1,1),Ol=new be,Zv=new be,fs=new be,AD=new rr,RD=new wg;class fl{constructor(e=0,n=0,r=0,i=fl.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],c=i[5],u=i[9],d=i[2],h=i[6],p=i[10];switch(n){case"XYZ":this._y=Math.asin(ln(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-ln(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(ln(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-ln(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(ln(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-ln(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return AD.makeRotationFromQuaternion(e),this.setFromRotationMatrix(AD,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return RD.setFromEuler(this),this.setFromQuaternion(RD,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}fl.DEFAULT_ORDER="XYZ";class pj{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Wle=0;const kD=new be,Vd=new wg,Fa=new rr,ey=new be,gp=new be,Gle=new be,Xle=new wg,ND=new be(1,0,0),PD=new be(0,1,0),DD=new be(0,0,1),ID={type:"added"},qle={type:"removed"},$d={type:"childadded",child:null},c1={type:"childremoved",child:null};class fi extends Ah{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Wle++}),this.uuid=xg(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=fi.DEFAULT_UP.clone();const e=new be,n=new fl,r=new wg,i=new be(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new rr},normalMatrix:{value:new Gt}}),this.matrix=new rr,this.matrixWorld=new rr,this.matrixAutoUpdate=fi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=fi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new pj,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Vd.setFromAxisAngle(e,n),this.quaternion.multiply(Vd),this}rotateOnWorldAxis(e,n){return Vd.setFromAxisAngle(e,n),this.quaternion.premultiply(Vd),this}rotateX(e){return this.rotateOnAxis(ND,e)}rotateY(e){return this.rotateOnAxis(PD,e)}rotateZ(e){return this.rotateOnAxis(DD,e)}translateOnAxis(e,n){return kD.copy(e).applyQuaternion(this.quaternion),this.position.add(kD.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(ND,e)}translateY(e){return this.translateOnAxis(PD,e)}translateZ(e){return this.translateOnAxis(DD,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fa.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?ey.copy(e):ey.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),gp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fa.lookAt(gp,ey,this.up):Fa.lookAt(ey,gp,this.up),this.quaternion.setFromRotationMatrix(Fa),i&&(Fa.extractRotation(i.matrixWorld),Vd.setFromRotationMatrix(Fa),this.quaternion.premultiply(Vd.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(ID),$d.child=e,this.dispatchEvent($d),$d.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(qle),c1.child=e,this.dispatchEvent(c1),c1.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Fa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Fa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(ID),$d.child=e,this.dispatchEvent($d),$d.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gp,e,Gle),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gp,Xle,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(a=>({...a})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),h=o(e.skeletons),p=o(e.animations),x=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),c.length>0&&(r.textures=c),u.length>0&&(r.images=u),d.length>0&&(r.shapes=d),h.length>0&&(r.skeletons=h),p.length>0&&(r.animations=p),x.length>0&&(r.nodes=x)}return r.object=i,r;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}fi.DEFAULT_UP=new be(0,1,0);fi.DEFAULT_MATRIX_AUTO_UPDATE=!0;fi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const po=new be,Ua=new be,u1=new be,Ba=new be,Wd=new be,Gd=new be,LD=new be,d1=new be,f1=new be,h1=new be,p1=new nr,m1=new nr,g1=new nr;class Eo{constructor(e=new be,n=new be,r=new be){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),po.subVectors(e,n),i.cross(po);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){po.subVectors(i,n),Ua.subVectors(r,n),u1.subVectors(e,n);const o=po.dot(po),a=po.dot(Ua),l=po.dot(u1),c=Ua.dot(Ua),u=Ua.dot(u1),d=o*c-a*a;if(d===0)return s.set(0,0,0),null;const h=1/d,p=(c*l-a*u)*h,x=(o*u-a*l)*h;return s.set(1-p-x,x,p)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Ba)===null?!1:Ba.x>=0&&Ba.y>=0&&Ba.x+Ba.y<=1}static getInterpolation(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,Ba)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Ba.x),l.addScaledVector(o,Ba.y),l.addScaledVector(a,Ba.z),l)}static getInterpolatedAttribute(e,n,r,i,s,o){return p1.setScalar(0),m1.setScalar(0),g1.setScalar(0),p1.fromBufferAttribute(e,n),m1.fromBufferAttribute(e,r),g1.fromBufferAttribute(e,i),o.setScalar(0),o.addScaledVector(p1,s.x),o.addScaledVector(m1,s.y),o.addScaledVector(g1,s.z),o}static isFrontFacing(e,n,r,i){return po.subVectors(r,n),Ua.subVectors(e,n),po.cross(Ua).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return po.subVectors(this.c,this.b),Ua.subVectors(this.a,this.b),po.cross(Ua).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Eo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Eo.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,s){return Eo.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return Eo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Eo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;Wd.subVectors(i,r),Gd.subVectors(s,r),d1.subVectors(e,r);const l=Wd.dot(d1),c=Gd.dot(d1);if(l<=0&&c<=0)return n.copy(r);f1.subVectors(e,i);const u=Wd.dot(f1),d=Gd.dot(f1);if(u>=0&&d<=u)return n.copy(i);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(r).addScaledVector(Wd,o);h1.subVectors(e,s);const p=Wd.dot(h1),x=Gd.dot(h1);if(x>=0&&p<=x)return n.copy(s);const w=p*c-l*x;if(w<=0&&c>=0&&x<=0)return a=c/(c-x),n.copy(r).addScaledVector(Gd,a);const y=u*x-p*d;if(y<=0&&d-u>=0&&p-x>=0)return LD.subVectors(s,i),a=(d-u)/(d-u+(p-x)),n.copy(i).addScaledVector(LD,a);const v=1/(y+w+h);return o=w*v,a=h*v,n.copy(r).addScaledVector(Wd,o).addScaledVector(Gd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const mj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fl={h:0,s:0,l:0},ty={h:0,s:0,l:0};function v1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class wn{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Bs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,gn.colorSpaceToWorking(this,n),this}setRGB(e,n,r,i=gn.workingColorSpace){return this.r=e,this.g=n,this.b=r,gn.colorSpaceToWorking(this,i),this}setHSL(e,n,r,i=gn.workingColorSpace){if(e=kle(e,1),n=ln(n,0,1),r=ln(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=v1(o,s,e+1/3),this.g=v1(o,s,e),this.b=v1(o,s,e-1/3)}return gn.colorSpaceToWorking(this,i),this}setStyle(e,n=Bs){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Bs){const r=mj[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=nl(e.r),this.g=nl(e.g),this.b=nl(e.b),this}copyLinearToSRGB(e){return this.r=If(e.r),this.g=If(e.g),this.b=If(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Bs){return gn.workingToColorSpace(si.copy(this),e),Math.round(ln(si.r*255,0,255))*65536+Math.round(ln(si.g*255,0,255))*256+Math.round(ln(si.b*255,0,255))}getHexString(e=Bs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=gn.workingColorSpace){gn.workingToColorSpace(si.copy(this),n);const r=si.r,i=si.g,s=si.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case r:l=(i-s)/d+(i<s?6:0);break;case i:l=(s-r)/d+2;break;case s:l=(r-i)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=gn.workingColorSpace){return gn.workingToColorSpace(si.copy(this),n),e.r=si.r,e.g=si.g,e.b=si.b,e}getStyle(e=Bs){gn.workingToColorSpace(si.copy(this),e);const n=si.r,r=si.g,i=si.b;return e!==Bs?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Fl),this.setHSL(Fl.h+e,Fl.s+n,Fl.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Fl),e.getHSL(ty);const r=ZS(Fl.h,ty.h,n),i=ZS(Fl.s,ty.s,n),s=ZS(Fl.l,ty.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const si=new wn;wn.NAMES=mj;let Kle=0;class gw extends Ah{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Kle++}),this.uuid=xg(),this.name="",this.type="Material",this.blending=Pf,this.side=Pc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=zE,this.blendDst=jE,this.blendEquation=wu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new wn(0,0,0),this.blendAlpha=0,this.depthFunc=rh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=bD,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Fd,this.stencilZFail=Fd,this.stencilZPass=Fd,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(r.dispersion=this.dispersion),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapRotation!==void 0&&(r.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Pf&&(r.blending=this.blending),this.side!==Pc&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==zE&&(r.blendSrc=this.blendSrc),this.blendDst!==jE&&(r.blendDst=this.blendDst),this.blendEquation!==wu&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==rh&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==bD&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Fd&&(r.stencilFail=this.stencilFail),this.stencilZFail!==Fd&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==Fd&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Kx extends gw{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new wn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new fl,this.combine=tj,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const cr=new be,ny=new En;let Yle=0;class ha{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Yle++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=SD,this.updateRanges=[],this.gpuType=Qa,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)ny.fromBufferAttribute(this,n),ny.applyMatrix3(e),this.setXY(n,ny.x,ny.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)cr.fromBufferAttribute(this,n),cr.applyMatrix3(e),this.setXYZ(n,cr.x,cr.y,cr.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)cr.fromBufferAttribute(this,n),cr.applyMatrix4(e),this.setXYZ(n,cr.x,cr.y,cr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)cr.fromBufferAttribute(this,n),cr.applyNormalMatrix(e),this.setXYZ(n,cr.x,cr.y,cr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)cr.fromBufferAttribute(this,n),cr.transformDirection(e),this.setXYZ(n,cr.x,cr.y,cr.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=hp(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=zi(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=hp(n,this.array)),n}setX(e,n){return this.normalized&&(n=zi(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=hp(n,this.array)),n}setY(e,n){return this.normalized&&(n=zi(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=hp(n,this.array)),n}setZ(e,n){return this.normalized&&(n=zi(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=hp(n,this.array)),n}setW(e,n){return this.normalized&&(n=zi(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=zi(n,this.array),r=zi(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=zi(n,this.array),r=zi(r,this.array),i=zi(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=zi(n,this.array),r=zi(r,this.array),i=zi(i,this.array),s=zi(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==SD&&(e.usage=this.usage),e}}class gj extends ha{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class vj extends ha{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class pa extends ha{constructor(e,n,r){super(new Float32Array(e),n,r)}}let Jle=0;const Fs=new rr,y1=new fi,Xd=new be,hs=new bg,vp=new bg,Cr=new be;class jc extends Ah{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Jle++}),this.uuid=xg(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(fj(e)?vj:gj)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Gt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Fs.makeRotationFromQuaternion(e),this.applyMatrix4(Fs),this}rotateX(e){return Fs.makeRotationX(e),this.applyMatrix4(Fs),this}rotateY(e){return Fs.makeRotationY(e),this.applyMatrix4(Fs),this}rotateZ(e){return Fs.makeRotationZ(e),this.applyMatrix4(Fs),this}translate(e,n,r){return Fs.makeTranslation(e,n,r),this.applyMatrix4(Fs),this}scale(e,n,r){return Fs.makeScale(e,n,r),this.applyMatrix4(Fs),this}lookAt(e){return y1.lookAt(e),y1.updateMatrix(),this.applyMatrix4(y1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xd).negate(),this.translate(Xd.x,Xd.y,Xd.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const r=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];r.push(o.x,o.y,o.z||0)}this.setAttribute("position",new pa(r,3))}else{const r=Math.min(e.length,n.count);for(let i=0;i<r;i++){const s=e[i];n.setXYZ(i,s.x,s.y,s.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new bg);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new be(-1/0,-1/0,-1/0),new be(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];hs.setFromBufferAttribute(s),this.morphTargetsRelative?(Cr.addVectors(this.boundingBox.min,hs.min),this.boundingBox.expandByPoint(Cr),Cr.addVectors(this.boundingBox.max,hs.max),this.boundingBox.expandByPoint(Cr)):(this.boundingBox.expandByPoint(hs.min),this.boundingBox.expandByPoint(hs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new pA);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new be,1/0);return}if(e){const r=this.boundingSphere.center;if(hs.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];vp.setFromBufferAttribute(a),this.morphTargetsRelative?(Cr.addVectors(hs.min,vp.min),hs.expandByPoint(Cr),Cr.addVectors(hs.max,vp.max),hs.expandByPoint(Cr)):(hs.expandByPoint(vp.min),hs.expandByPoint(vp.max))}hs.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Cr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Cr));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Cr.fromBufferAttribute(a,c),l&&(Xd.fromBufferAttribute(e,c),Cr.add(Xd)),i=Math.max(i,r.distanceToSquared(Cr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=n.position,i=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ha(new Float32Array(4*r.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let R=0;R<r.count;R++)a[R]=new be,l[R]=new be;const c=new be,u=new be,d=new be,h=new En,p=new En,x=new En,w=new be,y=new be;function v(R,P,M){c.fromBufferAttribute(r,R),u.fromBufferAttribute(r,P),d.fromBufferAttribute(r,M),h.fromBufferAttribute(s,R),p.fromBufferAttribute(s,P),x.fromBufferAttribute(s,M),u.sub(c),d.sub(c),p.sub(h),x.sub(h);const I=1/(p.x*x.y-x.x*p.y);isFinite(I)&&(w.copy(u).multiplyScalar(x.y).addScaledVector(d,-p.y).multiplyScalar(I),y.copy(d).multiplyScalar(p.x).addScaledVector(u,-x.x).multiplyScalar(I),a[R].add(w),a[P].add(w),a[M].add(w),l[R].add(y),l[P].add(y),l[M].add(y))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let R=0,P=S.length;R<P;++R){const M=S[R],I=M.start,z=M.count;for(let H=I,j=I+z;H<j;H+=3)v(e.getX(H+0),e.getX(H+1),e.getX(H+2))}const E=new be,C=new be,T=new be,A=new be;function k(R){T.fromBufferAttribute(i,R),A.copy(T);const P=a[R];E.copy(P),E.sub(T.multiplyScalar(T.dot(P))).normalize(),C.crossVectors(A,P);const I=C.dot(l[R])<0?-1:1;o.setXYZW(R,E.x,E.y,E.z,I)}for(let R=0,P=S.length;R<P;++R){const M=S[R],I=M.start,z=M.count;for(let H=I,j=I+z;H<j;H+=3)k(e.getX(H+0)),k(e.getX(H+1)),k(e.getX(H+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new ha(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let h=0,p=r.count;h<p;h++)r.setXYZ(h,0,0,0);const i=new be,s=new be,o=new be,a=new be,l=new be,c=new be,u=new be,d=new be;if(e)for(let h=0,p=e.count;h<p;h+=3){const x=e.getX(h+0),w=e.getX(h+1),y=e.getX(h+2);i.fromBufferAttribute(n,x),s.fromBufferAttribute(n,w),o.fromBufferAttribute(n,y),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),a.fromBufferAttribute(r,x),l.fromBufferAttribute(r,w),c.fromBufferAttribute(r,y),a.add(u),l.add(u),c.add(u),r.setXYZ(x,a.x,a.y,a.z),r.setXYZ(w,l.x,l.y,l.z),r.setXYZ(y,c.x,c.y,c.z)}else for(let h=0,p=n.count;h<p;h+=3)i.fromBufferAttribute(n,h+0),s.fromBufferAttribute(n,h+1),o.fromBufferAttribute(n,h+2),u.subVectors(o,s),d.subVectors(i,s),u.cross(d),r.setXYZ(h+0,u.x,u.y,u.z),r.setXYZ(h+1,u.x,u.y,u.z),r.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Cr.fromBufferAttribute(e,n),Cr.normalize(),e.setXYZ(n,Cr.x,Cr.y,Cr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let p=0,x=0;for(let w=0,y=l.length;w<y;w++){a.isInterleavedBufferAttribute?p=l[w]*a.data.stride+a.offset:p=l[w]*u;for(let v=0;v<u;v++)h[x++]=c[p++]}return new ha(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new jc,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],c=e(l,r);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const h=c[u],p=e(h,r);l.push(p)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const c=r[l];e.data.attributes[l]=c.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){const p=c[d];u.push(p.toJSON(e.data))}u.length>0&&(i[l]=u,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone());const i=e.attributes;for(const c in i){const u=i[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,p=d.length;h<p;h++)u.push(d[h].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const OD=new rr,du=new Hle,ry=new pA,FD=new be,iy=new be,sy=new be,oy=new be,x1=new be,ay=new be,UD=new be,ly=new be;class Hr extends fi{constructor(e=new jc,n=new Kx){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){ay.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];u!==0&&(x1.fromBufferAttribute(d,e),o?ay.addScaledVector(x1,u):ay.addScaledVector(x1.sub(n),u))}n.add(ay)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),ry.copy(r.boundingSphere),ry.applyMatrix4(s),du.copy(e.ray).recast(e.near),!(ry.containsPoint(du.origin)===!1&&(du.intersectSphere(ry,FD)===null||du.origin.distanceToSquared(FD)>(e.far-e.near)**2))&&(OD.copy(s).invert(),du.copy(e.ray).applyMatrix4(OD),!(r.boundingBox!==null&&du.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,du)))}_computeIntersections(e,n,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,p=s.drawRange;if(a!==null)if(Array.isArray(o))for(let x=0,w=h.length;x<w;x++){const y=h[x],v=o[y.materialIndex],S=Math.max(y.start,p.start),E=Math.min(a.count,Math.min(y.start+y.count,p.start+p.count));for(let C=S,T=E;C<T;C+=3){const A=a.getX(C),k=a.getX(C+1),R=a.getX(C+2);i=cy(this,v,e,r,c,u,d,A,k,R),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=y.materialIndex,n.push(i))}}else{const x=Math.max(0,p.start),w=Math.min(a.count,p.start+p.count);for(let y=x,v=w;y<v;y+=3){const S=a.getX(y),E=a.getX(y+1),C=a.getX(y+2);i=cy(this,o,e,r,c,u,d,S,E,C),i&&(i.faceIndex=Math.floor(y/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let x=0,w=h.length;x<w;x++){const y=h[x],v=o[y.materialIndex],S=Math.max(y.start,p.start),E=Math.min(l.count,Math.min(y.start+y.count,p.start+p.count));for(let C=S,T=E;C<T;C+=3){const A=C,k=C+1,R=C+2;i=cy(this,v,e,r,c,u,d,A,k,R),i&&(i.faceIndex=Math.floor(C/3),i.face.materialIndex=y.materialIndex,n.push(i))}}else{const x=Math.max(0,p.start),w=Math.min(l.count,p.start+p.count);for(let y=x,v=w;y<v;y+=3){const S=y,E=y+1,C=y+2;i=cy(this,o,e,r,c,u,d,S,E,C),i&&(i.faceIndex=Math.floor(y/3),n.push(i))}}}}function Qle(t,e,n,r,i,s,o,a){let l;if(e.side===Yi?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Pc,a),l===null)return null;ly.copy(a),ly.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(ly);return c<n.near||c>n.far?null:{distance:c,point:ly.clone(),object:t}}function cy(t,e,n,r,i,s,o,a,l,c){t.getVertexPosition(a,iy),t.getVertexPosition(l,sy),t.getVertexPosition(c,oy);const u=Qle(t,e,n,r,iy,sy,oy,UD);if(u){const d=new be;Eo.getBarycoord(UD,iy,sy,oy,d),i&&(u.uv=Eo.getInterpolatedAttribute(i,a,l,c,d,new En)),s&&(u.uv1=Eo.getInterpolatedAttribute(s,a,l,c,d,new En)),o&&(u.normal=Eo.getInterpolatedAttribute(o,a,l,c,d,new be),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new be,materialIndex:0};Eo.getNormal(iy,sy,oy,h.normal),u.face=h,u.barycoord=d}return u}class Sg extends jc{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,p=0;x("z","y","x",-1,-1,r,n,e,o,s,0),x("z","y","x",1,-1,r,n,-e,o,s,1),x("x","z","y",1,1,e,r,n,i,o,2),x("x","z","y",1,-1,e,r,-n,i,o,3),x("x","y","z",1,-1,e,n,r,i,s,4),x("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new pa(c,3)),this.setAttribute("normal",new pa(u,3)),this.setAttribute("uv",new pa(d,2));function x(w,y,v,S,E,C,T,A,k,R,P){const M=C/k,I=T/R,z=C/2,H=T/2,j=A/2,J=k+1,q=R+1;let Q=0,O=0;const F=new be;for(let D=0;D<q;D++){const ee=D*I-H;for(let W=0;W<J;W++){const B=W*M-z;F[w]=B*S,F[y]=ee*E,F[v]=j,c.push(F.x,F.y,F.z),F[w]=0,F[y]=0,F[v]=A>0?1:-1,u.push(F.x,F.y,F.z),d.push(W/k),d.push(1-D/R),Q+=1}}for(let D=0;D<R;D++)for(let ee=0;ee<k;ee++){const W=h+ee+J*D,B=h+ee+J*(D+1),K=h+(ee+1)+J*(D+1),ie=h+(ee+1)+J*D;l.push(W,B,ie),l.push(B,K,ie),O+=6}a.addGroup(p,O,P),p+=O,h+=Q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sg(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ah(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function wi(t){const e={};for(let n=0;n<t.length;n++){const r=ah(t[n]);for(const i in r)e[i]=r[i]}return e}function Zle(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function yj(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:gn.workingColorSpace}const ece={clone:ah,merge:wi};var tce=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,nce=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Dc extends gw{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=tce,this.fragmentShader=nce,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ah(e.uniforms),this.uniformsGroups=Zle(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class xj extends fi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new rr,this.projectionMatrix=new rr,this.projectionMatrixInverse=new rr,this.coordinateSystem=Za}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Ul=new be,BD=new En,zD=new En;class $s extends xj{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=CC*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(QS*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return CC*2*Math.atan(Math.tan(QS*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){Ul.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Ul.x,Ul.y).multiplyScalar(-e/Ul.z),Ul.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(Ul.x,Ul.y).multiplyScalar(-e/Ul.z)}getViewSize(e,n){return this.getViewBounds(e,BD,zD),n.subVectors(zD,BD)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(QS*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/c,i*=o.width/l,r*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const qd=-90,Kd=1;class rce extends fi{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new $s(qd,Kd,e,n);i.layers=this.layers,this.add(i);const s=new $s(qd,Kd,e,n);s.layers=this.layers,this.add(s);const o=new $s(qd,Kd,e,n);o.layers=this.layers,this.add(o);const a=new $s(qd,Kd,e,n);a.layers=this.layers,this.add(a);const l=new $s(qd,Kd,e,n);l.layers=this.layers,this.add(l);const c=new $s(qd,Kd,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,o,a,l]=n;for(const c of n)this.remove(c);if(e===Za)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Xx)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const w=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,s),e.setRenderTarget(r,1,i),e.render(n,o),e.setRenderTarget(r,2,i),e.render(n,a),e.setRenderTarget(r,3,i),e.render(n,l),e.setRenderTarget(r,4,i),e.render(n,c),r.texture.generateMipmaps=w,e.setRenderTarget(r,5,i),e.render(n,u),e.setRenderTarget(d,h,p),e.xr.enabled=x,r.texture.needsPMREMUpdate=!0}}class wj extends Ji{constructor(e=[],n=ih,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ice extends nd{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];this.texture=new wj(i),this._setTextureOptions(n),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Sg(5,5,5),s=new Dc({name:"CubemapFromEquirect",uniforms:ah(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Yi,blending:wc});s.uniforms.tEquirect.value=n;const o=new Hr(i,s),a=n.minFilter;return n.minFilter===ku&&(n.minFilter=aa),new rce(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n=!0,r=!0,i=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}class Rp extends fi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const sce={type:"move"};class w1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Rp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Rp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new be,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new be),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Rp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new be,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new be),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const w of e.hand.values()){const y=n.getJointPose(w,r),v=this._getHandJoint(c,w);y!==null&&(v.matrix.fromArray(y.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=y.radius),v.visible=y!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],h=u.position.distanceTo(d.position),p=.02,x=.005;c.inputState.pinching&&h>p+x?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=p-x&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(sce)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Rp;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class oce extends fi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new fl,this.environmentIntensity=1,this.environmentRotation=new fl,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}const b1=new be,ace=new be,lce=new Gt;class yu{constructor(e=new be(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=b1.subVectors(r,n).cross(ace.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(b1),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||lce.getNormalMatrix(e),i=this.coplanarPoint(b1).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const fu=new pA,uy=new be;class mA{constructor(e=new yu,n=new yu,r=new yu,i=new yu,s=new yu,o=new yu){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Za){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],d=i[6],h=i[7],p=i[8],x=i[9],w=i[10],y=i[11],v=i[12],S=i[13],E=i[14],C=i[15];if(r[0].setComponents(l-s,h-c,y-p,C-v).normalize(),r[1].setComponents(l+s,h+c,y+p,C+v).normalize(),r[2].setComponents(l+o,h+u,y+x,C+S).normalize(),r[3].setComponents(l-o,h-u,y-x,C-S).normalize(),r[4].setComponents(l-a,h-d,y-w,C-E).normalize(),n===Za)r[5].setComponents(l+a,h+d,y+w,C+E).normalize();else if(n===Xx)r[5].setComponents(a,d,w,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),fu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),fu.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(fu)}intersectsSprite(e){return fu.center.set(0,0,0),fu.radius=.7071067811865476,fu.applyMatrix4(e.matrixWorld),this.intersectsSphere(fu)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(uy.x=i.normal.x>0?e.max.x:e.min.x,uy.y=i.normal.y>0?e.max.y:e.min.y,uy.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(uy)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class bj extends Ji{constructor(e,n,r=td,i,s,o,a=Ro,l=Ro,c,u=km,d=1){if(u!==km&&u!==Nm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const h={width:e,height:n,depth:d};super(h,i,s,o,a,l,u,r,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new hA(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class vw extends jc{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),c=a+1,u=l+1,d=e/a,h=n/l,p=[],x=[],w=[],y=[];for(let v=0;v<u;v++){const S=v*h-o;for(let E=0;E<c;E++){const C=E*d-s;x.push(C,-S,0),w.push(0,0,1),y.push(E/a),y.push(1-v/l)}}for(let v=0;v<l;v++)for(let S=0;S<a;S++){const E=S+c*v,C=S+c*(v+1),T=S+1+c*(v+1),A=S+1+c*v;p.push(E,C,A),p.push(C,T,A)}this.setIndex(p),this.setAttribute("position",new pa(x,3)),this.setAttribute("normal",new pa(w,3)),this.setAttribute("uv",new pa(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vw(e.width,e.height,e.widthSegments,e.heightSegments)}}class xf extends jc{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new be,h=new be,p=[],x=[],w=[],y=[];for(let v=0;v<=r;v++){const S=[],E=v/r;let C=0;v===0&&o===0?C=.5/n:v===r&&l===Math.PI&&(C=-.5/n);for(let T=0;T<=n;T++){const A=T/n;d.x=-e*Math.cos(i+A*s)*Math.sin(o+E*a),d.y=e*Math.cos(o+E*a),d.z=e*Math.sin(i+A*s)*Math.sin(o+E*a),x.push(d.x,d.y,d.z),h.copy(d).normalize(),w.push(h.x,h.y,h.z),y.push(A+C,1-E),S.push(c++)}u.push(S)}for(let v=0;v<r;v++)for(let S=0;S<n;S++){const E=u[v][S+1],C=u[v][S],T=u[v+1][S],A=u[v+1][S+1];(v!==0||o>0)&&p.push(E,C,A),(v!==r-1||l<Math.PI)&&p.push(C,T,A)}this.setIndex(p),this.setAttribute("position",new pa(x,3)),this.setAttribute("normal",new pa(w,3)),this.setAttribute("uv",new pa(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class cce extends gw{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=xle,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class uce extends gw{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class Sj extends fi{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new wn(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(n.object.target=this.target.uuid),n}}const S1=new rr,jD=new be,HD=new be;class dce{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new En(512,512),this.mapType=ga,this.map=null,this.mapPass=null,this.matrix=new rr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new mA,this._frameExtents=new En(1,1),this._viewportCount=1,this._viewports=[new nr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;jD.setFromMatrixPosition(e.matrixWorld),n.position.copy(jD),HD.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(HD),n.updateMatrixWorld(),S1.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(S1),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(S1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class _j extends xj{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class fce extends dce{constructor(){super(new _j(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class hce extends Sj{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(fi.DEFAULT_UP),this.updateMatrix(),this.target=new fi,this.shadow=new fce}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class pce extends Sj{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class mce extends $s{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}function VD(t,e,n,r){const i=gce(r);switch(n){case oj:return t*e;case lj:return t*e/i.components*i.byteLength;case uA:return t*e/i.components*i.byteLength;case cj:return t*e*2/i.components*i.byteLength;case dA:return t*e*2/i.components*i.byteLength;case aj:return t*e*3/i.components*i.byteLength;case Mo:return t*e*4/i.components*i.byteLength;case fA:return t*e*4/i.components*i.byteLength;case Yy:case Jy:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Qy:case Zy:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case eC:case nC:return Math.max(t,16)*Math.max(e,8)/4;case ZE:case tC:return Math.max(t,8)*Math.max(e,8)/2;case rC:case iC:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case sC:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case oC:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case aC:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case lC:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case cC:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case uC:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case dC:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case fC:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case hC:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case pC:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case mC:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case gC:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case vC:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case yC:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case xC:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case ex:case wC:case bC:return Math.ceil(t/4)*Math.ceil(e/4)*16;case uj:case SC:return Math.ceil(t/4)*Math.ceil(e/4)*8;case _C:case EC:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function gce(t){switch(t){case ga:case rj:return{byteLength:1,components:1};case Am:case ij:case yg:return{byteLength:2,components:1};case lA:case cA:return{byteLength:2,components:4};case td:case aA:case Qa:return{byteLength:4,components:1};case sj:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:oA}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=oA);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function Ej(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function vce(t){const e=new WeakMap;function n(a,l){const c=a.array,u=a.usage,d=c.byteLength,h=t.createBuffer();t.bindBuffer(l,h),t.bufferData(l,c,u),a.onUploadCallback();let p;if(c instanceof Float32Array)p=t.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?p=t.HALF_FLOAT:p=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=t.SHORT;else if(c instanceof Uint32Array)p=t.UNSIGNED_INT;else if(c instanceof Int32Array)p=t.INT;else if(c instanceof Int8Array)p=t.BYTE;else if(c instanceof Uint8Array)p=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:h,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:d}}function r(a,l,c){const u=l.array,d=l.updateRanges;if(t.bindBuffer(c,a),d.length===0)t.bufferSubData(c,0,u);else{d.sort((p,x)=>p.start-x.start);let h=0;for(let p=1;p<d.length;p++){const x=d[h],w=d[p];w.start<=x.start+x.count+1?x.count=Math.max(x.count,w.start+w.count-x.start):(++h,d[h]=w)}d.length=h+1;for(let p=0,x=d.length;p<x;p++){const w=d[p];t.bufferSubData(c,w.start*u.BYTES_PER_ELEMENT,u,w.start,w.count)}l.clearUpdateRanges()}l.onUploadCallback()}function i(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,n(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");r(c.buffer,a,l),c.version=a.version}}return{get:i,remove:s,update:o}}var yce=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,xce=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,wce=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,bce=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Sce=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,_ce=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Ece=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Cce=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Mce=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Tce=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Ace=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Rce=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,kce=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Nce=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Pce=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Dce=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Ice=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Lce=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Oce=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Fce=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Uce=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Bce=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,zce=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,jce=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Hce=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Vce=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,$ce=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Wce=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Gce=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Xce=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,qce="gl_FragColor = linearToOutputTexel( gl_FragColor );",Kce=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Yce=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Jce=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Qce=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Zce=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,eue=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,tue=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,nue=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,rue=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,iue=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,sue=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,oue=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,aue=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lue=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,cue=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,uue=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,due=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,fue=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,hue=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,pue=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,mue=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,gue=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,vue=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,yue=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,xue=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,wue=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,bue=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Sue=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,_ue=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Eue=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Cue=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Mue=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Tue=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Aue=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Rue=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kue=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Nue=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Pue=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Due=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Iue=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Lue=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Oue=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Fue=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Uue=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Bue=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,zue=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,jue=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Hue=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Vue=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,$ue=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Wue=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Gue=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Xue=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,que=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Kue=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Yue=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Jue=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Que=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Zue=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,ede=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,tde=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,nde=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,rde=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,ide=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,sde=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ode=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,ade=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,lde=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,cde=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ude=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,dde=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,fde=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,hde=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,pde=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,mde=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,gde=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vde=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,yde=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xde=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,wde=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bde=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Sde=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_de=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Ede=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Cde=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Mde=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Tde=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Ade=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Rde=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,kde=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Nde=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Pde=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Dde=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ide=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lde=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Ode=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fde=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Ude=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Bde=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zde=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jde=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Hde=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Vde=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$de=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Wde=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Gde=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Xde=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qde=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Kde=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Yde=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Yt={alphahash_fragment:yce,alphahash_pars_fragment:xce,alphamap_fragment:wce,alphamap_pars_fragment:bce,alphatest_fragment:Sce,alphatest_pars_fragment:_ce,aomap_fragment:Ece,aomap_pars_fragment:Cce,batching_pars_vertex:Mce,batching_vertex:Tce,begin_vertex:Ace,beginnormal_vertex:Rce,bsdfs:kce,iridescence_fragment:Nce,bumpmap_pars_fragment:Pce,clipping_planes_fragment:Dce,clipping_planes_pars_fragment:Ice,clipping_planes_pars_vertex:Lce,clipping_planes_vertex:Oce,color_fragment:Fce,color_pars_fragment:Uce,color_pars_vertex:Bce,color_vertex:zce,common:jce,cube_uv_reflection_fragment:Hce,defaultnormal_vertex:Vce,displacementmap_pars_vertex:$ce,displacementmap_vertex:Wce,emissivemap_fragment:Gce,emissivemap_pars_fragment:Xce,colorspace_fragment:qce,colorspace_pars_fragment:Kce,envmap_fragment:Yce,envmap_common_pars_fragment:Jce,envmap_pars_fragment:Qce,envmap_pars_vertex:Zce,envmap_physical_pars_fragment:uue,envmap_vertex:eue,fog_vertex:tue,fog_pars_vertex:nue,fog_fragment:rue,fog_pars_fragment:iue,gradientmap_pars_fragment:sue,lightmap_pars_fragment:oue,lights_lambert_fragment:aue,lights_lambert_pars_fragment:lue,lights_pars_begin:cue,lights_toon_fragment:due,lights_toon_pars_fragment:fue,lights_phong_fragment:hue,lights_phong_pars_fragment:pue,lights_physical_fragment:mue,lights_physical_pars_fragment:gue,lights_fragment_begin:vue,lights_fragment_maps:yue,lights_fragment_end:xue,logdepthbuf_fragment:wue,logdepthbuf_pars_fragment:bue,logdepthbuf_pars_vertex:Sue,logdepthbuf_vertex:_ue,map_fragment:Eue,map_pars_fragment:Cue,map_particle_fragment:Mue,map_particle_pars_fragment:Tue,metalnessmap_fragment:Aue,metalnessmap_pars_fragment:Rue,morphinstance_vertex:kue,morphcolor_vertex:Nue,morphnormal_vertex:Pue,morphtarget_pars_vertex:Due,morphtarget_vertex:Iue,normal_fragment_begin:Lue,normal_fragment_maps:Oue,normal_pars_fragment:Fue,normal_pars_vertex:Uue,normal_vertex:Bue,normalmap_pars_fragment:zue,clearcoat_normal_fragment_begin:jue,clearcoat_normal_fragment_maps:Hue,clearcoat_pars_fragment:Vue,iridescence_pars_fragment:$ue,opaque_fragment:Wue,packing:Gue,premultiplied_alpha_fragment:Xue,project_vertex:que,dithering_fragment:Kue,dithering_pars_fragment:Yue,roughnessmap_fragment:Jue,roughnessmap_pars_fragment:Que,shadowmap_pars_fragment:Zue,shadowmap_pars_vertex:ede,shadowmap_vertex:tde,shadowmask_pars_fragment:nde,skinbase_vertex:rde,skinning_pars_vertex:ide,skinning_vertex:sde,skinnormal_vertex:ode,specularmap_fragment:ade,specularmap_pars_fragment:lde,tonemapping_fragment:cde,tonemapping_pars_fragment:ude,transmission_fragment:dde,transmission_pars_fragment:fde,uv_pars_fragment:hde,uv_pars_vertex:pde,uv_vertex:mde,worldpos_vertex:gde,background_vert:vde,background_frag:yde,backgroundCube_vert:xde,backgroundCube_frag:wde,cube_vert:bde,cube_frag:Sde,depth_vert:_de,depth_frag:Ede,distanceRGBA_vert:Cde,distanceRGBA_frag:Mde,equirect_vert:Tde,equirect_frag:Ade,linedashed_vert:Rde,linedashed_frag:kde,meshbasic_vert:Nde,meshbasic_frag:Pde,meshlambert_vert:Dde,meshlambert_frag:Ide,meshmatcap_vert:Lde,meshmatcap_frag:Ode,meshnormal_vert:Fde,meshnormal_frag:Ude,meshphong_vert:Bde,meshphong_frag:zde,meshphysical_vert:jde,meshphysical_frag:Hde,meshtoon_vert:Vde,meshtoon_frag:$de,points_vert:Wde,points_frag:Gde,shadow_vert:Xde,shadow_frag:qde,sprite_vert:Kde,sprite_frag:Yde},lt={common:{diffuse:{value:new wn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Gt},alphaMap:{value:null},alphaMapTransform:{value:new Gt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Gt}},envmap:{envMap:{value:null},envMapRotation:{value:new Gt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Gt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Gt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Gt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Gt},normalScale:{value:new En(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Gt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Gt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Gt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Gt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Gt},alphaTest:{value:0},uvTransform:{value:new Gt}},sprite:{diffuse:{value:new wn(16777215)},opacity:{value:1},center:{value:new En(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Gt},alphaMap:{value:null},alphaMapTransform:{value:new Gt},alphaTest:{value:0}}},ea={basic:{uniforms:wi([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.fog]),vertexShader:Yt.meshbasic_vert,fragmentShader:Yt.meshbasic_frag},lambert:{uniforms:wi([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,lt.lights,{emissive:{value:new wn(0)}}]),vertexShader:Yt.meshlambert_vert,fragmentShader:Yt.meshlambert_frag},phong:{uniforms:wi([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,lt.lights,{emissive:{value:new wn(0)},specular:{value:new wn(1118481)},shininess:{value:30}}]),vertexShader:Yt.meshphong_vert,fragmentShader:Yt.meshphong_frag},standard:{uniforms:wi([lt.common,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.roughnessmap,lt.metalnessmap,lt.fog,lt.lights,{emissive:{value:new wn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Yt.meshphysical_vert,fragmentShader:Yt.meshphysical_frag},toon:{uniforms:wi([lt.common,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.gradientmap,lt.fog,lt.lights,{emissive:{value:new wn(0)}}]),vertexShader:Yt.meshtoon_vert,fragmentShader:Yt.meshtoon_frag},matcap:{uniforms:wi([lt.common,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,{matcap:{value:null}}]),vertexShader:Yt.meshmatcap_vert,fragmentShader:Yt.meshmatcap_frag},points:{uniforms:wi([lt.points,lt.fog]),vertexShader:Yt.points_vert,fragmentShader:Yt.points_frag},dashed:{uniforms:wi([lt.common,lt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Yt.linedashed_vert,fragmentShader:Yt.linedashed_frag},depth:{uniforms:wi([lt.common,lt.displacementmap]),vertexShader:Yt.depth_vert,fragmentShader:Yt.depth_frag},normal:{uniforms:wi([lt.common,lt.bumpmap,lt.normalmap,lt.displacementmap,{opacity:{value:1}}]),vertexShader:Yt.meshnormal_vert,fragmentShader:Yt.meshnormal_frag},sprite:{uniforms:wi([lt.sprite,lt.fog]),vertexShader:Yt.sprite_vert,fragmentShader:Yt.sprite_frag},background:{uniforms:{uvTransform:{value:new Gt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Yt.background_vert,fragmentShader:Yt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Gt}},vertexShader:Yt.backgroundCube_vert,fragmentShader:Yt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Yt.cube_vert,fragmentShader:Yt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Yt.equirect_vert,fragmentShader:Yt.equirect_frag},distanceRGBA:{uniforms:wi([lt.common,lt.displacementmap,{referencePosition:{value:new be},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Yt.distanceRGBA_vert,fragmentShader:Yt.distanceRGBA_frag},shadow:{uniforms:wi([lt.lights,lt.fog,{color:{value:new wn(0)},opacity:{value:1}}]),vertexShader:Yt.shadow_vert,fragmentShader:Yt.shadow_frag}};ea.physical={uniforms:wi([ea.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Gt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Gt},clearcoatNormalScale:{value:new En(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Gt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Gt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Gt},sheen:{value:0},sheenColor:{value:new wn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Gt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Gt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Gt},transmissionSamplerSize:{value:new En},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Gt},attenuationDistance:{value:0},attenuationColor:{value:new wn(0)},specularColor:{value:new wn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Gt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Gt},anisotropyVector:{value:new En},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Gt}}]),vertexShader:Yt.meshphysical_vert,fragmentShader:Yt.meshphysical_frag};const dy={r:0,b:0,g:0},hu=new fl,Jde=new rr;function Qde(t,e,n,r,i,s,o){const a=new wn(0);let l=s===!0?0:1,c,u,d=null,h=0,p=null;function x(E){let C=E.isScene===!0?E.background:null;return C&&C.isTexture&&(C=(E.backgroundBlurriness>0?n:e).get(C)),C}function w(E){let C=!1;const T=x(E);T===null?v(a,l):T&&T.isColor&&(v(T,1),C=!0);const A=t.xr.getEnvironmentBlendMode();A==="additive"?r.buffers.color.setClear(0,0,0,1,o):A==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,o),(t.autoClear||C)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function y(E,C){const T=x(C);T&&(T.isCubeTexture||T.mapping===mw)?(u===void 0&&(u=new Hr(new Sg(1,1,1),new Dc({name:"BackgroundCubeMaterial",uniforms:ah(ea.backgroundCube.uniforms),vertexShader:ea.backgroundCube.vertexShader,fragmentShader:ea.backgroundCube.fragmentShader,side:Yi,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(A,k,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),hu.copy(C.backgroundRotation),hu.x*=-1,hu.y*=-1,hu.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(hu.y*=-1,hu.z*=-1),u.material.uniforms.envMap.value=T,u.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=C.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(Jde.makeRotationFromEuler(hu)),u.material.toneMapped=gn.getTransfer(T.colorSpace)!==Mn,(d!==T||h!==T.version||p!==t.toneMapping)&&(u.material.needsUpdate=!0,d=T,h=T.version,p=t.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null)):T&&T.isTexture&&(c===void 0&&(c=new Hr(new vw(2,2),new Dc({name:"BackgroundMaterial",uniforms:ah(ea.background.uniforms),vertexShader:ea.background.vertexShader,fragmentShader:ea.background.fragmentShader,side:Pc,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=T,c.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,c.material.toneMapped=gn.getTransfer(T.colorSpace)!==Mn,T.matrixAutoUpdate===!0&&T.updateMatrix(),c.material.uniforms.uvTransform.value.copy(T.matrix),(d!==T||h!==T.version||p!==t.toneMapping)&&(c.material.needsUpdate=!0,d=T,h=T.version,p=t.toneMapping),c.layers.enableAll(),E.unshift(c,c.geometry,c.material,0,0,null))}function v(E,C){E.getRGB(dy,yj(t)),r.buffers.color.setClear(dy.r,dy.g,dy.b,C,o)}function S(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(E,C=1){a.set(E),l=C,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(E){l=E,v(a,l)},render:w,addToRenderList:y,dispose:S}}function Zde(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),r={},i=h(null);let s=i,o=!1;function a(M,I,z,H,j){let J=!1;const q=d(H,z,I);s!==q&&(s=q,c(s.object)),J=p(M,H,z,j),J&&x(M,H,z,j),j!==null&&e.update(j,t.ELEMENT_ARRAY_BUFFER),(J||o)&&(o=!1,C(M,I,z,H),j!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(j).buffer))}function l(){return t.createVertexArray()}function c(M){return t.bindVertexArray(M)}function u(M){return t.deleteVertexArray(M)}function d(M,I,z){const H=z.wireframe===!0;let j=r[M.id];j===void 0&&(j={},r[M.id]=j);let J=j[I.id];J===void 0&&(J={},j[I.id]=J);let q=J[H];return q===void 0&&(q=h(l()),J[H]=q),q}function h(M){const I=[],z=[],H=[];for(let j=0;j<n;j++)I[j]=0,z[j]=0,H[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:z,attributeDivisors:H,object:M,attributes:{},index:null}}function p(M,I,z,H){const j=s.attributes,J=I.attributes;let q=0;const Q=z.getAttributes();for(const O in Q)if(Q[O].location>=0){const D=j[O];let ee=J[O];if(ee===void 0&&(O==="instanceMatrix"&&M.instanceMatrix&&(ee=M.instanceMatrix),O==="instanceColor"&&M.instanceColor&&(ee=M.instanceColor)),D===void 0||D.attribute!==ee||ee&&D.data!==ee.data)return!0;q++}return s.attributesNum!==q||s.index!==H}function x(M,I,z,H){const j={},J=I.attributes;let q=0;const Q=z.getAttributes();for(const O in Q)if(Q[O].location>=0){let D=J[O];D===void 0&&(O==="instanceMatrix"&&M.instanceMatrix&&(D=M.instanceMatrix),O==="instanceColor"&&M.instanceColor&&(D=M.instanceColor));const ee={};ee.attribute=D,D&&D.data&&(ee.data=D.data),j[O]=ee,q++}s.attributes=j,s.attributesNum=q,s.index=H}function w(){const M=s.newAttributes;for(let I=0,z=M.length;I<z;I++)M[I]=0}function y(M){v(M,0)}function v(M,I){const z=s.newAttributes,H=s.enabledAttributes,j=s.attributeDivisors;z[M]=1,H[M]===0&&(t.enableVertexAttribArray(M),H[M]=1),j[M]!==I&&(t.vertexAttribDivisor(M,I),j[M]=I)}function S(){const M=s.newAttributes,I=s.enabledAttributes;for(let z=0,H=I.length;z<H;z++)I[z]!==M[z]&&(t.disableVertexAttribArray(z),I[z]=0)}function E(M,I,z,H,j,J,q){q===!0?t.vertexAttribIPointer(M,I,z,j,J):t.vertexAttribPointer(M,I,z,H,j,J)}function C(M,I,z,H){w();const j=H.attributes,J=z.getAttributes(),q=I.defaultAttributeValues;for(const Q in J){const O=J[Q];if(O.location>=0){let F=j[Q];if(F===void 0&&(Q==="instanceMatrix"&&M.instanceMatrix&&(F=M.instanceMatrix),Q==="instanceColor"&&M.instanceColor&&(F=M.instanceColor)),F!==void 0){const D=F.normalized,ee=F.itemSize,W=e.get(F);if(W===void 0)continue;const B=W.buffer,K=W.type,ie=W.bytesPerElement,oe=K===t.INT||K===t.UNSIGNED_INT||F.gpuType===aA;if(F.isInterleavedBufferAttribute){const Z=F.data,pe=Z.stride,ye=F.offset;if(Z.isInstancedInterleavedBuffer){for(let ge=0;ge<O.locationSize;ge++)v(O.location+ge,Z.meshPerAttribute);M.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let ge=0;ge<O.locationSize;ge++)y(O.location+ge);t.bindBuffer(t.ARRAY_BUFFER,B);for(let ge=0;ge<O.locationSize;ge++)E(O.location+ge,ee/O.locationSize,K,D,pe*ie,(ye+ee/O.locationSize*ge)*ie,oe)}else{if(F.isInstancedBufferAttribute){for(let Z=0;Z<O.locationSize;Z++)v(O.location+Z,F.meshPerAttribute);M.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=F.meshPerAttribute*F.count)}else for(let Z=0;Z<O.locationSize;Z++)y(O.location+Z);t.bindBuffer(t.ARRAY_BUFFER,B);for(let Z=0;Z<O.locationSize;Z++)E(O.location+Z,ee/O.locationSize,K,D,ee*ie,ee/O.locationSize*Z*ie,oe)}}else if(q!==void 0){const D=q[Q];if(D!==void 0)switch(D.length){case 2:t.vertexAttrib2fv(O.location,D);break;case 3:t.vertexAttrib3fv(O.location,D);break;case 4:t.vertexAttrib4fv(O.location,D);break;default:t.vertexAttrib1fv(O.location,D)}}}}S()}function T(){R();for(const M in r){const I=r[M];for(const z in I){const H=I[z];for(const j in H)u(H[j].object),delete H[j];delete I[z]}delete r[M]}}function A(M){if(r[M.id]===void 0)return;const I=r[M.id];for(const z in I){const H=I[z];for(const j in H)u(H[j].object),delete H[j];delete I[z]}delete r[M.id]}function k(M){for(const I in r){const z=r[I];if(z[M.id]===void 0)continue;const H=z[M.id];for(const j in H)u(H[j].object),delete H[j];delete z[M.id]}}function R(){P(),o=!0,s!==i&&(s=i,c(s.object))}function P(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:a,reset:R,resetDefaultState:P,dispose:T,releaseStatesOfGeometry:A,releaseStatesOfProgram:k,initAttributes:w,enableAttribute:y,disableUnusedAttributes:S}}function efe(t,e,n){let r;function i(c){r=c}function s(c,u){t.drawArrays(r,c,u),n.update(u,r,1)}function o(c,u,d){d!==0&&(t.drawArraysInstanced(r,c,u,d),n.update(u,r,d))}function a(c,u,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,c,0,u,0,d);let p=0;for(let x=0;x<d;x++)p+=u[x];n.update(p,r,1)}function l(c,u,d,h){if(d===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let x=0;x<c.length;x++)o(c[x],u[x],h[x]);else{p.multiDrawArraysInstancedWEBGL(r,c,0,u,0,h,0,d);let x=0;for(let w=0;w<d;w++)x+=u[w]*h[w];n.update(x,r,1)}}this.setMode=i,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function tfe(t,e,n,r){let i;function s(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const k=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(k.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function o(k){return!(k!==Mo&&r.convert(k)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(k){const R=k===yg&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(k!==ga&&r.convert(k)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&k!==Qa&&!R)}function l(k){if(k==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";k="mediump"}return k==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const d=n.logarithmicDepthBuffer===!0,h=n.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),p=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),x=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),w=t.getParameter(t.MAX_TEXTURE_SIZE),y=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),v=t.getParameter(t.MAX_VERTEX_ATTRIBS),S=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),E=t.getParameter(t.MAX_VARYING_VECTORS),C=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),T=x>0,A=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:d,reverseDepthBuffer:h,maxTextures:p,maxVertexTextures:x,maxTextureSize:w,maxCubemapSize:y,maxAttributes:v,maxVertexUniforms:S,maxVaryings:E,maxFragmentUniforms:C,vertexTextures:T,maxSamples:A}}function nfe(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new yu,a=new Gt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const p=d.length!==0||h||r!==0||i;return i=h,r=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){n=u(d,h,0)},this.setState=function(d,h,p){const x=d.clippingPlanes,w=d.clipIntersection,y=d.clipShadows,v=t.get(d);if(!i||x===null||x.length===0||s&&!y)s?u(null):c();else{const S=s?0:r,E=S*4;let C=v.clippingState||null;l.value=C,C=u(x,h,E,p);for(let T=0;T!==E;++T)C[T]=n[T];v.clippingState=C,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function u(d,h,p,x){const w=d!==null?d.length:0;let y=null;if(w!==0){if(y=l.value,x!==!0||y===null){const v=p+w*4,S=h.matrixWorldInverse;a.getNormalMatrix(S),(y===null||y.length<v)&&(y=new Float32Array(v));for(let E=0,C=p;E!==w;++E,C+=4)o.copy(d[E]).applyMatrix4(S,a),o.normal.toArray(y,C),y[C+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,y}}function rfe(t){let e=new WeakMap;function n(o,a){return a===KE?o.mapping=ih:a===YE&&(o.mapping=sh),o}function r(o){if(o&&o.isTexture){const a=o.mapping;if(a===KE||a===YE)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new ice(l.height);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",i),n(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}const wf=4,$D=[.125,.215,.35,.446,.526,.582],bu=20,_1=new _j,WD=new wn;let E1=null,C1=0,M1=0,T1=!1;const xu=(1+Math.sqrt(5))/2,Yd=1/xu,GD=[new be(-xu,Yd,0),new be(xu,Yd,0),new be(-Yd,0,xu),new be(Yd,0,xu),new be(0,xu,-Yd),new be(0,xu,Yd),new be(-1,1,-1),new be(1,1,-1),new be(-1,1,1),new be(1,1,1)],ife=new be;class XD{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100,s={}){const{size:o=256,position:a=ife}=s;E1=this._renderer.getRenderTarget(),C1=this._renderer.getActiveCubeFace(),M1=this._renderer.getActiveMipmapLevel(),T1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,r,i,l,a),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=YD(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=KD(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(E1,C1,M1),this._renderer.xr.enabled=T1,e.scissorTest=!1,fy(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===ih||e.mapping===sh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),E1=this._renderer.getRenderTarget(),C1=this._renderer.getActiveCubeFace(),M1=this._renderer.getActiveMipmapLevel(),T1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:aa,minFilter:aa,generateMipmaps:!1,type:yg,format:Mo,colorSpace:oh,depthBuffer:!1},i=qD(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=qD(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=sfe(s)),this._blurMaterial=ofe(s,e,n)}return i}_compileMaterial(e){const n=new Hr(this._lodPlanes[0],e);this._renderer.compile(n,_1)}_sceneToCubeUV(e,n,r,i,s){const l=new $s(90,1,n,r),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,p=d.toneMapping;d.getClearColor(WD),d.toneMapping=bc,d.autoClear=!1;const x=new Kx({name:"PMREM.Background",side:Yi,depthWrite:!1,depthTest:!1}),w=new Hr(new Sg,x);let y=!1;const v=e.background;v?v.isColor&&(x.color.copy(v),e.background=null,y=!0):(x.color.copy(WD),y=!0);for(let S=0;S<6;S++){const E=S%3;E===0?(l.up.set(0,c[S],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[S],s.y,s.z)):E===1?(l.up.set(0,0,c[S]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[S],s.z)):(l.up.set(0,c[S],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[S]));const C=this._cubeSize;fy(i,E*C,S>2?C:0,C,C),d.setRenderTarget(i),y&&d.render(w,l),d.render(e,l)}w.geometry.dispose(),w.material.dispose(),d.toneMapping=p,d.autoClear=h,e.background=v}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===ih||e.mapping===sh;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=YD()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=KD());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Hr(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;fy(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,_1)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;const i=this._lodPlanes.length;for(let s=1;s<i;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=GD[(i-s-1)%GD.length];this._blur(e,s-1,s,o,a)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Hr(this._lodPlanes[i],c),h=c.uniforms,p=this._sizeLods[r]-1,x=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*bu-1),w=s/x,y=isFinite(s)?1+Math.floor(u*w):bu;y>bu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${bu}`);const v=[];let S=0;for(let k=0;k<bu;++k){const R=k/w,P=Math.exp(-R*R/2);v.push(P),k===0?S+=P:k<y&&(S+=2*P)}for(let k=0;k<v.length;k++)v[k]=v[k]/S;h.envMap.value=e.texture,h.samples.value=y,h.weights.value=v,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:E}=this;h.dTheta.value=x,h.mipInt.value=E-r;const C=this._sizeLods[i],T=3*C*(i>E-wf?i-E+wf:0),A=4*(this._cubeSize-C);fy(n,T,A,3*C,2*C),l.setRenderTarget(n),l.render(d,_1)}}function sfe(t){const e=[],n=[],r=[];let i=t;const s=t-wf+1+$D.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-wf?l=$D[o-t+wf-1]:o===0&&(l=0),r.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],p=6,x=6,w=3,y=2,v=1,S=new Float32Array(w*x*p),E=new Float32Array(y*x*p),C=new Float32Array(v*x*p);for(let A=0;A<p;A++){const k=A%3*2/3-1,R=A>2?0:-1,P=[k,R,0,k+2/3,R,0,k+2/3,R+1,0,k,R,0,k+2/3,R+1,0,k,R+1,0];S.set(P,w*x*A),E.set(h,y*x*A);const M=[A,A,A,A,A,A];C.set(M,v*x*A)}const T=new jc;T.setAttribute("position",new ha(S,w)),T.setAttribute("uv",new ha(E,y)),T.setAttribute("faceIndex",new ha(C,v)),e.push(T),i>wf&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function qD(t,e,n){const r=new nd(t,e,n);return r.texture.mapping=mw,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function fy(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function ofe(t,e,n){const r=new Float32Array(bu),i=new be(0,1,0);return new Dc({name:"SphericalGaussianBlur",defines:{n:bu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:gA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:wc,depthTest:!1,depthWrite:!1})}function KD(){return new Dc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:gA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:wc,depthTest:!1,depthWrite:!1})}function YD(){return new Dc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:gA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:wc,depthTest:!1,depthWrite:!1})}function gA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function afe(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,c=l===KE||l===YE,u=l===ih||l===sh;if(c||u){let d=e.get(a);const h=d!==void 0?d.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return n===null&&(n=new XD(t)),d=c?n.fromEquirectangular(a,d):n.fromCubemap(a,d),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),d.texture;if(d!==void 0)return d.texture;{const p=a.image;return c&&p&&p.height>0||u&&p&&i(p)?(n===null&&(n=new XD(t)),d=c?n.fromEquirectangular(a):n.fromCubemap(a),d.texture.pmremVersion=a.pmremVersion,e.set(a,d),a.addEventListener("dispose",s),d.texture):null}}}return a}function i(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function lfe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(r){const i=n(r);return i===null&&Df("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function cfe(t,e,n,r){const i={},s=new WeakMap;function o(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const x in h.attributes)e.remove(h.attributes[x]);h.removeEventListener("dispose",o),delete i[h.id];const p=s.get(h);p&&(e.remove(p),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(d,h){return i[h.id]===!0||(h.addEventListener("dispose",o),i[h.id]=!0,n.memory.geometries++),h}function l(d){const h=d.attributes;for(const p in h)e.update(h[p],t.ARRAY_BUFFER)}function c(d){const h=[],p=d.index,x=d.attributes.position;let w=0;if(p!==null){const S=p.array;w=p.version;for(let E=0,C=S.length;E<C;E+=3){const T=S[E+0],A=S[E+1],k=S[E+2];h.push(T,A,A,k,k,T)}}else if(x!==void 0){const S=x.array;w=x.version;for(let E=0,C=S.length/3-1;E<C;E+=3){const T=E+0,A=E+1,k=E+2;h.push(T,A,A,k,k,T)}}else return;const y=new(fj(h)?vj:gj)(h,1);y.version=w;const v=s.get(d);v&&e.remove(v),s.set(d,y)}function u(d){const h=s.get(d);if(h){const p=d.index;p!==null&&h.version<p.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function ufe(t,e,n){let r;function i(h){r=h}let s,o;function a(h){s=h.type,o=h.bytesPerElement}function l(h,p){t.drawElements(r,p,s,h*o),n.update(p,r,1)}function c(h,p,x){x!==0&&(t.drawElementsInstanced(r,p,s,h*o,x),n.update(p,r,x))}function u(h,p,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,p,0,s,h,0,x);let y=0;for(let v=0;v<x;v++)y+=p[v];n.update(y,r,1)}function d(h,p,x,w){if(x===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let v=0;v<h.length;v++)c(h[v]/o,p[v],w[v]);else{y.multiDrawElementsInstancedWEBGL(r,p,0,s,h,0,w,0,x);let v=0;for(let S=0;S<x;S++)v+=p[S]*w[S];n.update(v,r,1)}}this.setMode=i,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=d}function dfe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function ffe(t,e,n){const r=new WeakMap,i=new nr;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,d=u!==void 0?u.length:0;let h=r.get(a);if(h===void 0||h.count!==d){let M=function(){R.dispose(),r.delete(a),a.removeEventListener("dispose",M)};var p=M;h!==void 0&&h.texture.dispose();const x=a.morphAttributes.position!==void 0,w=a.morphAttributes.normal!==void 0,y=a.morphAttributes.color!==void 0,v=a.morphAttributes.position||[],S=a.morphAttributes.normal||[],E=a.morphAttributes.color||[];let C=0;x===!0&&(C=1),w===!0&&(C=2),y===!0&&(C=3);let T=a.attributes.position.count*C,A=1;T>e.maxTextureSize&&(A=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const k=new Float32Array(T*A*4*d),R=new hj(k,T,A,d);R.type=Qa,R.needsUpdate=!0;const P=C*4;for(let I=0;I<d;I++){const z=v[I],H=S[I],j=E[I],J=T*A*4*I;for(let q=0;q<z.count;q++){const Q=q*P;x===!0&&(i.fromBufferAttribute(z,q),k[J+Q+0]=i.x,k[J+Q+1]=i.y,k[J+Q+2]=i.z,k[J+Q+3]=0),w===!0&&(i.fromBufferAttribute(H,q),k[J+Q+4]=i.x,k[J+Q+5]=i.y,k[J+Q+6]=i.z,k[J+Q+7]=0),y===!0&&(i.fromBufferAttribute(j,q),k[J+Q+8]=i.x,k[J+Q+9]=i.y,k[J+Q+10]=i.z,k[J+Q+11]=j.itemSize===4?i.w:1)}}h={count:d,texture:R,size:new En(T,A)},r.set(a,h),a.addEventListener("dispose",M)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let x=0;for(let y=0;y<c.length;y++)x+=c[y];const w=a.morphTargetsRelative?1:1-x;l.getUniforms().setValue(t,"morphTargetBaseInfluence",w),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",h.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",h.size)}return{update:s}}function hfe(t,e,n,r){let i=new WeakMap;function s(l){const c=r.render.frame,u=l.geometry,d=e.get(l,u);if(i.get(d)!==c&&(e.update(d),i.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;i.get(h)!==c&&(h.update(),i.set(h,c))}return d}function o(){i=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}const Cj=new Ji,JD=new bj(1,1),Mj=new hj,Tj=new zle,Aj=new wj,QD=[],ZD=[],eI=new Float32Array(16),tI=new Float32Array(9),nI=new Float32Array(4);function Rh(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=QD[i];if(s===void 0&&(s=new Float32Array(i),QD[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function wr(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function br(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function yw(t,e){let n=ZD[e];n===void 0&&(n=new Int32Array(e),ZD[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function pfe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function mfe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(wr(n,e))return;t.uniform2fv(this.addr,e),br(n,e)}}function gfe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(wr(n,e))return;t.uniform3fv(this.addr,e),br(n,e)}}function vfe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(wr(n,e))return;t.uniform4fv(this.addr,e),br(n,e)}}function yfe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(wr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),br(n,e)}else{if(wr(n,r))return;nI.set(r),t.uniformMatrix2fv(this.addr,!1,nI),br(n,r)}}function xfe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(wr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),br(n,e)}else{if(wr(n,r))return;tI.set(r),t.uniformMatrix3fv(this.addr,!1,tI),br(n,r)}}function wfe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(wr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),br(n,e)}else{if(wr(n,r))return;eI.set(r),t.uniformMatrix4fv(this.addr,!1,eI),br(n,r)}}function bfe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Sfe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(wr(n,e))return;t.uniform2iv(this.addr,e),br(n,e)}}function _fe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(wr(n,e))return;t.uniform3iv(this.addr,e),br(n,e)}}function Efe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(wr(n,e))return;t.uniform4iv(this.addr,e),br(n,e)}}function Cfe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Mfe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(wr(n,e))return;t.uniform2uiv(this.addr,e),br(n,e)}}function Tfe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(wr(n,e))return;t.uniform3uiv(this.addr,e),br(n,e)}}function Afe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(wr(n,e))return;t.uniform4uiv(this.addr,e),br(n,e)}}function Rfe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);let s;this.type===t.SAMPLER_2D_SHADOW?(JD.compareFunction=dj,s=JD):s=Cj,n.setTexture2D(e||s,i)}function kfe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||Tj,i)}function Nfe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Aj,i)}function Pfe(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||Mj,i)}function Dfe(t){switch(t){case 5126:return pfe;case 35664:return mfe;case 35665:return gfe;case 35666:return vfe;case 35674:return yfe;case 35675:return xfe;case 35676:return wfe;case 5124:case 35670:return bfe;case 35667:case 35671:return Sfe;case 35668:case 35672:return _fe;case 35669:case 35673:return Efe;case 5125:return Cfe;case 36294:return Mfe;case 36295:return Tfe;case 36296:return Afe;case 35678:case 36198:case 36298:case 36306:case 35682:return Rfe;case 35679:case 36299:case 36307:return kfe;case 35680:case 36300:case 36308:case 36293:return Nfe;case 36289:case 36303:case 36311:case 36292:return Pfe}}function Ife(t,e){t.uniform1fv(this.addr,e)}function Lfe(t,e){const n=Rh(e,this.size,2);t.uniform2fv(this.addr,n)}function Ofe(t,e){const n=Rh(e,this.size,3);t.uniform3fv(this.addr,n)}function Ffe(t,e){const n=Rh(e,this.size,4);t.uniform4fv(this.addr,n)}function Ufe(t,e){const n=Rh(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Bfe(t,e){const n=Rh(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function zfe(t,e){const n=Rh(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function jfe(t,e){t.uniform1iv(this.addr,e)}function Hfe(t,e){t.uniform2iv(this.addr,e)}function Vfe(t,e){t.uniform3iv(this.addr,e)}function $fe(t,e){t.uniform4iv(this.addr,e)}function Wfe(t,e){t.uniform1uiv(this.addr,e)}function Gfe(t,e){t.uniform2uiv(this.addr,e)}function Xfe(t,e){t.uniform3uiv(this.addr,e)}function qfe(t,e){t.uniform4uiv(this.addr,e)}function Kfe(t,e,n){const r=this.cache,i=e.length,s=yw(n,i);wr(r,s)||(t.uniform1iv(this.addr,s),br(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||Cj,s[o])}function Yfe(t,e,n){const r=this.cache,i=e.length,s=yw(n,i);wr(r,s)||(t.uniform1iv(this.addr,s),br(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||Tj,s[o])}function Jfe(t,e,n){const r=this.cache,i=e.length,s=yw(n,i);wr(r,s)||(t.uniform1iv(this.addr,s),br(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||Aj,s[o])}function Qfe(t,e,n){const r=this.cache,i=e.length,s=yw(n,i);wr(r,s)||(t.uniform1iv(this.addr,s),br(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||Mj,s[o])}function Zfe(t){switch(t){case 5126:return Ife;case 35664:return Lfe;case 35665:return Ofe;case 35666:return Ffe;case 35674:return Ufe;case 35675:return Bfe;case 35676:return zfe;case 5124:case 35670:return jfe;case 35667:case 35671:return Hfe;case 35668:case 35672:return Vfe;case 35669:case 35673:return $fe;case 5125:return Wfe;case 36294:return Gfe;case 36295:return Xfe;case 36296:return qfe;case 35678:case 36198:case 36298:case 36306:case 35682:return Kfe;case 35679:case 36299:case 36307:return Yfe;case 35680:case 36300:case 36308:case 36293:return Jfe;case 36289:case 36303:case 36311:case 36292:return Qfe}}class ehe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=Dfe(n.type)}}class the{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=Zfe(n.type)}}class nhe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const A1=/(\w+)(\])?(\[|\.)?/g;function rI(t,e){t.seq.push(e),t.map[e.id]=e}function rhe(t,e,n){const r=t.name,i=r.length;for(A1.lastIndex=0;;){const s=A1.exec(r),o=A1.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===i){rI(n,c===void 0?new ehe(a,t,e):new the(a,t,e));break}else{let d=n.map[a];d===void 0&&(d=new nhe(a),rI(n,d)),n=d}}}class tx{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);rhe(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function iI(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const ihe=37297;let she=0;function ohe(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}const sI=new Gt;function ahe(t){gn._getMatrix(sI,gn.workingColorSpace,t);const e=`mat3( ${sI.elements.map(n=>n.toFixed(4))} )`;switch(gn.getTransfer(t)){case Gx:return[e,"LinearTransferOETF"];case Mn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function oI(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+ohe(t.getShaderSource(e),o)}else return i}function lhe(t,e){const n=ahe(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function che(t,e){let n;switch(e){case dle:n="Linear";break;case fle:n="Reinhard";break;case hle:n="Cineon";break;case ple:n="ACESFilmic";break;case gle:n="AgX";break;case vle:n="Neutral";break;case mle:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const hy=new be;function uhe(){gn.getLuminanceCoefficients(hy);const t=hy.x.toFixed(4),e=hy.y.toFixed(4),n=hy.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function dhe(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(kp).join(`
`)}function fhe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function hhe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function kp(t){return t!==""}function aI(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function lI(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const phe=/^[ \t]*#include +<([\w\d./]+)>/gm;function MC(t){return t.replace(phe,ghe)}const mhe=new Map;function ghe(t,e){let n=Yt[e];if(n===void 0){const r=mhe.get(e);if(r!==void 0)n=Yt[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return MC(n)}const vhe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function cI(t){return t.replace(vhe,yhe)}function yhe(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function uI(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function xhe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===ej?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===$ae?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Ha&&(e="SHADOWMAP_TYPE_VSM"),e}function whe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ih:case sh:e="ENVMAP_TYPE_CUBE";break;case mw:e="ENVMAP_TYPE_CUBE_UV";break}return e}function bhe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case sh:e="ENVMAP_MODE_REFRACTION";break}return e}function She(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case tj:e="ENVMAP_BLENDING_MULTIPLY";break;case cle:e="ENVMAP_BLENDING_MIX";break;case ule:e="ENVMAP_BLENDING_ADD";break}return e}function _he(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function Ehe(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=xhe(n),c=whe(n),u=bhe(n),d=She(n),h=_he(n),p=dhe(n),x=fhe(s),w=i.createProgram();let y,v,S=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(y=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(kp).join(`
`),y.length>0&&(y+=`
`),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(kp).join(`
`),v.length>0&&(v+=`
`)):(y=[uI(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(kp).join(`
`),v=[uI(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==bc?"#define TONE_MAPPING":"",n.toneMapping!==bc?Yt.tonemapping_pars_fragment:"",n.toneMapping!==bc?che("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Yt.colorspace_pars_fragment,lhe("linearToOutputTexel",n.outputColorSpace),uhe(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(kp).join(`
`)),o=MC(o),o=aI(o,n),o=lI(o,n),a=MC(a),a=aI(a,n),a=lI(a,n),o=cI(o),a=cI(a),n.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,y=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,v=["#define varying in",n.glslVersion===_D?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===_D?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const E=S+y+o,C=S+v+a,T=iI(i,i.VERTEX_SHADER,E),A=iI(i,i.FRAGMENT_SHADER,C);i.attachShader(w,T),i.attachShader(w,A),n.index0AttributeName!==void 0?i.bindAttribLocation(w,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(w,0,"position"),i.linkProgram(w);function k(I){if(t.debug.checkShaderErrors){const z=i.getProgramInfoLog(w).trim(),H=i.getShaderInfoLog(T).trim(),j=i.getShaderInfoLog(A).trim();let J=!0,q=!0;if(i.getProgramParameter(w,i.LINK_STATUS)===!1)if(J=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,w,T,A);else{const Q=oI(i,T,"vertex"),O=oI(i,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(w,i.VALIDATE_STATUS)+`

Material Name: `+I.name+`
Material Type: `+I.type+`

Program Info Log: `+z+`
`+Q+`
`+O)}else z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",z):(H===""||j==="")&&(q=!1);q&&(I.diagnostics={runnable:J,programLog:z,vertexShader:{log:H,prefix:y},fragmentShader:{log:j,prefix:v}})}i.deleteShader(T),i.deleteShader(A),R=new tx(i,w),P=hhe(i,w)}let R;this.getUniforms=function(){return R===void 0&&k(this),R};let P;this.getAttributes=function(){return P===void 0&&k(this),P};let M=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=i.getProgramParameter(w,ihe)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(w),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=she++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=T,this.fragmentShader=A,this}let Che=0;class Mhe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new The(e),n.set(e,r)),r}}class The{constructor(e){this.id=Che++,this.code=e,this.usedTimes=0}}function Ahe(t,e,n,r,i,s,o){const a=new pj,l=new Mhe,c=new Set,u=[],d=i.logarithmicDepthBuffer,h=i.vertexTextures;let p=i.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(P){return c.add(P),P===0?"uv":`uv${P}`}function y(P,M,I,z,H){const j=z.fog,J=H.geometry,q=P.isMeshStandardMaterial?z.environment:null,Q=(P.isMeshStandardMaterial?n:e).get(P.envMap||q),O=Q&&Q.mapping===mw?Q.image.height:null,F=x[P.type];P.precision!==null&&(p=i.getMaxPrecision(P.precision),p!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",p,"instead."));const D=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,ee=D!==void 0?D.length:0;let W=0;J.morphAttributes.position!==void 0&&(W=1),J.morphAttributes.normal!==void 0&&(W=2),J.morphAttributes.color!==void 0&&(W=3);let B,K,ie,oe;if(F){const Tt=ea[F];B=Tt.vertexShader,K=Tt.fragmentShader}else B=P.vertexShader,K=P.fragmentShader,l.update(P),ie=l.getVertexShaderID(P),oe=l.getFragmentShaderID(P);const Z=t.getRenderTarget(),pe=t.state.buffers.depth.getReversed(),ye=H.isInstancedMesh===!0,ge=H.isBatchedMesh===!0,je=!!P.map,We=!!P.matcap,it=!!Q,te=!!P.aoMap,pt=!!P.lightMap,Be=!!P.bumpMap,ut=!!P.normalMap,Xe=!!P.displacementMap,wt=!!P.emissiveMap,Ae=!!P.metalnessMap,Pe=!!P.roughnessMap,ot=P.anisotropy>0,Y=P.clearcoat>0,L=P.dispersion>0,ne=P.iridescence>0,X=P.sheen>0,se=P.transmission>0,ae=ot&&!!P.anisotropyMap,Ce=Y&&!!P.clearcoatMap,Re=Y&&!!P.clearcoatNormalMap,ue=Y&&!!P.clearcoatRoughnessMap,Te=ne&&!!P.iridescenceMap,de=ne&&!!P.iridescenceThicknessMap,_e=X&&!!P.sheenColorMap,Qe=X&&!!P.sheenRoughnessMap,Ye=!!P.specularMap,qe=!!P.specularColorMap,mt=!!P.specularIntensityMap,ce=se&&!!P.transmissionMap,st=se&&!!P.thicknessMap,He=!!P.gradientMap,et=!!P.alphaMap,De=P.alphaTest>0,ke=!!P.alphaHash,Ie=!!P.extensions;let tt=bc;P.toneMapped&&(Z===null||Z.isXRRenderTarget===!0)&&(tt=t.toneMapping);const ft={shaderID:F,shaderType:P.type,shaderName:P.name,vertexShader:B,fragmentShader:K,defines:P.defines,customVertexShaderID:ie,customFragmentShaderID:oe,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:p,batching:ge,batchingColor:ge&&H._colorsTexture!==null,instancing:ye,instancingColor:ye&&H.instanceColor!==null,instancingMorph:ye&&H.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:Z===null?t.outputColorSpace:Z.isXRRenderTarget===!0?Z.texture.colorSpace:oh,alphaToCoverage:!!P.alphaToCoverage,map:je,matcap:We,envMap:it,envMapMode:it&&Q.mapping,envMapCubeUVHeight:O,aoMap:te,lightMap:pt,bumpMap:Be,normalMap:ut,displacementMap:h&&Xe,emissiveMap:wt,normalMapObjectSpace:ut&&P.normalMapType===Sle,normalMapTangentSpace:ut&&P.normalMapType===ble,metalnessMap:Ae,roughnessMap:Pe,anisotropy:ot,anisotropyMap:ae,clearcoat:Y,clearcoatMap:Ce,clearcoatNormalMap:Re,clearcoatRoughnessMap:ue,dispersion:L,iridescence:ne,iridescenceMap:Te,iridescenceThicknessMap:de,sheen:X,sheenColorMap:_e,sheenRoughnessMap:Qe,specularMap:Ye,specularColorMap:qe,specularIntensityMap:mt,transmission:se,transmissionMap:ce,thicknessMap:st,gradientMap:He,opaque:P.transparent===!1&&P.blending===Pf&&P.alphaToCoverage===!1,alphaMap:et,alphaTest:De,alphaHash:ke,combine:P.combine,mapUv:je&&w(P.map.channel),aoMapUv:te&&w(P.aoMap.channel),lightMapUv:pt&&w(P.lightMap.channel),bumpMapUv:Be&&w(P.bumpMap.channel),normalMapUv:ut&&w(P.normalMap.channel),displacementMapUv:Xe&&w(P.displacementMap.channel),emissiveMapUv:wt&&w(P.emissiveMap.channel),metalnessMapUv:Ae&&w(P.metalnessMap.channel),roughnessMapUv:Pe&&w(P.roughnessMap.channel),anisotropyMapUv:ae&&w(P.anisotropyMap.channel),clearcoatMapUv:Ce&&w(P.clearcoatMap.channel),clearcoatNormalMapUv:Re&&w(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ue&&w(P.clearcoatRoughnessMap.channel),iridescenceMapUv:Te&&w(P.iridescenceMap.channel),iridescenceThicknessMapUv:de&&w(P.iridescenceThicknessMap.channel),sheenColorMapUv:_e&&w(P.sheenColorMap.channel),sheenRoughnessMapUv:Qe&&w(P.sheenRoughnessMap.channel),specularMapUv:Ye&&w(P.specularMap.channel),specularColorMapUv:qe&&w(P.specularColorMap.channel),specularIntensityMapUv:mt&&w(P.specularIntensityMap.channel),transmissionMapUv:ce&&w(P.transmissionMap.channel),thicknessMapUv:st&&w(P.thicknessMap.channel),alphaMapUv:et&&w(P.alphaMap.channel),vertexTangents:!!J.attributes.tangent&&(ut||ot),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,pointsUvs:H.isPoints===!0&&!!J.attributes.uv&&(je||et),fog:!!j,useFog:P.fog===!0,fogExp2:!!j&&j.isFogExp2,flatShading:P.flatShading===!0,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:pe,skinning:H.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:ee,morphTextureStride:W,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:P.dithering,shadowMapEnabled:t.shadowMap.enabled&&I.length>0,shadowMapType:t.shadowMap.type,toneMapping:tt,decodeVideoTexture:je&&P.map.isVideoTexture===!0&&gn.getTransfer(P.map.colorSpace)===Mn,decodeVideoTextureEmissive:wt&&P.emissiveMap.isVideoTexture===!0&&gn.getTransfer(P.emissiveMap.colorSpace)===Mn,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===sa,flipSided:P.side===Yi,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionClipCullDistance:Ie&&P.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ie&&P.extensions.multiDraw===!0||ge)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:P.customProgramCacheKey()};return ft.vertexUv1s=c.has(1),ft.vertexUv2s=c.has(2),ft.vertexUv3s=c.has(3),c.clear(),ft}function v(P){const M=[];if(P.shaderID?M.push(P.shaderID):(M.push(P.customVertexShaderID),M.push(P.customFragmentShaderID)),P.defines!==void 0)for(const I in P.defines)M.push(I),M.push(P.defines[I]);return P.isRawShaderMaterial===!1&&(S(M,P),E(M,P),M.push(t.outputColorSpace)),M.push(P.customProgramCacheKey),M.join()}function S(P,M){P.push(M.precision),P.push(M.outputColorSpace),P.push(M.envMapMode),P.push(M.envMapCubeUVHeight),P.push(M.mapUv),P.push(M.alphaMapUv),P.push(M.lightMapUv),P.push(M.aoMapUv),P.push(M.bumpMapUv),P.push(M.normalMapUv),P.push(M.displacementMapUv),P.push(M.emissiveMapUv),P.push(M.metalnessMapUv),P.push(M.roughnessMapUv),P.push(M.anisotropyMapUv),P.push(M.clearcoatMapUv),P.push(M.clearcoatNormalMapUv),P.push(M.clearcoatRoughnessMapUv),P.push(M.iridescenceMapUv),P.push(M.iridescenceThicknessMapUv),P.push(M.sheenColorMapUv),P.push(M.sheenRoughnessMapUv),P.push(M.specularMapUv),P.push(M.specularColorMapUv),P.push(M.specularIntensityMapUv),P.push(M.transmissionMapUv),P.push(M.thicknessMapUv),P.push(M.combine),P.push(M.fogExp2),P.push(M.sizeAttenuation),P.push(M.morphTargetsCount),P.push(M.morphAttributeCount),P.push(M.numDirLights),P.push(M.numPointLights),P.push(M.numSpotLights),P.push(M.numSpotLightMaps),P.push(M.numHemiLights),P.push(M.numRectAreaLights),P.push(M.numDirLightShadows),P.push(M.numPointLightShadows),P.push(M.numSpotLightShadows),P.push(M.numSpotLightShadowsWithMaps),P.push(M.numLightProbes),P.push(M.shadowMapType),P.push(M.toneMapping),P.push(M.numClippingPlanes),P.push(M.numClipIntersection),P.push(M.depthPacking)}function E(P,M){a.disableAll(),M.supportsVertexTextures&&a.enable(0),M.instancing&&a.enable(1),M.instancingColor&&a.enable(2),M.instancingMorph&&a.enable(3),M.matcap&&a.enable(4),M.envMap&&a.enable(5),M.normalMapObjectSpace&&a.enable(6),M.normalMapTangentSpace&&a.enable(7),M.clearcoat&&a.enable(8),M.iridescence&&a.enable(9),M.alphaTest&&a.enable(10),M.vertexColors&&a.enable(11),M.vertexAlphas&&a.enable(12),M.vertexUv1s&&a.enable(13),M.vertexUv2s&&a.enable(14),M.vertexUv3s&&a.enable(15),M.vertexTangents&&a.enable(16),M.anisotropy&&a.enable(17),M.alphaHash&&a.enable(18),M.batching&&a.enable(19),M.dispersion&&a.enable(20),M.batchingColor&&a.enable(21),P.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.reverseDepthBuffer&&a.enable(4),M.skinning&&a.enable(5),M.morphTargets&&a.enable(6),M.morphNormals&&a.enable(7),M.morphColors&&a.enable(8),M.premultipliedAlpha&&a.enable(9),M.shadowMapEnabled&&a.enable(10),M.doubleSided&&a.enable(11),M.flipSided&&a.enable(12),M.useDepthPacking&&a.enable(13),M.dithering&&a.enable(14),M.transmission&&a.enable(15),M.sheen&&a.enable(16),M.opaque&&a.enable(17),M.pointsUvs&&a.enable(18),M.decodeVideoTexture&&a.enable(19),M.decodeVideoTextureEmissive&&a.enable(20),M.alphaToCoverage&&a.enable(21),P.push(a.mask)}function C(P){const M=x[P.type];let I;if(M){const z=ea[M];I=ece.clone(z.uniforms)}else I=P.uniforms;return I}function T(P,M){let I;for(let z=0,H=u.length;z<H;z++){const j=u[z];if(j.cacheKey===M){I=j,++I.usedTimes;break}}return I===void 0&&(I=new Ehe(t,M,P,s),u.push(I)),I}function A(P){if(--P.usedTimes===0){const M=u.indexOf(P);u[M]=u[u.length-1],u.pop(),P.destroy()}}function k(P){l.remove(P)}function R(){l.dispose()}return{getParameters:y,getProgramCacheKey:v,getUniforms:C,acquireProgram:T,releaseProgram:A,releaseShaderCache:k,programs:u,dispose:R}}function Rhe(){let t=new WeakMap;function e(o){return t.has(o)}function n(o){let a=t.get(o);return a===void 0&&(a={},t.set(o,a)),a}function r(o){t.delete(o)}function i(o,a,l){t.get(o)[a]=l}function s(){t=new WeakMap}return{has:e,get:n,remove:r,update:i,dispose:s}}function khe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function dI(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function fI(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(d,h,p,x,w,y){let v=t[e];return v===void 0?(v={id:d.id,object:d,geometry:h,material:p,groupOrder:x,renderOrder:d.renderOrder,z:w,group:y},t[e]=v):(v.id=d.id,v.object=d,v.geometry=h,v.material=p,v.groupOrder=x,v.renderOrder=d.renderOrder,v.z=w,v.group=y),e++,v}function a(d,h,p,x,w,y){const v=o(d,h,p,x,w,y);p.transmission>0?r.push(v):p.transparent===!0?i.push(v):n.push(v)}function l(d,h,p,x,w,y){const v=o(d,h,p,x,w,y);p.transmission>0?r.unshift(v):p.transparent===!0?i.unshift(v):n.unshift(v)}function c(d,h){n.length>1&&n.sort(d||khe),r.length>1&&r.sort(h||dI),i.length>1&&i.sort(h||dI)}function u(){for(let d=e,h=t.length;d<h;d++){const p=t[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:u,sort:c}}function Nhe(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new fI,t.set(r,[o])):i>=s.length?(o=new fI,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function Phe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new be,color:new wn};break;case"SpotLight":n={position:new be,direction:new be,color:new wn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new be,color:new wn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new be,skyColor:new wn,groundColor:new wn};break;case"RectAreaLight":n={color:new wn,position:new be,halfWidth:new be,halfHeight:new be};break}return t[e.id]=n,n}}}function Dhe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new En};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new En};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new En,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Ihe=0;function Lhe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Ohe(t){const e=new Phe,n=Dhe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)r.probe.push(new be);const i=new be,s=new rr,o=new rr;function a(c){let u=0,d=0,h=0;for(let P=0;P<9;P++)r.probe[P].set(0,0,0);let p=0,x=0,w=0,y=0,v=0,S=0,E=0,C=0,T=0,A=0,k=0;c.sort(Lhe);for(let P=0,M=c.length;P<M;P++){const I=c[P],z=I.color,H=I.intensity,j=I.distance,J=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)u+=z.r*H,d+=z.g*H,h+=z.b*H;else if(I.isLightProbe){for(let q=0;q<9;q++)r.probe[q].addScaledVector(I.sh.coefficients[q],H);k++}else if(I.isDirectionalLight){const q=e.get(I);if(q.color.copy(I.color).multiplyScalar(I.intensity),I.castShadow){const Q=I.shadow,O=n.get(I);O.shadowIntensity=Q.intensity,O.shadowBias=Q.bias,O.shadowNormalBias=Q.normalBias,O.shadowRadius=Q.radius,O.shadowMapSize=Q.mapSize,r.directionalShadow[p]=O,r.directionalShadowMap[p]=J,r.directionalShadowMatrix[p]=I.shadow.matrix,S++}r.directional[p]=q,p++}else if(I.isSpotLight){const q=e.get(I);q.position.setFromMatrixPosition(I.matrixWorld),q.color.copy(z).multiplyScalar(H),q.distance=j,q.coneCos=Math.cos(I.angle),q.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),q.decay=I.decay,r.spot[w]=q;const Q=I.shadow;if(I.map&&(r.spotLightMap[T]=I.map,T++,Q.updateMatrices(I),I.castShadow&&A++),r.spotLightMatrix[w]=Q.matrix,I.castShadow){const O=n.get(I);O.shadowIntensity=Q.intensity,O.shadowBias=Q.bias,O.shadowNormalBias=Q.normalBias,O.shadowRadius=Q.radius,O.shadowMapSize=Q.mapSize,r.spotShadow[w]=O,r.spotShadowMap[w]=J,C++}w++}else if(I.isRectAreaLight){const q=e.get(I);q.color.copy(z).multiplyScalar(H),q.halfWidth.set(I.width*.5,0,0),q.halfHeight.set(0,I.height*.5,0),r.rectArea[y]=q,y++}else if(I.isPointLight){const q=e.get(I);if(q.color.copy(I.color).multiplyScalar(I.intensity),q.distance=I.distance,q.decay=I.decay,I.castShadow){const Q=I.shadow,O=n.get(I);O.shadowIntensity=Q.intensity,O.shadowBias=Q.bias,O.shadowNormalBias=Q.normalBias,O.shadowRadius=Q.radius,O.shadowMapSize=Q.mapSize,O.shadowCameraNear=Q.camera.near,O.shadowCameraFar=Q.camera.far,r.pointShadow[x]=O,r.pointShadowMap[x]=J,r.pointShadowMatrix[x]=I.shadow.matrix,E++}r.point[x]=q,x++}else if(I.isHemisphereLight){const q=e.get(I);q.skyColor.copy(I.color).multiplyScalar(H),q.groundColor.copy(I.groundColor).multiplyScalar(H),r.hemi[v]=q,v++}}y>0&&(t.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=lt.LTC_FLOAT_1,r.rectAreaLTC2=lt.LTC_FLOAT_2):(r.rectAreaLTC1=lt.LTC_HALF_1,r.rectAreaLTC2=lt.LTC_HALF_2)),r.ambient[0]=u,r.ambient[1]=d,r.ambient[2]=h;const R=r.hash;(R.directionalLength!==p||R.pointLength!==x||R.spotLength!==w||R.rectAreaLength!==y||R.hemiLength!==v||R.numDirectionalShadows!==S||R.numPointShadows!==E||R.numSpotShadows!==C||R.numSpotMaps!==T||R.numLightProbes!==k)&&(r.directional.length=p,r.spot.length=w,r.rectArea.length=y,r.point.length=x,r.hemi.length=v,r.directionalShadow.length=S,r.directionalShadowMap.length=S,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=C,r.spotShadowMap.length=C,r.directionalShadowMatrix.length=S,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=C+T-A,r.spotLightMap.length=T,r.numSpotLightShadowsWithMaps=A,r.numLightProbes=k,R.directionalLength=p,R.pointLength=x,R.spotLength=w,R.rectAreaLength=y,R.hemiLength=v,R.numDirectionalShadows=S,R.numPointShadows=E,R.numSpotShadows=C,R.numSpotMaps=T,R.numLightProbes=k,r.version=Ihe++)}function l(c,u){let d=0,h=0,p=0,x=0,w=0;const y=u.matrixWorldInverse;for(let v=0,S=c.length;v<S;v++){const E=c[v];if(E.isDirectionalLight){const C=r.directional[d];C.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),C.direction.sub(i),C.direction.transformDirection(y),d++}else if(E.isSpotLight){const C=r.spot[p];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(y),C.direction.setFromMatrixPosition(E.matrixWorld),i.setFromMatrixPosition(E.target.matrixWorld),C.direction.sub(i),C.direction.transformDirection(y),p++}else if(E.isRectAreaLight){const C=r.rectArea[x];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(y),o.identity(),s.copy(E.matrixWorld),s.premultiply(y),o.extractRotation(s),C.halfWidth.set(E.width*.5,0,0),C.halfHeight.set(0,E.height*.5,0),C.halfWidth.applyMatrix4(o),C.halfHeight.applyMatrix4(o),x++}else if(E.isPointLight){const C=r.point[h];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(y),h++}else if(E.isHemisphereLight){const C=r.hemi[w];C.direction.setFromMatrixPosition(E.matrixWorld),C.direction.transformDirection(y),w++}}}return{setup:a,setupView:l,state:r}}function hI(t){const e=new Ohe(t),n=[],r=[];function i(u){c.camera=u,n.length=0,r.length=0}function s(u){n.push(u)}function o(u){r.push(u)}function a(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function Fhe(t){let e=new WeakMap;function n(i,s=0){const o=e.get(i);let a;return o===void 0?(a=new hI(t),e.set(i,[a])):s>=o.length?(a=new hI(t),o.push(a)):a=o[s],a}function r(){e=new WeakMap}return{get:n,dispose:r}}const Uhe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Bhe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function zhe(t,e,n){let r=new mA;const i=new En,s=new En,o=new nr,a=new cce({depthPacking:wle}),l=new uce,c={},u=n.maxTextureSize,d={[Pc]:Yi,[Yi]:Pc,[sa]:sa},h=new Dc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new En},radius:{value:4}},vertexShader:Uhe,fragmentShader:Bhe}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const x=new jc;x.setAttribute("position",new ha(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new Hr(x,h),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ej;let v=this.type;this.render=function(A,k,R){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||A.length===0)return;const P=t.getRenderTarget(),M=t.getActiveCubeFace(),I=t.getActiveMipmapLevel(),z=t.state;z.setBlending(wc),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const H=v!==Ha&&this.type===Ha,j=v===Ha&&this.type!==Ha;for(let J=0,q=A.length;J<q;J++){const Q=A[J],O=Q.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;i.copy(O.mapSize);const F=O.getFrameExtents();if(i.multiply(F),s.copy(O.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/F.x),i.x=s.x*F.x,O.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/F.y),i.y=s.y*F.y,O.mapSize.y=s.y)),O.map===null||H===!0||j===!0){const ee=this.type!==Ha?{minFilter:Ro,magFilter:Ro}:{};O.map!==null&&O.map.dispose(),O.map=new nd(i.x,i.y,ee),O.map.texture.name=Q.name+".shadowMap",O.camera.updateProjectionMatrix()}t.setRenderTarget(O.map),t.clear();const D=O.getViewportCount();for(let ee=0;ee<D;ee++){const W=O.getViewport(ee);o.set(s.x*W.x,s.y*W.y,s.x*W.z,s.y*W.w),z.viewport(o),O.updateMatrices(Q,ee),r=O.getFrustum(),C(k,R,O.camera,Q,this.type)}O.isPointLightShadow!==!0&&this.type===Ha&&S(O,R),O.needsUpdate=!1}v=this.type,y.needsUpdate=!1,t.setRenderTarget(P,M,I)};function S(A,k){const R=e.update(w);h.defines.VSM_SAMPLES!==A.blurSamples&&(h.defines.VSM_SAMPLES=A.blurSamples,p.defines.VSM_SAMPLES=A.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),A.mapPass===null&&(A.mapPass=new nd(i.x,i.y)),h.uniforms.shadow_pass.value=A.map.texture,h.uniforms.resolution.value=A.mapSize,h.uniforms.radius.value=A.radius,t.setRenderTarget(A.mapPass),t.clear(),t.renderBufferDirect(k,null,R,h,w,null),p.uniforms.shadow_pass.value=A.mapPass.texture,p.uniforms.resolution.value=A.mapSize,p.uniforms.radius.value=A.radius,t.setRenderTarget(A.map),t.clear(),t.renderBufferDirect(k,null,R,p,w,null)}function E(A,k,R,P){let M=null;const I=R.isPointLight===!0?A.customDistanceMaterial:A.customDepthMaterial;if(I!==void 0)M=I;else if(M=R.isPointLight===!0?l:a,t.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0||k.alphaToCoverage===!0){const z=M.uuid,H=k.uuid;let j=c[z];j===void 0&&(j={},c[z]=j);let J=j[H];J===void 0&&(J=M.clone(),j[H]=J,k.addEventListener("dispose",T)),M=J}if(M.visible=k.visible,M.wireframe=k.wireframe,P===Ha?M.side=k.shadowSide!==null?k.shadowSide:k.side:M.side=k.shadowSide!==null?k.shadowSide:d[k.side],M.alphaMap=k.alphaMap,M.alphaTest=k.alphaToCoverage===!0?.5:k.alphaTest,M.map=k.map,M.clipShadows=k.clipShadows,M.clippingPlanes=k.clippingPlanes,M.clipIntersection=k.clipIntersection,M.displacementMap=k.displacementMap,M.displacementScale=k.displacementScale,M.displacementBias=k.displacementBias,M.wireframeLinewidth=k.wireframeLinewidth,M.linewidth=k.linewidth,R.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const z=t.properties.get(M);z.light=R}return M}function C(A,k,R,P,M){if(A.visible===!1)return;if(A.layers.test(k.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&M===Ha)&&(!A.frustumCulled||r.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,A.matrixWorld);const H=e.update(A),j=A.material;if(Array.isArray(j)){const J=H.groups;for(let q=0,Q=J.length;q<Q;q++){const O=J[q],F=j[O.materialIndex];if(F&&F.visible){const D=E(A,F,P,M);A.onBeforeShadow(t,A,k,R,H,D,O),t.renderBufferDirect(R,null,H,D,A,O),A.onAfterShadow(t,A,k,R,H,D,O)}}}else if(j.visible){const J=E(A,j,P,M);A.onBeforeShadow(t,A,k,R,H,J,null),t.renderBufferDirect(R,null,H,J,A,null),A.onAfterShadow(t,A,k,R,H,J,null)}}const z=A.children;for(let H=0,j=z.length;H<j;H++)C(z[H],k,R,P,M)}function T(A){A.target.removeEventListener("dispose",T);for(const R in c){const P=c[R],M=A.target.uuid;M in P&&(P[M].dispose(),delete P[M])}}}const jhe={[HE]:VE,[$E]:XE,[WE]:qE,[rh]:GE,[VE]:HE,[XE]:$E,[qE]:WE,[GE]:rh};function Hhe(t,e){function n(){let ce=!1;const st=new nr;let He=null;const et=new nr(0,0,0,0);return{setMask:function(De){He!==De&&!ce&&(t.colorMask(De,De,De,De),He=De)},setLocked:function(De){ce=De},setClear:function(De,ke,Ie,tt,ft){ft===!0&&(De*=tt,ke*=tt,Ie*=tt),st.set(De,ke,Ie,tt),et.equals(st)===!1&&(t.clearColor(De,ke,Ie,tt),et.copy(st))},reset:function(){ce=!1,He=null,et.set(-1,0,0,0)}}}function r(){let ce=!1,st=!1,He=null,et=null,De=null;return{setReversed:function(ke){if(st!==ke){const Ie=e.get("EXT_clip_control");ke?Ie.clipControlEXT(Ie.LOWER_LEFT_EXT,Ie.ZERO_TO_ONE_EXT):Ie.clipControlEXT(Ie.LOWER_LEFT_EXT,Ie.NEGATIVE_ONE_TO_ONE_EXT),st=ke;const tt=De;De=null,this.setClear(tt)}},getReversed:function(){return st},setTest:function(ke){ke?Z(t.DEPTH_TEST):pe(t.DEPTH_TEST)},setMask:function(ke){He!==ke&&!ce&&(t.depthMask(ke),He=ke)},setFunc:function(ke){if(st&&(ke=jhe[ke]),et!==ke){switch(ke){case HE:t.depthFunc(t.NEVER);break;case VE:t.depthFunc(t.ALWAYS);break;case $E:t.depthFunc(t.LESS);break;case rh:t.depthFunc(t.LEQUAL);break;case WE:t.depthFunc(t.EQUAL);break;case GE:t.depthFunc(t.GEQUAL);break;case XE:t.depthFunc(t.GREATER);break;case qE:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}et=ke}},setLocked:function(ke){ce=ke},setClear:function(ke){De!==ke&&(st&&(ke=1-ke),t.clearDepth(ke),De=ke)},reset:function(){ce=!1,He=null,et=null,De=null,st=!1}}}function i(){let ce=!1,st=null,He=null,et=null,De=null,ke=null,Ie=null,tt=null,ft=null;return{setTest:function(Tt){ce||(Tt?Z(t.STENCIL_TEST):pe(t.STENCIL_TEST))},setMask:function(Tt){st!==Tt&&!ce&&(t.stencilMask(Tt),st=Tt)},setFunc:function(Tt,cn,qt){(He!==Tt||et!==cn||De!==qt)&&(t.stencilFunc(Tt,cn,qt),He=Tt,et=cn,De=qt)},setOp:function(Tt,cn,qt){(ke!==Tt||Ie!==cn||tt!==qt)&&(t.stencilOp(Tt,cn,qt),ke=Tt,Ie=cn,tt=qt)},setLocked:function(Tt){ce=Tt},setClear:function(Tt){ft!==Tt&&(t.clearStencil(Tt),ft=Tt)},reset:function(){ce=!1,st=null,He=null,et=null,De=null,ke=null,Ie=null,tt=null,ft=null}}}const s=new n,o=new r,a=new i,l=new WeakMap,c=new WeakMap;let u={},d={},h=new WeakMap,p=[],x=null,w=!1,y=null,v=null,S=null,E=null,C=null,T=null,A=null,k=new wn(0,0,0),R=0,P=!1,M=null,I=null,z=null,H=null,j=null;const J=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let q=!1,Q=0;const O=t.getParameter(t.VERSION);O.indexOf("WebGL")!==-1?(Q=parseFloat(/^WebGL (\d)/.exec(O)[1]),q=Q>=1):O.indexOf("OpenGL ES")!==-1&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),q=Q>=2);let F=null,D={};const ee=t.getParameter(t.SCISSOR_BOX),W=t.getParameter(t.VIEWPORT),B=new nr().fromArray(ee),K=new nr().fromArray(W);function ie(ce,st,He,et){const De=new Uint8Array(4),ke=t.createTexture();t.bindTexture(ce,ke),t.texParameteri(ce,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ce,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Ie=0;Ie<He;Ie++)ce===t.TEXTURE_3D||ce===t.TEXTURE_2D_ARRAY?t.texImage3D(st,0,t.RGBA,1,1,et,0,t.RGBA,t.UNSIGNED_BYTE,De):t.texImage2D(st+Ie,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,De);return ke}const oe={};oe[t.TEXTURE_2D]=ie(t.TEXTURE_2D,t.TEXTURE_2D,1),oe[t.TEXTURE_CUBE_MAP]=ie(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),oe[t.TEXTURE_2D_ARRAY]=ie(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),oe[t.TEXTURE_3D]=ie(t.TEXTURE_3D,t.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),Z(t.DEPTH_TEST),o.setFunc(rh),Be(!1),ut(vD),Z(t.CULL_FACE),te(wc);function Z(ce){u[ce]!==!0&&(t.enable(ce),u[ce]=!0)}function pe(ce){u[ce]!==!1&&(t.disable(ce),u[ce]=!1)}function ye(ce,st){return d[ce]!==st?(t.bindFramebuffer(ce,st),d[ce]=st,ce===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=st),ce===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=st),!0):!1}function ge(ce,st){let He=p,et=!1;if(ce){He=h.get(st),He===void 0&&(He=[],h.set(st,He));const De=ce.textures;if(He.length!==De.length||He[0]!==t.COLOR_ATTACHMENT0){for(let ke=0,Ie=De.length;ke<Ie;ke++)He[ke]=t.COLOR_ATTACHMENT0+ke;He.length=De.length,et=!0}}else He[0]!==t.BACK&&(He[0]=t.BACK,et=!0);et&&t.drawBuffers(He)}function je(ce){return x!==ce?(t.useProgram(ce),x=ce,!0):!1}const We={[wu]:t.FUNC_ADD,[Gae]:t.FUNC_SUBTRACT,[Xae]:t.FUNC_REVERSE_SUBTRACT};We[qae]=t.MIN,We[Kae]=t.MAX;const it={[Yae]:t.ZERO,[Jae]:t.ONE,[Qae]:t.SRC_COLOR,[zE]:t.SRC_ALPHA,[ile]:t.SRC_ALPHA_SATURATE,[nle]:t.DST_COLOR,[ele]:t.DST_ALPHA,[Zae]:t.ONE_MINUS_SRC_COLOR,[jE]:t.ONE_MINUS_SRC_ALPHA,[rle]:t.ONE_MINUS_DST_COLOR,[tle]:t.ONE_MINUS_DST_ALPHA,[sle]:t.CONSTANT_COLOR,[ole]:t.ONE_MINUS_CONSTANT_COLOR,[ale]:t.CONSTANT_ALPHA,[lle]:t.ONE_MINUS_CONSTANT_ALPHA};function te(ce,st,He,et,De,ke,Ie,tt,ft,Tt){if(ce===wc){w===!0&&(pe(t.BLEND),w=!1);return}if(w===!1&&(Z(t.BLEND),w=!0),ce!==Wae){if(ce!==y||Tt!==P){if((v!==wu||C!==wu)&&(t.blendEquation(t.FUNC_ADD),v=wu,C=wu),Tt)switch(ce){case Pf:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case yD:t.blendFunc(t.ONE,t.ONE);break;case xD:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case wD:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}else switch(ce){case Pf:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case yD:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case xD:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case wD:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ce);break}S=null,E=null,T=null,A=null,k.set(0,0,0),R=0,y=ce,P=Tt}return}De=De||st,ke=ke||He,Ie=Ie||et,(st!==v||De!==C)&&(t.blendEquationSeparate(We[st],We[De]),v=st,C=De),(He!==S||et!==E||ke!==T||Ie!==A)&&(t.blendFuncSeparate(it[He],it[et],it[ke],it[Ie]),S=He,E=et,T=ke,A=Ie),(tt.equals(k)===!1||ft!==R)&&(t.blendColor(tt.r,tt.g,tt.b,ft),k.copy(tt),R=ft),y=ce,P=!1}function pt(ce,st){ce.side===sa?pe(t.CULL_FACE):Z(t.CULL_FACE);let He=ce.side===Yi;st&&(He=!He),Be(He),ce.blending===Pf&&ce.transparent===!1?te(wc):te(ce.blending,ce.blendEquation,ce.blendSrc,ce.blendDst,ce.blendEquationAlpha,ce.blendSrcAlpha,ce.blendDstAlpha,ce.blendColor,ce.blendAlpha,ce.premultipliedAlpha),o.setFunc(ce.depthFunc),o.setTest(ce.depthTest),o.setMask(ce.depthWrite),s.setMask(ce.colorWrite);const et=ce.stencilWrite;a.setTest(et),et&&(a.setMask(ce.stencilWriteMask),a.setFunc(ce.stencilFunc,ce.stencilRef,ce.stencilFuncMask),a.setOp(ce.stencilFail,ce.stencilZFail,ce.stencilZPass)),wt(ce.polygonOffset,ce.polygonOffsetFactor,ce.polygonOffsetUnits),ce.alphaToCoverage===!0?Z(t.SAMPLE_ALPHA_TO_COVERAGE):pe(t.SAMPLE_ALPHA_TO_COVERAGE)}function Be(ce){M!==ce&&(ce?t.frontFace(t.CW):t.frontFace(t.CCW),M=ce)}function ut(ce){ce!==Hae?(Z(t.CULL_FACE),ce!==I&&(ce===vD?t.cullFace(t.BACK):ce===Vae?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):pe(t.CULL_FACE),I=ce}function Xe(ce){ce!==z&&(q&&t.lineWidth(ce),z=ce)}function wt(ce,st,He){ce?(Z(t.POLYGON_OFFSET_FILL),(H!==st||j!==He)&&(t.polygonOffset(st,He),H=st,j=He)):pe(t.POLYGON_OFFSET_FILL)}function Ae(ce){ce?Z(t.SCISSOR_TEST):pe(t.SCISSOR_TEST)}function Pe(ce){ce===void 0&&(ce=t.TEXTURE0+J-1),F!==ce&&(t.activeTexture(ce),F=ce)}function ot(ce,st,He){He===void 0&&(F===null?He=t.TEXTURE0+J-1:He=F);let et=D[He];et===void 0&&(et={type:void 0,texture:void 0},D[He]=et),(et.type!==ce||et.texture!==st)&&(F!==He&&(t.activeTexture(He),F=He),t.bindTexture(ce,st||oe[ce]),et.type=ce,et.texture=st)}function Y(){const ce=D[F];ce!==void 0&&ce.type!==void 0&&(t.bindTexture(ce.type,null),ce.type=void 0,ce.texture=void 0)}function L(){try{t.compressedTexImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ne(){try{t.compressedTexImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function X(){try{t.texSubImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function se(){try{t.texSubImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ae(){try{t.compressedTexSubImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Ce(){try{t.compressedTexSubImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Re(){try{t.texStorage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function ue(){try{t.texStorage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function Te(){try{t.texImage2D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function de(){try{t.texImage3D(...arguments)}catch(ce){console.error("THREE.WebGLState:",ce)}}function _e(ce){B.equals(ce)===!1&&(t.scissor(ce.x,ce.y,ce.z,ce.w),B.copy(ce))}function Qe(ce){K.equals(ce)===!1&&(t.viewport(ce.x,ce.y,ce.z,ce.w),K.copy(ce))}function Ye(ce,st){let He=c.get(st);He===void 0&&(He=new WeakMap,c.set(st,He));let et=He.get(ce);et===void 0&&(et=t.getUniformBlockIndex(st,ce.name),He.set(ce,et))}function qe(ce,st){const et=c.get(st).get(ce);l.get(st)!==et&&(t.uniformBlockBinding(st,et,ce.__bindingPointIndex),l.set(st,et))}function mt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),o.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},F=null,D={},d={},h=new WeakMap,p=[],x=null,w=!1,y=null,v=null,S=null,E=null,C=null,T=null,A=null,k=new wn(0,0,0),R=0,P=!1,M=null,I=null,z=null,H=null,j=null,B.set(0,0,t.canvas.width,t.canvas.height),K.set(0,0,t.canvas.width,t.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:Z,disable:pe,bindFramebuffer:ye,drawBuffers:ge,useProgram:je,setBlending:te,setMaterial:pt,setFlipSided:Be,setCullFace:ut,setLineWidth:Xe,setPolygonOffset:wt,setScissorTest:Ae,activeTexture:Pe,bindTexture:ot,unbindTexture:Y,compressedTexImage2D:L,compressedTexImage3D:ne,texImage2D:Te,texImage3D:de,updateUBOMapping:Ye,uniformBlockBinding:qe,texStorage2D:Re,texStorage3D:ue,texSubImage2D:X,texSubImage3D:se,compressedTexSubImage2D:ae,compressedTexSubImage3D:Ce,scissor:_e,viewport:Qe,reset:mt}}function Vhe(t,e,n,r,i,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new En,u=new WeakMap;let d;const h=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(Y,L){return p?new OffscreenCanvas(Y,L):qx("canvas")}function w(Y,L,ne){let X=1;const se=ot(Y);if((se.width>ne||se.height>ne)&&(X=ne/Math.max(se.width,se.height)),X<1)if(typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Y instanceof ImageBitmap||typeof VideoFrame<"u"&&Y instanceof VideoFrame){const ae=Math.floor(X*se.width),Ce=Math.floor(X*se.height);d===void 0&&(d=x(ae,Ce));const Re=L?x(ae,Ce):d;return Re.width=ae,Re.height=Ce,Re.getContext("2d").drawImage(Y,0,0,ae,Ce),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+se.width+"x"+se.height+") to ("+ae+"x"+Ce+")."),Re}else return"data"in Y&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+se.width+"x"+se.height+")."),Y;return Y}function y(Y){return Y.generateMipmaps}function v(Y){t.generateMipmap(Y)}function S(Y){return Y.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:Y.isWebGL3DRenderTarget?t.TEXTURE_3D:Y.isWebGLArrayRenderTarget||Y.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function E(Y,L,ne,X,se=!1){if(Y!==null){if(t[Y]!==void 0)return t[Y];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Y+"'")}let ae=L;if(L===t.RED&&(ne===t.FLOAT&&(ae=t.R32F),ne===t.HALF_FLOAT&&(ae=t.R16F),ne===t.UNSIGNED_BYTE&&(ae=t.R8)),L===t.RED_INTEGER&&(ne===t.UNSIGNED_BYTE&&(ae=t.R8UI),ne===t.UNSIGNED_SHORT&&(ae=t.R16UI),ne===t.UNSIGNED_INT&&(ae=t.R32UI),ne===t.BYTE&&(ae=t.R8I),ne===t.SHORT&&(ae=t.R16I),ne===t.INT&&(ae=t.R32I)),L===t.RG&&(ne===t.FLOAT&&(ae=t.RG32F),ne===t.HALF_FLOAT&&(ae=t.RG16F),ne===t.UNSIGNED_BYTE&&(ae=t.RG8)),L===t.RG_INTEGER&&(ne===t.UNSIGNED_BYTE&&(ae=t.RG8UI),ne===t.UNSIGNED_SHORT&&(ae=t.RG16UI),ne===t.UNSIGNED_INT&&(ae=t.RG32UI),ne===t.BYTE&&(ae=t.RG8I),ne===t.SHORT&&(ae=t.RG16I),ne===t.INT&&(ae=t.RG32I)),L===t.RGB_INTEGER&&(ne===t.UNSIGNED_BYTE&&(ae=t.RGB8UI),ne===t.UNSIGNED_SHORT&&(ae=t.RGB16UI),ne===t.UNSIGNED_INT&&(ae=t.RGB32UI),ne===t.BYTE&&(ae=t.RGB8I),ne===t.SHORT&&(ae=t.RGB16I),ne===t.INT&&(ae=t.RGB32I)),L===t.RGBA_INTEGER&&(ne===t.UNSIGNED_BYTE&&(ae=t.RGBA8UI),ne===t.UNSIGNED_SHORT&&(ae=t.RGBA16UI),ne===t.UNSIGNED_INT&&(ae=t.RGBA32UI),ne===t.BYTE&&(ae=t.RGBA8I),ne===t.SHORT&&(ae=t.RGBA16I),ne===t.INT&&(ae=t.RGBA32I)),L===t.RGB&&ne===t.UNSIGNED_INT_5_9_9_9_REV&&(ae=t.RGB9_E5),L===t.RGBA){const Ce=se?Gx:gn.getTransfer(X);ne===t.FLOAT&&(ae=t.RGBA32F),ne===t.HALF_FLOAT&&(ae=t.RGBA16F),ne===t.UNSIGNED_BYTE&&(ae=Ce===Mn?t.SRGB8_ALPHA8:t.RGBA8),ne===t.UNSIGNED_SHORT_4_4_4_4&&(ae=t.RGBA4),ne===t.UNSIGNED_SHORT_5_5_5_1&&(ae=t.RGB5_A1)}return(ae===t.R16F||ae===t.R32F||ae===t.RG16F||ae===t.RG32F||ae===t.RGBA16F||ae===t.RGBA32F)&&e.get("EXT_color_buffer_float"),ae}function C(Y,L){let ne;return Y?L===null||L===td||L===Rm?ne=t.DEPTH24_STENCIL8:L===Qa?ne=t.DEPTH32F_STENCIL8:L===Am&&(ne=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):L===null||L===td||L===Rm?ne=t.DEPTH_COMPONENT24:L===Qa?ne=t.DEPTH_COMPONENT32F:L===Am&&(ne=t.DEPTH_COMPONENT16),ne}function T(Y,L){return y(Y)===!0||Y.isFramebufferTexture&&Y.minFilter!==Ro&&Y.minFilter!==aa?Math.log2(Math.max(L.width,L.height))+1:Y.mipmaps!==void 0&&Y.mipmaps.length>0?Y.mipmaps.length:Y.isCompressedTexture&&Array.isArray(Y.image)?L.mipmaps.length:1}function A(Y){const L=Y.target;L.removeEventListener("dispose",A),R(L),L.isVideoTexture&&u.delete(L)}function k(Y){const L=Y.target;L.removeEventListener("dispose",k),M(L)}function R(Y){const L=r.get(Y);if(L.__webglInit===void 0)return;const ne=Y.source,X=h.get(ne);if(X){const se=X[L.__cacheKey];se.usedTimes--,se.usedTimes===0&&P(Y),Object.keys(X).length===0&&h.delete(ne)}r.remove(Y)}function P(Y){const L=r.get(Y);t.deleteTexture(L.__webglTexture);const ne=Y.source,X=h.get(ne);delete X[L.__cacheKey],o.memory.textures--}function M(Y){const L=r.get(Y);if(Y.depthTexture&&(Y.depthTexture.dispose(),r.remove(Y.depthTexture)),Y.isWebGLCubeRenderTarget)for(let X=0;X<6;X++){if(Array.isArray(L.__webglFramebuffer[X]))for(let se=0;se<L.__webglFramebuffer[X].length;se++)t.deleteFramebuffer(L.__webglFramebuffer[X][se]);else t.deleteFramebuffer(L.__webglFramebuffer[X]);L.__webglDepthbuffer&&t.deleteRenderbuffer(L.__webglDepthbuffer[X])}else{if(Array.isArray(L.__webglFramebuffer))for(let X=0;X<L.__webglFramebuffer.length;X++)t.deleteFramebuffer(L.__webglFramebuffer[X]);else t.deleteFramebuffer(L.__webglFramebuffer);if(L.__webglDepthbuffer&&t.deleteRenderbuffer(L.__webglDepthbuffer),L.__webglMultisampledFramebuffer&&t.deleteFramebuffer(L.__webglMultisampledFramebuffer),L.__webglColorRenderbuffer)for(let X=0;X<L.__webglColorRenderbuffer.length;X++)L.__webglColorRenderbuffer[X]&&t.deleteRenderbuffer(L.__webglColorRenderbuffer[X]);L.__webglDepthRenderbuffer&&t.deleteRenderbuffer(L.__webglDepthRenderbuffer)}const ne=Y.textures;for(let X=0,se=ne.length;X<se;X++){const ae=r.get(ne[X]);ae.__webglTexture&&(t.deleteTexture(ae.__webglTexture),o.memory.textures--),r.remove(ne[X])}r.remove(Y)}let I=0;function z(){I=0}function H(){const Y=I;return Y>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Y+" texture units while this GPU supports only "+i.maxTextures),I+=1,Y}function j(Y){const L=[];return L.push(Y.wrapS),L.push(Y.wrapT),L.push(Y.wrapR||0),L.push(Y.magFilter),L.push(Y.minFilter),L.push(Y.anisotropy),L.push(Y.internalFormat),L.push(Y.format),L.push(Y.type),L.push(Y.generateMipmaps),L.push(Y.premultiplyAlpha),L.push(Y.flipY),L.push(Y.unpackAlignment),L.push(Y.colorSpace),L.join()}function J(Y,L){const ne=r.get(Y);if(Y.isVideoTexture&&Ae(Y),Y.isRenderTargetTexture===!1&&Y.version>0&&ne.__version!==Y.version){const X=Y.image;if(X===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(X.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{oe(ne,Y,L);return}}n.bindTexture(t.TEXTURE_2D,ne.__webglTexture,t.TEXTURE0+L)}function q(Y,L){const ne=r.get(Y);if(Y.version>0&&ne.__version!==Y.version){oe(ne,Y,L);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ne.__webglTexture,t.TEXTURE0+L)}function Q(Y,L){const ne=r.get(Y);if(Y.version>0&&ne.__version!==Y.version){oe(ne,Y,L);return}n.bindTexture(t.TEXTURE_3D,ne.__webglTexture,t.TEXTURE0+L)}function O(Y,L){const ne=r.get(Y);if(Y.version>0&&ne.__version!==Y.version){Z(ne,Y,L);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ne.__webglTexture,t.TEXTURE0+L)}const F={[JE]:t.REPEAT,[Ru]:t.CLAMP_TO_EDGE,[QE]:t.MIRRORED_REPEAT},D={[Ro]:t.NEAREST,[yle]:t.NEAREST_MIPMAP_NEAREST,[Xv]:t.NEAREST_MIPMAP_LINEAR,[aa]:t.LINEAR,[JS]:t.LINEAR_MIPMAP_NEAREST,[ku]:t.LINEAR_MIPMAP_LINEAR},ee={[_le]:t.NEVER,[Rle]:t.ALWAYS,[Ele]:t.LESS,[dj]:t.LEQUAL,[Cle]:t.EQUAL,[Ale]:t.GEQUAL,[Mle]:t.GREATER,[Tle]:t.NOTEQUAL};function W(Y,L){if(L.type===Qa&&e.has("OES_texture_float_linear")===!1&&(L.magFilter===aa||L.magFilter===JS||L.magFilter===Xv||L.magFilter===ku||L.minFilter===aa||L.minFilter===JS||L.minFilter===Xv||L.minFilter===ku)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(Y,t.TEXTURE_WRAP_S,F[L.wrapS]),t.texParameteri(Y,t.TEXTURE_WRAP_T,F[L.wrapT]),(Y===t.TEXTURE_3D||Y===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Y,t.TEXTURE_WRAP_R,F[L.wrapR]),t.texParameteri(Y,t.TEXTURE_MAG_FILTER,D[L.magFilter]),t.texParameteri(Y,t.TEXTURE_MIN_FILTER,D[L.minFilter]),L.compareFunction&&(t.texParameteri(Y,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Y,t.TEXTURE_COMPARE_FUNC,ee[L.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(L.magFilter===Ro||L.minFilter!==Xv&&L.minFilter!==ku||L.type===Qa&&e.has("OES_texture_float_linear")===!1)return;if(L.anisotropy>1||r.get(L).__currentAnisotropy){const ne=e.get("EXT_texture_filter_anisotropic");t.texParameterf(Y,ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(L.anisotropy,i.getMaxAnisotropy())),r.get(L).__currentAnisotropy=L.anisotropy}}}function B(Y,L){let ne=!1;Y.__webglInit===void 0&&(Y.__webglInit=!0,L.addEventListener("dispose",A));const X=L.source;let se=h.get(X);se===void 0&&(se={},h.set(X,se));const ae=j(L);if(ae!==Y.__cacheKey){se[ae]===void 0&&(se[ae]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),se[ae].usedTimes++;const Ce=se[Y.__cacheKey];Ce!==void 0&&(se[Y.__cacheKey].usedTimes--,Ce.usedTimes===0&&P(L)),Y.__cacheKey=ae,Y.__webglTexture=se[ae].texture}return ne}function K(Y,L,ne){return Math.floor(Math.floor(Y/ne)/L)}function ie(Y,L,ne,X){const ae=Y.updateRanges;if(ae.length===0)n.texSubImage2D(t.TEXTURE_2D,0,0,0,L.width,L.height,ne,X,L.data);else{ae.sort((de,_e)=>de.start-_e.start);let Ce=0;for(let de=1;de<ae.length;de++){const _e=ae[Ce],Qe=ae[de],Ye=_e.start+_e.count,qe=K(Qe.start,L.width,4),mt=K(_e.start,L.width,4);Qe.start<=Ye+1&&qe===mt&&K(Qe.start+Qe.count-1,L.width,4)===qe?_e.count=Math.max(_e.count,Qe.start+Qe.count-_e.start):(++Ce,ae[Ce]=Qe)}ae.length=Ce+1;const Re=t.getParameter(t.UNPACK_ROW_LENGTH),ue=t.getParameter(t.UNPACK_SKIP_PIXELS),Te=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,L.width);for(let de=0,_e=ae.length;de<_e;de++){const Qe=ae[de],Ye=Math.floor(Qe.start/4),qe=Math.ceil(Qe.count/4),mt=Ye%L.width,ce=Math.floor(Ye/L.width),st=qe,He=1;t.pixelStorei(t.UNPACK_SKIP_PIXELS,mt),t.pixelStorei(t.UNPACK_SKIP_ROWS,ce),n.texSubImage2D(t.TEXTURE_2D,0,mt,ce,st,He,ne,X,L.data)}Y.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,Re),t.pixelStorei(t.UNPACK_SKIP_PIXELS,ue),t.pixelStorei(t.UNPACK_SKIP_ROWS,Te)}}function oe(Y,L,ne){let X=t.TEXTURE_2D;(L.isDataArrayTexture||L.isCompressedArrayTexture)&&(X=t.TEXTURE_2D_ARRAY),L.isData3DTexture&&(X=t.TEXTURE_3D);const se=B(Y,L),ae=L.source;n.bindTexture(X,Y.__webglTexture,t.TEXTURE0+ne);const Ce=r.get(ae);if(ae.version!==Ce.__version||se===!0){n.activeTexture(t.TEXTURE0+ne);const Re=gn.getPrimaries(gn.workingColorSpace),ue=L.colorSpace===Jl?null:gn.getPrimaries(L.colorSpace),Te=L.colorSpace===Jl||Re===ue?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,L.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,L.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Te);let de=w(L.image,!1,i.maxTextureSize);de=Pe(L,de);const _e=s.convert(L.format,L.colorSpace),Qe=s.convert(L.type);let Ye=E(L.internalFormat,_e,Qe,L.colorSpace,L.isVideoTexture);W(X,L);let qe;const mt=L.mipmaps,ce=L.isVideoTexture!==!0,st=Ce.__version===void 0||se===!0,He=ae.dataReady,et=T(L,de);if(L.isDepthTexture)Ye=C(L.format===Nm,L.type),st&&(ce?n.texStorage2D(t.TEXTURE_2D,1,Ye,de.width,de.height):n.texImage2D(t.TEXTURE_2D,0,Ye,de.width,de.height,0,_e,Qe,null));else if(L.isDataTexture)if(mt.length>0){ce&&st&&n.texStorage2D(t.TEXTURE_2D,et,Ye,mt[0].width,mt[0].height);for(let De=0,ke=mt.length;De<ke;De++)qe=mt[De],ce?He&&n.texSubImage2D(t.TEXTURE_2D,De,0,0,qe.width,qe.height,_e,Qe,qe.data):n.texImage2D(t.TEXTURE_2D,De,Ye,qe.width,qe.height,0,_e,Qe,qe.data);L.generateMipmaps=!1}else ce?(st&&n.texStorage2D(t.TEXTURE_2D,et,Ye,de.width,de.height),He&&ie(L,de,_e,Qe)):n.texImage2D(t.TEXTURE_2D,0,Ye,de.width,de.height,0,_e,Qe,de.data);else if(L.isCompressedTexture)if(L.isCompressedArrayTexture){ce&&st&&n.texStorage3D(t.TEXTURE_2D_ARRAY,et,Ye,mt[0].width,mt[0].height,de.depth);for(let De=0,ke=mt.length;De<ke;De++)if(qe=mt[De],L.format!==Mo)if(_e!==null)if(ce){if(He)if(L.layerUpdates.size>0){const Ie=VD(qe.width,qe.height,L.format,L.type);for(const tt of L.layerUpdates){const ft=qe.data.subarray(tt*Ie/qe.data.BYTES_PER_ELEMENT,(tt+1)*Ie/qe.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,De,0,0,tt,qe.width,qe.height,1,_e,ft)}L.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,De,0,0,0,qe.width,qe.height,de.depth,_e,qe.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,De,Ye,qe.width,qe.height,de.depth,0,qe.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ce?He&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,De,0,0,0,qe.width,qe.height,de.depth,_e,Qe,qe.data):n.texImage3D(t.TEXTURE_2D_ARRAY,De,Ye,qe.width,qe.height,de.depth,0,_e,Qe,qe.data)}else{ce&&st&&n.texStorage2D(t.TEXTURE_2D,et,Ye,mt[0].width,mt[0].height);for(let De=0,ke=mt.length;De<ke;De++)qe=mt[De],L.format!==Mo?_e!==null?ce?He&&n.compressedTexSubImage2D(t.TEXTURE_2D,De,0,0,qe.width,qe.height,_e,qe.data):n.compressedTexImage2D(t.TEXTURE_2D,De,Ye,qe.width,qe.height,0,qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ce?He&&n.texSubImage2D(t.TEXTURE_2D,De,0,0,qe.width,qe.height,_e,Qe,qe.data):n.texImage2D(t.TEXTURE_2D,De,Ye,qe.width,qe.height,0,_e,Qe,qe.data)}else if(L.isDataArrayTexture)if(ce){if(st&&n.texStorage3D(t.TEXTURE_2D_ARRAY,et,Ye,de.width,de.height,de.depth),He)if(L.layerUpdates.size>0){const De=VD(de.width,de.height,L.format,L.type);for(const ke of L.layerUpdates){const Ie=de.data.subarray(ke*De/de.data.BYTES_PER_ELEMENT,(ke+1)*De/de.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,ke,de.width,de.height,1,_e,Qe,Ie)}L.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,de.width,de.height,de.depth,_e,Qe,de.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,Ye,de.width,de.height,de.depth,0,_e,Qe,de.data);else if(L.isData3DTexture)ce?(st&&n.texStorage3D(t.TEXTURE_3D,et,Ye,de.width,de.height,de.depth),He&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,de.width,de.height,de.depth,_e,Qe,de.data)):n.texImage3D(t.TEXTURE_3D,0,Ye,de.width,de.height,de.depth,0,_e,Qe,de.data);else if(L.isFramebufferTexture){if(st)if(ce)n.texStorage2D(t.TEXTURE_2D,et,Ye,de.width,de.height);else{let De=de.width,ke=de.height;for(let Ie=0;Ie<et;Ie++)n.texImage2D(t.TEXTURE_2D,Ie,Ye,De,ke,0,_e,Qe,null),De>>=1,ke>>=1}}else if(mt.length>0){if(ce&&st){const De=ot(mt[0]);n.texStorage2D(t.TEXTURE_2D,et,Ye,De.width,De.height)}for(let De=0,ke=mt.length;De<ke;De++)qe=mt[De],ce?He&&n.texSubImage2D(t.TEXTURE_2D,De,0,0,_e,Qe,qe):n.texImage2D(t.TEXTURE_2D,De,Ye,_e,Qe,qe);L.generateMipmaps=!1}else if(ce){if(st){const De=ot(de);n.texStorage2D(t.TEXTURE_2D,et,Ye,De.width,De.height)}He&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,_e,Qe,de)}else n.texImage2D(t.TEXTURE_2D,0,Ye,_e,Qe,de);y(L)&&v(X),Ce.__version=ae.version,L.onUpdate&&L.onUpdate(L)}Y.__version=L.version}function Z(Y,L,ne){if(L.image.length!==6)return;const X=B(Y,L),se=L.source;n.bindTexture(t.TEXTURE_CUBE_MAP,Y.__webglTexture,t.TEXTURE0+ne);const ae=r.get(se);if(se.version!==ae.__version||X===!0){n.activeTexture(t.TEXTURE0+ne);const Ce=gn.getPrimaries(gn.workingColorSpace),Re=L.colorSpace===Jl?null:gn.getPrimaries(L.colorSpace),ue=L.colorSpace===Jl||Ce===Re?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,L.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,L.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,L.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ue);const Te=L.isCompressedTexture||L.image[0].isCompressedTexture,de=L.image[0]&&L.image[0].isDataTexture,_e=[];for(let ke=0;ke<6;ke++)!Te&&!de?_e[ke]=w(L.image[ke],!0,i.maxCubemapSize):_e[ke]=de?L.image[ke].image:L.image[ke],_e[ke]=Pe(L,_e[ke]);const Qe=_e[0],Ye=s.convert(L.format,L.colorSpace),qe=s.convert(L.type),mt=E(L.internalFormat,Ye,qe,L.colorSpace),ce=L.isVideoTexture!==!0,st=ae.__version===void 0||X===!0,He=se.dataReady;let et=T(L,Qe);W(t.TEXTURE_CUBE_MAP,L);let De;if(Te){ce&&st&&n.texStorage2D(t.TEXTURE_CUBE_MAP,et,mt,Qe.width,Qe.height);for(let ke=0;ke<6;ke++){De=_e[ke].mipmaps;for(let Ie=0;Ie<De.length;Ie++){const tt=De[Ie];L.format!==Mo?Ye!==null?ce?He&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ie,0,0,tt.width,tt.height,Ye,tt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ie,mt,tt.width,tt.height,0,tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ce?He&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ie,0,0,tt.width,tt.height,Ye,qe,tt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ie,mt,tt.width,tt.height,0,Ye,qe,tt.data)}}}else{if(De=L.mipmaps,ce&&st){De.length>0&&et++;const ke=ot(_e[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,et,mt,ke.width,ke.height)}for(let ke=0;ke<6;ke++)if(de){ce?He&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,0,0,_e[ke].width,_e[ke].height,Ye,qe,_e[ke].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,mt,_e[ke].width,_e[ke].height,0,Ye,qe,_e[ke].data);for(let Ie=0;Ie<De.length;Ie++){const ft=De[Ie].image[ke].image;ce?He&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ie+1,0,0,ft.width,ft.height,Ye,qe,ft.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ie+1,mt,ft.width,ft.height,0,Ye,qe,ft.data)}}else{ce?He&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,0,0,Ye,qe,_e[ke]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0,mt,Ye,qe,_e[ke]);for(let Ie=0;Ie<De.length;Ie++){const tt=De[Ie];ce?He&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ie+1,0,0,Ye,qe,tt.image[ke]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ke,Ie+1,mt,Ye,qe,tt.image[ke])}}}y(L)&&v(t.TEXTURE_CUBE_MAP),ae.__version=se.version,L.onUpdate&&L.onUpdate(L)}Y.__version=L.version}function pe(Y,L,ne,X,se,ae){const Ce=s.convert(ne.format,ne.colorSpace),Re=s.convert(ne.type),ue=E(ne.internalFormat,Ce,Re,ne.colorSpace),Te=r.get(L),de=r.get(ne);if(de.__renderTarget=L,!Te.__hasExternalTextures){const _e=Math.max(1,L.width>>ae),Qe=Math.max(1,L.height>>ae);se===t.TEXTURE_3D||se===t.TEXTURE_2D_ARRAY?n.texImage3D(se,ae,ue,_e,Qe,L.depth,0,Ce,Re,null):n.texImage2D(se,ae,ue,_e,Qe,0,Ce,Re,null)}n.bindFramebuffer(t.FRAMEBUFFER,Y),wt(L)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,X,se,de.__webglTexture,0,Xe(L)):(se===t.TEXTURE_2D||se>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&se<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,X,se,de.__webglTexture,ae),n.bindFramebuffer(t.FRAMEBUFFER,null)}function ye(Y,L,ne){if(t.bindRenderbuffer(t.RENDERBUFFER,Y),L.depthBuffer){const X=L.depthTexture,se=X&&X.isDepthTexture?X.type:null,ae=C(L.stencilBuffer,se),Ce=L.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Re=Xe(L);wt(L)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Re,ae,L.width,L.height):ne?t.renderbufferStorageMultisample(t.RENDERBUFFER,Re,ae,L.width,L.height):t.renderbufferStorage(t.RENDERBUFFER,ae,L.width,L.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ce,t.RENDERBUFFER,Y)}else{const X=L.textures;for(let se=0;se<X.length;se++){const ae=X[se],Ce=s.convert(ae.format,ae.colorSpace),Re=s.convert(ae.type),ue=E(ae.internalFormat,Ce,Re,ae.colorSpace),Te=Xe(L);ne&&wt(L)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Te,ue,L.width,L.height):wt(L)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Te,ue,L.width,L.height):t.renderbufferStorage(t.RENDERBUFFER,ue,L.width,L.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function ge(Y,L){if(L&&L.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,Y),!(L.depthTexture&&L.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const X=r.get(L.depthTexture);X.__renderTarget=L,(!X.__webglTexture||L.depthTexture.image.width!==L.width||L.depthTexture.image.height!==L.height)&&(L.depthTexture.image.width=L.width,L.depthTexture.image.height=L.height,L.depthTexture.needsUpdate=!0),J(L.depthTexture,0);const se=X.__webglTexture,ae=Xe(L);if(L.depthTexture.format===km)wt(L)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,se,0,ae):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,se,0);else if(L.depthTexture.format===Nm)wt(L)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,se,0,ae):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,se,0);else throw new Error("Unknown depthTexture format")}function je(Y){const L=r.get(Y),ne=Y.isWebGLCubeRenderTarget===!0;if(L.__boundDepthTexture!==Y.depthTexture){const X=Y.depthTexture;if(L.__depthDisposeCallback&&L.__depthDisposeCallback(),X){const se=()=>{delete L.__boundDepthTexture,delete L.__depthDisposeCallback,X.removeEventListener("dispose",se)};X.addEventListener("dispose",se),L.__depthDisposeCallback=se}L.__boundDepthTexture=X}if(Y.depthTexture&&!L.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");const X=Y.texture.mipmaps;X&&X.length>0?ge(L.__webglFramebuffer[0],Y):ge(L.__webglFramebuffer,Y)}else if(ne){L.__webglDepthbuffer=[];for(let X=0;X<6;X++)if(n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer[X]),L.__webglDepthbuffer[X]===void 0)L.__webglDepthbuffer[X]=t.createRenderbuffer(),ye(L.__webglDepthbuffer[X],Y,!1);else{const se=Y.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ae=L.__webglDepthbuffer[X];t.bindRenderbuffer(t.RENDERBUFFER,ae),t.framebufferRenderbuffer(t.FRAMEBUFFER,se,t.RENDERBUFFER,ae)}}else{const X=Y.texture.mipmaps;if(X&&X.length>0?n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer[0]):n.bindFramebuffer(t.FRAMEBUFFER,L.__webglFramebuffer),L.__webglDepthbuffer===void 0)L.__webglDepthbuffer=t.createRenderbuffer(),ye(L.__webglDepthbuffer,Y,!1);else{const se=Y.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,ae=L.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,ae),t.framebufferRenderbuffer(t.FRAMEBUFFER,se,t.RENDERBUFFER,ae)}}n.bindFramebuffer(t.FRAMEBUFFER,null)}function We(Y,L,ne){const X=r.get(Y);L!==void 0&&pe(X.__webglFramebuffer,Y,Y.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ne!==void 0&&je(Y)}function it(Y){const L=Y.texture,ne=r.get(Y),X=r.get(L);Y.addEventListener("dispose",k);const se=Y.textures,ae=Y.isWebGLCubeRenderTarget===!0,Ce=se.length>1;if(Ce||(X.__webglTexture===void 0&&(X.__webglTexture=t.createTexture()),X.__version=L.version,o.memory.textures++),ae){ne.__webglFramebuffer=[];for(let Re=0;Re<6;Re++)if(L.mipmaps&&L.mipmaps.length>0){ne.__webglFramebuffer[Re]=[];for(let ue=0;ue<L.mipmaps.length;ue++)ne.__webglFramebuffer[Re][ue]=t.createFramebuffer()}else ne.__webglFramebuffer[Re]=t.createFramebuffer()}else{if(L.mipmaps&&L.mipmaps.length>0){ne.__webglFramebuffer=[];for(let Re=0;Re<L.mipmaps.length;Re++)ne.__webglFramebuffer[Re]=t.createFramebuffer()}else ne.__webglFramebuffer=t.createFramebuffer();if(Ce)for(let Re=0,ue=se.length;Re<ue;Re++){const Te=r.get(se[Re]);Te.__webglTexture===void 0&&(Te.__webglTexture=t.createTexture(),o.memory.textures++)}if(Y.samples>0&&wt(Y)===!1){ne.__webglMultisampledFramebuffer=t.createFramebuffer(),ne.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let Re=0;Re<se.length;Re++){const ue=se[Re];ne.__webglColorRenderbuffer[Re]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ne.__webglColorRenderbuffer[Re]);const Te=s.convert(ue.format,ue.colorSpace),de=s.convert(ue.type),_e=E(ue.internalFormat,Te,de,ue.colorSpace,Y.isXRRenderTarget===!0),Qe=Xe(Y);t.renderbufferStorageMultisample(t.RENDERBUFFER,Qe,_e,Y.width,Y.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Re,t.RENDERBUFFER,ne.__webglColorRenderbuffer[Re])}t.bindRenderbuffer(t.RENDERBUFFER,null),Y.depthBuffer&&(ne.__webglDepthRenderbuffer=t.createRenderbuffer(),ye(ne.__webglDepthRenderbuffer,Y,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(ae){n.bindTexture(t.TEXTURE_CUBE_MAP,X.__webglTexture),W(t.TEXTURE_CUBE_MAP,L);for(let Re=0;Re<6;Re++)if(L.mipmaps&&L.mipmaps.length>0)for(let ue=0;ue<L.mipmaps.length;ue++)pe(ne.__webglFramebuffer[Re][ue],Y,L,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Re,ue);else pe(ne.__webglFramebuffer[Re],Y,L,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0);y(L)&&v(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Ce){for(let Re=0,ue=se.length;Re<ue;Re++){const Te=se[Re],de=r.get(Te);n.bindTexture(t.TEXTURE_2D,de.__webglTexture),W(t.TEXTURE_2D,Te),pe(ne.__webglFramebuffer,Y,Te,t.COLOR_ATTACHMENT0+Re,t.TEXTURE_2D,0),y(Te)&&v(t.TEXTURE_2D)}n.unbindTexture()}else{let Re=t.TEXTURE_2D;if((Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(Re=Y.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(Re,X.__webglTexture),W(Re,L),L.mipmaps&&L.mipmaps.length>0)for(let ue=0;ue<L.mipmaps.length;ue++)pe(ne.__webglFramebuffer[ue],Y,L,t.COLOR_ATTACHMENT0,Re,ue);else pe(ne.__webglFramebuffer,Y,L,t.COLOR_ATTACHMENT0,Re,0);y(L)&&v(Re),n.unbindTexture()}Y.depthBuffer&&je(Y)}function te(Y){const L=Y.textures;for(let ne=0,X=L.length;ne<X;ne++){const se=L[ne];if(y(se)){const ae=S(Y),Ce=r.get(se).__webglTexture;n.bindTexture(ae,Ce),v(ae),n.unbindTexture()}}}const pt=[],Be=[];function ut(Y){if(Y.samples>0){if(wt(Y)===!1){const L=Y.textures,ne=Y.width,X=Y.height;let se=t.COLOR_BUFFER_BIT;const ae=Y.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ce=r.get(Y),Re=L.length>1;if(Re)for(let Te=0;Te<L.length;Te++)n.bindFramebuffer(t.FRAMEBUFFER,Ce.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Te,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ce.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Te,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ce.__webglMultisampledFramebuffer);const ue=Y.texture.mipmaps;ue&&ue.length>0?n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ce.__webglFramebuffer[0]):n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ce.__webglFramebuffer);for(let Te=0;Te<L.length;Te++){if(Y.resolveDepthBuffer&&(Y.depthBuffer&&(se|=t.DEPTH_BUFFER_BIT),Y.stencilBuffer&&Y.resolveStencilBuffer&&(se|=t.STENCIL_BUFFER_BIT)),Re){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ce.__webglColorRenderbuffer[Te]);const de=r.get(L[Te]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,de,0)}t.blitFramebuffer(0,0,ne,X,0,0,ne,X,se,t.NEAREST),l===!0&&(pt.length=0,Be.length=0,pt.push(t.COLOR_ATTACHMENT0+Te),Y.depthBuffer&&Y.resolveDepthBuffer===!1&&(pt.push(ae),Be.push(ae),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,Be)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,pt))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Re)for(let Te=0;Te<L.length;Te++){n.bindFramebuffer(t.FRAMEBUFFER,Ce.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Te,t.RENDERBUFFER,Ce.__webglColorRenderbuffer[Te]);const de=r.get(L[Te]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ce.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Te,t.TEXTURE_2D,de,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ce.__webglMultisampledFramebuffer)}else if(Y.depthBuffer&&Y.resolveDepthBuffer===!1&&l){const L=Y.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[L])}}}function Xe(Y){return Math.min(i.maxSamples,Y.samples)}function wt(Y){const L=r.get(Y);return Y.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&L.__useRenderToTexture!==!1}function Ae(Y){const L=o.render.frame;u.get(Y)!==L&&(u.set(Y,L),Y.update())}function Pe(Y,L){const ne=Y.colorSpace,X=Y.format,se=Y.type;return Y.isCompressedTexture===!0||Y.isVideoTexture===!0||ne!==oh&&ne!==Jl&&(gn.getTransfer(ne)===Mn?(X!==Mo||se!==ga)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ne)),L}function ot(Y){return typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement?(c.width=Y.naturalWidth||Y.width,c.height=Y.naturalHeight||Y.height):typeof VideoFrame<"u"&&Y instanceof VideoFrame?(c.width=Y.displayWidth,c.height=Y.displayHeight):(c.width=Y.width,c.height=Y.height),c}this.allocateTextureUnit=H,this.resetTextureUnits=z,this.setTexture2D=J,this.setTexture2DArray=q,this.setTexture3D=Q,this.setTextureCube=O,this.rebindTextures=We,this.setupRenderTarget=it,this.updateRenderTargetMipmap=te,this.updateMultisampleRenderTarget=ut,this.setupDepthRenderbuffer=je,this.setupFrameBufferTexture=pe,this.useMultisampledRTT=wt}function $he(t,e){function n(r,i=Jl){let s;const o=gn.getTransfer(i);if(r===ga)return t.UNSIGNED_BYTE;if(r===lA)return t.UNSIGNED_SHORT_4_4_4_4;if(r===cA)return t.UNSIGNED_SHORT_5_5_5_1;if(r===sj)return t.UNSIGNED_INT_5_9_9_9_REV;if(r===rj)return t.BYTE;if(r===ij)return t.SHORT;if(r===Am)return t.UNSIGNED_SHORT;if(r===aA)return t.INT;if(r===td)return t.UNSIGNED_INT;if(r===Qa)return t.FLOAT;if(r===yg)return t.HALF_FLOAT;if(r===oj)return t.ALPHA;if(r===aj)return t.RGB;if(r===Mo)return t.RGBA;if(r===km)return t.DEPTH_COMPONENT;if(r===Nm)return t.DEPTH_STENCIL;if(r===lj)return t.RED;if(r===uA)return t.RED_INTEGER;if(r===cj)return t.RG;if(r===dA)return t.RG_INTEGER;if(r===fA)return t.RGBA_INTEGER;if(r===Yy||r===Jy||r===Qy||r===Zy)if(o===Mn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(r===Yy)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Jy)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Qy)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Zy)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(r===Yy)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Jy)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Qy)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Zy)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===ZE||r===eC||r===tC||r===nC)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(r===ZE)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===eC)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===tC)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===nC)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===rC||r===iC||r===sC)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(r===rC||r===iC)return o===Mn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(r===sC)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===oC||r===aC||r===lC||r===cC||r===uC||r===dC||r===fC||r===hC||r===pC||r===mC||r===gC||r===vC||r===yC||r===xC)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(r===oC)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===aC)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===lC)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===cC)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===uC)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===dC)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===fC)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===hC)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===pC)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===mC)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===gC)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===vC)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===yC)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===xC)return o===Mn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===ex||r===wC||r===bC)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(r===ex)return o===Mn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===wC)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===bC)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===uj||r===SC||r===_C||r===EC)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(r===ex)return s.COMPRESSED_RED_RGTC1_EXT;if(r===SC)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===_C)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===EC)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===Rm?t.UNSIGNED_INT_24_8:t[r]!==void 0?t[r]:null}return{convert:n}}const Whe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Ghe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Xhe{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new Ji,s=e.properties.get(i);s.__webglTexture=n.texture,(n.depthNear!==r.depthNear||n.depthFar!==r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,r=new Dc({vertexShader:Whe,fragmentShader:Ghe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Hr(new vw(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class qhe extends Ah{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,h=null,p=null,x=null;const w=new Xhe,y=n.getContextAttributes();let v=null,S=null;const E=[],C=[],T=new En;let A=null;const k=new $s;k.viewport=new nr;const R=new $s;R.viewport=new nr;const P=[k,R],M=new mce;let I=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(K){let ie=E[K];return ie===void 0&&(ie=new w1,E[K]=ie),ie.getTargetRaySpace()},this.getControllerGrip=function(K){let ie=E[K];return ie===void 0&&(ie=new w1,E[K]=ie),ie.getGripSpace()},this.getHand=function(K){let ie=E[K];return ie===void 0&&(ie=new w1,E[K]=ie),ie.getHandSpace()};function H(K){const ie=C.indexOf(K.inputSource);if(ie===-1)return;const oe=E[ie];oe!==void 0&&(oe.update(K.inputSource,K.frame,c||o),oe.dispatchEvent({type:K.type,data:K.inputSource}))}function j(){i.removeEventListener("select",H),i.removeEventListener("selectstart",H),i.removeEventListener("selectend",H),i.removeEventListener("squeeze",H),i.removeEventListener("squeezestart",H),i.removeEventListener("squeezeend",H),i.removeEventListener("end",j),i.removeEventListener("inputsourceschange",J);for(let K=0;K<E.length;K++){const ie=C[K];ie!==null&&(C[K]=null,E[K].disconnect(ie))}I=null,z=null,w.reset(),e.setRenderTarget(v),p=null,h=null,d=null,i=null,S=null,B.stop(),r.isPresenting=!1,e.setPixelRatio(A),e.setSize(T.width,T.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(K){s=K,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(K){a=K,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(K){c=K},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return d},this.getFrame=function(){return x},this.getSession=function(){return i},this.setSession=async function(K){if(i=K,i!==null){if(v=e.getRenderTarget(),i.addEventListener("select",H),i.addEventListener("selectstart",H),i.addEventListener("selectend",H),i.addEventListener("squeeze",H),i.addEventListener("squeezestart",H),i.addEventListener("squeezeend",H),i.addEventListener("end",j),i.addEventListener("inputsourceschange",J),y.xrCompatible!==!0&&await n.makeXRCompatible(),A=e.getPixelRatio(),e.getSize(T),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let oe=null,Z=null,pe=null;y.depth&&(pe=y.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,oe=y.stencil?Nm:km,Z=y.stencil?Rm:td);const ye={colorFormat:n.RGBA8,depthFormat:pe,scaleFactor:s};d=new XRWebGLBinding(i,n),h=d.createProjectionLayer(ye),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),S=new nd(h.textureWidth,h.textureHeight,{format:Mo,type:ga,depthTexture:new bj(h.textureWidth,h.textureHeight,Z,void 0,void 0,void 0,void 0,void 0,void 0,oe),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}else{const oe={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,n,oe),i.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),S=new nd(p.framebufferWidth,p.framebufferHeight,{format:Mo,type:ga,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await i.requestReferenceSpace(a),B.setContext(i),B.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return w.getDepthTexture()};function J(K){for(let ie=0;ie<K.removed.length;ie++){const oe=K.removed[ie],Z=C.indexOf(oe);Z>=0&&(C[Z]=null,E[Z].disconnect(oe))}for(let ie=0;ie<K.added.length;ie++){const oe=K.added[ie];let Z=C.indexOf(oe);if(Z===-1){for(let ye=0;ye<E.length;ye++)if(ye>=C.length){C.push(oe),Z=ye;break}else if(C[ye]===null){C[ye]=oe,Z=ye;break}if(Z===-1)break}const pe=E[Z];pe&&pe.connect(oe)}}const q=new be,Q=new be;function O(K,ie,oe){q.setFromMatrixPosition(ie.matrixWorld),Q.setFromMatrixPosition(oe.matrixWorld);const Z=q.distanceTo(Q),pe=ie.projectionMatrix.elements,ye=oe.projectionMatrix.elements,ge=pe[14]/(pe[10]-1),je=pe[14]/(pe[10]+1),We=(pe[9]+1)/pe[5],it=(pe[9]-1)/pe[5],te=(pe[8]-1)/pe[0],pt=(ye[8]+1)/ye[0],Be=ge*te,ut=ge*pt,Xe=Z/(-te+pt),wt=Xe*-te;if(ie.matrixWorld.decompose(K.position,K.quaternion,K.scale),K.translateX(wt),K.translateZ(Xe),K.matrixWorld.compose(K.position,K.quaternion,K.scale),K.matrixWorldInverse.copy(K.matrixWorld).invert(),pe[10]===-1)K.projectionMatrix.copy(ie.projectionMatrix),K.projectionMatrixInverse.copy(ie.projectionMatrixInverse);else{const Ae=ge+Xe,Pe=je+Xe,ot=Be-wt,Y=ut+(Z-wt),L=We*je/Pe*Ae,ne=it*je/Pe*Ae;K.projectionMatrix.makePerspective(ot,Y,L,ne,Ae,Pe),K.projectionMatrixInverse.copy(K.projectionMatrix).invert()}}function F(K,ie){ie===null?K.matrixWorld.copy(K.matrix):K.matrixWorld.multiplyMatrices(ie.matrixWorld,K.matrix),K.matrixWorldInverse.copy(K.matrixWorld).invert()}this.updateCamera=function(K){if(i===null)return;let ie=K.near,oe=K.far;w.texture!==null&&(w.depthNear>0&&(ie=w.depthNear),w.depthFar>0&&(oe=w.depthFar)),M.near=R.near=k.near=ie,M.far=R.far=k.far=oe,(I!==M.near||z!==M.far)&&(i.updateRenderState({depthNear:M.near,depthFar:M.far}),I=M.near,z=M.far),k.layers.mask=K.layers.mask|2,R.layers.mask=K.layers.mask|4,M.layers.mask=k.layers.mask|R.layers.mask;const Z=K.parent,pe=M.cameras;F(M,Z);for(let ye=0;ye<pe.length;ye++)F(pe[ye],Z);pe.length===2?O(M,k,R):M.projectionMatrix.copy(k.projectionMatrix),D(K,M,Z)};function D(K,ie,oe){oe===null?K.matrix.copy(ie.matrixWorld):(K.matrix.copy(oe.matrixWorld),K.matrix.invert(),K.matrix.multiply(ie.matrixWorld)),K.matrix.decompose(K.position,K.quaternion,K.scale),K.updateMatrixWorld(!0),K.projectionMatrix.copy(ie.projectionMatrix),K.projectionMatrixInverse.copy(ie.projectionMatrixInverse),K.isPerspectiveCamera&&(K.fov=CC*2*Math.atan(1/K.projectionMatrix.elements[5]),K.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(h===null&&p===null))return l},this.setFoveation=function(K){l=K,h!==null&&(h.fixedFoveation=K),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=K)},this.hasDepthSensing=function(){return w.texture!==null},this.getDepthSensingMesh=function(){return w.getMesh(M)};let ee=null;function W(K,ie){if(u=ie.getViewerPose(c||o),x=ie,u!==null){const oe=u.views;p!==null&&(e.setRenderTargetFramebuffer(S,p.framebuffer),e.setRenderTarget(S));let Z=!1;oe.length!==M.cameras.length&&(M.cameras.length=0,Z=!0);for(let ge=0;ge<oe.length;ge++){const je=oe[ge];let We=null;if(p!==null)We=p.getViewport(je);else{const te=d.getViewSubImage(h,je);We=te.viewport,ge===0&&(e.setRenderTargetTextures(S,te.colorTexture,te.depthStencilTexture),e.setRenderTarget(S))}let it=P[ge];it===void 0&&(it=new $s,it.layers.enable(ge),it.viewport=new nr,P[ge]=it),it.matrix.fromArray(je.transform.matrix),it.matrix.decompose(it.position,it.quaternion,it.scale),it.projectionMatrix.fromArray(je.projectionMatrix),it.projectionMatrixInverse.copy(it.projectionMatrix).invert(),it.viewport.set(We.x,We.y,We.width,We.height),ge===0&&(M.matrix.copy(it.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),Z===!0&&M.cameras.push(it)}const pe=i.enabledFeatures;if(pe&&pe.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&d){const ge=d.getDepthInformation(oe[0]);ge&&ge.isValid&&ge.texture&&w.init(e,ge,i.renderState)}}for(let oe=0;oe<E.length;oe++){const Z=C[oe],pe=E[oe];Z!==null&&pe!==void 0&&pe.update(Z,ie,c||o)}ee&&ee(K,ie),ie.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:ie}),x=null}const B=new Ej;B.setAnimationLoop(W),this.setAnimationLoop=function(K){ee=K},this.dispose=function(){}}}const pu=new fl,Khe=new rr;function Yhe(t,e){function n(y,v){y.matrixAutoUpdate===!0&&y.updateMatrix(),v.value.copy(y.matrix)}function r(y,v){v.color.getRGB(y.fogColor.value,yj(t)),v.isFog?(y.fogNear.value=v.near,y.fogFar.value=v.far):v.isFogExp2&&(y.fogDensity.value=v.density)}function i(y,v,S,E,C){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(y,v):v.isMeshToonMaterial?(s(y,v),d(y,v)):v.isMeshPhongMaterial?(s(y,v),u(y,v)):v.isMeshStandardMaterial?(s(y,v),h(y,v),v.isMeshPhysicalMaterial&&p(y,v,C)):v.isMeshMatcapMaterial?(s(y,v),x(y,v)):v.isMeshDepthMaterial?s(y,v):v.isMeshDistanceMaterial?(s(y,v),w(y,v)):v.isMeshNormalMaterial?s(y,v):v.isLineBasicMaterial?(o(y,v),v.isLineDashedMaterial&&a(y,v)):v.isPointsMaterial?l(y,v,S,E):v.isSpriteMaterial?c(y,v):v.isShadowMaterial?(y.color.value.copy(v.color),y.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(y,v){y.opacity.value=v.opacity,v.color&&y.diffuse.value.copy(v.color),v.emissive&&y.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(y.map.value=v.map,n(v.map,y.mapTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap,n(v.alphaMap,y.alphaMapTransform)),v.bumpMap&&(y.bumpMap.value=v.bumpMap,n(v.bumpMap,y.bumpMapTransform),y.bumpScale.value=v.bumpScale,v.side===Yi&&(y.bumpScale.value*=-1)),v.normalMap&&(y.normalMap.value=v.normalMap,n(v.normalMap,y.normalMapTransform),y.normalScale.value.copy(v.normalScale),v.side===Yi&&y.normalScale.value.negate()),v.displacementMap&&(y.displacementMap.value=v.displacementMap,n(v.displacementMap,y.displacementMapTransform),y.displacementScale.value=v.displacementScale,y.displacementBias.value=v.displacementBias),v.emissiveMap&&(y.emissiveMap.value=v.emissiveMap,n(v.emissiveMap,y.emissiveMapTransform)),v.specularMap&&(y.specularMap.value=v.specularMap,n(v.specularMap,y.specularMapTransform)),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest);const S=e.get(v),E=S.envMap,C=S.envMapRotation;E&&(y.envMap.value=E,pu.copy(C),pu.x*=-1,pu.y*=-1,pu.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(pu.y*=-1,pu.z*=-1),y.envMapRotation.value.setFromMatrix4(Khe.makeRotationFromEuler(pu)),y.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=v.reflectivity,y.ior.value=v.ior,y.refractionRatio.value=v.refractionRatio),v.lightMap&&(y.lightMap.value=v.lightMap,y.lightMapIntensity.value=v.lightMapIntensity,n(v.lightMap,y.lightMapTransform)),v.aoMap&&(y.aoMap.value=v.aoMap,y.aoMapIntensity.value=v.aoMapIntensity,n(v.aoMap,y.aoMapTransform))}function o(y,v){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,v.map&&(y.map.value=v.map,n(v.map,y.mapTransform))}function a(y,v){y.dashSize.value=v.dashSize,y.totalSize.value=v.dashSize+v.gapSize,y.scale.value=v.scale}function l(y,v,S,E){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,y.size.value=v.size*S,y.scale.value=E*.5,v.map&&(y.map.value=v.map,n(v.map,y.uvTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap,n(v.alphaMap,y.alphaMapTransform)),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest)}function c(y,v){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,y.rotation.value=v.rotation,v.map&&(y.map.value=v.map,n(v.map,y.mapTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap,n(v.alphaMap,y.alphaMapTransform)),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest)}function u(y,v){y.specular.value.copy(v.specular),y.shininess.value=Math.max(v.shininess,1e-4)}function d(y,v){v.gradientMap&&(y.gradientMap.value=v.gradientMap)}function h(y,v){y.metalness.value=v.metalness,v.metalnessMap&&(y.metalnessMap.value=v.metalnessMap,n(v.metalnessMap,y.metalnessMapTransform)),y.roughness.value=v.roughness,v.roughnessMap&&(y.roughnessMap.value=v.roughnessMap,n(v.roughnessMap,y.roughnessMapTransform)),v.envMap&&(y.envMapIntensity.value=v.envMapIntensity)}function p(y,v,S){y.ior.value=v.ior,v.sheen>0&&(y.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),y.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(y.sheenColorMap.value=v.sheenColorMap,n(v.sheenColorMap,y.sheenColorMapTransform)),v.sheenRoughnessMap&&(y.sheenRoughnessMap.value=v.sheenRoughnessMap,n(v.sheenRoughnessMap,y.sheenRoughnessMapTransform))),v.clearcoat>0&&(y.clearcoat.value=v.clearcoat,y.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(y.clearcoatMap.value=v.clearcoatMap,n(v.clearcoatMap,y.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,n(v.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(y.clearcoatNormalMap.value=v.clearcoatNormalMap,n(v.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Yi&&y.clearcoatNormalScale.value.negate())),v.dispersion>0&&(y.dispersion.value=v.dispersion),v.iridescence>0&&(y.iridescence.value=v.iridescence,y.iridescenceIOR.value=v.iridescenceIOR,y.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(y.iridescenceMap.value=v.iridescenceMap,n(v.iridescenceMap,y.iridescenceMapTransform)),v.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=v.iridescenceThicknessMap,n(v.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),v.transmission>0&&(y.transmission.value=v.transmission,y.transmissionSamplerMap.value=S.texture,y.transmissionSamplerSize.value.set(S.width,S.height),v.transmissionMap&&(y.transmissionMap.value=v.transmissionMap,n(v.transmissionMap,y.transmissionMapTransform)),y.thickness.value=v.thickness,v.thicknessMap&&(y.thicknessMap.value=v.thicknessMap,n(v.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=v.attenuationDistance,y.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(y.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(y.anisotropyMap.value=v.anisotropyMap,n(v.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=v.specularIntensity,y.specularColor.value.copy(v.specularColor),v.specularColorMap&&(y.specularColorMap.value=v.specularColorMap,n(v.specularColorMap,y.specularColorMapTransform)),v.specularIntensityMap&&(y.specularIntensityMap.value=v.specularIntensityMap,n(v.specularIntensityMap,y.specularIntensityMapTransform))}function x(y,v){v.matcap&&(y.matcap.value=v.matcap)}function w(y,v){const S=e.get(v).light;y.referencePosition.value.setFromMatrixPosition(S.matrixWorld),y.nearDistance.value=S.shadow.camera.near,y.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Jhe(t,e,n,r){let i={},s={},o=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,E){const C=E.program;r.uniformBlockBinding(S,C)}function c(S,E){let C=i[S.id];C===void 0&&(x(S),C=u(S),i[S.id]=C,S.addEventListener("dispose",y));const T=E.program;r.updateUBOMapping(S,T);const A=e.render.frame;s[S.id]!==A&&(h(S),s[S.id]=A)}function u(S){const E=d();S.__bindingPointIndex=E;const C=t.createBuffer(),T=S.__size,A=S.usage;return t.bindBuffer(t.UNIFORM_BUFFER,C),t.bufferData(t.UNIFORM_BUFFER,T,A),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,E,C),C}function d(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(S){const E=i[S.id],C=S.uniforms,T=S.__cache;t.bindBuffer(t.UNIFORM_BUFFER,E);for(let A=0,k=C.length;A<k;A++){const R=Array.isArray(C[A])?C[A]:[C[A]];for(let P=0,M=R.length;P<M;P++){const I=R[P];if(p(I,A,P,T)===!0){const z=I.__offset,H=Array.isArray(I.value)?I.value:[I.value];let j=0;for(let J=0;J<H.length;J++){const q=H[J],Q=w(q);typeof q=="number"||typeof q=="boolean"?(I.__data[0]=q,t.bufferSubData(t.UNIFORM_BUFFER,z+j,I.__data)):q.isMatrix3?(I.__data[0]=q.elements[0],I.__data[1]=q.elements[1],I.__data[2]=q.elements[2],I.__data[3]=0,I.__data[4]=q.elements[3],I.__data[5]=q.elements[4],I.__data[6]=q.elements[5],I.__data[7]=0,I.__data[8]=q.elements[6],I.__data[9]=q.elements[7],I.__data[10]=q.elements[8],I.__data[11]=0):(q.toArray(I.__data,j),j+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,z,I.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function p(S,E,C,T){const A=S.value,k=E+"_"+C;if(T[k]===void 0)return typeof A=="number"||typeof A=="boolean"?T[k]=A:T[k]=A.clone(),!0;{const R=T[k];if(typeof A=="number"||typeof A=="boolean"){if(R!==A)return T[k]=A,!0}else if(R.equals(A)===!1)return R.copy(A),!0}return!1}function x(S){const E=S.uniforms;let C=0;const T=16;for(let k=0,R=E.length;k<R;k++){const P=Array.isArray(E[k])?E[k]:[E[k]];for(let M=0,I=P.length;M<I;M++){const z=P[M],H=Array.isArray(z.value)?z.value:[z.value];for(let j=0,J=H.length;j<J;j++){const q=H[j],Q=w(q),O=C%T,F=O%Q.boundary,D=O+F;C+=F,D!==0&&T-D<Q.storage&&(C+=T-D),z.__data=new Float32Array(Q.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=C,C+=Q.storage}}}const A=C%T;return A>0&&(C+=T-A),S.__size=C,S.__cache={},this}function w(S){const E={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(E.boundary=4,E.storage=4):S.isVector2?(E.boundary=8,E.storage=8):S.isVector3||S.isColor?(E.boundary=16,E.storage=12):S.isVector4?(E.boundary=16,E.storage=16):S.isMatrix3?(E.boundary=48,E.storage=48):S.isMatrix4?(E.boundary=64,E.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),E}function y(S){const E=S.target;E.removeEventListener("dispose",y);const C=o.indexOf(E.__bindingPointIndex);o.splice(C,1),t.deleteBuffer(i[E.id]),delete i[E.id],delete s[E.id]}function v(){for(const S in i)t.deleteBuffer(i[S]);o=[],i={},s={}}return{bind:l,update:c,dispose:v}}class Qhe{constructor(e={}){const{canvas:n=Nle(),context:r=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:h=!1}=e;this.isWebGLRenderer=!0;let p;if(r!==null){if(typeof WebGLRenderingContext<"u"&&r instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=r.getContextAttributes().alpha}else p=o;const x=new Uint32Array(4),w=new Int32Array(4);let y=null,v=null;const S=[],E=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=bc,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const C=this;let T=!1;this._outputColorSpace=Bs;let A=0,k=0,R=null,P=-1,M=null;const I=new nr,z=new nr;let H=null;const j=new wn(0);let J=0,q=n.width,Q=n.height,O=1,F=null,D=null;const ee=new nr(0,0,q,Q),W=new nr(0,0,q,Q);let B=!1;const K=new mA;let ie=!1,oe=!1;const Z=new rr,pe=new rr,ye=new be,ge=new nr,je={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let We=!1;function it(){return R===null?O:1}let te=r;function pt($,he){return n.getContext($,he)}try{const $={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${oA}`),n.addEventListener("webglcontextlost",et,!1),n.addEventListener("webglcontextrestored",De,!1),n.addEventListener("webglcontextcreationerror",ke,!1),te===null){const he="webgl2";if(te=pt(he,$),te===null)throw pt(he)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch($){throw console.error("THREE.WebGLRenderer: "+$.message),$}let Be,ut,Xe,wt,Ae,Pe,ot,Y,L,ne,X,se,ae,Ce,Re,ue,Te,de,_e,Qe,Ye,qe,mt,ce;function st(){Be=new lfe(te),Be.init(),qe=new $he(te,Be),ut=new tfe(te,Be,e,qe),Xe=new Hhe(te,Be),ut.reverseDepthBuffer&&h&&Xe.buffers.depth.setReversed(!0),wt=new dfe(te),Ae=new Rhe,Pe=new Vhe(te,Be,Xe,Ae,ut,qe,wt),ot=new rfe(C),Y=new afe(C),L=new vce(te),mt=new Zde(te,L),ne=new cfe(te,L,wt,mt),X=new hfe(te,ne,L,wt),_e=new ffe(te,ut,Pe),ue=new nfe(Ae),se=new Ahe(C,ot,Y,Be,ut,mt,ue),ae=new Yhe(C,Ae),Ce=new Nhe,Re=new Fhe(Be),de=new Qde(C,ot,Y,Xe,X,p,l),Te=new zhe(C,X,ut),ce=new Jhe(te,wt,ut,Xe),Qe=new efe(te,Be,wt),Ye=new ufe(te,Be,wt),wt.programs=se.programs,C.capabilities=ut,C.extensions=Be,C.properties=Ae,C.renderLists=Ce,C.shadowMap=Te,C.state=Xe,C.info=wt}st();const He=new qhe(C,te);this.xr=He,this.getContext=function(){return te},this.getContextAttributes=function(){return te.getContextAttributes()},this.forceContextLoss=function(){const $=Be.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){const $=Be.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function($){$!==void 0&&(O=$,this.setSize(q,Q,!1))},this.getSize=function($){return $.set(q,Q)},this.setSize=function($,he,xe=!0){if(He.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}q=$,Q=he,n.width=Math.floor($*O),n.height=Math.floor(he*O),xe===!0&&(n.style.width=$+"px",n.style.height=he+"px"),this.setViewport(0,0,$,he)},this.getDrawingBufferSize=function($){return $.set(q*O,Q*O).floor()},this.setDrawingBufferSize=function($,he,xe){q=$,Q=he,O=xe,n.width=Math.floor($*xe),n.height=Math.floor(he*xe),this.setViewport(0,0,$,he)},this.getCurrentViewport=function($){return $.copy(I)},this.getViewport=function($){return $.copy(ee)},this.setViewport=function($,he,xe,we){$.isVector4?ee.set($.x,$.y,$.z,$.w):ee.set($,he,xe,we),Xe.viewport(I.copy(ee).multiplyScalar(O).round())},this.getScissor=function($){return $.copy(W)},this.setScissor=function($,he,xe,we){$.isVector4?W.set($.x,$.y,$.z,$.w):W.set($,he,xe,we),Xe.scissor(z.copy(W).multiplyScalar(O).round())},this.getScissorTest=function(){return B},this.setScissorTest=function($){Xe.setScissorTest(B=$)},this.setOpaqueSort=function($){F=$},this.setTransparentSort=function($){D=$},this.getClearColor=function($){return $.copy(de.getClearColor())},this.setClearColor=function(){de.setClearColor(...arguments)},this.getClearAlpha=function(){return de.getClearAlpha()},this.setClearAlpha=function(){de.setClearAlpha(...arguments)},this.clear=function($=!0,he=!0,xe=!0){let we=0;if($){let ve=!1;if(R!==null){const Je=R.texture.format;ve=Je===fA||Je===dA||Je===uA}if(ve){const Je=R.texture.type,ct=Je===ga||Je===td||Je===Am||Je===Rm||Je===lA||Je===cA,bt=de.getClearColor(),ht=de.getClearAlpha(),Dt=bt.r,Ot=bt.g,At=bt.b;ct?(x[0]=Dt,x[1]=Ot,x[2]=At,x[3]=ht,te.clearBufferuiv(te.COLOR,0,x)):(w[0]=Dt,w[1]=Ot,w[2]=At,w[3]=ht,te.clearBufferiv(te.COLOR,0,w))}else we|=te.COLOR_BUFFER_BIT}he&&(we|=te.DEPTH_BUFFER_BIT),xe&&(we|=te.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),te.clear(we)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",et,!1),n.removeEventListener("webglcontextrestored",De,!1),n.removeEventListener("webglcontextcreationerror",ke,!1),de.dispose(),Ce.dispose(),Re.dispose(),Ae.dispose(),ot.dispose(),Y.dispose(),X.dispose(),mt.dispose(),ce.dispose(),se.dispose(),He.dispose(),He.removeEventListener("sessionstart",Dn),He.removeEventListener("sessionend",bn),hn.stop()};function et($){$.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function De(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const $=wt.autoReset,he=Te.enabled,xe=Te.autoUpdate,we=Te.needsUpdate,ve=Te.type;st(),wt.autoReset=$,Te.enabled=he,Te.autoUpdate=xe,Te.needsUpdate=we,Te.type=ve}function ke($){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function Ie($){const he=$.target;he.removeEventListener("dispose",Ie),tt(he)}function tt($){ft($),Ae.remove($)}function ft($){const he=Ae.get($).programs;he!==void 0&&(he.forEach(function(xe){se.releaseProgram(xe)}),$.isShaderMaterial&&se.releaseShaderCache($))}this.renderBufferDirect=function($,he,xe,we,ve,Je){he===null&&(he=je);const ct=ve.isMesh&&ve.matrixWorld.determinant()<0,bt=Lr($,he,xe,we,ve);Xe.setMaterial(we,ct);let ht=xe.index,Dt=1;if(we.wireframe===!0){if(ht=ne.getWireframeAttribute(xe),ht===void 0)return;Dt=2}const Ot=xe.drawRange,At=xe.attributes.position;let Zt=Ot.start*Dt,vn=(Ot.start+Ot.count)*Dt;Je!==null&&(Zt=Math.max(Zt,Je.start*Dt),vn=Math.min(vn,(Je.start+Je.count)*Dt)),ht!==null?(Zt=Math.max(Zt,0),vn=Math.min(vn,ht.count)):At!=null&&(Zt=Math.max(Zt,0),vn=Math.min(vn,At.count));const In=vn-Zt;if(In<0||In===1/0)return;mt.setup(ve,we,bt,xe,ht);let Un,sn=Qe;if(ht!==null&&(Un=L.get(ht),sn=Ye,sn.setIndex(Un)),ve.isMesh)we.wireframe===!0?(Xe.setLineWidth(we.wireframeLinewidth*it()),sn.setMode(te.LINES)):sn.setMode(te.TRIANGLES);else if(ve.isLine){let Rt=we.linewidth;Rt===void 0&&(Rt=1),Xe.setLineWidth(Rt*it()),ve.isLineSegments?sn.setMode(te.LINES):ve.isLineLoop?sn.setMode(te.LINE_LOOP):sn.setMode(te.LINE_STRIP)}else ve.isPoints?sn.setMode(te.POINTS):ve.isSprite&&sn.setMode(te.TRIANGLES);if(ve.isBatchedMesh)if(ve._multiDrawInstances!==null)Df("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),sn.renderMultiDrawInstances(ve._multiDrawStarts,ve._multiDrawCounts,ve._multiDrawCount,ve._multiDrawInstances);else if(Be.get("WEBGL_multi_draw"))sn.renderMultiDraw(ve._multiDrawStarts,ve._multiDrawCounts,ve._multiDrawCount);else{const Rt=ve._multiDrawStarts,pr=ve._multiDrawCounts,dn=ve._multiDrawCount,Jr=ht?L.get(ht).bytesPerElement:1,Ea=Ae.get(we).currentProgram.getUniforms();for(let gi=0;gi<dn;gi++)Ea.setValue(te,"_gl_DrawID",gi),sn.render(Rt[gi]/Jr,pr[gi])}else if(ve.isInstancedMesh)sn.renderInstances(Zt,In,ve.count);else if(xe.isInstancedBufferGeometry){const Rt=xe._maxInstanceCount!==void 0?xe._maxInstanceCount:1/0,pr=Math.min(xe.instanceCount,Rt);sn.renderInstances(Zt,In,pr)}else sn.render(Zt,In)};function Tt($,he,xe){$.transparent===!0&&$.side===sa&&$.forceSinglePass===!1?($.side=Yi,$.needsUpdate=!0,Ct($,he,xe),$.side=Pc,$.needsUpdate=!0,Ct($,he,xe),$.side=sa):Ct($,he,xe)}this.compile=function($,he,xe=null){xe===null&&(xe=$),v=Re.get(xe),v.init(he),E.push(v),xe.traverseVisible(function(ve){ve.isLight&&ve.layers.test(he.layers)&&(v.pushLight(ve),ve.castShadow&&v.pushShadow(ve))}),$!==xe&&$.traverseVisible(function(ve){ve.isLight&&ve.layers.test(he.layers)&&(v.pushLight(ve),ve.castShadow&&v.pushShadow(ve))}),v.setupLights();const we=new Set;return $.traverse(function(ve){if(!(ve.isMesh||ve.isPoints||ve.isLine||ve.isSprite))return;const Je=ve.material;if(Je)if(Array.isArray(Je))for(let ct=0;ct<Je.length;ct++){const bt=Je[ct];Tt(bt,xe,ve),we.add(bt)}else Tt(Je,xe,ve),we.add(Je)}),v=E.pop(),we},this.compileAsync=function($,he,xe=null){const we=this.compile($,he,xe);return new Promise(ve=>{function Je(){if(we.forEach(function(ct){Ae.get(ct).currentProgram.isReady()&&we.delete(ct)}),we.size===0){ve($);return}setTimeout(Je,10)}Be.get("KHR_parallel_shader_compile")!==null?Je():setTimeout(Je,10)})};let cn=null;function qt($){cn&&cn($)}function Dn(){hn.stop()}function bn(){hn.start()}const hn=new Ej;hn.setAnimationLoop(qt),typeof self<"u"&&hn.setContext(self),this.setAnimationLoop=function($){cn=$,He.setAnimationLoop($),$===null?hn.stop():hn.start()},He.addEventListener("sessionstart",Dn),He.addEventListener("sessionend",bn),this.render=function($,he){if(he!==void 0&&he.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;if($.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),he.parent===null&&he.matrixWorldAutoUpdate===!0&&he.updateMatrixWorld(),He.enabled===!0&&He.isPresenting===!0&&(He.cameraAutoUpdate===!0&&He.updateCamera(he),he=He.getCamera()),$.isScene===!0&&$.onBeforeRender(C,$,he,R),v=Re.get($,E.length),v.init(he),E.push(v),pe.multiplyMatrices(he.projectionMatrix,he.matrixWorldInverse),K.setFromProjectionMatrix(pe),oe=this.localClippingEnabled,ie=ue.init(this.clippingPlanes,oe),y=Ce.get($,S.length),y.init(),S.push(y),He.enabled===!0&&He.isPresenting===!0){const Je=C.xr.getDepthSensingMesh();Je!==null&&is(Je,he,-1/0,C.sortObjects)}is($,he,0,C.sortObjects),y.finish(),C.sortObjects===!0&&y.sort(F,D),We=He.enabled===!1||He.isPresenting===!1||He.hasDepthSensing()===!1,We&&de.addToRenderList(y,$),this.info.render.frame++,ie===!0&&ue.beginShadows();const xe=v.state.shadowsArray;Te.render(xe,$,he),ie===!0&&ue.endShadows(),this.info.autoReset===!0&&this.info.reset();const we=y.opaque,ve=y.transmissive;if(v.setupLights(),he.isArrayCamera){const Je=he.cameras;if(ve.length>0)for(let ct=0,bt=Je.length;ct<bt;ct++){const ht=Je[ct];ze(we,ve,$,ht)}We&&de.render($);for(let ct=0,bt=Je.length;ct<bt;ct++){const ht=Je[ct];Oe(y,$,ht,ht.viewport)}}else ve.length>0&&ze(we,ve,$,he),We&&de.render($),Oe(y,$,he);R!==null&&k===0&&(Pe.updateMultisampleRenderTarget(R),Pe.updateRenderTargetMipmap(R)),$.isScene===!0&&$.onAfterRender(C,$,he),mt.resetDefaultState(),P=-1,M=null,E.pop(),E.length>0?(v=E[E.length-1],ie===!0&&ue.setGlobalState(C.clippingPlanes,v.state.camera)):v=null,S.pop(),S.length>0?y=S[S.length-1]:y=null};function is($,he,xe,we){if($.visible===!1)return;if($.layers.test(he.layers)){if($.isGroup)xe=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(he);else if($.isLight)v.pushLight($),$.castShadow&&v.pushShadow($);else if($.isSprite){if(!$.frustumCulled||K.intersectsSprite($)){we&&ge.setFromMatrixPosition($.matrixWorld).applyMatrix4(pe);const ct=X.update($),bt=$.material;bt.visible&&y.push($,ct,bt,xe,ge.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&(!$.frustumCulled||K.intersectsObject($))){const ct=X.update($),bt=$.material;if(we&&($.boundingSphere!==void 0?($.boundingSphere===null&&$.computeBoundingSphere(),ge.copy($.boundingSphere.center)):(ct.boundingSphere===null&&ct.computeBoundingSphere(),ge.copy(ct.boundingSphere.center)),ge.applyMatrix4($.matrixWorld).applyMatrix4(pe)),Array.isArray(bt)){const ht=ct.groups;for(let Dt=0,Ot=ht.length;Dt<Ot;Dt++){const At=ht[Dt],Zt=bt[At.materialIndex];Zt&&Zt.visible&&y.push($,ct,Zt,xe,ge.z,At)}}else bt.visible&&y.push($,ct,bt,xe,ge.z,null)}}const Je=$.children;for(let ct=0,bt=Je.length;ct<bt;ct++)is(Je[ct],he,xe,we)}function Oe($,he,xe,we){const ve=$.opaque,Je=$.transmissive,ct=$.transparent;v.setupLightsView(xe),ie===!0&&ue.setGlobalState(C.clippingPlanes,xe),we&&Xe.viewport(I.copy(we)),ve.length>0&&Ve(ve,he,xe),Je.length>0&&Ve(Je,he,xe),ct.length>0&&Ve(ct,he,xe),Xe.buffers.depth.setTest(!0),Xe.buffers.depth.setMask(!0),Xe.buffers.color.setMask(!0),Xe.setPolygonOffset(!1)}function ze($,he,xe,we){if((xe.isScene===!0?xe.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[we.id]===void 0&&(v.state.transmissionRenderTarget[we.id]=new nd(1,1,{generateMipmaps:!0,type:Be.has("EXT_color_buffer_half_float")||Be.has("EXT_color_buffer_float")?yg:ga,minFilter:ku,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:gn.workingColorSpace}));const Je=v.state.transmissionRenderTarget[we.id],ct=we.viewport||I;Je.setSize(ct.z*C.transmissionResolutionScale,ct.w*C.transmissionResolutionScale);const bt=C.getRenderTarget();C.setRenderTarget(Je),C.getClearColor(j),J=C.getClearAlpha(),J<1&&C.setClearColor(16777215,.5),C.clear(),We&&de.render(xe);const ht=C.toneMapping;C.toneMapping=bc;const Dt=we.viewport;if(we.viewport!==void 0&&(we.viewport=void 0),v.setupLightsView(we),ie===!0&&ue.setGlobalState(C.clippingPlanes,we),Ve($,xe,we),Pe.updateMultisampleRenderTarget(Je),Pe.updateRenderTargetMipmap(Je),Be.has("WEBGL_multisampled_render_to_texture")===!1){let Ot=!1;for(let At=0,Zt=he.length;At<Zt;At++){const vn=he[At],In=vn.object,Un=vn.geometry,sn=vn.material,Rt=vn.group;if(sn.side===sa&&In.layers.test(we.layers)){const pr=sn.side;sn.side=Yi,sn.needsUpdate=!0,gt(In,xe,we,Un,sn,Rt),sn.side=pr,sn.needsUpdate=!0,Ot=!0}}Ot===!0&&(Pe.updateMultisampleRenderTarget(Je),Pe.updateRenderTargetMipmap(Je))}C.setRenderTarget(bt),C.setClearColor(j,J),Dt!==void 0&&(we.viewport=Dt),C.toneMapping=ht}function Ve($,he,xe){const we=he.isScene===!0?he.overrideMaterial:null;for(let ve=0,Je=$.length;ve<Je;ve++){const ct=$[ve],bt=ct.object,ht=ct.geometry,Dt=ct.group;let Ot=ct.material;Ot.allowOverride===!0&&we!==null&&(Ot=we),bt.layers.test(xe.layers)&&gt(bt,he,xe,ht,Ot,Dt)}}function gt($,he,xe,we,ve,Je){$.onBeforeRender(C,he,xe,we,ve,Je),$.modelViewMatrix.multiplyMatrices(xe.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),ve.onBeforeRender(C,he,xe,we,$,Je),ve.transparent===!0&&ve.side===sa&&ve.forceSinglePass===!1?(ve.side=Yi,ve.needsUpdate=!0,C.renderBufferDirect(xe,he,we,ve,$,Je),ve.side=Pc,ve.needsUpdate=!0,C.renderBufferDirect(xe,he,we,ve,$,Je),ve.side=sa):C.renderBufferDirect(xe,he,we,ve,$,Je),$.onAfterRender(C,he,xe,we,ve,Je)}function Ct($,he,xe){he.isScene!==!0&&(he=je);const we=Ae.get($),ve=v.state.lights,Je=v.state.shadowsArray,ct=ve.state.version,bt=se.getParameters($,ve.state,Je,he,xe),ht=se.getProgramCacheKey(bt);let Dt=we.programs;we.environment=$.isMeshStandardMaterial?he.environment:null,we.fog=he.fog,we.envMap=($.isMeshStandardMaterial?Y:ot).get($.envMap||we.environment),we.envMapRotation=we.environment!==null&&$.envMap===null?he.environmentRotation:$.envMapRotation,Dt===void 0&&($.addEventListener("dispose",Ie),Dt=new Map,we.programs=Dt);let Ot=Dt.get(ht);if(Ot!==void 0){if(we.currentProgram===Ot&&we.lightsStateVersion===ct)return Vn($,bt),Ot}else bt.uniforms=se.getUniforms($),$.onBeforeCompile(bt,C),Ot=se.acquireProgram(bt,ht),Dt.set(ht,Ot),we.uniforms=bt.uniforms;const At=we.uniforms;return(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(At.clippingPlanes=ue.uniform),Vn($,bt),we.needsLights=io($),we.lightsStateVersion=ct,we.needsLights&&(At.ambientLightColor.value=ve.state.ambient,At.lightProbe.value=ve.state.probe,At.directionalLights.value=ve.state.directional,At.directionalLightShadows.value=ve.state.directionalShadow,At.spotLights.value=ve.state.spot,At.spotLightShadows.value=ve.state.spotShadow,At.rectAreaLights.value=ve.state.rectArea,At.ltc_1.value=ve.state.rectAreaLTC1,At.ltc_2.value=ve.state.rectAreaLTC2,At.pointLights.value=ve.state.point,At.pointLightShadows.value=ve.state.pointShadow,At.hemisphereLights.value=ve.state.hemi,At.directionalShadowMap.value=ve.state.directionalShadowMap,At.directionalShadowMatrix.value=ve.state.directionalShadowMatrix,At.spotShadowMap.value=ve.state.spotShadowMap,At.spotLightMatrix.value=ve.state.spotLightMatrix,At.spotLightMap.value=ve.state.spotLightMap,At.pointShadowMap.value=ve.state.pointShadowMap,At.pointShadowMatrix.value=ve.state.pointShadowMatrix),we.currentProgram=Ot,we.uniformsList=null,Ot}function pn($){if($.uniformsList===null){const he=$.currentProgram.getUniforms();$.uniformsList=tx.seqWithValue(he.seq,$.uniforms)}return $.uniformsList}function Vn($,he){const xe=Ae.get($);xe.outputColorSpace=he.outputColorSpace,xe.batching=he.batching,xe.batchingColor=he.batchingColor,xe.instancing=he.instancing,xe.instancingColor=he.instancingColor,xe.instancingMorph=he.instancingMorph,xe.skinning=he.skinning,xe.morphTargets=he.morphTargets,xe.morphNormals=he.morphNormals,xe.morphColors=he.morphColors,xe.morphTargetsCount=he.morphTargetsCount,xe.numClippingPlanes=he.numClippingPlanes,xe.numIntersection=he.numClipIntersection,xe.vertexAlphas=he.vertexAlphas,xe.vertexTangents=he.vertexTangents,xe.toneMapping=he.toneMapping}function Lr($,he,xe,we,ve){he.isScene!==!0&&(he=je),Pe.resetTextureUnits();const Je=he.fog,ct=we.isMeshStandardMaterial?he.environment:null,bt=R===null?C.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:oh,ht=(we.isMeshStandardMaterial?Y:ot).get(we.envMap||ct),Dt=we.vertexColors===!0&&!!xe.attributes.color&&xe.attributes.color.itemSize===4,Ot=!!xe.attributes.tangent&&(!!we.normalMap||we.anisotropy>0),At=!!xe.morphAttributes.position,Zt=!!xe.morphAttributes.normal,vn=!!xe.morphAttributes.color;let In=bc;we.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(In=C.toneMapping);const Un=xe.morphAttributes.position||xe.morphAttributes.normal||xe.morphAttributes.color,sn=Un!==void 0?Un.length:0,Rt=Ae.get(we),pr=v.state.lights;if(ie===!0&&(oe===!0||$!==M)){const Sr=$===M&&we.id===P;ue.setState(we,$,Sr)}let dn=!1;we.version===Rt.__version?(Rt.needsLights&&Rt.lightsStateVersion!==pr.state.version||Rt.outputColorSpace!==bt||ve.isBatchedMesh&&Rt.batching===!1||!ve.isBatchedMesh&&Rt.batching===!0||ve.isBatchedMesh&&Rt.batchingColor===!0&&ve.colorTexture===null||ve.isBatchedMesh&&Rt.batchingColor===!1&&ve.colorTexture!==null||ve.isInstancedMesh&&Rt.instancing===!1||!ve.isInstancedMesh&&Rt.instancing===!0||ve.isSkinnedMesh&&Rt.skinning===!1||!ve.isSkinnedMesh&&Rt.skinning===!0||ve.isInstancedMesh&&Rt.instancingColor===!0&&ve.instanceColor===null||ve.isInstancedMesh&&Rt.instancingColor===!1&&ve.instanceColor!==null||ve.isInstancedMesh&&Rt.instancingMorph===!0&&ve.morphTexture===null||ve.isInstancedMesh&&Rt.instancingMorph===!1&&ve.morphTexture!==null||Rt.envMap!==ht||we.fog===!0&&Rt.fog!==Je||Rt.numClippingPlanes!==void 0&&(Rt.numClippingPlanes!==ue.numPlanes||Rt.numIntersection!==ue.numIntersection)||Rt.vertexAlphas!==Dt||Rt.vertexTangents!==Ot||Rt.morphTargets!==At||Rt.morphNormals!==Zt||Rt.morphColors!==vn||Rt.toneMapping!==In||Rt.morphTargetsCount!==sn)&&(dn=!0):(dn=!0,Rt.__version=we.version);let Jr=Rt.currentProgram;dn===!0&&(Jr=Ct(we,he,ve));let Ea=!1,gi=!1,wl=!1;const Tn=Jr.getUniforms(),Qr=Rt.uniforms;if(Xe.useProgram(Jr.program)&&(Ea=!0,gi=!0,wl=!0),we.id!==P&&(P=we.id,gi=!0),Ea||M!==$){Xe.buffers.depth.getReversed()?(Z.copy($.projectionMatrix),Dle(Z),Ile(Z),Tn.setValue(te,"projectionMatrix",Z)):Tn.setValue(te,"projectionMatrix",$.projectionMatrix),Tn.setValue(te,"viewMatrix",$.matrixWorldInverse);const _r=Tn.map.cameraPosition;_r!==void 0&&_r.setValue(te,ye.setFromMatrixPosition($.matrixWorld)),ut.logarithmicDepthBuffer&&Tn.setValue(te,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),(we.isMeshPhongMaterial||we.isMeshToonMaterial||we.isMeshLambertMaterial||we.isMeshBasicMaterial||we.isMeshStandardMaterial||we.isShaderMaterial)&&Tn.setValue(te,"isOrthographic",$.isOrthographicCamera===!0),M!==$&&(M=$,gi=!0,wl=!0)}if(ve.isSkinnedMesh){Tn.setOptional(te,ve,"bindMatrix"),Tn.setOptional(te,ve,"bindMatrixInverse");const Sr=ve.skeleton;Sr&&(Sr.boneTexture===null&&Sr.computeBoneTexture(),Tn.setValue(te,"boneTexture",Sr.boneTexture,Pe))}ve.isBatchedMesh&&(Tn.setOptional(te,ve,"batchingTexture"),Tn.setValue(te,"batchingTexture",ve._matricesTexture,Pe),Tn.setOptional(te,ve,"batchingIdTexture"),Tn.setValue(te,"batchingIdTexture",ve._indirectTexture,Pe),Tn.setOptional(te,ve,"batchingColorTexture"),ve._colorsTexture!==null&&Tn.setValue(te,"batchingColorTexture",ve._colorsTexture,Pe));const Ii=xe.morphAttributes;if((Ii.position!==void 0||Ii.normal!==void 0||Ii.color!==void 0)&&_e.update(ve,xe,Jr),(gi||Rt.receiveShadow!==ve.receiveShadow)&&(Rt.receiveShadow=ve.receiveShadow,Tn.setValue(te,"receiveShadow",ve.receiveShadow)),we.isMeshGouraudMaterial&&we.envMap!==null&&(Qr.envMap.value=ht,Qr.flipEnvMap.value=ht.isCubeTexture&&ht.isRenderTargetTexture===!1?-1:1),we.isMeshStandardMaterial&&we.envMap===null&&he.environment!==null&&(Qr.envMapIntensity.value=he.environmentIntensity),gi&&(Tn.setValue(te,"toneMappingExposure",C.toneMappingExposure),Rt.needsLights&&Cn(Qr,wl),Je&&we.fog===!0&&ae.refreshFogUniforms(Qr,Je),ae.refreshMaterialUniforms(Qr,we,O,Q,v.state.transmissionRenderTarget[$.id]),tx.upload(te,pn(Rt),Qr,Pe)),we.isShaderMaterial&&we.uniformsNeedUpdate===!0&&(tx.upload(te,pn(Rt),Qr,Pe),we.uniformsNeedUpdate=!1),we.isSpriteMaterial&&Tn.setValue(te,"center",ve.center),Tn.setValue(te,"modelViewMatrix",ve.modelViewMatrix),Tn.setValue(te,"normalMatrix",ve.normalMatrix),Tn.setValue(te,"modelMatrix",ve.matrixWorld),we.isShaderMaterial||we.isRawShaderMaterial){const Sr=we.uniformsGroups;for(let _r=0,Zc=Sr.length;_r<Zc;_r++){const Li=Sr[_r];ce.update(Li,Jr),ce.bind(Li,Jr)}}return Jr}function Cn($,he){$.ambientLightColor.needsUpdate=he,$.lightProbe.needsUpdate=he,$.directionalLights.needsUpdate=he,$.directionalLightShadows.needsUpdate=he,$.pointLights.needsUpdate=he,$.pointLightShadows.needsUpdate=he,$.spotLights.needsUpdate=he,$.spotLightShadows.needsUpdate=he,$.rectAreaLights.needsUpdate=he,$.hemisphereLights.needsUpdate=he}function io($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return A},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function($,he,xe){const we=Ae.get($);we.__autoAllocateDepthBuffer=$.resolveDepthBuffer===!1,we.__autoAllocateDepthBuffer===!1&&(we.__useRenderToTexture=!1),Ae.get($.texture).__webglTexture=he,Ae.get($.depthTexture).__webglTexture=we.__autoAllocateDepthBuffer?void 0:xe,we.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function($,he){const xe=Ae.get($);xe.__webglFramebuffer=he,xe.__useDefaultFramebuffer=he===void 0};const xl=te.createFramebuffer();this.setRenderTarget=function($,he=0,xe=0){R=$,A=he,k=xe;let we=!0,ve=null,Je=!1,ct=!1;if($){const ht=Ae.get($);if(ht.__useDefaultFramebuffer!==void 0)Xe.bindFramebuffer(te.FRAMEBUFFER,null),we=!1;else if(ht.__webglFramebuffer===void 0)Pe.setupRenderTarget($);else if(ht.__hasExternalTextures)Pe.rebindTextures($,Ae.get($.texture).__webglTexture,Ae.get($.depthTexture).__webglTexture);else if($.depthBuffer){const At=$.depthTexture;if(ht.__boundDepthTexture!==At){if(At!==null&&Ae.has(At)&&($.width!==At.image.width||$.height!==At.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Pe.setupDepthRenderbuffer($)}}const Dt=$.texture;(Dt.isData3DTexture||Dt.isDataArrayTexture||Dt.isCompressedArrayTexture)&&(ct=!0);const Ot=Ae.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Array.isArray(Ot[he])?ve=Ot[he][xe]:ve=Ot[he],Je=!0):$.samples>0&&Pe.useMultisampledRTT($)===!1?ve=Ae.get($).__webglMultisampledFramebuffer:Array.isArray(Ot)?ve=Ot[xe]:ve=Ot,I.copy($.viewport),z.copy($.scissor),H=$.scissorTest}else I.copy(ee).multiplyScalar(O).floor(),z.copy(W).multiplyScalar(O).floor(),H=B;if(xe!==0&&(ve=xl),Xe.bindFramebuffer(te.FRAMEBUFFER,ve)&&we&&Xe.drawBuffers($,ve),Xe.viewport(I),Xe.scissor(z),Xe.setScissorTest(H),Je){const ht=Ae.get($.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_CUBE_MAP_POSITIVE_X+he,ht.__webglTexture,xe)}else if(ct){const ht=Ae.get($.texture),Dt=he;te.framebufferTextureLayer(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,ht.__webglTexture,xe,Dt)}else if($!==null&&xe!==0){const ht=Ae.get($.texture);te.framebufferTexture2D(te.FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,ht.__webglTexture,xe)}P=-1},this.readRenderTargetPixels=function($,he,xe,we,ve,Je,ct,bt=0){if(!($&&$.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ht=Ae.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&ct!==void 0&&(ht=ht[ct]),ht){Xe.bindFramebuffer(te.FRAMEBUFFER,ht);try{const Dt=$.textures[bt],Ot=Dt.format,At=Dt.type;if(!ut.textureFormatReadable(Ot)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ut.textureTypeReadable(At)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}he>=0&&he<=$.width-we&&xe>=0&&xe<=$.height-ve&&($.textures.length>1&&te.readBuffer(te.COLOR_ATTACHMENT0+bt),te.readPixels(he,xe,we,ve,qe.convert(Ot),qe.convert(At),Je))}finally{const Dt=R!==null?Ae.get(R).__webglFramebuffer:null;Xe.bindFramebuffer(te.FRAMEBUFFER,Dt)}}},this.readRenderTargetPixelsAsync=async function($,he,xe,we,ve,Je,ct,bt=0){if(!($&&$.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ht=Ae.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&ct!==void 0&&(ht=ht[ct]),ht)if(he>=0&&he<=$.width-we&&xe>=0&&xe<=$.height-ve){Xe.bindFramebuffer(te.FRAMEBUFFER,ht);const Dt=$.textures[bt],Ot=Dt.format,At=Dt.type;if(!ut.textureFormatReadable(Ot))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ut.textureTypeReadable(At))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Zt=te.createBuffer();te.bindBuffer(te.PIXEL_PACK_BUFFER,Zt),te.bufferData(te.PIXEL_PACK_BUFFER,Je.byteLength,te.STREAM_READ),$.textures.length>1&&te.readBuffer(te.COLOR_ATTACHMENT0+bt),te.readPixels(he,xe,we,ve,qe.convert(Ot),qe.convert(At),0);const vn=R!==null?Ae.get(R).__webglFramebuffer:null;Xe.bindFramebuffer(te.FRAMEBUFFER,vn);const In=te.fenceSync(te.SYNC_GPU_COMMANDS_COMPLETE,0);return te.flush(),await Ple(te,In,4),te.bindBuffer(te.PIXEL_PACK_BUFFER,Zt),te.getBufferSubData(te.PIXEL_PACK_BUFFER,0,Je),te.deleteBuffer(Zt),te.deleteSync(In),Je}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function($,he=null,xe=0){const we=Math.pow(2,-xe),ve=Math.floor($.image.width*we),Je=Math.floor($.image.height*we),ct=he!==null?he.x:0,bt=he!==null?he.y:0;Pe.setTexture2D($,0),te.copyTexSubImage2D(te.TEXTURE_2D,xe,0,0,ct,bt,ve,Je),Xe.unbindTexture()};const Or=te.createFramebuffer(),Qc=te.createFramebuffer();this.copyTextureToTexture=function($,he,xe=null,we=null,ve=0,Je=null){Je===null&&(ve!==0?(Df("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Je=ve,ve=0):Je=0);let ct,bt,ht,Dt,Ot,At,Zt,vn,In;const Un=$.isCompressedTexture?$.mipmaps[Je]:$.image;if(xe!==null)ct=xe.max.x-xe.min.x,bt=xe.max.y-xe.min.y,ht=xe.isBox3?xe.max.z-xe.min.z:1,Dt=xe.min.x,Ot=xe.min.y,At=xe.isBox3?xe.min.z:0;else{const Ii=Math.pow(2,-ve);ct=Math.floor(Un.width*Ii),bt=Math.floor(Un.height*Ii),$.isDataArrayTexture?ht=Un.depth:$.isData3DTexture?ht=Math.floor(Un.depth*Ii):ht=1,Dt=0,Ot=0,At=0}we!==null?(Zt=we.x,vn=we.y,In=we.z):(Zt=0,vn=0,In=0);const sn=qe.convert(he.format),Rt=qe.convert(he.type);let pr;he.isData3DTexture?(Pe.setTexture3D(he,0),pr=te.TEXTURE_3D):he.isDataArrayTexture||he.isCompressedArrayTexture?(Pe.setTexture2DArray(he,0),pr=te.TEXTURE_2D_ARRAY):(Pe.setTexture2D(he,0),pr=te.TEXTURE_2D),te.pixelStorei(te.UNPACK_FLIP_Y_WEBGL,he.flipY),te.pixelStorei(te.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),te.pixelStorei(te.UNPACK_ALIGNMENT,he.unpackAlignment);const dn=te.getParameter(te.UNPACK_ROW_LENGTH),Jr=te.getParameter(te.UNPACK_IMAGE_HEIGHT),Ea=te.getParameter(te.UNPACK_SKIP_PIXELS),gi=te.getParameter(te.UNPACK_SKIP_ROWS),wl=te.getParameter(te.UNPACK_SKIP_IMAGES);te.pixelStorei(te.UNPACK_ROW_LENGTH,Un.width),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,Un.height),te.pixelStorei(te.UNPACK_SKIP_PIXELS,Dt),te.pixelStorei(te.UNPACK_SKIP_ROWS,Ot),te.pixelStorei(te.UNPACK_SKIP_IMAGES,At);const Tn=$.isDataArrayTexture||$.isData3DTexture,Qr=he.isDataArrayTexture||he.isData3DTexture;if($.isDepthTexture){const Ii=Ae.get($),Sr=Ae.get(he),_r=Ae.get(Ii.__renderTarget),Zc=Ae.get(Sr.__renderTarget);Xe.bindFramebuffer(te.READ_FRAMEBUFFER,_r.__webglFramebuffer),Xe.bindFramebuffer(te.DRAW_FRAMEBUFFER,Zc.__webglFramebuffer);for(let Li=0;Li<ht;Li++)Tn&&(te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Ae.get($).__webglTexture,ve,At+Li),te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Ae.get(he).__webglTexture,Je,In+Li)),te.blitFramebuffer(Dt,Ot,ct,bt,Zt,vn,ct,bt,te.DEPTH_BUFFER_BIT,te.NEAREST);Xe.bindFramebuffer(te.READ_FRAMEBUFFER,null),Xe.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else if(ve!==0||$.isRenderTargetTexture||Ae.has($)){const Ii=Ae.get($),Sr=Ae.get(he);Xe.bindFramebuffer(te.READ_FRAMEBUFFER,Or),Xe.bindFramebuffer(te.DRAW_FRAMEBUFFER,Qc);for(let _r=0;_r<ht;_r++)Tn?te.framebufferTextureLayer(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Ii.__webglTexture,ve,At+_r):te.framebufferTexture2D(te.READ_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Ii.__webglTexture,ve),Qr?te.framebufferTextureLayer(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,Sr.__webglTexture,Je,In+_r):te.framebufferTexture2D(te.DRAW_FRAMEBUFFER,te.COLOR_ATTACHMENT0,te.TEXTURE_2D,Sr.__webglTexture,Je),ve!==0?te.blitFramebuffer(Dt,Ot,ct,bt,Zt,vn,ct,bt,te.COLOR_BUFFER_BIT,te.NEAREST):Qr?te.copyTexSubImage3D(pr,Je,Zt,vn,In+_r,Dt,Ot,ct,bt):te.copyTexSubImage2D(pr,Je,Zt,vn,Dt,Ot,ct,bt);Xe.bindFramebuffer(te.READ_FRAMEBUFFER,null),Xe.bindFramebuffer(te.DRAW_FRAMEBUFFER,null)}else Qr?$.isDataTexture||$.isData3DTexture?te.texSubImage3D(pr,Je,Zt,vn,In,ct,bt,ht,sn,Rt,Un.data):he.isCompressedArrayTexture?te.compressedTexSubImage3D(pr,Je,Zt,vn,In,ct,bt,ht,sn,Un.data):te.texSubImage3D(pr,Je,Zt,vn,In,ct,bt,ht,sn,Rt,Un):$.isDataTexture?te.texSubImage2D(te.TEXTURE_2D,Je,Zt,vn,ct,bt,sn,Rt,Un.data):$.isCompressedTexture?te.compressedTexSubImage2D(te.TEXTURE_2D,Je,Zt,vn,Un.width,Un.height,sn,Un.data):te.texSubImage2D(te.TEXTURE_2D,Je,Zt,vn,ct,bt,sn,Rt,Un);te.pixelStorei(te.UNPACK_ROW_LENGTH,dn),te.pixelStorei(te.UNPACK_IMAGE_HEIGHT,Jr),te.pixelStorei(te.UNPACK_SKIP_PIXELS,Ea),te.pixelStorei(te.UNPACK_SKIP_ROWS,gi),te.pixelStorei(te.UNPACK_SKIP_IMAGES,wl),Je===0&&he.generateMipmaps&&te.generateMipmap(pr),Xe.unbindTexture()},this.copyTextureToTexture3D=function($,he,xe=null,we=null,ve=0){return Df('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture($,he,xe,we,ve)},this.initRenderTarget=function($){Ae.get($).__webglFramebuffer===void 0&&Pe.setupRenderTarget($)},this.initTexture=function($){$.isCubeTexture?Pe.setTextureCube($,0):$.isData3DTexture?Pe.setTexture3D($,0):$.isDataArrayTexture||$.isCompressedArrayTexture?Pe.setTexture2DArray($,0):Pe.setTexture2D($,0),Xe.unbindTexture()},this.resetState=function(){A=0,k=0,R=null,Xe.reset(),mt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Za}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=gn._getDrawingBufferColorSpace(e),n.unpackColorSpace=gn._getUnpackColorSpace()}}const Zhe=({width:t=128,height:e=128,cloudCount:n=6,isLightTheme:r=!1})=>{const i=b.useRef(null),s=b.useRef(),o=()=>{const a=new Rp,l=new xf(.3,12,8),c=new Hr(l);c.position.set(0,0,0),a.add(c);const u=new xf(.2,10,6),d=new Hr(u);d.position.set(-.25,-.05,0),a.add(d);const h=new xf(.25,10,6),p=new Hr(h);p.position.set(.3,.05,0),a.add(p);const x=new xf(.18,8,6),w=new Hr(x);return w.position.set(.05,.25,0),a.add(w),a};return b.useEffect(()=>{if(!i.current)return;const a=new oce,l=new $s(75,t/e,.1,1e3);l.position.z=5;const c=new Qhe({antialias:!0,alpha:!0});c.setSize(t,e),c.setClearColor(0,0),i.current.appendChild(c.domElement),a.add(new pce(16777215,.3));const u=new hce(16777215,.2);u.position.set(2,5,3),a.add(u);const d=[],h=r?3900150:6333946,p=r?.4:.5,x=new Kx({color:new wn(h),transparent:!0,opacity:p,side:sa}),w=l.fov/2*(Math.PI/180),y=2*Math.tan(w)*l.position.z,v=y*(t/e),S=Math.ceil(Math.sqrt(n*1.5)),E=Math.ceil(n/S),C=v*1.4/S,T=y*1/E;for(let k=0;k<n;k++){const R=o();R.traverse(Q=>{Q instanceof Hr&&(Q.material=x.clone())});const P=.6+Math.random()*.2,M=(Math.random()-.5)*6;R.scale.setScalar(P*(1-Math.abs(M)*.02));const I=k%S,z=Math.floor(k/S),H=I*C-v*.7+C*.5,j=z*T-y*.5+T*.5,J=(Math.random()-.5)*C*.6,q=(Math.random()-.5)*T*.6;R.position.set(H+J,j+q,M),d.push({mesh:R,speed:.003+Math.random()*.001,initialY:R.position.y,assignedRow:z,cellHeight:T,zDepth:M,verticalOffset:Math.random()*Math.PI*2,baseOpacity:p}),a.add(R)}const A=()=>{s.current=requestAnimationFrame(A);for(const k of d){const{mesh:R,speed:P,zDepth:M,assignedRow:I,cellHeight:z,verticalOffset:H,baseOpacity:j}=k;R.position.x+=P*(1+Math.abs(M)*.03),R.position.y=k.initialY+Math.sin(performance.now()*5e-4+H)*.1;const J=0,q=0,Q=v*.4,O=y*.6,F=Math.abs(R.position.x-J),D=Math.abs(R.position.y-q),ee=F<Q/2,W=D<O/2;let B=j;if(ee&&W){const K=1-F/(Q/2),ie=1-D/(O/2),oe=Math.max(K,ie);B=j*(1-oe*.8)}if(R.traverse(K=>{K instanceof Hr&&K.material instanceof Kx&&(K.material.opacity=B)}),R.position.x>v/2+3){R.position.x=-v/2-3;const K=I*z-y*.5+z*.5,ie=(Math.random()-.5)*z*.6;k.initialY=K+ie,R.position.y=k.initialY}}c.render(a,l)};return A(),()=>{s.current&&cancelAnimationFrame(s.current),i.current&&c.domElement&&i.current.removeChild(c.domElement),c.dispose(),x.dispose(),d.forEach(k=>{k.mesh.traverse(R=>{var P,M;R instanceof Hr&&(R.geometry&&R.geometry.dispose(),R.material&&(Array.isArray(R.material)?R.material.forEach(I=>{var z;return(z=I==null?void 0:I.dispose)==null?void 0:z.call(I)}):(M=(P=R.material)==null?void 0:P.dispose)==null||M.call(P)))})}),a.traverse(k=>{var R,P;k instanceof Hr&&(k.geometry&&k.geometry.dispose(),k.material&&(Array.isArray(k.material)?k.material.forEach(M=>{var I;return(I=M==null?void 0:M.dispose)==null?void 0:I.call(M)}):(P=(R=k.material)==null?void 0:R.dispose)==null||P.call(R)))})}},[t,e,n,r]),m.jsx("div",{ref:i,style:{width:`${t}px`,height:`${e}px`,display:"inline-block"}})},TC=({opacity:t=.05,cloudCount:e=4,isLight:n=!1})=>{const[r,i]=b.useState({width:typeof window<"u"?window.innerWidth:1e3,height:typeof window<"u"?window.innerHeight:800});return b.useEffect(()=>{const s=()=>{i({width:window.innerWidth,height:window.innerHeight})};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),m.jsx("div",{className:"fixed pointer-events-none z-0",style:{opacity:t,top:"80px",left:0,right:0,bottom:"150px",overflow:"hidden"},children:m.jsx(Zhe,{width:r.width,height:r.height-230,cloudCount:e,isLightTheme:n})})},epe=()=>{const{login:t,currentUser:e,isAuthenticated:n,token:r}=ro(),{theme:i}=no(),s=md(),o=Me.useRef(!1),a=i==="light",l=a?"bg-gradient-to-br from-blue-50 to-indigo-100":"bg-gradient-to-br from-slate-900 to-slate-800",c=a?"text-gray-900":"text-slate-100",u=a?"text-gray-600":"text-slate-400",d=a?"bg-white":"bg-slate-800",h=a?"border-gray-100":"border-slate-700",p=a?"bg-blue-400":"bg-slate-600",x=a?"none":"invert(1) brightness(1.2)";console.log("Home component rendered:",{hasUser:!!e,hasToken:!!r,isAuthenticated:n,alreadyNavigated:o.current}),Me.useEffect(()=>{n&&!o.current&&(console.log("Navigating to /canvas due to authenticated user:",{user:e,token:r}),o.current=!0,setTimeout(()=>s("/canvas"),0))},[e,s,n,r]);const w=async()=>{try{console.log("Starting login process"),o.current=!1,await t(),console.log("Login process completed, will navigate to /canvas after auth context updates")}catch(y){console.error("Login failed:",y)}};return m.jsxs("div",{className:`min-h-screen ${l} overflow-hidden relative`,children:[m.jsx(TC,{opacity:a?.2:.15,cloudCount:15,isLight:a}),m.jsx("div",{className:"absolute inset-0 z-0 opacity-20",children:m.jsx("div",{className:"absolute top-0 left-0 w-full h-full",children:Array.from({length:10}).map((y,v)=>m.jsx("div",{className:`absolute rounded-full ${p}`,style:{width:`${Math.random()*300+50}px`,height:`${Math.random()*300+50}px`,top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,opacity:Math.random()*.2,transform:`scale(${Math.random()*1+.5})`,filter:"blur(60px)"}},`pattern-${v}`))})}),m.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("div",{className:"mb-2",children:m.jsx("img",{src:"/icon.png",alt:"Itemize",className:"h-20 md:h-24 w-auto mx-auto"})}),m.jsxs("h1",{className:`text-4xl font-light italic tracking-tight ${c} sm:text-5xl md:text-6xl`,style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsxs("div",{className:"flex flex-col items-center md:hidden gap-1 pb-2",children:[m.jsx("div",{className:"text-center w-full",children:m.jsx("div",{className:"text-2xl md:text-xl inline-block whitespace-nowrap font-light",children:"Organize confidently with"})}),m.jsx("div",{className:"mt-1",children:m.jsx("div",{className:`text-2xl md:text-2xl font-light italic tracking-wide ${u}`,children:"ITEMIZE"})})]}),m.jsxs("div",{className:"hidden md:flex flex-row items-center justify-center gap-3",children:[m.jsx("span",{children:"Organize your life"}),m.jsx("span",{children:"with"}),m.jsx("img",{src:"/profile.png",alt:"Itemize",className:"h-64 inline-block",style:{filter:x}})]})]}),m.jsx("p",{className:`mt-2 max-w-md mx-auto text-base ${u} sm:text-lg md:mt-3 md:text-xl md:max-w-3xl`,style:{fontFamily:'"Raleway", sans-serif'},children:"A complete organizational ecosystem with lists, notes, whiteboarding, and intelligent tools to streamline your workflow."}),m.jsx("div",{className:"mt-6 flex flex-col sm:flex-row gap-4 justify-center",children:m.jsxs(nt,{onClick:w,className:"rounded-md px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 font-light text-white",size:"lg",children:["Get Started Free",m.jsx(OS,{className:"ml-2 h-5 w-5"})]})})]}),m.jsxs("div",{className:"mt-16 mb-12",children:[m.jsx("h2",{className:`text-3xl font-light italic text-center ${c} mb-8`,style:{fontFamily:'"Raleway", sans-serif'},children:"Tools to stay organized"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12",children:[m.jsxs("div",{className:`${d} p-8 rounded-xl shadow-sm border ${h} transform transition-all duration-300 hover:shadow-md hover:-translate-y-1`,children:[m.jsx("div",{className:`w-14 h-14 ${a?"bg-blue-100":"bg-blue-900"} rounded-full flex items-center justify-center mb-5`,children:m.jsx(Cee,{className:"h-7 w-7 text-blue-600"})}),m.jsx("h3",{className:`text-xl font-semibold ${c} mb-3`,style:{fontFamily:'"Raleway", sans-serif'},children:"Organizational Tools"}),m.jsx("p",{className:u,style:{fontFamily:'"Raleway", sans-serif'},children:"Create and manage lists, notes, and any organizational content you need. From shopping lists to project notes, everything in one place."}),m.jsxs("div",{className:`mt-6 pt-4 border-t ${h}`,children:[m.jsxs("div",{className:"flex items-center text-sm text-blue-600",style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(Br,{className:"h-4 w-4 mr-2"}),m.jsx("span",{children:"Lists, Notes, & Whiteboards"})]}),m.jsxs("div",{className:"flex items-center text-sm text-blue-600 mt-2",style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(Br,{className:"h-4 w-4 mr-2"}),m.jsx("span",{children:"Easy categories & color groupings"})]})]})]}),m.jsxs("div",{className:`${d} p-8 rounded-xl shadow-sm border ${h} transform transition-all duration-300 hover:shadow-md hover:-translate-y-1`,children:[m.jsx("div",{className:`w-14 h-14 ${a?"bg-blue-100":"bg-blue-900"} rounded-full flex items-center justify-center mb-5`,children:m.jsx(oc,{className:"h-7 w-7 text-blue-600"})}),m.jsx("h3",{className:`text-xl font-semibold ${c} mb-3`,style:{fontFamily:'"Raleway", sans-serif'},children:"Smart Suggestions"}),m.jsx("p",{className:u,style:{fontFamily:'"Raleway", sans-serif'},children:"Let AI help you build lists faster with intelligent item suggestions and effortless autocomplete."}),m.jsxs("div",{className:`mt-6 pt-4 border-t ${h}`,children:[m.jsxs("div",{className:"flex items-center text-sm text-blue-600",style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(Br,{className:"h-4 w-4 mr-2"}),m.jsx("span",{children:"AI-powered item suggestions"})]}),m.jsxs("div",{className:"flex items-center text-sm text-blue-600 mt-2",style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(Br,{className:"h-4 w-4 mr-2"}),m.jsx("span",{children:"Effortless autocomplete"})]}),m.jsxs("div",{className:"flex items-center text-sm text-blue-600 mt-2",style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(Br,{className:"h-4 w-4 mr-2"}),m.jsx("span",{children:"Context-aware suggestions"})]})]})]}),m.jsxs("div",{className:`${d} p-8 rounded-xl shadow-sm border ${h} transform transition-all duration-300 hover:shadow-md hover:-translate-y-1`,children:[m.jsx("div",{className:`w-14 h-14 ${a?"bg-blue-100":"bg-blue-900"} rounded-full flex items-center justify-center mb-5`,children:m.jsx(gee,{className:"h-7 w-7 text-blue-600"})}),m.jsx("h3",{className:`text-xl font-semibold ${c} mb-3`,style:{fontFamily:'"Raleway", sans-serif'},children:"Access Anywhere"}),m.jsx("p",{className:u,style:{fontFamily:'"Raleway", sans-serif'},children:"Your organizational tools are synced and available across all your devices whenever and wherever you need them."}),m.jsxs("div",{className:`mt-6 pt-4 border-t ${h}`,children:[m.jsxs("div",{className:"flex items-center text-sm text-blue-600",style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(Br,{className:"h-4 w-4 mr-2"}),m.jsx("span",{children:"Real-time synchronization"})]}),m.jsxs("div",{className:"flex items-center text-sm text-blue-600 mt-2",style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(Br,{className:"h-4 w-4 mr-2"}),m.jsx("span",{children:"Works offline too"})]})]})]})]})]}),m.jsxs("div",{className:"mt-16 mb-12",children:[m.jsx("div",{className:"text-center mb-8",children:m.jsx("h2",{className:`text-3xl font-light italic ${c} mb-4`,style:{fontFamily:'"Raleway", sans-serif'},children:"See them in action"})}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 max-w-7xl mx-auto",children:[m.jsxs("div",{className:`${d} rounded-xl shadow-sm border ${h} overflow-hidden`,children:[m.jsx("div",{className:"p-4 pb-2",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`inline-block w-3 h-3 rounded-full border ${a?"border-gray-400":"border-slate-500"}`,style:{backgroundColor:"#4F46E5"}}),m.jsx(ag,{className:`h-4 w-4 ${a?"text-slate-500":"text-slate-400"}`}),m.jsx("h3",{className:`text-lg font-medium ${c}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Features"})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(Ja,{className:`h-4 w-4 ${a?"text-gray-400":"text-slate-500"}`}),m.jsx("button",{className:"ml-2 p-1",children:m.jsxs("div",{className:"h-4 w-4 flex flex-col justify-center items-center",children:[m.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full mb-0.5`}),m.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full mb-0.5`}),m.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full`})]})})]})]})}),m.jsx("div",{className:"mb-2 px-6",children:m.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${a?"border-gray-300 bg-white text-gray-700":"border-slate-600 bg-slate-700 text-slate-300"} cursor-pointer`,style:{fontFamily:'"Raleway", sans-serif'},children:"Productivity"})}),m.jsxs("div",{className:"px-6 py-2",children:[m.jsx("div",{className:`w-full ${a?"bg-gray-100":"bg-slate-700"} rounded-full h-2 mb-1`,children:m.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:"75%",backgroundColor:"#4F46E5"}})}),m.jsx("div",{className:`text-xs ${a?"text-gray-500":"text-slate-400"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"6 of 8 completed"})]}),m.jsxs("div",{className:"px-6 py-2 space-y-0.5",children:[m.jsx("div",{className:"flex items-center py-1 group",children:m.jsxs("div",{className:"flex items-center flex-grow",children:[m.jsx("div",{className:"w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#4F46E5",borderColor:"#4F46E5"},children:m.jsx(Br,{className:"h-3 w-3 text-white"})}),m.jsx("span",{className:`line-through ${a?"text-gray-400":"text-slate-500"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Custom color coding"})]})}),m.jsx("div",{className:"flex items-center py-1 group",children:m.jsxs("div",{className:"flex items-center flex-grow",children:[m.jsx("div",{className:"w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#4F46E5",borderColor:"#4F46E5"},children:m.jsx(Br,{className:"h-3 w-3 text-white"})}),m.jsx("span",{className:`line-through ${a?"text-gray-400":"text-slate-500"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Cloud synchronization"})]})}),m.jsx("div",{className:"flex items-center py-1 group",children:m.jsxs("div",{className:"flex items-center flex-grow",children:[m.jsx("div",{className:"w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#4F46E5",borderColor:"#4F46E5"},children:m.jsx(Br,{className:"h-3 w-3 text-white"})}),m.jsx("span",{className:`line-through ${a?"text-gray-400":"text-slate-500"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Category assignment"})]})}),m.jsx("div",{className:"flex items-center py-1 group",children:m.jsxs("div",{className:"flex items-center flex-grow",children:[m.jsx("div",{className:"w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#4F46E5",borderColor:"#4F46E5"},children:m.jsx(Br,{className:"h-3 w-3 text-white"})}),m.jsx("span",{className:`line-through ${a?"text-gray-400":"text-slate-500"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Real-time collaboration"})]})}),m.jsx("div",{className:"flex items-center py-1 group",children:m.jsxs("div",{className:"flex items-center flex-grow",children:[m.jsx("div",{className:"w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#4F46E5",borderColor:"#4F46E5"},children:m.jsx(Br,{className:"h-3 w-3 text-white"})}),m.jsx("span",{className:`line-through ${a?"text-gray-400":"text-slate-500"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Drag & drop reordering"})]})}),m.jsx("div",{className:"flex items-center py-1 group",children:m.jsxs("div",{className:"flex items-center flex-grow",children:[m.jsx("div",{className:"w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#4F46E5",borderColor:"#4F46E5"},children:m.jsx(Br,{className:"h-3 w-3 text-white"})}),m.jsx("span",{className:c,style:{fontFamily:'"Raleway", sans-serif'},children:"AI-powered suggestions"})]})}),m.jsx("div",{className:"flex items-center py-1 group",children:m.jsxs("div",{className:"flex items-center flex-grow",children:[m.jsx("div",{className:"w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0",style:{backgroundColor:"#4F46E5",borderColor:"#4F46E5"},children:m.jsx(Br,{className:"h-3 w-3 text-white"})}),m.jsx("span",{className:c,style:{fontFamily:'"Raleway", sans-serif'},children:"Cross-device access"})]})})]}),m.jsx("div",{className:`px-6 py-4 border-t ${h}`,children:m.jsxs("div",{className:`flex items-center space-x-2 ${a?"text-gray-400":"text-slate-500"}`,children:[m.jsx(og,{className:"h-4 w-4"}),m.jsx("span",{className:"text-sm",style:{fontFamily:'"Raleway", sans-serif'},children:"Add new item..."}),m.jsx("div",{className:"ml-auto",children:m.jsx(oc,{className:"h-4 w-4 text-blue-600"})})]})})]}),m.jsxs("div",{className:`${d} rounded-xl shadow-sm border ${h} overflow-hidden h-full flex flex-col`,children:[m.jsx("div",{className:"p-4 pb-2",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`inline-block w-3 h-3 rounded-full border ${a?"border-gray-400":"border-slate-500"}`,style:{backgroundColor:"#F59E0B"}}),m.jsx(lg,{className:`h-4 w-4 ${a?"text-slate-500":"text-slate-400"}`}),m.jsx("h3",{className:`font-semibold ${c}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Combined Approach"})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(Ja,{className:`h-4 w-4 ${a?"text-gray-400":"text-slate-500"}`}),m.jsx("button",{className:"ml-2 p-1",children:m.jsxs("div",{className:"h-4 w-4 flex flex-col justify-center items-center",children:[m.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full mb-0.5`}),m.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full mb-0.5`}),m.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full`})]})})]})]})}),m.jsx("div",{className:"mb-2 px-6",children:m.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${a?"border-gray-300 bg-white text-gray-700":"border-slate-600 bg-slate-700 text-slate-300"} cursor-pointer`,style:{fontFamily:'"Raleway", sans-serif'},children:"Strategy"})}),m.jsx("div",{className:"mx-6 mb-3",children:m.jsxs("div",{className:`flex items-center gap-1 p-2 border-b ${h} ${a?"bg-gray-50":"bg-slate-700"}`,children:[m.jsxs("div",{className:`w-16 h-7 text-xs ${d} border ${h} rounded px-1 flex items-center justify-between`,children:[m.jsx(RB,{className:"h-3 w-3"}),m.jsx(Ja,{className:"h-2 w-2"})]}),m.jsxs("div",{className:"flex",children:[m.jsx("button",{className:"h-7 w-7 p-0 bg-accent text-accent-foreground rounded flex items-center justify-center",children:m.jsx(bB,{className:"h-3 w-3"})}),m.jsx("button",{className:`h-7 w-7 p-0 ${a?"hover:bg-gray-100":"hover:bg-slate-600"} rounded flex items-center justify-center`,children:m.jsx(CB,{className:"h-3 w-3"})}),m.jsx("button",{className:`h-7 w-7 p-0 ${a?"hover:bg-gray-100":"hover:bg-slate-600"} rounded flex items-center justify-center`,children:m.jsx(kB,{className:"h-3 w-3"})})]}),m.jsx("div",{className:`h-5 w-px ${a?"bg-gray-300":"bg-slate-600"}`}),m.jsxs("div",{className:"flex",children:[m.jsx("button",{className:"h-7 w-7 p-0 bg-accent text-accent-foreground rounded flex items-center justify-center",children:m.jsx(wB,{className:"h-3 w-3"})}),m.jsx("button",{className:`h-7 w-7 p-0 ${a?"hover:bg-gray-100":"hover:bg-slate-600"} rounded flex items-center justify-center`,children:m.jsx(xB,{className:"h-3 w-3"})})]}),m.jsx("div",{className:`h-5 w-px ${a?"bg-gray-300":"bg-slate-600"}`}),m.jsxs("div",{className:"flex",children:[m.jsx("button",{className:`h-7 w-7 p-0 ${a?"hover:bg-gray-100":"hover:bg-slate-600"} rounded flex items-center justify-center`,children:m.jsx(TB,{className:"h-3 w-3"})}),m.jsx("button",{className:`h-7 w-7 p-0 ${a?"hover:bg-gray-100":"hover:bg-slate-600"} rounded flex items-center justify-center`,children:m.jsx(MB,{className:"h-3 w-3"})}),m.jsx("button",{className:`h-7 w-7 p-0 ${a?"hover:bg-gray-100":"hover:bg-slate-600"} rounded flex items-center justify-center`,children:m.jsx(AB,{className:"h-3 w-3"})})]})]})}),m.jsx("div",{className:"flex-1 mx-6 mb-3",children:m.jsxs("div",{className:`${a?"bg-white":"bg-slate-800"} rounded-lg p-4 space-y-3 min-h-[200px]`,children:[m.jsx("h2",{className:`text-lg font-semibold ${a?"text-gray-900":"text-white"}`,children:"An Easy Choice"}),m.jsxs("p",{className:`text-sm ${a?"text-gray-700":"text-gray-300"}`,style:{fontFamily:'"Raleway", sans-serif'},children:["Intelligently combining ",m.jsx("strong",{children:"lists,"})," ",m.jsx("u",{children:"notes"})," and ",m.jsx("em",{children:"whiteboards"})," into one platform. Planning tasks or brainstorming projects? We got your ticket to an easy productivity boost."]}),m.jsx("div",{className:"space-y-1",children:m.jsxs("p",{className:`text-sm ${a?"text-gray-700":"text-gray-300"}`,style:{fontFamily:'"Raleway", sans-serif'},children:["Key benefits include custom color coding for visual organization, real-time cloud synchr",m.jsx("span",{className:a?"text-gray-400":"text-slate-500",children:"onization across all your devices, intelligent AI suggestions to boost productivity, and seamless category management to keep everything organized."})]})})]})}),m.jsx("div",{className:`px-6 py-4 border-t ${h}`,children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("div",{className:`text-xs ${a?"text-gray-500":"text-slate-400"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Last edited: Just now"}),m.jsx("div",{title:"AI-powered suggestions",children:m.jsx(oc,{className:"h-4 w-4 text-amber-500"})})]})})]}),m.jsxs("div",{className:`${d} rounded-xl shadow-sm border ${h} overflow-hidden h-full flex flex-col`,children:[m.jsx("div",{className:"p-4 pb-2",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`inline-block w-3 h-3 rounded-full border ${a?"border-gray-400":"border-slate-500"}`,style:{backgroundColor:"#10B981"}}),m.jsx(Sh,{className:`h-4 w-4 ${a?"text-slate-500":"text-slate-400"}`}),m.jsx("h3",{className:`font-semibold ${c}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Project Brainstorming"})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(Ja,{className:`h-4 w-4 ${a?"text-gray-400":"text-slate-500"}`}),m.jsx("button",{className:"ml-2 p-1",children:m.jsxs("div",{className:"h-4 w-4 flex flex-col justify-center items-center",children:[m.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full mb-0.5`}),m.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full mb-0.5`}),m.jsx("div",{className:`w-1 h-1 ${a?"bg-gray-400":"bg-slate-500"} rounded-full`})]})})]})]})}),m.jsx("div",{className:"mb-3 px-6",children:m.jsx("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${a?"border-gray-300 bg-white text-gray-700":"border-slate-600 bg-slate-700 text-slate-300"} cursor-pointer`,style:{fontFamily:'"Raleway", sans-serif'},children:"Design"})}),m.jsx("div",{className:"mx-6 mb-3",children:m.jsxs("div",{className:`flex items-center gap-2 p-2 border ${h} ${a?"bg-gray-50":"bg-slate-700"} rounded-t-lg`,children:[m.jsxs("div",{className:"flex gap-1",children:[m.jsx("button",{className:"h-6 w-6 p-0 bg-blue-600 hover:bg-blue-700 text-white rounded flex items-center justify-center",children:m.jsx(_B,{className:"h-3 w-3"})}),m.jsx("button",{className:`h-6 w-6 p-0 ${a?"hover:bg-gray-100":"hover:bg-slate-600"} rounded flex items-center justify-center`,children:m.jsx(EB,{className:"h-3 w-3"})})]}),m.jsxs("div",{className:"flex gap-1",children:[m.jsx("button",{className:"w-5 h-5 rounded border-2 border-blue-700 shadow-sm",style:{backgroundColor:"#2563eb"}}),m.jsx("button",{className:`w-5 h-5 rounded border ${a?"border-gray-300 hover:border-gray-400":"border-slate-600 hover:border-slate-500"} shadow-sm`,style:{backgroundColor:"#000000"}}),m.jsx("button",{className:`w-5 h-5 rounded border ${a?"border-gray-300 hover:border-gray-400":"border-slate-600 hover:border-slate-500"} shadow-sm`,style:{backgroundColor:"#FF0000"}}),m.jsx("button",{className:`w-5 h-5 rounded border ${a?"border-gray-300 hover:border-gray-400":"border-slate-600 hover:border-slate-500"} shadow-sm`,style:{backgroundColor:"#00FF00"}})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:`text-xs ${a?"text-gray-600":"text-slate-400"}`,children:"Size:"}),m.jsx("div",{className:`w-8 h-1.5 ${a?"bg-gray-200":"bg-slate-600"} rounded-full relative`,children:m.jsx("div",{className:"absolute left-1/3 top-1/2 transform -translate-y-1/2 w-2 h-2 bg-blue-600 rounded-full border border-white shadow"})})]})]})}),m.jsx("div",{className:"flex-1 mx-6 mb-3",children:m.jsx("div",{className:"bg-white rounded-b-lg h-full flex flex-col relative border border-gray-200 border-t-0",style:{minHeight:"280px"},children:m.jsx("div",{className:"p-4 flex-1 flex flex-col justify-center items-center",children:m.jsx("img",{src:"/icon.png",alt:"Itemize logo",className:"w-32 h-32 object-contain"})})})}),m.jsx("div",{className:`px-6 py-4 border-t ${h}`,children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("div",{className:`text-xs ${a?"text-gray-500":"text-slate-400"}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Last edited: Just now"}),m.jsx("div",{title:"AI-powered suggestions",children:m.jsx(oc,{className:"h-4 w-4 text-green-500"})})]})})]})]}),m.jsx("div",{className:"text-center mt-8",children:m.jsxs(nt,{onClick:w,className:"rounded-md px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 font-light text-white text-lg",size:"lg",children:["Start Organizing Today",m.jsx(OS,{className:"ml-2 h-6 w-6"})]})})]}),m.jsxs("div",{className:"max-w-6xl mx-auto mt-20",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("h2",{className:`text-3xl font-light italic ${c} mb-4`,style:{fontFamily:'"Raleway", sans-serif'},children:"Roadmap to 1.0"}),m.jsx("div",{className:"mb-8 flex justify-center",children:m.jsxs("button",{onClick:()=>s("/help/Version/0.8.2-overview"),className:"text-sm text-blue-500 hover:text-blue-600 flex items-center transition-colors",style:{fontFamily:'"Raleway", sans-serif'},children:["Version 0.8.2 Notes",m.jsx(OS,{className:"w-4 h-4 ml-1"})]})})]}),m.jsx("div",{className:`${d} rounded-lg p-8 border ${h} max-w-4xl mx-auto mb-12`,children:m.jsx("div",{className:"space-y-6",children:m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:`progress-bar-text text-lg font-medium italic ${c}`,style:{fontFamily:'"Raleway", sans-serif'},children:"v0.8.2"}),m.jsx("span",{className:`progress-bar-text text-lg font-medium italic ${c}`,style:{fontFamily:'"Raleway", sans-serif'},children:"v1.0 Stable Release"})]}),m.jsx("div",{className:`w-full bg-gray-300 rounded-full h-3 ${a?"bg-gray-300":"bg-slate-700"}`,children:m.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-3 rounded-full transition-all duration-500",style:{width:"82%"}})})]})})})]})]})]})},Yn=b.forwardRef(({className:t,type:e,...n},r)=>m.jsx("input",{type:e,className:_t("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Yn.displayName="Input";var xw="Popover",[Rj,PNe]=es(xw,[Bc]),_g=Bc(),[tpe,Hc]=Rj(xw),kj=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!1}=t,a=_g(e),l=b.useRef(null),[c,u]=b.useState(!1),[d,h]=Cs({prop:r,defaultProp:i??!1,onChange:s,caller:xw});return m.jsx(VT,{...a,children:m.jsx(tpe,{scope:e,contentId:Xr(),triggerRef:l,open:d,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:c,onCustomAnchorAdd:b.useCallback(()=>u(!0),[]),onCustomAnchorRemove:b.useCallback(()=>u(!1),[]),modal:o,children:n})})};kj.displayName=xw;var Nj="PopoverAnchor",npe=b.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Hc(Nj,n),s=_g(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=i;return b.useEffect(()=>(o(),()=>a()),[o,a]),m.jsx(ug,{...s,...r,ref:e})});npe.displayName=Nj;var Pj="PopoverTrigger",Dj=b.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Hc(Pj,n),s=_g(n),o=Ht(e,i.triggerRef),a=m.jsx(xt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Uj(i.open),...r,ref:o,onClick:rt(t.onClick,i.onOpenToggle)});return i.hasCustomAnchor?a:m.jsx(ug,{asChild:!0,...s,children:a})});Dj.displayName=Pj;var vA="PopoverPortal",[rpe,ipe]=Rj(vA,{forceMount:void 0}),Ij=t=>{const{__scopePopover:e,forceMount:n,children:r,container:i}=t,s=Hc(vA,e);return m.jsx(rpe,{scope:e,forceMount:n,children:m.jsx(As,{present:n||s.open,children:m.jsx(bh,{asChild:!0,container:i,children:r})})})};Ij.displayName=vA;var lh="PopoverContent",Lj=b.forwardRef((t,e)=>{const n=ipe(lh,t.__scopePopover),{forceMount:r=n.forceMount,...i}=t,s=Hc(lh,t.__scopePopover);return m.jsx(As,{present:r||s.open,children:s.modal?m.jsx(ope,{...i,ref:e}):m.jsx(ape,{...i,ref:e})})});Lj.displayName=lh;var spe=Rc("PopoverContent.RemoveScroll"),ope=b.forwardRef((t,e)=>{const n=Hc(lh,t.__scopePopover),r=b.useRef(null),i=Ht(e,r),s=b.useRef(!1);return b.useEffect(()=>{const o=r.current;if(o)return lw(o)},[]),m.jsx(pg,{as:spe,allowPinchZoom:!0,children:m.jsx(Oj,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:rt(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:rt(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:rt(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),ape=b.forwardRef((t,e)=>{const n=Hc(lh,t.__scopePopover),r=b.useRef(!1),i=b.useRef(!1);return m.jsx(Oj,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Oj=b.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,h=Hc(lh,n),p=_g(n);return ow(),m.jsx(fg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:m.jsx(pd,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:m.jsx(Q0,{"data-state":Uj(h.open),role:"dialog",id:h.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Fj="PopoverClose",lpe=b.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=Hc(Fj,n);return m.jsx(xt.button,{type:"button",...r,ref:e,onClick:rt(t.onClick,()=>i.onOpenChange(!1))})});lpe.displayName=Fj;var cpe="PopoverArrow",upe=b.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,i=_g(n);return m.jsx(Z0,{...i,...r,ref:e})});upe.displayName=cpe;function Uj(t){return t?"open":"closed"}var dpe=kj,fpe=Dj,hpe=Ij,Bj=Lj;const zj=dpe,jj=fpe,yA=b.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},i)=>m.jsx(hpe,{children:m.jsx(Bj,{ref:i,align:e,sideOffset:n,className:_t("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));yA.displayName=Bj.displayName;var pI=1,ppe=.9,mpe=.8,gpe=.17,R1=.1,k1=.999,vpe=.9999,ype=.99,xpe=/[\\\/_+.#"@\[\(\{&]/,wpe=/[\\\/_+.#"@\[\(\{&]/g,bpe=/[\s-]/,Hj=/[\s-]/g;function AC(t,e,n,r,i,s,o){if(s===e.length)return i===t.length?pI:ype;var a=`${i},${s}`;if(o[a]!==void 0)return o[a];for(var l=r.charAt(s),c=n.indexOf(l,i),u=0,d,h,p,x;c>=0;)d=AC(t,e,n,r,c+1,s+1,o),d>u&&(c===i?d*=pI:xpe.test(t.charAt(c-1))?(d*=mpe,p=t.slice(i,c-1).match(wpe),p&&i>0&&(d*=Math.pow(k1,p.length))):bpe.test(t.charAt(c-1))?(d*=ppe,x=t.slice(i,c-1).match(Hj),x&&i>0&&(d*=Math.pow(k1,x.length))):(d*=gpe,i>0&&(d*=Math.pow(k1,c-i))),t.charAt(c)!==e.charAt(s)&&(d*=vpe)),(d<R1&&n.charAt(c-1)===r.charAt(s+1)||r.charAt(s+1)===r.charAt(s)&&n.charAt(c-1)!==r.charAt(s))&&(h=AC(t,e,n,r,c+1,s+2,o),h*R1>d&&(d=h*R1)),d>u&&(u=d),c=n.indexOf(l,c+1);return o[a]=u,u}function mI(t){return t.toLowerCase().replace(Hj," ")}function Spe(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,AC(t,e,mI(t),mI(e),0,0,{})}var ww="Dialog",[Vj,DNe]=es(ww),[_pe,Uo]=Vj(ww),$j=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,a=b.useRef(null),l=b.useRef(null),[c,u]=Cs({prop:r,defaultProp:i??!1,onChange:s,caller:ww});return m.jsx(_pe,{scope:e,triggerRef:a,contentRef:l,contentId:Xr(),titleId:Xr(),descriptionId:Xr(),open:c,onOpenChange:u,onOpenToggle:b.useCallback(()=>u(d=>!d),[u]),modal:o,children:n})};$j.displayName=ww;var Wj="DialogTrigger",Epe=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Uo(Wj,n),s=Ht(e,i.triggerRef);return m.jsx(xt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":bA(i.open),...r,ref:s,onClick:rt(t.onClick,i.onOpenToggle)})});Epe.displayName=Wj;var xA="DialogPortal",[Cpe,Gj]=Vj(xA,{forceMount:void 0}),Xj=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=Uo(xA,e);return m.jsx(Cpe,{scope:e,forceMount:n,children:b.Children.map(r,o=>m.jsx(As,{present:n||s.open,children:m.jsx(bh,{asChild:!0,container:i,children:o})}))})};Xj.displayName=xA;var Yx="DialogOverlay",qj=b.forwardRef((t,e)=>{const n=Gj(Yx,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Uo(Yx,t.__scopeDialog);return s.modal?m.jsx(As,{present:r||s.open,children:m.jsx(Tpe,{...i,ref:e})}):null});qj.displayName=Yx;var Mpe=Rc("DialogOverlay.RemoveScroll"),Tpe=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Uo(Yx,n);return m.jsx(pg,{as:Mpe,allowPinchZoom:!0,shards:[i.contentRef],children:m.jsx(xt.div,{"data-state":bA(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),rd="DialogContent",Kj=b.forwardRef((t,e)=>{const n=Gj(rd,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=Uo(rd,t.__scopeDialog);return m.jsx(As,{present:r||s.open,children:s.modal?m.jsx(Ape,{...i,ref:e}):m.jsx(Rpe,{...i,ref:e})})});Kj.displayName=rd;var Ape=b.forwardRef((t,e)=>{const n=Uo(rd,t.__scopeDialog),r=b.useRef(null),i=Ht(e,n.contentRef,r);return b.useEffect(()=>{const s=r.current;if(s)return lw(s)},[]),m.jsx(Yj,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:rt(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:rt(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&s.preventDefault()}),onFocusOutside:rt(t.onFocusOutside,s=>s.preventDefault())})}),Rpe=b.forwardRef((t,e)=>{const n=Uo(rd,t.__scopeDialog),r=b.useRef(!1),i=b.useRef(!1);return m.jsx(Yj,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),Yj=b.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,a=Uo(rd,n),l=b.useRef(null),c=Ht(e,l);return ow(),m.jsxs(m.Fragment,{children:[m.jsx(fg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:m.jsx(pd,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":bA(a.open),...o,ref:c,onDismiss:()=>a.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(kpe,{titleId:a.titleId}),m.jsx(Ppe,{contentRef:l,descriptionId:a.descriptionId})]})]})}),wA="DialogTitle",Jj=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Uo(wA,n);return m.jsx(xt.h2,{id:i.titleId,...r,ref:e})});Jj.displayName=wA;var Qj="DialogDescription",Zj=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Uo(Qj,n);return m.jsx(xt.p,{id:i.descriptionId,...r,ref:e})});Zj.displayName=Qj;var e5="DialogClose",t5=b.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=Uo(e5,n);return m.jsx(xt.button,{type:"button",...r,ref:e,onClick:rt(t.onClick,()=>i.onOpenChange(!1))})});t5.displayName=e5;function bA(t){return t?"open":"closed"}var n5="DialogTitleWarning",[INe,r5]=gZ(n5,{contentName:rd,titleName:wA,docsSlug:"dialog"}),kpe=({titleId:t})=>{const e=r5(n5),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},Npe="DialogDescriptionWarning",Ppe=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r5(Npe).contentName}}.`;return b.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},i5=$j,s5=Xj,SA=qj,_A=Kj,o5=Jj,a5=Zj,Dpe=t5,yp='[cmdk-group=""]',N1='[cmdk-group-items=""]',Ipe='[cmdk-group-heading=""]',l5='[cmdk-item=""]',gI=`${l5}:not([aria-disabled="true"])`,RC="cmdk-item-select",tf="data-value",Lpe=(t,e,n)=>Spe(t,e,n),c5=b.createContext(void 0),Eg=()=>b.useContext(c5),u5=b.createContext(void 0),EA=()=>b.useContext(u5),d5=b.createContext(void 0),f5=b.forwardRef((t,e)=>{let n=nf(()=>{var W,B;return{search:"",value:(B=(W=t.value)!=null?W:t.defaultValue)!=null?B:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=nf(()=>new Set),i=nf(()=>new Map),s=nf(()=>new Map),o=nf(()=>new Set),a=h5(t),{label:l,children:c,value:u,onValueChange:d,filter:h,shouldFilter:p,loop:x,disablePointerSelection:w=!1,vimBindings:y=!0,...v}=t,S=Xr(),E=Xr(),C=Xr(),T=b.useRef(null),A=Gpe();id(()=>{if(u!==void 0){let W=u.trim();n.current.value=W,k.emit()}},[u]),id(()=>{A(6,H)},[]);let k=b.useMemo(()=>({subscribe:W=>(o.current.add(W),()=>o.current.delete(W)),snapshot:()=>n.current,setState:(W,B,K)=>{var ie,oe,Z,pe;if(!Object.is(n.current[W],B)){if(n.current[W]=B,W==="search")z(),M(),A(1,I);else if(W==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ye=document.getElementById(C);ye?ye.focus():(ie=document.getElementById(S))==null||ie.focus()}if(A(7,()=>{var ye;n.current.selectedItemId=(ye=j())==null?void 0:ye.id,k.emit()}),K||A(5,H),((oe=a.current)==null?void 0:oe.value)!==void 0){let ye=B??"";(pe=(Z=a.current).onValueChange)==null||pe.call(Z,ye);return}}k.emit()}},emit:()=>{o.current.forEach(W=>W())}}),[]),R=b.useMemo(()=>({value:(W,B,K)=>{var ie;B!==((ie=s.current.get(W))==null?void 0:ie.value)&&(s.current.set(W,{value:B,keywords:K}),n.current.filtered.items.set(W,P(B,K)),A(2,()=>{M(),k.emit()}))},item:(W,B)=>(r.current.add(W),B&&(i.current.has(B)?i.current.get(B).add(W):i.current.set(B,new Set([W]))),A(3,()=>{z(),M(),n.current.value||I(),k.emit()}),()=>{s.current.delete(W),r.current.delete(W),n.current.filtered.items.delete(W);let K=j();A(4,()=>{z(),(K==null?void 0:K.getAttribute("id"))===W&&I(),k.emit()})}),group:W=>(i.current.has(W)||i.current.set(W,new Set),()=>{s.current.delete(W),i.current.delete(W)}),filter:()=>a.current.shouldFilter,label:l||t["aria-label"],getDisablePointerSelection:()=>a.current.disablePointerSelection,listId:S,inputId:C,labelId:E,listInnerRef:T}),[]);function P(W,B){var K,ie;let oe=(ie=(K=a.current)==null?void 0:K.filter)!=null?ie:Lpe;return W?oe(W,n.current.search,B):0}function M(){if(!n.current.search||a.current.shouldFilter===!1)return;let W=n.current.filtered.items,B=[];n.current.filtered.groups.forEach(ie=>{let oe=i.current.get(ie),Z=0;oe.forEach(pe=>{let ye=W.get(pe);Z=Math.max(ye,Z)}),B.push([ie,Z])});let K=T.current;J().sort((ie,oe)=>{var Z,pe;let ye=ie.getAttribute("id"),ge=oe.getAttribute("id");return((Z=W.get(ge))!=null?Z:0)-((pe=W.get(ye))!=null?pe:0)}).forEach(ie=>{let oe=ie.closest(N1);oe?oe.appendChild(ie.parentElement===oe?ie:ie.closest(`${N1} > *`)):K.appendChild(ie.parentElement===K?ie:ie.closest(`${N1} > *`))}),B.sort((ie,oe)=>oe[1]-ie[1]).forEach(ie=>{var oe;let Z=(oe=T.current)==null?void 0:oe.querySelector(`${yp}[${tf}="${encodeURIComponent(ie[0])}"]`);Z==null||Z.parentElement.appendChild(Z)})}function I(){let W=J().find(K=>K.getAttribute("aria-disabled")!=="true"),B=W==null?void 0:W.getAttribute(tf);k.setState("value",B||void 0)}function z(){var W,B,K,ie;if(!n.current.search||a.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let oe=0;for(let Z of r.current){let pe=(B=(W=s.current.get(Z))==null?void 0:W.value)!=null?B:"",ye=(ie=(K=s.current.get(Z))==null?void 0:K.keywords)!=null?ie:[],ge=P(pe,ye);n.current.filtered.items.set(Z,ge),ge>0&&oe++}for(let[Z,pe]of i.current)for(let ye of pe)if(n.current.filtered.items.get(ye)>0){n.current.filtered.groups.add(Z);break}n.current.filtered.count=oe}function H(){var W,B,K;let ie=j();ie&&(((W=ie.parentElement)==null?void 0:W.firstChild)===ie&&((K=(B=ie.closest(yp))==null?void 0:B.querySelector(Ipe))==null||K.scrollIntoView({block:"nearest"})),ie.scrollIntoView({block:"nearest"}))}function j(){var W;return(W=T.current)==null?void 0:W.querySelector(`${l5}[aria-selected="true"]`)}function J(){var W;return Array.from(((W=T.current)==null?void 0:W.querySelectorAll(gI))||[])}function q(W){let B=J()[W];B&&k.setState("value",B.getAttribute(tf))}function Q(W){var B;let K=j(),ie=J(),oe=ie.findIndex(pe=>pe===K),Z=ie[oe+W];(B=a.current)!=null&&B.loop&&(Z=oe+W<0?ie[ie.length-1]:oe+W===ie.length?ie[0]:ie[oe+W]),Z&&k.setState("value",Z.getAttribute(tf))}function O(W){let B=j(),K=B==null?void 0:B.closest(yp),ie;for(;K&&!ie;)K=W>0?$pe(K,yp):Wpe(K,yp),ie=K==null?void 0:K.querySelector(gI);ie?k.setState("value",ie.getAttribute(tf)):Q(W)}let F=()=>q(J().length-1),D=W=>{W.preventDefault(),W.metaKey?F():W.altKey?O(1):Q(1)},ee=W=>{W.preventDefault(),W.metaKey?q(0):W.altKey?O(-1):Q(-1)};return b.createElement(xt.div,{ref:e,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:W=>{var B;(B=v.onKeyDown)==null||B.call(v,W);let K=W.nativeEvent.isComposing||W.keyCode===229;if(!(W.defaultPrevented||K))switch(W.key){case"n":case"j":{y&&W.ctrlKey&&D(W);break}case"ArrowDown":{D(W);break}case"p":case"k":{y&&W.ctrlKey&&ee(W);break}case"ArrowUp":{ee(W);break}case"Home":{W.preventDefault(),q(0);break}case"End":{W.preventDefault(),F();break}case"Enter":{W.preventDefault();let ie=j();if(ie){let oe=new Event(RC);ie.dispatchEvent(oe)}}}}},b.createElement("label",{"cmdk-label":"",htmlFor:R.inputId,id:R.labelId,style:qpe},l),bw(t,W=>b.createElement(u5.Provider,{value:k},b.createElement(c5.Provider,{value:R},W))))}),Ope=b.forwardRef((t,e)=>{var n,r;let i=Xr(),s=b.useRef(null),o=b.useContext(d5),a=Eg(),l=h5(t),c=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;id(()=>{if(!c)return a.item(i,o==null?void 0:o.id)},[c]);let u=p5(i,s,[t.value,t.children,s],t.keywords),d=EA(),h=Ic(A=>A.value&&A.value===u.current),p=Ic(A=>c||a.filter()===!1?!0:A.search?A.filtered.items.get(i)>0:!0);b.useEffect(()=>{let A=s.current;if(!(!A||t.disabled))return A.addEventListener(RC,x),()=>A.removeEventListener(RC,x)},[p,t.onSelect,t.disabled]);function x(){var A,k;w(),(k=(A=l.current).onSelect)==null||k.call(A,u.current)}function w(){d.setState("value",u.current,!0)}if(!p)return null;let{disabled:y,value:v,onSelect:S,forceMount:E,keywords:C,...T}=t;return b.createElement(xt.div,{ref:cl(s,e),...T,id:i,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!h,"data-disabled":!!y,"data-selected":!!h,onPointerMove:y||a.getDisablePointerSelection()?void 0:w,onClick:y?void 0:x},t.children)}),Fpe=b.forwardRef((t,e)=>{let{heading:n,children:r,forceMount:i,...s}=t,o=Xr(),a=b.useRef(null),l=b.useRef(null),c=Xr(),u=Eg(),d=Ic(p=>i||u.filter()===!1?!0:p.search?p.filtered.groups.has(o):!0);id(()=>u.group(o),[]),p5(o,a,[t.value,t.heading,l]);let h=b.useMemo(()=>({id:o,forceMount:i}),[i]);return b.createElement(xt.div,{ref:cl(a,e),...s,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&b.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),bw(t,p=>b.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},b.createElement(d5.Provider,{value:h},p))))}),Upe=b.forwardRef((t,e)=>{let{alwaysRender:n,...r}=t,i=b.useRef(null),s=Ic(o=>!o.search);return!n&&!s?null:b.createElement(xt.div,{ref:cl(i,e),...r,"cmdk-separator":"",role:"separator"})}),Bpe=b.forwardRef((t,e)=>{let{onValueChange:n,...r}=t,i=t.value!=null,s=EA(),o=Ic(c=>c.search),a=Ic(c=>c.selectedItemId),l=Eg();return b.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),b.createElement(xt.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":a,id:l.inputId,type:"text",value:i?t.value:o,onChange:c=>{i||s.setState("search",c.target.value),n==null||n(c.target.value)}})}),zpe=b.forwardRef((t,e)=>{let{children:n,label:r="Suggestions",...i}=t,s=b.useRef(null),o=b.useRef(null),a=Ic(c=>c.selectedItemId),l=Eg();return b.useEffect(()=>{if(o.current&&s.current){let c=o.current,u=s.current,d,h=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let p=c.offsetHeight;u.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return h.observe(c),()=>{cancelAnimationFrame(d),h.unobserve(c)}}},[]),b.createElement(xt.div,{ref:cl(s,e),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":a,"aria-label":r,id:l.listId},bw(t,c=>b.createElement("div",{ref:cl(o,l.listInnerRef),"cmdk-list-sizer":""},c)))}),jpe=b.forwardRef((t,e)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:s,container:o,...a}=t;return b.createElement(i5,{open:n,onOpenChange:r},b.createElement(s5,{container:o},b.createElement(SA,{"cmdk-overlay":"",className:i}),b.createElement(_A,{"aria-label":t.label,"cmdk-dialog":"",className:s},b.createElement(f5,{ref:e,...a}))))}),Hpe=b.forwardRef((t,e)=>Ic(n=>n.filtered.count===0)?b.createElement(xt.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),Vpe=b.forwardRef((t,e)=>{let{progress:n,children:r,label:i="Loading...",...s}=t;return b.createElement(xt.div,{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},bw(t,o=>b.createElement("div",{"aria-hidden":!0},o)))}),ts=Object.assign(f5,{List:zpe,Item:Ope,Input:Bpe,Group:Fpe,Separator:Upe,Dialog:jpe,Empty:Hpe,Loading:Vpe});function $pe(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function Wpe(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function h5(t){let e=b.useRef(t);return id(()=>{e.current=t}),e}var id=typeof window>"u"?b.useEffect:b.useLayoutEffect;function nf(t){let e=b.useRef();return e.current===void 0&&(e.current=t()),e}function Ic(t){let e=EA(),n=()=>t(e.snapshot());return b.useSyncExternalStore(e.subscribe,n,n)}function p5(t,e,n,r=[]){let i=b.useRef(),s=Eg();return id(()=>{var o;let a=(()=>{var c;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():i.current}})(),l=r.map(c=>c.trim());s.value(t,a,l),(o=e.current)==null||o.setAttribute(tf,a),i.current=a}),i}var Gpe=()=>{let[t,e]=b.useState(),n=nf(()=>new Map);return id(()=>{n.current.forEach(r=>r()),n.current=new Map},[t]),(r,i)=>{n.current.set(r,i),e({})}};function Xpe(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function bw({asChild:t,children:e},n){return t&&b.isValidElement(e)?b.cloneElement(Xpe(e),{ref:e.ref},n(e.props.children)):n(e)}var qpe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Cg=i5,Kpe=s5,m5=b.forwardRef(({className:t,...e},n)=>m.jsx(SA,{ref:n,className:_t("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));m5.displayName=SA.displayName;const kh=b.forwardRef(({className:t,children:e,...n},r)=>m.jsxs(Kpe,{children:[m.jsx(m5,{}),m.jsxs(_A,{ref:r,className:_t("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,m.jsxs(Dpe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[m.jsx(Fo,{className:"h-4 w-4"}),m.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));kh.displayName=_A.displayName;const Nh=({className:t,...e})=>m.jsx("div",{className:_t("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Nh.displayName="DialogHeader";const Ph=b.forwardRef(({className:t,...e},n)=>m.jsx(o5,{ref:n,className:_t("text-lg font-semibold leading-none tracking-tight",t),...e}));Ph.displayName=o5.displayName;const Ype=b.forwardRef(({className:t,...e},n)=>m.jsx(a5,{ref:n,className:_t("text-sm text-muted-foreground",t),...e}));Ype.displayName=a5.displayName;const g5=b.forwardRef(({className:t,...e},n)=>m.jsx(ts,{ref:n,className:_t("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));g5.displayName=ts.displayName;const v5=b.forwardRef(({className:t,...e},n)=>m.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[m.jsx(Zo,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),m.jsx(ts.Input,{ref:n,className:_t("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));v5.displayName=ts.Input.displayName;const y5=b.forwardRef(({className:t,...e},n)=>m.jsx(ts.List,{ref:n,className:_t("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));y5.displayName=ts.List.displayName;const x5=b.forwardRef((t,e)=>m.jsx(ts.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));x5.displayName=ts.Empty.displayName;const w5=b.forwardRef(({className:t,...e},n)=>m.jsx(ts.Group,{ref:n,className:_t("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));w5.displayName=ts.Group.displayName;const Jpe=b.forwardRef(({className:t,...e},n)=>m.jsx(ts.Separator,{ref:n,className:_t("-mx-1 h-px bg-border",t),...e}));Jpe.displayName=ts.Separator.displayName;const nx=b.forwardRef(({className:t,...e},n)=>m.jsx(ts.Item,{ref:n,className:_t("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",t),...e}));nx.displayName=ts.Item.displayName;const b5=({isOpen:t,onClose:e,onCreateList:n,existingCategories:r})=>{const[i,s]=b.useState(""),[o,a]=b.useState(""),[l,c]=b.useState(!1),[u,d]=b.useState(""),[h,p]=b.useState("#3B82F6");b.useEffect(()=>{u&&a(u)},[u]),b.useEffect(()=>{o||d("")},[o]);const x=y=>{if(y.preventDefault(),i.trim()){const v=o.trim()||"General";n(i.trim(),v,h),s(""),a(""),p("#3B82F6")}},w=()=>{s(""),a(""),p("#3B82F6"),e()};return m.jsx(Cg,{open:t,onOpenChange:w,children:m.jsxs(kh,{className:"sm:max-w-md",children:[m.jsx(Nh,{children:m.jsx(Ph,{children:"Create New List"})}),m.jsxs("form",{onSubmit:x,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx(Ci,{htmlFor:"title",children:"List Title"}),m.jsx(Yn,{id:"title",placeholder:"Enter list title...",value:i,onChange:y=>s(y.target.value),className:"mt-1",autoFocus:!0})]}),m.jsxs("div",{children:[m.jsx(Ci,{htmlFor:"customType",children:"Category (Optional)"}),m.jsxs(zj,{open:l,onOpenChange:c,children:[m.jsx(jj,{asChild:!0,children:m.jsxs(nt,{variant:"outline",role:"combobox","aria-expanded":l,className:"w-full justify-between mt-1 font-normal",children:[o||"Select category or type new...",m.jsx(pee,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),m.jsx(yA,{className:"w-[--radix-popover-trigger-width] p-0",children:m.jsxs(g5,{children:[m.jsx(v5,{placeholder:"Search or create category...",value:o,onValueChange:y=>{a(y),d("")}}),m.jsxs(y5,{children:[m.jsx(x5,{children:o.trim()?`Create "${o}"`:"No category found."}),m.jsxs(w5,{children:[!r.includes("General")&&m.jsxs(nx,{value:"General",onSelect:y=>{d(y===u?"":y),a(y===o?"":y),c(!1)},children:[m.jsx(eo,{className:_t("mr-2 h-4 w-4",o==="General"?"opacity-100":"opacity-0")}),"General"]},"General"),r.map(y=>m.jsxs(nx,{value:y,onSelect:v=>{d(v===u?"":v),a(v===o?"":v),c(!1)},children:[m.jsx(eo,{className:_t("mr-2 h-4 w-4",o===y?"opacity-100":"opacity-0")}),y]},y))]}),o.trim()&&!r.includes(o.trim())&&m.jsxs(nx,{value:o.trim(),onSelect:()=>{d(o.trim()),c(!1)},children:[m.jsx(_o,{className:"mr-2 h-4 w-4"}),'Create "',o.trim(),'"']},o.trim())]})]})})]}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Select an existing category, type a new one, or leave empty for "General".'}),r.length===0&&m.jsx("p",{className:"text-xs text-blue-600 mt-1",children:'No categories available yet. You can create your first category or use "General".'})]}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[m.jsx(nt,{type:"button",variant:"outline",onClick:w,children:"Cancel"}),m.jsx(nt,{type:"submit",disabled:!i.trim(),className:"bg-blue-600 hover:bg-blue-700",children:"Create List"})]})]})]})})},bo=b.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:_t("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));bo.displayName="Card";const ta=b.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:_t("flex flex-col space-y-1.5 p-6",t),...e}));ta.displayName="CardHeader";const na=b.forwardRef(({className:t,...e},n)=>m.jsx("h3",{ref:n,className:_t("text-2xl font-semibold leading-none tracking-tight",t),...e}));na.displayName="CardTitle";const Qpe=b.forwardRef(({className:t,...e},n)=>m.jsx("p",{ref:n,className:_t("text-sm text-muted-foreground",t),...e}));Qpe.displayName="CardDescription";const $a=b.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:_t("p-6 pt-0",t),...e}));$a.displayName="CardContent";const Zpe=b.forwardRef(({className:t,...e},n)=>m.jsx("div",{ref:n,className:_t("flex items-center p-6 pt-0",t),...e}));Zpe.displayName="CardFooter";var Sw="Collapsible",[eme,LNe]=es(Sw),[tme,CA]=eme(Sw),S5=b.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:o,...a}=t,[l,c]=Cs({prop:r,defaultProp:i??!1,onChange:o,caller:Sw});return m.jsx(tme,{scope:n,disabled:s,contentId:Xr(),open:l,onOpenToggle:b.useCallback(()=>c(u=>!u),[c]),children:m.jsx(xt.div,{"data-state":TA(l),"data-disabled":s?"":void 0,...a,ref:e})})});S5.displayName=Sw;var _5="CollapsibleTrigger",E5=b.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=CA(_5,n);return m.jsx(xt.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":TA(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:rt(t.onClick,i.onOpenToggle)})});E5.displayName=_5;var MA="CollapsibleContent",C5=b.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=CA(MA,t.__scopeCollapsible);return m.jsx(As,{present:n||i.open,children:({present:s})=>m.jsx(nme,{...r,ref:e,present:s})})});C5.displayName=MA;var nme=b.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...s}=t,o=CA(MA,n),[a,l]=b.useState(r),c=b.useRef(null),u=Ht(e,c),d=b.useRef(0),h=d.current,p=b.useRef(0),x=p.current,w=o.open||a,y=b.useRef(w),v=b.useRef(void 0);return b.useEffect(()=>{const S=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(S)},[]),Pr(()=>{const S=c.current;if(S){v.current=v.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";const E=S.getBoundingClientRect();d.current=E.height,p.current=E.width,y.current||(S.style.transitionDuration=v.current.transitionDuration,S.style.animationName=v.current.animationName),l(r)}},[o.open,r]),m.jsx(xt.div,{"data-state":TA(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!w,...s,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...t.style},children:w&&i})});function TA(t){return t?"open":"closed"}var rme=S5;const AA=rme,RA=E5,kA=C5,ime=30*60*1e3,sme=500,vI=2e3,ome=({enabled:t,listTitle:e,existingItems:n})=>{const[r,i]=b.useState([]),[s,o]=b.useState(0),[a,l]=b.useState(null),[c,u]=b.useState(!1),[d,h]=b.useState(null),p=b.useRef(null),x=b.useRef(0),{token:w}=ro();b.useEffect(()=>{t||l(null)},[t]);const y=b.useCallback(()=>{try{const R=`itemize-suggestions-${e}-${n.join(",")}`,P=localStorage.getItem(R);if(P){const{suggestions:M,timestamp:I}=JSON.parse(P);if(Date.now()-I<ime&&M&&M.length>0)return M}}catch(R){console.warn("Failed to read suggestion cache:",R)}return null},[e,n]),v=b.useCallback(R=>{try{if(!e||!R.length)return;const P=`itemize-suggestions-${e}-${n.join(",")}`,M={suggestions:R,timestamp:Date.now()};localStorage.setItem(P,JSON.stringify(M))}catch(P){console.warn("Failed to cache suggestions:",P)}},[e,n]),S=b.useCallback(async()=>{var I;if(p.current&&(clearTimeout(p.current),p.current=null),!t||!e||n.length===0){i([]),l(null);return}if(!w){h("You must be logged in to use AI suggestions");return}const R=y();if(R){console.log("Using cached suggestions for:",e),i(R),l(R[0]||null),u(!1);return}const M=Date.now()-x.current;if(M<vI){u(!0);const z=vI-M;console.log(`Throttling API call for ${z}ms`),p.current=setTimeout(()=>{S()},z);return}try{u(!0),h(null),x.current=Date.now();const z=xm(),H=await Nn.post(`${z}/api/suggestions`,{listTitle:e,existingItems:n.filter(j=>j.trim()!=="")},{withCredentials:!0,headers:{Authorization:`Bearer ${w}`}});if(H.data&&H.data.suggestions&&H.data.suggestions.length>0){const j=H.data.suggestions;i(j),l(j[0]),o(0),v(j)}else i([]),l(null)}catch(z){console.error("Failed to fetch AI suggestions:",z),((I=z==null?void 0:z.response)==null?void 0:I.status)===401?h("Session expired. Please log in again to use AI suggestions."):h(z instanceof Error?z.message:"Failed to get suggestions"),i([]),l(null)}finally{u(!1)}},[t,e,n,w,y,v]),E=b.useCallback(()=>{p.current&&clearTimeout(p.current),u(!0),p.current=setTimeout(()=>{S()},sme)},[S]),C=b.useCallback(R=>{if(!t||!R.trim())return null;if(r.length>0){const P=R.toLowerCase().trim(),M=r.filter(z=>z.toLowerCase().startsWith(P)&&z.toLowerCase()!==P);if(M.length>0)return console.log("Using API suggestion (prefix match):",M[0]),M[0];const I=r.filter(z=>z.toLowerCase().includes(P)&&z.toLowerCase()!==P);if(I.length>0)return console.log("Using API suggestion (contains match):",I[0]),I[0]}return null},[t,r]),T=b.useCallback(R=>{const P=r.filter(M=>M.toLowerCase()!==R.toLowerCase());return P.length>0?l(P[0]):l(null),R},[r]),A=b.useCallback(()=>{if(r.length===0)return null;const R=(s+1)%r.length;o(R);const P=r[R];return l(P),P},[r,s]),k=b.useCallback(()=>r.length>0?r[0]:null,[r]);return b.useEffect(()=>{if(t&&!a){const R=k();R?l(R):E()}},[t,a,k,E]),{currentSuggestion:a,suggestions:r,isLoading:c,error:d,debouncedFetchSuggestions:E,fetchSuggestions:S,getSuggestionForInput:C,acceptSuggestion:T,getNextSuggestion:A,generateContextSuggestion:k}},ame=({list:t,onUpdate:e,onDelete:n,isCollapsed:r,onToggleCollapsed:i,existingCategories:s=[],addCategory:o,updateCategory:a})=>{const{aiEnabled:l,setAiEnabled:c}=JT(),u=t.items.map(Ae=>Ae.text),{currentSuggestion:d,suggestions:h,isLoading:p,debouncedFetchSuggestions:x,getNextSuggestion:w,getSuggestionForInput:y}=ome({enabled:l,listTitle:t.title,existingItems:u});b.useEffect(()=>{l&&!d&&x()},[l,d,x]);const{toast:v}=to(),[S,E]=b.useState(!0),C=r!==void 0?!r:S,T=i||E,[A,k]=b.useState(!1),[R,P]=b.useState(t.title),[M,I]=b.useState(!1),[z,H]=b.useState(!1),[j,J]=b.useState(""),[q,Q]=b.useState(""),[O,F]=b.useState(null),[D,ee]=b.useState(""),[W,B]=b.useState(!1),K=b.useRef(null),ie=b.useRef(null);b.useEffect(()=>{P(t.title)},[t.title]);const oe=()=>{R.trim()!==""?(e({...t,title:R.trim()}),k(!1)):v({title:"Title cannot be empty",description:"Please enter a valid list title",variant:"destructive"})},Z=()=>{n(t.id)},pe=async Ae=>{if(Ae==="__custom__"){H(!0);return}if(Ae.trim()&&!s.find(Pe=>Pe.name===Ae)&&o)try{await o({name:Ae.trim(),color_value:"#3B82F6"})}catch(Pe){console.error("Failed to create category in database:",Pe)}e({...t,type:Ae}),I(!1),H(!1)},ye=async()=>{if(j.trim()!=="")try{o&&await o({name:j.trim(),color_value:"#3B82F6"}),e({...t,type:j.trim()}),I(!1),H(!1),J("")}catch(Ae){console.error("Failed to create category:",Ae),v({title:"Error creating category",description:"Could not create the category. Please try again.",variant:"destructive"})}else v({title:"Category cannot be empty",description:"Please enter a valid category name",variant:"destructive"})},ge=async(Ae,Pe)=>{try{await a(Ae,{color_value:Pe})}catch(ot){console.error("Failed to update category color:",ot),v({title:"Error",description:"Could not update category color.",variant:"destructive"})}},je=()=>{if(q.trim()!==""){const Ae={id:crypto.randomUUID(),text:q.trim(),completed:!1};e({...t,items:[...t.items,Ae]}),Q("")}},We=Ae=>{const Pe=t.items.map(ot=>ot.id===Ae?{...ot,completed:!ot.completed}:ot);e({...t,items:Pe})},it=Ae=>{const Pe=t.items.filter(ot=>ot.id!==Ae);e({...t,items:Pe})},te=Ae=>{F(Ae.id),ee(Ae.text)},pt=()=>{if(O&&D.trim()!==""){const Ae=t.items.map(Pe=>Pe.id===O?{...Pe,text:D.trim()}:Pe);e({...t,items:Ae}),F(null),ee("")}else D.trim()===""&&v({title:"Item text cannot be empty",description:"Please enter valid text for the item",variant:"destructive"})},Be=b.useMemo(()=>!l||!q?null:y(q),[l,q,y]);return{isCollapsibleOpen:C,setIsCollapsibleOpen:T,isEditing:A,setIsEditing:k,editTitle:R,setEditTitle:P,handleEditTitle:oe,handleDeleteList:Z,handleSaveListColor:async Ae=>{B(!0);try{await new Promise(Pe=>setTimeout(Pe,1e3)),e({...t,color_value:Ae})}catch(Pe){throw console.error("Failed to save list color:",Pe),Pe}finally{B(!1)}},isSavingColor:W,isEditingCategory:M,setIsEditingCategory:I,showNewCategoryInput:z,setShowNewCategoryInput:H,newCategory:j,setNewCategory:J,handleEditCategory:pe,handleAddCustomCategory:ye,handleUpdateCategoryColor:ge,newItemText:q,setNewItemText:Q,editingItemId:O,editingItemText:D,setEditingItemText:ee,handleAddItem:je,toggleItemCompleted:We,removeItem:it,startEditingItem:te,handleEditItem:pt,suggestions:h,isLoadingSuggestions:p,aiEnabled:l,setAiEnabled:c,currentSuggestion:d,currentInputSuggestion:Be,handleGetSuggestion:()=>{if(console.log("Getting next suggestion"),!l)c(!0),setTimeout(()=>x(),100);else if(d){const Ae={id:crypto.randomUUID(),text:d,completed:!1};e({...t,items:[...t.items,Ae]}),w()}else x()},handleAcceptSuggestion:()=>{Be?Q(Be):d&&Q(d)},titleEditRef:K,newItemInputRef:ie}},lme=["#EF4444","#F97316","#EAB308","#22C55E","#10B981","#14B8A6","#06B6D4","#3B82F6","#6366F1","#8B5CF6","#A855F7","#EC4899","#F87171","#FBBF24","#4ADE80","#60A5FA","#C084FC","#78716C","#D1D5DB","#9CA3AF","#6B7280","#4B5563","#374151","#1F2937"],ml=({color:t,onChange:e,onSave:n,children:r,className:i})=>{const[s,o]=Me.useState(!1),a=l=>{e(l),n&&n(l),o(!1)};return m.jsxs(zj,{open:s,onOpenChange:o,children:[m.jsx(jj,{asChild:!0,className:i,children:r}),m.jsx(yA,{className:"w-auto p-2 shadow-xl grid grid-cols-6 gap-1",align:"start",children:lme.map(l=>m.jsx("button",{title:l,onClick:()=>a(l),className:`w-6 h-6 rounded-full border-2 transition-all
                        ${t===l?"ring-2 ring-offset-1 ring-primary":"hover:opacity-80"}
                        focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-primary`,style:{backgroundColor:l,borderColor:l===t?"var(--primary)":l}},l))})]})},cme=({title:t,listColor:e,isEditing:n,editTitle:r,isCollapsibleOpen:i,setEditTitle:s,setIsEditing:o,handleEditTitle:a,handleDeleteList:l,titleEditRef:c,onColorSave:u,isSavingColor:d})=>{const{toast:h}=to(),[p,x]=Me.useState(e||"#808080");Me.useEffect(()=>{x(e||"#808080")},[e]);const w=p;return m.jsx(ta,{className:"pb-2",children:m.jsx("div",{className:"flex justify-between items-center",children:n?m.jsxs("div",{className:"flex gap-1 w-full",children:[m.jsx(Yn,{ref:c,value:r,onChange:y=>s(y.target.value),className:"h-8",autoFocus:!0,onKeyDown:y=>{y.key==="Enter"&&a()}}),m.jsx(nt,{size:"sm",variant:"ghost",onClick:a,className:"h-8 w-8 p-0",children:m.jsx(eo,{className:"h-4 w-4"})}),m.jsx(nt,{size:"sm",variant:"ghost",onClick:()=>o(!1),className:"h-8 w-8 p-0",children:m.jsx(Fo,{className:"h-4 w-4"})})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(ml,{color:w,onChange:y=>{x(y)},onSave:async y=>{if(y!==(e||"#808080"))try{await u(y)}catch{h({title:"Error",description:"Could not save color. Reverting preview.",variant:"destructive"}),x(e||"#808080")}},children:m.jsxs(nt,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0 rounded-full flex items-center justify-center relative","aria-label":"Change list color",disabled:d,children:[m.jsx("span",{className:"inline-block w-3 h-3 rounded-full border border-gray-400 transition-colors duration-150",style:{backgroundColor:w}}),d&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/50 rounded-full",children:m.jsx("div",{className:"h-2 w-2 animate-spin rounded-full border-2 border-solid border-current border-r-transparent"})})]})}),m.jsx(ag,{className:"h-4 w-4 text-slate-500"}),m.jsx(na,{className:"text-lg font-medium cursor-pointer",style:{fontFamily:'"Raleway", sans-serif'},onClick:()=>o(!0),children:t})]}),m.jsxs("div",{className:"flex",children:[m.jsx(RA,{asChild:!0,children:m.jsx(nt,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:m.jsx(Ja,{className:_t("h-4 w-4 transition-transform",i?"":"transform rotate-180")})})}),m.jsxs(hw,{children:[m.jsx(pw,{asChild:!0,children:m.jsx(nt,{variant:"ghost",className:"h-8 w-8 p-0",children:m.jsx(RT,{className:"h-4 w-4"})})}),m.jsxs(vg,{align:"end",children:[m.jsxs(fa,{onClick:()=>o(!0),style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(og,{className:"mr-2 h-4 w-4"}),"Edit Title"]}),m.jsxs(fa,{onClick:l,className:"text-red-600",style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(q0,{className:"mr-2 h-4 w-4"}),"Delete List"]})]})]})]})]})})})};function Jx(t,[e,n]){return Math.min(n,Math.max(e,t))}var ume=[" ","Enter","ArrowUp","ArrowDown"],dme=[" ","Enter"],sd="Select",[_w,Ew,fme]=rg(sd),[Dh,ONe]=es(sd,[fme,Bc]),Cw=Bc(),[hme,Vc]=Dh(sd),[pme,mme]=Dh(sd),M5=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:p,form:x}=t,w=Cw(e),[y,v]=b.useState(null),[S,E]=b.useState(null),[C,T]=b.useState(!1),A=dg(c),[k,R]=Cs({prop:r,defaultProp:i??!1,onChange:s,caller:sd}),[P,M]=Cs({prop:o,defaultProp:a,onChange:l,caller:sd}),I=b.useRef(null),z=y?x||!!y.closest("form"):!0,[H,j]=b.useState(new Set),J=Array.from(H).map(q=>q.props.value).join(";");return m.jsx(VT,{...w,children:m.jsxs(hme,{required:p,scope:e,trigger:y,onTriggerChange:v,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:T,contentId:Xr(),value:P,onValueChange:M,open:k,onOpenChange:R,dir:A,triggerPointerDownPosRef:I,disabled:h,children:[m.jsx(_w.Provider,{scope:e,children:m.jsx(pme,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(q=>{j(Q=>new Set(Q).add(q))},[]),onNativeOptionRemove:b.useCallback(q=>{j(Q=>{const O=new Set(Q);return O.delete(q),O})},[]),children:n})}),z?m.jsxs(Y5,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:P,onChange:q=>M(q.target.value),disabled:h,form:x,children:[P===void 0?m.jsx("option",{value:""}):null,Array.from(H)]},J):null]})})};M5.displayName=sd;var T5="SelectTrigger",A5=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=Cw(n),o=Vc(T5,n),a=o.disabled||r,l=Ht(e,o.onTriggerChange),c=Ew(n),u=b.useRef("touch"),[d,h,p]=Q5(w=>{const y=c().filter(E=>!E.disabled),v=y.find(E=>E.value===o.value),S=Z5(y,w,v);S!==void 0&&o.onValueChange(S.value)}),x=w=>{a||(o.onOpenChange(!0),p()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return m.jsx(ug,{asChild:!0,...s,children:m.jsx(xt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":J5(o.value)?"":void 0,...i,ref:l,onClick:rt(i.onClick,w=>{w.currentTarget.focus(),u.current!=="mouse"&&x(w)}),onPointerDown:rt(i.onPointerDown,w=>{u.current=w.pointerType;const y=w.target;y.hasPointerCapture(w.pointerId)&&y.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(x(w),w.preventDefault())}),onKeyDown:rt(i.onKeyDown,w=>{const y=d.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&h(w.key),!(y&&w.key===" ")&&ume.includes(w.key)&&(x(),w.preventDefault())})})})});A5.displayName=T5;var R5="SelectValue",k5=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...a}=t,l=Vc(R5,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=Ht(e,l.onValueNodeChange);return Pr(()=>{c(u)},[c,u]),m.jsx(xt.span,{...a,ref:d,style:{pointerEvents:"none"},children:J5(l.value)?m.jsx(m.Fragment,{children:o}):s})});k5.displayName=R5;var gme="SelectIcon",N5=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return m.jsx(xt.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});N5.displayName=gme;var vme="SelectPortal",P5=t=>m.jsx(bh,{asChild:!0,...t});P5.displayName=vme;var od="SelectContent",D5=b.forwardRef((t,e)=>{const n=Vc(od,t.__scopeSelect),[r,i]=b.useState();if(Pr(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?qs.createPortal(m.jsx(I5,{scope:t.__scopeSelect,children:m.jsx(_w.Slot,{scope:t.__scopeSelect,children:m.jsx("div",{children:t.children})})}),s):null}return m.jsx(L5,{...t,ref:e})});D5.displayName=od;var mo=10,[I5,$c]=Dh(od),yme="SelectContentImpl",xme=Rc("SelectContent.RemoveScroll"),L5=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:x,hideWhenDetached:w,avoidCollisions:y,...v}=t,S=Vc(od,n),[E,C]=b.useState(null),[T,A]=b.useState(null),k=Ht(e,Z=>C(Z)),[R,P]=b.useState(null),[M,I]=b.useState(null),z=Ew(n),[H,j]=b.useState(!1),J=b.useRef(!1);b.useEffect(()=>{if(E)return lw(E)},[E]),ow();const q=b.useCallback(Z=>{const[pe,...ye]=z().map(We=>We.ref.current),[ge]=ye.slice(-1),je=document.activeElement;for(const We of Z)if(We===je||(We==null||We.scrollIntoView({block:"nearest"}),We===pe&&T&&(T.scrollTop=0),We===ge&&T&&(T.scrollTop=T.scrollHeight),We==null||We.focus(),document.activeElement!==je))return},[z,T]),Q=b.useCallback(()=>q([R,E]),[q,R,E]);b.useEffect(()=>{H&&Q()},[H,Q]);const{onOpenChange:O,triggerPointerDownPosRef:F}=S;b.useEffect(()=>{if(E){let Z={x:0,y:0};const pe=ge=>{var je,We;Z={x:Math.abs(Math.round(ge.pageX)-(((je=F.current)==null?void 0:je.x)??0)),y:Math.abs(Math.round(ge.pageY)-(((We=F.current)==null?void 0:We.y)??0))}},ye=ge=>{Z.x<=10&&Z.y<=10?ge.preventDefault():E.contains(ge.target)||O(!1),document.removeEventListener("pointermove",pe),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",pe),document.addEventListener("pointerup",ye,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",ye,{capture:!0})}}},[E,O,F]),b.useEffect(()=>{const Z=()=>O(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[O]);const[D,ee]=Q5(Z=>{const pe=z().filter(je=>!je.disabled),ye=pe.find(je=>je.ref.current===document.activeElement),ge=Z5(pe,Z,ye);ge&&setTimeout(()=>ge.ref.current.focus())}),W=b.useCallback((Z,pe,ye)=>{const ge=!J.current&&!ye;(S.value!==void 0&&S.value===pe||ge)&&(P(Z),ge&&(J.current=!0))},[S.value]),B=b.useCallback(()=>E==null?void 0:E.focus(),[E]),K=b.useCallback((Z,pe,ye)=>{const ge=!J.current&&!ye;(S.value!==void 0&&S.value===pe||ge)&&I(Z)},[S.value]),ie=r==="popper"?kC:O5,oe=ie===kC?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:x,hideWhenDetached:w,avoidCollisions:y}:{};return m.jsx(I5,{scope:n,content:E,viewport:T,onViewportChange:A,itemRefCallback:W,selectedItem:R,onItemLeave:B,itemTextRefCallback:K,focusSelectedItem:Q,selectedItemText:M,position:r,isPositioned:H,searchRef:D,children:m.jsx(pg,{as:xme,allowPinchZoom:!0,children:m.jsx(fg,{asChild:!0,trapped:S.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:rt(i,Z=>{var pe;(pe=S.trigger)==null||pe.focus({preventScroll:!0}),Z.preventDefault()}),children:m.jsx(pd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:m.jsx(ie,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Z=>Z.preventDefault(),...v,...oe,onPlaced:()=>j(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:rt(v.onKeyDown,Z=>{const pe=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!pe&&Z.key.length===1&&ee(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let ge=z().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(ge=ge.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const je=Z.target,We=ge.indexOf(je);ge=ge.slice(We+1)}setTimeout(()=>q(ge)),Z.preventDefault()}})})})})})})});L5.displayName=yme;var wme="SelectItemAlignedPosition",O5=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=Vc(od,n),o=$c(od,n),[a,l]=b.useState(null),[c,u]=b.useState(null),d=Ht(e,k=>u(k)),h=Ew(n),p=b.useRef(!1),x=b.useRef(!0),{viewport:w,selectedItem:y,selectedItemText:v,focusSelectedItem:S}=o,E=b.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&w&&y&&v){const k=s.trigger.getBoundingClientRect(),R=c.getBoundingClientRect(),P=s.valueNode.getBoundingClientRect(),M=v.getBoundingClientRect();if(s.dir!=="rtl"){const je=M.left-R.left,We=P.left-je,it=k.left-We,te=k.width+it,pt=Math.max(te,R.width),Be=window.innerWidth-mo,ut=Jx(We,[mo,Math.max(mo,Be-pt)]);a.style.minWidth=te+"px",a.style.left=ut+"px"}else{const je=R.right-M.right,We=window.innerWidth-P.right-je,it=window.innerWidth-k.right-We,te=k.width+it,pt=Math.max(te,R.width),Be=window.innerWidth-mo,ut=Jx(We,[mo,Math.max(mo,Be-pt)]);a.style.minWidth=te+"px",a.style.right=ut+"px"}const I=h(),z=window.innerHeight-mo*2,H=w.scrollHeight,j=window.getComputedStyle(c),J=parseInt(j.borderTopWidth,10),q=parseInt(j.paddingTop,10),Q=parseInt(j.borderBottomWidth,10),O=parseInt(j.paddingBottom,10),F=J+q+H+O+Q,D=Math.min(y.offsetHeight*5,F),ee=window.getComputedStyle(w),W=parseInt(ee.paddingTop,10),B=parseInt(ee.paddingBottom,10),K=k.top+k.height/2-mo,ie=z-K,oe=y.offsetHeight/2,Z=y.offsetTop+oe,pe=J+q+Z,ye=F-pe;if(pe<=K){const je=I.length>0&&y===I[I.length-1].ref.current;a.style.bottom="0px";const We=c.clientHeight-w.offsetTop-w.offsetHeight,it=Math.max(ie,oe+(je?B:0)+We+Q),te=pe+it;a.style.height=te+"px"}else{const je=I.length>0&&y===I[0].ref.current;a.style.top="0px";const it=Math.max(K,J+w.offsetTop+(je?W:0)+oe)+ye;a.style.height=it+"px",w.scrollTop=pe-K+w.offsetTop}a.style.margin=`${mo}px 0`,a.style.minHeight=D+"px",a.style.maxHeight=z+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[h,s.trigger,s.valueNode,a,c,w,y,v,s.dir,r]);Pr(()=>E(),[E]);const[C,T]=b.useState();Pr(()=>{c&&T(window.getComputedStyle(c).zIndex)},[c]);const A=b.useCallback(k=>{k&&x.current===!0&&(E(),S==null||S(),x.current=!1)},[E,S]);return m.jsx(Sme,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:A,children:m.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:m.jsx(xt.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});O5.displayName=wme;var bme="SelectPopperPosition",kC=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=mo,...s}=t,o=Cw(n);return m.jsx(Q0,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});kC.displayName=bme;var[Sme,NA]=Dh(od,{}),NC="SelectViewport",F5=b.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=$c(NC,n),o=NA(NC,n),a=Ht(e,s.onViewportChange),l=b.useRef(0);return m.jsxs(m.Fragment,{children:[m.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),m.jsx(_w.Slot,{scope:n,children:m.jsx(xt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:rt(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const x=window.innerHeight-mo*2,w=parseFloat(d.style.minHeight),y=parseFloat(d.style.height),v=Math.max(w,y);if(v<x){const S=v+p,E=Math.min(x,S),C=S-E;d.style.height=E+"px",d.style.bottom==="0px"&&(u.scrollTop=C>0?C:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});F5.displayName=NC;var U5="SelectGroup",[_me,Eme]=Dh(U5),Cme=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Xr();return m.jsx(_me,{scope:n,id:i,children:m.jsx(xt.div,{role:"group","aria-labelledby":i,...r,ref:e})})});Cme.displayName=U5;var B5="SelectLabel",z5=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Eme(B5,n);return m.jsx(xt.div,{id:i.id,...r,ref:e})});z5.displayName=B5;var Qx="SelectItem",[Mme,j5]=Dh(Qx),H5=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,a=Vc(Qx,n),l=$c(Qx,n),c=a.value===r,[u,d]=b.useState(s??""),[h,p]=b.useState(!1),x=Ht(e,S=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,S,r,i)}),w=Xr(),y=b.useRef("touch"),v=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return m.jsx(Mme,{scope:n,value:r,disabled:i,textId:w,isSelected:c,onItemTextChange:b.useCallback(S=>{d(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:m.jsx(_w.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:m.jsx(xt.div,{role:"option","aria-labelledby":w,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:x,onFocus:rt(o.onFocus,()=>p(!0)),onBlur:rt(o.onBlur,()=>p(!1)),onClick:rt(o.onClick,()=>{y.current!=="mouse"&&v()}),onPointerUp:rt(o.onPointerUp,()=>{y.current==="mouse"&&v()}),onPointerDown:rt(o.onPointerDown,S=>{y.current=S.pointerType}),onPointerMove:rt(o.onPointerMove,S=>{var E;y.current=S.pointerType,i?(E=l.onItemLeave)==null||E.call(l):y.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:rt(o.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:rt(o.onKeyDown,S=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&S.key===" "||(dme.includes(S.key)&&v(),S.key===" "&&S.preventDefault())})})})})});H5.displayName=Qx;var Np="SelectItemText",V5=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=Vc(Np,n),a=$c(Np,n),l=j5(Np,n),c=mme(Np,n),[u,d]=b.useState(null),h=Ht(e,v=>d(v),l.onItemTextChange,v=>{var S;return(S=a.itemTextRefCallback)==null?void 0:S.call(a,v,l.value,l.disabled)}),p=u==null?void 0:u.textContent,x=b.useMemo(()=>m.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:w,onNativeOptionRemove:y}=c;return Pr(()=>(w(x),()=>y(x)),[w,y,x]),m.jsxs(m.Fragment,{children:[m.jsx(xt.span,{id:l.textId,...s,ref:h}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?qs.createPortal(s.children,o.valueNode):null]})});V5.displayName=Np;var $5="SelectItemIndicator",W5=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return j5($5,n).isSelected?m.jsx(xt.span,{"aria-hidden":!0,...r,ref:e}):null});W5.displayName=$5;var PC="SelectScrollUpButton",G5=b.forwardRef((t,e)=>{const n=$c(PC,t.__scopeSelect),r=NA(PC,t.__scopeSelect),[i,s]=b.useState(!1),o=Ht(e,r.onScrollButtonChange);return Pr(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?m.jsx(q5,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});G5.displayName=PC;var DC="SelectScrollDownButton",X5=b.forwardRef((t,e)=>{const n=$c(DC,t.__scopeSelect),r=NA(DC,t.__scopeSelect),[i,s]=b.useState(!1),o=Ht(e,r.onScrollButtonChange);return Pr(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?m.jsx(q5,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});X5.displayName=DC;var q5=b.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=$c("SelectScrollButton",n),o=b.useRef(null),a=Ew(n),l=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>l(),[l]),Pr(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),m.jsx(xt.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:rt(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:rt(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:rt(i.onPointerLeave,()=>{l()})})}),Tme="SelectSeparator",K5=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return m.jsx(xt.div,{"aria-hidden":!0,...r,ref:e})});K5.displayName=Tme;var IC="SelectArrow",Ame=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Cw(n),s=Vc(IC,n),o=$c(IC,n);return s.open&&o.position==="popper"?m.jsx(Z0,{...i,...r,ref:e}):null});Ame.displayName=IC;var Rme="SelectBubbleInput",Y5=b.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=b.useRef(null),s=Ht(r,i),o=QT(e);return b.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),m.jsx(xt.select,{...n,style:{...YU,...n.style},ref:s,defaultValue:e})});Y5.displayName=Rme;function J5(t){return t===""||t===void 0}function Q5(t){const e=Zi(t),n=b.useRef(""),r=b.useRef(0),i=b.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=b.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function Z5(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=kme(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function kme(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Nme=M5,eH=A5,Pme=k5,Dme=N5,Ime=P5,tH=D5,Lme=F5,nH=z5,rH=H5,Ome=V5,Fme=W5,iH=G5,sH=X5,oH=K5;const Wc=Nme,Gc=Pme,gl=b.forwardRef(({className:t,children:e,...n},r)=>m.jsxs(eH,{ref:r,className:_t("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,m.jsx(Dme,{asChild:!0,children:m.jsx(Ja,{className:"h-4 w-4 opacity-50"})})]}));gl.displayName=eH.displayName;const aH=b.forwardRef(({className:t,...e},n)=>m.jsx(iH,{ref:n,className:_t("flex cursor-default items-center justify-center py-1",t),...e,children:m.jsx(hee,{className:"h-4 w-4"})}));aH.displayName=iH.displayName;const lH=b.forwardRef(({className:t,...e},n)=>m.jsx(sH,{ref:n,className:_t("flex cursor-default items-center justify-center py-1",t),...e,children:m.jsx(Ja,{className:"h-4 w-4"})}));lH.displayName=sH.displayName;const vl=b.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>m.jsx(Ime,{children:m.jsxs(tH,{ref:i,className:_t("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[m.jsx(aH,{}),m.jsx(Lme,{className:_t("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),m.jsx(lH,{})]})}));vl.displayName=tH.displayName;const Ume=b.forwardRef(({className:t,...e},n)=>m.jsx(nH,{ref:n,className:_t("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Ume.displayName=nH.displayName;const ar=b.forwardRef(({className:t,children:e,...n},r)=>m.jsxs(rH,{ref:r,className:_t("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[m.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:m.jsx(Fme,{children:m.jsx(eo,{className:"h-4 w-4"})})}),m.jsx(Ome,{children:e})]}));ar.displayName=rH.displayName;const Bme=b.forwardRef(({className:t,...e},n)=>m.jsx(oH,{ref:n,className:_t("-mx-1 my-1 h-px bg-muted",t),...e}));Bme.displayName=oH.displayName;const zme=sg("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function PA({className:t,variant:e,...n}){return m.jsx("div",{className:_t(zme({variant:e}),t),...n})}const jme=({currentCategory:t,categoryColor:e,itemColor:n,existingCategories:r,isEditingCategory:i,showNewCategoryInput:s,newCategory:o,setNewCategory:a,setIsEditingCategory:l,setShowNewCategoryInput:c,handleEditCategory:u,handleAddCustomCategory:d,handleUpdateCategoryColor:h})=>{const p=t&&t!==""?t:"General",x=e||n||"#808080",w=()=>"#ffffff";return m.jsx("div",{className:"mb-2 px-6 flex items-center gap-2",children:i?m.jsx("div",{className:"mb-2 w-full",children:s?m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(Yn,{value:o,onChange:y=>a(y.target.value),placeholder:"Enter new category",className:"h-8",autoFocus:!0,onKeyDown:y=>{y.key==="Enter"&&d()}}),m.jsx(nt,{size:"sm",variant:"ghost",onClick:d,className:"h-8 w-8 p-0",children:m.jsx(eo,{className:"h-4 w-4"})}),m.jsx(nt,{size:"sm",variant:"ghost",onClick:()=>{c(!1),a("")},className:"h-8 w-8 p-0",children:m.jsx(Fo,{className:"h-4 w-4"})})]}):m.jsxs("div",{className:"flex flex-col space-y-2",children:[m.jsxs(Wc,{onValueChange:u,defaultValue:p,children:[m.jsx(gl,{className:"h-8",style:{fontFamily:'"Raleway", sans-serif'},children:m.jsx(Gc,{placeholder:"Select a category"})}),m.jsxs(vl,{children:[r.map(y=>m.jsx(ar,{value:y.name,style:{fontFamily:'"Raleway", sans-serif'},children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"inline-block w-3 h-3 rounded-full border",style:{backgroundColor:y.color_value}}),y.name]})},y.name)),m.jsx(ar,{value:"__custom__",className:"text-blue-600",style:{fontFamily:'"Raleway", sans-serif'},children:"+ Add new category"})]})]}),p!=="__custom__"&&m.jsx("div",{className:"flex items-center gap-2 ml-2",children:m.jsx(ml,{color:x,onChange:y=>h(p,y),onSave:y=>h(p,y),children:m.jsxs(nt,{variant:"outline",size:"sm",className:"h-8 px-3 flex items-center gap-2",children:[m.jsx("span",{className:"inline-block w-3 h-3 rounded-full border",style:{backgroundColor:x}}),"Category Color"]})})}),m.jsx(nt,{size:"sm",variant:"ghost",className:"self-start",style:{fontFamily:'"Raleway", sans-serif'},onClick:()=>l(!1),children:"Cancel"})]})}):m.jsx(PA,{variant:"outline",className:"cursor-pointer hover:opacity-80 transition-opacity border-none",style:{fontFamily:'"Raleway", sans-serif',backgroundColor:x,color:w()},onClick:()=>l(!0),children:p})})};function Hme(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return b.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const Mw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ih(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function DA(t){return"nodeType"in t}function ns(t){var e,n;return t?Ih(t)?t:DA(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function IA(t){const{Document:e}=ns(t);return t instanceof e}function Mg(t){return Ih(t)?!1:t instanceof ns(t).HTMLElement}function cH(t){return t instanceof ns(t).SVGElement}function Lh(t){return t?Ih(t)?t.document:DA(t)?IA(t)?t:Mg(t)||cH(t)?t.ownerDocument:document:document:document}const va=Mw?b.useLayoutEffect:b.useEffect;function LA(t){const e=b.useRef(t);return va(()=>{e.current=t}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function Vme(){const t=b.useRef(null),e=b.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=b.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Pm(t,e){e===void 0&&(e=[t]);const n=b.useRef(t);return va(()=>{n.current!==t&&(n.current=t)},e),n}function Tg(t,e){const n=b.useRef();return b.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Zx(t){const e=LA(t),n=b.useRef(null),r=b.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function LC(t){const e=b.useRef();return b.useEffect(()=>{e.current=t},[t]),e.current}let P1={};function Ag(t,e){return b.useMemo(()=>{if(e)return e;const n=P1[t]==null?0:P1[t]+1;return P1[t]=n,t+"-"+n},[t,e])}function uH(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const a=Object.entries(o);for(const[l,c]of a){const u=s[l];u!=null&&(s[l]=u+t*c)}return s},{...e})}}const Lf=uH(1),Dm=uH(-1);function $me(t){return"clientX"in t&&"clientY"in t}function OA(t){if(!t)return!1;const{KeyboardEvent:e}=ns(t.target);return e&&t instanceof e}function Wme(t){if(!t)return!1;const{TouchEvent:e}=ns(t.target);return e&&t instanceof e}function OC(t){if(Wme(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return $me(t)?{x:t.clientX,y:t.clientY}:null}const Im=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Im.Translate.toString(t),Im.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),yI="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Gme(t){return t.matches(yI)?t:t.querySelector(yI)}const Xme={display:"none"};function qme(t){let{id:e,value:n}=t;return Me.createElement("div",{id:e,style:Xme},n)}function Kme(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Me.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function Yme(){const[t,e]=b.useState("");return{announce:b.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const dH=b.createContext(null);function Jme(t){const e=b.useContext(dH);b.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function Qme(){const[t]=b.useState(()=>new Set),e=b.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[b.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var a;return(a=o[i])==null?void 0:a.call(o,s)})},[t]),e]}const Zme={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ege={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function tge(t){let{announcements:e=ege,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=Zme}=t;const{announce:s,announcement:o}=Yme(),a=Ag("DndLiveRegion"),[l,c]=b.useState(!1);if(b.useEffect(()=>{c(!0)},[]),Jme(b.useMemo(()=>({onDragStart(d){let{active:h}=d;s(e.onDragStart({active:h}))},onDragMove(d){let{active:h,over:p}=d;e.onDragMove&&s(e.onDragMove({active:h,over:p}))},onDragOver(d){let{active:h,over:p}=d;s(e.onDragOver({active:h,over:p}))},onDragEnd(d){let{active:h,over:p}=d;s(e.onDragEnd({active:h,over:p}))},onDragCancel(d){let{active:h,over:p}=d;s(e.onDragCancel({active:h,over:p}))}}),[s,e])),!l)return null;const u=Me.createElement(Me.Fragment,null,Me.createElement(qme,{id:r,value:i.draggable}),Me.createElement(Kme,{id:a,announcement:o}));return n?qs.createPortal(u,n):u}var yr;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(yr||(yr={}));function e0(){}function xI(t,e){return b.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function nge(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return b.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Io=Object.freeze({x:0,y:0});function fH(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function hH(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function rge(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function wI(t){let{left:e,top:n,height:r,width:i}=t;return[{x:e,y:n},{x:e+i,y:n},{x:e,y:n+r},{x:e+i,y:n+r}]}function pH(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function bI(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const ige=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=bI(e,e.left,e.top),s=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const c=fH(bI(l),i);s.push({id:a,data:{droppableContainer:o,value:c}})}}return s.sort(hH)},sge=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=wI(e),s=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const c=wI(l),u=i.reduce((h,p,x)=>h+fH(c[x],p),0),d=Number((u/4).toFixed(4));s.push({id:a,data:{droppableContainer:o,value:d}})}}return s.sort(hH)};function oge(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,a=s-n;if(r<i&&n<s){const l=e.width*e.height,c=t.width*t.height,u=o*a,d=u/(l+c-u);return Number(d.toFixed(4))}return 0}const age=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,a=n.get(o);if(a){const l=oge(a,e);l>0&&i.push({id:o,data:{droppableContainer:s,value:l}})}}return i.sort(rge)};function lge(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function mH(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Io}function cge(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const uge=cge(1);function dge(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function fge(t,e,n){const r=dge(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=t.left-o-(1-i)*parseFloat(n),c=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?t.width/i:t.width,d=s?t.height/s:t.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}const hge={ignoreTransform:!1};function Oh(t,e){e===void 0&&(e=hge);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:u}=ns(t).getComputedStyle(t);c&&(n=fge(n,c,u))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function SI(t){return Oh(t,{ignoreTransform:!0})}function pge(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function mge(t,e){return e===void 0&&(e=ns(t).getComputedStyle(t)),e.position==="fixed"}function gge(t,e){e===void 0&&(e=ns(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function Tw(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(IA(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Mg(i)||cH(i)||n.includes(i))return n;const s=ns(t).getComputedStyle(i);return i!==t&&gge(i,s)&&n.push(i),mge(i,s)?n:r(i.parentNode)}return t?r(t):n}function gH(t){const[e]=Tw(t,1);return e??null}function D1(t){return!Mw||!t?null:Ih(t)?t:DA(t)?IA(t)||t===Lh(t).scrollingElement?window:Mg(t)?t:null:null}function vH(t){return Ih(t)?t.scrollX:t.scrollLeft}function yH(t){return Ih(t)?t.scrollY:t.scrollTop}function FC(t){return{x:vH(t),y:yH(t)}}var Tr;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Tr||(Tr={}));function xH(t){return!Mw||!t?!1:t===document.scrollingElement}function wH(t){const e={x:0,y:0},n=xH(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const vge={x:.2,y:.2};function yge(t,e,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=vge);const{isTop:c,isBottom:u,isLeft:d,isRight:h}=wH(t),p={x:0,y:0},x={x:0,y:0},w={height:e.height*i.y,width:e.width*i.x};return!c&&s<=e.top+w.height?(p.y=Tr.Backward,x.y=r*Math.abs((e.top+w.height-s)/w.height)):!u&&l>=e.bottom-w.height&&(p.y=Tr.Forward,x.y=r*Math.abs((e.bottom-w.height-l)/w.height)),!h&&a>=e.right-w.width?(p.x=Tr.Forward,x.x=r*Math.abs((e.right-w.width-a)/w.width)):!d&&o<=e.left+w.width&&(p.x=Tr.Backward,x.x=r*Math.abs((e.left+w.width-o)/w.width)),{direction:p,speed:x}}function xge(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function bH(t){return t.reduce((e,n)=>Lf(e,FC(n)),Io)}function wge(t){return t.reduce((e,n)=>e+vH(n),0)}function bge(t){return t.reduce((e,n)=>e+yH(n),0)}function Sge(t,e){if(e===void 0&&(e=Oh),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);gH(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const _ge=[["x",["left","right"],wge],["y",["top","bottom"],bge]];class FA{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Tw(n),i=bH(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,a]of _ge)for(const l of o)Object.defineProperty(this,l,{get:()=>{const c=a(r),u=i[s]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Wp{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function Ege(t){const{EventTarget:e}=ns(t);return t instanceof e?t:Lh(t)}function I1(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var zs;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(zs||(zs={}));function _I(t){t.preventDefault()}function Cge(t){t.stopPropagation()}var an;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(an||(an={}));const SH={start:[an.Space,an.Enter],cancel:[an.Esc],end:[an.Space,an.Enter,an.Tab]},Mge=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case an.Right:return{...n,x:n.x+25};case an.Left:return{...n,x:n.x-25};case an.Down:return{...n,y:n.y+25};case an.Up:return{...n,y:n.y-25}}};class UA{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Wp(Lh(n)),this.windowListeners=new Wp(ns(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(zs.Resize,this.handleCancel),this.windowListeners.add(zs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(zs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&Sge(r),n(Io)}handleKeyDown(e){if(OA(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=SH,coordinateGetter:o=Mge,scrollBehavior:a="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:Io;this.referenceCoordinates||(this.referenceCoordinates=u);const d=o(e,{active:n,context:r.current,currentCoordinates:u});if(d){const h=Dm(d,u),p={x:0,y:0},{scrollableAncestors:x}=r.current;for(const w of x){const y=e.code,{isTop:v,isRight:S,isLeft:E,isBottom:C,maxScroll:T,minScroll:A}=wH(w),k=xge(w),R={x:Math.min(y===an.Right?k.right-k.width/2:k.right,Math.max(y===an.Right?k.left:k.left+k.width/2,d.x)),y:Math.min(y===an.Down?k.bottom-k.height/2:k.bottom,Math.max(y===an.Down?k.top:k.top+k.height/2,d.y))},P=y===an.Right&&!S||y===an.Left&&!E,M=y===an.Down&&!C||y===an.Up&&!v;if(P&&R.x!==d.x){const I=w.scrollLeft+h.x,z=y===an.Right&&I<=T.x||y===an.Left&&I>=A.x;if(z&&!h.y){w.scrollTo({left:I,behavior:a});return}z?p.x=w.scrollLeft-I:p.x=y===an.Right?w.scrollLeft-T.x:w.scrollLeft-A.x,p.x&&w.scrollBy({left:-p.x,behavior:a});break}else if(M&&R.y!==d.y){const I=w.scrollTop+h.y,z=y===an.Down&&I<=T.y||y===an.Up&&I>=A.y;if(z&&!h.x){w.scrollTo({top:I,behavior:a});return}z?p.y=w.scrollTop-I:p.y=y===an.Down?w.scrollTop-T.y:w.scrollTop-A.y,p.y&&w.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(e,Lf(Dm(d,this.referenceCoordinates),p))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}UA.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=SH,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function EI(t){return!!(t&&"distance"in t)}function CI(t){return!!(t&&"delay"in t)}class BA{constructor(e,n,r){var i;r===void 0&&(r=Ege(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=Lh(o),this.documentListeners=new Wp(this.document),this.listeners=new Wp(r),this.windowListeners=new Wp(ns(o)),this.initialCoordinates=(i=OC(s))!=null?i:Io,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(zs.Resize,this.handleCancel),this.windowListeners.add(zs.DragStart,_I),this.windowListeners.add(zs.VisibilityChange,this.handleCancel),this.windowListeners.add(zs.ContextMenu,_I),this.documentListeners.add(zs.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(CI(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(EI(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(zs.Click,Cge,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(zs.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;const l=(n=OC(e))!=null?n:Io,c=Dm(i,l);if(!r&&a){if(EI(a)){if(a.tolerance!=null&&I1(c,a.tolerance))return this.handleCancel();if(I1(c,a.distance))return this.handleStart()}if(CI(a)&&I1(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===an.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Tge={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class zA extends BA{constructor(e){const{event:n}=e,r=Lh(n.target);super(e,Tge,r)}}zA.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Age={move:{name:"mousemove"},end:{name:"mouseup"}};var UC;(function(t){t[t.RightClick=2]="RightClick"})(UC||(UC={}));class Rge extends BA{constructor(e){super(e,Age,Lh(e.event.target))}}Rge.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===UC.RightClick?!1:(r==null||r({event:n}),!0)}}];const L1={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class kge extends BA{constructor(e){super(e,L1)}static setup(){return window.addEventListener(L1.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(L1.move.name,e)};function e(){}}}kge.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Gp;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Gp||(Gp={}));var t0;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(t0||(t0={}));function Nge(t){let{acceleration:e,activator:n=Gp.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=t0.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:h}=t;const p=Dge({delta:d,disabled:!s}),[x,w]=Vme(),y=b.useRef({x:0,y:0}),v=b.useRef({x:0,y:0}),S=b.useMemo(()=>{switch(n){case Gp.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Gp.DraggableRect:return i}},[n,i,l]),E=b.useRef(null),C=b.useCallback(()=>{const A=E.current;if(!A)return;const k=y.current.x*v.current.x,R=y.current.y*v.current.y;A.scrollBy(k,R)},[]),T=b.useMemo(()=>a===t0.TreeOrder?[...c].reverse():c,[a,c]);b.useEffect(()=>{if(!s||!c.length||!S){w();return}for(const A of T){if((r==null?void 0:r(A))===!1)continue;const k=c.indexOf(A),R=u[k];if(!R)continue;const{direction:P,speed:M}=yge(A,R,S,e,h);for(const I of["x","y"])p[I][P[I]]||(M[I]=0,P[I]=0);if(M.x>0||M.y>0){w(),E.current=A,x(C,o),y.current=M,v.current=P;return}}y.current={x:0,y:0},v.current={x:0,y:0},w()},[e,C,r,w,s,o,JSON.stringify(S),JSON.stringify(p),x,c,T,u,JSON.stringify(h)])}const Pge={x:{[Tr.Backward]:!1,[Tr.Forward]:!1},y:{[Tr.Backward]:!1,[Tr.Forward]:!1}};function Dge(t){let{delta:e,disabled:n}=t;const r=LC(e);return Tg(i=>{if(n||!r||!i)return Pge;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Tr.Backward]:i.x[Tr.Backward]||s.x===-1,[Tr.Forward]:i.x[Tr.Forward]||s.x===1},y:{[Tr.Backward]:i.y[Tr.Backward]||s.y===-1,[Tr.Forward]:i.y[Tr.Forward]||s.y===1}}},[n,e,r])}function Ige(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Tg(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function Lge(t,e){return b.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var Lm;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Lm||(Lm={}));var BC;(function(t){t.Optimized="optimized"})(BC||(BC={}));const MI=new Map;function Oge(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=b.useState(null),{frequency:a,measure:l,strategy:c}=i,u=b.useRef(t),d=y(),h=Pm(d),p=b.useCallback(function(v){v===void 0&&(v=[]),!h.current&&o(S=>S===null?v:S.concat(v.filter(E=>!S.includes(E))))},[h]),x=b.useRef(null),w=Tg(v=>{if(d&&!n)return MI;if(!v||v===MI||u.current!==t||s!=null){const S=new Map;for(let E of t){if(!E)continue;if(s&&s.length>0&&!s.includes(E.id)&&E.rect.current){S.set(E.id,E.rect.current);continue}const C=E.node.current,T=C?new FA(l(C),C):null;E.rect.current=T,T&&S.set(E.id,T)}return S}return v},[t,s,n,d,l]);return b.useEffect(()=>{u.current=t},[t]),b.useEffect(()=>{d||p()},[n,d]),b.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),b.useEffect(()=>{d||typeof a!="number"||x.current!==null||(x.current=setTimeout(()=>{p(),x.current=null},a))},[a,d,p,...r]),{droppableRects:w,measureDroppableContainers:p,measuringScheduled:s!=null};function y(){switch(c){case Lm.Always:return!1;case Lm.BeforeDragging:return n;default:return!n}}}function _H(t,e){return Tg(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function Fge(t,e){return _H(t,e)}function Uge(t){let{callback:e,disabled:n}=t;const r=LA(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Aw(t){let{callback:e,disabled:n}=t;const r=LA(e),i=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return b.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Bge(t){return new FA(Oh(t),t)}function TI(t,e,n){e===void 0&&(e=Bge);const[r,i]=b.useState(null);function s(){i(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l??n)!=null?c:null}const u=e(t);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const o=Uge({callback(l){if(t)for(const c of l){const{type:u,target:d}=c;if(u==="childList"&&d instanceof HTMLElement&&d.contains(t)){s();break}}}}),a=Aw({callback:s});return va(()=>{s(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function zge(t){const e=_H(t);return mH(t,e)}const AI=[];function jge(t){const e=b.useRef(t),n=Tg(r=>t?r&&r!==AI&&t&&e.current&&t.parentNode===e.current.parentNode?r:Tw(t):AI,[t]);return b.useEffect(()=>{e.current=t},[t]),n}function Hge(t){const[e,n]=b.useState(null),r=b.useRef(t),i=b.useCallback(s=>{const o=D1(s.target);o&&n(a=>a?(a.set(o,FC(o)),new Map(a)):null)},[]);return b.useEffect(()=>{const s=r.current;if(t!==s){o(s);const a=t.map(l=>{const c=D1(l);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,FC(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(s)};function o(a){a.forEach(l=>{const c=D1(l);c==null||c.removeEventListener("scroll",i)})}},[i,t]),b.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>Lf(s,o),Io):bH(t):Io,[t,e])}function RI(t,e){e===void 0&&(e=[]);const n=b.useRef(null);return b.useEffect(()=>{n.current=null},e),b.useEffect(()=>{const r=t!==Io;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Dm(t,n.current):Io}function Vge(t){b.useEffect(()=>{if(!Mw)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function $ge(t,e){return b.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function EH(t){return b.useMemo(()=>t?pge(t):null,[t])}const kI=[];function Wge(t,e){e===void 0&&(e=Oh);const[n]=t,r=EH(n?ns(n):null),[i,s]=b.useState(kI);function o(){s(()=>t.length?t.map(l=>xH(l)?r:new FA(e(l),l)):kI)}const a=Aw({callback:o});return va(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),i}function Gge(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Mg(e)?e:t}function Xge(t){let{measure:e}=t;const[n,r]=b.useState(null),i=b.useCallback(c=>{for(const{target:u}of c)if(Mg(u)){r(d=>{const h=e(u);return d?{...d,width:h.width,height:h.height}:h});break}},[e]),s=Aw({callback:i}),o=b.useCallback(c=>{const u=Gge(c);s==null||s.disconnect(),u&&(s==null||s.observe(u)),r(u?e(u):null)},[e,s]),[a,l]=Zx(o);return b.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const qge=[{sensor:zA,options:{}},{sensor:UA,options:{}}],Kge={current:{}},rx={draggable:{measure:SI},droppable:{measure:SI,strategy:Lm.WhileDragging,frequency:BC.Optimized},dragOverlay:{measure:Oh}};class Xp extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const Yge={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Xp,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:e0},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:rx,measureDroppableContainers:e0,windowRect:null,measuringScheduled:!1},Jge={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:e0,draggableNodes:new Map,over:null,measureDroppableContainers:e0},Rw=b.createContext(Jge),CH=b.createContext(Yge);function Qge(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Xp}}}function Zge(t,e){switch(e.type){case yr.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case yr.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case yr.DragEnd:case yr.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case yr.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new Xp(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case yr.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new Xp(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case yr.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new Xp(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function eve(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=b.useContext(Rw),s=LC(r),o=LC(n==null?void 0:n.id);return b.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!OA(s)||document.activeElement===s.target)return;const a=i.get(o);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const d=Gme(u);if(d){d.focus();break}}})}},[r,e,i,o,s]),null}function tve(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function nve(t){return b.useMemo(()=>({draggable:{...rx.draggable,...t==null?void 0:t.draggable},droppable:{...rx.droppable,...t==null?void 0:t.droppable},dragOverlay:{...rx.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function rve(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=b.useRef(!1),{x:o,y:a}=typeof i=="boolean"?{x:i,y:i}:i;va(()=>{if(!o&&!a||!e){s.current=!1;return}if(s.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const u=n(c),d=mH(u,r);if(o||(d.x=0),a||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const h=gH(c);h&&h.scrollBy({top:d.y,left:d.x})}},[e,o,a,r,n])}const MH=b.createContext({...Io,scaleX:1,scaleY:1});var Gl;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Gl||(Gl={}));const ive=b.memo(function(e){var n,r,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:c,sensors:u=qge,collisionDetection:d=age,measuring:h,modifiers:p,...x}=e;const w=b.useReducer(Zge,void 0,Qge),[y,v]=w,[S,E]=Qme(),[C,T]=b.useState(Gl.Uninitialized),A=C===Gl.Initialized,{draggable:{active:k,nodes:R,translate:P},droppable:{containers:M}}=y,I=k!=null?R.get(k):null,z=b.useRef({initial:null,translated:null}),H=b.useMemo(()=>{var et;return k!=null?{id:k,data:(et=I==null?void 0:I.data)!=null?et:Kge,rect:z}:null},[k,I]),j=b.useRef(null),[J,q]=b.useState(null),[Q,O]=b.useState(null),F=Pm(x,Object.values(x)),D=Ag("DndDescribedBy",o),ee=b.useMemo(()=>M.getEnabled(),[M]),W=nve(h),{droppableRects:B,measureDroppableContainers:K,measuringScheduled:ie}=Oge(ee,{dragging:A,dependencies:[P.x,P.y],config:W.droppable}),oe=Ige(R,k),Z=b.useMemo(()=>Q?OC(Q):null,[Q]),pe=He(),ye=Fge(oe,W.draggable.measure);rve({activeNode:k!=null?R.get(k):null,config:pe.layoutShiftCompensation,initialRect:ye,measure:W.draggable.measure});const ge=TI(oe,W.draggable.measure,ye),je=TI(oe?oe.parentElement:null),We=b.useRef({activatorEvent:null,active:null,activeNode:oe,collisionRect:null,collisions:null,droppableRects:B,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:M,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),it=M.getNodeFor((n=We.current.over)==null?void 0:n.id),te=Xge({measure:W.dragOverlay.measure}),pt=(r=te.nodeRef.current)!=null?r:oe,Be=A?(i=te.rect)!=null?i:ge:null,ut=!!(te.nodeRef.current&&te.rect),Xe=zge(ut?null:ge),wt=EH(pt?ns(pt):null),Ae=jge(A?it??oe:null),Pe=Wge(Ae),ot=tve(p,{transform:{x:P.x-Xe.x,y:P.y-Xe.y,scaleX:1,scaleY:1},activatorEvent:Q,active:H,activeNodeRect:ge,containerNodeRect:je,draggingNodeRect:Be,over:We.current.over,overlayNodeRect:te.rect,scrollableAncestors:Ae,scrollableAncestorRects:Pe,windowRect:wt}),Y=Z?Lf(Z,P):null,L=Hge(Ae),ne=RI(L),X=RI(L,[ge]),se=Lf(ot,ne),ae=Be?uge(Be,ot):null,Ce=H&&ae?d({active:H,collisionRect:ae,droppableRects:B,droppableContainers:ee,pointerCoordinates:Y}):null,Re=pH(Ce,"id"),[ue,Te]=b.useState(null),de=ut?ot:Lf(ot,X),_e=lge(de,(s=ue==null?void 0:ue.rect)!=null?s:null,ge),Qe=b.useRef(null),Ye=b.useCallback((et,De)=>{let{sensor:ke,options:Ie}=De;if(j.current==null)return;const tt=R.get(j.current);if(!tt)return;const ft=et.nativeEvent,Tt=new ke({active:j.current,activeNode:tt,event:ft,options:Ie,context:We,onAbort(qt){if(!R.get(qt))return;const{onDragAbort:bn}=F.current,hn={id:qt};bn==null||bn(hn),S({type:"onDragAbort",event:hn})},onPending(qt,Dn,bn,hn){if(!R.get(qt))return;const{onDragPending:Oe}=F.current,ze={id:qt,constraint:Dn,initialCoordinates:bn,offset:hn};Oe==null||Oe(ze),S({type:"onDragPending",event:ze})},onStart(qt){const Dn=j.current;if(Dn==null)return;const bn=R.get(Dn);if(!bn)return;const{onDragStart:hn}=F.current,is={activatorEvent:ft,active:{id:Dn,data:bn.data,rect:z}};qs.unstable_batchedUpdates(()=>{hn==null||hn(is),T(Gl.Initializing),v({type:yr.DragStart,initialCoordinates:qt,active:Dn}),S({type:"onDragStart",event:is}),q(Qe.current),O(ft)})},onMove(qt){v({type:yr.DragMove,coordinates:qt})},onEnd:cn(yr.DragEnd),onCancel:cn(yr.DragCancel)});Qe.current=Tt;function cn(qt){return async function(){const{active:bn,collisions:hn,over:is,scrollAdjustedTranslate:Oe}=We.current;let ze=null;if(bn&&Oe){const{cancelDrop:Ve}=F.current;ze={activatorEvent:ft,active:bn,collisions:hn,delta:Oe,over:is},qt===yr.DragEnd&&typeof Ve=="function"&&await Promise.resolve(Ve(ze))&&(qt=yr.DragCancel)}j.current=null,qs.unstable_batchedUpdates(()=>{v({type:qt}),T(Gl.Uninitialized),Te(null),q(null),O(null),Qe.current=null;const Ve=qt===yr.DragEnd?"onDragEnd":"onDragCancel";if(ze){const gt=F.current[Ve];gt==null||gt(ze),S({type:Ve,event:ze})}})}}},[R]),qe=b.useCallback((et,De)=>(ke,Ie)=>{const tt=ke.nativeEvent,ft=R.get(Ie);if(j.current!==null||!ft||tt.dndKit||tt.defaultPrevented)return;const Tt={active:ft};et(ke,De.options,Tt)===!0&&(tt.dndKit={capturedBy:De.sensor},j.current=Ie,Ye(ke,De))},[R,Ye]),mt=Lge(u,qe);Vge(u),va(()=>{ge&&C===Gl.Initializing&&T(Gl.Initialized)},[ge,C]),b.useEffect(()=>{const{onDragMove:et}=F.current,{active:De,activatorEvent:ke,collisions:Ie,over:tt}=We.current;if(!De||!ke)return;const ft={active:De,activatorEvent:ke,collisions:Ie,delta:{x:se.x,y:se.y},over:tt};qs.unstable_batchedUpdates(()=>{et==null||et(ft),S({type:"onDragMove",event:ft})})},[se.x,se.y]),b.useEffect(()=>{const{active:et,activatorEvent:De,collisions:ke,droppableContainers:Ie,scrollAdjustedTranslate:tt}=We.current;if(!et||j.current==null||!De||!tt)return;const{onDragOver:ft}=F.current,Tt=Ie.get(Re),cn=Tt&&Tt.rect.current?{id:Tt.id,rect:Tt.rect.current,data:Tt.data,disabled:Tt.disabled}:null,qt={active:et,activatorEvent:De,collisions:ke,delta:{x:tt.x,y:tt.y},over:cn};qs.unstable_batchedUpdates(()=>{Te(cn),ft==null||ft(qt),S({type:"onDragOver",event:qt})})},[Re]),va(()=>{We.current={activatorEvent:Q,active:H,activeNode:oe,collisionRect:ae,collisions:Ce,droppableRects:B,draggableNodes:R,draggingNode:pt,draggingNodeRect:Be,droppableContainers:M,over:ue,scrollableAncestors:Ae,scrollAdjustedTranslate:se},z.current={initial:Be,translated:ae}},[H,oe,Ce,ae,R,pt,Be,B,M,ue,Ae,se]),Nge({...pe,delta:P,draggingRect:ae,pointerCoordinates:Y,scrollableAncestors:Ae,scrollableAncestorRects:Pe});const ce=b.useMemo(()=>({active:H,activeNode:oe,activeNodeRect:ge,activatorEvent:Q,collisions:Ce,containerNodeRect:je,dragOverlay:te,draggableNodes:R,droppableContainers:M,droppableRects:B,over:ue,measureDroppableContainers:K,scrollableAncestors:Ae,scrollableAncestorRects:Pe,measuringConfiguration:W,measuringScheduled:ie,windowRect:wt}),[H,oe,ge,Q,Ce,je,te,R,M,B,ue,K,Ae,Pe,W,ie,wt]),st=b.useMemo(()=>({activatorEvent:Q,activators:mt,active:H,activeNodeRect:ge,ariaDescribedById:{draggable:D},dispatch:v,draggableNodes:R,over:ue,measureDroppableContainers:K}),[Q,mt,H,ge,v,D,R,ue,K]);return Me.createElement(dH.Provider,{value:E},Me.createElement(Rw.Provider,{value:st},Me.createElement(CH.Provider,{value:ce},Me.createElement(MH.Provider,{value:_e},c)),Me.createElement(eve,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Me.createElement(tge,{...a,hiddenTextDescribedById:D}));function He(){const et=(J==null?void 0:J.autoScrollEnabled)===!1,De=typeof l=="object"?l.enabled===!1:l===!1,ke=A&&!et&&!De;return typeof l=="object"?{...l,enabled:ke}:{enabled:ke}}}),sve=b.createContext(null),NI="button",ove="Draggable";function ave(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=Ag(ove),{activators:o,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:h}=b.useContext(Rw),{role:p=NI,roleDescription:x="draggable",tabIndex:w=0}=i??{},y=(l==null?void 0:l.id)===e,v=b.useContext(y?MH:sve),[S,E]=Zx(),[C,T]=Zx(),A=$ge(o,e),k=Pm(n);va(()=>(d.set(e,{id:e,key:s,node:S,activatorNode:C,data:k}),()=>{const P=d.get(e);P&&P.key===s&&d.delete(e)}),[d,e]);const R=b.useMemo(()=>({role:p,tabIndex:w,"aria-disabled":r,"aria-pressed":y&&p===NI?!0:void 0,"aria-roledescription":x,"aria-describedby":u.draggable}),[r,p,w,y,x,u.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:R,isDragging:y,listeners:r?void 0:A,node:S,over:h,setNodeRef:E,setActivatorNodeRef:T,transform:v}}function lve(){return b.useContext(CH)}const cve="Droppable",uve={timeout:25};function dve(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=Ag(cve),{active:o,dispatch:a,over:l,measureDroppableContainers:c}=b.useContext(Rw),u=b.useRef({disabled:n}),d=b.useRef(!1),h=b.useRef(null),p=b.useRef(null),{disabled:x,updateMeasurementsFor:w,timeout:y}={...uve,...i},v=Pm(w??r),S=b.useCallback(()=>{if(!d.current){d.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{c(Array.isArray(v.current)?v.current:[v.current]),p.current=null},y)},[y]),E=Aw({callback:S,disabled:x||!o}),C=b.useCallback((R,P)=>{E&&(P&&(E.unobserve(P),d.current=!1),R&&E.observe(R))},[E]),[T,A]=Zx(C),k=Pm(e);return b.useEffect(()=>{!E||!T.current||(E.disconnect(),d.current=!1,E.observe(T.current))},[T,E]),b.useEffect(()=>(a({type:yr.RegisterDroppable,element:{id:r,key:s,disabled:n,node:T,rect:h,data:k}}),()=>a({type:yr.UnregisterDroppable,key:s,id:r})),[r]),b.useEffect(()=>{n!==u.current.disabled&&(a({type:yr.SetDroppableDisabled,id:r,key:s,disabled:n}),u.current.disabled=n)},[r,s,n,a]),{active:o,rect:h,isOver:(l==null?void 0:l.id)===r,node:T,over:l,setNodeRef:A}}function jA(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function fve(t,e){return t.reduce((n,r,i)=>{const s=e.get(r);return s&&(n[i]=s),n},Array(t.length))}function py(t){return t!==null&&t>=0}function hve(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function pve(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const TH=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const s=jA(e,r,n),o=e[i],a=s[i];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},my={scaleX:1,scaleY:1},mve=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:o}=t;const a=(e=s[n])!=null?e:r;if(!a)return null;if(i===n){const c=s[o];return c?{x:0,y:n<o?c.top+c.height-(a.top+a.height):c.top-a.top,...my}:null}const l=gve(s,i,n);return i>n&&i<=o?{x:0,y:-a.height-l,...my}:i<n&&i>=o?{x:0,y:a.height+l,...my}:{x:0,y:0,...my}};function gve(t,e,n){const r=t[e],i=t[e-1],s=t[e+1];return r?n<e?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const AH="Sortable",RH=Me.createContext({activeIndex:-1,containerId:AH,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:TH,disabled:{draggable:!1,droppable:!1}});function vve(t){let{children:e,id:n,items:r,strategy:i=TH,disabled:s=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:u}=lve(),d=Ag(AH,n),h=a.rect!==null,p=b.useMemo(()=>r.map(A=>typeof A=="object"&&"id"in A?A.id:A),[r]),x=o!=null,w=o?p.indexOf(o.id):-1,y=c?p.indexOf(c.id):-1,v=b.useRef(p),S=!hve(p,v.current),E=y!==-1&&w===-1||S,C=pve(s);va(()=>{S&&x&&u(p)},[S,p,x,u]),b.useEffect(()=>{v.current=p},[p]);const T=b.useMemo(()=>({activeIndex:w,containerId:d,disabled:C,disableTransforms:E,items:p,overIndex:y,useDragOverlay:h,sortedRects:fve(p,l),strategy:i}),[w,d,C.draggable,C.droppable,E,p,y,l,h,i]);return Me.createElement(RH.Provider,{value:T},e)}const yve=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return jA(n,r,i).indexOf(e)},xve=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:a,previousContainerId:l,transition:c}=t;return!c||!r||a!==s&&i===o?!1:n?!0:o!==i&&e===l},wve={duration:200,easing:"ease"},kH="transform",bve=Im.Transition.toString({property:kH,duration:0,easing:"linear"}),Sve={roleDescription:"sortable"};function _ve(t){let{disabled:e,index:n,node:r,rect:i}=t;const[s,o]=b.useState(null),a=b.useRef(n);return va(()=>{if(!e&&n!==a.current&&r.current){const l=i.current;if(l){const c=Oh(r.current,{ignoreTransform:!0}),u={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(u.x||u.y)&&o(u)}}n!==a.current&&(a.current=n)},[e,n,r,i]),b.useEffect(()=>{s&&o(null)},[s]),s}function Eve(t){let{animateLayoutChanges:e=xve,attributes:n,disabled:r,data:i,getNewIndex:s=yve,id:o,strategy:a,resizeObserverConfig:l,transition:c=wve}=t;const{items:u,containerId:d,activeIndex:h,disabled:p,disableTransforms:x,sortedRects:w,overIndex:y,useDragOverlay:v,strategy:S}=b.useContext(RH),E=Cve(r,p),C=u.indexOf(o),T=b.useMemo(()=>({sortable:{containerId:d,index:C,items:u},...i}),[d,i,C,u]),A=b.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:k,node:R,isOver:P,setNodeRef:M}=dve({id:o,data:T,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...l}}),{active:I,activatorEvent:z,activeNodeRect:H,attributes:j,setNodeRef:J,listeners:q,isDragging:Q,over:O,setActivatorNodeRef:F,transform:D}=ave({id:o,data:T,attributes:{...Sve,...n},disabled:E.draggable}),ee=Hme(M,J),W=!!I,B=W&&!x&&py(h)&&py(y),K=!v&&Q,ie=K&&B?D:null,Z=B?ie??(a??S)({rects:w,activeNodeRect:H,activeIndex:h,overIndex:y,index:C}):null,pe=py(h)&&py(y)?s({id:o,items:u,activeIndex:h,overIndex:y}):C,ye=I==null?void 0:I.id,ge=b.useRef({activeId:ye,items:u,newIndex:pe,containerId:d}),je=u!==ge.current.items,We=e({active:I,containerId:d,isDragging:Q,isSorting:W,id:o,index:C,items:u,newIndex:ge.current.newIndex,previousItems:ge.current.items,previousContainerId:ge.current.containerId,transition:c,wasDragging:ge.current.activeId!=null}),it=_ve({disabled:!We,index:C,node:R,rect:k});return b.useEffect(()=>{W&&ge.current.newIndex!==pe&&(ge.current.newIndex=pe),d!==ge.current.containerId&&(ge.current.containerId=d),u!==ge.current.items&&(ge.current.items=u)},[W,pe,d,u]),b.useEffect(()=>{if(ye===ge.current.activeId)return;if(ye!=null&&ge.current.activeId==null){ge.current.activeId=ye;return}const pt=setTimeout(()=>{ge.current.activeId=ye},50);return()=>clearTimeout(pt)},[ye]),{active:I,activeIndex:h,attributes:j,data:T,rect:k,index:C,newIndex:pe,items:u,isOver:P,isSorting:W,isDragging:Q,listeners:q,node:R,overIndex:y,over:O,setNodeRef:ee,setActivatorNodeRef:F,setDroppableNodeRef:M,setDraggableNodeRef:J,transform:it??Z,transition:te()};function te(){if(it||je&&ge.current.newIndex===C)return bve;if(!(K&&!OA(z)||!c)&&(W||We))return Im.Transition.toString({...c,property:kH})}}function Cve(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function n0(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const Mve=[an.Down,an.Right,an.Up,an.Left],Tve=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:s,over:o,scrollableAncestors:a}}=e;if(Mve.includes(t.code)){if(t.preventDefault(),!n||!r)return;const l=[];s.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const h=i.get(d.id);if(h)switch(t.code){case an.Down:r.top<h.top&&l.push(d);break;case an.Up:r.top>h.top&&l.push(d);break;case an.Left:r.left>h.left&&l.push(d);break;case an.Right:r.left<h.left&&l.push(d);break}});const c=sge({collisionRect:r,droppableRects:i,droppableContainers:l});let u=pH(c,"id");if(u===(o==null?void 0:o.id)&&c.length>1&&(u=c[1].id),u!=null){const d=s.get(n.id),h=s.get(u),p=h?i.get(h.id):null,x=h==null?void 0:h.node.current;if(x&&p&&d&&h){const y=Tw(x).some((A,k)=>a[k]!==A),v=NH(d,h),S=Ave(d,h),E=y||!v?{x:0,y:0}:{x:S?r.width-p.width:0,y:S?r.height-p.height:0},C={x:p.left,y:p.top};return E.x&&E.y?C:Dm(C,E)}}}};function NH(t,e){return!n0(t)||!n0(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function Ave(t,e){return!n0(t)||!n0(e)||!NH(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const Rve=({item:t,editingItemId:e,editingItemText:n,setEditingItemText:r,toggleItemCompleted:i,startEditingItem:s,handleEditItem:o,removeItem:a})=>{const l=e===t.id,{attributes:c,listeners:u,setNodeRef:d,transform:h,transition:p,isDragging:x}=Eve({id:t.id,disabled:l}),w={transform:Im.Transform.toString(h),transition:p,opacity:x?.5:1};return m.jsx("div",{ref:d,style:w,className:"flex items-center py-1 group","data-sortable-item":!0,children:l?m.jsxs("div",{className:"flex items-center gap-1 w-full",children:[m.jsx(Yn,{value:n,onChange:y=>r(y.target.value),className:"h-8 flex-grow",autoFocus:!0,onKeyDown:y=>{y.key==="Enter"&&o()}}),m.jsx(nt,{size:"sm",variant:"ghost",onClick:o,className:"h-8 w-8 p-0",children:m.jsx(eo,{className:"h-4 w-4"})}),m.jsx(nt,{size:"sm",variant:"ghost",onClick:()=>r(""),className:"h-8 w-8 p-0",children:m.jsx(Fo,{className:"h-4 w-4"})})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{...c,...u,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing mr-2 p-1","data-sortable-handle":!0,children:m.jsx(_ee,{className:"h-4 w-4 text-gray-400 dark:text-gray-300","data-lucide":"grip-vertical"})}),m.jsxs("div",{className:"flex items-center flex-grow cursor-pointer",onClick:()=>i(t.id),children:[m.jsx("div",{style:t.completed?{backgroundColor:"var(--list-color)",borderColor:"var(--list-color)"}:{},className:`w-4 h-4 min-w-[16px] min-h-[16px] max-w-[16px] max-h-[16px] rounded-sm border mr-2 flex items-center justify-center flex-shrink-0 ${t.completed?"":"border-gray-300 hover:border-[var(--list-color)]"}`,children:t.completed&&m.jsx(eo,{className:"h-3 w-3 text-white"})}),m.jsx("span",{className:`${t.completed?"line-through text-gray-400 dark:text-gray-300":""}`,style:{fontFamily:'"Raleway", sans-serif'},children:t.text})]}),m.jsxs("div",{className:"flex opacity-0 group-hover:opacity-100 transition-opacity",children:[m.jsx(nt,{size:"sm",variant:"ghost",onClick:()=>s(t),className:"h-8 w-8 p-0",children:m.jsx(og,{className:"h-4 w-4"})}),m.jsx(nt,{size:"sm",variant:"ghost",onClick:()=>a(t.id),className:"h-8 w-8 p-0 text-red-600",children:m.jsx(q0,{className:"h-4 w-4"})})]})]})})},kve=({progress:t,totalItems:e,completedItems:n})=>m.jsxs("div",{className:"px-6 py-2",children:[m.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2 mb-1",children:m.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${t}%`,backgroundColor:"var(--list-color)"}})}),m.jsxs("div",{className:"text-xs text-gray-500 dark:text-white",style:{fontFamily:'"Raleway", sans-serif'},children:[n," of ",e," completed"]})]}),Nve=t=>{const{newItemText:e,setNewItemText:n,handleAddItem:r,inputRef:i,currentInputSuggestion:s,currentSuggestion:o,handleAcceptSuggestion:a,handleGetSuggestion:l,aiEnabled:c,isLoadingSuggestions:u}=t,d=h=>{if(console.log("Key pressed:",h.key,{currentInputSuggestion:s}),h.key==="Enter")r();else if(h.key==="Escape")n("");else if(h.key==="Tab"&&s)h.preventDefault(),a(),console.log("Accepting suggestion with Tab");else if(h.key==="ArrowRight"&&s){const p=h.currentTarget;p.selectionStart===p.value.length&&(h.preventDefault(),a(),console.log("Accepting suggestion with ArrowRight"))}};return m.jsxs("div",{className:"flex flex-col p-2 border-t",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"relative flex-1 rounded-md border",children:[m.jsx(Yn,{ref:i,value:e,onChange:h=>n(h.target.value),placeholder:"Add new item...",className:`h-8 border-0 focus-visible:ring-0 focus-visible:ring-offset-0 ${c?"pr-8":""}`,style:{fontFamily:'"Raleway", sans-serif'},onKeyDown:d}),c&&m.jsx("button",{type:"button",onClick:l,className:"absolute right-2 top-1/2 transform -translate-y-1/2 cursor-pointer",children:m.jsx(oc,{size:14,style:{color:"var(--list-color)"},className:`${u?"animate-pulse":""}`})}),c&&s&&e&&s.toLowerCase().startsWith(e.toLowerCase())&&m.jsx("div",{className:"absolute left-0 top-0 right-8 bottom-0 flex items-center pointer-events-none z-10",children:m.jsxs("div",{className:"px-3 flex items-center w-full pr-2",children:[m.jsx("span",{className:"text-transparent",children:e}),m.jsx("span",{className:"text-gray-500 overflow-hidden text-ellipsis whitespace-nowrap font-medium",style:{pointerEvents:"none",fontFamily:'"Raleway", sans-serif',maxWidth:"calc(100% - 2rem)"},title:"Press Tab or Right Arrow to accept",children:s.substring(e.length)})]})})]}),m.jsx(nt,{size:"sm",variant:"secondary",onClick:r,className:"h-8 w-8 p-0",disabled:!e.trim(),children:m.jsx(_o,{className:"h-4 w-4"})}),m.jsxs(nt,{size:"sm",variant:"ghost",onClick:()=>n(""),className:"h-8 w-8 p-0",children:[m.jsx("span",{className:"sr-only",children:"Clear"}),m.jsx("span",{"aria-hidden":"true",children:""})]})]}),c&&m.jsxs("button",{onClick:l,className:"mt-2 w-full flex items-center gap-1.5 px-2 py-1.5 text-sm text-foreground hover:bg-muted rounded-md transition-colors",style:{fontFamily:'"Raleway", sans-serif'},disabled:u,children:[m.jsx(oc,{className:"w-4 h-4",style:{color:"var(--list-color)"}}),m.jsx("span",{className:"font-medium",children:"Suggest:"}),o&&m.jsx("span",{style:{color:"var(--list-color)"},className:"font-medium overflow-hidden text-ellipsis whitespace-nowrap",children:o})]})]})},HA=({list:t,onUpdate:e,onDelete:n,existingCategories:r,isCollapsed:i,onToggleCollapsed:s,addCategory:o,updateCategory:a})=>{var pt;const{isCollapsibleOpen:l,isEditing:c,setIsEditing:u,editTitle:d,setEditTitle:h,handleEditTitle:p,handleDeleteList:x,handleSaveListColor:w,isSavingColor:y,isEditingCategory:v,setIsEditingCategory:S,showNewCategoryInput:E,setShowNewCategoryInput:C,newCategory:T,setNewCategory:A,handleEditCategory:k,handleAddCustomCategory:R,handleUpdateCategoryColor:P,newItemText:M,setNewItemText:I,editingItemId:z,editingItemText:H,setEditingItemText:j,handleAddItem:J,toggleItemCompleted:q,removeItem:Q,startEditingItem:O,handleEditItem:F,isLoadingSuggestions:D,handleGetSuggestion:ee,handleAcceptSuggestion:W,currentSuggestion:B,currentInputSuggestion:K,aiEnabled:ie,titleEditRef:oe,newItemInputRef:Z}=ame({list:t,onUpdate:e,onDelete:n,isCollapsed:i,onToggleCollapsed:s,existingCategories:r,addCategory:o,updateCategory:a}),pe=nge(xI(zA),xI(UA,{coordinateGetter:Tve})),ye=Be=>{const{active:ut,over:Xe}=Be;if(Xe&&ut.id!==Xe.id){const wt=t.items.findIndex(Y=>Y.id===ut.id),Ae=t.items.findIndex(Y=>Y.id===Xe.id),Pe=jA(t.items,wt,Ae),ot={...t,items:Pe};e(ot)}};b.useEffect(()=>{if(!c)return;const Be=ut=>{oe.current&&!oe.current.contains(ut.target)&&p()};return document.addEventListener("mousedown",Be),()=>{document.removeEventListener("mousedown",Be)}},[c,p]);const ge=t.items.length,je=t.items.filter(Be=>Be.completed).length,We=ge>0?je/ge*100:0,it=(pt=r.find(Be=>Be.name===t.type))==null?void 0:pt.color_value,te=t.color_value||it||"#808080";return m.jsx(AA,{open:l,onOpenChange:Be=>{s&&i!==void 0&&!i!==Be&&s()},className:"w-full",style:{"--list-color":te},children:m.jsxs(bo,{className:"w-full border shadow-sm",children:[m.jsx(cme,{title:t.title,listColor:t.color_value,isEditing:c,editTitle:d,isCollapsibleOpen:l,setEditTitle:h,setIsEditing:u,handleEditTitle:p,handleDeleteList:x,titleEditRef:oe,onColorSave:w,isSavingColor:y}),m.jsx(jme,{currentCategory:t.type,categoryColor:it,itemColor:t.color_value,existingCategories:r,isEditingCategory:v,showNewCategoryInput:E,newCategory:T,setNewCategory:A,setIsEditingCategory:S,setShowNewCategoryInput:C,handleEditCategory:k,handleAddCustomCategory:R,handleUpdateCategoryColor:P}),m.jsx(kA,{children:m.jsxs($a,{className:"p-0",children:[ge>0&&m.jsx(kve,{progress:We,totalItems:ge,completedItems:je}),m.jsxs("div",{className:"px-6 py-2 space-y-0.5",children:[m.jsx(ive,{sensors:pe,collisionDetection:ige,onDragEnd:ye,children:m.jsx(vve,{items:t.items.map(Be=>Be.id),strategy:mve,children:t.items.map(Be=>m.jsx(Rve,{item:Be,editingItemId:z,editingItemText:H,setEditingItemText:j,toggleItemCompleted:q,startEditingItem:O,handleEditItem:F,removeItem:Q},Be.id))})}),t.items.length===0&&m.jsx("div",{className:"text-gray-400 dark:text-gray-300 text-sm py-2 italic",style:{fontFamily:'"Raleway", sans-serif'},children:"No items yet. Add one below or use AI suggestions."})]}),m.jsx(Nve,{newItemText:M,setNewItemText:I,handleAddItem:J,inputRef:Z,currentInputSuggestion:K,currentSuggestion:B,handleAcceptSuggestion:W,handleGetSuggestion:ee,aiEnabled:ie,isLoadingSuggestions:D})]})})]})})},Pve=()=>{const[t,e]=b.useState([]),[n,r]=b.useState(""),[i,s]=b.useState(!1),[o,a]=b.useState("all"),[l,c]=b.useState(!0),{toast:u}=to(),{isAuthenticated:d,token:h}=ro();b.useEffect(()=>{d&&p()},[d]);const p=async()=>{try{c(!0);const A=(await kn.get("/api/lists",{headers:{Authorization:`Bearer ${h}`}})).data.map(k=>({id:k.id,title:k.title,type:k.category||"General",items:k.items||[],createdAt:new Date(k.createdAt),color_value:k.color_value||"#808080"}));e(A)}catch(T){console.error("Failed to fetch lists:",T),u({title:"Error fetching lists",description:"Could not retrieve your lists. Please try again later.",variant:"destructive"})}finally{c(!1)}},x=async(T,A)=>{try{const k=await kn.post("/api/lists",{title:T,category:A,items:[]},{headers:{Authorization:`Bearer ${h}`}}),R={...k.data,type:k.data.category,items:k.data.items||[],createdAt:new Date(k.data.createdAt),color_value:k.data.color_value||"#808080"};e(P=>[R,...P]),s(!1),u({title:"List created!",description:`Your ${A} list "${T}" has been created.`})}catch(k){console.error("Failed to create list:",k),u({title:"Error creating list",description:"Could not create your list. Please try again.",variant:"destructive"})}},w=async T=>{try{await kn.delete(`/api/lists/${T}`,{headers:{Authorization:`Bearer ${h}`}}),e(A=>A.filter(k=>k.id!==T)),u({title:"List deleted",description:"Your list has been removed."})}catch(A){console.error("Failed to delete list:",A),u({title:"Error deleting list",description:"Could not delete your list. Please try again.",variant:"destructive"})}},y=async T=>{try{const A={title:T.title,category:T.type,items:T.items,color_value:T.color_value};await kn.put(`/api/lists/${T.id}`,A,{headers:{Authorization:`Bearer ${h}`}});const k=T.type,R=t.find(M=>M.id===T.id),P=R?R.type:void 0;e(M=>M.map(I=>I.id===T.id?{...T,color_value:T.color_value||"#808080"}:I))}catch(A){console.error("Failed to update list:",A),u({title:"Error updating list",description:"Could not update your list. Please try again.",variant:"destructive"})}},v=t.filter(T=>{const A=T.title.toLowerCase().includes(n.toLowerCase())||T.items.some(R=>R.text.toLowerCase().includes(n.toLowerCase())),k=o==="all"||T.type===o;return A&&k}),S=()=>{const T=new Set(t.map(A=>A.type||"General"));return["all",...Array.from(T).sort()]},E=()=>{const T=Array.from(new Set(t.map(A=>A.type).filter(A=>A&&A.toLowerCase()!=="general")));return T.length===0&&t.some(A=>A.type&&A.type.toLowerCase()==="general")?["General"]:T.length>0?T.sort():["General"]},C=()=>{const T={all:t.length};return t.forEach(A=>{T[A.type]=(T[A.type]||0)+1}),T};return m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background to-muted/50",children:[m.jsx("div",{className:"bg-background border-b border-border sticky top-0 z-40",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsx("div",{className:"py-4",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"My Lists"}),m.jsxs("div",{className:"relative hidden sm:block ml-4",children:[m.jsx(Zo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),m.jsx(Yn,{placeholder:"Search lists...",value:n,onChange:T=>r(T.target.value),className:"pl-10 w-48 h-9"})]})]}),m.jsx("div",{className:"flex items-center gap-3",children:m.jsxs(nt,{onClick:()=>s(!0),size:"sm",className:"bg-blue-600 hover:bg-blue-700 whitespace-nowrap",children:[m.jsx(_o,{className:"h-4 w-4 mr-1"}),m.jsx("span",{className:"hidden sm:inline",children:"New List"}),m.jsx("span",{className:"sm:hidden",children:"New"})]})})]})}),m.jsx("div",{className:"sm:hidden pb-4",children:m.jsxs("div",{className:"relative",children:[m.jsx(Zo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),m.jsx(Yn,{placeholder:"Search lists...",value:n,onChange:T=>r(T.target.value),className:"pl-10"})]})})]})}),m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:S().map(T=>{const A=C()[T]||0;return m.jsxs(nt,{variant:o===T?"default":"outline",size:"sm",onClick:()=>a(T),className:`capitalize ${o===T?"bg-blue-600 hover:bg-blue-700":""}`,children:[T," (",A,")"]},T)})}),l?m.jsx("div",{className:"text-center py-12",children:m.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[m.jsx("div",{className:"h-8 bg-slate-200 rounded w-32 mb-4"}),m.jsx("div",{className:"h-4 bg-slate-200 rounded w-64"})]})}):v.length===0?m.jsx("div",{className:"text-center py-12",children:t.length===0?m.jsx("div",{className:"max-w-md mx-auto",children:m.jsxs("div",{className:"bg-card rounded-lg shadow-sm border border-border p-8",children:[m.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(_o,{className:"h-8 w-8 text-blue-600"})}),m.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Create your first list"}),m.jsx("p",{className:"text-muted-foreground mb-6",children:"Get organized with custom lists for any purpose - shopping, notes, tasks, and more."}),m.jsxs(nt,{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700",children:[m.jsx(_o,{className:"h-4 w-4 mr-2"}),"Create List"]})]})}):m.jsxs("div",{className:"text-muted-foreground",children:[m.jsx(Zo,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),m.jsx("p",{children:"No lists match your search criteria."})]})}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(T=>m.jsx(HA,{list:T,onUpdate:y,onDelete:w,existingCategories:E()},T.id))})]}),m.jsx(b5,{isOpen:i,onClose:()=>s(!1),onCreateList:x,existingCategories:E()})]})},Dve=()=>{const t=pl();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),m.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),m.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Ive=()=>{const t=md();return b.useEffect(()=>{(async()=>{var n,r,i;try{const s=new URLSearchParams(window.location.search),o=s.get("code"),a=s.get("error");if(console.log("AuthCallback received:",{hasCode:!!o,codeLength:o==null?void 0:o.length,error:a||"none",searchParams:window.location.search}),a){console.error("OAuth error:",a),window.opener?(window.opener.postMessage({type:"GOOGLE_AUTH_ERROR",error:a},window.location.origin),window.close()):t("/",{replace:!0});return}if(!o){console.error("No authorization code received"),window.opener?(window.opener.postMessage({type:"GOOGLE_AUTH_ERROR",error:"No authorization code received"},window.location.origin),window.close()):t("/",{replace:!0});return}const l=xm();console.log("Authorization code found, length:",o.length),console.log("Sending request to backend at:",`${l}/api/auth/google-login`);const c=await fetch(`${l}/api/auth/google-login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:o})});if(console.log("Backend response received, status:",c.status),!c.ok)throw new Error("Failed to authenticate with backend");const u=await c.json();console.log("User authenticated successfully:",((n=u.user)==null?void 0:n.email)||"unknown"),window.opener?(console.log("Window opener found, posting success message"),window.opener.postMessage({type:"GOOGLE_AUTH_SUCCESS",user:u.user,token:u.accessToken},window.location.origin),window.close()):(console.log("No opener window, navigating to home page"),t("/",{replace:!0}))}catch(s){console.error("Error during auth callback:",s),console.error("Response data:",(r=s.response)==null?void 0:r.data),console.error("Response status:",(i=s.response)==null?void 0:i.status),window.opener?(window.opener.postMessage({type:"GOOGLE_AUTH_ERROR",error:s instanceof Error?s.message:"Authentication failed"},window.location.origin),window.close()):t("/",{replace:!0})}})()},[t]),m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Completing authentication..."})]})})};function Lve(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Ove=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Fve=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Uve={};function PI(t,e){return(Uve.jsx?Fve:Ove).test(t)}const Bve=/[ \t\n\f\r]/g;function zve(t){return typeof t=="object"?t.type==="text"?DI(t.value):!1:DI(t)}function DI(t){return t.replace(Bve,"")===""}let Rg=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};Rg.prototype.normal={};Rg.prototype.property={};Rg.prototype.space=void 0;function PH(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Rg(n,r,e)}function zC(t){return t.toLowerCase()}class rs{constructor(e,n){this.attribute=n,this.property=e}}rs.prototype.attribute="";rs.prototype.booleanish=!1;rs.prototype.boolean=!1;rs.prototype.commaOrSpaceSeparated=!1;rs.prototype.commaSeparated=!1;rs.prototype.defined=!1;rs.prototype.mustUseProperty=!1;rs.prototype.number=!1;rs.prototype.overloadedBoolean=!1;rs.prototype.property="";rs.prototype.spaceSeparated=!1;rs.prototype.space=void 0;let jve=0;const Wt=yd(),ur=yd(),jC=yd(),Ze=yd(),On=yd(),Of=yd(),ps=yd();function yd(){return 2**++jve}const HC=Object.freeze(Object.defineProperty({__proto__:null,boolean:Wt,booleanish:ur,commaOrSpaceSeparated:ps,commaSeparated:Of,number:Ze,overloadedBoolean:jC,spaceSeparated:On},Symbol.toStringTag,{value:"Module"})),O1=Object.keys(HC);class VA extends rs{constructor(e,n,r,i){let s=-1;if(super(e,n),II(this,"space",i),typeof r=="number")for(;++s<O1.length;){const o=O1[s];II(this,O1[s],(r&HC[o])===HC[o])}}}VA.prototype.defined=!0;function II(t,e,n){n&&(t[e]=n)}function Fh(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new VA(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[zC(r)]=r,n[zC(s.attribute)]=r}return new Rg(e,n,t.space)}const DH=Fh({properties:{ariaActiveDescendant:null,ariaAtomic:ur,ariaAutoComplete:null,ariaBusy:ur,ariaChecked:ur,ariaColCount:Ze,ariaColIndex:Ze,ariaColSpan:Ze,ariaControls:On,ariaCurrent:null,ariaDescribedBy:On,ariaDetails:null,ariaDisabled:ur,ariaDropEffect:On,ariaErrorMessage:null,ariaExpanded:ur,ariaFlowTo:On,ariaGrabbed:ur,ariaHasPopup:null,ariaHidden:ur,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:On,ariaLevel:Ze,ariaLive:null,ariaModal:ur,ariaMultiLine:ur,ariaMultiSelectable:ur,ariaOrientation:null,ariaOwns:On,ariaPlaceholder:null,ariaPosInSet:Ze,ariaPressed:ur,ariaReadOnly:ur,ariaRelevant:null,ariaRequired:ur,ariaRoleDescription:On,ariaRowCount:Ze,ariaRowIndex:Ze,ariaRowSpan:Ze,ariaSelected:ur,ariaSetSize:Ze,ariaSort:null,ariaValueMax:Ze,ariaValueMin:Ze,ariaValueNow:Ze,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function IH(t,e){return e in t?t[e]:e}function LH(t,e){return IH(t,e.toLowerCase())}const Hve=Fh({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Of,acceptCharset:On,accessKey:On,action:null,allow:null,allowFullScreen:Wt,allowPaymentRequest:Wt,allowUserMedia:Wt,alt:null,as:null,async:Wt,autoCapitalize:null,autoComplete:On,autoFocus:Wt,autoPlay:Wt,blocking:On,capture:null,charSet:null,checked:Wt,cite:null,className:On,cols:Ze,colSpan:null,content:null,contentEditable:ur,controls:Wt,controlsList:On,coords:Ze|Of,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Wt,defer:Wt,dir:null,dirName:null,disabled:Wt,download:jC,draggable:ur,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Wt,formTarget:null,headers:On,height:Ze,hidden:jC,high:Ze,href:null,hrefLang:null,htmlFor:On,httpEquiv:On,id:null,imageSizes:null,imageSrcSet:null,inert:Wt,inputMode:null,integrity:null,is:null,isMap:Wt,itemId:null,itemProp:On,itemRef:On,itemScope:Wt,itemType:On,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Wt,low:Ze,manifest:null,max:null,maxLength:Ze,media:null,method:null,min:null,minLength:Ze,multiple:Wt,muted:Wt,name:null,nonce:null,noModule:Wt,noValidate:Wt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Wt,optimum:Ze,pattern:null,ping:On,placeholder:null,playsInline:Wt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Wt,referrerPolicy:null,rel:On,required:Wt,reversed:Wt,rows:Ze,rowSpan:Ze,sandbox:On,scope:null,scoped:Wt,seamless:Wt,selected:Wt,shadowRootClonable:Wt,shadowRootDelegatesFocus:Wt,shadowRootMode:null,shape:null,size:Ze,sizes:null,slot:null,span:Ze,spellCheck:ur,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ze,step:null,style:null,tabIndex:Ze,target:null,title:null,translate:null,type:null,typeMustMatch:Wt,useMap:null,value:ur,width:Ze,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:On,axis:null,background:null,bgColor:null,border:Ze,borderColor:null,bottomMargin:Ze,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Wt,declare:Wt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ze,leftMargin:Ze,link:null,longDesc:null,lowSrc:null,marginHeight:Ze,marginWidth:Ze,noResize:Wt,noHref:Wt,noShade:Wt,noWrap:Wt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ze,rules:null,scheme:null,scrolling:ur,standby:null,summary:null,text:null,topMargin:Ze,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ze,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Wt,disableRemotePlayback:Wt,prefix:null,property:null,results:Ze,security:null,unselectable:null},space:"html",transform:LH}),Vve=Fh({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ps,accentHeight:Ze,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ze,amplitude:Ze,arabicForm:null,ascent:Ze,attributeName:null,attributeType:null,azimuth:Ze,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ze,by:null,calcMode:null,capHeight:Ze,className:On,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ze,diffuseConstant:Ze,direction:null,display:null,dur:null,divisor:Ze,dominantBaseline:null,download:Wt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ze,enableBackground:null,end:null,event:null,exponent:Ze,externalResourcesRequired:null,fill:null,fillOpacity:Ze,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Of,g2:Of,glyphName:Of,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ze,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ze,horizOriginX:Ze,horizOriginY:Ze,id:null,ideographic:Ze,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ze,k:Ze,k1:Ze,k2:Ze,k3:Ze,k4:Ze,kernelMatrix:ps,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ze,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ze,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ze,overlineThickness:Ze,paintOrder:null,panose1:null,path:null,pathLength:Ze,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:On,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ze,pointsAtY:Ze,pointsAtZ:Ze,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ps,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ps,rev:ps,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ps,requiredFeatures:ps,requiredFonts:ps,requiredFormats:ps,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ze,specularExponent:Ze,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ze,strikethroughThickness:Ze,string:null,stroke:null,strokeDashArray:ps,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ze,strokeOpacity:Ze,strokeWidth:null,style:null,surfaceScale:Ze,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ps,tabIndex:Ze,tableValues:null,target:null,targetX:Ze,targetY:Ze,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ps,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ze,underlineThickness:Ze,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ze,values:null,vAlphabetic:Ze,vMathematical:Ze,vectorEffect:null,vHanging:Ze,vIdeographic:Ze,version:null,vertAdvY:Ze,vertOriginX:Ze,vertOriginY:Ze,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ze,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:IH}),OH=Fh({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),FH=Fh({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:LH}),UH=Fh({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),$ve={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Wve=/[A-Z]/g,LI=/-[a-z]/g,Gve=/^data[-\w.:]+$/i;function Xve(t,e){const n=zC(e);let r=e,i=rs;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Gve.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(LI,Kve);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!LI.test(s)){let o=s.replace(Wve,qve);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=VA}return new i(r,e)}function qve(t){return"-"+t.toLowerCase()}function Kve(t){return t.charAt(1).toUpperCase()}const Yve=PH([DH,Hve,OH,FH,UH],"html"),$A=PH([DH,Vve,OH,FH,UH],"svg");function Jve(t){return t.join(" ").trim()}var WA={},OI=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Qve=/\n/g,Zve=/^\s*/,eye=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,tye=/^:\s*/,nye=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,rye=/^[;\s]*/,iye=/^\s+|\s+$/g,sye=`
`,FI="/",UI="*",Su="",oye="comment",aye="declaration",lye=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(x){var w=x.match(Qve);w&&(n+=w.length);var y=x.lastIndexOf(sye);r=~y?x.length-y:r+x.length}function s(){var x={line:n,column:r};return function(w){return w.position=new o(x),c(),w}}function o(x){this.start=x,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(x){var w=new Error(e.source+":"+n+":"+r+": "+x);if(w.reason=x,w.filename=e.source,w.line=n,w.column=r,w.source=t,!e.silent)throw w}function l(x){var w=x.exec(t);if(w){var y=w[0];return i(y),t=t.slice(y.length),w}}function c(){l(Zve)}function u(x){var w;for(x=x||[];w=d();)w!==!1&&x.push(w);return x}function d(){var x=s();if(!(FI!=t.charAt(0)||UI!=t.charAt(1))){for(var w=2;Su!=t.charAt(w)&&(UI!=t.charAt(w)||FI!=t.charAt(w+1));)++w;if(w+=2,Su===t.charAt(w-1))return a("End of comment missing");var y=t.slice(2,w-2);return r+=2,i(y),t=t.slice(w),r+=2,x({type:oye,comment:y})}}function h(){var x=s(),w=l(eye);if(w){if(d(),!l(tye))return a("property missing ':'");var y=l(nye),v=x({type:aye,property:BI(w[0].replace(OI,Su)),value:y?BI(y[0].replace(OI,Su)):Su});return l(rye),v}}function p(){var x=[];u(x);for(var w;w=h();)w!==!1&&(x.push(w),u(x));return x}return c(),p()};function BI(t){return t?t.replace(iye,Su):Su}var cye=qa&&qa.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(WA,"__esModule",{value:!0});WA.default=dye;var uye=cye(lye);function dye(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,uye.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?e(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var kw={};Object.defineProperty(kw,"__esModule",{value:!0});kw.camelCase=void 0;var fye=/^--[a-zA-Z0-9_-]+$/,hye=/-([a-z])/g,pye=/^[^-]+$/,mye=/^-(webkit|moz|ms|o|khtml)-/,gye=/^-(ms)-/,vye=function(t){return!t||pye.test(t)||fye.test(t)},yye=function(t,e){return e.toUpperCase()},zI=function(t,e){return"".concat(e,"-")},xye=function(t,e){return e===void 0&&(e={}),vye(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(gye,zI):t=t.replace(mye,zI),t.replace(hye,yye))};kw.camelCase=xye;var wye=qa&&qa.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},bye=wye(WA),Sye=kw;function VC(t,e){var n={};return!t||typeof t!="string"||(0,bye.default)(t,function(r,i){r&&i&&(n[(0,Sye.camelCase)(r,e)]=i)}),n}VC.default=VC;var _ye=VC;const Eye=S0(_ye),BH=zH("end"),GA=zH("start");function zH(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Cye(t){const e=GA(t),n=BH(t);if(e&&n)return{start:e,end:n}}function qp(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?jI(t.position):"start"in t||"end"in t?jI(t):"line"in t||"column"in t?$C(t):""}function $C(t){return HI(t&&t.line)+":"+HI(t&&t.column)}function jI(t){return $C(t&&t.start)+"-"+$C(t&&t.end)}function HI(t){return t&&typeof t=="number"?t:1}class pi extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=qp(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}pi.prototype.file="";pi.prototype.name="";pi.prototype.reason="";pi.prototype.message="";pi.prototype.stack="";pi.prototype.column=void 0;pi.prototype.line=void 0;pi.prototype.ancestors=void 0;pi.prototype.cause=void 0;pi.prototype.fatal=void 0;pi.prototype.place=void 0;pi.prototype.ruleId=void 0;pi.prototype.source=void 0;const XA={}.hasOwnProperty,Mye=new Map,Tye=/[A-Z]/g,Aye=new Set(["table","tbody","thead","tfoot","tr"]),Rye=new Set(["td","th"]),jH="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function kye(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Uye(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Fye(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?$A:Yve,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=HH(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function HH(t,e,n){if(e.type==="element")return Nye(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Pye(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Iye(t,e,n);if(e.type==="mdxjsEsm")return Dye(t,e);if(e.type==="root")return Lye(t,e,n);if(e.type==="text")return Oye(t,e)}function Nye(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=$A,t.schema=i),t.ancestors.push(e);const s=$H(t,e.tagName,!1),o=Bye(t,e);let a=KA(t,e);return Aye.has(e.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!zve(l):!0})),VH(t,o,s,e),qA(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function Pye(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Om(t,e.position)}function Dye(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Om(t,e.position)}function Iye(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=$A,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:$H(t,e.name,!0),o=zye(t,e),a=KA(t,e);return VH(t,o,s,e),qA(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function Lye(t,e,n){const r={};return qA(r,KA(t,e)),t.create(e,t.Fragment,r,n)}function Oye(t,e){return e.value}function VH(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function qA(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function Fye(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function Uye(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=GA(r);return e(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function Bye(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&XA.call(e.properties,i)){const s=jye(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Rye.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function zye(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else Om(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else Om(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function KA(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:Mye;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const a=HH(t,s,o);a!==void 0&&n.push(a)}return n}function jye(t,e,n){const r=Xve(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Lve(n):Jve(n)),r.property==="style"){let i=typeof n=="object"?n:Hye(t,String(n));return t.stylePropertyNameCase==="css"&&(i=Vye(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?$ve[r.property]||r.property:r.attribute,n]}}function Hye(t,e){try{return Eye(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new pi("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=jH+"#cannot-parse-style-attribute",i}}function $H(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=PI(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=PI(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return XA.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);Om(t)}function Om(t,e){const n=new pi("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=jH+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Vye(t){const e={};let n;for(n in t)XA.call(t,n)&&(e[$ye(n)]=t[n]);return e}function $ye(t){let e=t.replace(Tye,Wye);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Wye(t){return"-"+t.toLowerCase()}const F1={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Gye={};function YA(t,e){const n=Gye,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return WH(t,r,i)}function WH(t,e,n){if(Xye(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return VI(t.children,e,n)}return Array.isArray(t)?VI(t,e,n):""}function VI(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=WH(t[i],e,n);return r.join("")}function Xye(t){return!!(t&&typeof t=="object")}const $I=document.createElement("i");function JA(t){const e="&"+t+";";$I.innerHTML=e;const n=$I.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ss(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Ws(t,e){return t.length>0?(Ss(t,t.length,0,e),t):e}const WI={}.hasOwnProperty;function GH(t){const e={};let n=-1;for(;++n<t.length;)qye(e,t[n]);return e}function qye(t,e){let n;for(n in e){const i=(WI.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){WI.call(i,o)||(i[o]=[]);const a=s[o];Kye(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Kye(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Ss(t,0,0,r)}function XH(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function ko(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ei=Xc(/[A-Za-z]/),ui=Xc(/[\dA-Za-z]/),Yye=Xc(/[#-'*+\--9=?A-Z^-~]/);function r0(t){return t!==null&&(t<32||t===127)}const WC=Xc(/\d/),Jye=Xc(/[\dA-Fa-f]/),Qye=Xc(/[!-/:-@[-`{-~]/);function Nt(t){return t!==null&&t<-2}function Pn(t){return t!==null&&(t<0||t===32)}function tn(t){return t===-2||t===-1||t===32}const Nw=Xc(new RegExp("\\p{P}|\\p{S}","u")),ad=Xc(/\s/);function Xc(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Uh(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&ui(t.charCodeAt(n+1))&&ui(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function un(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return tn(l)?(t.enter(n),a(l)):e(l)}function a(l){return tn(l)&&s++<i?(t.consume(l),a):(t.exit(n),e(l))}}const Zye={tokenize:exe};function exe(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),un(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return Nt(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const txe={tokenize:nxe},GI={tokenize:rxe};function nxe(t){const e=this,n=[];let r=0,i,s,o;return a;function a(E){if(r<n.length){const C=n[r];return e.containerState=C[1],t.attempt(C[0].continuation,l,c)(E)}return c(E)}function l(E){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&S();const C=e.events.length;let T=C,A;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){A=e.events[T][1].end;break}v(r);let k=C;for(;k<e.events.length;)e.events[k][1].end={...A},k++;return Ss(e.events,T+1,0,e.events.slice(C)),e.events.length=k,c(E)}return a(E)}function c(E){if(r===n.length){if(!i)return h(E);if(i.currentConstruct&&i.currentConstruct.concrete)return x(E);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(GI,u,d)(E)}function u(E){return i&&S(),v(r),h(E)}function d(E){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,x(E)}function h(E){return e.containerState={},t.attempt(GI,p,x)(E)}function p(E){return r++,n.push([e.currentConstruct,e.containerState]),h(E)}function x(E){if(E===null){i&&S(),v(0),t.consume(E);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),w(E)}function w(E){if(E===null){y(t.exit("chunkFlow"),!0),v(0),t.consume(E);return}return Nt(E)?(t.consume(E),y(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(E),w)}function y(E,C){const T=e.sliceStream(E);if(C&&T.push(null),E.previous=s,s&&(s.next=E),s=E,i.defineSkip(E.start),i.write(T),e.parser.lazy[E.start.line]){let A=i.events.length;for(;A--;)if(i.events[A][1].start.offset<o&&(!i.events[A][1].end||i.events[A][1].end.offset>o))return;const k=e.events.length;let R=k,P,M;for(;R--;)if(e.events[R][0]==="exit"&&e.events[R][1].type==="chunkFlow"){if(P){M=e.events[R][1].end;break}P=!0}for(v(r),A=k;A<e.events.length;)e.events[A][1].end={...M},A++;Ss(e.events,R+1,0,e.events.slice(k)),e.events.length=A}}function v(E){let C=n.length;for(;C-- >E;){const T=n[C];e.containerState=T[1],T[0].exit.call(e,t)}n.length=E}function S(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function rxe(t,e,n){return un(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ch(t){if(t===null||Pn(t)||ad(t))return 1;if(Nw(t))return 2}function Pw(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const GC={name:"attention",resolveAll:ixe,tokenize:sxe};function ixe(t,e){let n=-1,r,i,s,o,a,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const d={...t[r][1].end},h={...t[n][1].start};XI(d,-l),XI(h,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:{...t[r][1].end}},a={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:h},s={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Ws(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Ws(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=Ws(c,Pw(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Ws(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=Ws(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,Ss(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function sxe(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=ch(r);let s;return o;function o(l){return s=l,t.enter("attentionSequence"),a(l)}function a(l){if(l===s)return t.consume(l),a;const c=t.exit("attentionSequence"),u=ch(l),d=!u||u===2&&i||n.includes(l),h=!i||i===2&&u||n.includes(r);return c._open=!!(s===42?d:d&&(i||!h)),c._close=!!(s===42?h:h&&(u||!d)),e(l)}}function XI(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const oxe={name:"autolink",tokenize:axe};function axe(t,e,n){let r=0;return i;function i(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(p){return Ei(p)?(t.consume(p),o):p===64?n(p):c(p)}function o(p){return p===43||p===45||p===46||ui(p)?(r=1,a(p)):c(p)}function a(p){return p===58?(t.consume(p),r=0,l):(p===43||p===45||p===46||ui(p))&&r++<32?(t.consume(p),a):(r=0,c(p))}function l(p){return p===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):p===null||p===32||p===60||r0(p)?n(p):(t.consume(p),l)}function c(p){return p===64?(t.consume(p),u):Yye(p)?(t.consume(p),c):n(p)}function u(p){return ui(p)?d(p):n(p)}function d(p){return p===46?(t.consume(p),r=0,u):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):h(p)}function h(p){if((p===45||ui(p))&&r++<63){const x=p===45?h:d;return t.consume(p),x}return n(p)}}const kg={partial:!0,tokenize:lxe};function lxe(t,e,n){return r;function r(s){return tn(s)?un(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Nt(s)?e(s):n(s)}}const qH={continuation:{tokenize:uxe},exit:dxe,name:"blockQuote",tokenize:cxe};function cxe(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return tn(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function uxe(t,e,n){const r=this;return i;function i(o){return tn(o)?un(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(qH,e,n)(o)}}function dxe(t){t.exit("blockQuote")}const KH={name:"characterEscape",tokenize:fxe};function fxe(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return Qye(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const YH={name:"characterReference",tokenize:hxe};function hxe(t,e,n){const r=this;let i=0,s,o;return a;function a(d){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),l}function l(d){return d===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(d),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=ui,u(d))}function c(d){return d===88||d===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(d),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=Jye,u):(t.enter("characterReferenceValue"),s=7,o=WC,u(d))}function u(d){if(d===59&&i){const h=t.exit("characterReferenceValue");return o===ui&&!JA(r.sliceSerialize(h))?n(d):(t.enter("characterReferenceMarker"),t.consume(d),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(d)&&i++<s?(t.consume(d),u):n(d)}}const qI={partial:!0,tokenize:mxe},KI={concrete:!0,name:"codeFenced",tokenize:pxe};function pxe(t,e,n){const r=this,i={partial:!0,tokenize:T};let s=0,o=0,a;return l;function l(A){return c(A)}function c(A){const k=r.events[r.events.length-1];return s=k&&k[1].type==="linePrefix"?k[2].sliceSerialize(k[1],!0).length:0,a=A,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(A)}function u(A){return A===a?(o++,t.consume(A),u):o<3?n(A):(t.exit("codeFencedFenceSequence"),tn(A)?un(t,d,"whitespace")(A):d(A))}function d(A){return A===null||Nt(A)?(t.exit("codeFencedFence"),r.interrupt?e(A):t.check(qI,w,C)(A)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),h(A))}function h(A){return A===null||Nt(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),d(A)):tn(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),un(t,p,"whitespace")(A)):A===96&&A===a?n(A):(t.consume(A),h)}function p(A){return A===null||Nt(A)?d(A):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),x(A))}function x(A){return A===null||Nt(A)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),d(A)):A===96&&A===a?n(A):(t.consume(A),x)}function w(A){return t.attempt(i,C,y)(A)}function y(A){return t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),v}function v(A){return s>0&&tn(A)?un(t,S,"linePrefix",s+1)(A):S(A)}function S(A){return A===null||Nt(A)?t.check(qI,w,C)(A):(t.enter("codeFlowValue"),E(A))}function E(A){return A===null||Nt(A)?(t.exit("codeFlowValue"),S(A)):(t.consume(A),E)}function C(A){return t.exit("codeFenced"),e(A)}function T(A,k,R){let P=0;return M;function M(J){return A.enter("lineEnding"),A.consume(J),A.exit("lineEnding"),I}function I(J){return A.enter("codeFencedFence"),tn(J)?un(A,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(J):z(J)}function z(J){return J===a?(A.enter("codeFencedFenceSequence"),H(J)):R(J)}function H(J){return J===a?(P++,A.consume(J),H):P>=o?(A.exit("codeFencedFenceSequence"),tn(J)?un(A,j,"whitespace")(J):j(J)):R(J)}function j(J){return J===null||Nt(J)?(A.exit("codeFencedFence"),k(J)):R(J)}}}function mxe(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const U1={name:"codeIndented",tokenize:vxe},gxe={partial:!0,tokenize:yxe};function vxe(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),un(t,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):Nt(c)?t.attempt(gxe,o,l)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||Nt(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function l(c){return t.exit("codeIndented"),e(c)}}function yxe(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Nt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):un(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):Nt(o)?i(o):n(o)}}const xxe={name:"codeText",previous:bxe,resolve:wxe,tokenize:Sxe};function wxe(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function bxe(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Sxe(t,e,n){let r=0,i,s;return o;function o(d){return t.enter("codeText"),t.enter("codeTextSequence"),a(d)}function a(d){return d===96?(t.consume(d),r++,a):(t.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(t.enter("space"),t.consume(d),t.exit("space"),l):d===96?(s=t.enter("codeTextSequence"),i=0,u(d)):Nt(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(d))}function c(d){return d===null||d===32||d===96||Nt(d)?(t.exit("codeTextData"),l(d)):(t.consume(d),c)}function u(d){return d===96?(t.consume(d),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(d)):(s.type="codeTextData",c(d))}}class _xe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&xp(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),xp(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),xp(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);xp(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);xp(this.left,n.reverse())}}}function xp(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function JH(t){const e={};let n=-1,r,i,s,o,a,l,c;const u=new _xe(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,Exe(u,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},a=u.slice(i,n),a.unshift(r),u.splice(i,n-i+1,a))}}return Ss(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function Exe(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,l=[],c={};let u,d,h=-1,p=n,x=0,w=0;const y=[w];for(;p;){for(;t.get(++i)[1]!==p;);s.push(i),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),d&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++h<a.length;)a[h][0]==="exit"&&a[h-1][0]==="enter"&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(w=h+1,y.push(w),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):y.pop(),h=y.length;h--;){const v=a.slice(y[h],y[h+1]),S=s.pop();l.push([S,S+v.length-1]),t.splice(S,2,v)}for(l.reverse(),h=-1;++h<l.length;)c[x+l[h][0]]=x+l[h][1],x+=l[h][1]-l[h][0]-1;return c}const Cxe={resolve:Txe,tokenize:Axe},Mxe={partial:!0,tokenize:Rxe};function Txe(t){return JH(t),t}function Axe(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Nt(a)?t.check(Mxe,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Rxe(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),un(t,s,"linePrefix")}function s(o){if(o===null||Nt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function QH(t,e,n,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return d;function d(v){return v===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(v),t.exit(s),h):v===null||v===32||v===41||r0(v)?n(v):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),w(v))}function h(v){return v===62?(t.enter(s),t.consume(v),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===62?(t.exit("chunkString"),t.exit(a),h(v)):v===null||v===60||Nt(v)?n(v):(t.consume(v),v===92?x:p)}function x(v){return v===60||v===62||v===92?(t.consume(v),p):p(v)}function w(v){return!u&&(v===null||v===41||Pn(v))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(v)):u<c&&v===40?(t.consume(v),u++,w):v===41?(t.consume(v),u--,w):v===null||v===32||v===40||r0(v)?n(v):(t.consume(v),v===92?y:w)}function y(v){return v===40||v===41||v===92?(t.consume(v),w):w(v)}}function ZH(t,e,n,r,i,s){const o=this;let a=0,l;return c;function c(p){return t.enter(r),t.enter(i),t.consume(p),t.exit(i),t.enter(s),u}function u(p){return a>999||p===null||p===91||p===93&&!l||p===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(p):p===93?(t.exit(s),t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):Nt(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===null||p===91||p===93||Nt(p)||a++>999?(t.exit("chunkString"),u(p)):(t.consume(p),l||(l=!tn(p)),p===92?h:d)}function h(p){return p===91||p===92||p===93?(t.consume(p),a++,d):d(p)}}function e6(t,e,n,r,i,s){let o;return a;function a(h){return h===34||h===39||h===40?(t.enter(r),t.enter(i),t.consume(h),t.exit(i),o=h===40?41:h,l):n(h)}function l(h){return h===o?(t.enter(i),t.consume(h),t.exit(i),t.exit(r),e):(t.enter(s),c(h))}function c(h){return h===o?(t.exit(s),l(o)):h===null?n(h):Nt(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),un(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===o||h===null||Nt(h)?(t.exit("chunkString"),c(h)):(t.consume(h),h===92?d:u)}function d(h){return h===o||h===92?(t.consume(h),u):u(h)}}function Kp(t,e){let n;return r;function r(i){return Nt(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):tn(i)?un(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const kxe={name:"definition",tokenize:Pxe},Nxe={partial:!0,tokenize:Dxe};function Pxe(t,e,n){const r=this;let i;return s;function s(p){return t.enter("definition"),o(p)}function o(p){return ZH.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function a(p){return i=ko(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),l):n(p)}function l(p){return Pn(p)?Kp(t,c)(p):c(p)}function c(p){return QH(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return t.attempt(Nxe,d,d)(p)}function d(p){return tn(p)?un(t,h,"whitespace")(p):h(p)}function h(p){return p===null||Nt(p)?(t.exit("definition"),r.parser.defined.push(i),e(p)):n(p)}}function Dxe(t,e,n){return r;function r(a){return Pn(a)?Kp(t,i)(a):n(a)}function i(a){return e6(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return tn(a)?un(t,o,"whitespace")(a):o(a)}function o(a){return a===null||Nt(a)?e(a):n(a)}}const Ixe={name:"hardBreakEscape",tokenize:Lxe};function Lxe(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Nt(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const Oxe={name:"headingAtx",resolve:Fxe,tokenize:Uxe};function Fxe(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Ss(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function Uxe(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||Pn(u)?(t.exit("atxHeadingSequence"),a(u)):n(u)}function a(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||Nt(u)?(t.exit("atxHeading"),e(u)):tn(u)?un(t,a,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),a(u))}function c(u){return u===null||u===35||Pn(u)?(t.exit("atxHeadingText"),a(u)):(t.consume(u),c)}}const Bxe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],YI=["pre","script","style","textarea"],zxe={concrete:!0,name:"htmlFlow",resolveTo:Vxe,tokenize:$xe},jxe={partial:!0,tokenize:Gxe},Hxe={partial:!0,tokenize:Wxe};function Vxe(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function $xe(t,e,n){const r=this;let i,s,o,a,l;return c;function c(B){return u(B)}function u(B){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(B),d}function d(B){return B===33?(t.consume(B),h):B===47?(t.consume(B),s=!0,w):B===63?(t.consume(B),i=3,r.interrupt?e:D):Ei(B)?(t.consume(B),o=String.fromCharCode(B),y):n(B)}function h(B){return B===45?(t.consume(B),i=2,p):B===91?(t.consume(B),i=5,a=0,x):Ei(B)?(t.consume(B),i=4,r.interrupt?e:D):n(B)}function p(B){return B===45?(t.consume(B),r.interrupt?e:D):n(B)}function x(B){const K="CDATA[";return B===K.charCodeAt(a++)?(t.consume(B),a===K.length?r.interrupt?e:z:x):n(B)}function w(B){return Ei(B)?(t.consume(B),o=String.fromCharCode(B),y):n(B)}function y(B){if(B===null||B===47||B===62||Pn(B)){const K=B===47,ie=o.toLowerCase();return!K&&!s&&YI.includes(ie)?(i=1,r.interrupt?e(B):z(B)):Bxe.includes(o.toLowerCase())?(i=6,K?(t.consume(B),v):r.interrupt?e(B):z(B)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(B):s?S(B):E(B))}return B===45||ui(B)?(t.consume(B),o+=String.fromCharCode(B),y):n(B)}function v(B){return B===62?(t.consume(B),r.interrupt?e:z):n(B)}function S(B){return tn(B)?(t.consume(B),S):M(B)}function E(B){return B===47?(t.consume(B),M):B===58||B===95||Ei(B)?(t.consume(B),C):tn(B)?(t.consume(B),E):M(B)}function C(B){return B===45||B===46||B===58||B===95||ui(B)?(t.consume(B),C):T(B)}function T(B){return B===61?(t.consume(B),A):tn(B)?(t.consume(B),T):E(B)}function A(B){return B===null||B===60||B===61||B===62||B===96?n(B):B===34||B===39?(t.consume(B),l=B,k):tn(B)?(t.consume(B),A):R(B)}function k(B){return B===l?(t.consume(B),l=null,P):B===null||Nt(B)?n(B):(t.consume(B),k)}function R(B){return B===null||B===34||B===39||B===47||B===60||B===61||B===62||B===96||Pn(B)?T(B):(t.consume(B),R)}function P(B){return B===47||B===62||tn(B)?E(B):n(B)}function M(B){return B===62?(t.consume(B),I):n(B)}function I(B){return B===null||Nt(B)?z(B):tn(B)?(t.consume(B),I):n(B)}function z(B){return B===45&&i===2?(t.consume(B),q):B===60&&i===1?(t.consume(B),Q):B===62&&i===4?(t.consume(B),ee):B===63&&i===3?(t.consume(B),D):B===93&&i===5?(t.consume(B),F):Nt(B)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(jxe,W,H)(B)):B===null||Nt(B)?(t.exit("htmlFlowData"),H(B)):(t.consume(B),z)}function H(B){return t.check(Hxe,j,W)(B)}function j(B){return t.enter("lineEnding"),t.consume(B),t.exit("lineEnding"),J}function J(B){return B===null||Nt(B)?H(B):(t.enter("htmlFlowData"),z(B))}function q(B){return B===45?(t.consume(B),D):z(B)}function Q(B){return B===47?(t.consume(B),o="",O):z(B)}function O(B){if(B===62){const K=o.toLowerCase();return YI.includes(K)?(t.consume(B),ee):z(B)}return Ei(B)&&o.length<8?(t.consume(B),o+=String.fromCharCode(B),O):z(B)}function F(B){return B===93?(t.consume(B),D):z(B)}function D(B){return B===62?(t.consume(B),ee):B===45&&i===2?(t.consume(B),D):z(B)}function ee(B){return B===null||Nt(B)?(t.exit("htmlFlowData"),W(B)):(t.consume(B),ee)}function W(B){return t.exit("htmlFlow"),e(B)}}function Wxe(t,e,n){const r=this;return i;function i(o){return Nt(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function Gxe(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(kg,e,n)}}const Xxe={name:"htmlText",tokenize:qxe};function qxe(t,e,n){const r=this;let i,s,o;return a;function a(D){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(D),l}function l(D){return D===33?(t.consume(D),c):D===47?(t.consume(D),T):D===63?(t.consume(D),E):Ei(D)?(t.consume(D),R):n(D)}function c(D){return D===45?(t.consume(D),u):D===91?(t.consume(D),s=0,x):Ei(D)?(t.consume(D),S):n(D)}function u(D){return D===45?(t.consume(D),p):n(D)}function d(D){return D===null?n(D):D===45?(t.consume(D),h):Nt(D)?(o=d,Q(D)):(t.consume(D),d)}function h(D){return D===45?(t.consume(D),p):d(D)}function p(D){return D===62?q(D):D===45?h(D):d(D)}function x(D){const ee="CDATA[";return D===ee.charCodeAt(s++)?(t.consume(D),s===ee.length?w:x):n(D)}function w(D){return D===null?n(D):D===93?(t.consume(D),y):Nt(D)?(o=w,Q(D)):(t.consume(D),w)}function y(D){return D===93?(t.consume(D),v):w(D)}function v(D){return D===62?q(D):D===93?(t.consume(D),v):w(D)}function S(D){return D===null||D===62?q(D):Nt(D)?(o=S,Q(D)):(t.consume(D),S)}function E(D){return D===null?n(D):D===63?(t.consume(D),C):Nt(D)?(o=E,Q(D)):(t.consume(D),E)}function C(D){return D===62?q(D):E(D)}function T(D){return Ei(D)?(t.consume(D),A):n(D)}function A(D){return D===45||ui(D)?(t.consume(D),A):k(D)}function k(D){return Nt(D)?(o=k,Q(D)):tn(D)?(t.consume(D),k):q(D)}function R(D){return D===45||ui(D)?(t.consume(D),R):D===47||D===62||Pn(D)?P(D):n(D)}function P(D){return D===47?(t.consume(D),q):D===58||D===95||Ei(D)?(t.consume(D),M):Nt(D)?(o=P,Q(D)):tn(D)?(t.consume(D),P):q(D)}function M(D){return D===45||D===46||D===58||D===95||ui(D)?(t.consume(D),M):I(D)}function I(D){return D===61?(t.consume(D),z):Nt(D)?(o=I,Q(D)):tn(D)?(t.consume(D),I):P(D)}function z(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(t.consume(D),i=D,H):Nt(D)?(o=z,Q(D)):tn(D)?(t.consume(D),z):(t.consume(D),j)}function H(D){return D===i?(t.consume(D),i=void 0,J):D===null?n(D):Nt(D)?(o=H,Q(D)):(t.consume(D),H)}function j(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||Pn(D)?P(D):(t.consume(D),j)}function J(D){return D===47||D===62||Pn(D)?P(D):n(D)}function q(D){return D===62?(t.consume(D),t.exit("htmlTextData"),t.exit("htmlText"),e):n(D)}function Q(D){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(D),t.exit("lineEnding"),O}function O(D){return tn(D)?un(t,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):F(D)}function F(D){return t.enter("htmlTextData"),o(D)}}const QA={name:"labelEnd",resolveAll:Qxe,resolveTo:Zxe,tokenize:e0e},Kxe={tokenize:t0e},Yxe={tokenize:n0e},Jxe={tokenize:r0e};function Qxe(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Ss(t,0,t.length,n),t}function Zxe(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",l,e],["enter",c,e]],a=Ws(a,t.slice(s+1,s+r+3)),a=Ws(a,[["enter",u,e]]),a=Ws(a,Pw(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=Ws(a,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),a=Ws(a,t.slice(o+1)),a=Ws(a,[["exit",l,e]]),Ss(t,s,t.length,a),t}function e0e(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(h){return s?s._inactive?d(h):(o=r.parser.defined.includes(ko(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),l):n(h)}function l(h){return h===40?t.attempt(Kxe,u,o?u:d)(h):h===91?t.attempt(Yxe,u,o?c:d)(h):o?u(h):d(h)}function c(h){return t.attempt(Jxe,u,d)(h)}function u(h){return e(h)}function d(h){return s._balanced=!0,n(h)}}function t0e(t,e,n){return r;function r(d){return t.enter("resource"),t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),i}function i(d){return Pn(d)?Kp(t,s)(d):s(d)}function s(d){return d===41?u(d):QH(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Pn(d)?Kp(t,l)(d):u(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?e6(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):u(d)}function c(d){return Pn(d)?Kp(t,u)(d):u(d)}function u(d){return d===41?(t.enter("resourceMarker"),t.consume(d),t.exit("resourceMarker"),t.exit("resource"),e):n(d)}}function n0e(t,e,n){const r=this;return i;function i(a){return ZH.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(ko(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function r0e(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const i0e={name:"labelStartImage",resolveAll:QA.resolveAll,tokenize:s0e};function s0e(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const o0e={name:"labelStartLink",resolveAll:QA.resolveAll,tokenize:a0e};function a0e(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const B1={name:"lineEnding",tokenize:l0e};function l0e(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),un(t,e,"linePrefix")}}const ix={name:"thematicBreak",tokenize:c0e};function c0e(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Nt(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),tn(c)?un(t,a,"whitespace")(c):a(c))}}const ji={continuation:{tokenize:h0e},exit:m0e,name:"list",tokenize:f0e},u0e={partial:!0,tokenize:g0e},d0e={partial:!0,tokenize:p0e};function f0e(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(p){const x=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:WC(p)){if(r.containerState.type||(r.containerState.type=x,t.enter(x,{_container:!0})),x==="listUnordered")return t.enter("listItemPrefix"),p===42||p===45?t.check(ix,n,c)(p):c(p);if(!r.interrupt||p===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(p)}return n(p)}function l(p){return WC(p)&&++o<10?(t.consume(p),l):(!r.interrupt||o<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(t.exit("listItemValue"),c(p)):n(p)}function c(p){return t.enter("listItemMarker"),t.consume(p),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,t.check(kg,r.interrupt?n:u,t.attempt(u0e,h,d))}function u(p){return r.containerState.initialBlankLine=!0,s++,h(p)}function d(p){return tn(p)?(t.enter("listItemPrefixWhitespace"),t.consume(p),t.exit("listItemPrefixWhitespace"),h):n(p)}function h(p){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(p)}}function h0e(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(kg,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,un(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!tn(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(d0e,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,un(t,t.attempt(ji,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function p0e(t,e,n){const r=this;return un(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function m0e(t){t.exit(this.containerState.type)}function g0e(t,e,n){const r=this;return un(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!tn(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const JI={name:"setextUnderline",resolveTo:v0e,tokenize:y0e};function v0e(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function y0e(t,e,n){const r=this;let i;return s;function s(c){let u=r.events.length,d;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){d=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),tn(c)?un(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Nt(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const x0e={tokenize:w0e};function w0e(t){const e=this,n=t.attempt(kg,r,t.attempt(this.parser.constructs.flowInitial,i,un(t,t.attempt(this.parser.constructs.flow,i,t.attempt(Cxe,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const b0e={resolveAll:n6()},S0e=t6("string"),_0e=t6("text");function t6(t){return{resolveAll:n6(t==="text"?E0e:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(u){return c(u)?s(u):a(u)}function a(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const d=i[u];let h=-1;if(d)for(;++h<d.length;){const p=d[h];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function n6(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function E0e(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const C0e={42:ji,43:ji,45:ji,48:ji,49:ji,50:ji,51:ji,52:ji,53:ji,54:ji,55:ji,56:ji,57:ji,62:qH},M0e={91:kxe},T0e={[-2]:U1,[-1]:U1,32:U1},A0e={35:Oxe,42:ix,45:[JI,ix],60:zxe,61:JI,95:ix,96:KI,126:KI},R0e={38:YH,92:KH},k0e={[-5]:B1,[-4]:B1,[-3]:B1,33:i0e,38:YH,42:GC,60:[oxe,Xxe],91:o0e,92:[Ixe,KH],93:QA,95:GC,96:xxe},N0e={null:[GC,b0e]},P0e={null:[42,95]},D0e={null:[]},I0e=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:P0e,contentInitial:M0e,disable:D0e,document:C0e,flow:A0e,flowInitial:T0e,insideSpan:N0e,string:R0e,text:k0e},Symbol.toStringTag,{value:"Module"}));function L0e(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const l={attempt:k(T),check:k(A),consume:S,enter:E,exit:C,interrupt:k(A,{interrupt:!0})},c={code:null,containerState:{},defineSkip:w,events:[],now:x,parser:t,previous:null,sliceSerialize:h,sliceStream:p,write:d};let u=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function d(I){return o=Ws(o,I),y(),o[o.length-1]!==null?[]:(R(e,0),c.events=Pw(s,c.events,c),c.events)}function h(I,z){return F0e(p(I),z)}function p(I){return O0e(o,I)}function x(){const{_bufferIndex:I,_index:z,line:H,column:j,offset:J}=r;return{_bufferIndex:I,_index:z,line:H,column:j,offset:J}}function w(I){i[I.line]=I.column,M()}function y(){let I;for(;r._index<o.length;){const z=o[r._index];if(typeof z=="string")for(I=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===I&&r._bufferIndex<z.length;)v(z.charCodeAt(r._bufferIndex));else v(z)}}function v(I){u=u(I)}function S(I){Nt(I)?(r.line++,r.column=1,r.offset+=I===-3?2:1,M()):I!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=I}function E(I,z){const H=z||{};return H.type=I,H.start=x(),c.events.push(["enter",H,c]),a.push(H),H}function C(I){const z=a.pop();return z.end=x(),c.events.push(["exit",z,c]),z}function T(I,z){R(I,z.from)}function A(I,z){z.restore()}function k(I,z){return H;function H(j,J,q){let Q,O,F,D;return Array.isArray(j)?W(j):"tokenize"in j?W([j]):ee(j);function ee(oe){return Z;function Z(pe){const ye=pe!==null&&oe[pe],ge=pe!==null&&oe.null,je=[...Array.isArray(ye)?ye:ye?[ye]:[],...Array.isArray(ge)?ge:ge?[ge]:[]];return W(je)(pe)}}function W(oe){return Q=oe,O=0,oe.length===0?q:B(oe[O])}function B(oe){return Z;function Z(pe){return D=P(),F=oe,oe.partial||(c.currentConstruct=oe),oe.name&&c.parser.constructs.disable.null.includes(oe.name)?ie():oe.tokenize.call(z?Object.assign(Object.create(c),z):c,l,K,ie)(pe)}}function K(oe){return I(F,D),J}function ie(oe){return D.restore(),++O<Q.length?B(Q[O]):q}}}function R(I,z){I.resolveAll&&!s.includes(I)&&s.push(I),I.resolve&&Ss(c.events,z,c.events.length-z,I.resolve(c.events.slice(z),c)),I.resolveTo&&(c.events=I.resolveTo(c.events,c))}function P(){const I=x(),z=c.previous,H=c.currentConstruct,j=c.events.length,J=Array.from(a);return{from:j,restore:q};function q(){r=I,c.previous=z,c.currentConstruct=H,c.events.length=j,a=J,M()}}function M(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function O0e(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function F0e(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function U0e(t){const r={constructs:GH([I0e,...(t||{}).extensions||[]]),content:i(Zye),defined:[],document:i(txe),flow:i(x0e),lazy:{},string:i(S0e),text:i(_0e)};return r;function i(s){return o;function o(a){return L0e(r,s,a)}}}function B0e(t){for(;!JH(t););return t}const QI=/[\0\t\n\r]/g;function z0e(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const l=[];let c,u,d,h,p;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,e="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(QI.lastIndex=d,c=QI.exec(s),h=c&&c.index!==void 0?c.index:s.length,p=s.charCodeAt(h),!c){e=s.slice(d);break}if(p===10&&d===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<h&&(l.push(s.slice(d,h)),t+=h-d),p){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}d=h+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const j0e=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function H0e(t){return t.replace(j0e,V0e)}function V0e(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return XH(n.slice(s?2:1),s?16:10)}return JA(n)||t}const r6={}.hasOwnProperty;function $0e(t,e,n){return typeof e!="string"&&(n=e,e=void 0),W0e(n)(B0e(U0e(n).document().write(z0e()(t,e,!0))))}function W0e(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(wt),autolinkProtocol:P,autolinkEmail:P,atxHeading:s(pt),blockQuote:s(ge),characterEscape:P,characterReference:P,codeFenced:s(je),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(je,o),codeText:s(We,o),codeTextData:P,data:P,codeFlowValue:P,definition:s(it),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(te),hardBreakEscape:s(Be),hardBreakTrailing:s(Be),htmlFlow:s(ut,o),htmlFlowData:P,htmlText:s(ut,o),htmlTextData:P,image:s(Xe),label:o,link:s(wt),listItem:s(Pe),listItemValue:h,listOrdered:s(Ae,d),listUnordered:s(Ae),paragraph:s(ot),reference:B,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(pt),strong:s(Y),thematicBreak:s(ne)},exit:{atxHeading:l(),atxHeadingSequence:T,autolink:l(),autolinkEmail:ye,autolinkProtocol:pe,blockQuote:l(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:ie,characterReferenceMarkerNumeric:ie,characterReferenceValue:oe,characterReference:Z,codeFenced:l(y),codeFencedFence:w,codeFencedFenceInfo:p,codeFencedFenceMeta:x,codeFlowValue:M,codeIndented:l(v),codeText:l(J),codeTextData:M,data:M,definition:l(),definitionDestinationString:C,definitionLabelString:S,definitionTitleString:E,emphasis:l(),hardBreakEscape:l(z),hardBreakTrailing:l(z),htmlFlow:l(H),htmlFlowData:M,htmlText:l(j),htmlTextData:M,image:l(Q),label:F,labelText:O,lineEnding:I,link:l(q),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:K,resourceDestinationString:D,resourceTitleString:ee,resource:W,setextHeading:l(R),setextHeadingLineSequence:k,setextHeadingText:A,strong:l(),thematicBreak:l()}};i6(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(X){let se={type:"root",children:[]};const ae={stack:[se],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:u,data:n},Ce=[];let Re=-1;for(;++Re<X.length;)if(X[Re][1].type==="listOrdered"||X[Re][1].type==="listUnordered")if(X[Re][0]==="enter")Ce.push(Re);else{const ue=Ce.pop();Re=i(X,ue,Re)}for(Re=-1;++Re<X.length;){const ue=e[X[Re][0]];r6.call(ue,X[Re][1].type)&&ue[X[Re][1].type].call(Object.assign({sliceSerialize:X[Re][2].sliceSerialize},ae),X[Re][1])}if(ae.tokenStack.length>0){const ue=ae.tokenStack[ae.tokenStack.length-1];(ue[1]||ZI).call(ae,void 0,ue[0])}for(se.position={start:Bl(X.length>0?X[0][1].start:{line:1,column:1,offset:0}),end:Bl(X.length>0?X[X.length-2][1].end:{line:1,column:1,offset:0})},Re=-1;++Re<e.transforms.length;)se=e.transforms[Re](se)||se;return se}function i(X,se,ae){let Ce=se-1,Re=-1,ue=!1,Te,de,_e,Qe;for(;++Ce<=ae;){const Ye=X[Ce];switch(Ye[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ye[0]==="enter"?Re++:Re--,Qe=void 0;break}case"lineEndingBlank":{Ye[0]==="enter"&&(Te&&!Qe&&!Re&&!_e&&(_e=Ce),Qe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Qe=void 0}if(!Re&&Ye[0]==="enter"&&Ye[1].type==="listItemPrefix"||Re===-1&&Ye[0]==="exit"&&(Ye[1].type==="listUnordered"||Ye[1].type==="listOrdered")){if(Te){let qe=Ce;for(de=void 0;qe--;){const mt=X[qe];if(mt[1].type==="lineEnding"||mt[1].type==="lineEndingBlank"){if(mt[0]==="exit")continue;de&&(X[de][1].type="lineEndingBlank",ue=!0),mt[1].type="lineEnding",de=qe}else if(!(mt[1].type==="linePrefix"||mt[1].type==="blockQuotePrefix"||mt[1].type==="blockQuotePrefixWhitespace"||mt[1].type==="blockQuoteMarker"||mt[1].type==="listItemIndent"))break}_e&&(!de||_e<de)&&(Te._spread=!0),Te.end=Object.assign({},de?X[de][1].start:Ye[1].end),X.splice(de||Ce,0,["exit",Te,Ye[2]]),Ce++,ae++}if(Ye[1].type==="listItemPrefix"){const qe={type:"listItem",_spread:!1,start:Object.assign({},Ye[1].start),end:void 0};Te=qe,X.splice(Ce,0,["enter",qe,Ye[2]]),Ce++,ae++,_e=void 0,Qe=!0}}}return X[se][1]._spread=ue,ae}function s(X,se){return ae;function ae(Ce){a.call(this,X(Ce),Ce),se&&se.call(this,Ce)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(X,se,ae){this.stack[this.stack.length-1].children.push(X),this.stack.push(X),this.tokenStack.push([se,ae||void 0]),X.position={start:Bl(se.start),end:void 0}}function l(X){return se;function se(ae){X&&X.call(this,ae),c.call(this,ae)}}function c(X,se){const ae=this.stack.pop(),Ce=this.tokenStack.pop();if(Ce)Ce[0].type!==X.type&&(se?se.call(this,X,Ce[0]):(Ce[1]||ZI).call(this,X,Ce[0]));else throw new Error("Cannot close `"+X.type+"` ("+qp({start:X.start,end:X.end})+"): its not open");ae.position.end=Bl(X.end)}function u(){return YA(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(X){if(this.data.expectingFirstListItemValue){const se=this.stack[this.stack.length-2];se.start=Number.parseInt(this.sliceSerialize(X),10),this.data.expectingFirstListItemValue=void 0}}function p(){const X=this.resume(),se=this.stack[this.stack.length-1];se.lang=X}function x(){const X=this.resume(),se=this.stack[this.stack.length-1];se.meta=X}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const X=this.resume(),se=this.stack[this.stack.length-1];se.value=X.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const X=this.resume(),se=this.stack[this.stack.length-1];se.value=X.replace(/(\r?\n|\r)$/g,"")}function S(X){const se=this.resume(),ae=this.stack[this.stack.length-1];ae.label=se,ae.identifier=ko(this.sliceSerialize(X)).toLowerCase()}function E(){const X=this.resume(),se=this.stack[this.stack.length-1];se.title=X}function C(){const X=this.resume(),se=this.stack[this.stack.length-1];se.url=X}function T(X){const se=this.stack[this.stack.length-1];if(!se.depth){const ae=this.sliceSerialize(X).length;se.depth=ae}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function k(X){const se=this.stack[this.stack.length-1];se.depth=this.sliceSerialize(X).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function P(X){const ae=this.stack[this.stack.length-1].children;let Ce=ae[ae.length-1];(!Ce||Ce.type!=="text")&&(Ce=L(),Ce.position={start:Bl(X.start),end:void 0},ae.push(Ce)),this.stack.push(Ce)}function M(X){const se=this.stack.pop();se.value+=this.sliceSerialize(X),se.position.end=Bl(X.end)}function I(X){const se=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ae=se.children[se.children.length-1];ae.position.end=Bl(X.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(se.type)&&(P.call(this,X),M.call(this,X))}function z(){this.data.atHardBreak=!0}function H(){const X=this.resume(),se=this.stack[this.stack.length-1];se.value=X}function j(){const X=this.resume(),se=this.stack[this.stack.length-1];se.value=X}function J(){const X=this.resume(),se=this.stack[this.stack.length-1];se.value=X}function q(){const X=this.stack[this.stack.length-1];if(this.data.inReference){const se=this.data.referenceType||"shortcut";X.type+="Reference",X.referenceType=se,delete X.url,delete X.title}else delete X.identifier,delete X.label;this.data.referenceType=void 0}function Q(){const X=this.stack[this.stack.length-1];if(this.data.inReference){const se=this.data.referenceType||"shortcut";X.type+="Reference",X.referenceType=se,delete X.url,delete X.title}else delete X.identifier,delete X.label;this.data.referenceType=void 0}function O(X){const se=this.sliceSerialize(X),ae=this.stack[this.stack.length-2];ae.label=H0e(se),ae.identifier=ko(se).toLowerCase()}function F(){const X=this.stack[this.stack.length-1],se=this.resume(),ae=this.stack[this.stack.length-1];if(this.data.inReference=!0,ae.type==="link"){const Ce=X.children;ae.children=Ce}else ae.alt=se}function D(){const X=this.resume(),se=this.stack[this.stack.length-1];se.url=X}function ee(){const X=this.resume(),se=this.stack[this.stack.length-1];se.title=X}function W(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function K(X){const se=this.resume(),ae=this.stack[this.stack.length-1];ae.label=se,ae.identifier=ko(this.sliceSerialize(X)).toLowerCase(),this.data.referenceType="full"}function ie(X){this.data.characterReferenceType=X.type}function oe(X){const se=this.sliceSerialize(X),ae=this.data.characterReferenceType;let Ce;ae?(Ce=XH(se,ae==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ce=JA(se);const Re=this.stack[this.stack.length-1];Re.value+=Ce}function Z(X){const se=this.stack.pop();se.position.end=Bl(X.end)}function pe(X){M.call(this,X);const se=this.stack[this.stack.length-1];se.url=this.sliceSerialize(X)}function ye(X){M.call(this,X);const se=this.stack[this.stack.length-1];se.url="mailto:"+this.sliceSerialize(X)}function ge(){return{type:"blockquote",children:[]}}function je(){return{type:"code",lang:null,meta:null,value:""}}function We(){return{type:"inlineCode",value:""}}function it(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function te(){return{type:"emphasis",children:[]}}function pt(){return{type:"heading",depth:0,children:[]}}function Be(){return{type:"break"}}function ut(){return{type:"html",value:""}}function Xe(){return{type:"image",title:null,url:"",alt:null}}function wt(){return{type:"link",title:null,url:"",children:[]}}function Ae(X){return{type:"list",ordered:X.type==="listOrdered",start:null,spread:X._spread,children:[]}}function Pe(X){return{type:"listItem",spread:X._spread,checked:null,children:[]}}function ot(){return{type:"paragraph",children:[]}}function Y(){return{type:"strong",children:[]}}function L(){return{type:"text",value:""}}function ne(){return{type:"thematicBreak"}}}function Bl(t){return{line:t.line,column:t.column,offset:t.offset}}function i6(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?i6(t,r):G0e(t,r)}}function G0e(t,e){let n;for(n in e)if(r6.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function ZI(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+qp({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+qp({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+qp({start:e.start,end:e.end})+") is still open")}function X0e(t){const e=this;e.parser=n;function n(r){return $0e(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function q0e(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function K0e(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function Y0e(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function J0e(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Q0e(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Z0e(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Uh(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function ewe(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function twe(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function s6(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function nwe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return s6(t,e);const i={src:Uh(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function rwe(t,e){const n={src:Uh(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function iwe(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function swe(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return s6(t,e);const i={href:Uh(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function owe(t,e){const n={href:Uh(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function awe(t,e,n){const r=t.all(e),i=n?lwe(n):o6(e),s={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let d;u&&u.type==="element"&&u.tagName==="p"?d=u:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const u=r[a];(i||a!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function lwe(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=o6(n[r])}return e}function o6(t){const e=t.spread;return e??t.children.length>1}function cwe(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function uwe(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function dwe(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function fwe(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function hwe(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=GA(e.children[1]),l=BH(e.children[e.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function pwe(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const d=e.children[l],h={},p=o?o[l]:void 0;p&&(h.align=p);let x={type:"element",tagName:s,properties:h,children:[]};d&&(x.children=t.all(d),t.patch(d,x),x=t.applyData(d,x)),c.push(x)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function mwe(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const eL=9,tL=32;function gwe(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(nL(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(nL(e.slice(i),i>0,!1)),s.join("")}function nL(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===eL||s===tL;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===eL||s===tL;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function vwe(t,e){const n={type:"text",value:gwe(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function ywe(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const xwe={blockquote:q0e,break:K0e,code:Y0e,delete:J0e,emphasis:Q0e,footnoteReference:Z0e,heading:ewe,html:twe,imageReference:nwe,image:rwe,inlineCode:iwe,linkReference:swe,link:owe,listItem:awe,list:cwe,paragraph:uwe,root:dwe,strong:fwe,table:hwe,tableCell:mwe,tableRow:pwe,text:vwe,thematicBreak:ywe,toml:gy,yaml:gy,definition:gy,footnoteDefinition:gy};function gy(){}const a6=-1,Dw=0,Yp=1,i0=2,ZA=3,eR=4,tR=5,nR=6,l6=7,c6=8,rL=typeof self=="object"?self:globalThis,wwe=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case Dw:case a6:return n(o,i);case Yp:{const a=n([],i);for(const l of o)a.push(r(l));return a}case i0:{const a=n({},i);for(const[l,c]of o)a[r(l)]=r(c);return a}case ZA:return n(new Date(o),i);case eR:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case tR:{const a=n(new Map,i);for(const[l,c]of o)a.set(r(l),r(c));return a}case nR:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case l6:{const{name:a,message:l}=o;return n(new rL[a](l),i)}case c6:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new rL[s](o),i)};return r},iL=t=>wwe(new Map,t)(0),Jd="",{toString:bwe}={},{keys:Swe}=Object,wp=t=>{const e=typeof t;if(e!=="object"||!t)return[Dw,e];const n=bwe.call(t).slice(8,-1);switch(n){case"Array":return[Yp,Jd];case"Object":return[i0,Jd];case"Date":return[ZA,Jd];case"RegExp":return[eR,Jd];case"Map":return[tR,Jd];case"Set":return[nR,Jd];case"DataView":return[Yp,n]}return n.includes("Array")?[Yp,n]:n.includes("Error")?[l6,n]:[i0,n]},vy=([t,e])=>t===Dw&&(e==="function"||e==="symbol"),_we=(t,e,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=wp(o);switch(a){case Dw:{let u=o;switch(l){case"bigint":a=c6,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([a6],o)}return i([a,u],o)}case Yp:{if(l){let h=o;return l==="DataView"?h=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(o)),i([l,[...h]],o)}const u=[],d=i([a,u],o);for(const h of o)u.push(s(h));return d}case i0:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],d=i([a,u],o);for(const h of Swe(o))(t||!vy(wp(o[h])))&&u.push([s(h),s(o[h])]);return d}case ZA:return i([a,o.toISOString()],o);case eR:{const{source:u,flags:d}=o;return i([a,{source:u,flags:d}],o)}case tR:{const u=[],d=i([a,u],o);for(const[h,p]of o)(t||!(vy(wp(h))||vy(wp(p))))&&u.push([s(h),s(p)]);return d}case nR:{const u=[],d=i([a,u],o);for(const h of o)(t||!vy(wp(h)))&&u.push(s(h));return d}}const{message:c}=o;return i([a,{name:l,message:c}],o)};return s},sL=(t,{json:e,lossy:n}={})=>{const r=[];return _we(!(e||n),!!e,new Map,r)(t),r},s0=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?iL(sL(t,e)):structuredClone(t):(t,e)=>iL(sL(t,e));function Ewe(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Cwe(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Mwe(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Ewe,r=t.options.footnoteBackLabel||Cwe,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),d=String(c.identifier).toUpperCase(),h=Uh(d.toLowerCase());let p=0;const x=[],w=t.footnoteCounts.get(d);for(;w!==void 0&&++p<=w;){x.length>0&&x.push({type:"text",value:" "});let S=typeof n=="string"?n:n(l,p);typeof S=="string"&&(S={type:"text",value:S}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,p),className:["data-footnote-backref"]},children:Array.isArray(S)?S:[S]})}const y=u[u.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const S=y.children[y.children.length-1];S&&S.type==="text"?S.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...x)}else u.push(...x);const v={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:t.wrap(u,!0)};t.patch(c,v),a.push(v)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...s0(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const Iw=function(t){if(t==null)return kwe;if(typeof t=="function")return Lw(t);if(typeof t=="object")return Array.isArray(t)?Twe(t):Awe(t);if(typeof t=="string")return Rwe(t);throw new Error("Expected function, string, or object as test")};function Twe(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=Iw(t[n]);return Lw(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function Awe(t){const e=t;return Lw(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function Rwe(t){return Lw(e);function e(n){return n&&n.type===t}}function Lw(t){return e;function e(n,r,i){return!!(Nwe(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function kwe(){return!0}function Nwe(t){return t!==null&&typeof t=="object"&&"type"in t}const u6=[],Pwe=!0,XC=!1,Dwe="skip";function d6(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=Iw(i),o=r?-1:1;a(t,void 0,[])();function a(l,c,u){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const p=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(p?"<"+p+">":""))+")"})}return h;function h(){let p=u6,x,w,y;if((!e||s(l,c,u[u.length-1]||void 0))&&(p=Iwe(n(l,u)),p[0]===XC))return p;if("children"in l&&l.children){const v=l;if(v.children&&p[0]!==Dwe)for(w=(r?v.children.length:-1)+o,y=u.concat(v);w>-1&&w<v.children.length;){const S=v.children[w];if(x=a(S,w,y)(),x[0]===XC)return x;w=typeof x[1]=="number"?x[1]:w+o}}return p}}}function Iwe(t){return Array.isArray(t)?t:typeof t=="number"?[Pwe,t]:t==null?u6:[t]}function rR(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),d6(t,s,a,i);function a(l,c){const u=c[c.length-1],d=u?u.children.indexOf(l):void 0;return o(l,d,u)}}const qC={}.hasOwnProperty,Lwe={};function Owe(t,e){const n=e||Lwe,r=new Map,i=new Map,s=new Map,o={...xwe,...n.handlers},a={all:c,applyData:Uwe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:Fwe,wrap:zwe};return rR(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const d=u.type==="definition"?r:i,h=String(u.identifier).toUpperCase();d.has(h)||d.set(h,u)}}),a;function l(u,d){const h=u.type,p=a.handlers[h];if(qC.call(a.handlers,h)&&p)return p(a,u,d);if(a.options.passThrough&&a.options.passThrough.includes(h)){if("children"in u){const{children:w,...y}=u,v=s0(y);return v.children=a.all(u),v}return s0(u)}return(a.options.unknownHandler||Bwe)(a,u,d)}function c(u){const d=[];if("children"in u){const h=u.children;let p=-1;for(;++p<h.length;){const x=a.one(h[p],u);if(x){if(p&&h[p-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=oL(x.value)),!Array.isArray(x)&&x.type==="element")){const w=x.children[0];w&&w.type==="text"&&(w.value=oL(w.value))}Array.isArray(x)?d.push(...x):d.push(x)}}}return d}}function Fwe(t,e){t.position&&(e.position=Cye(t))}function Uwe(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,s0(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Bwe(t,e){const n=e.data||{},r="value"in e&&!(qC.call(n,"hProperties")||qC.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function zwe(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function oL(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function aL(t,e){const n=Owe(t,e),r=n.one(t,void 0),i=Mwe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function jwe(t,e){return t&&"run"in t?async function(n,r){const i=aL(n,{file:r,...e});await t.run(i,r)}:function(n,r){return aL(n,{file:r,...t||e})}}function lL(t){if(t)throw t}var sx=Object.prototype.hasOwnProperty,f6=Object.prototype.toString,cL=Object.defineProperty,uL=Object.getOwnPropertyDescriptor,dL=function(e){return typeof Array.isArray=="function"?Array.isArray(e):f6.call(e)==="[object Array]"},fL=function(e){if(!e||f6.call(e)!=="[object Object]")return!1;var n=sx.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&sx.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||sx.call(e,i)},hL=function(e,n){cL&&n.name==="__proto__"?cL(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},pL=function(e,n){if(n==="__proto__")if(sx.call(e,n)){if(uL)return uL(e,n).value}else return;return e[n]},Hwe=function t(){var e,n,r,i,s,o,a=arguments[0],l=1,c=arguments.length,u=!1;for(typeof a=="boolean"&&(u=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(n in e)r=pL(a,n),i=pL(e,n),a!==i&&(u&&i&&(fL(i)||(s=dL(i)))?(s?(s=!1,o=r&&dL(r)?r:[]):o=r&&fL(r)?r:{},hL(a,{name:n,newValue:t(u,o,i)})):typeof i<"u"&&hL(a,{name:n,newValue:i}));return a};const z1=S0(Hwe);function KC(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Vwe(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const u=t[++s];let d=-1;if(l){o(l);return}for(;++d<i.length;)(c[d]===null||c[d]===void 0)&&(c[d]=i[d]);i=c,u?$we(u,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function $we(t,e){let n;return r;function r(...o){const a=t.length>o.length;let l;a&&o.push(i);try{l=t.apply(this,o)}catch(c){const u=c;if(a&&n)throw u;return i(u)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const qo={basename:Wwe,dirname:Gwe,extname:Xwe,join:qwe,sep:"/"};function Wwe(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Ng(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function Gwe(t){if(Ng(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Xwe(t){Ng(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function qwe(...t){let e=-1,n;for(;++e<t.length;)Ng(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Kwe(n)}function Kwe(t){Ng(t);const e=t.codePointAt(0)===47;let n=Ywe(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Ywe(t,e){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Ng(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Jwe={cwd:Qwe};function Qwe(){return"/"}function YC(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Zwe(t){if(typeof t=="string")t=new URL(t);else if(!YC(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return ebe(t)}function ebe(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const j1=["history","path","basename","stem","extname","dirname"];class h6{constructor(e){let n;e?YC(e)?n={path:e}:typeof e=="string"||tbe(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Jwe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<j1.length;){const s=j1[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)j1.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?qo.basename(this.path):void 0}set basename(e){V1(e,"basename"),H1(e,"basename"),this.path=qo.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?qo.dirname(this.path):void 0}set dirname(e){mL(this.basename,"dirname"),this.path=qo.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?qo.extname(this.path):void 0}set extname(e){if(H1(e,"extname"),mL(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=qo.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){YC(e)&&(e=Zwe(e)),V1(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?qo.basename(this.path,this.extname):void 0}set stem(e){V1(e,"stem"),H1(e,"stem"),this.path=qo.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new pi(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function H1(t,e){if(t&&t.includes(qo.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+qo.sep+"`")}function V1(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function mL(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function tbe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const nbe=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},rbe={}.hasOwnProperty;class iR extends nbe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Vwe()}copy(){const e=new iR;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(z1(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(G1("data",this.frozen),this.namespace[e]=n,this):rbe.call(this.namespace,e)&&this.namespace[e]||void 0:e?(G1("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=yy(e),r=this.parser||this.Parser;return $1("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),$1("process",this.parser||this.Parser),W1("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=yy(e),l=r.parse(a);r.run(l,a,function(u,d,h){if(u||!d||!h)return c(u);const p=d,x=r.stringify(p,h);obe(x)?h.value=x:h.result=x,c(u,h)});function c(u,d){u||!d?o(u):s?s(d):n(void 0,d)}}}processSync(e){let n=!1,r;return this.freeze(),$1("processSync",this.parser||this.Parser),W1("processSync",this.compiler||this.Compiler),this.process(e,i),vL("processSync","process",n),r;function i(s,o){n=!0,lL(s),r=o}}run(e,n,r){gL(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=yy(n);i.run(e,l,c);function c(u,d,h){const p=d||e;u?a(u):o?o(p):r(void 0,p,h)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),vL("runSync","run",r),i;function s(o,a){lL(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=yy(n),i=this.compiler||this.Compiler;return W1("stringify",i),gL(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(G1("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...d]=c;l(u,d)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=z1(!0,i.settings,c.settings))}function a(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const d=c[u];s(d)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let d=-1,h=-1;for(;++d<r.length;)if(r[d][0]===c){h=d;break}if(h===-1)r.push([c,...u]);else if(u.length>0){let[p,...x]=u;const w=r[h][1];KC(w)&&KC(p)&&(p=z1(!0,w,p)),r[h]=[c,p,...x]}}}}const ibe=new iR().freeze();function $1(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function W1(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function G1(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function gL(t){if(!KC(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function vL(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function yy(t){return sbe(t)?t:new h6(t)}function sbe(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function obe(t){return typeof t=="string"||abe(t)}function abe(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const lbe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",yL=[],xL={allowDangerousHtml:!0},cbe=/^(https?|ircs?|mailto|xmpp)$/i,ube=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function dbe(t){const e=fbe(t),n=hbe(t);return pbe(e.runSync(e.parse(n),n),t)}function fbe(t){const e=t.rehypePlugins||yL,n=t.remarkPlugins||yL,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...xL}:xL;return ibe().use(X0e).use(n).use(jwe,r).use(e)}function hbe(t){const e=t.children||"",n=new h6;return typeof e=="string"&&(n.value=e),n}function pbe(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,l=e.urlTransform||mbe;for(const u of ube)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+lbe+u.id,void 0);return e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),rR(t,c),kye(t,{Fragment:m.Fragment,components:i,ignoreInvalidStyle:!0,jsx:m.jsx,jsxs:m.jsxs,passKeys:!0,passNode:!0});function c(u,d,h){if(u.type==="raw"&&h&&typeof d=="number")return o?h.children.splice(d,1):h.children[d]={type:"text",value:u.value},d;if(u.type==="element"){let p;for(p in F1)if(Object.hasOwn(F1,p)&&Object.hasOwn(u.properties,p)){const x=u.properties[p],w=F1[p];(w===null||w.includes(u.tagName))&&(u.properties[p]=l(String(x||""),p,u))}}if(u.type==="element"){let p=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!p&&r&&typeof d=="number"&&(p=!r(u,d,h)),p&&h&&typeof d=="number")return a&&u.children?h.children.splice(d,1,...u.children):h.children.splice(d,1),d}}}function mbe(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||cbe.test(t.slice(0,e))?t:""}function wL(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}function gbe(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function vbe(t,e,n){const i=Iw((n||{}).ignore||[]),s=ybe(e);let o=-1;for(;++o<s.length;)d6(t,"text",a);function a(c,u){let d=-1,h;for(;++d<u.length;){const p=u[d],x=h?h.children:void 0;if(i(p,x?x.indexOf(p):void 0,h))return;h=p}if(h)return l(c,u)}function l(c,u){const d=u[u.length-1],h=s[o][0],p=s[o][1];let x=0;const y=d.children.indexOf(c);let v=!1,S=[];h.lastIndex=0;let E=h.exec(c.value);for(;E;){const C=E.index,T={index:E.index,input:E.input,stack:[...u,c]};let A=p(...E,T);if(typeof A=="string"&&(A=A.length>0?{type:"text",value:A}:void 0),A===!1?h.lastIndex=C+1:(x!==C&&S.push({type:"text",value:c.value.slice(x,C)}),Array.isArray(A)?S.push(...A):A&&S.push(A),x=C+E[0].length,v=!0),!h.global)break;E=h.exec(c.value)}return v?(x<c.value.length&&S.push({type:"text",value:c.value.slice(x)}),d.children.splice(y,1,...S)):S=[c],y+S.length}}function ybe(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([xbe(i[0]),wbe(i[1])])}return e}function xbe(t){return typeof t=="string"?new RegExp(gbe(t),"g"):t}function wbe(t){return typeof t=="function"?t:function(){return t}}const X1="phrasing",q1=["autolink","link","image","label"];function bbe(){return{transforms:[Abe],enter:{literalAutolink:_be,literalAutolinkEmail:K1,literalAutolinkHttp:K1,literalAutolinkWww:K1},exit:{literalAutolink:Tbe,literalAutolinkEmail:Mbe,literalAutolinkHttp:Ebe,literalAutolinkWww:Cbe}}}function Sbe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:X1,notInConstruct:q1},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:X1,notInConstruct:q1},{character:":",before:"[ps]",after:"\\/",inConstruct:X1,notInConstruct:q1}]}}function _be(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function K1(t){this.config.enter.autolinkProtocol.call(this,t)}function Ebe(t){this.config.exit.autolinkProtocol.call(this,t)}function Cbe(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function Mbe(t){this.config.exit.autolinkEmail.call(this,t)}function Tbe(t){this.exit(t)}function Abe(t){vbe(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Rbe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),kbe]],{ignore:["link","linkReference"]})}function Rbe(t,e,n,r,i){let s="";if(!p6(i)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!Nbe(n)))return!1;const o=Pbe(n+r);if(!o[0])return!1;const a={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[a,{type:"text",value:o[1]}]:a}function kbe(t,e,n,r){return!p6(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function Nbe(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function Pbe(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=wL(t,"(");let s=wL(t,")");for(;r!==-1&&i>s;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),s++;return[t,n]}function p6(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||ad(n)||Nw(n))&&(!e||n!==47)}m6.peek=jbe;function Dbe(){this.buffer()}function Ibe(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function Lbe(){this.buffer()}function Obe(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function Fbe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ko(this.sliceSerialize(t)).toLowerCase(),n.label=e}function Ube(t){this.exit(t)}function Bbe(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=ko(this.sliceSerialize(t)).toLowerCase(),n.label=e}function zbe(t){this.exit(t)}function jbe(){return"["}function m6(t,e,n,r){const i=n.createTracker(r);let s=i.move("[^");const o=n.enter("footnoteReference"),a=n.enter("reference");return s+=i.move(n.safe(n.associationId(t),{after:"]",before:s})),a(),o(),s+=i.move("]"),s}function Hbe(){return{enter:{gfmFootnoteCallString:Dbe,gfmFootnoteCall:Ibe,gfmFootnoteDefinitionLabelString:Lbe,gfmFootnoteDefinition:Obe},exit:{gfmFootnoteCallString:Fbe,gfmFootnoteCall:Ube,gfmFootnoteDefinitionLabelString:Bbe,gfmFootnoteDefinition:zbe}}}function Vbe(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:m6},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,s,o){const a=s.createTracker(o);let l=a.move("[^");const c=s.enter("footnoteDefinition"),u=s.enter("label");return l+=a.move(s.safe(s.associationId(r),{before:l,after:"]"})),u(),l+=a.move("]:"),r.children&&r.children.length>0&&(a.shift(4),l+=a.move((e?`
`:" ")+s.indentLines(s.containerFlow(r,a.current()),e?g6:$be))),c(),l}}function $be(t,e,n){return e===0?t:g6(t,e,n)}function g6(t,e,n){return(n?"":"    ")+t}const Wbe=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];v6.peek=Ybe;function Gbe(){return{canContainEols:["delete"],enter:{strikethrough:qbe},exit:{strikethrough:Kbe}}}function Xbe(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Wbe}],handlers:{delete:v6}}}function qbe(t){this.enter({type:"delete",children:[]},t)}function Kbe(t){this.exit(t)}function v6(t,e,n,r){const i=n.createTracker(r),s=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),s(),o}function Ybe(){return"~"}function Jbe(t){return t.length}function Qbe(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||Jbe,s=[],o=[],a=[],l=[];let c=0,u=-1;for(;++u<t.length;){const w=[],y=[];let v=-1;for(t[u].length>c&&(c=t[u].length);++v<t[u].length;){const S=Zbe(t[u][v]);if(n.alignDelimiters!==!1){const E=i(S);y[v]=E,(l[v]===void 0||E>l[v])&&(l[v]=E)}w.push(S)}o[u]=w,a[u]=y}let d=-1;if(typeof r=="object"&&"length"in r)for(;++d<c;)s[d]=bL(r[d]);else{const w=bL(r);for(;++d<c;)s[d]=w}d=-1;const h=[],p=[];for(;++d<c;){const w=s[d];let y="",v="";w===99?(y=":",v=":"):w===108?y=":":w===114&&(v=":");let S=n.alignDelimiters===!1?1:Math.max(1,l[d]-y.length-v.length);const E=y+"-".repeat(S)+v;n.alignDelimiters!==!1&&(S=y.length+S+v.length,S>l[d]&&(l[d]=S),p[d]=S),h[d]=E}o.splice(1,0,h),a.splice(1,0,p),u=-1;const x=[];for(;++u<o.length;){const w=o[u],y=a[u];d=-1;const v=[];for(;++d<c;){const S=w[d]||"";let E="",C="";if(n.alignDelimiters!==!1){const T=l[d]-(y[d]||0),A=s[d];A===114?E=" ".repeat(T):A===99?T%2?(E=" ".repeat(T/2+.5),C=" ".repeat(T/2-.5)):(E=" ".repeat(T/2),C=E):C=" ".repeat(T)}n.delimiterStart!==!1&&!d&&v.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&S==="")&&(n.delimiterStart!==!1||d)&&v.push(" "),n.alignDelimiters!==!1&&v.push(E),v.push(S),n.alignDelimiters!==!1&&v.push(C),n.padding!==!1&&v.push(" "),(n.delimiterEnd!==!1||d!==c-1)&&v.push("|")}x.push(n.delimiterEnd===!1?v.join("").replace(/ +$/,""):v.join(""))}return x.join(`
`)}function Zbe(t){return t==null?"":String(t)}function bL(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function eSe(t,e,n,r){const i=n.enter("blockquote"),s=n.createTracker(r);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),tSe);return i(),o}function tSe(t,e,n){return">"+(n?"":" ")+t}function nSe(t,e){return SL(t,e.inConstruct,!0)&&!SL(t,e.notInConstruct,!1)}function SL(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function _L(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&nSe(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function rSe(t,e){const n=String(t);let r=n.indexOf(e),i=r,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++s>o&&(o=s):s=1,i=r+e.length,r=n.indexOf(e,i);return o}function iSe(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function sSe(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function oSe(t,e,n,r){const i=sSe(n),s=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(iSe(t,n)){const d=n.enter("codeIndented"),h=n.indentLines(s,aSe);return d(),h}const a=n.createTracker(r),l=i.repeat(Math.max(rSe(s,i)+1,3)),c=n.enter("codeFenced");let u=a.move(l);if(t.lang){const d=n.enter(`codeFencedLang${o}`);u+=a.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...a.current()})),d()}if(t.lang&&t.meta){const d=n.enter(`codeFencedMeta${o}`);u+=a.move(" "),u+=a.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...a.current()})),d()}return u+=a.move(`
`),s&&(u+=a.move(s+`
`)),u+=a.move(l),c(),u}function aSe(t,e,n){return(n?"":"    ")+t}function sR(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function lSe(t,e,n,r){const i=sR(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),a(),!t.url||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),o(),c}function cSe(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Fm(t){return"&#x"+t.toString(16).toUpperCase()+";"}function o0(t,e,n){const r=ch(t),i=ch(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}y6.peek=uSe;function y6(t,e,n,r){const i=cSe(n),s=n.enter("emphasis"),o=n.createTracker(r),a=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=o0(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=Fm(c)+l.slice(1));const d=l.charCodeAt(l.length-1),h=o0(r.after.charCodeAt(0),d,i);h.inside&&(l=l.slice(0,-1)+Fm(d));const p=o.move(i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},a+l+p}function uSe(t,e,n){return n.options.emphasis||"*"}function dSe(t,e){let n=!1;return rR(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,XC}),!!((!t.depth||t.depth<3)&&YA(t)&&(e.options.setext||n))}function fSe(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(r);if(dSe(t,n)){const u=n.enter("headingSetext"),d=n.enter("phrasing"),h=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return d(),u(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(i),a=n.enter("headingAtx"),l=n.enter("phrasing");s.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(c)&&(c=Fm(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),a(),c}x6.peek=hSe;function x6(t){return t.value||""}function hSe(){return"<"}w6.peek=pSe;function w6(t,e,n,r){const i=sR(n),s=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let a=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(a=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),a(),t.title&&(a=n.enter(`title${s}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),a()),c+=l.move(")"),o(),c}function pSe(){return"!"}b6.peek=mSe;function b6(t,e,n,r){const i=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("![");const c=n.safe(t.alt,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function mSe(){return"!"}S6.peek=gSe;function S6(t,e,n){let r=t.value||"",i="`",s=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++s<n.unsafe.length;){const o=n.unsafe[s],a=n.compilePattern(o);let l;if(o.atBreak)for(;l=a.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function gSe(){return"`"}function _6(t,e){const n=YA(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}E6.peek=vSe;function E6(t,e,n,r){const i=sR(n),s=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let a,l;if(_6(t,n)){const u=n.stack;n.stack=[],a=n.enter("autolink");let d=o.move("<");return d+=o.move(n.containerPhrasing(t,{before:d,after:">",...o.current()})),d+=o.move(">"),a(),n.stack=u,d}a=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${s}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),a(),c}function vSe(t,e,n){return _6(t,n)?"<":"["}C6.peek=ySe;function C6(t,e,n,r){const i=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const a=n.createTracker(r);let l=a.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...a.current()});l+=a.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const d=n.safe(n.associationId(t),{before:l,after:"]",...a.current()});return o(),n.stack=u,s(),i==="full"||!c||c!==d?l+=a.move(d+"]"):i==="shortcut"?l=l.slice(0,-1):l+=a.move("]"),l}function ySe(){return"["}function oR(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function xSe(t){const e=oR(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function wSe(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function M6(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function bSe(t,e,n,r){const i=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?wSe(n):oR(n);const a=t.ordered?o==="."?")":".":xSe(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),M6(n)===o&&u){let d=-1;for(;++d<t.children.length;){const h=t.children[d];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=a),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=s,i(),c}function SSe(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function _Se(t,e,n,r){const i=SSe(n);let s=n.bulletCurrent||oR(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const a=n.createTracker(r);a.move(s+" ".repeat(o-s.length)),a.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,a.current()),u);return l(),c;function u(d,h,p){return h?(p?"":" ".repeat(o))+d:(p?s:s+" ".repeat(o-s.length))+d}}function ESe(t,e,n,r){const i=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,r);return s(),i(),o}const CSe=Iw(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function MSe(t,e,n,r){return(t.children.some(function(o){return CSe(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function TSe(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}T6.peek=ASe;function T6(t,e,n,r){const i=TSe(n),s=n.enter("strong"),o=n.createTracker(r),a=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:a,...o.current()}));const c=l.charCodeAt(0),u=o0(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=Fm(c)+l.slice(1));const d=l.charCodeAt(l.length-1),h=o0(r.after.charCodeAt(0),d,i);h.inside&&(l=l.slice(0,-1)+Fm(d));const p=o.move(i+i);return s(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},a+l+p}function ASe(t,e,n){return n.options.strong||"*"}function RSe(t,e,n,r){return n.safe(t.value,r)}function kSe(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function NSe(t,e,n){const r=(M6(n)+(n.options.ruleSpaces?" ":"")).repeat(kSe(n));return n.options.ruleSpaces?r.slice(0,-1):r}const A6={blockquote:eSe,break:_L,code:oSe,definition:lSe,emphasis:y6,hardBreak:_L,heading:fSe,html:x6,image:w6,imageReference:b6,inlineCode:S6,link:E6,linkReference:C6,list:bSe,listItem:_Se,paragraph:ESe,root:MSe,strong:T6,text:RSe,thematicBreak:NSe};function PSe(){return{enter:{table:DSe,tableData:EL,tableHeader:EL,tableRow:LSe},exit:{codeText:OSe,table:ISe,tableData:Y1,tableHeader:Y1,tableRow:Y1}}}function DSe(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function ISe(t){this.exit(t),this.data.inTable=void 0}function LSe(t){this.enter({type:"tableRow",children:[]},t)}function Y1(t){this.exit(t)}function EL(t){this.enter({type:"tableCell",children:[]},t)}function OSe(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,FSe));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function FSe(t,e){return e==="|"?e:t}function USe(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:o,tableCell:l,tableRow:a}};function o(p,x,w,y){return c(u(p,w,y),p.align)}function a(p,x,w,y){const v=d(p,w,y),S=c([v]);return S.slice(0,S.indexOf(`
`))}function l(p,x,w,y){const v=w.enter("tableCell"),S=w.enter("phrasing"),E=w.containerPhrasing(p,{...y,before:s,after:s});return S(),v(),E}function c(p,x){return Qbe(p,{align:x,alignDelimiters:r,padding:n,stringLength:i})}function u(p,x,w){const y=p.children;let v=-1;const S=[],E=x.enter("table");for(;++v<y.length;)S[v]=d(y[v],x,w);return E(),S}function d(p,x,w){const y=p.children;let v=-1;const S=[],E=x.enter("tableRow");for(;++v<y.length;)S[v]=l(y[v],p,x,w);return E(),S}function h(p,x,w){let y=A6.inlineCode(p,x,w);return w.stack.includes("tableCell")&&(y=y.replace(/\|/g,"\\$&")),y}}function BSe(){return{exit:{taskListCheckValueChecked:CL,taskListCheckValueUnchecked:CL,paragraph:jSe}}}function zSe(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:HSe}}}function CL(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function jSe(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let s=-1,o;for(;++s<i.length;){const a=i[s];if(a.type==="paragraph"){o=a;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function HSe(t,e,n,r){const i=t.children[0],s=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",a=n.createTracker(r);s&&a.move(o);let l=A6.listItem(t,e,n,{...r,...a.current()});return s&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+o}}function VSe(){return[bbe(),Hbe(),Gbe(),PSe(),BSe()]}function $Se(t){return{extensions:[Sbe(),Vbe(t),Xbe(),USe(t),zSe()]}}const WSe={tokenize:JSe,partial:!0},R6={tokenize:QSe,partial:!0},k6={tokenize:ZSe,partial:!0},N6={tokenize:e1e,partial:!0},GSe={tokenize:t1e,partial:!0},P6={name:"wwwAutolink",tokenize:KSe,previous:I6},D6={name:"protocolAutolink",tokenize:YSe,previous:L6},yl={name:"emailAutolink",tokenize:qSe,previous:O6},_a={};function XSe(){return{text:_a}}let mu=48;for(;mu<123;)_a[mu]=yl,mu++,mu===58?mu=65:mu===91&&(mu=97);_a[43]=yl;_a[45]=yl;_a[46]=yl;_a[95]=yl;_a[72]=[yl,D6];_a[104]=[yl,D6];_a[87]=[yl,P6];_a[119]=[yl,P6];function qSe(t,e,n){const r=this;let i,s;return o;function o(d){return!JC(d)||!O6.call(r,r.previous)||aR(r.events)?n(d):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),a(d))}function a(d){return JC(d)?(t.consume(d),a):d===64?(t.consume(d),l):n(d)}function l(d){return d===46?t.check(GSe,u,c)(d):d===45||d===95||ui(d)?(s=!0,t.consume(d),l):u(d)}function c(d){return t.consume(d),i=!0,l}function u(d){return s&&i&&Ei(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(d)):n(d)}}function KSe(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!I6.call(r,r.previous)||aR(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(WSe,t.attempt(R6,t.attempt(k6,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function YSe(t,e,n){const r=this;let i="",s=!1;return o;function o(d){return(d===72||d===104)&&L6.call(r,r.previous)&&!aR(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(d),t.consume(d),a):n(d)}function a(d){if(Ei(d)&&i.length<5)return i+=String.fromCodePoint(d),t.consume(d),a;if(d===58){const h=i.toLowerCase();if(h==="http"||h==="https")return t.consume(d),l}return n(d)}function l(d){return d===47?(t.consume(d),s?c:(s=!0,l)):n(d)}function c(d){return d===null||r0(d)||Pn(d)||ad(d)||Nw(d)?n(d):t.attempt(R6,t.attempt(k6,u),n)(d)}function u(d){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(d)}}function JSe(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function QSe(t,e,n){let r,i,s;return o;function o(c){return c===46||c===95?t.check(N6,l,a)(c):c===null||Pn(c)||ad(c)||c!==45&&Nw(c)?l(c):(s=!0,t.consume(c),o)}function a(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),o}function l(c){return i||r||!s?n(c):e(c)}}function ZSe(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(N6,e,s)(o):o===null||Pn(o)||ad(o)?e(o):(t.consume(o),i)}function s(o){return o===41&&r++,t.consume(o),i}}function e1e(t,e,n){return r;function r(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(t.consume(a),r):a===38?(t.consume(a),s):a===93?(t.consume(a),i):a===60||a===null||Pn(a)||ad(a)?e(a):n(a)}function i(a){return a===null||a===40||a===91||Pn(a)||ad(a)?e(a):r(a)}function s(a){return Ei(a)?o(a):n(a)}function o(a){return a===59?(t.consume(a),r):Ei(a)?(t.consume(a),o):n(a)}}function t1e(t,e,n){return r;function r(s){return t.consume(s),i}function i(s){return ui(s)?n(s):e(s)}}function I6(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Pn(t)}function L6(t){return!Ei(t)}function O6(t){return!(t===47||JC(t))}function JC(t){return t===43||t===45||t===46||t===95||ui(t)}function aR(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const n1e={tokenize:u1e,partial:!0};function r1e(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:a1e,continuation:{tokenize:l1e},exit:c1e}},text:{91:{name:"gfmFootnoteCall",tokenize:o1e},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:i1e,resolveTo:s1e}}}}function i1e(t,e,n){const r=this;let i=r.events.length;const s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return a;function a(l){if(!o||!o._balanced)return n(l);const c=ko(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!s.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function s1e(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},a=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...a),t}function o1e(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s=0,o;return a;function a(d){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),l}function l(d){return d!==94?n(d):(t.enter("gfmFootnoteCallMarker"),t.consume(d),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(d){if(s>999||d===93&&!o||d===null||d===91||Pn(d))return n(d);if(d===93){t.exit("chunkString");const h=t.exit("gfmFootnoteCallString");return i.includes(ko(r.sliceSerialize(h)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(d),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(d)}return Pn(d)||(o=!0),s++,t.consume(d),d===92?u:c}function u(d){return d===91||d===92||d===93?(t.consume(d),s++,c):c(d)}}function a1e(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let s,o=0,a;return l;function l(x){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(x){return x===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(x)}function u(x){if(o>999||x===93&&!a||x===null||x===91||Pn(x))return n(x);if(x===93){t.exit("chunkString");const w=t.exit("gfmFootnoteDefinitionLabelString");return s=ko(r.sliceSerialize(w)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(x),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),h}return Pn(x)||(a=!0),o++,t.consume(x),x===92?d:u}function d(x){return x===91||x===92||x===93?(t.consume(x),o++,u):u(x)}function h(x){return x===58?(t.enter("definitionMarker"),t.consume(x),t.exit("definitionMarker"),i.includes(s)||i.push(s),un(t,p,"gfmFootnoteDefinitionWhitespace")):n(x)}function p(x){return e(x)}}function l1e(t,e,n){return t.check(kg,e,t.attempt(n1e,e,n))}function c1e(t){t.exit("gfmFootnoteDefinition")}function u1e(t,e,n){const r=this;return un(t,i,"gfmFootnoteDefinitionIndent",5);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function d1e(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:s,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,a){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},d={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},h=[["enter",u,a],["enter",o[c][1],a],["exit",o[c][1],a],["enter",d,a]],p=a.parser.constructs.insideSpan.null;p&&Ss(h,h.length,0,Pw(p,o.slice(c+1,l),a)),Ss(h,h.length,0,[["exit",d,a],["enter",o[l][1],a],["exit",o[l][1],a],["exit",u,a]]),Ss(o,c-1,l-c+3,h),l=c+h.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function s(o,a,l){const c=this.previous,u=this.events;let d=0;return h;function h(x){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(x):(o.enter("strikethroughSequenceTemporary"),p(x))}function p(x){const w=ch(c);if(x===126)return d>1?l(x):(o.consume(x),d++,p);if(d<2&&!n)return l(x);const y=o.exit("strikethroughSequenceTemporary"),v=ch(x);return y._open=!v||v===2&&!!w,y._close=!w||w===2&&!!v,a(x)}}}class f1e{constructor(){this.map=[]}add(e,n,r){h1e(this,e,n,r)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const s of i)e.push(s);i=r.pop()}this.map.length=0}}function h1e(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function p1e(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=r.length-1;r[s]=r[s]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function m1e(){return{flow:{null:{name:"table",tokenize:g1e,resolveAll:v1e}}}}function g1e(t,e,n){const r=this;let i=0,s=0,o;return a;function a(M){let I=r.events.length-1;for(;I>-1;){const j=r.events[I][1].type;if(j==="lineEnding"||j==="linePrefix")I--;else break}const z=I>-1?r.events[I][1].type:null,H=z==="tableHead"||z==="tableRow"?A:l;return H===A&&r.parser.lazy[r.now().line]?n(M):H(M)}function l(M){return t.enter("tableHead"),t.enter("tableRow"),c(M)}function c(M){return M===124||(o=!0,s+=1),u(M)}function u(M){return M===null?n(M):Nt(M)?s>1?(s=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),p):n(M):tn(M)?un(t,u,"whitespace")(M):(s+=1,o&&(o=!1,i+=1),M===124?(t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),d(M)))}function d(M){return M===null||M===124||Pn(M)?(t.exit("data"),u(M)):(t.consume(M),M===92?h:d)}function h(M){return M===92||M===124?(t.consume(M),d):d(M)}function p(M){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(M):(t.enter("tableDelimiterRow"),o=!1,tn(M)?un(t,x,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):x(M))}function x(M){return M===45||M===58?y(M):M===124?(o=!0,t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),w):T(M)}function w(M){return tn(M)?un(t,y,"whitespace")(M):y(M)}function y(M){return M===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(M),t.exit("tableDelimiterMarker"),v):M===45?(s+=1,v(M)):M===null||Nt(M)?C(M):T(M)}function v(M){return M===45?(t.enter("tableDelimiterFiller"),S(M)):T(M)}function S(M){return M===45?(t.consume(M),S):M===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(M),t.exit("tableDelimiterMarker"),E):(t.exit("tableDelimiterFiller"),E(M))}function E(M){return tn(M)?un(t,C,"whitespace")(M):C(M)}function C(M){return M===124?x(M):M===null||Nt(M)?!o||i!==s?T(M):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(M)):T(M)}function T(M){return n(M)}function A(M){return t.enter("tableRow"),k(M)}function k(M){return M===124?(t.enter("tableCellDivider"),t.consume(M),t.exit("tableCellDivider"),k):M===null||Nt(M)?(t.exit("tableRow"),e(M)):tn(M)?un(t,k,"whitespace")(M):(t.enter("data"),R(M))}function R(M){return M===null||M===124||Pn(M)?(t.exit("data"),k(M)):(t.consume(M),M===92?P:R)}function P(M){return M===92||M===124?(t.consume(M),R):R(M)}}function v1e(t,e){let n=-1,r=!0,i=0,s=[0,0,0,0],o=[0,0,0,0],a=!1,l=0,c,u,d;const h=new f1e;for(;++n<t.length;){const p=t[n],x=p[1];p[0]==="enter"?x.type==="tableHead"?(a=!1,l!==0&&(ML(h,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},x.start),end:Object.assign({},x.end)},h.add(n,0,[["enter",c,e]])):x.type==="tableRow"||x.type==="tableDelimiterRow"?(r=!0,d=void 0,s=[0,0,0,0],o=[0,n+1,0,0],a&&(a=!1,u={type:"tableBody",start:Object.assign({},x.start),end:Object.assign({},x.end)},h.add(n,0,[["enter",u,e]])),i=x.type==="tableDelimiterRow"?2:u?3:1):i&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],d=xy(h,e,s,i,void 0,d),s=[0,0,0,0]),o[2]=n)):x.type==="tableCellDivider"&&(r?r=!1:(s[1]!==0&&(o[0]=o[1],d=xy(h,e,s,i,void 0,d)),s=o,o=[s[1],n,0,0])):x.type==="tableHead"?(a=!0,l=n):x.type==="tableRow"||x.type==="tableDelimiterRow"?(l=n,s[1]!==0?(o[0]=o[1],d=xy(h,e,s,i,n,d)):o[1]!==0&&(d=xy(h,e,o,i,n,d)),i=0):i&&(x.type==="data"||x.type==="tableDelimiterMarker"||x.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&ML(h,e,l,c,u),h.consume(e.events),n=-1;++n<e.events.length;){const p=e.events[n];p[0]==="enter"&&p[1].type==="table"&&(p[1]._align=p1e(e.events,n))}return t}function xy(t,e,n,r,i,s){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(s.end=Object.assign({},rf(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const l=rf(e.events,n[1]);if(s={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const c=rf(e.events,n[2]),u=rf(e.events,n[3]),d={type:a,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",d,e]]),r!==2){const h=e.events[n[2]],p=e.events[n[3]];if(h[1].end=Object.assign({},p[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const x=n[2]+1,w=n[3]-n[2]-1;t.add(x,w,[])}}t.add(n[3]+1,0,[["exit",d,e]])}return i!==void 0&&(s.end=Object.assign({},rf(e.events,i)),t.add(i,0,[["exit",s,e]]),s=void 0),s}function ML(t,e,n,r,i){const s=[],o=rf(e.events,n);i&&(i.end=Object.assign({},o),s.push(["exit",i,e])),r.end=Object.assign({},o),s.push(["exit",r,e]),t.add(n+1,0,s)}function rf(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const y1e={name:"tasklistCheck",tokenize:w1e};function x1e(){return{text:{91:y1e}}}function w1e(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),s)}function s(l){return Pn(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),a):n(l)}function a(l){return Nt(l)?e(l):tn(l)?t.check({tokenize:b1e},e,n)(l):n(l)}}function b1e(t,e,n){return un(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function S1e(t){return GH([XSe(),r1e(),d1e(t),m1e(),x1e()])}const _1e={};function E1e(t){const e=this,n=t||_1e,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),s=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(S1e(n)),s.push(VSe()),o.push($Se(n))}const C1e=()=>{const{"*":t}=Iie(),{theme:e}=no(),n=md(),[r,i]=b.useState(""),[s,o]=b.useState(null),[a,l]=b.useState([]),[c,u]=b.useState(!0),[d,h]=b.useState(!1),[p,x]=b.useState(""),w=b.useRef(null),y=e==="dark"?"bg-slate-800":"bg-gray-50",v=e==="dark"?"bg-slate-700":"bg-white",S=e==="dark"?"text-slate-100":"text-gray-900",E=e==="dark"?"text-slate-400":"text-gray-500",C=e==="dark"?"border-slate-600":"border-gray-200",T=e==="dark"?"hover:bg-slate-600":"hover:bg-gray-100",A=e==="dark"?"bg-blue-900 text-blue-300":"bg-blue-200 text-blue-800",k=e==="dark"?"bg-slate-600 hover:bg-slate-500":"bg-gray-200 hover:bg-gray-300",R=e==="dark"?"shadow-slate-900/50":"shadow-md",P=z=>z.replace(/-/g," ").replace(/\b\w/g,H=>H.toUpperCase()),M=(z,H)=>{if(!H.trim())return z;const j=H.toLowerCase(),J=q=>{const Q=[];for(const O of q){const F=P(O.name).toLowerCase().includes(j),D=O.path.toLowerCase().includes(j);if(O.children){const ee=J(O.children);(F||D||ee.length>0)&&Q.push({...O,children:ee.length>0?ee:O.children})}else(F||D)&&Q.push(O)}return Q};return J(z)},I=(z,H=0)=>Array.isArray(z)?z.map(j=>m.jsxs("div",{style:{paddingLeft:`${H*16}px`},children:[m.jsxs(ase,{to:`/help/${j.path}`,className:`flex items-center px-3 py-2.5 rounded-lg text-sm transition-all duration-200 ${t===j.path||t===void 0&&j.path==="getting-started"?A+" shadow-sm":`${S} ${T}`}`,style:{fontFamily:'"Raleway", sans-serif'},onClick:()=>h(!1),children:[j.type==="folder"?m.jsx(wee,{className:`h-4 w-4 mr-3 flex-shrink-0 ${t===j.path||t===void 0&&j.path==="getting-started"?e==="dark"?"text-blue-300":"text-blue-600":e==="dark"?"text-blue-400":"text-blue-500"}`}):m.jsx(xee,{className:`h-4 w-4 mr-3 flex-shrink-0 ${t===j.path||t===void 0&&j.path==="getting-started"?e==="dark"?"text-blue-300":"text-blue-600":e==="dark"?"text-blue-400":"text-blue-500"}`}),m.jsx("span",{className:"truncate font-medium",children:P(j.name)})]}),j.children&&m.jsx("div",{className:"mt-1 space-y-1",children:I(j.children,H+1)})]},j.path)):(console.warn("renderDocTree received non-array items:",z),[]);return b.useEffect(()=>{const z=async()=>{u(!0);try{o(null);const j=!t||t==="/"?"getting-started":t,J=await kn.get(`/docs/content?path=${j}`);i(J.data.content)}catch(j){console.error("Error fetching documentation content:",j),o("Failed to load documentation content. Please try again later."),i("")}finally{u(!1)}},H=async()=>{try{const j=await kn.get("/docs/structure"),J=Array.isArray(j.data)?j.data:[];l(J)}catch(j){console.error("Error fetching documentation structure:",j),l([])}};z(),H()},[t]),b.useEffect(()=>{const z=H=>{var j;if(H.key==="/"&&!H.ctrlKey&&!H.metaKey&&!H.altKey){const J=document.activeElement;if(J&&(J.tagName==="INPUT"||J.tagName==="TEXTAREA"))return;H.preventDefault(),(j=w.current)==null||j.focus()}};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[]),s?m.jsx("div",{className:`min-h-screen flex items-center justify-center ${y}`,style:{fontFamily:'"Raleway", sans-serif'},children:m.jsxs("div",{className:`max-w-md mx-auto p-8 text-center rounded-lg border ${C} ${v} ${R}`,children:[m.jsx("div",{className:`text-lg font-medium mb-2 ${e==="dark"?"text-red-400":"text-red-600"}`,children:"Documentation Error"}),m.jsx("div",{className:E,children:s})]})}):m.jsxs("div",{className:`flex min-h-screen ${y} ${S}`,style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx("div",{className:`w-80 ${v} overflow-y-auto fixed inset-y-0 left-0 transform transition-transform duration-300 ease-in-out lg:relative lg:translate-x-0 z-30 border-r ${C} ${d?"translate-x-0":"-translate-x-full"}`,style:{fontFamily:'"Raleway", sans-serif'},children:m.jsxs("div",{className:"p-6",children:[m.jsx("h2",{className:`text-xl font-bold mb-6 ${S}`,style:{fontFamily:'"Raleway", sans-serif'},children:"Documentation"}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"relative",children:[m.jsx("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),m.jsx("input",{ref:w,type:"text",value:p,onChange:z=>x(z.target.value),placeholder:"Search documentation... (Press / to focus)",className:`w-full pl-10 pr-4 py-2 rounded-lg border ${C} ${e==="dark"?"bg-slate-700 text-slate-100 placeholder-slate-400":"bg-gray-50 text-gray-900 placeholder-gray-500"} text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors`,style:{fontFamily:'"Raleway", sans-serif'}}),p&&m.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:m.jsx(Fo,{className:"w-4 h-4"})})]}),p&&m.jsx("div",{className:`mt-2 text-xs ${E}`,style:{fontFamily:'"Raleway", sans-serif'},children:(()=>{const H=M(a,p).reduce((j,J)=>{const q=Q=>Q.reduce((O,F)=>O+1+(F.children?q(F.children):0),0);return j+q([J])},0);return H===0?"No results found":`${H} result${H===1?"":"s"} found`})()})]}),m.jsx("nav",{className:"space-y-1",children:c&&a.length===0?m.jsx("div",{className:`text-center py-4 ${E}`,style:{fontFamily:'"Raleway", sans-serif'},children:m.jsx("div",{className:"text-sm",children:"Loading structure..."})}):(()=>{const z=M(a,p);return z.length===0&&p?m.jsxs("div",{className:`text-center py-4 ${E}`,style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsxs("div",{className:"text-sm",children:['No results found for "',p,'"']}),m.jsx("button",{onClick:()=>x(""),className:`text-xs mt-2 ${e==="dark"?"text-blue-400 hover:text-blue-300":"text-blue-600 hover:text-blue-700"} transition-colors`,children:"Clear search"})]}):I(z)})()})]})}),d&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:()=>h(!1)}),m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"py-4",children:[m.jsx("div",{className:"hidden lg:block",children:m.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"w-24 sm:w-28 lg:w-32"}),m.jsxs(nt,{onClick:()=>n("/"),size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white font-normal",children:[m.jsx(T2,{className:"h-4 w-4 mr-2"}),"Back"]})]})})}),m.jsx("div",{className:"lg:hidden px-4 sm:px-6",children:m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs(nt,{onClick:()=>n("/"),size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white font-normal",children:[m.jsx(T2,{className:"h-4 w-4 mr-2"}),"Back"]}),m.jsxs("button",{onClick:()=>h(!0),className:`flex items-center px-4 py-3 rounded-lg ${k} ${S} transition-colors shadow-sm`,style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(Aee,{className:"h-5 w-5 mr-3"}),m.jsx("span",{className:"text-sm font-medium",children:"Documentation Menu"})]})]})})]}),m.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pb-8",children:c&&!r?m.jsx("div",{className:`text-center py-12 ${E}`,style:{fontFamily:'"Raleway", sans-serif'},children:m.jsx("div",{className:"text-lg",children:"Loading documentation..."})}):m.jsx("div",{className:`prose lg:prose-xl max-w-none ${e==="dark"?"prose-invert prose-headings:text-slate-100 prose-p:text-slate-300 prose-strong:text-slate-200 prose-code:text-slate-200 prose-pre:bg-slate-700 prose-blockquote:text-slate-300":"prose-headings:text-gray-900 prose-p:text-gray-700"}`,style:{fontFamily:'"Raleway", sans-serif',"--tw-prose-body":'"Raleway", sans-serif',"--tw-prose-headings":'"Raleway", sans-serif',"--tw-prose-lead":'"Raleway", sans-serif',"--tw-prose-links":'"Raleway", sans-serif',"--tw-prose-bold":'"Raleway", sans-serif',"--tw-prose-counters":'"Raleway", sans-serif',"--tw-prose-bullets":'"Raleway", sans-serif',"--tw-prose-hr":'"Raleway", sans-serif',"--tw-prose-quotes":'"Raleway", sans-serif',"--tw-prose-quote-borders":'"Raleway", sans-serif',"--tw-prose-captions":'"Raleway", sans-serif',"--tw-prose-kbd":'"Raleway", sans-serif',"--tw-prose-code":'"Raleway", sans-serif',"--tw-prose-pre-code":'"Raleway", sans-serif',"--tw-prose-th-borders":'"Raleway", sans-serif'},children:m.jsx("div",{className:`prose prose-lg max-w-none ${e==="dark"?"prose-invert prose-headings:text-white prose-p:text-gray-200 prose-li:text-gray-200 prose-strong:text-white":"prose-gray"}`,children:m.jsx(dbe,{remarkPlugins:[E1e],children:r})})})})]})]})},M1e=()=>{const{theme:t}=no(),[e,n]=b.useState(null),[r,i]=b.useState(!0),[s,o]=b.useState(null),[a,l]=b.useState(new Date),c=t==="light",u=async()=>{var v,S;try{i(!0),o(null);const E=await kn.get("/api/status");n(E.data),l(new Date)}catch(E){o(((S=(v=E.response)==null?void 0:v.data)==null?void 0:S.error)||E.message||"Failed to fetch status"),n(null)}finally{i(!1)}};b.useEffect(()=>{u();const v=setInterval(u,3e4);return()=>clearInterval(v)},[]);const d=v=>{const S=Math.floor(v/3600),E=Math.floor(v%3600/60),C=Math.floor(v%60);return S>0?`${S}h ${E}m ${C}s`:E>0?`${E}m ${C}s`:`${C}s`},h=v=>{switch(v.toLowerCase()){case"healthy":case"operational":return m.jsx(Br,{className:"w-5 h-5 text-green-500"});case"unhealthy":case"error":case"unavailable":return m.jsx(FS,{className:"w-5 h-5 text-red-500"});case"degraded":return m.jsx(A2,{className:"w-5 h-5 text-yellow-500"});default:return m.jsx(A2,{className:"w-5 h-5 text-yellow-500"})}},p=v=>{switch(v.toLowerCase()){case"healthy":case"operational":return"text-green-500";case"unhealthy":case"error":case"unavailable":return"text-red-500";case"degraded":return"text-yellow-500";default:return"text-yellow-500"}},x=v=>{switch(v.toLowerCase()){case"api":return"API";case"database":return"Database";case"auth":return"Authentication";default:return v.charAt(0).toUpperCase()+v.slice(1)}},w=v=>v.charAt(0).toUpperCase()+v.slice(1),y=v=>{switch(v.toLowerCase()){case"express":return"Express Server";case"cors":return"CORS";case"json_parser":return"JSON Parser";case"database":return"Database Connection";default:return v.replace("_"," ").replace(/\b\w/g,S=>S.toUpperCase())}};return r&&!e?m.jsxs("div",{className:"min-h-screen bg-background text-foreground p-6 relative overflow-hidden",children:[m.jsx(TC,{opacity:c?.2:.15,cloudCount:12,isLight:c}),m.jsx("div",{className:"max-w-6xl mx-auto relative z-10",children:m.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:m.jsxs("div",{className:"text-center",children:[m.jsx(R2,{className:"w-8 h-8 animate-spin mx-auto mb-4"}),m.jsx("p",{children:"Loading backend status..."})]})})})]}):m.jsxs("div",{className:"min-h-screen bg-background text-foreground p-6 force-raleway relative overflow-hidden",children:[m.jsx(TC,{opacity:c?.2:.15,cloudCount:12,isLight:c}),m.jsxs("div",{className:"max-w-6xl mx-auto relative z-10",children:[m.jsxs("div",{className:"mb-8",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(Iee,{className:"w-8 h-8 mr-3 text-blue-600"}),m.jsx("h1",{className:"text-3xl font-bold",children:"System Status"})]}),m.jsxs(nt,{onClick:u,disabled:r,className:"bg-blue-600 hover:bg-blue-700 text-white font-normal flex items-center",children:[r?m.jsx(R2,{className:"w-4 h-4 animate-spin mr-2"}):m.jsx(AT,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),m.jsx("p",{className:"text-muted-foreground",children:"Real-time status and health information for itemize.cloud services"}),m.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Last updated: ",a.toLocaleTimeString()]})]}),s&&m.jsx(bo,{className:"mb-6 border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-950",children:m.jsxs($a,{className:"p-4",children:[m.jsxs("div",{className:"flex items-center text-red-700 dark:text-red-300",children:[m.jsx(FS,{className:"w-5 h-5 mr-2"}),m.jsx("span",{className:"font-medium",children:"Error fetching status:"})]}),m.jsx("p",{className:"mt-1 text-red-600 dark:text-red-400",children:s})]})}),e&&m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.jsxs(bo,{children:[m.jsxs(ta,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[m.jsx(na,{className:"text-lg font-semibold",children:"Overall Status"}),h(e.status)]}),m.jsxs($a,{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-muted-foreground",children:"Status:"}),m.jsx("span",{className:`font-medium ${p(e.status)}`,children:w(e.status)})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-muted-foreground",children:"Environment:"}),m.jsx("span",{className:"font-medium",children:w(e.environment)})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-muted-foreground",children:"Version:"}),m.jsx("span",{className:"font-medium",children:e.version})]})]})]}),m.jsxs(bo,{children:[m.jsxs(ta,{className:"flex flex-row items-center space-y-0 pb-2",children:[m.jsx(vee,{className:"w-5 h-5 mr-2"}),m.jsx(na,{className:"text-lg font-semibold",children:"Server Info"})]}),m.jsxs($a,{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-muted-foreground",children:"Port:"}),m.jsx("span",{className:"font-medium",children:e.server.port})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-muted-foreground",children:"Platform:"}),m.jsx("span",{className:"font-medium",children:e.server.platform})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-muted-foreground",children:"Node.js:"}),m.jsx("span",{className:"font-medium",children:e.server.nodeVersion})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-muted-foreground",children:"Uptime:"}),m.jsx("span",{className:"font-medium",children:d(e.uptime)})]})]})]}),m.jsxs(bo,{children:[m.jsxs(ta,{className:"flex flex-row items-center space-y-0 pb-2",children:[m.jsx(Eee,{className:"w-5 h-5 mr-2"}),m.jsx(na,{className:"text-lg font-semibold",children:"Memory Usage"})]}),m.jsxs($a,{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-muted-foreground",children:"Used:"}),m.jsx("span",{className:"font-medium",children:e.server.memory.used})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-muted-foreground",children:"Total:"}),m.jsx("span",{className:"font-medium",children:e.server.memory.total})]}),m.jsxs("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-muted-foreground",children:"External:"}),m.jsx("span",{className:"font-medium",children:e.server.memory.external})]})]})]}),m.jsxs(bo,{children:[m.jsxs(ta,{className:"flex flex-row items-center space-y-0 pb-2",children:[m.jsx(Nee,{className:"w-5 h-5 mr-2"}),m.jsx(na,{className:"text-lg font-semibold",children:"Services"})]}),m.jsx($a,{className:"space-y-2",children:Object.entries(e.services).map(([v,S])=>m.jsxs("div",{className:"flex justify-between",children:[m.jsxs("span",{className:"text-muted-foreground",children:[x(v),":"]}),m.jsxs("div",{className:"flex items-center",children:[h(S),m.jsx("span",{className:`ml-2 font-medium ${p(S)}`,children:w(S)})]})]},v))})]}),m.jsxs(bo,{children:[m.jsxs(ta,{className:"flex flex-row items-center space-y-0 pb-2",children:[m.jsx(Br,{className:"w-5 h-5 mr-2"}),m.jsx(na,{className:"text-lg font-semibold",children:"Health Checks"})]}),m.jsx($a,{className:"space-y-2",children:Object.entries(e.healthChecks).map(([v,S])=>m.jsxs("div",{className:"flex justify-between",children:[m.jsxs("span",{className:"text-muted-foreground",children:[y(v),":"]}),m.jsxs("div",{className:"flex items-center",children:[S?m.jsx(Br,{className:"w-4 h-4 text-green-500"}):m.jsx(FS,{className:"w-4 h-4 text-red-500"}),m.jsx("span",{className:`ml-2 font-medium ${S?"text-green-500":"text-red-500"}`,children:S?"Pass":"Fail"})]})]},v))})]}),m.jsxs(bo,{children:[m.jsxs(ta,{className:"flex flex-row items-center space-y-0 pb-2",children:[m.jsx(yee,{className:"w-5 h-5 mr-2"}),m.jsx(na,{className:"text-lg font-semibold",children:"API Endpoints"})]}),m.jsxs($a,{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between mb-3",children:[m.jsx("span",{className:"text-muted-foreground",children:"Total Available:"}),m.jsx("span",{className:"font-medium text-green-500",children:e.endpoints.total})]}),m.jsx("div",{className:"max-h-32 overflow-y-auto",children:e.endpoints.available.map((v,S)=>m.jsx("div",{className:"text-sm text-muted-foreground py-1",children:v},S))})]})]})]})]})]})},T1e=({children:t})=>{const{currentUser:e,loading:n,isAuthenticated:r}=ro();return console.log("ProtectedRoute evaluation:",{hasUser:!!e,loading:n,isAuthenticated:r,userData:e}),n?(console.log("Protected route loading state"),m.jsx("div",{className:"flex items-center justify-center min-h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})})):e?(console.log("Protected route rendering content"),t?m.jsx(m.Fragment,{children:t}):m.jsx(Kie,{})):(console.log("Protected route redirect - not authenticated"),m.jsx(IE,{to:"/home",replace:!0}))},A1e=({list:t,onUpdate:e,onDelete:n,existingCategories:r,canvasTransform:i,onPositionChange:s,isCollapsed:o,onToggleCollapsed:a,addCategory:l,updateCategory:c})=>{const u=b.useRef(null),[d,h]=b.useState(!1),[p,x]=b.useState(!1),[w,y]=b.useState({x:0,y:0}),[v,S]=b.useState({startX:0,startY:0,startWidth:0,startHeight:0});b.useEffect(()=>{u.current&&(u.current.style.left=`${t.position_x||0}px`,u.current.style.top=`${t.position_y||0}px`)},[t.position_x,t.position_y]);const E=k=>{var P;if(!k.target.closest('input, textarea, button, [role="button"], [role="menuitem"], .resize-handle')&&(k.preventDefault(),u.current)){const M=(P=u.current.parentElement)==null?void 0:P.getBoundingClientRect();if(M){const I=(k.clientX-M.left-i.x)/i.scale,z=(k.clientY-M.top-i.y)/i.scale,H=parseFloat(u.current.style.left)||0,j=parseFloat(u.current.style.top)||0;y({x:(I-H)*i.scale,y:(z-j)*i.scale}),h(!0)}}},C=k=>{var R;if(d&&u.current){const P=(R=u.current.parentElement)==null?void 0:R.getBoundingClientRect();if(!P)return;const M=(k.clientX-P.left-i.x)/i.scale,I=(k.clientY-P.top-i.y)/i.scale,z=M-w.x/i.scale,H=I-w.y/i.scale;u.current.style.left=`${z}px`,u.current.style.top=`${H}px`}if(p&&u.current){const M=(k.clientX-v.startX)/i.scale,I=Math.max(320,v.startWidth+M);u.current.style.width=`${I}px`}},T=()=>{if(d&&u.current){h(!1);const k=parseFloat(u.current.style.left)||0,R=parseFloat(u.current.style.top)||0,P={x:Math.round(k),y:Math.round(R)};s(t.id,P)}if(p&&u.current){x(!1);const k=parseFloat(u.current.style.left)||0,R=parseFloat(u.current.style.top)||0,P=parseFloat(u.current.style.width)||t.width||340;e({...t,position_x:Math.round(k),position_y:Math.round(R),width:Math.round(P)})}};b.useEffect(()=>((d||p)&&(window.addEventListener("mousemove",C),window.addEventListener("mouseup",T)),()=>{window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",T)}),[d,p,w,v]);const A=k=>{if(k.preventDefault(),k.stopPropagation(),u.current){const R=parseFloat(u.current.style.width)||t.width||340;S({startX:k.clientX,startY:k.clientY,startWidth:R,startHeight:0}),x(!0)}};return m.jsxs("div",{ref:u,onMouseDown:E,className:"draggable-list-card shadow-lg rounded-lg flex flex-col overflow-hidden border relative",style:{position:"absolute",width:`${t.width||340}px`,height:"auto",minHeight:"150px",zIndex:d||p?1e3:1,cursor:d?"grabbing":p?"ew-resize":"grab",transition:d||p?"none":"box-shadow 0.2s, transform 0.1s",boxShadow:d||p?"0 8px 16px rgba(0,0,0,0.2)":"0 4px 6px rgba(0, 0, 0, 0.1)",transform:d||p?"scale(1.01)":"scale(1)",userSelect:"none",touchAction:"none"},children:[m.jsx(HA,{list:t,onUpdate:e,onDelete:n,existingCategories:r,isCollapsed:o,onToggleCollapsed:a,addCategory:l,updateCategory:c}),!o&&m.jsx("div",{className:"resize-handle absolute bottom-0 right-0 w-4 h-4 cursor-ew-resize",onMouseDown:A,style:{background:"linear-gradient(90deg, transparent 40%, #ccc 40%, #ccc 60%, transparent 60%)",opacity:.6,zIndex:10}})]})},F6=({position:t,onAddList:e,onAddNote:n,onAddWhiteboard:r,onClose:i,isFromButton:s=!1,absolutePosition:o})=>{const a=(l,c)=>{l.stopPropagation(),c()};return m.jsx("div",{className:`context-menu ${s?"dropdown-menu":""} bg-background border border-border rounded-md shadow-lg`,style:{position:s?"fixed":"absolute",top:s&&o?`${o.y}px`:`${t.y}px`,left:s&&o?`${o.x}px`:`${t.x}px`,transform:"translateX(-50%)",zIndex:2e3,padding:"0.5rem 0",minWidth:"180px",marginTop:s?"0":"10px"},onClick:l=>l.stopPropagation(),children:m.jsxs("div",{className:"menu-items",children:[m.jsxs("button",{className:"menu-item flex items-center px-4 py-3 cursor-pointer bg-transparent border-none w-full text-left font-light text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-foreground",onClick:l=>a(l,e),children:[m.jsx(ag,{className:"h-4 w-4 mr-3 text-muted-foreground"}),m.jsx("span",{children:"Add List"})]}),n&&m.jsxs("button",{className:"menu-item flex items-center px-4 py-3 cursor-pointer bg-transparent border-none w-full text-left font-light text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-foreground",onClick:l=>a(l,n),children:[m.jsx(lg,{className:"h-4 w-4 mr-3 text-muted-foreground"}),m.jsx("span",{children:"Add Note"})]}),r&&m.jsxs("button",{className:"menu-item flex items-center px-4 py-3 cursor-pointer bg-transparent border-none w-full text-left font-light text-sm transition-colors hover:bg-accent hover:text-accent-foreground text-foreground",onClick:l=>a(l,r),children:[m.jsx(Sh,{className:"h-4 w-4 mr-3 text-muted-foreground"}),m.jsx("span",{children:"Add Whiteboard"})]})]})})},Yr=t=>t?{Authorization:`Bearer ${t}`}:{},U6=async t=>(await kn.get("/api/canvas/lists",{headers:Yr(t)})).data,B6=async(t,e)=>{const n={...t,category:t.type||t.category||"General"};delete n.type;const r=await kn.post("/api/lists",n,{headers:Yr(e)});return{...r.data,type:r.data.category}},z6=async(t,e)=>{const n={...t,category:t.type||t.category};delete n.type;const r=await kn.put(`/api/lists/${t.id}`,n,{headers:Yr(e)});return{...r.data,type:r.data.category}},j6=async(t,e)=>(await kn.delete(`/api/lists/${t}`,{headers:Yr(e)})).data,R1e=async(t,e,n,r)=>(await kn.put(`/api/lists/${t}/position`,{x:e,y:n},{headers:Yr(r)})).data,k1e=async t=>(await kn.get("/api/notes",{headers:Yr(t)})).data,TL=async(t,e)=>(await kn.post("/api/notes",t,{headers:Yr(e)})).data,N1e=async(t,e,n)=>(await kn.put(`/api/notes/${t}`,e,{headers:Yr(n)})).data,P1e=async(t,e)=>(await kn.delete(`/api/notes/${t}`,{headers:Yr(e)})).data,D1e=async t=>(await kn.get("/api/whiteboards",{headers:Yr(t)})).data,I1e=async(t,e)=>(await kn.post("/api/whiteboards",t,{headers:Yr(e)})).data,L1e=async(t,e,n)=>(console.log("Sending whiteboard update to backend:",{whiteboardId:t,whiteboardData:e}),(await kn.put(`/api/whiteboards/${t}`,e,{headers:Yr(n)})).data),O1e=async(t,e)=>(await kn.delete(`/api/whiteboards/${t}`,{headers:Yr(e)})).data,F1e=async t=>(await kn.get("/api/categories",{headers:Yr(t)})).data,U1e=async(t,e)=>(await kn.post("/api/categories",t,{headers:Yr(e)})).data,B1e=async(t,e,n)=>(await kn.put(`/api/categories/${t}`,e,{headers:Yr(n)})).data,z1e=async(t,e)=>(await kn.delete(`/api/categories/${t}`,{headers:Yr(e)})).data,H6=({isOpen:t,onClose:e,onListCreated:n,existingCategories:r,position:i})=>{const{token:s}=ro(),[o,a]=b.useState(""),[l,c]=b.useState(""),[u,d]=b.useState(""),[h,p]=b.useState(!1),[x,w]=b.useState("#3B82F6"),[y,v]=b.useState(!1),[S,E]=b.useState(""),C=async T=>{if(T.preventDefault(),!o.trim()){E("Please enter a title");return}const k=(h?u.trim():l)||"General";v(!0),E("");try{const R={title:o,type:k,color_value:x,items:[],...i&&{position_x:i.x,position_y:i.y}},P=await B6(R,s);n(P),a(""),c(""),d(""),p(!1),w("#3B82F6"),e()}catch(R){console.error("Failed to create list:",R),E("Failed to create list. Please try again.")}finally{v(!1)}};return m.jsx(Cg,{open:t,onOpenChange:T=>!T&&e(),children:m.jsxs(kh,{className:"sm:max-w-[425px]",children:[m.jsx(Nh,{children:m.jsxs(Ph,{className:"flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(ag,{className:"h-5 w-5 text-slate-500"}),"Add List"]})}),m.jsxs("form",{onSubmit:C,className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"title",className:"text-sm font-medium",style:{fontFamily:'"Raleway", sans-serif'},children:"Title"}),m.jsx(Yn,{id:"title",value:o,onChange:T=>a(T.target.value),placeholder:"Enter list title",autoFocus:!0})]}),m.jsxs("div",{className:"grid grid-cols-[1fr_60px] gap-4 items-start",children:[h?m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"newCategory",className:"text-sm font-medium",style:{fontFamily:'"Raleway", sans-serif'},children:"New Category"}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx(Yn,{id:"newCategory",value:u,onChange:T=>d(T.target.value),placeholder:"Enter new category",autoFocus:!0,onKeyDown:T=>{T.key==="Enter"&&u.trim()&&(c(u.trim()),p(!1),E(""))}}),m.jsx(nt,{type:"button",variant:"outline",onClick:()=>{u.trim()&&(c(u.trim()),p(!1),E(""))},disabled:!u.trim(),style:{fontFamily:'"Raleway", sans-serif'},children:"Add"}),m.jsx(nt,{type:"button",variant:"outline",onClick:()=>{p(!1),d("")},style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"})]})]}):m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{htmlFor:"category",className:"text-sm font-medium",style:{fontFamily:'"Raleway", sans-serif'},children:"Category"}),m.jsxs(Wc,{value:l,onValueChange:T=>{T==="__add_new__"?(p(!0),c("")):(c(T),E(""))},children:[m.jsx(gl,{children:m.jsx(Gc,{placeholder:"Select a category"})}),m.jsxs(vl,{children:[!r.includes("General")&&m.jsx(ar,{value:"General",children:"General"}),r.map(T=>m.jsx(ar,{value:T,children:T},T)),m.jsx(ar,{value:"__add_new__",className:"text-blue-600",children:"+ Add new category"})]})]}),m.jsx("p",{className:"text-xs text-gray-500",style:{fontFamily:'"Raleway", sans-serif'},children:r.length===0?'No categories yet. Leave empty to use "General" or create a new one from the dropdown.':'Select a category or leave empty to use "General".'})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-medium",style:{fontFamily:'"Raleway", sans-serif'},children:"Color"}),m.jsx(ml,{color:x,onChange:w,onSave:w,children:m.jsx(nt,{type:"button",variant:"outline",size:"icon",className:"h-10 w-10 p-0 rounded-full","aria-label":"Change list color",children:m.jsx("span",{className:"inline-block w-6 h-6 rounded-full border border-gray-300",style:{backgroundColor:x}})})})]})]}),S&&m.jsx("p",{className:"text-red-500 text-sm",style:{fontFamily:'"Raleway", sans-serif'},children:S}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx(nt,{type:"button",variant:"outline",onClick:e,style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"}),m.jsx(nt,{type:"submit",disabled:y,className:"bg-blue-600 hover:bg-blue-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:y?"Creating...":"Create List"})]})]})]})})},j1e=({size:t="md",className:e=""})=>{const r={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[t];return m.jsx("div",{className:`${e}`,children:m.jsx("div",{className:`${r} animate-spin rounded-full border-2 border-t-transparent border-primary`})})},H1e=({note:t,onUpdate:e,onDelete:n,isCollapsed:r,onToggleCollapsed:i,updateCategory:s,addCategory:o})=>{const{toast:a}=to(),[l,c]=b.useState(!0),u=r!==void 0?!r:l,d=i||c,[h,p]=b.useState(!1),[x,w]=b.useState(t.title||"Untitled Note"),[y,v]=b.useState(!1),[S,E]=b.useState(t.content||""),[C,T]=b.useState(!1),[A,k]=b.useState(!1),[R,P]=b.useState(!1),[M,I]=b.useState(""),z=b.useRef(null),H=b.useRef(null);Me.useEffect(()=>{w(t.title||"Untitled Note")},[t.title]),Me.useEffect(()=>{E(t.content||"")},[t.content]);const j=b.useCallback(async()=>{x.trim()!==t.title&&await e(t.id,{title:x.trim()}),p(!1)},[x,t.title,t.id,e]),J=b.useCallback(async()=>{S.trim()!==t.content&&await e(t.id,{content:S.trim(),updated_at:new Date().toISOString()}),v(!1)},[S,t.content,t.id,e]),q=b.useCallback(async()=>{await n(t.id)},[t.id,n]),Q=b.useCallback(async D=>{T(!0);try{await e(t.id,{color_value:D})}catch(ee){throw console.error("Failed to save note color:",ee),a({title:"Error updating color",description:"Could not update note color. Please try again.",variant:"destructive"}),ee}finally{T(!1)}},[t.id,e,a]),O=b.useCallback(async D=>{if(D==="__custom__"){P(!0);return}try{await e(t.id,{category:D}),k(!1),P(!1)}catch(ee){console.error("Failed to update note category:",ee),a({title:"Error updating category",description:"Could not update note category. Please try again.",variant:"destructive"})}},[t.id,e,a]),F=b.useCallback(async()=>{if(M.trim()!=="")try{await e(t.id,{category:M.trim()}),k(!1),P(!1),I("")}catch(D){console.error("Failed to add custom category:",D),a({title:"Error adding category",description:"Could not add custom category. Please try again.",variant:"destructive"})}else a({title:"Category cannot be empty",description:"Please enter a valid category name",variant:"destructive"})},[M,t.id,e,a]);return{noteTitle:t.title||"Untitled Note",isCollapsibleOpen:u,setIsCollapsibleOpen:d,isEditing:h,setIsEditing:p,editTitle:x,setEditTitle:w,handleEditTitle:j,isEditingContent:y,setIsEditingContent:v,editContent:S,setEditContent:E,handleEditContent:J,handleDeleteNote:q,handleSaveNoteColor:Q,isSavingColor:C,isEditingCategory:A,setIsEditingCategory:k,showNewCategoryInput:R,setShowNewCategoryInput:P,newCategory:M,setNewCategory:I,handleEditCategory:O,handleAddCustomCategory:F,titleEditRef:z,contentEditRef:H}};function jr(t){this.content=t}jr.prototype={constructor:jr,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new jr(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new jr(n)},addToStart:function(t,e){return new jr([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new jr(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new jr(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=jr.from(t),t.size?new jr(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=jr.from(t),t.size?new jr(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=jr.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};jr.from=function(t){if(t instanceof jr)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new jr(e)};function V6(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=V6(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function $6(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=$6(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class Ge{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,i+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,i+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?i?typeof i=="function"?i(a):i:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new Ge(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),i+=a.nodeSize),o=l}return new Ge(r,i)}cutByIndex(e,n){return e==n?Ge.empty:e==0&&n==this.content.length?this:new Ge(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new Ge(i,s)}addToStart(e){return new Ge([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Ge(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return V6(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return $6(this,e,n,r)}findIndex(e,n=-1){if(e==0)return wy(0,e);if(e==this.size)return wy(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,i=0;;r++){let s=this.child(r),o=i+s.nodeSize;if(o>=e)return o==e||n>0?wy(r+1,o):wy(r,i);i=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Ge.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Ge(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Ge.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new Ge(n||e,r)}static from(e){if(!e)return Ge.empty;if(e instanceof Ge)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Ge([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Ge.empty=new Ge([],0);const J1={index:0,offset:0};function wy(t,e){return J1.index=t,J1.offset=e,J1}function a0(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!a0(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!a0(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Rn=class QC{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&a0(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return QC.none;if(e instanceof QC)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Rn.none=[];class l0 extends Error{}class dt{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=G6(this.content,e+this.openStart,n);return r&&new dt(r,this.openStart,this.openEnd)}removeBetween(e,n){return new dt(W6(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return dt.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new dt(Ge.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new dt(e,r,i)}}dt.empty=new dt(Ge.empty,0,0);function W6(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(i==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(W6(s.content,e-i-1,n-i-1)))}function G6(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return t.cut(0,e).append(n).append(t.cut(e));let a=G6(o.content,e-s-1,n);return a&&t.replaceChild(i,o.copy(a))}function V1e(t,e,n){if(n.openStart>t.depth)throw new l0("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new l0("Inconsistent open depths");return X6(t,e,n,0)}function X6(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=X6(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return Vu(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=$1e(n,t);return Vu(s,K6(t,o,a,e,r))}else return Vu(s,c0(t,e,r))}function q6(t,e){if(!e.type.compatibleContent(t.type))throw new l0("Cannot join "+e.type.name+" onto "+t.type.name)}function ZC(t,e,n){let r=t.node(n);return q6(r,e.node(n)),r}function Hu(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Jp(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Hu(t.nodeAfter,r),s++));for(let a=s;a<o;a++)Hu(i.child(a),r);e&&e.depth==n&&e.textOffset&&Hu(e.nodeBefore,r)}function Vu(t,e){return t.type.checkContent(e),t.copy(e)}function K6(t,e,n,r,i){let s=t.depth>i&&ZC(t,e,i+1),o=r.depth>i&&ZC(n,r,i+1),a=[];return Jp(null,t,i,a),s&&o&&e.index(i)==n.index(i)?(q6(s,o),Hu(Vu(s,K6(t,e,n,r,i+1)),a)):(s&&Hu(Vu(s,c0(t,e,i+1)),a),Jp(e,n,i,a),o&&Hu(Vu(o,c0(n,r,i+1)),a)),Jp(r,null,i,a),new Ge(a)}function c0(t,e,n){let r=[];if(Jp(null,t,n,r),t.depth>n){let i=ZC(t,e,n+1);Hu(Vu(i,c0(t,e,n+1)),r)}return Jp(e,null,n,r),new Ge(r)}function $1e(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(Ge.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Um{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Rn.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let a=r;r=i,i=a}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new u0(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(r.push(o,a,i+l),!c||(o=o.child(a),o.isText))break;s=c-1,i+=l+1}return new Um(n,r,s)}static resolveCached(e,n){let r=AL.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else AL.set(e,r=new W1e);let i=r.elts[r.i]=Um.resolve(e,n);return r.i=(r.i+1)%G1e,i}}class W1e{constructor(){this.elts=[],this.i=0}}const G1e=12,AL=new WeakMap;class u0{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const X1e=Object.create(null);let Sc=class eM{constructor(e,n,r,i=Rn.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||Ge.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&a0(this.attrs,n||e.defaultAttrs||X1e)&&Rn.sameSet(this.marks,r||Rn.none)}copy(e=null){return e==this.content?this:new eM(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new eM(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return dt.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),a=i.start(o),c=i.node(o).content.cut(i.pos-a,s.pos-a);return new dt(c,i.depth-o,s.depth-o)}replace(e,n,r){return V1e(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Um.resolveCached(this,e)}resolveNoCache(e){return Um.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Y6(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Ge.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=i;l<s;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Rn.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Rn.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=Ge.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Sc.prototype.text=void 0;class d0 extends Sc{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Y6(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new d0(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new d0(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Y6(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class ld{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new q1e(e,n);if(r.next==null)return ld.empty;let i=J6(r);r.next&&r.err("Unexpected trailing text");let s=t_e(e_e(i));return n_e(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return Ge.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let h=s(d,a.concat(u));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let a=i;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!i.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:i}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}ld.empty=new ld(!0);class q1e{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function J6(t){let e=[];do e.push(K1e(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function K1e(t){let e=[];do e.push(Y1e(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Y1e(t){let e=Z1e(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=J1e(t,e);else break;return e}function RL(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function J1e(t,e){let n=RL(t),r=n;return t.eat(",")&&(t.next!="}"?r=RL(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Q1e(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Z1e(t){if(t.eat("(")){let e=J6(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Q1e(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function e_e(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function i(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;i(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),i(s(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return i(s(o.expr,a),l),i(s(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,l),u),l=u}if(o.max==-1)i(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),i(s(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function Q6(t,e){return e-t}function kL(t,e){let n=[];return r(e),n.sort(Q6);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&r(l)}}}function t_e(t){let e=Object.create(null);return n(kL(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<i.length;u++)i[u][0]==a&&(c=i[u][1]);kL(t,l).forEach(u=>{c||i.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new ld(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let a=i[o][1].sort(Q6);s.next.push({type:i[o][0],next:e[a.join(",")]||n(a)})}return s}}function n_e(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let a=0;a<i.next.length;a++){let{type:l,next:c}=i.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Z6(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function eV(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function tV(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function nV(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new i_e(t,r,e[r]);return n}let NL=class rV{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=nV(e,r.attrs),this.defaultAttrs=Z6(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ld.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:eV(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Sc(this,this.computeAttrs(e),Ge.from(n),Rn.setFrom(r))}createChecked(e=null,n,r){return n=Ge.from(n),this.checkContent(n),new Sc(this,this.computeAttrs(e),n,Rn.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Ge.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(Ge.empty,!0);return s?new Sc(this,e,n.append(s),Rn.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){tV(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Rn.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new rV(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function r_e(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class i_e{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?r_e(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Ow{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=nV(e,i.attrs),this.excluded=null;let s=Z6(this.attrs);this.instance=s?new Rn(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Rn(this,eV(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Ow(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){tV(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class iV{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=jr.from(e.nodes),n.marks=jr.from(e.marks||{}),this.nodes=NL.compile(this.spec.nodes,this),this.marks=Ow.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",a=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=ld.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=a=="_"?null:a?PL(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:PL(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof NL){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new d0(r,r.defaultAttrs,e,Rn.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Sc.fromJSON(this,e)}markFromJSON(e){return Rn.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function PL(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(i=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function s_e(t){return t.tag!=null}function o_e(t){return t.style!=null}class _c{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(s_e(i))this.tags.push(i);else if(o_e(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new IL(this,n,!1);return r.addAll(e,Rn.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new IL(this,n,!0);return r.addAll(e,Rn.none,n.from,n.to),dt.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(c_e(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=LL(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=LL(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new _c(e,_c.schemaRules(e)))}}const sV={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},a_e={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},oV={ol:!0,ul:!0},Bm=1,tM=2,Qp=4;function DL(t,e,n){return e!=null?(e?Bm:0)|(e==="full"?tM:0):t&&t.whitespace=="pre"?Bm|tM:n&~Qp}class by{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Rn.none,this.match=s||(o&Qp?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Ge.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Bm)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=Ge.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Ge.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!sV.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class IL{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=DL(null,n.preserveWhitespace,0)|(r?Qp:0);i?s=new by(i.type,i.attrs,Rn.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new by(null,null,Rn.none,!0,null,o):s=new by(e.schema.topNodeType,null,Rn.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&tM?"full":this.localPreserveWS||(i.options&Bm)>0;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;oV.hasOwnProperty(o)&&this.parser.normalizeLists&&l_e(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:a_e.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(sV.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(s,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(s=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}s&&this.sync(a)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=i==null?null:e.childNodes[i];o!=a;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!i||i.length>c.length+a)&&(i=c,s=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=Rn.none;for(let a of i.concat(e.marks))(s.type?s.type.allowsMarkType(a.type):OL(a.type,e.type))&&(o=a.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=DL(e,s,o.options);o.options&Qp&&o.content.length==0&&(a|=Qp);let l=Rn.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):OL(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new by(e,n,l,i,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Bm)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&i?this.nodes[l].type:r&&l>=s?r.node(l-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function l_e(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&oV.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function c_e(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function LL(t){let e={};for(let n in t)e[n]=t[n];return e}function OL(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class xd{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Q1(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)i=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=ox(Q1(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&ox(Q1(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return ox(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new xd(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=FL(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return FL(e.marks)}}function FL(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Q1(t){return t.document||window.document}const UL=new WeakMap;function u_e(t){let e=UL.get(t);return e===void 0&&UL.set(t,e=d_e(t)),e}function d_e(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function ox(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=u_e(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let a,l=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:x}=ox(t,h,n,r);if(l.appendChild(p),x){if(a)throw new RangeError("Multiple content holes");a=x}}}return{dom:l,contentDOM:a}}const aV=65535,lV=Math.pow(2,16);function f_e(t,e){return t+e*lV}function BL(t){return t&aV}function h_e(t){return(t-(t&aV))/lV}const cV=1,uV=2,ax=4,dV=8;class nM{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&dV)>0}get deletedBefore(){return(this.delInfo&(cV|ax))>0}get deletedAfter(){return(this.delInfo&(uV|ax))>0}get deletedAcross(){return(this.delInfo&ax)>0}}class vs{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&vs.empty)return vs.empty}recover(e){let n=0,r=BL(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+h_e(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(e<=d){let h=c?e==l?-1:e==d?1:n:n,p=l+i+(h<0?0:u);if(r)return p;let x=e==(n<0?l:d)?null:f_e(a/3,e-l),w=e==l?uV:e==d?cV:ax;return(n<0?e!=l:e!=d)&&(w|=dV),new nM(p,w,x)}i+=u-c}return r?e+i:new nM(e+i,0,null)}touches(e,n){let r=0,i=BL(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==i*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(a,a+c,l,l+u),s+=u-c}}invert(){return new vs(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?vs.empty:new vs(e<0?[0,-e,0]:[0,0,e])}}vs.empty=new vs([]);class zm{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new zm(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new zm;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this._maps[l].recover(a.recover);continue}}i|=a.delInfo,e=a.pos}return r?e:new nM(e,i,null)}}const Z1=Object.create(null);class mi{getMap(){return vs.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Z1[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Z1)throw new RangeError("Duplicate use of step JSON ID "+e);return Z1[e]=n,n.prototype.jsonID=e,n}}class hr{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new hr(e,null)}static fail(e){return new hr(null,e)}static fromReplace(e,n,r,i){try{return hr.ok(e.replace(n,r,i))}catch(s){if(s instanceof l0)return hr.fail(s.message);throw s}}}function lR(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(lR(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return Ge.fromArray(r)}class lc extends mi{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new dt(lR(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return hr.fromReplace(e,this.from,this.to,s)}invert(){return new la(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new lc(n.pos,r.pos,this.mark)}merge(e){return e instanceof lc&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new lc(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new lc(n.from,n.to,e.markFromJSON(n.mark))}}mi.jsonID("addMark",lc);class la extends mi{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new dt(lR(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return hr.fromReplace(e,this.from,this.to,r)}invert(){return new lc(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new la(n.pos,r.pos,this.mark)}merge(e){return e instanceof la&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new la(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new la(n.from,n.to,e.markFromJSON(n.mark))}}mi.jsonID("removeMark",la);class cc extends mi{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return hr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return hr.fromReplace(e,this.pos,this.pos+1,new dt(Ge.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new cc(this.pos,n.marks[i]);return new cc(this.pos,this.mark)}}return new cd(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new cc(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new cc(n.pos,e.markFromJSON(n.mark))}}mi.jsonID("addNodeMark",cc);class cd extends mi{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return hr.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return hr.fromReplace(e,this.pos,this.pos+1,new dt(Ge.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new cc(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new cd(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new cd(n.pos,e.markFromJSON(n.mark))}}mi.jsonID("removeNodeMark",cd);class Ar extends mi{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&rM(e,this.from,this.to)?hr.fail("Structure replace would overwrite content"):hr.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new vs([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ar(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Ar(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ar)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?dt.empty:new dt(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ar(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?dt.empty:new dt(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ar(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ar(n.from,n.to,dt.fromJSON(e,n.slice),!!n.structure)}}mi.jsonID("replace",Ar);class kr extends mi{constructor(e,n,r,i,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(rM(e,this.from,this.gapFrom)||rM(e,this.gapTo,this.to)))return hr.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return hr.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?hr.fromReplace(e,this.from,this.to,r):hr.fail("Content does not fit in gap")}getMap(){return new vs([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new kr(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new kr(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new kr(n.from,n.to,n.gapFrom,n.gapTo,dt.fromJSON(e,n.slice),n.insert,!!n.structure)}}mi.jsonID("replaceAround",kr);function rM(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function p_e(t,e,n,r){let i=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),p=Math.min(c+l.nodeSize,n),x=r.addToSet(d);for(let w=0;w<d.length;w++)d[w].isInSet(x)||(o&&o.to==h&&o.mark.eq(d[w])?o.to=p:i.push(o=new la(h,p,d[w])));a&&a.to==h?a.to=p:s.push(a=new lc(h,p,r))}}),i.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function m_e(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(r instanceof Ow){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],h;for(let p=0;p<i.length;p++){let x=i[p];x.step==s-1&&d.eq(i[p].style)&&(h=x)}h?(h.to=c,h.step=s):i.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),i.forEach(o=>t.step(new la(o.from,o.to,o.style)))}function cR(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<s.childCount;l++){let c=s.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new Ar(a,u,dt.empty));else{r=d;for(let h=0;h<c.marks.length;h++)n.allowsMarkType(c.marks[h].type)||t.step(new la(a,u,c.marks[h]));if(i&&c.isText&&n.whitespace!="pre"){let h,p=/\r?\n|\r/g,x;for(;h=p.exec(c.text);)x||(x=new dt(Ge.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new Ar(a+h.index,a+h.index+h[0].length,x))}}a=u}if(!r.validEnd){let l=r.fillBefore(Ge.empty,!0);t.replace(a,a,new dt(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function g_e(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Bh(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let i=t.$from.node(r),s=t.$from.index(r),o=t.$to.indexAfter(r);if(r<t.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!g_e(i,s,o))break}return null}function v_e(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),a=i.after(s+1),l=o,c=a,u=Ge.empty,d=0;for(let x=s,w=!1;x>n;x--)w||r.index(x)>0?(w=!0,u=Ge.from(r.node(x).copy(u)),d++):l--;let h=Ge.empty,p=0;for(let x=s,w=!1;x>n;x--)w||i.after(x+1)<i.end(x)?(w=!0,h=Ge.from(i.node(x).copy(h)),p++):c++;t.step(new kr(l,c,o,a,new dt(u.append(h),d,p),u.size-d,!0))}function uR(t,e,n=null,r=t){let i=y_e(t,e),s=i&&x_e(r,e);return s?i.map(zL).concat({type:e,attrs:n}).concat(s.map(zL)):null}function zL(t){return{type:t,attrs:null}}function y_e(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function x_e(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<i;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function w_e(t,e,n){let r=Ge.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Ge.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new kr(i,s,i,s,new dt(r,0,0),n.length,!0))}function b_e(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,l)&&S_e(t.doc,t.mapping.slice(s).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",x=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!x?c=!1:!p&&x&&(c=!0)}c===!1&&hV(t,o,a,s),cR(t,t.mapping.slice(s).map(a,1),r,void 0,c===null);let u=t.mapping.slice(s),d=u.map(a,1),h=u.map(a+o.nodeSize,1);return t.step(new kr(d,h,d+1,h-1,new dt(Ge.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&fV(t,o,a,s),!1}})}function fV(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(i.text);){let l=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function hV(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function S_e(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function __e(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new kr(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new dt(Ge.from(o),0,0),1,!0))}function rl(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let d=i.node(c),h=i.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(h,d.childCount),x=r&&r[u+1];x&&(p=p.replaceChild(0,x.type.create(x.attrs)));let w=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!w.type.validContent(p))return!1}let a=i.indexAfter(s),l=r&&r[0];return i.node(s).canReplaceWith(a,a,l?l.type:i.node(s+1).type)}function E_e(t,e,n=1,r){let i=t.doc.resolve(e),s=Ge.empty,o=Ge.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){s=Ge.from(i.node(a).copy(s));let u=r&&r[c];o=Ge.from(u?u.type.create(u.attrs,o):i.node(a).copy(o))}t.step(new Ar(e,e,new dt(s.append(o),n,n),!0))}function qc(t,e){let n=t.resolve(e),r=n.index();return pV(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function C_e(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function pV(t,e){return!!(t&&e&&!t.isLeaf&&C_e(t,e))}function Fw(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,a=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),a++,o=r.node(i).maybeChild(a)):(s=r.node(i).maybeChild(a-1),o=r.node(i+1)),s&&!s.isTextblock&&pV(s,o)&&r.node(i).canReplace(a,a+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function M_e(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);hV(t,u.node(),u.before(),a)}o.inlineContent&&cR(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new Ar(c,l.map(e+n,-1),dt.empty,!0)),r===!0){let u=t.doc.resolve(c);fV(t,u.node(),u.before(),t.steps.length)}return t}function T_e(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function mV(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(l,l,i);else{let d=c.contentMatchAt(l).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Uw(t,e,n=e,r=dt.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return gV(i,s,r)?new Ar(e,n,r):new A_e(i,s,r).fit()}function gV(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class A_e{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Ge.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=Ge.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,a=i.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new dt(s,o,a);return e>-1?new kr(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new Ar(r.pos,i.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=e_(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(Ge.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=e_(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new dt(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=e_(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new dt(Pp(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new dt(Pp(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let w=0;w<s.length;w++)this.openFrontierNode(s[w]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(i){for(let w=0;w<i.childCount;w++)u.push(i.child(w));d=d.matchFragment(i)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let w=a.child(c),y=d.matchType(w.type);if(!y)break;c++,(c>1||l==0||w.content.size)&&(d=y,u.push(vV(w.mark(h.allowedMarks(w.marks)),c==1?l:0,c==a.childCount?p:-1)))}let x=c==a.childCount;x||(p=-1),this.placed=Dp(this.placed,n,Ge.from(u)),this.frontier[n].match=d,x&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,y=a;w<p;w++){let v=y.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),y=v.content}this.unplaced=x?e==0?dt.empty:new dt(Pp(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new dt(Pp(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!t_(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=t_(e,n,i,r,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=t_(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Dp(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Dp(this.placed,this.depth,Ge.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Ge.empty,!0);n.childCount&&(this.placed=Dp(this.placed,this.frontier.length,n))}}function Pp(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Pp(t.firstChild.content,e-1,n)))}function Dp(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Dp(t.lastChild.content,e-1,n)))}function e_(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function vV(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,vV(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Ge.empty,!0)))),t.copy(r)}function t_(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=r.fillBefore(s.content,!0,o);return a&&!R_e(n,s.content,o)?a:null}function R_e(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function k_e(t){return t.spec.defining||t.spec.definingForContent}function N_e(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(gV(i,s,r))return t.step(new Ar(e,n,r));let o=xV(i,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(i.depth+1);o.unshift(a);for(let h=i.depth,p=i.pos-1;h>0;h--,p--){let x=i.node(h).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;o.indexOf(h)>-1?a=h:i.before(h)==p&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=r.openStart;for(let h=r.content,p=0;;p++){let x=h.firstChild;if(c.push(x),p==r.openStart)break;h=x.content}for(let h=u-1;h>=0;h--){let p=c[h],x=k_e(p.type);if(x&&!p.sameMarkup(i.node(Math.abs(a)-1)))u=h;else if(x||!p.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let p=(h+u+1)%(r.openStart+1),x=c[p];if(x)for(let w=0;w<o.length;w++){let y=o[(w+l)%o.length],v=!0;y<0&&(v=!1,y=-y);let S=i.node(y-1),E=i.index(y-1);if(S.canReplaceWith(E,E,x.type,x.marks))return t.replace(i.before(y),v?s.after(y):n,new dt(yV(r.content,0,r.openStart,p),p,r.openEnd))}}let d=t.steps.length;for(let h=o.length-1;h>=0&&(t.replace(e,n,r),!(t.steps.length>d));h--){let p=o[h];p<0||(e=i.before(p),n=s.after(p))}}function yV(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(yV(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(Ge.empty,!0))}return t}function P_e(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=T_e(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new dt(Ge.from(r),0,0))}function D_e(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=xV(r,i);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),i.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),i.indexAfter(a-1))))return t.delete(r.before(a),i.after(a))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function xV(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class Ff extends mi{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return hr.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return hr.fromReplace(e,this.pos,this.pos+1,new dt(Ge.from(i),0,n.isLeaf?0:1))}getMap(){return vs.empty}invert(e){return new Ff(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ff(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ff(n.pos,n.attr,n.value)}}mi.jsonID("attr",Ff);class jm extends mi{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return hr.ok(r)}getMap(){return vs.empty}invert(e){return new jm(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new jm(n.attr,n.value)}}mi.jsonID("docAttr",jm);let uh=class extends Error{};uh=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};uh.prototype=Object.create(Error.prototype);uh.prototype.constructor=uh;uh.prototype.name="TransformError";class I_e{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new zm}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new uh(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=dt.empty){let i=Uw(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new dt(Ge.from(r),0,0))}delete(e,n){return this.replace(e,n,dt.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return N_e(this,e,n,r),this}replaceRangeWith(e,n,r){return P_e(this,e,n,r),this}deleteRange(e,n){return D_e(this,e,n),this}lift(e,n){return v_e(this,e,n),this}join(e,n=1){return M_e(this,e,n),this}wrap(e,n){return w_e(this,e,n),this}setBlockType(e,n=e,r,i=null){return b_e(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return __e(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Ff(e,n,r)),this}setDocAttribute(e,n){return this.step(new jm(e,n)),this}addNodeMark(e,n){return this.step(new cc(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Rn)n.isInSet(r.marks)&&this.step(new cd(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new cd(e,s)),i=s.removeFromSet(i);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return E_e(this,e,n,r),this}addMark(e,n,r){return p_e(this,e,n,r),this}removeMark(e,n,r){return m_e(this,e,n,r),this}clearIncompatible(e,n,r){return cR(this,e,n,r),this}}const n_=Object.create(null);class Xt{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new L_e(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=dt.empty){let r=n.content.lastChild,i=null;for(let a=0;a<n.openEnd;a++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?dt.empty:n),a==0&&VL(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:a}=i[s],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),VL(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Ft(e):sf(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?sf(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):sf(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new _s(e.node(0))}static atStart(e){return sf(e,e,0,0,1)||new _s(e)}static atEnd(e){return sf(e,e,e.content.size,e.childCount,-1)||new _s(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=n_[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in n_)throw new RangeError("Duplicate use of selection JSON ID "+e);return n_[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Ft.between(this.$anchor,this.$head).getBookmark()}}Xt.prototype.visible=!0;class L_e{constructor(e,n){this.$from=e,this.$to=n}}let jL=!1;function HL(t){!jL&&!t.parent.inlineContent&&(jL=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Ft extends Xt{constructor(e,n=e){HL(e),HL(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Xt.near(r);let i=e.resolve(n.map(this.anchor));return new Ft(i.parent.inlineContent?i:r,r)}replace(e,n=dt.empty){if(super.replace(e,n),n==dt.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ft&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Bw(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ft(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Xt.findFrom(n,r,!0)||Xt.findFrom(n,-r,!0);if(s)n=s.$head;else return Xt.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Xt.findFrom(e,-r,!0)||Xt.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Ft(e,n)}}Xt.jsonID("text",Ft);class Bw{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Bw(e.map(this.anchor),e.map(this.head))}resolve(e){return Ft.between(e.resolve(this.anchor),e.resolve(this.head))}}class kt extends Xt{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?Xt.near(s):new kt(s)}content(){return new dt(Ge.from(this.node),0,0)}eq(e){return e instanceof kt&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new dR(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new kt(e.resolve(n.anchor))}static create(e,n){return new kt(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}kt.prototype.visible=!1;Xt.jsonID("node",kt);class dR{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Bw(r,r):new dR(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&kt.isSelectable(r)?new kt(n):Xt.near(n)}}class _s extends Xt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=dt.empty){if(n==dt.empty){e.delete(0,e.doc.content.size);let r=Xt.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new _s(e)}map(e){return new _s(e)}eq(e){return e instanceof _s}getBookmark(){return O_e}}Xt.jsonID("all",_s);const O_e={map(){return this},resolve(t){return new _s(t)}};function sf(t,e,n,r,i,s=!1){if(e.inlineContent)return Ft.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let a=e.child(o);if(a.isAtom){if(!s&&kt.isSelectable(a))return kt.create(t,n-(i<0?a.nodeSize:0))}else{let l=sf(t,a,n+i,i<0?a.childCount:0,i,s);if(l)return l}n+=a.nodeSize*i}return null}function VL(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof Ar||i instanceof kr))return;let s=t.mapping.maps[r],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(Xt.near(t.doc.resolve(o),n))}const $L=1,Sy=2,WL=4;class F_e extends I_e{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|$L)&~Sy,this.storedMarks=null,this}get selectionSet(){return(this.updated&$L)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Sy,this}ensureMarks(e){return Rn.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Sy)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Sy,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Rn.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),this.selection.empty||this.setSelection(Xt.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=WL,this}get scrolledIntoView(){return(this.updated&WL)>0}}function GL(t,e){return!e||!t?t:t.bind(e)}class Ip{constructor(e,n,r){this.name=e,this.init=GL(n.init,r),this.apply=GL(n.apply,r)}}const U_e=[new Ip("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Ip("selection",{init(t,e){return t.selection||Xt.atStart(e.doc)},apply(t){return t.selection}}),new Ip("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Ip("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class r_{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=U_e.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Ip(r.key,r.spec.state,r))})}}class bf{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=i?i[o].n:0,c=i?i[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new bf(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new F_e(this)}static create(e){let n=new r_(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new bf(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new r_(this.schema,e.plugins),r=n.fields,i=new bf(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new r_(e.schema,e.plugins),s=new bf(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Sc.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=Xt.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}}function wV(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=wV(i,e,{})),n[r]=i}return n}class Di{constructor(e){this.spec=e,this.props={},e.props&&wV(e.props,this,this.props),this.key=e.key?e.key.key:bV("plugin")}getState(e){return e[this.key]}}const i_=Object.create(null);function bV(t){return t in i_?t+"$"+ ++i_[t]:(i_[t]=0,t+"$")}class Bo{constructor(e="key"){this.key=bV(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Vr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},dh=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let iM=null;const Wa=function(t,e,n){let r=iM||(iM=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},B_e=function(){iM=null},ud=function(t,e,n,r){return n&&(XL(t,e,n,r,-1)||XL(t,e,n,r,1))},z_e=/^(img|br|input|textarea|hr)$/i;function XL(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Gs(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Pg(t)||z_e.test(t.nodeName)||t.contentEditable=="false")return!1;e=Vr(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Gs(t):0}else return!1}}function Gs(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function j_e(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Gs(t)}else if(t.parentNode&&!Pg(t))e=Vr(t),t=t.parentNode;else return null}}function H_e(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Pg(t))e=Vr(t)+1,t=t.parentNode;else return null}}function V_e(t,e,n){for(let r=e==0,i=e==Gs(t);r||i;){if(t==n)return!0;let s=Vr(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Gs(t)}}function Pg(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const zw=function(t){return t.focusNode&&ud(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function _u(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function $_e(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function W_e(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Gs(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Gs(r.startContainer),r.startOffset)}}}const ya=typeof navigator<"u"?navigator:null,qL=typeof document<"u"?document:null,Kc=ya&&ya.userAgent||"",sM=/Edge\/(\d+)/.exec(Kc),SV=/MSIE \d/.exec(Kc),oM=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Kc),Qi=!!(SV||oM||sM),Ec=SV?document.documentMode:oM?+oM[1]:sM?+sM[1]:0,Lo=!Qi&&/gecko\/(\d+)/i.test(Kc);Lo&&+(/Firefox\/(\d+)/.exec(Kc)||[0,0])[1];const aM=!Qi&&/Chrome\/(\d+)/.exec(Kc),di=!!aM,_V=aM?+aM[1]:0,Ti=!Qi&&!!ya&&/Apple Computer/.test(ya.vendor),fh=Ti&&(/Mobile\/\w+/.test(Kc)||!!ya&&ya.maxTouchPoints>2),js=fh||(ya?/Mac/.test(ya.platform):!1),G_e=ya?/Win/.test(ya.platform):!1,el=/Android \d/.test(Kc),Dg=!!qL&&"webkitFontSmoothing"in qL.documentElement.style,X_e=Dg?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function q_e(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function za(t,e){return typeof t=="number"?t:t[e]}function K_e(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function KL(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=dh(o);continue}let a=o,l=a==s.body,c=l?q_e(s):K_e(a),u=0,d=0;if(e.top<c.top+za(r,"top")?d=-(c.top-e.top+za(i,"top")):e.bottom>c.bottom-za(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+za(i,"top")-c.top:e.bottom-c.bottom+za(i,"bottom")),e.left<c.left+za(r,"left")?u=-(c.left-e.left+za(i,"left")):e.right>c.right-za(r,"right")&&(u=e.right-c.right+za(i,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let p=a.scrollLeft,x=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let w=a.scrollLeft-p,y=a.scrollTop-x;e={left:e.left-w,top:e.top-y,right:e.right-w,bottom:e.bottom-y}}let h=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(h))break;o=h=="absolute"?o.offsetParent:dh(o)}}function Y_e(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,i=l.top;break}}return{refDOM:r,refTop:i,stack:EV(t.dom)}}function EV(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=dh(r));return e}function J_e({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;CV(n,r==0?0:r-e)}function CV(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Qd=null;function Q_e(t){if(t.setActive)return t.setActive();if(Qd)return t.focus(Qd);let e=EV(t);t.focus(Qd==null?{get preventScroll(){return Qd={preventScroll:!0},!0}}:void 0),Qd||(Qd=!1,CV(e,0))}function MV(t,e){let n,r=2e8,i,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Wa(u).getClientRects();else continue;for(let p=0;p<h.length;p++){let x=h[p];if(x.top<=o&&x.bottom>=a){o=Math.max(x.bottom,o),a=Math.min(x.top,a);let w=x.left>e.left?x.left-e.left:x.right<e.left?e.left-x.right:0;if(w<r){n=u,r=w,i=w&&n.nodeType==3?{left:x.right<e.left?x.right:x.left,top:e.top}:e,u.nodeType==1&&w&&(s=d+(e.left>=(x.left+x.right)/2?1:0));continue}}else x.top>e.top&&!l&&x.left<=e.left&&x.right>=e.left&&(l=u,c={left:Math.max(x.left,Math.min(x.right,e.left)),top:x.top});!n&&(e.left>=x.right&&e.top>=x.top||e.left>=x.left&&e.top>=x.bottom)&&(s=d+1)}}return!n&&l&&(n=l,i=c,r=0),n&&n.nodeType==3?Z_e(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:MV(n,i)}function Z_e(t,e){let n=t.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let s=Hl(r,1);if(s.top!=s.bottom&&fR(e,s))return{node:t,offset:i+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function fR(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function eEe(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function tEe(t,e,n){let{node:r,offset:i}=MV(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function nEe(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!o&&l.left>r.left||l.top>r.top?i=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(i=a.posAfter),o=!0),!a.contentDOM&&i<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;s=a.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function TV(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(fR(e,c))return TV(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function rEe(t,e){let n=t.dom.ownerDocument,r,i=0,s=W_e(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!fR(e,c)||(o=TV(t.dom,e,c),!o))return null}if(Ti)for(let c=o;r&&c;c=dh(c))c.draggable&&(r=void 0);if(o=eEe(o,e),r){if(Lo&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;Dg&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(a=nEe(t,r,i,e))}a==null&&(a=tEe(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function YL(t){return t.top<t.bottom||t.left<t.right}function Hl(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(YL(r))return r}return Array.prototype.find.call(n,YL)||t.getBoundingClientRect()}const iEe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function AV(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Dg||Lo;if(r.nodeType==3)if(o&&(iEe.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let l=Hl(Wa(r,i,i),n);if(Lo&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=Hl(Wa(r,i-1,i-1),-1);if(c.top==l.top){let u=Hl(Wa(r,i,i+1),-1);if(u.top!=l.top)return bp(u,u.left<c.left)}}return l}else{let l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(l--,u=1):n<0?l--:c++,bp(Hl(Wa(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Gs(r))){let l=r.childNodes[i-1];if(l.nodeType==1)return s_(l.getBoundingClientRect(),!1)}if(s==null&&i<Gs(r)){let l=r.childNodes[i];if(l.nodeType==1)return s_(l.getBoundingClientRect(),!0)}return s_(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Gs(r))){let l=r.childNodes[i-1],c=l.nodeType==3?Wa(l,Gs(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return bp(Hl(c,1),!1)}if(s==null&&i<Gs(r)){let l=r.childNodes[i];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Wa(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return bp(Hl(c,-1),!0)}return bp(Hl(r.nodeType==3?Wa(r):r,-n),n>=0)}function bp(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function s_(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function RV(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function sEe(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return RV(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=AV(t,i.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Wa(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const oEe=/[\u0590-\u08ac]/;function aEe(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,a=t.domSelection();return a?!oEe.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:RV(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:x,focusOffset:w}=t.domSelectionRange(),y=x&&!p.contains(x.nodeType==1?x:x.parentNode)||l==x&&c==w;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),y}):r.pos==r.start()||r.pos==r.end()}let JL=null,QL=null,ZL=!1;function lEe(t,e,n){return JL==e&&QL==n?ZL:(JL=e,QL=n,ZL=n=="up"||n=="down"?sEe(t,e,n):aEe(t,e,n))}const Js=0,eO=1,Nu=2,xa=3;class Ig{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Js,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Vr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let a=i.children[o];if(a.size){i=a;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.size;if(a>e||o instanceof NV){i=e-s;break}s=a}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof kV&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Vr(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Vr(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(i==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){i=Vr(h.dom)+1;break}e-=h.size}i==-1&&(i=0)}if(i>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Vr(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let p=0,x=0;p<this.children.length;p++){let w=this.children[p],y=x+w.size;if(s>x&&o<y)return w.setSelection(e-x-w.border,n-x-w.border,r,i);x=y}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Lo||Ti)&&e==n){let{node:p,offset:x}=a;if(p.nodeType==3){if(d=!!(x&&p.nodeValue[x-1]==`
`),d&&x==p.nodeValue.length)for(let w=p,y;w;w=w.parentNode){if(y=w.nextSibling){y.nodeName=="BR"&&(a=l={node:y.parentNode,offset:Vr(y)+1});break}let v=w.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let w=p.childNodes[x-1];d=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(Lo&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(i=!0)}if(!(i||d&&Ti)&&ud(a.node,a.offset,u.anchorNode,u.anchorOffset)&&ud(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==n)&&!d){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>n){let x=a;a=l,l=x}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?Nu:eO,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=xa:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Nu:xa}r=o}this.dirty=Nu}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Nu:eO;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class kV extends Ig{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Js&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class cEe extends Ig{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class dd extends Ig{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=xd.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new dd(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&xa||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=xa&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Js){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Js}}slice(e,n,r){let i=dd.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=cM(s,n,o,r)),e>0&&(s=cM(s,0,e,r));for(let a=0;a<s.length;a++)s[a].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Cc extends Ig{constructor(e,n,r,i,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=a}static create(e,n,r,i,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=xd.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=IV(u,r,n),c?l=new uEe(e,n,r,i,u,d||null,h,c,s,o+1):n.isText?new jw(e,n,r,i,u,h,s):new Cc(e,n,r,i,u,d||null,h,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Ge.empty)}return e}matchesNode(e,n,r){return this.dirty==Js&&e.eq(this.node)&&f0(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new fEe(this,o&&o.node,e);mEe(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Rn.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,i)},(c,u,d,h)=>{l.syncToMarks(c.marks,r,e);let p;l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,p,e)||l.updateNextNode(c,u,d,e,h,i)||l.addNode(c,u,d,e,i),i+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Nu)&&(o&&this.protectLocalComposition(e,o),PV(this.contentDOM,this.children,e),fh&&gEe(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Ft)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,a=vEe(this.node.content,o,r-n,i-n);return a<0?null:{node:s,pos:a,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new cEe(this,s,n,i);e.input.compositionNodes.push(o),this.children=cM(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==xa||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Js}updateOuterDeco(e){if(f0(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=DV(this.dom,this.nodeDOM,lM(this.outerDeco,this.node,n),lM(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function tO(t,e,n,r,i){IV(r,e,t);let s=new Cc(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class jw extends Cc{constructor(e,n,r,i,s,o,a){super(e,n,r,i,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==xa||this.dirty!=Js&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Js||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Js,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new jw(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=xa)}get domAtom(){return!1}isText(e){return this.node.text==e}}class NV extends Ig{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Js&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class uEe extends Cc{constructor(e,n,r,i,s,o,a,l,c,u){super(e,n,r,i,s,o,a,c,u),this.spec=l}update(e,n,r,i){if(this.dirty==xa)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function PV(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=nO(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(o instanceof dd){let l=r?r.previousSibling:t.lastChild;PV(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=nO(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Zp=function(t){t&&(this.nodeName=t)};Zp.prototype=Object.create(null);const Pu=[new Zp];function lM(t,e,n){if(t.length==0)return Pu;let r=n?Pu[0]:new Zp,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new Zp(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&i.length==1&&i.push(r=new Zp(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return i}function DV(t,e,n,r){if(n==Pu&&r==Pu)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&i!=t&&(l=i.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(i),a=Pu[0]),i=l}dEe(i,a||Pu[0],o)}return i}function dEe(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function IV(t,e,n){return DV(t,t,Pu,lM(e,n,t.nodeType!=1))}function f0(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function nO(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class fEe{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=hEe(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Js,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=dd.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==xa&&o.dom==o.contentDOM&&(o.dirty=Nu),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Cc){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=xa&&f0(n,l.outerDeco));if(!h&&l.update(e,n,r,i))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,n,r,i,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Nu,d.updateChildren(i,o+1),d.dirty=Js),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!f0(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let a=Cc.create(this.top,n,r,i,s,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,i,s){let o=Cc.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new kV(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof dd;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof jw)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ti||di)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new NV(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function hEe(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof dd)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(i-1))break;--i,s.set(a,i),o.push(a)}}return{index:i,matched:s,matches:o.reverse()}}function pEe(t,e){return t.type.side-e.type.side}function mEe(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<i.length&&i[o].to==s;){let y=i[o++];y.widget&&(u?(d||(d=[u])).push(y):u=y)}if(u)if(d){d.sort(pEe);for(let y=0;y<d.length;y++)n(d[y],c,!!l)}else n(u,c,!!l);let h,p;if(l)p=-1,h=l,l=null;else if(c<t.childCount)p=c,h=t.child(c++);else break;for(let y=0;y<a.length;y++)a[y].to<=s&&a.splice(y--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)a.push(i[o++]);let x=s+h.nodeSize;if(h.isText){let y=x;o<i.length&&i[o].from<y&&(y=i[o].from);for(let v=0;v<a.length;v++)a[v].to<y&&(y=a[v].to);y<x&&(l=h.cut(y-s),h=h.cut(0,y-s),x=y,p=-1)}else for(;o<i.length&&i[o].to<x;)o++;let w=h.isInline&&!h.isLeaf?a.filter(y=>!y.inline):a.slice();r(h,w,e.forChild(s,h),p),s=x}}function gEe(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function vEe(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){if(s>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function cM(t,e,n,r,i){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(l.slice(n-c,l.size,r)))}return s}function hR(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(zw(n)){for(l=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&kt.isSelectable(d)&&i.parent&&!(d.isInline&&V_e(n.focusNode,n.focusOffset,i.dom))){let h=i.posBefore;c=new kt(o==h?a:r.resolve(h))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,h=o;for(let p=0;p<n.rangeCount;p++){let x=n.getRangeAt(p);d=Math.min(d,t.docView.posFromDOM(x.startContainer,x.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(d<0)return null;[l,o]=h==t.state.selection.anchor?[h,d]:[d,h],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=pR(t,u,a,d)}return c}function LV(t){return t.editable?t.hasFocus():FV(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function il(t,e=!1){let n=t.state.selection;if(OV(t,n),!!LV(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&di){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ud(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)xEe(t);else{let{anchor:r,head:i}=n,s,o;rO&&!(n instanceof Ft)&&(n.$from.parent.inlineContent||(s=iO(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=iO(t,n.to))),t.docView.setSelection(r,i,t,e),rO&&(s&&sO(s),o&&sO(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&yEe(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const rO=Ti||di&&_V<63;function iO(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Ti&&i&&i.contentEditable=="false")return o_(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return o_(i);if(s)return o_(s)}}function o_(t){return t.contentEditable="true",Ti&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function sO(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function yEe(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!LV(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function xEe(t){let e=t.domSelection(),n=document.createRange();if(!e)return;let r=t.cursorWrapper.dom,i=r.nodeName=="IMG";i?n.setStart(r.parentNode,Vr(r)+1):n.setStart(r,0),n.collapse(!0),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&Qi&&Ec<=11&&(r.disabled=!0,r.disabled=!1)}function OV(t,e){if(e instanceof kt){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(oO(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else oO(t)}function oO(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function pR(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Ft.between(e,n,r)}function aO(t){return t.editable&&!t.hasFocus()?!1:FV(t)}function FV(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function wEe(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return ud(e.node,e.offset,n.anchorNode,n.anchorOffset)}function uM(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Xt.findFrom(s,e)}function Xl(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function lO(t,e,n){let r=t.state.selection;if(r instanceof Ft)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return Xl(t,new Ft(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=uM(t.state,e);return i&&i instanceof kt?Xl(t,i):!1}else if(!(js&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?kt.isSelectable(s)?Xl(t,new kt(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Dg?Xl(t,new Ft(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof kt&&r.node.isInline)return Xl(t,new Ft(e>0?r.$to:r.$from));{let i=uM(t.state,e);return i?Xl(t,i):!1}}}function h0(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function em(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Zd(t,e){return e<0?bEe(t):SEe(t)}function bEe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Lo&&n.nodeType==1&&r<h0(n)&&em(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(em(a,-1))i=n,s=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(UV(n))break;{let a=n.previousSibling;for(;a&&em(a,-1);)i=n.parentNode,s=Vr(a),a=a.previousSibling;if(a)n=a,r=h0(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?dM(t,n,r):i&&dM(t,i,s)}function SEe(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=h0(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let a=n.childNodes[r];if(em(a,1))s=n,o=++r;else break}else{if(UV(n))break;{let a=n.nextSibling;for(;a&&em(a,1);)s=a.parentNode,o=Vr(a)+1,a=a.nextSibling;if(a)n=a,r=0,i=h0(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&dM(t,s,o)}function UV(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function _Ee(t,e){for(;t&&e==t.childNodes.length&&!Pg(t);)e=Vr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function EEe(t,e){for(;t&&!e&&!Pg(t);)e=Vr(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function dM(t,e,n){if(e.nodeType!=3){let s,o;(o=_Ee(e,n))?(e=o,n=0):(s=EEe(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(zw(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&il(t)},50)}function cO(t,e){let n=t.state.doc.resolve(e);if(!(di||G_e)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function uO(t,e,n){let r=t.state.selection;if(r instanceof Ft&&!r.empty||n.indexOf("s")>-1||js&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=uM(t.state,e);if(o&&o instanceof kt)return Xl(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,a=r instanceof _s?Xt.near(o,e):Xt.findFrom(o,e);return a?Xl(t,a):!1}return!1}function dO(t,e){if(!(t.state.selection instanceof Ft))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function fO(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function CEe(t){if(!Ti||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;fO(t,r,"true"),setTimeout(()=>fO(t,r,"false"),20)}return!1}function MEe(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function TEe(t,e){let n=e.keyCode,r=MEe(e);if(n==8||js&&n==72&&r=="c")return dO(t,-1)||Zd(t,-1);if(n==46&&!e.shiftKey||js&&n==68&&r=="c")return dO(t,1)||Zd(t,1);if(n==13||n==27)return!0;if(n==37||js&&n==66&&r=="c"){let i=n==37?cO(t,t.state.selection.from)=="ltr"?-1:1:-1;return lO(t,i,r)||Zd(t,i)}else if(n==39||js&&n==70&&r=="c"){let i=n==39?cO(t,t.state.selection.from)=="ltr"?1:-1:1;return lO(t,i,r)||Zd(t,i)}else{if(n==38||js&&n==80&&r=="c")return uO(t,-1,r)||Zd(t,-1);if(n==40||js&&n==78&&r=="c")return CEe(t)||uO(t,1,r)||Zd(t,1);if(r==(js?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function mR(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let o=t.someProp("clipboardSerializer")||xd.fromSchema(t.state.schema),a=$V(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=VV[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let x=a.createElement(u[p]);for(;l.firstChild;)x.appendChild(l.firstChild);l.appendChild(x),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function BV(t,e,n,r,i){let s=i.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(r||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||r,t)}),s)return e?new dt(Ge.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):dt.empty;let d=t.someProp("clipboardTextParser",h=>h(e,i,r,t));if(d)a=d;else{let h=i.marks(),{schema:p}=t.state,x=xd.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let y=o.appendChild(document.createElement("p"));w&&y.appendChild(x.serializeNode(p.text(w,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=NEe(n),Dg&&PEe(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||_c.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:i,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!AEe.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=DEe(hO(a,+u[1],+u[2]),u[4]);else if(a=dt.maxOpen(REe(a.content,i),!0),a.openStart||a.openEnd){let d=0,h=0;for(let p=a.content.firstChild;d<a.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=a.content.lastChild;h<a.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);a=hO(a,d,h)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}const AEe=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function REe(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=i.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&jV(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=HV(o[o.length-1],s.length));let u=zV(a,l);o.push(u),i=i.matchType(u.type),s=l}}),o)return Ge.from(o)}return t}function zV(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Ge.from(t));return t}function jV(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=jV(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(Ge.from(zV(n,t,i+1))))}}function HV(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,HV(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Ge.empty,!0);return t.copy(n.append(r))}function fM(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),i<r-1&&(a=fM(a,e,n,r,i+1,s)),i>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=i).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Ge.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function hO(t,e,n){return e<t.openStart&&(t=new dt(fM(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new dt(fM(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const VV={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let pO=null;function $V(){return pO||(pO=document.implementation.createHTMLDocument("title"))}let a_=null;function kEe(t){let e=window.trustedTypes;return e?(a_||(a_=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),a_.createHTML(t)):t}function NEe(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=$V().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&VV[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=kEe(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function PEe(t){let e=t.querySelectorAll(di?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function DEe(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;i=Ge.from(l.create(r[a+1],i)),s++,o++}return new dt(i,s,o)}const Ai={},Ri={},IEe={touchstart:!0,touchmove:!0};class LEe{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function OEe(t){for(let e in Ai){let n=Ai[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{UEe(t,r)&&!gR(t,r)&&(t.editable||!(r.type in Ri))&&n(t,r)},IEe[e]?{passive:!0}:void 0)}Ti&&t.dom.addEventListener("input",()=>null),hM(t)}function uc(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function FEe(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function hM(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>gR(t,r))})}function gR(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function UEe(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function BEe(t,e){!gR(t,e)&&Ai[e.type]&&(t.editable||!(e.type in Ri))&&Ai[e.type](t,e)}Ri.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!GV(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(el&&di&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),fh&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,_u(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||TEe(t,n)?n.preventDefault():uc(t,"key")};Ri.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Ri.keypress=(t,e)=>{let n=e;if(GV(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||js&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Ft)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function Hw(t){return{left:t.clientX,top:t.clientY}}function zEe(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function vR(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),i,!0):a(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Uf(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function jEe(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&kt.isSelectable(r)?(Uf(t,new kt(n)),!0):!1}function HEe(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof kt&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(kt.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Uf(t,kt.create(t.state.doc,i)),!0):!1}function VEe(t,e,n,r,i){return vR(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?HEe(t,n):jEe(t,n))}function $Ee(t,e,n,r){return vR(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function WEe(t,e,n,r){return vR(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||GEe(t,n,r)}function GEe(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Uf(t,Ft.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),a=i.before(s);if(o.inlineContent)Uf(t,Ft.create(r,a+1,a+1+o.content.size));else if(kt.isSelectable(o))Uf(t,kt.create(r,a));else continue;return!0}}function yR(t){return p0(t)}const WV=js?"metaKey":"ctrlKey";Ai.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=yR(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&zEe(n,t.input.lastClick)&&!n[WV]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(Hw(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new XEe(t,o,n,!!r)):(s=="doubleClick"?$Ee:WEe)(t,o.pos,o.inside,n)?n.preventDefault():uc(t,"pointer"))};class XEe{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[WV],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const a=i?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof kt&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Lo&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),uc(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>il(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Hw(e))),this.updateAllowDefault(e),this.allowDefault||!n?uc(this.view,"pointer"):VEe(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ti&&this.mightDrag&&!this.mightDrag.node.isAtom||di&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Uf(this.view,Xt.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):uc(this.view,"pointer")}move(e){this.updateAllowDefault(e),uc(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ai.touchstart=t=>{t.input.lastTouch=Date.now(),yR(t),uc(t,"pointer")};Ai.touchmove=t=>{t.input.lastTouch=Date.now(),uc(t,"pointer")};Ai.contextmenu=t=>yR(t);function GV(t,e){return t.composing?!0:Ti&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const qEe=el?5e3:-1;Ri.compositionstart=Ri.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Ft&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),p0(t,!0),t.markCursor=null;else if(p0(t,!e.selection.empty),Lo&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}XV(t,qEe)};Ri.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,XV(t,20))};function XV(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>p0(t),e))}function qV(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=YEe());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function KEe(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=j_e(e.focusNode,e.focusOffset),r=H_e(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function YEe(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function p0(t,e=!1){if(!(el&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),qV(t),e||t.docView&&t.docView.dirty){let n=hR(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function JEe(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Hm=Qi&&Ec<15||fh&&X_e<604;Ai.copy=Ri.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Hm?null:n.clipboardData,o=r.content(),{dom:a,text:l}=mR(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):JEe(t,a),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function QEe(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function ZEe(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Vm(t,r.value,null,i,e):Vm(t,r.textContent,r.innerHTML,i,e)},50)}function Vm(t,e,n,r,i){let s=BV(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,i,s||dt.empty)))return!0;if(!s)return!1;let o=QEe(s),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function KV(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ri.paste=(t,e)=>{let n=e;if(t.composing&&!el)return;let r=Hm?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Vm(t,KV(r),r.getData("text/html"),i,n)?n.preventDefault():ZEe(t,n)};class YV{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const eCe=js?"altKey":"ctrlKey";function JV(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[eCe]}Ai.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(Hw(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof kt?i.to-1:i.to))){if(r&&r.mightDrag)o=kt.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=kt.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:u}=mR(t,a);(!n.dataTransfer.files.length||!di||_V>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Hm?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Hm||n.dataTransfer.setData("text/plain",c),t.dragging=new YV(u,JV(t,n),o)};Ai.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Ri.dragover=Ri.dragenter=(t,e)=>e.preventDefault();Ri.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let i=t.posAtCoords(Hw(n));if(!i)return;let s=t.state.doc.resolve(i.pos),o=r&&r.slice;o?t.someProp("transformPasted",x=>{o=x(o,t)}):o=BV(t,KV(n.dataTransfer),Hm?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(r&&JV(t,n));if(t.someProp("handleDrop",x=>x(t,n,o||dt.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?mV(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;if(a){let{node:x}=r;x?x.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&kt.isSelectable(o.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new kt(p));else{let x=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((w,y,v,S)=>x=S),c.setSelection(pR(t,p,c.doc.resolve(x)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};Ai.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&il(t)},20))};Ai.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Ai.beforeinput=(t,e)=>{if(di&&el&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,_u(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in Ri)Ai[t]=Ri[t];function $m(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class m0{constructor(e,n){this.toDOM=e,this.spec=n||$u,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new xs(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof m0&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&$m(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Mc{constructor(e,n){this.attrs=e,this.spec=n||$u}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new xs(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Mc&&$m(this.attrs,e.attrs)&&$m(this.spec,e.spec)}static is(e){return e.type instanceof Mc}destroy(){}}class xR{constructor(e,n){this.attrs=e,this.spec=n||$u}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new xs(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof xR&&$m(this.attrs,e.attrs)&&$m(this.spec,e.spec)}destroy(){}}class xs{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new xs(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new xs(e,e,new m0(n,r))}static inline(e,n,r,i){return new xs(e,n,new Mc(r,i))}static node(e,n,r,i){return new xs(e,n,new xR(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Mc}get widget(){return this.type instanceof m0}}const of=[],$u={};class dr{constructor(e,n){this.local=e.length?e:of,this.children=n.length?n:of}static create(e,n){return n.length?g0(n,e,0,$u):ai}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&r.push(a.copy(a.from+i,a.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,i+a,s)}}map(e,n,r){return this==ai||e.maps.length==0?this:this.mapInner(e,n,0,0,r||$u)}mapInner(e,n,r,i,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,i);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?tCe(this.children,o||[],e,n,r,i,s):o?new dr(o.sort(Wu),of):ai}add(e,n){return n.length?this==ai?dr.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((a,l)=>{let c=l+r,u;if(u=ZV(n,a,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<l;)s+=3;i[s]==l?i[s+2]=i[s+2].addInner(a,u,c+1):i.splice(s,0,l,l+a.nodeSize,g0(u,a,c+1,$u)),s+=3}});let o=QV(s?e$(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new dr(o.length?this.local.concat(o).sort(Wu):this.local,i||this.children)}remove(e){return e.length==0||this==ai?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,a=r[s]+n,l=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,a+1);c!=ai?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<i.length;a++)i[a].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(a--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new dr(i,r):ai}forChild(e,n){if(this==ai)return this;if(n.isLeaf)return dr.empty;let r,i;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof Mc){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(i||(i=[])).push(l.copy(c,u))}}if(i){let a=new dr(i.sort(Wu),of);return r?new Ql([a,r]):a}return r||ai}eq(e){if(this==e)return!0;if(!(e instanceof dr)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return wR(this.localsInner(e))}localsInner(e){if(this==ai)return of;if(e.inlineContent||!this.local.some(Mc.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Mc||n.push(this.local[r]);return n}forEachSet(e){e(this)}}dr.empty=new dr([],[]);dr.removeOverlap=wR;const ai=dr.empty;class Ql{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,$u));return Ql.from(r)}forChild(e,n){if(n.isLeaf)return dr.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=ai&&(s instanceof Ql?r=r.concat(s.members):r.push(s))}return Ql.from(r)}eq(e){if(!(e instanceof Ql)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?wR(r?n:n.sort(Wu)):of}static from(e){switch(e.length){case 0:return ai;case 1:return e[0];default:return new Ql(e.every(n=>n instanceof dr)?e:e.reduce((n,r)=>n.concat(r instanceof dr?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function tCe(t,e,n,r,i,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,p,x,w)=>{let y=w-x-(p-h);for(let v=0;v<a.length;v+=3){let S=a[v+1];if(S<0||h>S+u-d)continue;let E=a[v]+u-d;p>=E?a[v+1]=h<=E?-2:-1:h>=u&&y&&(a[v]+=y,a[v+1]+=y)}d+=y}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-i;if(d<0||d>=r.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),p=h-i,{index:x,offset:w}=r.content.findIndex(d),y=r.maybeChild(x);if(y&&w==d&&w+y.nodeSize==p){let v=a[c+2].mapInner(n,y,u+1,t[c]+s+1,o);v!=ai?(a[c]=d,a[c+1]=p,a[c+2]=v):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=nCe(a,t,e,n,i,s,o),u=g0(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let p=u.children[d];for(;h<a.length&&a[h]<p;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new dr(e.sort(Wu),a)}function QV(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new xs(i.from+e,i.to+e,i.type))}return n}function nCe(t,e,n,r,i,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,i,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function ZV(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function e$(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function g0(t,e,n,r){let i=[],s=!1;e.forEach((a,l)=>{let c=ZV(t,a,l+n);if(c){s=!0;let u=g0(c,a,n+l+1,r);u!=ai&&i.push(l,l+a.nodeSize,u)}});let o=QV(s?e$(t):t,-n).sort(Wu);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||i.length?new dr(o,i):ai}function Wu(t,e){return t.from-e.from||t.to-e.to}function wR(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),mO(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),mO(e,i,r.copy(s.from,r.to)));break}}}return e}function mO(t,e,n){for(;e<t.length&&Wu(n,t[e])>0;)e++;t.splice(e,0,n)}function l_(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=ai&&e.push(r)}),t.cursorWrapper&&e.push(dr.create(t.state.doc,[t.cursorWrapper.deco])),Ql.from(e)}const rCe={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},iCe=Qi&&Ec<=11;class sCe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class oCe{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new sCe,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Qi&&Ec<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),iCe&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,rCe)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(aO(this.view)){if(this.suppressingSelectionUpdates)return il(this.view);if(Qi&&Ec<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ud(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=dh(s))n.add(s);for(let s=e.anchorNode;s;s=dh(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&aO(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(Lo&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let p=h.parentNode;p&&p.nodeName=="LI"&&(!d||cCe(e,d)!=p)&&h.remove()}}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&zw(r)&&(c=hR(e))&&c.eq(Xt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,il(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),aCe(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||il(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Qi&&Ec<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let o=i&&i.parentNode==e.target?Vr(i)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?Vr(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let gO=new WeakMap,vO=!1;function aCe(t){if(!gO.has(t)&&(gO.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Lo,vO)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),vO=!0}}function yO(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return ud(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function lCe(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return yO(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?yO(t,n):null}function cCe(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function uCe(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],zw(l)||c.push({node:l.focusNode,offset:l.focusOffset})),di&&t.input.lastKeyCode===8)for(let y=s;y>i;y--){let v=r.childNodes[y-1],S=v.pmViewDesc;if(v.nodeName=="BR"&&!S){s=y;break}if(!S||S.size)break}let d=t.state.doc,h=t.someProp("domParser")||_c.fromSchema(t.state.schema),p=d.resolve(o),x=null,w=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:dCe,context:p});if(c&&c[0].pos!=null){let y=c[0].pos,v=c[1]&&c[1].pos;v==null&&(v=y),x={anchor:y+o,head:v+o}}return{doc:w,sel:x,from:o,to:a}}function dCe(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Ti&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Ti&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const fCe=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function hCe(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let R=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,P=hR(t,R);if(P&&!t.state.selection.eq(P)){if(di&&el&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",I=>I(t,_u(13,"Enter"))))return;let M=t.state.tr.setSelection(P);R=="pointer"?M.setMeta("pointer",!0):R=="key"&&M.scrollIntoView(),s&&M.setMeta("composition",s),t.dispatch(M)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=uCe(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,p="end"):(h=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let x=gCe(d.content,c.doc.content,c.from,h,p);if(x&&t.input.domChangeCount++,(fh&&t.input.lastIOSEnter>Date.now()-225||el)&&i.some(R=>R.nodeType==1&&!fCe.test(R.nodeName))&&(!x||x.endA>=x.endB)&&t.someProp("handleKeyDown",R=>R(t,_u(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!x)if(r&&l instanceof Ft&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))x={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let R=xO(t,t.state.doc,c.sel);if(R&&!R.eq(t.state.selection)){let P=t.state.tr.setSelection(R);s&&P.setMeta("composition",s),t.dispatch(P)}}return}t.state.selection.from<t.state.selection.to&&x.start==x.endB&&t.state.selection instanceof Ft&&(x.start>t.state.selection.from&&x.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?x.start=t.state.selection.from:x.endA<t.state.selection.to&&x.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(x.endB+=t.state.selection.to-x.endA,x.endA=t.state.selection.to)),Qi&&Ec<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>c.from&&c.doc.textBetween(x.start-c.from-1,x.start-c.from+1)==" "&&(x.start--,x.endA--,x.endB--);let w=c.doc.resolveNoCache(x.start-c.from),y=c.doc.resolveNoCache(x.endB-c.from),v=u.resolve(x.start),S=w.sameParent(y)&&w.parent.inlineContent&&v.end()>=x.endA,E;if((fh&&t.input.lastIOSEnter>Date.now()-225&&(!S||i.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!S&&w.pos<c.doc.content.size&&(!w.sameParent(y)||!w.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(w.pos,y.pos,"",""))&&(E=Xt.findFrom(c.doc.resolve(w.pos+1),1,!0))&&E.head>w.pos)&&t.someProp("handleKeyDown",R=>R(t,_u(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>x.start&&mCe(u,x.start,x.endA,w,y)&&t.someProp("handleKeyDown",R=>R(t,_u(8,"Backspace")))){el&&di&&t.domObserver.suppressSelectionUpdates();return}di&&x.endB==x.start&&(t.input.lastChromeDelete=Date.now()),el&&!S&&w.start()!=y.start()&&y.parentOffset==0&&w.depth==y.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==x.endA&&(x.endB-=2,y=c.doc.resolveNoCache(x.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(R){return R(t,_u(13,"Enter"))})},20));let C=x.start,T=x.endA,A=R=>{let P=R||t.state.tr.replace(C,T,c.doc.slice(x.start-c.from,x.endB-c.from));if(c.sel){let M=xO(t,P.doc,c.sel);M&&!(di&&t.composing&&M.empty&&(x.start!=x.endB||t.input.lastChromeDelete<Date.now()-100)&&(M.head==C||M.head==P.mapping.map(T)-1)||Qi&&M.empty&&M.head==C)&&P.setSelection(M)}return s&&P.setMeta("composition",s),P.scrollIntoView()},k;if(S){if(w.pos==y.pos){Qi&&Ec<=11&&w.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>il(t),20));let R=A(t.state.tr.delete(C,T)),P=u.resolve(x.start).marksAcross(u.resolve(x.endA));P&&R.ensureMarks(P),t.dispatch(R)}else if(x.endA==x.endB&&(k=pCe(w.parent.content.cut(w.parentOffset,y.parentOffset),v.parent.content.cut(v.parentOffset,x.endA-v.start())))){let R=A(t.state.tr);k.type=="add"?R.addMark(C,T,k.mark):R.removeMark(C,T,k.mark),t.dispatch(R)}else if(w.parent.child(w.index()).isText&&w.index()==y.index()-(y.textOffset?0:1)){let R=w.parent.textBetween(w.parentOffset,y.parentOffset),P=()=>A(t.state.tr.insertText(R,C,T));t.someProp("handleTextInput",M=>M(t,C,T,R,P))||t.dispatch(P())}}else t.dispatch(A())}function xO(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:pR(t,e.resolve(n.anchor),e.resolve(n.head))}function pCe(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,a,l;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)a=i[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(i.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(Ge.from(c).eq(t))return{mark:a,type:o}}function mCe(t,e,n,r,i){if(n-e<=i.pos-r.pos||c_(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let a=s.nodeAfter;return a!=null&&n==e+a.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(c_(s,!0,!0));return!o.parent.isTextblock||o.pos>n||c_(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function c_(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function gCe(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let l=Math.max(0,s-Math.min(o,a));r-=o+l-s}if(o<s&&t.size<e.size){let l=r<=s&&r>=o?s-r:0;s-=l,s&&s<e.size&&wO(e.textBetween(s-1,s+1))&&(s+=l?1:-1),a=s+(a-o),o=s}else if(a<s){let l=r<=s&&r>=a?s-r:0;s-=l,s&&s<t.size&&wO(t.textBetween(s-1,s+1))&&(s+=l?1:-1),o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}function wO(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class t${constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new LEe,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(CO),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=_O(this),SO(this),this.nodeViews=EO(this),this.docView=tO(this.state.doc,bO(this),l_(this),this.dom,this),this.domObserver=new oCe(this,(r,i,s,o)=>hCe(this,r,i,s,o)),this.domObserver.start(),OEe(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&hM(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(CO),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(qV(this),o=!0),this.state=e;let a=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=EO(this);yCe(p,this.nodeViews)&&(this.nodeViews=p,s=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&hM(this),this.editable=_O(this),SO(this);let l=l_(this),c=bO(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(i.selection))&&(o=!0);let h=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&Y_e(this);if(o){this.domObserver.stop();let p=d&&(Qi||di)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&vCe(i.selection,e.selection);if(d){let x=di?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=KEe(this)),(s||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=tO(e.doc,c,l,this.dom,this)),x&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&wEe(this))?il(this,p):(OV(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&J_e(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof kt){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&KL(this,n.getBoundingClientRect(),e)}else KL(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new YV(e.slice,e.move,i<0?void 0:kt.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(i=n?n(a):a))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(i=n?n(a):a))return i}}hasFocus(){if(Qi){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Q_e(this.dom),il(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return rEe(this,e)}coordsAtPos(e,n=1){return AV(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return lEe(this,n||this.state,e)}pasteHTML(e,n){return Vm(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Vm(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return mR(this,e)}destroy(){this.docView&&(FEe(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],l_(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,B_e())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return BEe(this,e)}domSelectionRange(){let e=this.domSelection();return e?Ti&&this.root.nodeType===11&&$_e(this.dom.ownerDocument)==this.dom&&lCe(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}t$.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function bO(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[xs.node(0,t.state.doc.content.size,e)]}function SO(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:xs.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function _O(t){return!t.someProp("editable",e=>e(t.state)===!1)}function vCe(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function EO(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function yCe(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function CO(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Lc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},v0={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},xCe=typeof navigator<"u"&&/Mac/.test(navigator.platform),wCe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var $r=0;$r<10;$r++)Lc[48+$r]=Lc[96+$r]=String($r);for(var $r=1;$r<=24;$r++)Lc[$r+111]="F"+$r;for(var $r=65;$r<=90;$r++)Lc[$r]=String.fromCharCode($r+32),v0[$r]=String.fromCharCode($r);for(var u_ in Lc)v0.hasOwnProperty(u_)||(v0[u_]=Lc[u_]);function bCe(t){var e=xCe&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||wCe&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?v0:Lc)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const SCe=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),_Ce=typeof navigator<"u"&&/Win/.test(navigator.platform);function ECe(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))SCe?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function CCe(t){let e=Object.create(null);for(let n in t)e[ECe(n)]=t[n];return e}function d_(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function MCe(t){return new Di({props:{handleKeyDown:n$(t)}})}function n$(t){let e=CCe(t);return function(n,r){let i=bCe(r),s,o=e[d_(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let a=e[d_(i,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(_Ce&&r.ctrlKey&&r.altKey)&&(s=Lc[r.keyCode])&&s!=i){let a=e[d_(s,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}const bR=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function r$(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const i$=(t,e,n)=>{let r=r$(t,n);if(!r)return!1;let i=SR(r);if(!i){let o=r.blockRange(),a=o&&Bh(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=i.nodeBefore;if(h$(t,i,e,-1))return!0;if(r.parent.content.size==0&&(hh(s,"end")||kt.isSelectable(s)))for(let o=r.depth;;o--){let a=Uw(t.doc,r.before(o),r.after(o),dt.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(hh(s,"end")?Xt.findFrom(l.doc.resolve(l.mapping.map(i.pos,-1)),-1):kt.create(l.doc,i.pos-s.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},TCe=(t,e,n)=>{let r=r$(t,n);if(!r)return!1;let i=SR(r);return i?s$(t,i,e):!1},ACe=(t,e,n)=>{let r=a$(t,n);if(!r)return!1;let i=_R(r);return i?s$(t,i,e):!1};function s$(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Uw(t.doc,s,l,dt.empty);if(!c||c.from!=s||c instanceof Ar&&c.slice.size>=l-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(Ft.create(u.doc,s)),n(u.scrollIntoView())}return!0}function hh(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const o$=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=SR(r)}let o=s&&s.nodeBefore;return!o||!kt.isSelectable(o)?!1:(e&&e(t.tr.setSelection(kt.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function SR(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function a$(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const l$=(t,e,n)=>{let r=a$(t,n);if(!r)return!1;let i=_R(r);if(!i)return!1;let s=i.nodeAfter;if(h$(t,i,e,1))return!0;if(r.parent.content.size==0&&(hh(s,"start")||kt.isSelectable(s))){let o=Uw(t.doc,r.before(),r.after(),dt.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(hh(s,"start")?Xt.findFrom(a.doc.resolve(a.mapping.map(i.pos)),1):kt.create(a.doc,a.mapping.map(i.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},c$=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=_R(r)}let o=s&&s.nodeAfter;return!o||!kt.isSelectable(o)?!1:(e&&e(t.tr.setSelection(kt.create(t.doc,s.pos)).scrollIntoView()),!0)};function _R(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const RCe=(t,e)=>{let n=t.selection,r=n instanceof kt,i;if(r){if(n.node.isTextblock||!qc(t.doc,n.from))return!1;i=n.from}else if(i=Fw(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(kt.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},kCe=(t,e)=>{let n=t.selection,r;if(n instanceof kt){if(n.node.isTextblock||!qc(t.doc,n.to))return!1;r=n.to}else if(r=Fw(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},NCe=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&Bh(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},u$=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function ER(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const PCe=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=ER(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Xt.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},d$=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof _s||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=ER(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Ft.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},f$=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(rl(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Bh(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function DCe(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof kt&&e.selection.node.isBlock)return!r.parentOffset||!rl(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,a,l=!1,c=!1;for(let p=r.depth;;p--)if(r.node(p).isBlock){l=r.end(p)==r.pos+(r.depth-p),c=r.start(p)==r.pos-(r.depth-p),a=ER(r.node(p-1).contentMatchAt(r.indexAfter(p-1))),s.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof Ft||e.selection instanceof _s)&&u.deleteSelection();let d=u.mapping.map(r.pos),h=rl(u.doc,d,s.length,s);if(h||(s[0]=a?{type:a}:null,h=rl(u.doc,d,s.length,s)),!h)return!1;if(u.split(d,s.length,s),!l&&c&&r.node(o).type!=a){let p=u.mapping.map(r.before(o)),x=u.doc.resolve(p);a&&r.node(o-1).canReplaceWith(x.index(),x.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(o)),a)}return n&&n(u.scrollIntoView()),!0}}const ICe=DCe(),LCe=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(kt.create(t.doc,i))),!0)};function OCe(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||qc(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function h$(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,a,l=i.type.spec.isolating||s.type.spec.isolating;if(!l&&OCe(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&a.matchType(o[0]||s.type).validEnd){if(n){let p=e.pos+s.nodeSize,x=Ge.empty;for(let v=o.length-1;v>=0;v--)x=Ge.from(o[v].create(null,x));x=Ge.from(i.copy(x));let w=t.tr.step(new kr(e.pos-1,p,e.pos,p,new dt(x,1,0),o.length,!0)),y=w.doc.resolve(p+2*o.length);y.nodeAfter&&y.nodeAfter.type==i.type&&qc(w.doc,y.pos)&&w.join(y.pos),n(w.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&l?null:Xt.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&Bh(d);if(h!=null&&h>=e.depth)return n&&n(t.tr.lift(d,h).scrollIntoView()),!0;if(c&&hh(s,"start",!0)&&hh(i,"end")){let p=i,x=[];for(;x.push(p),!p.isTextblock;)p=p.lastChild;let w=s,y=1;for(;!w.isTextblock;w=w.firstChild)y++;if(p.canReplace(p.childCount,p.childCount,w.content)){if(n){let v=Ge.empty;for(let E=x.length-1;E>=0;E--)v=Ge.from(x[E].copy(v));let S=t.tr.step(new kr(e.pos-x.length,e.pos+s.nodeSize,e.pos+y,e.pos+s.nodeSize-y,new dt(v,x.length,0),0,!0));n(S.scrollIntoView())}return!0}}return!1}function p$(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Ft.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const FCe=p$(-1),UCe=p$(1);function BCe(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),a=o&&uR(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function MO(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(i)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}r(s.scrollIntoView())}return!0}}function CR(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}CR(bR,i$,o$);CR(bR,l$,c$);CR(u$,d$,f$,ICe);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function zCe(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let a=r?n.tr:null;return jCe(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function jCe(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);s=new u0(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new u0(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let a=uR(s,n,r,e);return a?(t&&HCe(t,e,a,i,n),!0):!1}function HCe(t,e,n,r,i){let s=Ge.empty;for(let u=n.length-1;u>=0;u--)s=Ge.from(n[u].type.create(n[u].attrs,s));t.step(new kr(e.start-(r?2:0),e.end,e.start,e.end,new dt(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&rl(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function VCe(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?$Ce(e,n,t,s):WCe(e,n,s):!0:!1}}function $Ce(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new kr(s-1,o,s,o,new dt(Ge.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new u0(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const a=Bh(r);if(a==null)return!1;i.lift(r,a);let l=i.doc.resolve(i.mapping.map(s,-1)-1);return qc(i.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&i.join(l.pos),e(i.scrollIntoView()),!0}function WCe(t,e,n){let r=t.tr,i=n.parent;for(let p=n.end,x=n.endIndex-1,w=n.startIndex;x>w;x--)p-=i.child(x).nodeSize,r.delete(p-1,p+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?Ge.empty:Ge.from(i))))return!1;let d=s.pos,h=d+o.nodeSize;return r.step(new kr(d-(a?1:0),h+(l?1:0),d+1,h-1,new dt((a?Ge.empty:Ge.from(i.copy(Ge.empty))).append(l?Ge.empty:Ge.from(i.copy(Ge.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function GCe(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=Ge.from(c?t.create():null),d=new dt(Ge.from(t.create(null,Ge.from(a.type.create(null,u)))),c?3:1,0),h=s.start,p=s.end;n(e.tr.step(new kr(h-(c?3:1),p,h,p,d,1,!0)).scrollIntoView())}return!0}}function Vw(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class $w{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a=[],l=!!e,c=e||s.tr,u=()=>(!l&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,p])=>[h,(...w)=>{const y=this.buildProps(c,n),v=p(...w)(y);return a.push(v),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,a={tr:e,editor:i,view:o,state:Vw({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class XCe{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function St(t,e,n){return t.config[e]===void 0&&t.parent?St(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?St(t.parent,e,n):null}):t.config[e]}function Ww(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function m$(t){const e=[],{nodeExtensions:n,markExtensions:r}=Ww(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:i},l=St(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,p])=>{e.push({type:d,name:h,attribute:{...s,...p}})})})})}),i.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=St(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const h={...s,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:o.name,name:u,attribute:h})})}),e}function Dr(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Kr(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const a=s?String(s).split(" "):[],l=r[i]?r[i].split(" "):[],c=a.filter(u=>!l.includes(u));r[i]=[...l,...c].join(" ")}else if(i==="style"){const a=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,h]=u.split(":").map(p=>p.trim());c.set(d,h)}),a.forEach(u=>{const[d,h]=u.split(":").map(p=>p.trim());c.set(d,h)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=s}),r},{})}function pM(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Kr(n,r),{})}function g$(t){return typeof t=="function"}function Qt(t,e=void 0,...n){return g$(t)?e?t.bind(e)(...n):t(...n):t}function qCe(t={}){return Object.keys(t).length===0&&t.constructor===Object}function KCe(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function TO(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):KCe(n.getAttribute(o.name));return a==null?s:{...s,[o.name]:a}},{});return{...r,...i}}}}function AO(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&qCe(n)?!1:n!=null))}function YCe(t,e){var n;const r=m$(t),{nodeExtensions:i,markExtensions:s}=Ww(t),o=(n=i.find(c=>St(c,"topNode")))===null||n===void 0?void 0:n.name,a=Object.fromEntries(i.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((v,S)=>{const E=St(S,"extendNodeSchema",d);return{...v,...E?E(c):{}}},{}),p=AO({...h,content:Qt(St(c,"content",d)),marks:Qt(St(c,"marks",d)),group:Qt(St(c,"group",d)),inline:Qt(St(c,"inline",d)),atom:Qt(St(c,"atom",d)),selectable:Qt(St(c,"selectable",d)),draggable:Qt(St(c,"draggable",d)),code:Qt(St(c,"code",d)),whitespace:Qt(St(c,"whitespace",d)),linebreakReplacement:Qt(St(c,"linebreakReplacement",d)),defining:Qt(St(c,"defining",d)),isolating:Qt(St(c,"isolating",d)),attrs:Object.fromEntries(u.map(v=>{var S;return[v.name,{default:(S=v==null?void 0:v.attribute)===null||S===void 0?void 0:S.default}]}))}),x=Qt(St(c,"parseHTML",d));x&&(p.parseDOM=x.map(v=>TO(v,u)));const w=St(c,"renderHTML",d);w&&(p.toDOM=v=>w({node:v,HTMLAttributes:pM(v,u)}));const y=St(c,"renderText",d);return y&&(p.toText=y),[c.name,p]})),l=Object.fromEntries(s.map(c=>{const u=r.filter(y=>y.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=t.reduce((y,v)=>{const S=St(v,"extendMarkSchema",d);return{...y,...S?S(c):{}}},{}),p=AO({...h,inclusive:Qt(St(c,"inclusive",d)),excludes:Qt(St(c,"excludes",d)),group:Qt(St(c,"group",d)),spanning:Qt(St(c,"spanning",d)),code:Qt(St(c,"code",d)),attrs:Object.fromEntries(u.map(y=>{var v;return[y.name,{default:(v=y==null?void 0:y.attribute)===null||v===void 0?void 0:v.default}]}))}),x=Qt(St(c,"parseHTML",d));x&&(p.parseDOM=x.map(y=>TO(y,u)));const w=St(c,"renderHTML",d);return w&&(p.toDOM=y=>w({mark:y,HTMLAttributes:pM(y,u)})),[c.name,p]}));return new iV({topNode:o,nodes:a,marks:l})}function f_(t,e){return e.nodes[t]||e.marks[t]||null}function RO(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function MR(t,e){const n=xd.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const JCe=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,a)=>{var l,c;const u=((c=(l=i.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:i,pos:s,parent:o,index:a}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-s))}),n};function TR(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class Gw{constructor(e){this.find=e.find,this.handler=e.handler}}const QCe=(t,e)=>{if(TR(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function _y(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=JCe(c)+s;return o.forEach(h=>{if(u)return;const p=QCe(d,h.find);if(!p)return;const x=l.state.tr,w=Vw({state:l.state,transaction:x}),y={from:r-(p[0].length-s.length),to:i},{commands:v,chain:S,can:E}=new $w({editor:n,state:w});h.handler({state:w,range:y,match:p,commands:v,chain:S,can:E})===null||!x.steps.length||(x.setMeta(a,{transform:x,from:r,to:i,text:s}),l.dispatch(x),u=!0)}),u}function ZCe(t){const{editor:e,rules:n}=t,r=new Di({state:{init(){return null},apply(i,s,o){const a=i.getMeta(r);if(a)return a;const l=i.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=MR(Ge.from(u),o.schema);const{from:d}=l,h=d+u.length;_y({editor:e,from:d,to:h,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,a){return _y({editor:e,from:s,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&_y({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?_y({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function eMe(t){return Object.prototype.toString.call(t).slice(8,-1)}function Ey(t){return eMe(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Xw(t,e){const n={...t};return Ey(t)&&Ey(e)&&Object.keys(e).forEach(r=>{Ey(e[r])&&Ey(t[r])?n[r]=Xw(t[r],e[r]):n[r]=e[r]}),n}class wa{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Qt(St(this,"addOptions",{name:this.name}))),this.storage=Qt(St(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new wa(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Xw(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new wa(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Qt(St(n,"addOptions",{name:n.name})),n.storage=Qt(St(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function tMe(t){return typeof t=="number"}class nMe{constructor(e){this.find=e.find,this.handler=e.handler}}const rMe=(t,e,n)=>{if(TR(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function iMe(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new $w({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(p,x)=>{if(!p.isTextblock||p.type.spec.code)return;const w=Math.max(r,x),y=Math.min(i,x+p.content.size),v=p.textBetween(w-x,y-x,void 0,"");rMe(v,s.find,o).forEach(E=>{if(E.index===void 0)return;const C=w+E.index+1,T=C+E[0].length,A={from:n.tr.mapping.map(C),to:n.tr.mapping.map(T)},k=s.handler({state:n,range:A,match:E,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(k)})}),d.every(p=>p!==null)}let Cy=null;const sMe=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function oMe(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:h,rule:p,pasteEvt:x})=>{const w=u.tr,y=Vw({state:u,transaction:w});if(!(!iMe({editor:e,state:y,from:Math.max(d-1,0),to:h.b-1,rule:p,pasteEvent:x,dropEvent:a})||!w.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,w}};return n.map(u=>new Di({view(d){const h=x=>{var w;r=!((w=d.dom.parentElement)===null||w===void 0)&&w.contains(x.target)?d.dom.parentElement:null,r&&(Cy=e)},p=()=>{Cy&&(Cy=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(s=r===d.dom.parentElement,a=h,!s){const p=Cy;p!=null&&p.isEditable&&setTimeout(()=>{const x=p.state.selection;x&&p.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(d,h)=>{var p;const x=(p=h.clipboardData)===null||p===void 0?void 0:p.getData("text/html");return o=h,i=!!(x!=null&&x.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,p)=>{const x=d[0],w=x.getMeta("uiEvent")==="paste"&&!i,y=x.getMeta("uiEvent")==="drop"&&!s,v=x.getMeta("applyPasteRules"),S=!!v;if(!w&&!y&&!S)return;if(S){let{text:T}=v;typeof T=="string"?T=T:T=MR(Ge.from(T),p.schema);const{from:A}=v,k=A+T.length,R=sMe(T);return l({rule:u,state:p,from:A,to:{b:k},pasteEvt:R})}const E=h.doc.content.findDiffStart(p.doc.content),C=h.doc.content.findDiffEnd(p.doc.content);if(!(!tMe(E)||!C||E===C.b))return l({rule:u,state:p,from:E,to:C,pasteEvt:o})}}))}function aMe(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Sf{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Sf.resolve(e),this.schema=YCe(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Sf.sort(Sf.flatten(e)),r=aMe(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=St(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=St(r,"priority")||100,o=St(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:f_(n.name,this.schema)},i=St(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Sf.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:f_(o.name,this.schema)},l=[],c=St(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&St(o,"exitable",a)&&(u.ArrowRight=()=>wa.handleExit({editor:e,mark:o})),c){const w=Object.fromEntries(Object.entries(c()).map(([y,v])=>[y,()=>v({editor:e})]));u={...u,...w}}const d=MCe(u);l.push(d);const h=St(o,"addInputRules",a);RO(o,e.options.enableInputRules)&&h&&r.push(...h());const p=St(o,"addPasteRules",a);RO(o,e.options.enablePasteRules)&&p&&i.push(...p());const x=St(o,"addProseMirrorPlugins",a);if(x){const w=x();l.push(...w)}return l}).flat();return[ZCe({editor:e,rules:r}),...oMe({editor:e,rules:i}),...s]}get attributes(){return m$(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=Ww(this.extensions);return Object.fromEntries(n.filter(r=>!!St(r,"addNodeView")).map(r=>{const i=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:Dr(r.name,this.schema)},o=St(r,"addNodeView",s);if(!o)return[];const a=(l,c,u,d,h)=>{const p=pM(l,i);return o()({node:l,view:c,getPos:u,decorations:d,innerDecorations:h,editor:e,extension:r,HTMLAttributes:p})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:f_(e.name,this.schema)};e.type==="mark"&&(!((n=Qt(St(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=St(e,"onBeforeCreate",r),s=St(e,"onCreate",r),o=St(e,"onUpdate",r),a=St(e,"onSelectionUpdate",r),l=St(e,"onTransaction",r),c=St(e,"onFocus",r),u=St(e,"onBlur",r),d=St(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class Ir{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Qt(St(this,"addOptions",{name:this.name}))),this.storage=Qt(St(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ir(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Xw(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ir({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Qt(St(n,"addOptions",{name:n.name})),n.storage=Qt(St(n,"addStorage",{name:n.name,options:n.options})),n}}function v$(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,i,(l,c,u,d)=>{var h;l.isBlock&&c>r&&(a+=s);const p=o==null?void 0:o[l.type.name];if(p)return u&&(a+=p({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,i-c))}),a}function y$(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const lMe=Ir.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Di({key:new Bo("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),a=Math.max(...s.map(u=>u.$to.pos)),l=y$(n);return v$(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),cMe=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),uMe=(t=!1)=>({commands:e})=>e.setContent("",t),dMe=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),p=d.blockRange(h);if(!p)return;const x=Bh(p);if(a.type.isTextblock){const{defaultType:w}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(p.start,w)}(x||x===0)&&e.lift(p,x)})}),!0},fMe=t=>e=>t(e),hMe=()=>({state:t,dispatch:e})=>d$(t,e),pMe=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Ft(r.doc.resolve(o-1))),!0},mMe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const a=i.before(s),l=i.after(s);t.delete(a,l).scrollIntoView()}return!0}return!1},gMe=t=>({tr:e,state:n,dispatch:r})=>{const i=Dr(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const l=s.before(o),c=s.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},vMe=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},yMe=()=>({state:t,dispatch:e})=>bR(t,e),xMe=()=>({commands:t})=>t.keyboardShortcut("Enter"),wMe=()=>({state:t,dispatch:e})=>PCe(t,e);function y0(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:TR(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function x$(t,e,n={}){return t.find(r=>r.type===e&&y0(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function kO(t,e,n={}){return!!x$(t,e,n)}function AR(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!x$([...i.node.marks],e,n)))return;let o=i.index,a=t.start()+i.offset,l=o+1,c=a+i.node.nodeSize;for(;o>0&&kO([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&kO([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Yc(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const bMe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=Yc(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(i){const d=AR(l,s,e);if(d&&d.from<=c&&d.to>=u){const h=Ft.create(o,d.from,d.to);n.setSelection(h)}}return!0},SMe=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function w$(t){return t instanceof Ft}function Du(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function b$(t,e=null){if(!e)return null;const n=Xt.atStart(t),r=Xt.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Ft.create(t,Du(0,i,s),Du(t.content.size,i,s)):Ft.create(t,Du(e,i,s),Du(e,i,s))}function _Me(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function RR(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const EMe=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(RR()||_Me())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!w$(n.state.selection))return o(),!0;const a=b$(i.doc,t)||n.state.selection,l=n.state.selection.eq(a);return s&&(l||i.setSelection(a),l&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},CMe=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),MMe=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),S$=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&S$(r)}return t};function My(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return S$(n)}function Wm(t,e,n){if(t instanceof Sc||t instanceof Ge)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Ge.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Wm("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,a="";const l=new iV({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?_c.fromSchema(l).parseSlice(My(t),n.parseOptions):_c.fromSchema(l).parse(My(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const s=_c.fromSchema(e);return n.slice?s.parseSlice(My(t),n.parseOptions).content:s.parse(My(t),n.parseOptions)}return Wm("",e,n)}function TMe(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof Ar||i instanceof kr))return;const s=t.mapping.maps[r];let o=0;s.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(Xt.near(t.doc.resolve(o),n))}const AMe=t=>!("type"in t),RMe=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=y=>{s.emit("contentError",{editor:s,error:y,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Wm(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(y){l(y)}try{a=Wm(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(y){return l(y),!1}let{from:u,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,p=!0;if((AMe(a)?a:[a]).forEach(y=>{y.check(),h=h?y.isText&&y.marks.length===0:!1,p=p?y.isBlock:!1}),u===d&&p){const{parent:y}=r.doc.resolve(u);y.isTextblock&&!y.type.spec.code&&!y.childCount&&(u-=1,d+=1)}let w;if(h){if(Array.isArray(e))w=e.map(y=>y.text||"").join("");else if(e instanceof Ge){let y="";e.forEach(v=>{v.text&&(y+=v.text)}),w=y}else typeof e=="object"&&e&&e.text?w=e.text:w=e;r.insertText(w,u,d)}else w=a,r.replaceWith(u,d,w);n.updateSelection&&TMe(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:w}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:w})}return!0},kMe=()=>({state:t,dispatch:e})=>RCe(t,e),NMe=()=>({state:t,dispatch:e})=>kCe(t,e),PMe=()=>({state:t,dispatch:e})=>i$(t,e),DMe=()=>({state:t,dispatch:e})=>l$(t,e),IMe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Fw(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},LMe=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Fw(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},OMe=()=>({state:t,dispatch:e})=>TCe(t,e),FMe=()=>({state:t,dispatch:e})=>ACe(t,e);function _$(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function UMe(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))RR()||_$()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const BMe=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=UMe(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function Gm(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?Dr(e,t.schema):null,a=[];t.doc.nodesBetween(r,i,(d,h)=>{if(d.isText)return;const p=Math.max(r,h),x=Math.min(i,h+d.nodeSize);a.push({node:d,from:p,to:x})});const l=i-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>y0(d.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=l}const zMe=(t,e={})=>({state:n,dispatch:r})=>{const i=Dr(t,n.schema);return Gm(n,i,e)?NCe(n,r):!1},jMe=()=>({state:t,dispatch:e})=>f$(t,e),HMe=t=>({state:e,dispatch:n})=>{const r=Dr(t,e.schema);return VCe(r)(e,n)},VMe=()=>({state:t,dispatch:e})=>u$(t,e);function qw(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function NO(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const $Me=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=qw(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=Dr(t,r.schema)),a==="mark"&&(o=Yc(t,r.schema)),i&&n.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,NO(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&n.addMark(u,u+c.nodeSize,o.create(NO(d.attrs,e)))})})}),!0):!1},WMe=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),GMe=()=>({tr:t,dispatch:e})=>{if(e){const n=new _s(t.doc);t.setSelection(n)}return!0},XMe=()=>({state:t,dispatch:e})=>o$(t,e),qMe=()=>({state:t,dispatch:e})=>c$(t,e),KMe=()=>({state:t,dispatch:e})=>LCe(t,e),YMe=()=>({state:t,dispatch:e})=>UCe(t,e),JMe=()=>({state:t,dispatch:e})=>FCe(t,e);function mM(t,e,n={},r={}){return Wm(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const QMe=(t,e=!1,n={},r={})=>({editor:i,tr:s,dispatch:o,commands:a})=>{var l,c;const{doc:u}=s;if(n.preserveWhitespace!=="full"){const d=mM(t,i.schema,n,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function E$(t,e){const n=Yc(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function ZMe(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function eTe(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function kR(t){return e=>eTe(e.$from,t)}function tTe(t,e){const n={from:0,to:t.content.size};return v$(t,n,e)}function nTe(t,e){const n=Dr(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,a=>{s.push(a)});const o=s.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function rTe(t,e){const n=qw(typeof e=="string"?e:e.name,t.schema);return n==="node"?nTe(t,e):n==="mark"?E$(t,e):{}}function C$(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=AR(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function lx(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function gM(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?Yc(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>y0(d.attrs,n,{strict:!1}));let o=0;const a=[];if(i.forEach(({$from:d,$to:h})=>{const p=d.pos,x=h.pos;t.doc.nodesBetween(p,x,(w,y)=>{if(!w.isText&&!w.marks.length)return;const v=Math.max(p,y),S=Math.min(x,y+w.nodeSize),E=S-v;o+=E,a.push(...w.marks.map(C=>({mark:C,from:v,to:S})))})}),o===0)return!1;const l=a.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>y0(d.mark.attrs,n,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=a.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+c:l)>=o}function iTe(t,e,n={}){if(!e)return Gm(t,null,n)||gM(t,null,n);const r=qw(e,t.schema);return r==="node"?Gm(t,e,n):r==="mark"?gM(t,e,n):!1}function PO(t,e){const{nodeExtensions:n}=Ww(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Qt(St(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Kw(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(Kw(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function sTe(t){return t instanceof kt}function oTe(t,e,n){var r;const{selection:i}=e;let s=null;if(w$(i)&&(s=i.$cursor),s){const a=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(a)||!a.some(l=>l.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const p=!h||h.type.allowsMarkType(n),x=!!n.isInSet(u.marks)||!u.marks.some(w=>w.type.excludes(n));c=p&&x}return!c}),c})}const aTe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:a}=s,l=Yc(t,r.schema);if(i)if(o){const c=E$(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,p)=>{const x=Math.max(p,u),w=Math.min(p+h.nodeSize,d);h.marks.find(v=>v.type===l)?h.marks.forEach(v=>{l===v.type&&n.addMark(x,w,l.create({...v.attrs,...e}))}):n.addMark(x,w,l.create(e))})});return oTe(r,n,l)},lTe=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),cTe=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=Dr(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:a})=>MO(s,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>MO(s,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},uTe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Du(t,0,r.content.size),s=kt.create(r,i);e.setSelection(s)}return!0},dTe=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Ft.atStart(r).from,a=Ft.atEnd(r).to,l=Du(i,o,a),c=Du(s,o,a),u=Ft.create(r,l,c);e.setSelection(u)}return!0},fTe=t=>({state:e,dispatch:n})=>{const r=Dr(t,e.schema);return GCe(r)(e,n)};function DO(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const hTe=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:a,$to:l}=s,c=i.extensionManager.attributes,u=lx(c,a.node().type.name,a.node().attrs);if(s instanceof kt&&s.node.isBlock)return!a.parentOffset||!rl(o,a.pos)?!1:(r&&(t&&DO(n,i.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:ZMe(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=d&&h?[{type:h,attrs:u}]:void 0,x=rl(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!x&&rl(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(x=!0,p=h?[{type:h,attrs:u}]:void 0),r){if(x&&(s instanceof Ft&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const w=e.mapping.map(a.before()),y=e.doc.resolve(w);a.node(-1).canReplaceWith(y.index(),y.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&DO(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return x},pTe=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const a=Dr(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=s.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(i){let v=Ge.empty;const S=l.index(-1)?1:l.index(-2)?2:3;for(let R=l.depth-S;R>=l.depth-3;R-=1)v=Ge.from(l.node(R).copy(v));const E=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,C={...lx(h,l.node().type.name,l.node().attrs),...e},T=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(C))||void 0;v=v.append(Ge.from(a.createAndFill(null,T)||void 0));const A=l.before(l.depth-(S-1));n.replace(A,l.after(-E),new dt(v,4-S,0));let k=-1;n.doc.nodesBetween(A,n.doc.content.size,(R,P)=>{if(k>-1)return!1;R.isTextblock&&R.content.size===0&&(k=P+1)}),k>-1&&n.setSelection(Ft.near(n.doc.resolve(k))),n.scrollIntoView()}return!0}const p=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,x={...lx(h,d.type.name,d.attrs),...e},w={...lx(h,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const y=p?[{type:a,attrs:x},{type:p,attrs:w}]:[{type:a,attrs:x}];if(!rl(n.doc,l.pos,2))return!1;if(i){const{selection:v,storedMarks:S}=r,{splittableMarks:E}=s.extensionManager,C=S||v.$to.parentOffset&&v.$from.marks();if(n.split(l.pos,2,y).scrollIntoView(),!C||!i)return!0;const T=C.filter(A=>E.includes(A.type.name));n.ensureMarks(T)}return!0},h_=(t,e)=>{const n=kR(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&qc(t.doc,n.pos)&&t.join(n.pos),!0},p_=(t,e)=>{const n=kR(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&qc(t.doc,r)&&t.join(r),!0},mTe=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=i.extensionManager,p=Dr(t,o.schema),x=Dr(e,o.schema),{selection:w,storedMarks:y}=o,{$from:v,$to:S}=w,E=v.blockRange(S),C=y||w.$to.parentOffset&&w.$from.marks();if(!E)return!1;const T=kR(A=>PO(A.type.name,d))(w);if(E.depth>=1&&T&&E.depth-T.depth<=1){if(T.node.type===p)return c.liftListItem(x);if(PO(T.node.type.name,d)&&p.validContent(T.node.content)&&a)return l().command(()=>(s.setNodeMarkup(T.pos,p),!0)).command(()=>h_(s,p)).command(()=>p_(s,p)).run()}return!n||!C||!a?l().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>h_(s,p)).command(()=>p_(s,p)).run():l().command(()=>{const A=u().wrapInList(p,r),k=C.filter(R=>h.includes(R.type.name));return s.ensureMarks(k),A?!0:c.clearNodes()}).wrapInList(p,r).command(()=>h_(s,p)).command(()=>p_(s,p)).run()},gTe=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Yc(t,r.schema);return gM(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},vTe=(t,e,n={})=>({state:r,commands:i})=>{const s=Dr(t,r.schema),o=Dr(e,r.schema),a=Gm(r,s,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?i.setNode(o,l):i.setNode(s,{...l,...n})},yTe=(t,e={})=>({state:n,commands:r})=>{const i=Dr(t,n.schema);return Gm(n,i,e)?r.lift(i):r.wrapIn(i,e)},xTe=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,a=s.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(s.text){const l=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,l))}else o.delete(s.from,s.to)}return!0}}return!1},wTe=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},bTe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=Yc(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!i)return!0;if(u&&o){let{from:h,to:p}=a;const x=(s=c.marks().find(y=>y.type===l))===null||s===void 0?void 0:s.attrs,w=AR(c,l,x);w&&(h=w.from,p=w.to),n.removeMark(h,p,l)}else d.forEach(h=>{n.removeMark(h.$from.pos,h.$to.pos,l)});return n.removeStoredMark(l),!0},STe=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const a=qw(typeof t=="string"?t:t.name,r.schema);return a?(a==="node"&&(s=Dr(t,r.schema)),a==="mark"&&(o=Yc(t,r.schema)),i&&n.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,h,p,x;n.selection.empty?r.doc.nodesBetween(c,u,(w,y)=>{s&&s===w.type&&(p=Math.max(y,c),x=Math.min(y+w.nodeSize,u),d=y,h=w)}):r.doc.nodesBetween(c,u,(w,y)=>{y<c&&s&&s===w.type&&(p=Math.max(y,c),x=Math.min(y+w.nodeSize,u),d=y,h=w),y>=c&&y<=u&&(s&&s===w.type&&n.setNodeMarkup(y,void 0,{...w.attrs,...e}),o&&w.marks.length&&w.marks.forEach(v=>{if(o===v.type){const S=Math.max(y,c),E=Math.min(y+w.nodeSize,u);n.addMark(S,E,o.create({...v.attrs,...e}))}}))}),h&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(w=>{o===w.type&&n.addMark(p,x,o.create({...w.attrs,...e}))}))}),!0):!1},_Te=(t,e={})=>({state:n,dispatch:r})=>{const i=Dr(t,n.schema);return BCe(i,e)(n,r)},ETe=(t,e={})=>({state:n,dispatch:r})=>{const i=Dr(t,n.schema);return zCe(i,e)(n,r)};var CTe=Object.freeze({__proto__:null,blur:cMe,clearContent:uMe,clearNodes:dMe,command:fMe,createParagraphNear:hMe,cut:pMe,deleteCurrentNode:mMe,deleteNode:gMe,deleteRange:vMe,deleteSelection:yMe,enter:xMe,exitCode:wMe,extendMarkRange:bMe,first:SMe,focus:EMe,forEach:CMe,insertContent:MMe,insertContentAt:RMe,joinBackward:PMe,joinDown:NMe,joinForward:DMe,joinItemBackward:IMe,joinItemForward:LMe,joinTextblockBackward:OMe,joinTextblockForward:FMe,joinUp:kMe,keyboardShortcut:BMe,lift:zMe,liftEmptyBlock:jMe,liftListItem:HMe,newlineInCode:VMe,resetAttributes:$Me,scrollIntoView:WMe,selectAll:GMe,selectNodeBackward:XMe,selectNodeForward:qMe,selectParentNode:KMe,selectTextblockEnd:YMe,selectTextblockStart:JMe,setContent:QMe,setMark:aTe,setMeta:lTe,setNode:cTe,setNodeSelection:uTe,setTextSelection:dTe,sinkListItem:fTe,splitBlock:hTe,splitListItem:pTe,toggleList:mTe,toggleMark:gTe,toggleNode:vTe,toggleWrap:yTe,undoInputRule:xTe,unsetAllMarks:wTe,unsetMark:bTe,updateAttributes:STe,wrapIn:_Te,wrapInList:ETe});const MTe=Ir.create({name:"commands",addCommands(){return{...CTe}}}),TTe=Ir.create({name:"drop",addProseMirrorPlugins(){return[new Di({key:new Bo("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),ATe=Ir.create({name:"editable",addProseMirrorPlugins(){return[new Di({key:new Bo("editable"),props:{editable:()=>this.editor.options.editable}})]}}),RTe=new Bo("focusEvents"),kTe=Ir.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Di({key:RTe,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),NTe=Ir.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:h,parent:p}=d,x=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,w=x.parent.type.spec.isolating,y=d.pos-d.parentOffset,v=w&&x.parent.childCount===1?y===d.pos:Xt.atStart(c).from===h;return!u||!p.type.isTextblock||p.textContent.length||!v||v&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return RR()||_$()?s:i},addProseMirrorPlugins(){return[new Di({key:new Bo("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(w=>w.getMeta("composition")))return;const r=t.some(w=>w.docChanged)&&!e.doc.eq(n.doc),i=t.some(w=>w.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:a}=e.selection,l=Xt.atStart(e.doc).from,c=Xt.atEnd(e.doc).to;if(s||!(o===l&&a===c)||!Kw(n.doc))return;const h=n.tr,p=Vw({state:n,transaction:h}),{commands:x}=new $w({editor:this.editor,state:p});if(x.clearNodes(),!!h.steps.length)return h}})]}}),PTe=Ir.create({name:"paste",addProseMirrorPlugins(){return[new Di({key:new Bo("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),DTe=Ir.create({name:"tabindex",addProseMirrorPlugins(){return[new Di({key:new Bo("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Eu{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Eu(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Eu(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Eu(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(o);if(!i&&a.depth<=this.depth)return;const l=new Eu(a,this.editor,i,i?n:null);i&&(l.actualDepth=this.depth+1),e.push(new Eu(a,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(s[l]!==n[l])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(l=>n[l]===o.node.attrs[l])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const ITe=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function LTe(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class OTe extends XCe{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=LTe(ITe,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=g$(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;r=r.filter(a=>!a.key.startsWith(o))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[ATe,lMe.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),MTe,kTe,NTe,DTe,TTe,PTe].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Sf(i,this)}createCommandManager(){this.commandManager=new $w({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=mM(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),n=mM(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=b$(n,this.options.autofocus);this.view=new t$(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:bf.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return rTe(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return iTe(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return MR(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return tTe(this.state.doc,{blockSeparator:n,textSerializers:{...y$(this.schema),...r}})}get isEmpty(){return Kw(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Eu(n,this)}get $doc(){return this.$pos(0)}}function ph(t){return new Gw({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Qt(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(C$(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(w=>w===t.type&&w!==p.mark.type)).filter(p=>p.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+l,c);const h=n.from+l+o.length;s.addMark(n.from+l,h,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function FTe(t){return new Gw({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Qt(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let a=n.to;const l=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(a))}s.scrollIntoView()}})}function vM(t){return new Gw({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=Qt(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function Xm(t){return new Gw({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=Qt(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&uR(l,t.type,s);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:p}=t.editor.extensionManager,x=h||d.$to.parentOffset&&d.$from.marks();if(x){const w=x.filter(y=>p.includes(y.type.name));o.ensureMarks(w)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&qc(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}let zo=class yM{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Qt(St(this,"addOptions",{name:this.name}))),this.storage=Qt(St(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new yM(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>Xw(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new yM(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Qt(St(n,"addOptions",{name:n.name})),n.storage=Qt(St(n,"addStorage",{name:n.name,options:n.options})),n}};function mh(t){return new nMe({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=Qt(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),h=d+a.length;if(C$(n.from,n.to,e.doc).filter(x=>x.mark.type.excluded.find(y=>y===t.type&&y!==x.mark.type)).filter(x=>x.to>d).length)return null;h<n.to&&o.delete(h,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function UTe(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof kt){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}function BTe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var M$={exports:{}},m_={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IO;function zTe(){if(IO)return m_;IO=1;var t=Me;function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function a(d,h){var p=h(),x=r({inst:{value:p,getSnapshot:h}}),w=x[0].inst,y=x[1];return s(function(){w.value=p,w.getSnapshot=h,l(w)&&y({inst:w})},[d,p,h]),i(function(){return l(w)&&y({inst:w}),d(function(){l(w)&&y({inst:w})})},[d]),o(p),p}function l(d){var h=d.getSnapshot;d=d.value;try{var p=h();return!n(d,p)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return m_.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,m_}M$.exports=zTe();var NR=M$.exports;const jTe=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},HTe=({contentComponent:t})=>{const e=NR.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return Me.createElement(Me.Fragment,null,Object.values(e))};function VTe(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:wT.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class $Te extends Me.Component{constructor(e){var n;super(e),this.editorContentRef=Me.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=VTe(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return Me.createElement(Me.Fragment,null,Me.createElement("div",{ref:jTe(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&Me.createElement(HTe,{contentComponent:e.contentComponent}))}}const WTe=b.forwardRef((t,e)=>{const n=Me.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Me.createElement($Te,{key:n,innerRef:e,...t})}),GTe=Me.memo(WTe);var XTe=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},qTe=BTe(XTe),T$={exports:{}},g_={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LO;function KTe(){if(LO)return g_;LO=1;var t=Me,e=NR;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,a=t.useMemo,l=t.useDebugValue;return g_.useSyncExternalStoreWithSelector=function(c,u,d,h,p){var x=s(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=a(function(){function v(A){if(!S){if(S=!0,E=A,A=h(A),p!==void 0&&w.hasValue){var k=w.value;if(p(k,A))return C=k}return C=A}if(k=C,r(E,A))return k;var R=h(A);return p!==void 0&&p(k,R)?k:(E=A,C=R)}var S=!1,E,C,T=d===void 0?null:d;return[function(){return v(u())},T===null?void 0:function(){return v(T())}]},[u,d,h,p]);var y=i(c,x[0],x[1]);return o(function(){w.hasValue=!0,w.value=y},[y]),l(y),y},g_}T$.exports=KTe();var YTe=T$.exports;const JTe=typeof window<"u"?b.useLayoutEffect:b.useEffect;class QTe{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function ZTe(t){var e;const[n]=b.useState(()=>new QTe(t.editor)),r=YTe.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:qTe);return JTe(()=>n.watch(t.editor),[t.editor,n]),b.useDebugValue(r),r}const eAe=!1,xM=typeof window>"u",tAe=xM||!!(typeof window<"u"&&window.next);class PR{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?xM||tAe?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new OTe(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)===null||o===void 0?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?PR.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function nAe(t={},e=[]){const n=b.useRef(t);n.current=t;const[r]=b.useState(()=>new PR(n)),i=NR.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return b.useDebugValue(i),b.useEffect(r.onRender(e)),ZTe({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&s===0?0:s+1}),i}const rAe=b.createContext({editor:null});rAe.Consumer;const iAe=b.createContext({onDragStart:void 0}),sAe=()=>b.useContext(iAe);Me.forwardRef((t,e)=>{const{onDragStart:n}=sAe(),r=t.as||"div";return Me.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const oAe=/^\s*>\s$/,aAe=zo.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Kr(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Xm({find:oAe,type:this.type})]}}),lAe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,cAe=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,uAe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,dAe=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,fAe=wa.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Kr(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ph({find:lAe,type:this.type}),ph({find:uAe,type:this.type})]},addPasteRules(){return[mh({find:cAe,type:this.type}),mh({find:dAe,type:this.type})]}}),hAe="listItem",OO="textStyle",FO=/^\s*([-+*])\s$/,pAe=zo.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Kr(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(hAe,this.editor.getAttributes(OO)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Xm({find:FO,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Xm({find:FO,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(OO),editor:this.editor})),[t]}}),mAe=/(^|[^`])`([^`]+)`(?!`)/,gAe=/(^|[^`])`([^`]+)`(?!`)/g,vAe=wa.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Kr(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ph({find:mAe,type:this.type})]},addPasteRules(){return[mh({find:gAe,type:this.type})]}}),yAe=/^```([a-z]+)?[\s\n]$/,xAe=/^~~~([a-z]+)?[\s\n]$/,wAe=zo.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Kr(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const a=i.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(Xt.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[vM({find:yAe,type:this.type,getAttributes:t=>({language:t[1]})}),vM({find:xAe,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Di({key:new Bo("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Ft.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),bAe=zo.create({name:"doc",topNode:!0,content:"block+"});function SAe(t={}){return new Di({view(e){return new _Ae(e,t)}})}class _Ae{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,a=s.height/i.offsetHeight;if(n){let d=e.nodeBefore,h=e.nodeAfter;if(d||h){let p=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(p){let x=p.getBoundingClientRect(),w=d?x.bottom:x.top;d&&h&&(w=(w+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let y=this.width/2*a;r={left:x.left,right:x.right,top:w-y,bottom:w+y}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*o;r={left:d.left-h,right:d.left+h,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=l.getBoundingClientRect(),h=d.width/l.offsetWidth,p=d.height/l.offsetHeight;c=d.left-l.scrollLeft*h,u=d.top-l.scrollTop*p}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=mV(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const EAe=Ir.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[SAe(this.options)]}});class tr extends Xt{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return tr.valid(r)?new tr(r):Xt.near(r)}content(){return dt.empty}eq(e){return e instanceof tr&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new tr(e.resolve(n.pos))}getBookmark(){return new DR(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!CAe(e)||!MAe(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&tr.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){s=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let l=e.doc.resolve(i);if(tr.valid(l))return l}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!kt.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let a=e.doc.resolve(i);if(tr.valid(a))return a}return null}}}tr.prototype.visible=!1;tr.findFrom=tr.findGapCursorFrom;Xt.jsonID("gapcursor",tr);class DR{constructor(e){this.pos=e}map(e){return new DR(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return tr.valid(n)?new tr(n):Xt.near(n)}}function CAe(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function MAe(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function TAe(){return new Di({props:{decorations:NAe,createSelectionBetween(t,e,n){return e.pos==n.pos&&tr.valid(n)?new tr(n):null},handleClick:RAe,handleKeyDown:AAe,handleDOMEvents:{beforeinput:kAe}}})}const AAe=n$({ArrowLeft:Ty("horiz",-1),ArrowRight:Ty("horiz",1),ArrowUp:Ty("vert",-1),ArrowDown:Ty("vert",1)});function Ty(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Ft){if(!s.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=tr.findGapCursorFrom(a,e,l);return c?(i&&i(r.tr.setSelection(new tr(c))),!0):!1}}function RAe(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!tr.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&kt.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new tr(r))),!0)}function kAe(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof tr))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=Ge.empty;for(let o=r.length-1;o>=0;o--)i=Ge.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new dt(i,0,0));return s.setSelection(Ft.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function NAe(t){if(!(t.selection instanceof tr))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",dr.create(t.doc,[xs.widget(t.selection.head,e,{key:"gapcursor"})])}const PAe=Ir.create({name:"gapCursor",addProseMirrorPlugins(){return[TAe()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Qt(St(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),DAe=zo.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Kr(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(h=>a.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),IAe=zo.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Kr(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>vM({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var x0=200,Nr=function(){};Nr.prototype.append=function(e){return e.length?(e=Nr.from(e),!this.length&&e||e.length<x0&&this.leafAppend(e)||this.length<x0&&e.leafPrepend(this)||this.appendInner(e)):this};Nr.prototype.prepend=function(e){return e.length?Nr.from(e).append(this):this};Nr.prototype.appendInner=function(e){return new LAe(this,e)};Nr.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Nr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Nr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Nr.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Nr.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};Nr.from=function(e){return e instanceof Nr?e:e&&e.length?new A$(e):Nr.empty};var A$=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,a){for(var l=s;l<o;l++)if(i(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,a){for(var l=s-1;l>=o;l--)if(i(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=x0)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=x0)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Nr);Nr.empty=new A$([]);var LAe=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var a=this.left.length;if(i<a&&this.left.forEachInner(r,i,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(r,Math.max(i-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var a=this.left.length;if(i>a&&this.right.forEachInvertedInner(r,i-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(r,Math.min(i,a),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Nr);const OAe=500;class Co{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){i||(i=this.remapping(r,h+1),s=i.maps.length),s--,u.push(d);return}if(i){u.push(new Ko(d.map));let p=d.step.map(i.slice(s)),x;p&&o.maybeStep(p).doc&&(x=o.mapping.maps[o.mapping.maps.length-1],c.push(new Ko(x,void 0,void 0,c.length+u.length))),s--,x&&i.appendMap(x,s)}else o.maybeStep(d.step);if(d.selection)return a=i?d.selection.map(i.slice(s)):d.selection,l=new Co(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,i){let s=[],o=this.eventCount,a=this.items,l=!i&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new Ko(e.mapping.maps[u],d,n),p;(p=l&&l.merge(h))&&(h=p,u?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(o++,n=void 0),i||(l=h)}let c=o-r.depth;return c>UAe&&(a=FAe(a,c),o-=c),new Co(a.append(s),o)}remapping(e,n){let r=new zm;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Co(this.items.append(e.map(n=>new Ko(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},i);let l=n;this.items.forEach(h=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let x=s.maps[p];if(h.step){let w=e.steps[p].invert(e.docs[p]),y=h.selection&&h.selection.map(s.slice(l+1,p));y&&a++,r.push(new Ko(x,w,y))}else r.push(new Ko(x))},i);let c=[];for(let h=n;h<o;h++)c.push(new Ko(s.maps[h]));let u=this.items.slice(0,i).append(c).append(r),d=new Co(u,a);return d.emptyItemCount()>OAe&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)i.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let d=new Ko(c.invert(),l,u),h,p=i.length-1;(h=i.length&&i[p].merge(d))?i[p]=h:i.push(d)}}else o.map&&r--},this.items.length,0),new Co(Nr.from(i.reverse()),s)}}Co.empty=new Co(Nr.empty,0);function FAe(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Ko{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Ko(n.getMap().invert(),n,this.selection)}}}class ql{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const UAe=20;function BAe(t,e,n,r){let i=n.getMeta(Gu),s;if(i)return i.historyState;n.getMeta(HAe)&&(t=new ql(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(Gu))return o.getMeta(Gu).redo?new ql(t.done.addTransform(n,void 0,r,cx(e)),t.undone,UO(n.mapping.maps),t.prevTime,t.prevComposition):new ql(t.done,t.undone.addTransform(n,void 0,r,cx(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!zAe(n,t.prevRanges)),c=o?v_(t.prevRanges,n.mapping):UO(n.mapping.maps);return new ql(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,cx(e)),Co.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new ql(t.done.rebased(n,s),t.undone.rebased(n,s),v_(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ql(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),v_(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function zAe(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function UO(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function v_(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function jAe(t,e,n){let r=cx(e),i=Gu.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),a=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),l=new ql(n?a:s.remaining,n?s.remaining:a,null,0,-1);return s.transform.setSelection(o).setMeta(Gu,{redo:n,historyState:l})}let y_=!1,BO=null;function cx(t){let e=t.plugins;if(BO!=e){y_=!1,BO=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){y_=!0;break}}return y_}const Gu=new Bo("history"),HAe=new Bo("closeHistory");function VAe(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Di({key:Gu,state:{init(){return new ql(Co.empty,Co.empty,null,0,-1)},apply(e,n,r){return BAe(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?k$:r=="historyRedo"?N$:null;return i?(n.preventDefault(),i(e.state,e.dispatch)):!1}}}})}function R$(t,e){return(n,r)=>{let i=Gu.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=jAe(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const k$=R$(!1,!0),N$=R$(!0,!0),$Ae=Ir.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>k$(t,e),redo:()=>({state:t,dispatch:e})=>N$(t,e)}},addProseMirrorPlugins(){return[VAe(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),WAe=zo.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Kr(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!UTe(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$from:r,$to:i}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):sTe(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:a})=>{var l;if(a){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(Ft.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(kt.create(o.doc,c.pos)):o.setSelection(Ft.create(o.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(o.insert(u,d),o.setSelection(Ft.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[FTe({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),GAe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,XAe=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,qAe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,KAe=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,YAe=wa.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Kr(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ph({find:GAe,type:this.type}),ph({find:qAe,type:this.type})]},addPasteRules(){return[mh({find:XAe,type:this.type}),mh({find:KAe,type:this.type})]}}),JAe=zo.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Kr(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),QAe="listItem",zO="textStyle",jO=/^(\d+)\.\s$/,ZAe=zo.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Kr(this.options.HTMLAttributes,n),0]:["ol",Kr(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(QAe,this.editor.getAttributes(zO)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Xm({find:jO,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Xm({find:jO,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(zO)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),eRe=zo.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Kr(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),tRe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,nRe=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,rRe=wa.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Kr(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ph({find:tRe,type:this.type})]},addPasteRules(){return[mh({find:nRe,type:this.type})]}}),iRe=zo.create({name:"text",group:"inline"}),sRe=Ir.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(fAe.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(aAe.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(pAe.configure(this.options.bulletList)),this.options.code!==!1&&t.push(vAe.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(wAe.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(bAe.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(EAe.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(PAe.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(DAe.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(IAe.configure(this.options.heading)),this.options.history!==!1&&t.push($Ae.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(WAe.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(YAe.configure(this.options.italic)),this.options.listItem!==!1&&t.push(JAe.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(ZAe.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(eRe.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(rRe.configure(this.options.strike)),this.options.text!==!1&&t.push(iRe.configure(this.options.text)),t}}),oRe=wa.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Kr(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),aRe=Ir.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),lRe=Ir.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Di({key:new Bo("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((o,a)=>{const l=r>=a&&r<=a+o.nodeSize,c=!o.isLeaf&&Kw(o);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];s&&u.push(this.options.emptyEditorClass);const d=xs.node(a,a+o.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:a,hasAnchor:l}):this.options.placeholder});i.push(d)}return this.options.includeChildren}),dr.create(t,i)}}})]}}),cRe=t=>{if(!t.children.length)return;const e=t.querySelectorAll("span");e&&e.forEach(n=>{var r,i;const s=n.getAttribute("style"),o=(i=(r=n.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||i===void 0?void 0:i.getAttribute("style");n.setAttribute("style",`${o};${s}`)})},uRe=wa.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&cRe(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Kr(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}});var P$="Toggle",IR=b.forwardRef((t,e)=>{const{pressed:n,defaultPressed:r,onPressedChange:i,...s}=t,[o,a]=Cs({prop:n,onChange:i,defaultProp:r??!1,caller:P$});return m.jsx(xt.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":t.disabled?"":void 0,...s,ref:e,onClick:rt(t.onClick,()=>{t.disabled||a(!o)})})});IR.displayName=P$;var D$=IR,Jc="ToggleGroup",[I$,UNe]=es(Jc,[aw]),L$=aw(),LR=Me.forwardRef((t,e)=>{const{type:n,...r}=t;if(n==="single"){const i=r;return m.jsx(dRe,{...i,ref:e})}if(n==="multiple"){const i=r;return m.jsx(fRe,{...i,ref:e})}throw new Error(`Missing prop \`type\` expected on \`${Jc}\``)});LR.displayName=Jc;var[O$,F$]=I$(Jc),dRe=Me.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o,a]=Cs({prop:n,defaultProp:r??"",onChange:i,caller:Jc});return m.jsx(O$,{scope:t.__scopeToggleGroup,type:"single",value:Me.useMemo(()=>o?[o]:[],[o]),onItemActivate:a,onItemDeactivate:Me.useCallback(()=>a(""),[a]),children:m.jsx(U$,{...s,ref:e})})}),fRe=Me.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o,a]=Cs({prop:n,defaultProp:r??[],onChange:i,caller:Jc}),l=Me.useCallback(u=>a((d=[])=>[...d,u]),[a]),c=Me.useCallback(u=>a((d=[])=>d.filter(h=>h!==u)),[a]);return m.jsx(O$,{scope:t.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:l,onItemDeactivate:c,children:m.jsx(U$,{...s,ref:e})})});LR.displayName=Jc;var[hRe,pRe]=I$(Jc),U$=Me.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:i=!0,orientation:s,dir:o,loop:a=!0,...l}=t,c=L$(n),u=dg(o),d={role:"group",dir:u,...l};return m.jsx(hRe,{scope:n,rovingFocus:i,disabled:r,children:i?m.jsx(Y4,{asChild:!0,...c,orientation:s,dir:u,loop:a,children:m.jsx(xt.div,{...d,ref:e})}):m.jsx(xt.div,{...d,ref:e})})}),w0="ToggleGroupItem",B$=Me.forwardRef((t,e)=>{const n=F$(w0,t.__scopeToggleGroup),r=pRe(w0,t.__scopeToggleGroup),i=L$(t.__scopeToggleGroup),s=n.value.includes(t.value),o=r.disabled||t.disabled,a={...t,pressed:s,disabled:o},l=Me.useRef(null);return r.rovingFocus?m.jsx(J4,{asChild:!0,...i,focusable:!o,active:s,ref:l,children:m.jsx(HO,{...a,ref:e})}):m.jsx(HO,{...a,ref:e})});B$.displayName=w0;var HO=Me.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:r,...i}=t,s=F$(w0,n),o={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},a=s.type==="single"?o:void 0;return m.jsx(IR,{...a,...i,ref:e,onPressedChange:l=>{l?s.onItemActivate(r):s.onItemDeactivate(r)}})}),z$=LR,j$=B$;const H$=sg("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),mRe=b.forwardRef(({className:t,variant:e,size:n,...r},i)=>m.jsx(D$,{ref:i,className:_t(H$({variant:e,size:n,className:t})),...r}));mRe.displayName=D$.displayName;const V$=b.createContext({size:"default",variant:"default"}),wM=b.forwardRef(({className:t,variant:e,size:n,children:r,...i},s)=>m.jsx(z$,{ref:s,className:_t("flex items-center justify-center gap-1",t),...i,children:m.jsx(V$.Provider,{value:{variant:e,size:n},children:r})}));wM.displayName=z$.displayName;const Vl=b.forwardRef(({className:t,children:e,variant:n,size:r,...i},s)=>{const o=b.useContext(V$);return m.jsx(j$,{ref:s,className:_t(H$({variant:o.variant||n,size:o.size||r}),t),...i,children:e})});Vl.displayName=j$.displayName;const gRe=({editor:t,className:e})=>{if(!t)return null;const{theme:n}=no(),r=n==="light",i=()=>t.isActive("heading",{level:1})?"1":t.isActive("heading",{level:2})?"2":t.isActive("heading",{level:3})?"3":"paragraph",s=()=>t.isActive({textAlign:"left"})?"left":t.isActive({textAlign:"center"})?"center":t.isActive({textAlign:"right"})?"right":"left";return m.jsxs("div",{className:_t("flex items-center flex-wrap gap-2 p-2 border-b","md:gap-3",e),style:{backgroundColor:r?"#f9fafb":"#334155",borderBottomColor:r?"#e5e7eb":"#475569"},children:[m.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:m.jsxs(Wc,{value:i(),onValueChange:o=>{const{from:a,to:l}=t.state.selection;if(a!==l){const u=t.state.doc.textBetween(a,l," ");if(o==="paragraph")t.chain().focus().deleteSelection().insertContent(`<p>${u}</p>`).run();else{const d=parseInt(o);t.chain().focus().deleteSelection().insertContent(`<h${d}>${u}</h${d}>`).run()}}else if(o==="paragraph")t.chain().focus().splitBlock().setParagraph().run();else{const u=parseInt(o);t.chain().focus().splitBlock().setHeading({level:u}).run()}},children:[m.jsxs(gl,{className:"w-20 md:w-24 h-8 text-xs",style:{backgroundColor:r?"white":"#475569",borderColor:r?"#d1d5db":"#64748b",color:r?"#374151":"#e5e7eb"},children:[m.jsx(RB,{className:"h-3 w-3 md:hidden"}),m.jsx(Gc,{className:"hidden md:inline"})]}),m.jsxs(vl,{children:[m.jsx(ar,{value:"paragraph",children:"Normal"}),m.jsx(ar,{value:"1",children:"H1"}),m.jsx(ar,{value:"2",children:"H2"}),m.jsx(ar,{value:"3",children:"H3"})]})]})}),m.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:m.jsxs(wM,{type:"multiple",value:[t.isActive("bold")?"bold":"",t.isActive("italic")?"italic":"",t.isActive("underline")?"underline":"",t.isActive("strike")?"strike":""].filter(Boolean),className:"flex gap-0 md:gap-1",children:[m.jsx(Vl,{value:"bold",size:"sm",className:"h-8 w-8 p-0",onClick:()=>t.chain().focus().toggleBold().run(),style:{backgroundColor:t.isActive("bold")?"#2563eb":"transparent",color:t.isActive("bold")?"white":r?"#374151":"#e5e7eb"},onMouseEnter:o=>{t.isActive("bold")||(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{t.isActive("bold")||(o.currentTarget.style.backgroundColor="transparent")},children:m.jsx(bB,{className:"h-3 w-3 md:h-4 md:w-4"})}),m.jsx(Vl,{value:"italic",size:"sm",className:"h-8 w-8 p-0",onClick:()=>t.chain().focus().toggleItalic().run(),style:{backgroundColor:t.isActive("italic")?"#2563eb":"transparent",color:t.isActive("italic")?"white":r?"#374151":"#e5e7eb"},onMouseEnter:o=>{t.isActive("italic")||(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{t.isActive("italic")||(o.currentTarget.style.backgroundColor="transparent")},children:m.jsx(CB,{className:"h-3 w-3 md:h-4 md:w-4"})}),m.jsx(Vl,{value:"underline",size:"sm",className:"h-8 w-8 p-0",onClick:()=>t.chain().focus().toggleUnderline().run(),style:{backgroundColor:t.isActive("underline")?"#2563eb":"transparent",color:t.isActive("underline")?"white":r?"#374151":"#e5e7eb"},onMouseEnter:o=>{t.isActive("underline")||(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{t.isActive("underline")||(o.currentTarget.style.backgroundColor="transparent")},children:m.jsx(kB,{className:"h-3 w-3 md:h-4 md:w-4"})}),m.jsx(Vl,{value:"strike",size:"sm",className:"h-8 w-8 p-0",onClick:()=>t.chain().focus().toggleStrike().run(),style:{backgroundColor:t.isActive("strike")?"#2563eb":"transparent",color:t.isActive("strike")?"white":r?"#374151":"#e5e7eb"},onMouseEnter:o=>{t.isActive("strike")||(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{t.isActive("strike")||(o.currentTarget.style.backgroundColor="transparent")},children:m.jsx(Oee,{className:"h-3 w-3 md:h-4 md:w-4"})})]})}),m.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:m.jsxs(wM,{type:"single",value:s(),onValueChange:o=>{o&&t.chain().focus().setTextAlign(o).run()},className:"flex gap-0 md:gap-1",children:[m.jsx(Vl,{value:"left",size:"sm",className:"h-8 w-8 p-0",style:{backgroundColor:s()==="left"?"#2563eb":"transparent",color:s()==="left"?"white":r?"#374151":"#e5e7eb"},onMouseEnter:o=>{s()!=="left"&&(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{s()!=="left"&&(o.currentTarget.style.backgroundColor="transparent")},children:m.jsx(wB,{className:"h-3 w-3 md:h-4 md:w-4"})}),m.jsx(Vl,{value:"center",size:"sm",className:"h-8 w-8 p-0",style:{backgroundColor:s()==="center"?"#2563eb":"transparent",color:s()==="center"?"white":r?"#374151":"#e5e7eb"},onMouseEnter:o=>{s()!=="center"&&(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{s()!=="center"&&(o.currentTarget.style.backgroundColor="transparent")},children:m.jsx(xB,{className:"h-3 w-3 md:h-4 md:w-4"})}),m.jsx(Vl,{value:"right",size:"sm",className:"h-8 w-8 p-0",style:{backgroundColor:s()==="right"?"#2563eb":"transparent",color:s()==="right"?"white":r?"#374151":"#e5e7eb"},onMouseEnter:o=>{s()!=="right"&&(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{s()!=="right"&&(o.currentTarget.style.backgroundColor="transparent")},children:m.jsx(uee,{className:"h-3 w-3 md:h-4 md:w-4"})})]})}),m.jsx("div",{className:"flex items-center gap-1 flex-shrink-0",children:m.jsxs("div",{className:"flex gap-0 md:gap-1",children:[m.jsx(nt,{variant:"ghost",size:"sm",onClick:()=>t.chain().focus().toggleBulletList().run(),className:_t("h-8 w-8 p-0",t.isActive("bulletList")?"bg-blue-600 hover:bg-blue-700 text-white":""),style:t.isActive("bulletList")?{}:{backgroundColor:"transparent",color:r?"#374151":"#e5e7eb"},onMouseEnter:o=>{t.isActive("bulletList")||(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{t.isActive("bulletList")||(o.currentTarget.style.backgroundColor="transparent")},children:m.jsx(TB,{className:"h-3 w-3 md:h-4 md:w-4"})}),m.jsx(nt,{variant:"ghost",size:"sm",onClick:()=>t.chain().focus().toggleOrderedList().run(),className:_t("h-8 w-8 p-0",t.isActive("orderedList")?"bg-blue-600 hover:bg-blue-700 text-white":""),style:t.isActive("orderedList")?{}:{backgroundColor:"transparent",color:r?"#374151":"#e5e7eb"},onMouseEnter:o=>{t.isActive("orderedList")||(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{t.isActive("orderedList")||(o.currentTarget.style.backgroundColor="transparent")},children:m.jsx(MB,{className:"h-3 w-3 md:h-4 md:w-4"})}),m.jsx(nt,{variant:"ghost",size:"sm",onClick:()=>t.chain().focus().toggleBlockquote().run(),className:_t("h-8 w-8 p-0",t.isActive("blockquote")?"bg-blue-600 hover:bg-blue-700 text-white":""),style:t.isActive("blockquote")?{}:{backgroundColor:"transparent",color:r?"#374151":"#e5e7eb"},onMouseEnter:o=>{t.isActive("blockquote")||(o.currentTarget.style.backgroundColor=r?"#f3f4f6":"#475569")},onMouseLeave:o=>{t.isActive("blockquote")||(o.currentTarget.style.backgroundColor="transparent")},children:m.jsx(AB,{className:"h-3 w-3 md:h-4 md:w-4"})})]})})]})},vRe=1e3,x_=3,yRe=60*60*1e3,xRe=2e3,wRe=({enabled:t,noteContent:e,noteCategory:n})=>{const[r,i]=b.useState([]),[s,o]=b.useState([]),[a,l]=b.useState(null),[c,u]=b.useState(!1),[d,h]=b.useState(null),[p,x]=b.useState(""),w=b.useRef(null),y=b.useRef(0),{token:v}=ro(),S=b.useCallback(H=>{if(!H.trim())return"";const J=H.split(/[.!?]+/).filter(q=>q.trim().length>0).slice(-3).join(". ");return J.length>200?J.substring(J.length-200):J},[]),E=b.useCallback(H=>{if(!t||!H.trim())return console.log(" Note AI: Disabled or empty content",{enabled:t,contentLength:H.length}),!1;const j=H.trim().split(/\s+/);if(console.log(" Note AI: Checking trigger conditions",{wordCount:j.length,minRequired:x_,content:H.substring(0,50)+"..."}),j.length<x_)return console.log(` Note AI: Not enough words (${j.length}/${x_})`),!1;if(S(H)===p)return!1;if(/[.!?]\s*$/.test(H.trim()))return console.log(" Note AI trigger: Sentence completion"),!0;if(/\n\s*\n\s*\w+/.test(H.slice(-50)))return console.log(" Note AI trigger: Paragraph break"),!0;const q=Math.abs(H.length-p.length);return q>20?(console.log(" Note AI trigger: New content length",q),!0):(console.log(" Note AI trigger: Always responsive"),!0)},[t,S,p]),C=b.useCallback(H=>{try{const j=H.replace(/\s+/g," ").trim().split(" ").slice(-20).join(" "),J=`note-suggestions-${btoa(j).slice(-50)}-${n||"general"}`,q=localStorage.getItem(J);if(q){const{suggestions:Q,continuations:O,timestamp:F}=JSON.parse(q);if(Date.now()-F<yRe)return console.log(" Found cached suggestions for context:",j.substring(0,50)),{suggestions:Q||[],continuations:O||[]}}}catch(j){console.warn("Failed to read note suggestion cache:",j)}return null},[n]),T=b.useCallback((H,j,J)=>{try{const q=H.replace(/\s+/g," ").trim().split(" ").slice(-20).join(" "),Q=`note-suggestions-${btoa(q).slice(-50)}-${n||"general"}`,O={suggestions:j,continuations:J,timestamp:Date.now()};localStorage.setItem(Q,JSON.stringify(O)),console.log(" Cached suggestions for context:",q.substring(0,50))}catch(q){console.warn("Failed to cache note suggestions:",q)}},[n]),A=b.useCallback(H=>{var q;const j=[],J=((q=H.split(/[.!?]/).pop())==null?void 0:q.trim())||"";return J.toLowerCase().includes("i need to")?j.push("remember to","focus on","make sure"):J.toLowerCase().includes("the main")?j.push("point is","goal is","issue is"):J.toLowerCase().includes("next step")&&j.push("is to","would be","should be"),n!=null&&n.toLowerCase().includes("meeting")?j.push("Action items:","Follow up on:","Next meeting:"):n!=null&&n.toLowerCase().includes("project")&&j.push("Timeline:","Resources needed:","Deliverables:"),j},[n]),k=b.useCallback(async(H=!1)=>{var Q;if(!v||!t)return;const j=S(e);if(!j||!E(e)){const O=A(e);i(O),l(O[0]||null);return}const J=C(j);if(J&&!H){console.log(" Using cached note suggestions for context:",j.substring(0,50)),i(J.suggestions),o(J.continuations),l(J.suggestions[0]||J.continuations[0]||null);return}const q=Date.now();if(!H&&y.current&&q-y.current<xRe){console.log(" Throttling AI call - too soon since last request");return}H&&console.log(" Force refreshing AI suggestions (bypassing throttle and cache)");try{u(!0),h(null),y.current=Date.now(),x(j);const O=xm(),F=await Nn.post(`${O}/api/note-suggestions`,{context:j,category:n,requestTypes:["completion","continuation"]},{withCredentials:!0,headers:{Authorization:`Bearer ${v}`},timeout:1e4});if(F.data){const{suggestions:D=[],continuations:ee=[]}=F.data;console.log(" Note AI suggestions received:",{suggestions:D.length,continuations:ee.length,firstSuggestion:D[0]||ee[0]||"none",apiResponse:F.data}),i(D),o(ee),l(D[0]||ee[0]||null),T(j,D,ee)}}catch(O){console.error("Failed to fetch note AI suggestions:",O);const F=A(e);i(F),l(F[0]||null),((Q=O==null?void 0:O.response)==null?void 0:Q.status)===401?h("Session expired. Please log in again."):h("AI suggestions temporarily unavailable")}finally{u(!1)}},[v,t,e,n,S,E,C,T,A]),R=b.useCallback(()=>{w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{k()},vRe)},[k]),P=b.useCallback(()=>{w.current&&clearTimeout(w.current),k()},[k]),M=b.useCallback(()=>{w.current&&clearTimeout(w.current),k(!0)},[k]),I=b.useCallback(()=>{console.log(" Clearing suggestions from React state"),i([]),o([]),l(null)},[]),z=b.useCallback((H,j)=>{if(console.log(" Note getSuggestionForInput:",{enabled:t,contentLength:H.length,cursorPosition:j,suggestionsCount:r.length,continuationsCount:s.length}),!t||!H||j<H.length)return null;const J=[...r,...s];if(J.length>0){const q=J[0];return console.log(" Note autocomplete suggestion:",q),q}return null},[t,r,s]);return b.useEffect(()=>(t&&e&&R(),()=>{w.current&&clearTimeout(w.current)}),[t,e,R]),{suggestions:r,continuations:s,currentSuggestion:a,isLoading:c,error:d,triggerSuggestions:P,forceRefreshSuggestions:M,clearSuggestions:I,getSuggestionForInput:z,metrics:{lastTriggerContext:p,shouldTrigger:E(e),wordCount:e.trim().split(/\s+/).length,contextWindow:S(e)}}};function Wr(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function bRe(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const Ay=43200,VO=1440;let SRe={};function _Re(){return SRe}function $O(t){const e=Wr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ux(t,e){const n=Wr(t),r=Wr(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function ERe(t){return bRe(t,Date.now())}function CRe(t,e){const n=Wr(t),r=Wr(e),i=n.getFullYear()-r.getFullYear(),s=n.getMonth()-r.getMonth();return i*12+s}function MRe(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function TRe(t,e){return+Wr(t)-+Wr(e)}function ARe(t){const e=Wr(t);return e.setHours(23,59,59,999),e}function RRe(t){const e=Wr(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function kRe(t){const e=Wr(t);return+ARe(e)==+RRe(e)}function NRe(t,e){const n=Wr(t),r=Wr(e),i=ux(n,r),s=Math.abs(CRe(n,r));let o;if(s<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*s);let a=ux(n,r)===-i;kRe(Wr(t))&&s===1&&ux(t,r)===1&&(a=!1),o=i*(s-Number(a))}return o===0?0:o}function PRe(t,e,n){const r=TRe(t,e)/1e3;return MRe(n==null?void 0:n.roundingMethod)(r)}const DRe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},IRe=(t,e,n)=>{let r;const i=DRe[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function w_(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const LRe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ORe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},FRe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},URe={date:w_({formats:LRe,defaultWidth:"full"}),time:w_({formats:ORe,defaultWidth:"full"}),dateTime:w_({formats:FRe,defaultWidth:"full"})},BRe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zRe=(t,e,n,r)=>BRe[t];function Sp(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const jRe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},HRe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},VRe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$Re={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},WRe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},GRe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},XRe=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},qRe={ordinalNumber:XRe,era:Sp({values:jRe,defaultWidth:"wide"}),quarter:Sp({values:HRe,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Sp({values:VRe,defaultWidth:"wide"}),day:Sp({values:$Re,defaultWidth:"wide"}),dayPeriod:Sp({values:WRe,defaultWidth:"wide",formattingValues:GRe,defaultFormattingWidth:"wide"})};function _p(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?YRe(a,d=>d.test(o)):KRe(a,d=>d.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function KRe(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function YRe(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function JRe(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const QRe=/^(\d+)(th|st|nd|rd)?/i,ZRe=/\d+/i,eke={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},tke={any:[/^b/i,/^(a|c)/i]},nke={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},rke={any:[/1/i,/2/i,/3/i,/4/i]},ike={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ske={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},oke={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ake={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},lke={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},cke={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},uke={ordinalNumber:JRe({matchPattern:QRe,parsePattern:ZRe,valueCallback:t=>parseInt(t,10)}),era:_p({matchPatterns:eke,defaultMatchWidth:"wide",parsePatterns:tke,defaultParseWidth:"any"}),quarter:_p({matchPatterns:nke,defaultMatchWidth:"wide",parsePatterns:rke,defaultParseWidth:"any",valueCallback:t=>t+1}),month:_p({matchPatterns:ike,defaultMatchWidth:"wide",parsePatterns:ske,defaultParseWidth:"any"}),day:_p({matchPatterns:oke,defaultMatchWidth:"wide",parsePatterns:ake,defaultParseWidth:"any"}),dayPeriod:_p({matchPatterns:lke,defaultMatchWidth:"any",parsePatterns:cke,defaultParseWidth:"any"})},dke={code:"en-US",formatDistance:IRe,formatLong:URe,formatRelative:zRe,localize:qRe,match:uke,options:{weekStartsOn:0,firstWeekContainsDate:1}};function fke(t,e,n){const r=_Re(),i=(n==null?void 0:n.locale)??r.locale??dke,s=2520,o=ux(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const a=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let l,c;o>0?(l=Wr(e),c=Wr(t)):(l=Wr(t),c=Wr(e));const u=PRe(c,l),d=($O(c)-$O(l))/1e3,h=Math.round((u-d)/60);let p;if(h<2)return n!=null&&n.includeSeconds?u<5?i.formatDistance("lessThanXSeconds",5,a):u<10?i.formatDistance("lessThanXSeconds",10,a):u<20?i.formatDistance("lessThanXSeconds",20,a):u<40?i.formatDistance("halfAMinute",0,a):u<60?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",1,a):h===0?i.formatDistance("lessThanXMinutes",1,a):i.formatDistance("xMinutes",h,a);if(h<45)return i.formatDistance("xMinutes",h,a);if(h<90)return i.formatDistance("aboutXHours",1,a);if(h<VO){const x=Math.round(h/60);return i.formatDistance("aboutXHours",x,a)}else{if(h<s)return i.formatDistance("xDays",1,a);if(h<Ay){const x=Math.round(h/VO);return i.formatDistance("xDays",x,a)}else if(h<Ay*2)return p=Math.round(h/Ay),i.formatDistance("aboutXMonths",p,a)}if(p=NRe(c,l),p<12){const x=Math.round(h/Ay);return i.formatDistance("xMonths",x,a)}else{const x=p%12,w=Math.trunc(p/12);return x<3?i.formatDistance("aboutXYears",w,a):x<9?i.formatDistance("overXYears",w,a):i.formatDistance("almostXYears",w+1,a)}}function hke(t,e){return fke(t,ERe(t),e)}function $$(t){if(!t)return"Unknown";try{const e=t instanceof Date?t:new Date(t);return new Date().getTime()-e.getTime()<6e4?"Just now":hke(e,{addSuffix:!0})}catch(e){return console.error("Error formatting relative time:",e),"Unknown"}}let Xn={suggestion:null,triggerSuggestions:null,setSuggestionDebounce:null,handleSave:null};const pke=Ir.create({name:"autocomplete",addKeyboardShortcuts(){return{Tab:()=>{console.log(" TipTap Extension: Tab key pressed!"),console.log(" TipTap Extension: Editor focus state:",this.editor.isFocused),console.log(" TipTap Extension: Local storage object:",JSON.stringify(this.storage,null,2)),console.log(" TipTap Extension: Global storage object:",JSON.stringify(Xn,null,2));const t=Xn.suggestion;if(console.log(" TipTap Extension: Current suggestion from global storage:",t==null?void 0:t.substring(0,30)),t){console.log(" TipTap Extension: Accepting suggestion with Tab:",t.substring(0,30)),Xn.suggestion=null,this.editor.commands.insertContent(t);const n=this.editor.getText().trim().split(/\s+/).filter(r=>r.length>0).length;return Xn.setSuggestionDebounce&&Xn.setSuggestionDebounce(n),!0}else console.log(" TipTap Extension: No suggestion available in global storage"),console.log(" TipTap Extension: Global storage state:",Xn);return!1},ArrowRight:()=>{const t=Xn.suggestion;if(t){console.log(" TipTap Extension: ArrowRight pressed with suggestion:",t.substring(0,30)),Xn.suggestion=null,this.editor.commands.insertContent(t);const n=this.editor.getText().trim().split(/\s+/).filter(r=>r.length>0).length;return Xn.setSuggestionDebounce&&Xn.setSuggestionDebounce(n),!0}return!1}}},addStorage(){return{autocomplete:null}},onBeforeCreate(){var e,n,r;const t=(e=this.storage.autocomplete)==null?void 0:e.suggestion;!this.storage.autocomplete||typeof this.storage.autocomplete!="object"?this.storage.autocomplete={suggestion:null,triggerSuggestions:()=>{},setSuggestionDebounce:()=>{},handleSave:()=>{}}:t&&(this.storage.autocomplete.suggestion=t),console.log(" TipTap Extension: onBeforeCreate called, preserving suggestion:",((r=(n=this.storage.autocomplete)==null?void 0:n.suggestion)==null?void 0:r.substring(0,30))||"null")},onCreate(){var t,e;console.log(" TipTap Extension: onCreate called, final storage:",((e=(t=this.storage.autocomplete)==null?void 0:t.suggestion)==null?void 0:e.substring(0,30))||"null")}}),mke=({content:t,isEditingContent:e,editContent:n,setEditContent:r,setIsEditingContent:i,handleEditContent:s,noteCategory:o,noteColor:a="#FFFFE0",noteId:l,onAutoSave:c,updatedAt:u})=>{const d=b.useRef(null),h=b.useRef(null),[p,x]=b.useState(0),[w,y]=b.useState(!1),[v,S]=b.useState(!1),[E,C]=b.useState(!1),{aiEnabled:T}=JT(),{theme:A}=no(),k=A==="light",R=nAe({extensions:[sRe.configure({paragraph:{HTMLAttributes:{class:"text-sm leading-relaxed"}},heading:{levels:[1,2,3],HTMLAttributes:{class:"font-semibold"}},bold:{HTMLAttributes:{class:"font-bold"}},italic:{HTMLAttributes:{class:"italic"}},strike:{HTMLAttributes:{class:"line-through"}},bulletList:{HTMLAttributes:{class:"list-disc list-inside"}},orderedList:{HTMLAttributes:{class:"list-decimal list-inside"}},listItem:{HTMLAttributes:{class:"ml-4"}},blockquote:{HTMLAttributes:{class:"border-l-4 border-gray-300 pl-4 italic text-gray-600"}}}),oRe.configure({HTMLAttributes:{class:"underline"}}),aRe.configure({types:["heading","paragraph"],alignments:["left","center","right"],defaultAlignment:"left"}),uRe,lRe.configure({placeholder:"Start typing your note...",emptyEditorClass:"is-empty"}),pke],content:"",editable:!0,immediatelyRender:!1,onUpdate:({editor:oe})=>{const Z=oe.getHTML();r(Z),e||(console.log(" Auto-enabling editing mode because content changed"),i(!0)),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{console.log(" Auto-saving rich note content..."),c({content:Z,updated_at:new Date().toISOString()})},3e3)}});b.useEffect(()=>{const oe=Z=>{var pe,ye;if(Z.key==="Tab"){console.log(" Global Tab Event:",{target:Z.target,tagName:(pe=Z.target)==null?void 0:pe.tagName,className:(ye=Z.target)==null?void 0:ye.className,editorFocused:R==null?void 0:R.isFocused,defaultPrevented:Z.defaultPrevented,timeStamp:Z.timeStamp});const ge=Xn.suggestion;if(ge&&!Z.defaultPrevented&&R){console.log(" Global fallback: Handling Tab with suggestion:",ge.substring(0,30)),Z.preventDefault(),Xn.suggestion=null,R.commands.insertContent(ge);const We=R.getText().trim().split(/\s+/).filter(it=>it.length>0).length;Xn.setSuggestionDebounce&&Xn.setSuggestionDebounce(We)}}};return document.addEventListener("keydown",oe,!0),()=>document.removeEventListener("keydown",oe,!0)},[R]),b.useEffect(()=>{if(!R)return;const oe=Z=>{if(!R.isFocused)return;if(navigator.platform.toUpperCase().indexOf("MAC")>=0?Z.metaKey:Z.ctrlKey)switch(Z.key.toLowerCase()){case"b":Z.preventDefault(),R.chain().focus().toggleBold().run();break;case"i":Z.preventDefault(),R.chain().focus().toggleItalic().run();break;case"u":Z.preventDefault(),R.chain().focus().toggleUnderline().run();break}};return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)},[R]);const P=(R==null?void 0:R.getText())||"",M=(R==null?void 0:R.state.selection.anchor)||0,{suggestions:I,continuations:z,getSuggestionForInput:H,triggerSuggestions:j,forceRefreshSuggestions:J,clearSuggestions:q,currentSuggestion:Q}=wRe({enabled:T,noteContent:P,noteCategory:o});b.useEffect(()=>{if(R&&t!==void 0){const oe=R.getHTML();if(t&&t!=="<p></p>"&&t!==oe)if(!t.includes("<")&&!t.includes(">")){const Z=`<p>${t.replace(/\n/g,"</p><p>")}</p>`;R.commands.setContent(Z,!1),r(Z)}else R.commands.setContent(t,!1),r(t)}},[R,t,r]);const O=P.trim().split(/\s+/).filter(oe=>oe.length>0).length,F=O-p,ee=!w||F>=3;b.useEffect(()=>{w&&ee&&(console.log(" Debounce period ended, re-enabling suggestions"),y(!1))},[w,ee]);const W=b.useCallback((oe,Z)=>{if(!oe)return oe;const pe=Z.trim(),ye=/[.!?]\s*$/.test(pe),ge=!pe||ye;let je=oe;return ge&&je.length>0?je=je.charAt(0).toUpperCase()+je.slice(1):!ge&&je.length>0&&(je=je.charAt(0).toLowerCase()+je.slice(1)),console.log(" Grammar fix:",{context:`"${pe.slice(-15)}"`,suggestion:`"${oe.substring(0,20)}"`,fixed:`"${je.substring(0,20)}"`,isStartOfSentence:ge,endsWithSentencePunctuation:ye}),je},[]),B=ee?H(P,P.length):null,K=B?W(B,P):null;console.log(" Tab Debug:",{shouldShowSuggestions:ee,suggestionJustAccepted:v,rawSuggestion:B==null?void 0:B.substring(0,20),currentAutocomplete:K==null?void 0:K.substring(0,20),suggestionsAvailable:I.length,plainTextLength:P.length,willShowInline:e&&K&&T&&ee&&!v&&P.trim().split(/\s+/).length>=3}),b.useEffect(()=>{R&&R.storage&&typeof R.storage.autocomplete=="object"&&(console.log(" Updating editor autocomplete storage:",{suggestion:K==null?void 0:K.substring(0,30),isEditingContent:e,willPassSuggestion:K!==null,finalSuggestion:(K==null?void 0:K.substring(0,30))||"null",storageExists:!!R.storage.autocomplete,editorReady:R.isEditable}),(()=>{var Z,pe,ye,ge,je,We;Xn.suggestion=K,Xn.triggerSuggestions=j,Xn.setSuggestionDebounce=it=>{console.log(" Setting suggestion debounce after accepting suggestion, word count:",it),x(it),y(!0),S(!0);try{const te=[];for(let pt=0;pt<localStorage.length;pt++){const Be=localStorage.key(pt);Be&&Be.startsWith("note-suggestions-")&&te.push(Be)}te.forEach(pt=>localStorage.removeItem(pt)),console.log(" Cleared note suggestion cache after accepting suggestion")}catch(te){console.warn("Failed to clear note suggestion cache:",te)}console.log(" Clearing in-memory suggestions before refresh",{currentSuggestionsCount:I.length,currentContinuationsCount:z.length,currentSuggestion:Q==null?void 0:Q.substring(0,30)}),q&&q(),Xn.suggestion=null,J&&(console.log(" Force refreshing suggestions after cache clear"),setTimeout(()=>{J()},200)),setTimeout(()=>{S(!1)},100)},Xn.handleSave=()=>{d.current&&clearTimeout(d.current),s()},R&&R.storage&&R.storage.autocomplete&&(R.storage.autocomplete={suggestion:K,triggerSuggestions:j,setSuggestionDebounce:Xn.setSuggestionDebounce,handleSave:Xn.handleSave}),console.log(" Storage after update:",{globalSuggestion:((Z=Xn.suggestion)==null?void 0:Z.substring(0,30))||"null",localSuggestion:((ge=(ye=(pe=R==null?void 0:R.storage)==null?void 0:pe.autocomplete)==null?void 0:ye.suggestion)==null?void 0:ge.substring(0,30))||"null",hasGlobalStorage:!!Xn.suggestion,hasLocalStorage:!!((We=(je=R==null?void 0:R.storage)==null?void 0:je.autocomplete)!=null&&We.suggestion),isEditing:e,timestamp:Date.now()})})())},[R,K,j,s]),b.useEffect(()=>{var oe,Z;console.log(" Rich Note Autocomplete State:",{isEditingContent:e,aiEnabled:T,plainTextContent:P.substring(0,50)+(P.length>50?"...":""),cursorPosition:M,currentAutocomplete:(K==null?void 0:K.substring(0,30))+(K&&K.length>30?"...":""),suggestionsCount:I.length,continuationsCount:z.length,wordCount:O,shouldShow:e&&K&&P.trim().split(/\s+/).length>=3,suggestionDebounceActive:w,lastAcceptedSuggestionLength:p,wordsAddedSinceLastSuggestion:F,shouldShowSuggestions:ee,firstSuggestion:(oe=I[0])==null?void 0:oe.substring(0,30),firstContinuation:(Z=z[0])==null?void 0:Z.substring(0,30)})},[e,T,P,M,K,I.length,z.length,I,z,w,p,ee]),b.useEffect(()=>{C(T&&e&&(I.length>0||z.length>0||Q!==null))},[T,e,I.length,z.length,Q]),b.useEffect(()=>{T&&!e&&(I.length>0||K)&&(console.log(" Auto-enabling editing mode because suggestions are available"),i(!0),R&&R.commands.focus())},[T,e,I.length,K,R,i]);const ie=b.useCallback(oe=>{R&&(e||(console.log(" Enabling editing mode and focusing editor on click"),i(!0)),R.commands.focus())},[R,e,i]);return b.useEffect(()=>{if(!e)return;const oe=Z=>{const pe=R==null?void 0:R.view.dom,ye=document.querySelector("[data-rich-text-toolbar]");pe&&!pe.contains(Z.target)&&(!ye||!ye.contains(Z.target))&&(d.current&&clearTimeout(d.current),s())};return document.addEventListener("mousedown",oe),()=>{document.removeEventListener("mousedown",oe)}},[e,s,R]),R?m.jsxs("div",{className:"flex flex-col h-full relative","data-rich-text-editor":!0,tabIndex:-1,children:[m.jsx("div",{"data-rich-text-toolbar":!0,className:"flex-shrink-0",children:m.jsx(gRe,{editor:R})}),m.jsx("div",{className:"flex-1 relative cursor-text overflow-hidden",onClick:ie,style:{paddingBottom:u?"36px":"8px"},children:m.jsxs("div",{className:"relative h-full",children:[m.jsx(GTe,{editor:R,className:`prose prose-sm max-w-none h-full p-3 focus-within:outline-none cursor-text overflow-y-auto ${k?"prose-gray":"prose-invert"}`,style:{borderColor:a,minHeight:"120px",color:k?"#374151":"#e5e7eb"}}),e&&K&&T&&ee&&!v&&P.trim().split(/\s+/).length>=3&&m.jsx("style",{children:`
                .ProseMirror p:last-child::after {
                  content: "${K.replace(/"/g,'\\"')}";
                  color: #9CA3AF;
                  font-style: italic;
                  opacity: 0.7;
                  pointer-events: none;
                }
              `}),m.jsx("div",{ref:h,className:"absolute opacity-0 pointer-events-none prose prose-sm max-w-none",style:{fontFamily:"inherit",fontSize:"14px",lineHeight:"20px",padding:"12px",whiteSpace:"pre-wrap",top:0,left:0},children:P})]})}),u&&m.jsx("div",{className:"absolute bottom-0 left-0 right-0 flex-shrink-0 px-2 md:px-3 py-1 md:py-2",style:{borderTop:`1px solid ${a}33`,backgroundColor:k?"#ffffff":"#1e293b",fontSize:"10px"},children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:`${k?"text-gray-500":"text-gray-400"} truncate text-xs md:text-xs`,style:{fontFamily:'"Raleway", sans-serif',fontSize:"inherit"},children:[m.jsx("span",{className:"hidden sm:inline",children:"Last edited: "}),m.jsx("span",{className:"sm:hidden",children:"Edited: "}),$$(u)]}),T&&m.jsx("div",{title:"AI-powered suggestions enabled",className:"flex-shrink-0 ml-1 md:ml-2",children:m.jsx(oc,{className:"h-2.5 w-2.5 md:h-3 md:w-3",style:{color:a}})})]})})]}):m.jsx("div",{className:"p-4",children:"Loading editor..."})},gke=({currentCategory:t,categoryColor:e,itemColor:n,existingCategories:r,isEditingCategory:i,showNewCategoryInput:s,newCategory:o,setNewCategory:a,setIsEditingCategory:l,setShowNewCategoryInput:c,handleEditCategory:u,handleAddCustomCategory:d,handleUpdateCategoryColor:h})=>{const p=t&&t!==""?t:"General",x=e||n||"#808080",w=()=>"#ffffff";return m.jsx("div",{className:"mb-2 px-6 flex items-center gap-2",children:i?m.jsx("div",{className:"mb-2 w-full",children:s?m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(Yn,{value:o,onChange:y=>a(y.target.value),placeholder:"Enter new category",className:"h-8",autoFocus:!0,onKeyDown:y=>{y.key==="Enter"&&d()}}),m.jsx(nt,{size:"sm",variant:"ghost",onClick:d,className:"h-8 w-8 p-0",children:m.jsx(eo,{className:"h-4 w-4"})}),m.jsx(nt,{size:"sm",variant:"ghost",onClick:()=>{c(!1),a("")},className:"h-8 w-8 p-0",children:m.jsx(Fo,{className:"h-4 w-4"})})]}):m.jsxs("div",{className:"flex flex-col space-y-2",children:[m.jsxs(Wc,{onValueChange:u,defaultValue:p,children:[m.jsx(gl,{className:"h-8",style:{fontFamily:'"Raleway", sans-serif'},children:m.jsx(Gc,{placeholder:"Select a category"})}),m.jsxs(vl,{children:[r.map(y=>m.jsx(ar,{value:y.name,style:{fontFamily:'"Raleway", sans-serif'},children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"inline-block w-3 h-3 rounded-full border",style:{backgroundColor:y.color_value}}),y.name]})},y.name)),m.jsx(ar,{value:"__custom__",style:{fontFamily:'"Raleway", sans-serif',color:"#2563eb"},children:"+ Add new category"})]})]}),p!=="__custom__"&&m.jsx("div",{className:"flex items-center gap-2 ml-2",children:m.jsx(ml,{color:x,onChange:y=>h(p,y),onSave:y=>h(p,y),children:m.jsxs(nt,{variant:"outline",size:"sm",className:"h-8 px-3 flex items-center gap-2",style:{backgroundColor:"white",borderColor:"#d1d5db",color:"#374151"},children:[m.jsx("span",{className:"inline-block w-3 h-3 rounded-full border",style:{backgroundColor:x,borderColor:"#d1d5db"}}),"Category Color"]})})}),m.jsx(nt,{size:"sm",variant:"ghost",className:"self-start",style:{fontFamily:'"Raleway", sans-serif'},onClick:()=>l(!1),children:"Cancel"})]})}):m.jsx(PA,{variant:"outline",className:"cursor-pointer hover:opacity-80 transition-opacity border-none",style:{fontFamily:'"Raleway", sans-serif',backgroundColor:x,color:w()},onClick:()=>l(!0),children:p})})},W$=({note:t,onUpdate:e,onDelete:n,existingCategories:r,onCollapsibleChange:i,isCollapsed:s,onToggleCollapsed:o,updateCategory:a})=>{var oe;const{noteTitle:l,isCollapsibleOpen:c,setIsCollapsibleOpen:u,isEditing:d,setIsEditing:h,editTitle:p,setEditTitle:x,handleEditTitle:w,handleDeleteNote:y,handleSaveNoteColor:v,isSavingColor:S,isEditingCategory:E,setIsEditingCategory:C,showNewCategoryInput:T,setShowNewCategoryInput:A,newCategory:k,setNewCategory:R,handleEditCategory:P,handleAddCustomCategory:M,isEditingContent:I,setIsEditingContent:z,editContent:H,setEditContent:j,handleEditContent:J,titleEditRef:q,contentEditRef:Q}=H1e({note:t,onUpdate:e,onDelete:n,isCollapsed:s,onToggleCollapsed:o,updateCategory:a}),{theme:O}=no(),F=O==="light";b.useEffect(()=>{if(!d)return;const Z=pe=>{q.current&&!q.current.contains(pe.target)&&w()};return document.addEventListener("mousedown",Z),()=>{document.removeEventListener("mousedown",Z)}},[d,w]);const{toast:D}=to(),[ee,W]=Me.useState(t.color_value||"#FFFFE0");Me.useEffect(()=>{W(t.color_value||"#FFFFE0")},[t.color_value]);const B=(oe=r.find(Z=>Z.name===t.category))==null?void 0:oe.color_value,K=t.color_value||B||"#FFFFE0",ie=async(Z,pe)=>{await a(Z,{color_value:pe})};return Me.useEffect(()=>{console.log(" Note Color Debug:",{noteId:t.id,noteColorValue:t.color_value,currentColorPreview:ee,noteDisplayColor:K,isEditingContent:I})},[t.id,t.color_value,ee,K,I]),m.jsx(AA,{open:c,onOpenChange:Z=>{o&&s!==void 0?!s!==Z&&o():u(Z),i==null||i(Z)},className:"w-full",style:{"--note-color":K},children:m.jsxs(bo,{className:"w-full shadow-sm h-full flex flex-col",style:{border:"none"},children:[m.jsx(ta,{className:"pb-2",children:m.jsx("div",{className:"flex justify-between items-center",children:d?m.jsxs("div",{className:"flex gap-1 w-full",children:[m.jsx(Yn,{ref:q,value:p,onChange:Z=>x(Z.target.value),className:"h-8",autoFocus:!0,onKeyDown:Z=>{Z.key==="Enter"&&w()}}),m.jsx(nt,{size:"sm",variant:"ghost",onClick:w,className:"h-8 w-8 p-0",children:m.jsx(eo,{className:"h-4 w-4"})}),m.jsx(nt,{size:"sm",variant:"ghost",onClick:()=>h(!1),className:"h-8 w-8 p-0",children:m.jsx(Fo,{className:"h-4 w-4"})})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(ml,{color:K,onChange:Z=>{W(Z)},onSave:async Z=>{if(Z!==(t.color_value||"#FFFFE0"))try{await v(Z)}catch{D({title:"Error",description:"Could not save color. Reverting preview.",variant:"destructive"}),W(t.color_value||"#FFFFE0")}},children:m.jsxs(nt,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0 rounded-full flex items-center justify-center relative","aria-label":"Change note color",disabled:S,children:[m.jsx("span",{className:"inline-block w-3 h-3 rounded-full border transition-colors duration-150",style:{backgroundColor:K,borderColor:"#d1d5db"}}),S&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-full",style:{backgroundColor:"rgba(255, 255, 255, 0.8)"},children:m.jsx("div",{className:"h-2 w-2 animate-spin rounded-full border-2 border-solid border-current border-r-transparent"})})]})}),m.jsx(lg,{className:"h-4 w-4 text-slate-500"}),m.jsx(na,{className:"text-lg font-medium cursor-pointer",style:{fontFamily:'"Raleway", sans-serif'},onClick:()=>h(!0),children:l})]}),m.jsxs("div",{className:"flex",children:[m.jsx(RA,{asChild:!0,children:m.jsx(nt,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:m.jsx(Ja,{className:_t("h-4 w-4 transition-transform",c?"":"transform rotate-180")})})}),m.jsxs(hw,{children:[m.jsx(pw,{asChild:!0,children:m.jsx(nt,{variant:"ghost",className:"h-8 w-8 p-0",children:m.jsx(RT,{className:"h-4 w-4"})})}),m.jsxs(vg,{align:"end",children:[m.jsxs(fa,{onClick:()=>h(!0),style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(og,{className:"mr-2 h-4 w-4"}),"Edit Title"]}),m.jsxs(fa,{onClick:y,className:"text-red-600",style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(q0,{className:"mr-2 h-4 w-4"}),"Delete Note"]})]})]})]})]})})}),m.jsx(gke,{currentCategory:t.category||"",categoryColor:B,itemColor:t.color_value,existingCategories:r,isEditingCategory:E,showNewCategoryInput:T,newCategory:k,setNewCategory:R,setIsEditingCategory:C,setShowNewCategoryInput:A,handleEditCategory:P,handleAddCustomCategory:M,handleUpdateCategoryColor:ie}),m.jsx(kA,{className:"flex-1",children:m.jsx("div",{className:"rounded-lg mx-2 md:mx-6 mb-6 flex-1 flex flex-col",style:{backgroundColor:F?"#ffffff":"#1e293b",border:`2px solid ${K} !important`,borderColor:`${K} !important`,height:`${Math.max(180,(t.height||300)-120)}px`},children:m.jsx(mke,{content:t.content,isEditingContent:I,editContent:H,setEditContent:j,setIsEditingContent:z,handleEditContent:J,contentEditRef:Q,noteCategory:t.category,noteColor:K,noteId:t.id,onAutoSave:async Z=>{await e(t.id,{content:Z.content,updated_at:Z.updated_at})},updatedAt:t.updated_at})})})]})})},vke=({note:t,onPositionUpdate:e,onUpdate:n,onDelete:r,existingCategories:i,canvasTransform:s,updateCategory:o})=>{const[a,l]=b.useState(!1),[c,u]=b.useState(!1),[d,h]=b.useState(!1),[p,x]=b.useState({x:0,y:0}),[w,y]=b.useState({startX:0,startY:0,startWidth:0,startHeight:0}),v=b.useRef(null);b.useEffect(()=>{v.current&&(v.current.style.left=`${t.position_x}px`,v.current.style.top=`${t.position_y}px`)},[t.position_x,t.position_y]);const S=R=>{var M;if(!R.target.closest('input, textarea, button, [role="button"], [role="menuitem"], .resize-handle, .ProseMirror, [data-rich-text-editor], [data-rich-text-toolbar]')&&(R.preventDefault(),v.current)){const I=(M=v.current.parentElement)==null?void 0:M.getBoundingClientRect();if(I){const z=(R.clientX-I.left-s.x)/s.scale,H=(R.clientY-I.top-s.y)/s.scale,j=parseFloat(v.current.style.left)||0,J=parseFloat(v.current.style.top)||0;x({x:(z-j)*s.scale,y:(H-J)*s.scale}),l(!0)}}},E=R=>{var P;if(a&&v.current){const M=(P=v.current.parentElement)==null?void 0:P.getBoundingClientRect();if(!M)return;const I=(R.clientX-M.left-s.x)/s.scale,z=(R.clientY-M.top-s.y)/s.scale,H=I-p.x/s.scale,j=z-p.y/s.scale;v.current.style.left=`${H}px`,v.current.style.top=`${j}px`}if(c&&v.current){const M=R.clientX-w.startX,I=R.clientY-w.startY,z=M/s.scale,H=I/s.scale,j=Math.max(570,w.startWidth+z),J=Math.max(350,w.startHeight+H);v.current.style.width=`${j}px`,v.current.style.height=`${J}px`}},C=()=>{if(a&&v.current){l(!1);const R=parseFloat(v.current.style.left)||0,P=parseFloat(v.current.style.top)||0,M={x:Math.round(R),y:Math.round(P)};e(t.id,M)}if(c&&v.current){u(!1);const R=parseFloat(v.current.style.left)||0,P=parseFloat(v.current.style.top)||0,M=parseFloat(v.current.style.width)||t.width||200,I=parseFloat(v.current.style.height)||t.height||200,z={x:Math.round(R),y:Math.round(P)},H={width:Math.round(M),height:Math.round(I)};e(t.id,z,H)}};b.useEffect(()=>((a||c)&&(window.addEventListener("mousemove",E),window.addEventListener("mouseup",C)),()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",C)}),[a,c,p,w]);const T=R=>{if(R.preventDefault(),R.stopPropagation(),v.current){const P=parseFloat(v.current.style.width)||t.width||200,M=parseFloat(v.current.style.height)||t.height||200;y({startX:R.clientX,startY:R.clientY,startWidth:P,startHeight:M}),u(!0)}},A=async(R,P)=>{try{await n(R,P)}catch(M){console.error("Failed to update note:",M)}},k=async R=>{try{await r(R)}catch(P){console.error("Failed to delete note:",P)}};return m.jsxs("div",{ref:v,onMouseDown:S,className:"draggable-note-card shadow-lg rounded-lg flex flex-col overflow-hidden border relative",style:{position:"absolute",width:`${t.width||520}px`,height:d?"auto":`${t.height||300}px`,zIndex:a||c?1e3:t.z_index||1,cursor:a?"grabbing":c?"nw-resize":"grab",transition:a||c?"none":"box-shadow 0.2s, transform 0.1s",boxShadow:a||c?"0 8px 16px rgba(0,0,0,0.2)":"0 4px 6px rgba(0, 0, 0, 0.1)",transform:a||c?"scale(1.01)":"scale(1)",userSelect:"none",touchAction:"none"},children:[m.jsx(W$,{note:t,onUpdate:A,onDelete:k,existingCategories:i,onCollapsibleChange:R=>h(!R),updateCategory:o}),!d&&m.jsx("div",{className:"resize-handle absolute bottom-0 right-0 w-4 h-4 cursor-nw-resize",onMouseDown:T,style:{background:"linear-gradient(-45deg, transparent 40%, #ccc 40%, #ccc 60%, transparent 60%)",opacity:.6}})]})},yke=({whiteboard:t,onUpdate:e,onDelete:n,isCollapsed:r,onToggleCollapsed:i,updateCategory:s,addCategory:o})=>{const{toast:a}=to(),[l,c]=b.useState(!0),u=r!==void 0?!r:l,d=i||c,[h,p]=b.useState(!1),[x,w]=b.useState(t.title||"Untitled Whiteboard"),[y,v]=b.useState(!1),[S,E]=b.useState(!1),[C,T]=b.useState(!1),[A,k]=b.useState(""),R=b.useRef(null);Me.useEffect(()=>{w(t.title||"Untitled Whiteboard")},[t.title]);const P=b.useCallback(async()=>{x.trim()!==t.title&&await e(t.id,{title:x.trim()}),p(!1)},[x,t.title,t.id,e]),M=b.useCallback(async()=>{await n(t.id)},[t.id,n]),I=b.useCallback(async q=>{v(!0);try{await e(t.id,{color_value:q})}catch(Q){throw console.error("Failed to save whiteboard color:",Q),a({title:"Error updating color",description:"Could not update whiteboard color. Please try again.",variant:"destructive"}),Q}finally{v(!1)}},[t.id,e,a]),z=b.useCallback(async q=>{if(q==="__custom__"){T(!0);return}try{await e(t.id,{category:q}),E(!1),T(!1)}catch(Q){console.error("Failed to update whiteboard category:",Q),a({title:"Error updating category",description:"Could not update whiteboard category. Please try again.",variant:"destructive"})}},[t.id,e,a]),H=b.useCallback(async()=>{if(A.trim()!=="")try{await e(t.id,{category:A.trim()}),E(!1),T(!1),k("")}catch(q){console.error("Failed to add custom category:",q),a({title:"Error adding category",description:"Could not add custom category. Please try again.",variant:"destructive"})}else a({title:"Category cannot be empty",description:"Please enter a valid category name",variant:"destructive"})},[A,t.id,e,a]),j=b.useCallback(q=>{console.log("Canvas changed:",q)},[]),J=b.useCallback(async q=>{var Q;try{console.log(" WhiteboardCardLogic: Saving canvas data:",{whiteboardId:t.id,pathCount:((Q=q.canvas_data)==null?void 0:Q.length)||0,dataType:typeof q.canvas_data,isArray:Array.isArray(q.canvas_data),dataPreview:JSON.stringify(q.canvas_data).substring(0,200)}),await e(t.id,{canvas_data:JSON.stringify(q.canvas_data),updated_at:q.updated_at}),console.log(" WhiteboardCardLogic: Canvas save completed successfully")}catch(O){console.error("Failed to save canvas data:",O),a({title:"Error saving whiteboard",description:"Could not save your drawing. Please try again.",variant:"destructive"})}},[t.id,e,a]);return{whiteboardTitle:t.title||"Untitled Whiteboard",isCollapsibleOpen:u,setIsCollapsibleOpen:d,isEditing:h,setIsEditing:p,editTitle:x,setEditTitle:w,handleEditTitle:P,handleDeleteWhiteboard:M,handleSaveWhiteboardColor:I,isSavingColor:y,isEditingCategory:S,setIsEditingCategory:E,showNewCategoryInput:C,setShowNewCategoryInput:T,newCategory:A,setNewCategory:k,handleEditCategory:z,handleAddCustomCategory:H,handleCanvasChange:j,handleCanvasSave:J,titleEditRef:R}};function WO(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(c){n(c);return}a.done?e(l):Promise.resolve(l).then(r,i)}function xke(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(l){WO(s,r,i,o,a,"next",l)}function a(l){WO(s,r,i,o,a,"throw",l)}o(void 0)})}}function Xu(){return Xu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xu.apply(this,arguments)}var G$={exports:{}};(function(t){var e=function(n){var r=Object.prototype,i=r.hasOwnProperty,s,o=typeof Symbol=="function"?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(O,F,D){return Object.defineProperty(O,F,{value:D,enumerable:!0,configurable:!0,writable:!0}),O[F]}try{u({},"")}catch{u=function(F,D,ee){return F[D]=ee}}function d(O,F,D,ee){var W=F&&F.prototype instanceof S?F:S,B=Object.create(W.prototype),K=new J(ee||[]);return B._invoke=I(O,D,K),B}n.wrap=d;function h(O,F,D){try{return{type:"normal",arg:O.call(F,D)}}catch(ee){return{type:"throw",arg:ee}}}var p="suspendedStart",x="suspendedYield",w="executing",y="completed",v={};function S(){}function E(){}function C(){}var T={};u(T,a,function(){return this});var A=Object.getPrototypeOf,k=A&&A(A(q([])));k&&k!==r&&i.call(k,a)&&(T=k);var R=C.prototype=S.prototype=Object.create(T);E.prototype=C,u(R,"constructor",C),u(C,"constructor",E),E.displayName=u(C,c,"GeneratorFunction");function P(O){["next","throw","return"].forEach(function(F){u(O,F,function(D){return this._invoke(F,D)})})}n.isGeneratorFunction=function(O){var F=typeof O=="function"&&O.constructor;return F?F===E||(F.displayName||F.name)==="GeneratorFunction":!1},n.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,C):(O.__proto__=C,u(O,c,"GeneratorFunction")),O.prototype=Object.create(R),O},n.awrap=function(O){return{__await:O}};function M(O,F){function D(B,K,ie,oe){var Z=h(O[B],O,K);if(Z.type==="throw")oe(Z.arg);else{var pe=Z.arg,ye=pe.value;return ye&&typeof ye=="object"&&i.call(ye,"__await")?F.resolve(ye.__await).then(function(ge){D("next",ge,ie,oe)},function(ge){D("throw",ge,ie,oe)}):F.resolve(ye).then(function(ge){pe.value=ge,ie(pe)},function(ge){return D("throw",ge,ie,oe)})}}var ee;function W(B,K){function ie(){return new F(function(oe,Z){D(B,K,oe,Z)})}return ee=ee?ee.then(ie,ie):ie()}this._invoke=W}P(M.prototype),u(M.prototype,l,function(){return this}),n.AsyncIterator=M,n.async=function(O,F,D,ee,W){W===void 0&&(W=Promise);var B=new M(d(O,F,D,ee),W);return n.isGeneratorFunction(F)?B:B.next().then(function(K){return K.done?K.value:B.next()})};function I(O,F,D){var ee=p;return function(B,K){if(ee===w)throw new Error("Generator is already running");if(ee===y){if(B==="throw")throw K;return Q()}for(D.method=B,D.arg=K;;){var ie=D.delegate;if(ie){var oe=z(ie,D);if(oe){if(oe===v)continue;return oe}}if(D.method==="next")D.sent=D._sent=D.arg;else if(D.method==="throw"){if(ee===p)throw ee=y,D.arg;D.dispatchException(D.arg)}else D.method==="return"&&D.abrupt("return",D.arg);ee=w;var Z=h(O,F,D);if(Z.type==="normal"){if(ee=D.done?y:x,Z.arg===v)continue;return{value:Z.arg,done:D.done}}else Z.type==="throw"&&(ee=y,D.method="throw",D.arg=Z.arg)}}}function z(O,F){var D=O.iterator[F.method];if(D===s){if(F.delegate=null,F.method==="throw"){if(O.iterator.return&&(F.method="return",F.arg=s,z(O,F),F.method==="throw"))return v;F.method="throw",F.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var ee=h(D,O.iterator,F.arg);if(ee.type==="throw")return F.method="throw",F.arg=ee.arg,F.delegate=null,v;var W=ee.arg;if(!W)return F.method="throw",F.arg=new TypeError("iterator result is not an object"),F.delegate=null,v;if(W.done)F[O.resultName]=W.value,F.next=O.nextLoc,F.method!=="return"&&(F.method="next",F.arg=s);else return W;return F.delegate=null,v}P(R),u(R,c,"Generator"),u(R,a,function(){return this}),u(R,"toString",function(){return"[object Generator]"});function H(O){var F={tryLoc:O[0]};1 in O&&(F.catchLoc=O[1]),2 in O&&(F.finallyLoc=O[2],F.afterLoc=O[3]),this.tryEntries.push(F)}function j(O){var F=O.completion||{};F.type="normal",delete F.arg,O.completion=F}function J(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(H,this),this.reset(!0)}n.keys=function(O){var F=[];for(var D in O)F.push(D);return F.reverse(),function ee(){for(;F.length;){var W=F.pop();if(W in O)return ee.value=W,ee.done=!1,ee}return ee.done=!0,ee}};function q(O){if(O){var F=O[a];if(F)return F.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var D=-1,ee=function W(){for(;++D<O.length;)if(i.call(O,D))return W.value=O[D],W.done=!1,W;return W.value=s,W.done=!0,W};return ee.next=ee}}return{next:Q}}n.values=q;function Q(){return{value:s,done:!0}}return J.prototype={constructor:J,reset:function(O){if(this.prev=0,this.next=0,this.sent=this._sent=s,this.done=!1,this.delegate=null,this.method="next",this.arg=s,this.tryEntries.forEach(j),!O)for(var F in this)F.charAt(0)==="t"&&i.call(this,F)&&!isNaN(+F.slice(1))&&(this[F]=s)},stop:function(){this.done=!0;var O=this.tryEntries[0],F=O.completion;if(F.type==="throw")throw F.arg;return this.rval},dispatchException:function(O){if(this.done)throw O;var F=this;function D(oe,Z){return B.type="throw",B.arg=O,F.next=oe,Z&&(F.method="next",F.arg=s),!!Z}for(var ee=this.tryEntries.length-1;ee>=0;--ee){var W=this.tryEntries[ee],B=W.completion;if(W.tryLoc==="root")return D("end");if(W.tryLoc<=this.prev){var K=i.call(W,"catchLoc"),ie=i.call(W,"finallyLoc");if(K&&ie){if(this.prev<W.catchLoc)return D(W.catchLoc,!0);if(this.prev<W.finallyLoc)return D(W.finallyLoc)}else if(K){if(this.prev<W.catchLoc)return D(W.catchLoc,!0)}else if(ie){if(this.prev<W.finallyLoc)return D(W.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(O,F){for(var D=this.tryEntries.length-1;D>=0;--D){var ee=this.tryEntries[D];if(ee.tryLoc<=this.prev&&i.call(ee,"finallyLoc")&&this.prev<ee.finallyLoc){var W=ee;break}}W&&(O==="break"||O==="continue")&&W.tryLoc<=F&&F<=W.finallyLoc&&(W=null);var B=W?W.completion:{};return B.type=O,B.arg=F,W?(this.method="next",this.next=W.finallyLoc,v):this.complete(B)},complete:function(O,F){if(O.type==="throw")throw O.arg;return O.type==="break"||O.type==="continue"?this.next=O.arg:O.type==="return"?(this.rval=this.arg=O.arg,this.method="return",this.next="end"):O.type==="normal"&&F&&(this.next=F),v},finish:function(O){for(var F=this.tryEntries.length-1;F>=0;--F){var D=this.tryEntries[F];if(D.finallyLoc===O)return this.complete(D.completion,D.afterLoc),j(D),v}},catch:function(O){for(var F=this.tryEntries.length-1;F>=0;--F){var D=this.tryEntries[F];if(D.tryLoc===O){var ee=D.completion;if(ee.type==="throw"){var W=ee.arg;j(D)}return W}}throw new Error("illegal catch attempt")},delegateYield:function(O,F,D){return this.delegate={iterator:q(O),resultName:F,nextLoc:D},this.method==="next"&&(this.arg=s),v}},n}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(G$);var GO=G$.exports,X$=function(e){var n=e.paths,r=e.id,i=e.strokeWidth,s=e.strokeColor,o=e.command,a=o===void 0?q$:o;if(n.length===1){var l=n[0],c=l.x,u=l.y,d=i/2;return b.createElement("circle",{key:r,id:r,cx:c,cy:u,r:d,stroke:s,fill:s})}var h=n.reduce(function(p,x,w,y){return w===0?"M "+x.x+","+x.y:p+" "+a(x,w,y)},"");return b.createElement("path",{key:r,id:r,d:h,fill:"none",strokeLinecap:"round",stroke:s,strokeWidth:i})},wke=function(e,n){var r=n.x-e.x,i=n.y-e.y;return{length:Math.sqrt(Math.pow(r,2)+Math.pow(i,2)),angle:Math.atan2(i,r)}},Ry=function(e){var n=e.current,r=e.next,i=e.previous,s=e.reverse,o=i||n,a=r||n,l=.2,c=wke(o,a),u=c.angle+(s?Math.PI:0),d=c.length*l,h=n.x+Math.cos(u)*d,p=n.y+Math.sin(u)*d;return[h,p]},q$=function(e,n,r){var i=null,s=null;switch(n){case 0:var o=Ry({current:e});i=o[0],s=o[1];break;case 1:var a=Ry({current:r[n-1],next:e});i=a[0],s=a[1];break;default:var l=Ry({current:r[n-1],previous:r[n-2],next:e});i=l[0],s=l[1];break}var c=Ry({current:e,previous:r[n-1],next:r[n+1],reverse:!0}),u=c[0],d=c[1];return"C "+i+","+s+" "+u+","+d+" "+e.x+", "+e.y},bke=function(e){var n=e.id,r=e.paths;return b.createElement(b.Fragment,null,r.map(function(i,s){return b.createElement(X$,{key:n+"__"+s,paths:i.paths,id:n+"__"+s,strokeWidth:i.strokeWidth,strokeColor:i.strokeColor,command:q$})}))},XO=function(e){return new Promise(function(n,r){var i=new Image;i.addEventListener("load",function(){i.width>0&&n(i),r("Image not found")}),i.addEventListener("error",function(s){return r(s)}),i.src=e,i.setAttribute("crossorigin","anonymous")})};function qO(t){var e,n=(e=t.firstChild)==null?void 0:e.cloneNode(!0),r=t.offsetWidth,i=t.offsetHeight;return n.setAttribute("viewBox","0 0 "+r+" "+i),n.setAttribute("width",r.toString()),n.setAttribute("height",i.toString()),{svgCanvas:n,width:r,height:i}}var Ske=b.forwardRef(function(t,e){var n=t.paths,r=t.isDrawing,i=t.onPointerDown,s=t.onPointerMove,o=t.onPointerUp,a=t.id,l=a===void 0?"react-sketch-canvas":a,c=t.width,u=c===void 0?"100%":c,d=t.height,h=d===void 0?"100%":d,p=t.className,x=p===void 0?"react-sketch-canvas":p,w=t.canvasColor,y=w===void 0?"red":w,v=t.backgroundImage,S=v===void 0?"":v,E=t.exportWithBackgroundImage,C=E===void 0?!1:E,T=t.preserveBackgroundImageAspectRatio,A=T===void 0?"none":T,k=t.allowOnlyPointerType,R=k===void 0?"all":k,P=t.style,M=P===void 0?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:P,I=t.svgStyle,z=I===void 0?{}:I,H=b.useRef(null),j=function(W){var B,K,ie,oe=(B=H.current)==null?void 0:B.getBoundingClientRect(),Z=(K=window.scrollX)!=null?K:0,pe=(ie=window.scrollY)!=null?ie:0;if(!oe)return{x:0,y:0};var ye={x:W.pageX-oe.left-Z,y:W.pageY-oe.top-pe};return ye},J=function(W){if(!(R!=="all"&&W.pointerType!==R)&&!(W.pointerType==="mouse"&&W.button!==0)){var B=j(W);i(B)}},q=function(W){if(r&&!(R!=="all"&&W.pointerType!==R)){var B=j(W);s(B)}},Q=function(W){W.pointerType==="mouse"&&W.button!==0||R!=="all"&&W.pointerType!==R||o()};b.useImperativeHandle(e,function(){return{exportImage:function(W){return new Promise(function(){var B=xke(GO.mark(function K(ie,oe){var Z,pe,ye,ge,je,We,it,te;return GO.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(Be.prev=0,Z=H.current,Z){Be.next=4;break}throw Error("Canvas not rendered yet");case 4:return pe=qO(Z),ye=pe.svgCanvas,ge=pe.width,je=pe.height,We="data:image/svg+xml;base64,"+btoa(ye.outerHTML),Be.next=8,XO(We);case 8:if(Be.t0=Be.sent,it=[Be.t0],!C){Be.next=21;break}return Be.prev=11,Be.next=14,XO(S);case 14:te=Be.sent,it.push(te),Be.next=21;break;case 18:Be.prev=18,Be.t1=Be.catch(11),console.warn("exportWithBackgroundImage props is set without a valid background image URL. This option is ignored");case 21:Promise.all(it).then(function(ut){var Xe=document.createElement("canvas");Xe.setAttribute("width",ge.toString()),Xe.setAttribute("height",je.toString());var wt=Xe.getContext("2d");if(!wt)throw Error("Canvas not rendered yet");ut.reverse().forEach(function(Ae){wt.drawImage(Ae,0,0)}),ie(Xe.toDataURL("image/"+W))}).catch(function(ut){throw ut}),Be.next=27;break;case 24:Be.prev=24,Be.t2=Be.catch(0),oe(Be.t2);case 27:case"end":return Be.stop()}},K,null,[[0,24],[11,18]])}));return function(K,ie){return B.apply(this,arguments)}}())},exportSvg:function(){return new Promise(function(W,B){try{var K,ie=(K=H.current)!=null?K:null;if(ie!==null){var oe,Z,pe=qO(ie),ye=pe.svgCanvas;if(C){W(ye.outerHTML);return}(oe=ye.querySelector("#"+l+"__background"))==null||oe.remove(),(Z=ye.querySelector("#"+l+"__canvas-background"))==null||Z.setAttribute("fill",y),W(ye.outerHTML)}B(new Error("Canvas not loaded"))}catch(ge){B(ge)}})}}}),b.useEffect(function(){return document.addEventListener("pointerup",Q),function(){document.removeEventListener("pointerup",Q)}},[Q]);var O=n.filter(function(ee){return!ee.drawMode}),F=0,D=n.reduce(function(ee,W){return W.drawMode?(ee[F]===void 0&&(ee[F]=[]),ee[F].push(W),ee):(F+=1,ee)},[[]]);return b.createElement("div",{role:"presentation",ref:H,className:x,style:Xu({touchAction:"none",width:u,height:h},M),"touch-action":"none",onPointerDown:J,onPointerMove:q,onPointerUp:Q},b.createElement("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:Xu({width:"100%",height:"100%"},z),id:l},b.createElement("g",{id:l+"__eraser-stroke-group",display:"none"},b.createElement("rect",{id:l+"__mask-background",x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),O.map(function(ee,W){return b.createElement(X$,{key:l+"__eraser-"+W,id:l+"__eraser-"+W,paths:ee.paths,strokeColor:"#000000",strokeWidth:ee.strokeWidth})})),b.createElement("defs",null,S&&b.createElement("pattern",{id:l+"__background",x:"0",y:"0",width:"100%",height:"100%",patternUnits:"userSpaceOnUse"},b.createElement("image",{x:"0",y:"0",width:"100%",height:"100%",xlinkHref:S,preserveAspectRatio:A})),O.map(function(ee,W){return b.createElement("mask",{id:l+"__eraser-mask-"+W,key:l+"__eraser-mask-"+W,maskUnits:"userSpaceOnUse"},b.createElement("use",{href:"#"+l+"__mask-background"}),Array.from({length:O.length-W},function(B,K){return K+W}).map(function(B){return b.createElement("use",{key:B.toString(),href:"#"+l+"__eraser-"+B.toString()})}))})),b.createElement("g",{id:l+"__canvas-background-group"},b.createElement("rect",{id:l+"__canvas-background",x:"0",y:"0",width:"100%",height:"100%",fill:S?"url(#"+l+"__background)":y})),D.map(function(ee,W){return b.createElement("g",{id:l+"__stroke-group-"+W,key:l+"__stroke-group-"+W,mask:"url(#"+l+"__eraser-mask-"+W+")"},b.createElement(bke,{id:l,paths:ee}))})))}),_ke=b.forwardRef(function(t,e){var n=t.id,r=n===void 0?"react-sketch-canvas":n,i=t.width,s=i===void 0?"100%":i,o=t.height,a=o===void 0?"100%":o,l=t.className,c=l===void 0?"":l,u=t.canvasColor,d=u===void 0?"white":u,h=t.strokeColor,p=h===void 0?"red":h,x=t.backgroundImage,w=x===void 0?"":x,y=t.exportWithBackgroundImage,v=y===void 0?!1:y,S=t.preserveBackgroundImageAspectRatio,E=S===void 0?"none":S,C=t.strokeWidth,T=C===void 0?4:C,A=t.eraserWidth,k=A===void 0?8:A,R=t.allowOnlyPointerType,P=R===void 0?"all":R,M=t.style,I=M===void 0?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:M,z=t.svgStyle,H=z===void 0?{}:z,j=t.onChange,J=j===void 0?function(Ae){}:j,q=t.onStroke,Q=q===void 0?function(Ae,Pe){}:q,O=t.withTimestamp,F=O===void 0?!1:O,D=b.createRef(),ee=b.useState(!0),W=ee[0],B=ee[1],K=b.useState(!1),ie=K[0],oe=K[1],Z=b.useState([]),pe=Z[0],ye=Z[1],ge=b.useState([]),je=ge[0],We=ge[1],it=b.useState([]),te=it[0],pt=it[1],Be=b.useCallback(function(){var Ae,Pe,ot=(Ae=(Pe=te.slice(-1))==null?void 0:Pe[0])!=null?Ae:null;if(ot===null){console.warn("No stroke found!");return}Q(ot,!ot.drawMode)},[ie]);b.useEffect(function(){Be()},[ie]),b.useEffect(function(){J(te)},[te]),b.useImperativeHandle(e,function(){return{eraseMode:function(Pe){B(!Pe)},clearCanvas:function(){ye([].concat(te)),pt([])},undo:function(){if(pe.length!==0){pt([].concat(pe)),ye([]);return}We(function(Pe){return[].concat(Pe,te.slice(-1))}),pt(function(Pe){return Pe.slice(0,-1)})},redo:function(){je.length!==0&&(pt(function(Pe){return[].concat(Pe,je.slice(-1))}),We(function(Pe){return Pe.slice(0,-1)}))},exportImage:function(Pe){var ot,Y=(ot=D.current)==null?void 0:ot.exportImage;if(Y)return Y(Pe);throw Error("Export function called before canvas loaded")},exportSvg:function(){return new Promise(function(Pe,ot){var Y,L=(Y=D.current)==null?void 0:Y.exportSvg;L?L().then(function(ne){Pe(ne)}).catch(function(ne){ot(ne)}):ot(Error("Export function called before canvas loaded"))})},exportPaths:function(){return new Promise(function(Pe,ot){try{Pe(te)}catch(Y){ot(Y)}})},loadPaths:function(Pe){pt(function(ot){return[].concat(ot,Pe)})},getSketchingTime:function(){return new Promise(function(Pe,ot){F||ot(new Error("Set 'withTimestamp' prop to get sketching time"));try{var Y=te.reduce(function(L,ne){var X,se,ae=(X=ne.startTimestamp)!=null?X:0,Ce=(se=ne.endTimestamp)!=null?se:0;return L+(Ce-ae)},0);Pe(Y)}catch(L){ot(L)}})},resetCanvas:function(){ye([]),We([]),pt([])}}});var ut=function(Pe){oe(!0),We([]);var ot={drawMode:W,strokeColor:W?p:"#000000",strokeWidth:W?T:k,paths:[Pe]};F&&(ot=Xu({},ot,{startTimestamp:Date.now(),endTimestamp:0})),pt(function(Y){return[].concat(Y,[ot])})},Xe=function(Pe){if(ie){var ot=te.slice(-1)[0],Y=Xu({},ot,{paths:[].concat(ot.paths,[Pe])});pt(function(L){return[].concat(L.slice(0,-1),[Y])})}},wt=function(){var Pe,ot;if(ie&&(oe(!1),!!F)){var Y=(Pe=(ot=te.slice(-1))==null?void 0:ot[0])!=null?Pe:null;if(Y!==null){var L=Xu({},Y,{endTimestamp:Date.now()});pt(function(ne){return[].concat(ne.slice(0,-1),[L])})}}};return b.createElement(Ske,{ref:D,id:r,width:s,height:a,className:c,canvasColor:d,backgroundImage:w,exportWithBackgroundImage:v,preserveBackgroundImageAspectRatio:E,allowOnlyPointerType:P,style:I,svgStyle:H,paths:te,isDrawing:ie,onPointerDown:ut,onPointerMove:Xe,onPointerUp:wt})}),K$=["PageUp","PageDown"],Y$=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],J$={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},zh="Slider",[bM,Eke,Cke]=rg(zh),[Q$,BNe]=es(zh,[Cke]),[Mke,Yw]=Q$(zh),Z$=b.forwardRef((t,e)=>{const{name:n,min:r=0,max:i=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[r],value:u,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:p=!1,form:x,...w}=t,y=b.useRef(new Set),v=b.useRef(0),E=o==="horizontal"?Tke:Ake,[C=[],T]=Cs({prop:u,defaultProp:c,onChange:I=>{var H;(H=[...y.current][v.current])==null||H.focus(),d(I)}}),A=b.useRef(C);function k(I){const z=Dke(C,I);M(I,z)}function R(I){M(I,v.current)}function P(){const I=A.current[v.current];C[v.current]!==I&&h(C)}function M(I,z,{commit:H}={commit:!1}){const j=Fke(s),J=Uke(Math.round((I-r)/s)*s+r,j),q=Jx(J,[r,i]);T((Q=[])=>{const O=Nke(Q,q,z);if(Oke(O,l*s)){v.current=O.indexOf(q);const F=String(O)!==String(Q);return F&&H&&h(O),F?O:Q}else return Q})}return m.jsx(Mke,{scope:t.__scopeSlider,name:n,disabled:a,min:r,max:i,valueIndexToChangeRef:v,thumbs:y.current,values:C,orientation:o,form:x,children:m.jsx(bM.Provider,{scope:t.__scopeSlider,children:m.jsx(bM.Slot,{scope:t.__scopeSlider,children:m.jsx(E,{"aria-disabled":a,"data-disabled":a?"":void 0,...w,ref:e,onPointerDown:rt(w.onPointerDown,()=>{a||(A.current=C)}),min:r,max:i,inverted:p,onSlideStart:a?void 0:k,onSlideMove:a?void 0:R,onSlideEnd:a?void 0:P,onHomeKeyDown:()=>!a&&M(r,0,{commit:!0}),onEndKeyDown:()=>!a&&M(i,C.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:z})=>{if(!a){const J=K$.includes(I.key)||I.shiftKey&&Y$.includes(I.key)?10:1,q=v.current,Q=C[q],O=s*J*z;M(Q+O,q,{commit:!0})}}})})})})});Z$.displayName=zh;var[eW,tW]=Q$(zh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Tke=b.forwardRef((t,e)=>{const{min:n,max:r,dir:i,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,h]=b.useState(null),p=Ht(e,E=>h(E)),x=b.useRef(void 0),w=dg(i),y=w==="ltr",v=y&&!s||!y&&s;function S(E){const C=x.current||d.getBoundingClientRect(),T=[0,C.width],k=OR(T,v?[n,r]:[r,n]);return x.current=C,k(E-C.left)}return m.jsx(eW,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:m.jsx(nW,{dir:w,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=S(E.clientX);o==null||o(C)},onSlideMove:E=>{const C=S(E.clientX);a==null||a(C)},onSlideEnd:()=>{x.current=void 0,l==null||l()},onStepKeyDown:E=>{const T=J$[v?"from-left":"from-right"].includes(E.key);c==null||c({event:E,direction:T?-1:1})}})})}),Ake=b.forwardRef((t,e)=>{const{min:n,max:r,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=b.useRef(null),d=Ht(e,u),h=b.useRef(void 0),p=!i;function x(w){const y=h.current||u.current.getBoundingClientRect(),v=[0,y.height],E=OR(v,p?[r,n]:[n,r]);return h.current=y,E(w-y.top)}return m.jsx(eW,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:m.jsx(nW,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const y=x(w.clientY);s==null||s(y)},onSlideMove:w=>{const y=x(w.clientY);o==null||o(y)},onSlideEnd:()=>{h.current=void 0,a==null||a()},onStepKeyDown:w=>{const v=J$[p?"from-bottom":"from-top"].includes(w.key);l==null||l({event:w,direction:v?-1:1})}})})}),nW=b.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=Yw(zh,n);return m.jsx(xt.span,{...c,ref:e,onKeyDown:rt(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):K$.concat(Y$).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:rt(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(h)?h.focus():r(d)}),onPointerMove:rt(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:rt(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),s(d))})})}),rW="SliderTrack",iW=b.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Yw(rW,n);return m.jsx(xt.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:e})});iW.displayName=rW;var SM="SliderRange",sW=b.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,i=Yw(SM,n),s=tW(SM,n),o=b.useRef(null),a=Ht(e,o),l=i.values.length,c=i.values.map(h=>lW(h,i.min,i.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return m.jsx(xt.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});sW.displayName=SM;var _M="SliderThumb",oW=b.forwardRef((t,e)=>{const n=Eke(t.__scopeSlider),[r,i]=b.useState(null),s=Ht(e,a=>i(a)),o=b.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return m.jsx(Rke,{...t,ref:s,index:o})}),Rke=b.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:i,...s}=t,o=Yw(_M,n),a=tW(_M,n),[l,c]=b.useState(null),u=Ht(e,S=>c(S)),d=l?o.form||!!l.closest("form"):!0,h=zT(l),p=o.values[r],x=p===void 0?0:lW(p,o.min,o.max),w=Pke(r,o.values.length),y=h==null?void 0:h[a.size],v=y?Ike(y,x,a.direction):0;return b.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),m.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${x}% + ${v}px)`},children:[m.jsx(bM.ItemSlot,{scope:t.__scopeSlider,children:m.jsx(xt.span,{role:"slider","aria-label":t["aria-label"]||w,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:rt(t.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),d&&m.jsx(aW,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},r)]})});oW.displayName=_M;var kke="RadioBubbleInput",aW=b.forwardRef(({__scopeSlider:t,value:e,...n},r)=>{const i=b.useRef(null),s=Ht(i,r),o=QT(e);return b.useEffect(()=>{const a=i.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),m.jsx(xt.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});aW.displayName=kke;function Nke(t=[],e,n){const r=[...t];return r[n]=e,r.sort((i,s)=>i-s)}function lW(t,e,n){const s=100/(n-e)*(t-e);return Jx(s,[0,100])}function Pke(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Dke(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),r=Math.min(...n);return n.indexOf(r)}function Ike(t,e,n){const r=t/2,s=OR([0,50],[0,r]);return(r-s(e)*n)*n}function Lke(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Oke(t,e){if(e>0){const n=Lke(t);return Math.min(...n)>=e}return!0}function OR(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function Fke(t){return(String(t).split(".")[1]||"").length}function Uke(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var cW=Z$,Bke=iW,zke=sW,jke=oW;const uW=b.forwardRef(({className:t,...e},n)=>m.jsxs(cW,{ref:n,className:_t("relative flex w-full touch-none select-none items-center",t),...e,children:[m.jsx(Bke,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:m.jsx(zke,{className:"absolute h-full bg-primary"})}),m.jsx(jke,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));uW.displayName=cW.displayName;var b0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */b0.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",d=1,h=2,p=4,x=1,w=2,y=1,v=2,S=4,E=8,C=16,T=32,A=64,k=128,R=256,P=512,M=30,I="...",z=800,H=16,j=1,J=2,q=3,Q=1/0,O=9007199254740991,F=17976931348623157e292,D=NaN,ee=4294967295,W=ee-1,B=ee>>>1,K=[["ary",k],["bind",y],["bindKey",v],["curry",E],["curryRight",C],["flip",P],["partial",T],["partialRight",A],["rearg",R]],ie="[object Arguments]",oe="[object Array]",Z="[object AsyncFunction]",pe="[object Boolean]",ye="[object Date]",ge="[object DOMException]",je="[object Error]",We="[object Function]",it="[object GeneratorFunction]",te="[object Map]",pt="[object Number]",Be="[object Null]",ut="[object Object]",Xe="[object Promise]",wt="[object Proxy]",Ae="[object RegExp]",Pe="[object Set]",ot="[object String]",Y="[object Symbol]",L="[object Undefined]",ne="[object WeakMap]",X="[object WeakSet]",se="[object ArrayBuffer]",ae="[object DataView]",Ce="[object Float32Array]",Re="[object Float64Array]",ue="[object Int8Array]",Te="[object Int16Array]",de="[object Int32Array]",_e="[object Uint8Array]",Qe="[object Uint8ClampedArray]",Ye="[object Uint16Array]",qe="[object Uint32Array]",mt=/\b__p \+= '';/g,ce=/\b(__p \+=) '' \+/g,st=/(__e\(.*?\)|\b__t\)) \+\n'';/g,He=/&(?:amp|lt|gt|quot|#39);/g,et=/[&<>"']/g,De=RegExp(He.source),ke=RegExp(et.source),Ie=/<%-([\s\S]+?)%>/g,tt=/<%([\s\S]+?)%>/g,ft=/<%=([\s\S]+?)%>/g,Tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cn=/^\w*$/,qt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dn=/[\\^$.*+?()[\]{}|]/g,bn=RegExp(Dn.source),hn=/^\s+/,is=/\s/,Oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ze=/\{\n\/\* \[wrapped with (.+)\] \*/,Ve=/,? & /,gt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ct=/[()=,{}\[\]\/\s]/,pn=/\\(\\)?/g,Vn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Lr=/\w*$/,Cn=/^[-+]0x[0-9a-f]+$/i,io=/^0b[01]+$/i,xl=/^\[object .+?Constructor\]$/,Or=/^0o[0-7]+$/i,Qc=/^(?:0|[1-9]\d*)$/,$=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,he=/($^)/,xe=/['\n\r\u2028\u2029\\]/g,we="\\ud800-\\udfff",ve="\\u0300-\\u036f",Je="\\ufe20-\\ufe2f",ct="\\u20d0-\\u20ff",bt=ve+Je+ct,ht="\\u2700-\\u27bf",Dt="a-z\\xdf-\\xf6\\xf8-\\xff",Ot="\\xac\\xb1\\xd7\\xf7",At="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Zt="\\u2000-\\u206f",vn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",In="A-Z\\xc0-\\xd6\\xd8-\\xde",Un="\\ufe0e\\ufe0f",sn=Ot+At+Zt+vn,Rt="[']",pr="["+we+"]",dn="["+sn+"]",Jr="["+bt+"]",Ea="\\d+",gi="["+ht+"]",wl="["+Dt+"]",Tn="[^"+we+sn+Ea+ht+Dt+In+"]",Qr="\\ud83c[\\udffb-\\udfff]",Ii="(?:"+Jr+"|"+Qr+")",Sr="[^"+we+"]",_r="(?:\\ud83c[\\udde6-\\uddff]){2}",Zc="[\\ud800-\\udbff][\\udc00-\\udfff]",Li="["+In+"]",FR="\\u200d",UR="(?:"+wl+"|"+Tn+")",fW="(?:"+Li+"|"+Tn+")",BR="(?:"+Rt+"(?:d|ll|m|re|s|t|ve))?",zR="(?:"+Rt+"(?:D|LL|M|RE|S|T|VE))?",jR=Ii+"?",HR="["+Un+"]?",hW="(?:"+FR+"(?:"+[Sr,_r,Zc].join("|")+")"+HR+jR+")*",pW="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mW="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",VR=HR+jR+hW,gW="(?:"+[gi,_r,Zc].join("|")+")"+VR,vW="(?:"+[Sr+Jr+"?",Jr,_r,Zc,pr].join("|")+")",yW=RegExp(Rt,"g"),xW=RegExp(Jr,"g"),Jw=RegExp(Qr+"(?="+Qr+")|"+vW+VR,"g"),wW=RegExp([Li+"?"+wl+"+"+BR+"(?="+[dn,Li,"$"].join("|")+")",fW+"+"+zR+"(?="+[dn,Li+UR,"$"].join("|")+")",Li+"?"+UR+"+"+BR,Li+"+"+zR,mW,pW,Ea,gW].join("|"),"g"),bW=RegExp("["+FR+we+bt+Un+"]"),SW=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_W=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],EW=-1,Bn={};Bn[Ce]=Bn[Re]=Bn[ue]=Bn[Te]=Bn[de]=Bn[_e]=Bn[Qe]=Bn[Ye]=Bn[qe]=!0,Bn[ie]=Bn[oe]=Bn[se]=Bn[pe]=Bn[ae]=Bn[ye]=Bn[je]=Bn[We]=Bn[te]=Bn[pt]=Bn[ut]=Bn[Ae]=Bn[Pe]=Bn[ot]=Bn[ne]=!1;var Ln={};Ln[ie]=Ln[oe]=Ln[se]=Ln[ae]=Ln[pe]=Ln[ye]=Ln[Ce]=Ln[Re]=Ln[ue]=Ln[Te]=Ln[de]=Ln[te]=Ln[pt]=Ln[ut]=Ln[Ae]=Ln[Pe]=Ln[ot]=Ln[Y]=Ln[_e]=Ln[Qe]=Ln[Ye]=Ln[qe]=!0,Ln[je]=Ln[We]=Ln[ne]=!1;var CW={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},MW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},TW={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},AW={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},RW=parseFloat,kW=parseInt,$R=typeof qa=="object"&&qa&&qa.Object===Object&&qa,NW=typeof self=="object"&&self&&self.Object===Object&&self,Fr=$R||NW||Function("return this")(),Qw=e&&!e.nodeType&&e,eu=Qw&&!0&&t&&!t.nodeType&&t,WR=eu&&eu.exports===Qw,Zw=WR&&$R.process,Rs=function(){try{var fe=eu&&eu.require&&eu.require("util").types;return fe||Zw&&Zw.binding&&Zw.binding("util")}catch{}}(),GR=Rs&&Rs.isArrayBuffer,XR=Rs&&Rs.isDate,qR=Rs&&Rs.isMap,KR=Rs&&Rs.isRegExp,YR=Rs&&Rs.isSet,JR=Rs&&Rs.isTypedArray;function ss(fe,Ne,Se){switch(Se.length){case 0:return fe.call(Ne);case 1:return fe.call(Ne,Se[0]);case 2:return fe.call(Ne,Se[0],Se[1]);case 3:return fe.call(Ne,Se[0],Se[1],Se[2])}return fe.apply(Ne,Se)}function PW(fe,Ne,Se,vt){for(var Ut=-1,yn=fe==null?0:fe.length;++Ut<yn;){var mr=fe[Ut];Ne(vt,mr,Se(mr),fe)}return vt}function ks(fe,Ne){for(var Se=-1,vt=fe==null?0:fe.length;++Se<vt&&Ne(fe[Se],Se,fe)!==!1;);return fe}function DW(fe,Ne){for(var Se=fe==null?0:fe.length;Se--&&Ne(fe[Se],Se,fe)!==!1;);return fe}function QR(fe,Ne){for(var Se=-1,vt=fe==null?0:fe.length;++Se<vt;)if(!Ne(fe[Se],Se,fe))return!1;return!0}function bl(fe,Ne){for(var Se=-1,vt=fe==null?0:fe.length,Ut=0,yn=[];++Se<vt;){var mr=fe[Se];Ne(mr,Se,fe)&&(yn[Ut++]=mr)}return yn}function Lg(fe,Ne){var Se=fe==null?0:fe.length;return!!Se&&wd(fe,Ne,0)>-1}function eb(fe,Ne,Se){for(var vt=-1,Ut=fe==null?0:fe.length;++vt<Ut;)if(Se(Ne,fe[vt]))return!0;return!1}function $n(fe,Ne){for(var Se=-1,vt=fe==null?0:fe.length,Ut=Array(vt);++Se<vt;)Ut[Se]=Ne(fe[Se],Se,fe);return Ut}function Sl(fe,Ne){for(var Se=-1,vt=Ne.length,Ut=fe.length;++Se<vt;)fe[Ut+Se]=Ne[Se];return fe}function tb(fe,Ne,Se,vt){var Ut=-1,yn=fe==null?0:fe.length;for(vt&&yn&&(Se=fe[++Ut]);++Ut<yn;)Se=Ne(Se,fe[Ut],Ut,fe);return Se}function IW(fe,Ne,Se,vt){var Ut=fe==null?0:fe.length;for(vt&&Ut&&(Se=fe[--Ut]);Ut--;)Se=Ne(Se,fe[Ut],Ut,fe);return Se}function nb(fe,Ne){for(var Se=-1,vt=fe==null?0:fe.length;++Se<vt;)if(Ne(fe[Se],Se,fe))return!0;return!1}var LW=rb("length");function OW(fe){return fe.split("")}function FW(fe){return fe.match(gt)||[]}function ZR(fe,Ne,Se){var vt;return Se(fe,function(Ut,yn,mr){if(Ne(Ut,yn,mr))return vt=yn,!1}),vt}function Og(fe,Ne,Se,vt){for(var Ut=fe.length,yn=Se+(vt?1:-1);vt?yn--:++yn<Ut;)if(Ne(fe[yn],yn,fe))return yn;return-1}function wd(fe,Ne,Se){return Ne===Ne?KW(fe,Ne,Se):Og(fe,ek,Se)}function UW(fe,Ne,Se,vt){for(var Ut=Se-1,yn=fe.length;++Ut<yn;)if(vt(fe[Ut],Ne))return Ut;return-1}function ek(fe){return fe!==fe}function tk(fe,Ne){var Se=fe==null?0:fe.length;return Se?sb(fe,Ne)/Se:D}function rb(fe){return function(Ne){return Ne==null?n:Ne[fe]}}function ib(fe){return function(Ne){return fe==null?n:fe[Ne]}}function nk(fe,Ne,Se,vt,Ut){return Ut(fe,function(yn,mr,An){Se=vt?(vt=!1,yn):Ne(Se,yn,mr,An)}),Se}function BW(fe,Ne){var Se=fe.length;for(fe.sort(Ne);Se--;)fe[Se]=fe[Se].value;return fe}function sb(fe,Ne){for(var Se,vt=-1,Ut=fe.length;++vt<Ut;){var yn=Ne(fe[vt]);yn!==n&&(Se=Se===n?yn:Se+yn)}return Se}function ob(fe,Ne){for(var Se=-1,vt=Array(fe);++Se<fe;)vt[Se]=Ne(Se);return vt}function zW(fe,Ne){return $n(Ne,function(Se){return[Se,fe[Se]]})}function rk(fe){return fe&&fe.slice(0,ak(fe)+1).replace(hn,"")}function as(fe){return function(Ne){return fe(Ne)}}function ab(fe,Ne){return $n(Ne,function(Se){return fe[Se]})}function jh(fe,Ne){return fe.has(Ne)}function ik(fe,Ne){for(var Se=-1,vt=fe.length;++Se<vt&&wd(Ne,fe[Se],0)>-1;);return Se}function sk(fe,Ne){for(var Se=fe.length;Se--&&wd(Ne,fe[Se],0)>-1;);return Se}function jW(fe,Ne){for(var Se=fe.length,vt=0;Se--;)fe[Se]===Ne&&++vt;return vt}var HW=ib(CW),VW=ib(MW);function $W(fe){return"\\"+AW[fe]}function WW(fe,Ne){return fe==null?n:fe[Ne]}function bd(fe){return bW.test(fe)}function GW(fe){return SW.test(fe)}function XW(fe){for(var Ne,Se=[];!(Ne=fe.next()).done;)Se.push(Ne.value);return Se}function lb(fe){var Ne=-1,Se=Array(fe.size);return fe.forEach(function(vt,Ut){Se[++Ne]=[Ut,vt]}),Se}function ok(fe,Ne){return function(Se){return fe(Ne(Se))}}function _l(fe,Ne){for(var Se=-1,vt=fe.length,Ut=0,yn=[];++Se<vt;){var mr=fe[Se];(mr===Ne||mr===u)&&(fe[Se]=u,yn[Ut++]=Se)}return yn}function Fg(fe){var Ne=-1,Se=Array(fe.size);return fe.forEach(function(vt){Se[++Ne]=vt}),Se}function qW(fe){var Ne=-1,Se=Array(fe.size);return fe.forEach(function(vt){Se[++Ne]=[vt,vt]}),Se}function KW(fe,Ne,Se){for(var vt=Se-1,Ut=fe.length;++vt<Ut;)if(fe[vt]===Ne)return vt;return-1}function YW(fe,Ne,Se){for(var vt=Se+1;vt--;)if(fe[vt]===Ne)return vt;return vt}function Sd(fe){return bd(fe)?QW(fe):LW(fe)}function so(fe){return bd(fe)?ZW(fe):OW(fe)}function ak(fe){for(var Ne=fe.length;Ne--&&is.test(fe.charAt(Ne)););return Ne}var JW=ib(TW);function QW(fe){for(var Ne=Jw.lastIndex=0;Jw.test(fe);)++Ne;return Ne}function ZW(fe){return fe.match(Jw)||[]}function e8(fe){return fe.match(wW)||[]}var t8=function fe(Ne){Ne=Ne==null?Fr:_d.defaults(Fr.Object(),Ne,_d.pick(Fr,_W));var Se=Ne.Array,vt=Ne.Date,Ut=Ne.Error,yn=Ne.Function,mr=Ne.Math,An=Ne.Object,cb=Ne.RegExp,n8=Ne.String,Ns=Ne.TypeError,Ug=Se.prototype,r8=yn.prototype,Ed=An.prototype,Bg=Ne["__core-js_shared__"],zg=r8.toString,Sn=Ed.hasOwnProperty,i8=0,lk=function(){var f=/[^.]+$/.exec(Bg&&Bg.keys&&Bg.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),jg=Ed.toString,s8=zg.call(An),o8=Fr._,a8=cb("^"+zg.call(Sn).replace(Dn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hg=WR?Ne.Buffer:n,El=Ne.Symbol,Vg=Ne.Uint8Array,ck=Hg?Hg.allocUnsafe:n,$g=ok(An.getPrototypeOf,An),uk=An.create,dk=Ed.propertyIsEnumerable,Wg=Ug.splice,fk=El?El.isConcatSpreadable:n,Hh=El?El.iterator:n,tu=El?El.toStringTag:n,Gg=function(){try{var f=ou(An,"defineProperty");return f({},"",{}),f}catch{}}(),l8=Ne.clearTimeout!==Fr.clearTimeout&&Ne.clearTimeout,c8=vt&&vt.now!==Fr.Date.now&&vt.now,u8=Ne.setTimeout!==Fr.setTimeout&&Ne.setTimeout,Xg=mr.ceil,qg=mr.floor,ub=An.getOwnPropertySymbols,d8=Hg?Hg.isBuffer:n,hk=Ne.isFinite,f8=Ug.join,h8=ok(An.keys,An),gr=mr.max,Zr=mr.min,p8=vt.now,m8=Ne.parseInt,pk=mr.random,g8=Ug.reverse,db=ou(Ne,"DataView"),Vh=ou(Ne,"Map"),fb=ou(Ne,"Promise"),Cd=ou(Ne,"Set"),$h=ou(Ne,"WeakMap"),Wh=ou(An,"create"),Kg=$h&&new $h,Md={},v8=au(db),y8=au(Vh),x8=au(fb),w8=au(Cd),b8=au($h),Yg=El?El.prototype:n,Gh=Yg?Yg.valueOf:n,mk=Yg?Yg.toString:n;function V(f){if(Qn(f)&&!Bt(f)&&!(f instanceof rn)){if(f instanceof Ps)return f;if(Sn.call(f,"__wrapped__"))return gN(f)}return new Ps(f)}var Td=function(){function f(){}return function(g){if(!Gn(g))return{};if(uk)return uk(g);f.prototype=g;var _=new f;return f.prototype=n,_}}();function Jg(){}function Ps(f,g){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!g,this.__index__=0,this.__values__=n}V.templateSettings={escape:Ie,evaluate:tt,interpolate:ft,variable:"",imports:{_:V}},V.prototype=Jg.prototype,V.prototype.constructor=V,Ps.prototype=Td(Jg.prototype),Ps.prototype.constructor=Ps;function rn(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ee,this.__views__=[]}function S8(){var f=new rn(this.__wrapped__);return f.__actions__=Oi(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=Oi(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=Oi(this.__views__),f}function _8(){if(this.__filtered__){var f=new rn(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function E8(){var f=this.__wrapped__.value(),g=this.__dir__,_=Bt(f),N=g<0,U=_?f.length:0,G=OG(0,U,this.__views__),re=G.start,le=G.end,me=le-re,Fe=N?le:re-1,Ue=this.__iteratees__,$e=Ue.length,at=0,Mt=Zr(me,this.__takeCount__);if(!_||!N&&U==me&&Mt==me)return Bk(f,this.__actions__);var It=[];e:for(;me--&&at<Mt;){Fe+=g;for(var Kt=-1,Lt=f[Fe];++Kt<$e;){var en=Ue[Kt],on=en.iteratee,us=en.type,xi=on(Lt);if(us==J)Lt=xi;else if(!xi){if(us==j)continue e;break e}}It[at++]=Lt}return It}rn.prototype=Td(Jg.prototype),rn.prototype.constructor=rn;function nu(f){var g=-1,_=f==null?0:f.length;for(this.clear();++g<_;){var N=f[g];this.set(N[0],N[1])}}function C8(){this.__data__=Wh?Wh(null):{},this.size=0}function M8(f){var g=this.has(f)&&delete this.__data__[f];return this.size-=g?1:0,g}function T8(f){var g=this.__data__;if(Wh){var _=g[f];return _===l?n:_}return Sn.call(g,f)?g[f]:n}function A8(f){var g=this.__data__;return Wh?g[f]!==n:Sn.call(g,f)}function R8(f,g){var _=this.__data__;return this.size+=this.has(f)?0:1,_[f]=Wh&&g===n?l:g,this}nu.prototype.clear=C8,nu.prototype.delete=M8,nu.prototype.get=T8,nu.prototype.has=A8,nu.prototype.set=R8;function Ca(f){var g=-1,_=f==null?0:f.length;for(this.clear();++g<_;){var N=f[g];this.set(N[0],N[1])}}function k8(){this.__data__=[],this.size=0}function N8(f){var g=this.__data__,_=Qg(g,f);if(_<0)return!1;var N=g.length-1;return _==N?g.pop():Wg.call(g,_,1),--this.size,!0}function P8(f){var g=this.__data__,_=Qg(g,f);return _<0?n:g[_][1]}function D8(f){return Qg(this.__data__,f)>-1}function I8(f,g){var _=this.__data__,N=Qg(_,f);return N<0?(++this.size,_.push([f,g])):_[N][1]=g,this}Ca.prototype.clear=k8,Ca.prototype.delete=N8,Ca.prototype.get=P8,Ca.prototype.has=D8,Ca.prototype.set=I8;function Ma(f){var g=-1,_=f==null?0:f.length;for(this.clear();++g<_;){var N=f[g];this.set(N[0],N[1])}}function L8(){this.size=0,this.__data__={hash:new nu,map:new(Vh||Ca),string:new nu}}function O8(f){var g=uv(this,f).delete(f);return this.size-=g?1:0,g}function F8(f){return uv(this,f).get(f)}function U8(f){return uv(this,f).has(f)}function B8(f,g){var _=uv(this,f),N=_.size;return _.set(f,g),this.size+=_.size==N?0:1,this}Ma.prototype.clear=L8,Ma.prototype.delete=O8,Ma.prototype.get=F8,Ma.prototype.has=U8,Ma.prototype.set=B8;function ru(f){var g=-1,_=f==null?0:f.length;for(this.__data__=new Ma;++g<_;)this.add(f[g])}function z8(f){return this.__data__.set(f,l),this}function j8(f){return this.__data__.has(f)}ru.prototype.add=ru.prototype.push=z8,ru.prototype.has=j8;function oo(f){var g=this.__data__=new Ca(f);this.size=g.size}function H8(){this.__data__=new Ca,this.size=0}function V8(f){var g=this.__data__,_=g.delete(f);return this.size=g.size,_}function $8(f){return this.__data__.get(f)}function W8(f){return this.__data__.has(f)}function G8(f,g){var _=this.__data__;if(_ instanceof Ca){var N=_.__data__;if(!Vh||N.length<i-1)return N.push([f,g]),this.size=++_.size,this;_=this.__data__=new Ma(N)}return _.set(f,g),this.size=_.size,this}oo.prototype.clear=H8,oo.prototype.delete=V8,oo.prototype.get=$8,oo.prototype.has=W8,oo.prototype.set=G8;function gk(f,g){var _=Bt(f),N=!_&&lu(f),U=!_&&!N&&Rl(f),G=!_&&!N&&!U&&Nd(f),re=_||N||U||G,le=re?ob(f.length,n8):[],me=le.length;for(var Fe in f)(g||Sn.call(f,Fe))&&!(re&&(Fe=="length"||U&&(Fe=="offset"||Fe=="parent")||G&&(Fe=="buffer"||Fe=="byteLength"||Fe=="byteOffset")||ka(Fe,me)))&&le.push(Fe);return le}function vk(f){var g=f.length;return g?f[_b(0,g-1)]:n}function X8(f,g){return dv(Oi(f),iu(g,0,f.length))}function q8(f){return dv(Oi(f))}function hb(f,g,_){(_!==n&&!ao(f[g],_)||_===n&&!(g in f))&&Ta(f,g,_)}function Xh(f,g,_){var N=f[g];(!(Sn.call(f,g)&&ao(N,_))||_===n&&!(g in f))&&Ta(f,g,_)}function Qg(f,g){for(var _=f.length;_--;)if(ao(f[_][0],g))return _;return-1}function K8(f,g,_,N){return Cl(f,function(U,G,re){g(N,U,_(U),re)}),N}function yk(f,g){return f&&Ho(g,Er(g),f)}function Y8(f,g){return f&&Ho(g,Ui(g),f)}function Ta(f,g,_){g=="__proto__"&&Gg?Gg(f,g,{configurable:!0,enumerable:!0,value:_,writable:!0}):f[g]=_}function pb(f,g){for(var _=-1,N=g.length,U=Se(N),G=f==null;++_<N;)U[_]=G?n:qb(f,g[_]);return U}function iu(f,g,_){return f===f&&(_!==n&&(f=f<=_?f:_),g!==n&&(f=f>=g?f:g)),f}function Ds(f,g,_,N,U,G){var re,le=g&d,me=g&h,Fe=g&p;if(_&&(re=U?_(f,N,U,G):_(f)),re!==n)return re;if(!Gn(f))return f;var Ue=Bt(f);if(Ue){if(re=UG(f),!le)return Oi(f,re)}else{var $e=ei(f),at=$e==We||$e==it;if(Rl(f))return Hk(f,le);if($e==ut||$e==ie||at&&!U){if(re=me||at?{}:aN(f),!le)return me?TG(f,Y8(re,f)):MG(f,yk(re,f))}else{if(!Ln[$e])return U?f:{};re=BG(f,$e,le)}}G||(G=new oo);var Mt=G.get(f);if(Mt)return Mt;G.set(f,re),ON(f)?f.forEach(function(Lt){re.add(Ds(Lt,g,_,Lt,f,G))}):IN(f)&&f.forEach(function(Lt,en){re.set(en,Ds(Lt,g,_,en,f,G))});var It=Fe?me?Ib:Db:me?Ui:Er,Kt=Ue?n:It(f);return ks(Kt||f,function(Lt,en){Kt&&(en=Lt,Lt=f[en]),Xh(re,en,Ds(Lt,g,_,en,f,G))}),re}function J8(f){var g=Er(f);return function(_){return xk(_,f,g)}}function xk(f,g,_){var N=_.length;if(f==null)return!N;for(f=An(f);N--;){var U=_[N],G=g[U],re=f[U];if(re===n&&!(U in f)||!G(re))return!1}return!0}function wk(f,g,_){if(typeof f!="function")throw new Ns(o);return ep(function(){f.apply(n,_)},g)}function qh(f,g,_,N){var U=-1,G=Lg,re=!0,le=f.length,me=[],Fe=g.length;if(!le)return me;_&&(g=$n(g,as(_))),N?(G=eb,re=!1):g.length>=i&&(G=jh,re=!1,g=new ru(g));e:for(;++U<le;){var Ue=f[U],$e=_==null?Ue:_(Ue);if(Ue=N||Ue!==0?Ue:0,re&&$e===$e){for(var at=Fe;at--;)if(g[at]===$e)continue e;me.push(Ue)}else G(g,$e,N)||me.push(Ue)}return me}var Cl=Xk(jo),bk=Xk(gb,!0);function Q8(f,g){var _=!0;return Cl(f,function(N,U,G){return _=!!g(N,U,G),_}),_}function Zg(f,g,_){for(var N=-1,U=f.length;++N<U;){var G=f[N],re=g(G);if(re!=null&&(le===n?re===re&&!cs(re):_(re,le)))var le=re,me=G}return me}function Z8(f,g,_,N){var U=f.length;for(_=Vt(_),_<0&&(_=-_>U?0:U+_),N=N===n||N>U?U:Vt(N),N<0&&(N+=U),N=_>N?0:UN(N);_<N;)f[_++]=g;return f}function Sk(f,g){var _=[];return Cl(f,function(N,U,G){g(N,U,G)&&_.push(N)}),_}function Ur(f,g,_,N,U){var G=-1,re=f.length;for(_||(_=jG),U||(U=[]);++G<re;){var le=f[G];g>0&&_(le)?g>1?Ur(le,g-1,_,N,U):Sl(U,le):N||(U[U.length]=le)}return U}var mb=qk(),_k=qk(!0);function jo(f,g){return f&&mb(f,g,Er)}function gb(f,g){return f&&_k(f,g,Er)}function ev(f,g){return bl(g,function(_){return Na(f[_])})}function su(f,g){g=Tl(g,f);for(var _=0,N=g.length;f!=null&&_<N;)f=f[Vo(g[_++])];return _&&_==N?f:n}function Ek(f,g,_){var N=g(f);return Bt(f)?N:Sl(N,_(f))}function vi(f){return f==null?f===n?L:Be:tu&&tu in An(f)?LG(f):qG(f)}function vb(f,g){return f>g}function eG(f,g){return f!=null&&Sn.call(f,g)}function tG(f,g){return f!=null&&g in An(f)}function nG(f,g,_){return f>=Zr(g,_)&&f<gr(g,_)}function yb(f,g,_){for(var N=_?eb:Lg,U=f[0].length,G=f.length,re=G,le=Se(G),me=1/0,Fe=[];re--;){var Ue=f[re];re&&g&&(Ue=$n(Ue,as(g))),me=Zr(Ue.length,me),le[re]=!_&&(g||U>=120&&Ue.length>=120)?new ru(re&&Ue):n}Ue=f[0];var $e=-1,at=le[0];e:for(;++$e<U&&Fe.length<me;){var Mt=Ue[$e],It=g?g(Mt):Mt;if(Mt=_||Mt!==0?Mt:0,!(at?jh(at,It):N(Fe,It,_))){for(re=G;--re;){var Kt=le[re];if(!(Kt?jh(Kt,It):N(f[re],It,_)))continue e}at&&at.push(It),Fe.push(Mt)}}return Fe}function rG(f,g,_,N){return jo(f,function(U,G,re){g(N,_(U),G,re)}),N}function Kh(f,g,_){g=Tl(g,f),f=dN(f,g);var N=f==null?f:f[Vo(Ls(g))];return N==null?n:ss(N,f,_)}function Ck(f){return Qn(f)&&vi(f)==ie}function iG(f){return Qn(f)&&vi(f)==se}function sG(f){return Qn(f)&&vi(f)==ye}function Yh(f,g,_,N,U){return f===g?!0:f==null||g==null||!Qn(f)&&!Qn(g)?f!==f&&g!==g:oG(f,g,_,N,Yh,U)}function oG(f,g,_,N,U,G){var re=Bt(f),le=Bt(g),me=re?oe:ei(f),Fe=le?oe:ei(g);me=me==ie?ut:me,Fe=Fe==ie?ut:Fe;var Ue=me==ut,$e=Fe==ut,at=me==Fe;if(at&&Rl(f)){if(!Rl(g))return!1;re=!0,Ue=!1}if(at&&!Ue)return G||(G=new oo),re||Nd(f)?iN(f,g,_,N,U,G):DG(f,g,me,_,N,U,G);if(!(_&x)){var Mt=Ue&&Sn.call(f,"__wrapped__"),It=$e&&Sn.call(g,"__wrapped__");if(Mt||It){var Kt=Mt?f.value():f,Lt=It?g.value():g;return G||(G=new oo),U(Kt,Lt,_,N,G)}}return at?(G||(G=new oo),IG(f,g,_,N,U,G)):!1}function aG(f){return Qn(f)&&ei(f)==te}function xb(f,g,_,N){var U=_.length,G=U,re=!N;if(f==null)return!G;for(f=An(f);U--;){var le=_[U];if(re&&le[2]?le[1]!==f[le[0]]:!(le[0]in f))return!1}for(;++U<G;){le=_[U];var me=le[0],Fe=f[me],Ue=le[1];if(re&&le[2]){if(Fe===n&&!(me in f))return!1}else{var $e=new oo;if(N)var at=N(Fe,Ue,me,f,g,$e);if(!(at===n?Yh(Ue,Fe,x|w,N,$e):at))return!1}}return!0}function Mk(f){if(!Gn(f)||VG(f))return!1;var g=Na(f)?a8:xl;return g.test(au(f))}function lG(f){return Qn(f)&&vi(f)==Ae}function cG(f){return Qn(f)&&ei(f)==Pe}function uG(f){return Qn(f)&&vv(f.length)&&!!Bn[vi(f)]}function Tk(f){return typeof f=="function"?f:f==null?Bi:typeof f=="object"?Bt(f)?kk(f[0],f[1]):Rk(f):KN(f)}function wb(f){if(!Zh(f))return h8(f);var g=[];for(var _ in An(f))Sn.call(f,_)&&_!="constructor"&&g.push(_);return g}function dG(f){if(!Gn(f))return XG(f);var g=Zh(f),_=[];for(var N in f)N=="constructor"&&(g||!Sn.call(f,N))||_.push(N);return _}function bb(f,g){return f<g}function Ak(f,g){var _=-1,N=Fi(f)?Se(f.length):[];return Cl(f,function(U,G,re){N[++_]=g(U,G,re)}),N}function Rk(f){var g=Ob(f);return g.length==1&&g[0][2]?cN(g[0][0],g[0][1]):function(_){return _===f||xb(_,f,g)}}function kk(f,g){return Ub(f)&&lN(g)?cN(Vo(f),g):function(_){var N=qb(_,f);return N===n&&N===g?Kb(_,f):Yh(g,N,x|w)}}function tv(f,g,_,N,U){f!==g&&mb(g,function(G,re){if(U||(U=new oo),Gn(G))fG(f,g,re,_,tv,N,U);else{var le=N?N(zb(f,re),G,re+"",f,g,U):n;le===n&&(le=G),hb(f,re,le)}},Ui)}function fG(f,g,_,N,U,G,re){var le=zb(f,_),me=zb(g,_),Fe=re.get(me);if(Fe){hb(f,_,Fe);return}var Ue=G?G(le,me,_+"",f,g,re):n,$e=Ue===n;if($e){var at=Bt(me),Mt=!at&&Rl(me),It=!at&&!Mt&&Nd(me);Ue=me,at||Mt||It?Bt(le)?Ue=le:ir(le)?Ue=Oi(le):Mt?($e=!1,Ue=Hk(me,!0)):It?($e=!1,Ue=Vk(me,!0)):Ue=[]:tp(me)||lu(me)?(Ue=le,lu(le)?Ue=BN(le):(!Gn(le)||Na(le))&&(Ue=aN(me))):$e=!1}$e&&(re.set(me,Ue),U(Ue,me,N,G,re),re.delete(me)),hb(f,_,Ue)}function Nk(f,g){var _=f.length;if(_)return g+=g<0?_:0,ka(g,_)?f[g]:n}function Pk(f,g,_){g.length?g=$n(g,function(G){return Bt(G)?function(re){return su(re,G.length===1?G[0]:G)}:G}):g=[Bi];var N=-1;g=$n(g,as(Pt()));var U=Ak(f,function(G,re,le){var me=$n(g,function(Fe){return Fe(G)});return{criteria:me,index:++N,value:G}});return BW(U,function(G,re){return CG(G,re,_)})}function hG(f,g){return Dk(f,g,function(_,N){return Kb(f,N)})}function Dk(f,g,_){for(var N=-1,U=g.length,G={};++N<U;){var re=g[N],le=su(f,re);_(le,re)&&Jh(G,Tl(re,f),le)}return G}function pG(f){return function(g){return su(g,f)}}function Sb(f,g,_,N){var U=N?UW:wd,G=-1,re=g.length,le=f;for(f===g&&(g=Oi(g)),_&&(le=$n(f,as(_)));++G<re;)for(var me=0,Fe=g[G],Ue=_?_(Fe):Fe;(me=U(le,Ue,me,N))>-1;)le!==f&&Wg.call(le,me,1),Wg.call(f,me,1);return f}function Ik(f,g){for(var _=f?g.length:0,N=_-1;_--;){var U=g[_];if(_==N||U!==G){var G=U;ka(U)?Wg.call(f,U,1):Mb(f,U)}}return f}function _b(f,g){return f+qg(pk()*(g-f+1))}function mG(f,g,_,N){for(var U=-1,G=gr(Xg((g-f)/(_||1)),0),re=Se(G);G--;)re[N?G:++U]=f,f+=_;return re}function Eb(f,g){var _="";if(!f||g<1||g>O)return _;do g%2&&(_+=f),g=qg(g/2),g&&(f+=f);while(g);return _}function Jt(f,g){return jb(uN(f,g,Bi),f+"")}function gG(f){return vk(Pd(f))}function vG(f,g){var _=Pd(f);return dv(_,iu(g,0,_.length))}function Jh(f,g,_,N){if(!Gn(f))return f;g=Tl(g,f);for(var U=-1,G=g.length,re=G-1,le=f;le!=null&&++U<G;){var me=Vo(g[U]),Fe=_;if(me==="__proto__"||me==="constructor"||me==="prototype")return f;if(U!=re){var Ue=le[me];Fe=N?N(Ue,me,le):n,Fe===n&&(Fe=Gn(Ue)?Ue:ka(g[U+1])?[]:{})}Xh(le,me,Fe),le=le[me]}return f}var Lk=Kg?function(f,g){return Kg.set(f,g),f}:Bi,yG=Gg?function(f,g){return Gg(f,"toString",{configurable:!0,enumerable:!1,value:Jb(g),writable:!0})}:Bi;function xG(f){return dv(Pd(f))}function Is(f,g,_){var N=-1,U=f.length;g<0&&(g=-g>U?0:U+g),_=_>U?U:_,_<0&&(_+=U),U=g>_?0:_-g>>>0,g>>>=0;for(var G=Se(U);++N<U;)G[N]=f[N+g];return G}function wG(f,g){var _;return Cl(f,function(N,U,G){return _=g(N,U,G),!_}),!!_}function nv(f,g,_){var N=0,U=f==null?N:f.length;if(typeof g=="number"&&g===g&&U<=B){for(;N<U;){var G=N+U>>>1,re=f[G];re!==null&&!cs(re)&&(_?re<=g:re<g)?N=G+1:U=G}return U}return Cb(f,g,Bi,_)}function Cb(f,g,_,N){var U=0,G=f==null?0:f.length;if(G===0)return 0;g=_(g);for(var re=g!==g,le=g===null,me=cs(g),Fe=g===n;U<G;){var Ue=qg((U+G)/2),$e=_(f[Ue]),at=$e!==n,Mt=$e===null,It=$e===$e,Kt=cs($e);if(re)var Lt=N||It;else Fe?Lt=It&&(N||at):le?Lt=It&&at&&(N||!Mt):me?Lt=It&&at&&!Mt&&(N||!Kt):Mt||Kt?Lt=!1:Lt=N?$e<=g:$e<g;Lt?U=Ue+1:G=Ue}return Zr(G,W)}function Ok(f,g){for(var _=-1,N=f.length,U=0,G=[];++_<N;){var re=f[_],le=g?g(re):re;if(!_||!ao(le,me)){var me=le;G[U++]=re===0?0:re}}return G}function Fk(f){return typeof f=="number"?f:cs(f)?D:+f}function ls(f){if(typeof f=="string")return f;if(Bt(f))return $n(f,ls)+"";if(cs(f))return mk?mk.call(f):"";var g=f+"";return g=="0"&&1/f==-Q?"-0":g}function Ml(f,g,_){var N=-1,U=Lg,G=f.length,re=!0,le=[],me=le;if(_)re=!1,U=eb;else if(G>=i){var Fe=g?null:NG(f);if(Fe)return Fg(Fe);re=!1,U=jh,me=new ru}else me=g?[]:le;e:for(;++N<G;){var Ue=f[N],$e=g?g(Ue):Ue;if(Ue=_||Ue!==0?Ue:0,re&&$e===$e){for(var at=me.length;at--;)if(me[at]===$e)continue e;g&&me.push($e),le.push(Ue)}else U(me,$e,_)||(me!==le&&me.push($e),le.push(Ue))}return le}function Mb(f,g){return g=Tl(g,f),f=dN(f,g),f==null||delete f[Vo(Ls(g))]}function Uk(f,g,_,N){return Jh(f,g,_(su(f,g)),N)}function rv(f,g,_,N){for(var U=f.length,G=N?U:-1;(N?G--:++G<U)&&g(f[G],G,f););return _?Is(f,N?0:G,N?G+1:U):Is(f,N?G+1:0,N?U:G)}function Bk(f,g){var _=f;return _ instanceof rn&&(_=_.value()),tb(g,function(N,U){return U.func.apply(U.thisArg,Sl([N],U.args))},_)}function Tb(f,g,_){var N=f.length;if(N<2)return N?Ml(f[0]):[];for(var U=-1,G=Se(N);++U<N;)for(var re=f[U],le=-1;++le<N;)le!=U&&(G[U]=qh(G[U]||re,f[le],g,_));return Ml(Ur(G,1),g,_)}function zk(f,g,_){for(var N=-1,U=f.length,G=g.length,re={};++N<U;){var le=N<G?g[N]:n;_(re,f[N],le)}return re}function Ab(f){return ir(f)?f:[]}function Rb(f){return typeof f=="function"?f:Bi}function Tl(f,g){return Bt(f)?f:Ub(f,g)?[f]:mN(xn(f))}var bG=Jt;function Al(f,g,_){var N=f.length;return _=_===n?N:_,!g&&_>=N?f:Is(f,g,_)}var jk=l8||function(f){return Fr.clearTimeout(f)};function Hk(f,g){if(g)return f.slice();var _=f.length,N=ck?ck(_):new f.constructor(_);return f.copy(N),N}function kb(f){var g=new f.constructor(f.byteLength);return new Vg(g).set(new Vg(f)),g}function SG(f,g){var _=g?kb(f.buffer):f.buffer;return new f.constructor(_,f.byteOffset,f.byteLength)}function _G(f){var g=new f.constructor(f.source,Lr.exec(f));return g.lastIndex=f.lastIndex,g}function EG(f){return Gh?An(Gh.call(f)):{}}function Vk(f,g){var _=g?kb(f.buffer):f.buffer;return new f.constructor(_,f.byteOffset,f.length)}function $k(f,g){if(f!==g){var _=f!==n,N=f===null,U=f===f,G=cs(f),re=g!==n,le=g===null,me=g===g,Fe=cs(g);if(!le&&!Fe&&!G&&f>g||G&&re&&me&&!le&&!Fe||N&&re&&me||!_&&me||!U)return 1;if(!N&&!G&&!Fe&&f<g||Fe&&_&&U&&!N&&!G||le&&_&&U||!re&&U||!me)return-1}return 0}function CG(f,g,_){for(var N=-1,U=f.criteria,G=g.criteria,re=U.length,le=_.length;++N<re;){var me=$k(U[N],G[N]);if(me){if(N>=le)return me;var Fe=_[N];return me*(Fe=="desc"?-1:1)}}return f.index-g.index}function Wk(f,g,_,N){for(var U=-1,G=f.length,re=_.length,le=-1,me=g.length,Fe=gr(G-re,0),Ue=Se(me+Fe),$e=!N;++le<me;)Ue[le]=g[le];for(;++U<re;)($e||U<G)&&(Ue[_[U]]=f[U]);for(;Fe--;)Ue[le++]=f[U++];return Ue}function Gk(f,g,_,N){for(var U=-1,G=f.length,re=-1,le=_.length,me=-1,Fe=g.length,Ue=gr(G-le,0),$e=Se(Ue+Fe),at=!N;++U<Ue;)$e[U]=f[U];for(var Mt=U;++me<Fe;)$e[Mt+me]=g[me];for(;++re<le;)(at||U<G)&&($e[Mt+_[re]]=f[U++]);return $e}function Oi(f,g){var _=-1,N=f.length;for(g||(g=Se(N));++_<N;)g[_]=f[_];return g}function Ho(f,g,_,N){var U=!_;_||(_={});for(var G=-1,re=g.length;++G<re;){var le=g[G],me=N?N(_[le],f[le],le,_,f):n;me===n&&(me=f[le]),U?Ta(_,le,me):Xh(_,le,me)}return _}function MG(f,g){return Ho(f,Fb(f),g)}function TG(f,g){return Ho(f,sN(f),g)}function iv(f,g){return function(_,N){var U=Bt(_)?PW:K8,G=g?g():{};return U(_,f,Pt(N,2),G)}}function Ad(f){return Jt(function(g,_){var N=-1,U=_.length,G=U>1?_[U-1]:n,re=U>2?_[2]:n;for(G=f.length>3&&typeof G=="function"?(U--,G):n,re&&yi(_[0],_[1],re)&&(G=U<3?n:G,U=1),g=An(g);++N<U;){var le=_[N];le&&f(g,le,N,G)}return g})}function Xk(f,g){return function(_,N){if(_==null)return _;if(!Fi(_))return f(_,N);for(var U=_.length,G=g?U:-1,re=An(_);(g?G--:++G<U)&&N(re[G],G,re)!==!1;);return _}}function qk(f){return function(g,_,N){for(var U=-1,G=An(g),re=N(g),le=re.length;le--;){var me=re[f?le:++U];if(_(G[me],me,G)===!1)break}return g}}function AG(f,g,_){var N=g&y,U=Qh(f);function G(){var re=this&&this!==Fr&&this instanceof G?U:f;return re.apply(N?_:this,arguments)}return G}function Kk(f){return function(g){g=xn(g);var _=bd(g)?so(g):n,N=_?_[0]:g.charAt(0),U=_?Al(_,1).join(""):g.slice(1);return N[f]()+U}}function Rd(f){return function(g){return tb(XN(GN(g).replace(yW,"")),f,"")}}function Qh(f){return function(){var g=arguments;switch(g.length){case 0:return new f;case 1:return new f(g[0]);case 2:return new f(g[0],g[1]);case 3:return new f(g[0],g[1],g[2]);case 4:return new f(g[0],g[1],g[2],g[3]);case 5:return new f(g[0],g[1],g[2],g[3],g[4]);case 6:return new f(g[0],g[1],g[2],g[3],g[4],g[5]);case 7:return new f(g[0],g[1],g[2],g[3],g[4],g[5],g[6])}var _=Td(f.prototype),N=f.apply(_,g);return Gn(N)?N:_}}function RG(f,g,_){var N=Qh(f);function U(){for(var G=arguments.length,re=Se(G),le=G,me=kd(U);le--;)re[le]=arguments[le];var Fe=G<3&&re[0]!==me&&re[G-1]!==me?[]:_l(re,me);if(G-=Fe.length,G<_)return eN(f,g,sv,U.placeholder,n,re,Fe,n,n,_-G);var Ue=this&&this!==Fr&&this instanceof U?N:f;return ss(Ue,this,re)}return U}function Yk(f){return function(g,_,N){var U=An(g);if(!Fi(g)){var G=Pt(_,3);g=Er(g),_=function(le){return G(U[le],le,U)}}var re=f(g,_,N);return re>-1?U[G?g[re]:re]:n}}function Jk(f){return Ra(function(g){var _=g.length,N=_,U=Ps.prototype.thru;for(f&&g.reverse();N--;){var G=g[N];if(typeof G!="function")throw new Ns(o);if(U&&!re&&cv(G)=="wrapper")var re=new Ps([],!0)}for(N=re?N:_;++N<_;){G=g[N];var le=cv(G),me=le=="wrapper"?Lb(G):n;me&&Bb(me[0])&&me[1]==(k|E|T|R)&&!me[4].length&&me[9]==1?re=re[cv(me[0])].apply(re,me[3]):re=G.length==1&&Bb(G)?re[le]():re.thru(G)}return function(){var Fe=arguments,Ue=Fe[0];if(re&&Fe.length==1&&Bt(Ue))return re.plant(Ue).value();for(var $e=0,at=_?g[$e].apply(this,Fe):Ue;++$e<_;)at=g[$e].call(this,at);return at}})}function sv(f,g,_,N,U,G,re,le,me,Fe){var Ue=g&k,$e=g&y,at=g&v,Mt=g&(E|C),It=g&P,Kt=at?n:Qh(f);function Lt(){for(var en=arguments.length,on=Se(en),us=en;us--;)on[us]=arguments[us];if(Mt)var xi=kd(Lt),ds=jW(on,xi);if(N&&(on=Wk(on,N,U,Mt)),G&&(on=Gk(on,G,re,Mt)),en-=ds,Mt&&en<Fe){var sr=_l(on,xi);return eN(f,g,sv,Lt.placeholder,_,on,sr,le,me,Fe-en)}var lo=$e?_:this,Da=at?lo[f]:f;return en=on.length,le?on=KG(on,le):It&&en>1&&on.reverse(),Ue&&me<en&&(on.length=me),this&&this!==Fr&&this instanceof Lt&&(Da=Kt||Qh(Da)),Da.apply(lo,on)}return Lt}function Qk(f,g){return function(_,N){return rG(_,f,g(N),{})}}function ov(f,g){return function(_,N){var U;if(_===n&&N===n)return g;if(_!==n&&(U=_),N!==n){if(U===n)return N;typeof _=="string"||typeof N=="string"?(_=ls(_),N=ls(N)):(_=Fk(_),N=Fk(N)),U=f(_,N)}return U}}function Nb(f){return Ra(function(g){return g=$n(g,as(Pt())),Jt(function(_){var N=this;return f(g,function(U){return ss(U,N,_)})})})}function av(f,g){g=g===n?" ":ls(g);var _=g.length;if(_<2)return _?Eb(g,f):g;var N=Eb(g,Xg(f/Sd(g)));return bd(g)?Al(so(N),0,f).join(""):N.slice(0,f)}function kG(f,g,_,N){var U=g&y,G=Qh(f);function re(){for(var le=-1,me=arguments.length,Fe=-1,Ue=N.length,$e=Se(Ue+me),at=this&&this!==Fr&&this instanceof re?G:f;++Fe<Ue;)$e[Fe]=N[Fe];for(;me--;)$e[Fe++]=arguments[++le];return ss(at,U?_:this,$e)}return re}function Zk(f){return function(g,_,N){return N&&typeof N!="number"&&yi(g,_,N)&&(_=N=n),g=Pa(g),_===n?(_=g,g=0):_=Pa(_),N=N===n?g<_?1:-1:Pa(N),mG(g,_,N,f)}}function lv(f){return function(g,_){return typeof g=="string"&&typeof _=="string"||(g=Os(g),_=Os(_)),f(g,_)}}function eN(f,g,_,N,U,G,re,le,me,Fe){var Ue=g&E,$e=Ue?re:n,at=Ue?n:re,Mt=Ue?G:n,It=Ue?n:G;g|=Ue?T:A,g&=~(Ue?A:T),g&S||(g&=-4);var Kt=[f,g,U,Mt,$e,It,at,le,me,Fe],Lt=_.apply(n,Kt);return Bb(f)&&fN(Lt,Kt),Lt.placeholder=N,hN(Lt,f,g)}function Pb(f){var g=mr[f];return function(_,N){if(_=Os(_),N=N==null?0:Zr(Vt(N),292),N&&hk(_)){var U=(xn(_)+"e").split("e"),G=g(U[0]+"e"+(+U[1]+N));return U=(xn(G)+"e").split("e"),+(U[0]+"e"+(+U[1]-N))}return g(_)}}var NG=Cd&&1/Fg(new Cd([,-0]))[1]==Q?function(f){return new Cd(f)}:eS;function tN(f){return function(g){var _=ei(g);return _==te?lb(g):_==Pe?qW(g):zW(g,f(g))}}function Aa(f,g,_,N,U,G,re,le){var me=g&v;if(!me&&typeof f!="function")throw new Ns(o);var Fe=N?N.length:0;if(Fe||(g&=-97,N=U=n),re=re===n?re:gr(Vt(re),0),le=le===n?le:Vt(le),Fe-=U?U.length:0,g&A){var Ue=N,$e=U;N=U=n}var at=me?n:Lb(f),Mt=[f,g,_,N,U,Ue,$e,G,re,le];if(at&&GG(Mt,at),f=Mt[0],g=Mt[1],_=Mt[2],N=Mt[3],U=Mt[4],le=Mt[9]=Mt[9]===n?me?0:f.length:gr(Mt[9]-Fe,0),!le&&g&(E|C)&&(g&=-25),!g||g==y)var It=AG(f,g,_);else g==E||g==C?It=RG(f,g,le):(g==T||g==(y|T))&&!U.length?It=kG(f,g,_,N):It=sv.apply(n,Mt);var Kt=at?Lk:fN;return hN(Kt(It,Mt),f,g)}function nN(f,g,_,N){return f===n||ao(f,Ed[_])&&!Sn.call(N,_)?g:f}function rN(f,g,_,N,U,G){return Gn(f)&&Gn(g)&&(G.set(g,f),tv(f,g,n,rN,G),G.delete(g)),f}function PG(f){return tp(f)?n:f}function iN(f,g,_,N,U,G){var re=_&x,le=f.length,me=g.length;if(le!=me&&!(re&&me>le))return!1;var Fe=G.get(f),Ue=G.get(g);if(Fe&&Ue)return Fe==g&&Ue==f;var $e=-1,at=!0,Mt=_&w?new ru:n;for(G.set(f,g),G.set(g,f);++$e<le;){var It=f[$e],Kt=g[$e];if(N)var Lt=re?N(Kt,It,$e,g,f,G):N(It,Kt,$e,f,g,G);if(Lt!==n){if(Lt)continue;at=!1;break}if(Mt){if(!nb(g,function(en,on){if(!jh(Mt,on)&&(It===en||U(It,en,_,N,G)))return Mt.push(on)})){at=!1;break}}else if(!(It===Kt||U(It,Kt,_,N,G))){at=!1;break}}return G.delete(f),G.delete(g),at}function DG(f,g,_,N,U,G,re){switch(_){case ae:if(f.byteLength!=g.byteLength||f.byteOffset!=g.byteOffset)return!1;f=f.buffer,g=g.buffer;case se:return!(f.byteLength!=g.byteLength||!G(new Vg(f),new Vg(g)));case pe:case ye:case pt:return ao(+f,+g);case je:return f.name==g.name&&f.message==g.message;case Ae:case ot:return f==g+"";case te:var le=lb;case Pe:var me=N&x;if(le||(le=Fg),f.size!=g.size&&!me)return!1;var Fe=re.get(f);if(Fe)return Fe==g;N|=w,re.set(f,g);var Ue=iN(le(f),le(g),N,U,G,re);return re.delete(f),Ue;case Y:if(Gh)return Gh.call(f)==Gh.call(g)}return!1}function IG(f,g,_,N,U,G){var re=_&x,le=Db(f),me=le.length,Fe=Db(g),Ue=Fe.length;if(me!=Ue&&!re)return!1;for(var $e=me;$e--;){var at=le[$e];if(!(re?at in g:Sn.call(g,at)))return!1}var Mt=G.get(f),It=G.get(g);if(Mt&&It)return Mt==g&&It==f;var Kt=!0;G.set(f,g),G.set(g,f);for(var Lt=re;++$e<me;){at=le[$e];var en=f[at],on=g[at];if(N)var us=re?N(on,en,at,g,f,G):N(en,on,at,f,g,G);if(!(us===n?en===on||U(en,on,_,N,G):us)){Kt=!1;break}Lt||(Lt=at=="constructor")}if(Kt&&!Lt){var xi=f.constructor,ds=g.constructor;xi!=ds&&"constructor"in f&&"constructor"in g&&!(typeof xi=="function"&&xi instanceof xi&&typeof ds=="function"&&ds instanceof ds)&&(Kt=!1)}return G.delete(f),G.delete(g),Kt}function Ra(f){return jb(uN(f,n,xN),f+"")}function Db(f){return Ek(f,Er,Fb)}function Ib(f){return Ek(f,Ui,sN)}var Lb=Kg?function(f){return Kg.get(f)}:eS;function cv(f){for(var g=f.name+"",_=Md[g],N=Sn.call(Md,g)?_.length:0;N--;){var U=_[N],G=U.func;if(G==null||G==f)return U.name}return g}function kd(f){var g=Sn.call(V,"placeholder")?V:f;return g.placeholder}function Pt(){var f=V.iteratee||Qb;return f=f===Qb?Tk:f,arguments.length?f(arguments[0],arguments[1]):f}function uv(f,g){var _=f.__data__;return HG(g)?_[typeof g=="string"?"string":"hash"]:_.map}function Ob(f){for(var g=Er(f),_=g.length;_--;){var N=g[_],U=f[N];g[_]=[N,U,lN(U)]}return g}function ou(f,g){var _=WW(f,g);return Mk(_)?_:n}function LG(f){var g=Sn.call(f,tu),_=f[tu];try{f[tu]=n;var N=!0}catch{}var U=jg.call(f);return N&&(g?f[tu]=_:delete f[tu]),U}var Fb=ub?function(f){return f==null?[]:(f=An(f),bl(ub(f),function(g){return dk.call(f,g)}))}:tS,sN=ub?function(f){for(var g=[];f;)Sl(g,Fb(f)),f=$g(f);return g}:tS,ei=vi;(db&&ei(new db(new ArrayBuffer(1)))!=ae||Vh&&ei(new Vh)!=te||fb&&ei(fb.resolve())!=Xe||Cd&&ei(new Cd)!=Pe||$h&&ei(new $h)!=ne)&&(ei=function(f){var g=vi(f),_=g==ut?f.constructor:n,N=_?au(_):"";if(N)switch(N){case v8:return ae;case y8:return te;case x8:return Xe;case w8:return Pe;case b8:return ne}return g});function OG(f,g,_){for(var N=-1,U=_.length;++N<U;){var G=_[N],re=G.size;switch(G.type){case"drop":f+=re;break;case"dropRight":g-=re;break;case"take":g=Zr(g,f+re);break;case"takeRight":f=gr(f,g-re);break}}return{start:f,end:g}}function FG(f){var g=f.match(ze);return g?g[1].split(Ve):[]}function oN(f,g,_){g=Tl(g,f);for(var N=-1,U=g.length,G=!1;++N<U;){var re=Vo(g[N]);if(!(G=f!=null&&_(f,re)))break;f=f[re]}return G||++N!=U?G:(U=f==null?0:f.length,!!U&&vv(U)&&ka(re,U)&&(Bt(f)||lu(f)))}function UG(f){var g=f.length,_=new f.constructor(g);return g&&typeof f[0]=="string"&&Sn.call(f,"index")&&(_.index=f.index,_.input=f.input),_}function aN(f){return typeof f.constructor=="function"&&!Zh(f)?Td($g(f)):{}}function BG(f,g,_){var N=f.constructor;switch(g){case se:return kb(f);case pe:case ye:return new N(+f);case ae:return SG(f,_);case Ce:case Re:case ue:case Te:case de:case _e:case Qe:case Ye:case qe:return Vk(f,_);case te:return new N;case pt:case ot:return new N(f);case Ae:return _G(f);case Pe:return new N;case Y:return EG(f)}}function zG(f,g){var _=g.length;if(!_)return f;var N=_-1;return g[N]=(_>1?"& ":"")+g[N],g=g.join(_>2?", ":" "),f.replace(Oe,`{
/* [wrapped with `+g+`] */
`)}function jG(f){return Bt(f)||lu(f)||!!(fk&&f&&f[fk])}function ka(f,g){var _=typeof f;return g=g??O,!!g&&(_=="number"||_!="symbol"&&Qc.test(f))&&f>-1&&f%1==0&&f<g}function yi(f,g,_){if(!Gn(_))return!1;var N=typeof g;return(N=="number"?Fi(_)&&ka(g,_.length):N=="string"&&g in _)?ao(_[g],f):!1}function Ub(f,g){if(Bt(f))return!1;var _=typeof f;return _=="number"||_=="symbol"||_=="boolean"||f==null||cs(f)?!0:cn.test(f)||!Tt.test(f)||g!=null&&f in An(g)}function HG(f){var g=typeof f;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?f!=="__proto__":f===null}function Bb(f){var g=cv(f),_=V[g];if(typeof _!="function"||!(g in rn.prototype))return!1;if(f===_)return!0;var N=Lb(_);return!!N&&f===N[0]}function VG(f){return!!lk&&lk in f}var $G=Bg?Na:nS;function Zh(f){var g=f&&f.constructor,_=typeof g=="function"&&g.prototype||Ed;return f===_}function lN(f){return f===f&&!Gn(f)}function cN(f,g){return function(_){return _==null?!1:_[f]===g&&(g!==n||f in An(_))}}function WG(f){var g=mv(f,function(N){return _.size===c&&_.clear(),N}),_=g.cache;return g}function GG(f,g){var _=f[1],N=g[1],U=_|N,G=U<(y|v|k),re=N==k&&_==E||N==k&&_==R&&f[7].length<=g[8]||N==(k|R)&&g[7].length<=g[8]&&_==E;if(!(G||re))return f;N&y&&(f[2]=g[2],U|=_&y?0:S);var le=g[3];if(le){var me=f[3];f[3]=me?Wk(me,le,g[4]):le,f[4]=me?_l(f[3],u):g[4]}return le=g[5],le&&(me=f[5],f[5]=me?Gk(me,le,g[6]):le,f[6]=me?_l(f[5],u):g[6]),le=g[7],le&&(f[7]=le),N&k&&(f[8]=f[8]==null?g[8]:Zr(f[8],g[8])),f[9]==null&&(f[9]=g[9]),f[0]=g[0],f[1]=U,f}function XG(f){var g=[];if(f!=null)for(var _ in An(f))g.push(_);return g}function qG(f){return jg.call(f)}function uN(f,g,_){return g=gr(g===n?f.length-1:g,0),function(){for(var N=arguments,U=-1,G=gr(N.length-g,0),re=Se(G);++U<G;)re[U]=N[g+U];U=-1;for(var le=Se(g+1);++U<g;)le[U]=N[U];return le[g]=_(re),ss(f,this,le)}}function dN(f,g){return g.length<2?f:su(f,Is(g,0,-1))}function KG(f,g){for(var _=f.length,N=Zr(g.length,_),U=Oi(f);N--;){var G=g[N];f[N]=ka(G,_)?U[G]:n}return f}function zb(f,g){if(!(g==="constructor"&&typeof f[g]=="function")&&g!="__proto__")return f[g]}var fN=pN(Lk),ep=u8||function(f,g){return Fr.setTimeout(f,g)},jb=pN(yG);function hN(f,g,_){var N=g+"";return jb(f,zG(N,YG(FG(N),_)))}function pN(f){var g=0,_=0;return function(){var N=p8(),U=H-(N-_);if(_=N,U>0){if(++g>=z)return arguments[0]}else g=0;return f.apply(n,arguments)}}function dv(f,g){var _=-1,N=f.length,U=N-1;for(g=g===n?N:g;++_<g;){var G=_b(_,U),re=f[G];f[G]=f[_],f[_]=re}return f.length=g,f}var mN=WG(function(f){var g=[];return f.charCodeAt(0)===46&&g.push(""),f.replace(qt,function(_,N,U,G){g.push(U?G.replace(pn,"$1"):N||_)}),g});function Vo(f){if(typeof f=="string"||cs(f))return f;var g=f+"";return g=="0"&&1/f==-Q?"-0":g}function au(f){if(f!=null){try{return zg.call(f)}catch{}try{return f+""}catch{}}return""}function YG(f,g){return ks(K,function(_){var N="_."+_[0];g&_[1]&&!Lg(f,N)&&f.push(N)}),f.sort()}function gN(f){if(f instanceof rn)return f.clone();var g=new Ps(f.__wrapped__,f.__chain__);return g.__actions__=Oi(f.__actions__),g.__index__=f.__index__,g.__values__=f.__values__,g}function JG(f,g,_){(_?yi(f,g,_):g===n)?g=1:g=gr(Vt(g),0);var N=f==null?0:f.length;if(!N||g<1)return[];for(var U=0,G=0,re=Se(Xg(N/g));U<N;)re[G++]=Is(f,U,U+=g);return re}function QG(f){for(var g=-1,_=f==null?0:f.length,N=0,U=[];++g<_;){var G=f[g];G&&(U[N++]=G)}return U}function ZG(){var f=arguments.length;if(!f)return[];for(var g=Se(f-1),_=arguments[0],N=f;N--;)g[N-1]=arguments[N];return Sl(Bt(_)?Oi(_):[_],Ur(g,1))}var e9=Jt(function(f,g){return ir(f)?qh(f,Ur(g,1,ir,!0)):[]}),t9=Jt(function(f,g){var _=Ls(g);return ir(_)&&(_=n),ir(f)?qh(f,Ur(g,1,ir,!0),Pt(_,2)):[]}),n9=Jt(function(f,g){var _=Ls(g);return ir(_)&&(_=n),ir(f)?qh(f,Ur(g,1,ir,!0),n,_):[]});function r9(f,g,_){var N=f==null?0:f.length;return N?(g=_||g===n?1:Vt(g),Is(f,g<0?0:g,N)):[]}function i9(f,g,_){var N=f==null?0:f.length;return N?(g=_||g===n?1:Vt(g),g=N-g,Is(f,0,g<0?0:g)):[]}function s9(f,g){return f&&f.length?rv(f,Pt(g,3),!0,!0):[]}function o9(f,g){return f&&f.length?rv(f,Pt(g,3),!0):[]}function a9(f,g,_,N){var U=f==null?0:f.length;return U?(_&&typeof _!="number"&&yi(f,g,_)&&(_=0,N=U),Z8(f,g,_,N)):[]}function vN(f,g,_){var N=f==null?0:f.length;if(!N)return-1;var U=_==null?0:Vt(_);return U<0&&(U=gr(N+U,0)),Og(f,Pt(g,3),U)}function yN(f,g,_){var N=f==null?0:f.length;if(!N)return-1;var U=N-1;return _!==n&&(U=Vt(_),U=_<0?gr(N+U,0):Zr(U,N-1)),Og(f,Pt(g,3),U,!0)}function xN(f){var g=f==null?0:f.length;return g?Ur(f,1):[]}function l9(f){var g=f==null?0:f.length;return g?Ur(f,Q):[]}function c9(f,g){var _=f==null?0:f.length;return _?(g=g===n?1:Vt(g),Ur(f,g)):[]}function u9(f){for(var g=-1,_=f==null?0:f.length,N={};++g<_;){var U=f[g];N[U[0]]=U[1]}return N}function wN(f){return f&&f.length?f[0]:n}function d9(f,g,_){var N=f==null?0:f.length;if(!N)return-1;var U=_==null?0:Vt(_);return U<0&&(U=gr(N+U,0)),wd(f,g,U)}function f9(f){var g=f==null?0:f.length;return g?Is(f,0,-1):[]}var h9=Jt(function(f){var g=$n(f,Ab);return g.length&&g[0]===f[0]?yb(g):[]}),p9=Jt(function(f){var g=Ls(f),_=$n(f,Ab);return g===Ls(_)?g=n:_.pop(),_.length&&_[0]===f[0]?yb(_,Pt(g,2)):[]}),m9=Jt(function(f){var g=Ls(f),_=$n(f,Ab);return g=typeof g=="function"?g:n,g&&_.pop(),_.length&&_[0]===f[0]?yb(_,n,g):[]});function g9(f,g){return f==null?"":f8.call(f,g)}function Ls(f){var g=f==null?0:f.length;return g?f[g-1]:n}function v9(f,g,_){var N=f==null?0:f.length;if(!N)return-1;var U=N;return _!==n&&(U=Vt(_),U=U<0?gr(N+U,0):Zr(U,N-1)),g===g?YW(f,g,U):Og(f,ek,U,!0)}function y9(f,g){return f&&f.length?Nk(f,Vt(g)):n}var x9=Jt(bN);function bN(f,g){return f&&f.length&&g&&g.length?Sb(f,g):f}function w9(f,g,_){return f&&f.length&&g&&g.length?Sb(f,g,Pt(_,2)):f}function b9(f,g,_){return f&&f.length&&g&&g.length?Sb(f,g,n,_):f}var S9=Ra(function(f,g){var _=f==null?0:f.length,N=pb(f,g);return Ik(f,$n(g,function(U){return ka(U,_)?+U:U}).sort($k)),N});function _9(f,g){var _=[];if(!(f&&f.length))return _;var N=-1,U=[],G=f.length;for(g=Pt(g,3);++N<G;){var re=f[N];g(re,N,f)&&(_.push(re),U.push(N))}return Ik(f,U),_}function Hb(f){return f==null?f:g8.call(f)}function E9(f,g,_){var N=f==null?0:f.length;return N?(_&&typeof _!="number"&&yi(f,g,_)?(g=0,_=N):(g=g==null?0:Vt(g),_=_===n?N:Vt(_)),Is(f,g,_)):[]}function C9(f,g){return nv(f,g)}function M9(f,g,_){return Cb(f,g,Pt(_,2))}function T9(f,g){var _=f==null?0:f.length;if(_){var N=nv(f,g);if(N<_&&ao(f[N],g))return N}return-1}function A9(f,g){return nv(f,g,!0)}function R9(f,g,_){return Cb(f,g,Pt(_,2),!0)}function k9(f,g){var _=f==null?0:f.length;if(_){var N=nv(f,g,!0)-1;if(ao(f[N],g))return N}return-1}function N9(f){return f&&f.length?Ok(f):[]}function P9(f,g){return f&&f.length?Ok(f,Pt(g,2)):[]}function D9(f){var g=f==null?0:f.length;return g?Is(f,1,g):[]}function I9(f,g,_){return f&&f.length?(g=_||g===n?1:Vt(g),Is(f,0,g<0?0:g)):[]}function L9(f,g,_){var N=f==null?0:f.length;return N?(g=_||g===n?1:Vt(g),g=N-g,Is(f,g<0?0:g,N)):[]}function O9(f,g){return f&&f.length?rv(f,Pt(g,3),!1,!0):[]}function F9(f,g){return f&&f.length?rv(f,Pt(g,3)):[]}var U9=Jt(function(f){return Ml(Ur(f,1,ir,!0))}),B9=Jt(function(f){var g=Ls(f);return ir(g)&&(g=n),Ml(Ur(f,1,ir,!0),Pt(g,2))}),z9=Jt(function(f){var g=Ls(f);return g=typeof g=="function"?g:n,Ml(Ur(f,1,ir,!0),n,g)});function j9(f){return f&&f.length?Ml(f):[]}function H9(f,g){return f&&f.length?Ml(f,Pt(g,2)):[]}function V9(f,g){return g=typeof g=="function"?g:n,f&&f.length?Ml(f,n,g):[]}function Vb(f){if(!(f&&f.length))return[];var g=0;return f=bl(f,function(_){if(ir(_))return g=gr(_.length,g),!0}),ob(g,function(_){return $n(f,rb(_))})}function SN(f,g){if(!(f&&f.length))return[];var _=Vb(f);return g==null?_:$n(_,function(N){return ss(g,n,N)})}var $9=Jt(function(f,g){return ir(f)?qh(f,g):[]}),W9=Jt(function(f){return Tb(bl(f,ir))}),G9=Jt(function(f){var g=Ls(f);return ir(g)&&(g=n),Tb(bl(f,ir),Pt(g,2))}),X9=Jt(function(f){var g=Ls(f);return g=typeof g=="function"?g:n,Tb(bl(f,ir),n,g)}),q9=Jt(Vb);function K9(f,g){return zk(f||[],g||[],Xh)}function Y9(f,g){return zk(f||[],g||[],Jh)}var J9=Jt(function(f){var g=f.length,_=g>1?f[g-1]:n;return _=typeof _=="function"?(f.pop(),_):n,SN(f,_)});function _N(f){var g=V(f);return g.__chain__=!0,g}function Q9(f,g){return g(f),f}function fv(f,g){return g(f)}var Z9=Ra(function(f){var g=f.length,_=g?f[0]:0,N=this.__wrapped__,U=function(G){return pb(G,f)};return g>1||this.__actions__.length||!(N instanceof rn)||!ka(_)?this.thru(U):(N=N.slice(_,+_+(g?1:0)),N.__actions__.push({func:fv,args:[U],thisArg:n}),new Ps(N,this.__chain__).thru(function(G){return g&&!G.length&&G.push(n),G}))});function e7(){return _N(this)}function t7(){return new Ps(this.value(),this.__chain__)}function n7(){this.__values__===n&&(this.__values__=FN(this.value()));var f=this.__index__>=this.__values__.length,g=f?n:this.__values__[this.__index__++];return{done:f,value:g}}function r7(){return this}function i7(f){for(var g,_=this;_ instanceof Jg;){var N=gN(_);N.__index__=0,N.__values__=n,g?U.__wrapped__=N:g=N;var U=N;_=_.__wrapped__}return U.__wrapped__=f,g}function s7(){var f=this.__wrapped__;if(f instanceof rn){var g=f;return this.__actions__.length&&(g=new rn(this)),g=g.reverse(),g.__actions__.push({func:fv,args:[Hb],thisArg:n}),new Ps(g,this.__chain__)}return this.thru(Hb)}function o7(){return Bk(this.__wrapped__,this.__actions__)}var a7=iv(function(f,g,_){Sn.call(f,_)?++f[_]:Ta(f,_,1)});function l7(f,g,_){var N=Bt(f)?QR:Q8;return _&&yi(f,g,_)&&(g=n),N(f,Pt(g,3))}function c7(f,g){var _=Bt(f)?bl:Sk;return _(f,Pt(g,3))}var u7=Yk(vN),d7=Yk(yN);function f7(f,g){return Ur(hv(f,g),1)}function h7(f,g){return Ur(hv(f,g),Q)}function p7(f,g,_){return _=_===n?1:Vt(_),Ur(hv(f,g),_)}function EN(f,g){var _=Bt(f)?ks:Cl;return _(f,Pt(g,3))}function CN(f,g){var _=Bt(f)?DW:bk;return _(f,Pt(g,3))}var m7=iv(function(f,g,_){Sn.call(f,_)?f[_].push(g):Ta(f,_,[g])});function g7(f,g,_,N){f=Fi(f)?f:Pd(f),_=_&&!N?Vt(_):0;var U=f.length;return _<0&&(_=gr(U+_,0)),yv(f)?_<=U&&f.indexOf(g,_)>-1:!!U&&wd(f,g,_)>-1}var v7=Jt(function(f,g,_){var N=-1,U=typeof g=="function",G=Fi(f)?Se(f.length):[];return Cl(f,function(re){G[++N]=U?ss(g,re,_):Kh(re,g,_)}),G}),y7=iv(function(f,g,_){Ta(f,_,g)});function hv(f,g){var _=Bt(f)?$n:Ak;return _(f,Pt(g,3))}function x7(f,g,_,N){return f==null?[]:(Bt(g)||(g=g==null?[]:[g]),_=N?n:_,Bt(_)||(_=_==null?[]:[_]),Pk(f,g,_))}var w7=iv(function(f,g,_){f[_?0:1].push(g)},function(){return[[],[]]});function b7(f,g,_){var N=Bt(f)?tb:nk,U=arguments.length<3;return N(f,Pt(g,4),_,U,Cl)}function S7(f,g,_){var N=Bt(f)?IW:nk,U=arguments.length<3;return N(f,Pt(g,4),_,U,bk)}function _7(f,g){var _=Bt(f)?bl:Sk;return _(f,gv(Pt(g,3)))}function E7(f){var g=Bt(f)?vk:gG;return g(f)}function C7(f,g,_){(_?yi(f,g,_):g===n)?g=1:g=Vt(g);var N=Bt(f)?X8:vG;return N(f,g)}function M7(f){var g=Bt(f)?q8:xG;return g(f)}function T7(f){if(f==null)return 0;if(Fi(f))return yv(f)?Sd(f):f.length;var g=ei(f);return g==te||g==Pe?f.size:wb(f).length}function A7(f,g,_){var N=Bt(f)?nb:wG;return _&&yi(f,g,_)&&(g=n),N(f,Pt(g,3))}var R7=Jt(function(f,g){if(f==null)return[];var _=g.length;return _>1&&yi(f,g[0],g[1])?g=[]:_>2&&yi(g[0],g[1],g[2])&&(g=[g[0]]),Pk(f,Ur(g,1),[])}),pv=c8||function(){return Fr.Date.now()};function k7(f,g){if(typeof g!="function")throw new Ns(o);return f=Vt(f),function(){if(--f<1)return g.apply(this,arguments)}}function MN(f,g,_){return g=_?n:g,g=f&&g==null?f.length:g,Aa(f,k,n,n,n,n,g)}function TN(f,g){var _;if(typeof g!="function")throw new Ns(o);return f=Vt(f),function(){return--f>0&&(_=g.apply(this,arguments)),f<=1&&(g=n),_}}var $b=Jt(function(f,g,_){var N=y;if(_.length){var U=_l(_,kd($b));N|=T}return Aa(f,N,g,_,U)}),AN=Jt(function(f,g,_){var N=y|v;if(_.length){var U=_l(_,kd(AN));N|=T}return Aa(g,N,f,_,U)});function RN(f,g,_){g=_?n:g;var N=Aa(f,E,n,n,n,n,n,g);return N.placeholder=RN.placeholder,N}function kN(f,g,_){g=_?n:g;var N=Aa(f,C,n,n,n,n,n,g);return N.placeholder=kN.placeholder,N}function NN(f,g,_){var N,U,G,re,le,me,Fe=0,Ue=!1,$e=!1,at=!0;if(typeof f!="function")throw new Ns(o);g=Os(g)||0,Gn(_)&&(Ue=!!_.leading,$e="maxWait"in _,G=$e?gr(Os(_.maxWait)||0,g):G,at="trailing"in _?!!_.trailing:at);function Mt(sr){var lo=N,Da=U;return N=U=n,Fe=sr,re=f.apply(Da,lo),re}function It(sr){return Fe=sr,le=ep(en,g),Ue?Mt(sr):re}function Kt(sr){var lo=sr-me,Da=sr-Fe,YN=g-lo;return $e?Zr(YN,G-Da):YN}function Lt(sr){var lo=sr-me,Da=sr-Fe;return me===n||lo>=g||lo<0||$e&&Da>=G}function en(){var sr=pv();if(Lt(sr))return on(sr);le=ep(en,Kt(sr))}function on(sr){return le=n,at&&N?Mt(sr):(N=U=n,re)}function us(){le!==n&&jk(le),Fe=0,N=me=U=le=n}function xi(){return le===n?re:on(pv())}function ds(){var sr=pv(),lo=Lt(sr);if(N=arguments,U=this,me=sr,lo){if(le===n)return It(me);if($e)return jk(le),le=ep(en,g),Mt(me)}return le===n&&(le=ep(en,g)),re}return ds.cancel=us,ds.flush=xi,ds}var N7=Jt(function(f,g){return wk(f,1,g)}),P7=Jt(function(f,g,_){return wk(f,Os(g)||0,_)});function D7(f){return Aa(f,P)}function mv(f,g){if(typeof f!="function"||g!=null&&typeof g!="function")throw new Ns(o);var _=function(){var N=arguments,U=g?g.apply(this,N):N[0],G=_.cache;if(G.has(U))return G.get(U);var re=f.apply(this,N);return _.cache=G.set(U,re)||G,re};return _.cache=new(mv.Cache||Ma),_}mv.Cache=Ma;function gv(f){if(typeof f!="function")throw new Ns(o);return function(){var g=arguments;switch(g.length){case 0:return!f.call(this);case 1:return!f.call(this,g[0]);case 2:return!f.call(this,g[0],g[1]);case 3:return!f.call(this,g[0],g[1],g[2])}return!f.apply(this,g)}}function I7(f){return TN(2,f)}var L7=bG(function(f,g){g=g.length==1&&Bt(g[0])?$n(g[0],as(Pt())):$n(Ur(g,1),as(Pt()));var _=g.length;return Jt(function(N){for(var U=-1,G=Zr(N.length,_);++U<G;)N[U]=g[U].call(this,N[U]);return ss(f,this,N)})}),Wb=Jt(function(f,g){var _=_l(g,kd(Wb));return Aa(f,T,n,g,_)}),PN=Jt(function(f,g){var _=_l(g,kd(PN));return Aa(f,A,n,g,_)}),O7=Ra(function(f,g){return Aa(f,R,n,n,n,g)});function F7(f,g){if(typeof f!="function")throw new Ns(o);return g=g===n?g:Vt(g),Jt(f,g)}function U7(f,g){if(typeof f!="function")throw new Ns(o);return g=g==null?0:gr(Vt(g),0),Jt(function(_){var N=_[g],U=Al(_,0,g);return N&&Sl(U,N),ss(f,this,U)})}function B7(f,g,_){var N=!0,U=!0;if(typeof f!="function")throw new Ns(o);return Gn(_)&&(N="leading"in _?!!_.leading:N,U="trailing"in _?!!_.trailing:U),NN(f,g,{leading:N,maxWait:g,trailing:U})}function z7(f){return MN(f,1)}function j7(f,g){return Wb(Rb(g),f)}function H7(){if(!arguments.length)return[];var f=arguments[0];return Bt(f)?f:[f]}function V7(f){return Ds(f,p)}function $7(f,g){return g=typeof g=="function"?g:n,Ds(f,p,g)}function W7(f){return Ds(f,d|p)}function G7(f,g){return g=typeof g=="function"?g:n,Ds(f,d|p,g)}function X7(f,g){return g==null||xk(f,g,Er(g))}function ao(f,g){return f===g||f!==f&&g!==g}var q7=lv(vb),K7=lv(function(f,g){return f>=g}),lu=Ck(function(){return arguments}())?Ck:function(f){return Qn(f)&&Sn.call(f,"callee")&&!dk.call(f,"callee")},Bt=Se.isArray,Y7=GR?as(GR):iG;function Fi(f){return f!=null&&vv(f.length)&&!Na(f)}function ir(f){return Qn(f)&&Fi(f)}function J7(f){return f===!0||f===!1||Qn(f)&&vi(f)==pe}var Rl=d8||nS,Q7=XR?as(XR):sG;function Z7(f){return Qn(f)&&f.nodeType===1&&!tp(f)}function eX(f){if(f==null)return!0;if(Fi(f)&&(Bt(f)||typeof f=="string"||typeof f.splice=="function"||Rl(f)||Nd(f)||lu(f)))return!f.length;var g=ei(f);if(g==te||g==Pe)return!f.size;if(Zh(f))return!wb(f).length;for(var _ in f)if(Sn.call(f,_))return!1;return!0}function tX(f,g){return Yh(f,g)}function nX(f,g,_){_=typeof _=="function"?_:n;var N=_?_(f,g):n;return N===n?Yh(f,g,n,_):!!N}function Gb(f){if(!Qn(f))return!1;var g=vi(f);return g==je||g==ge||typeof f.message=="string"&&typeof f.name=="string"&&!tp(f)}function rX(f){return typeof f=="number"&&hk(f)}function Na(f){if(!Gn(f))return!1;var g=vi(f);return g==We||g==it||g==Z||g==wt}function DN(f){return typeof f=="number"&&f==Vt(f)}function vv(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=O}function Gn(f){var g=typeof f;return f!=null&&(g=="object"||g=="function")}function Qn(f){return f!=null&&typeof f=="object"}var IN=qR?as(qR):aG;function iX(f,g){return f===g||xb(f,g,Ob(g))}function sX(f,g,_){return _=typeof _=="function"?_:n,xb(f,g,Ob(g),_)}function oX(f){return LN(f)&&f!=+f}function aX(f){if($G(f))throw new Ut(s);return Mk(f)}function lX(f){return f===null}function cX(f){return f==null}function LN(f){return typeof f=="number"||Qn(f)&&vi(f)==pt}function tp(f){if(!Qn(f)||vi(f)!=ut)return!1;var g=$g(f);if(g===null)return!0;var _=Sn.call(g,"constructor")&&g.constructor;return typeof _=="function"&&_ instanceof _&&zg.call(_)==s8}var Xb=KR?as(KR):lG;function uX(f){return DN(f)&&f>=-O&&f<=O}var ON=YR?as(YR):cG;function yv(f){return typeof f=="string"||!Bt(f)&&Qn(f)&&vi(f)==ot}function cs(f){return typeof f=="symbol"||Qn(f)&&vi(f)==Y}var Nd=JR?as(JR):uG;function dX(f){return f===n}function fX(f){return Qn(f)&&ei(f)==ne}function hX(f){return Qn(f)&&vi(f)==X}var pX=lv(bb),mX=lv(function(f,g){return f<=g});function FN(f){if(!f)return[];if(Fi(f))return yv(f)?so(f):Oi(f);if(Hh&&f[Hh])return XW(f[Hh]());var g=ei(f),_=g==te?lb:g==Pe?Fg:Pd;return _(f)}function Pa(f){if(!f)return f===0?f:0;if(f=Os(f),f===Q||f===-Q){var g=f<0?-1:1;return g*F}return f===f?f:0}function Vt(f){var g=Pa(f),_=g%1;return g===g?_?g-_:g:0}function UN(f){return f?iu(Vt(f),0,ee):0}function Os(f){if(typeof f=="number")return f;if(cs(f))return D;if(Gn(f)){var g=typeof f.valueOf=="function"?f.valueOf():f;f=Gn(g)?g+"":g}if(typeof f!="string")return f===0?f:+f;f=rk(f);var _=io.test(f);return _||Or.test(f)?kW(f.slice(2),_?2:8):Cn.test(f)?D:+f}function BN(f){return Ho(f,Ui(f))}function gX(f){return f?iu(Vt(f),-O,O):f===0?f:0}function xn(f){return f==null?"":ls(f)}var vX=Ad(function(f,g){if(Zh(g)||Fi(g)){Ho(g,Er(g),f);return}for(var _ in g)Sn.call(g,_)&&Xh(f,_,g[_])}),zN=Ad(function(f,g){Ho(g,Ui(g),f)}),xv=Ad(function(f,g,_,N){Ho(g,Ui(g),f,N)}),yX=Ad(function(f,g,_,N){Ho(g,Er(g),f,N)}),xX=Ra(pb);function wX(f,g){var _=Td(f);return g==null?_:yk(_,g)}var bX=Jt(function(f,g){f=An(f);var _=-1,N=g.length,U=N>2?g[2]:n;for(U&&yi(g[0],g[1],U)&&(N=1);++_<N;)for(var G=g[_],re=Ui(G),le=-1,me=re.length;++le<me;){var Fe=re[le],Ue=f[Fe];(Ue===n||ao(Ue,Ed[Fe])&&!Sn.call(f,Fe))&&(f[Fe]=G[Fe])}return f}),SX=Jt(function(f){return f.push(n,rN),ss(jN,n,f)});function _X(f,g){return ZR(f,Pt(g,3),jo)}function EX(f,g){return ZR(f,Pt(g,3),gb)}function CX(f,g){return f==null?f:mb(f,Pt(g,3),Ui)}function MX(f,g){return f==null?f:_k(f,Pt(g,3),Ui)}function TX(f,g){return f&&jo(f,Pt(g,3))}function AX(f,g){return f&&gb(f,Pt(g,3))}function RX(f){return f==null?[]:ev(f,Er(f))}function kX(f){return f==null?[]:ev(f,Ui(f))}function qb(f,g,_){var N=f==null?n:su(f,g);return N===n?_:N}function NX(f,g){return f!=null&&oN(f,g,eG)}function Kb(f,g){return f!=null&&oN(f,g,tG)}var PX=Qk(function(f,g,_){g!=null&&typeof g.toString!="function"&&(g=jg.call(g)),f[g]=_},Jb(Bi)),DX=Qk(function(f,g,_){g!=null&&typeof g.toString!="function"&&(g=jg.call(g)),Sn.call(f,g)?f[g].push(_):f[g]=[_]},Pt),IX=Jt(Kh);function Er(f){return Fi(f)?gk(f):wb(f)}function Ui(f){return Fi(f)?gk(f,!0):dG(f)}function LX(f,g){var _={};return g=Pt(g,3),jo(f,function(N,U,G){Ta(_,g(N,U,G),N)}),_}function OX(f,g){var _={};return g=Pt(g,3),jo(f,function(N,U,G){Ta(_,U,g(N,U,G))}),_}var FX=Ad(function(f,g,_){tv(f,g,_)}),jN=Ad(function(f,g,_,N){tv(f,g,_,N)}),UX=Ra(function(f,g){var _={};if(f==null)return _;var N=!1;g=$n(g,function(G){return G=Tl(G,f),N||(N=G.length>1),G}),Ho(f,Ib(f),_),N&&(_=Ds(_,d|h|p,PG));for(var U=g.length;U--;)Mb(_,g[U]);return _});function BX(f,g){return HN(f,gv(Pt(g)))}var zX=Ra(function(f,g){return f==null?{}:hG(f,g)});function HN(f,g){if(f==null)return{};var _=$n(Ib(f),function(N){return[N]});return g=Pt(g),Dk(f,_,function(N,U){return g(N,U[0])})}function jX(f,g,_){g=Tl(g,f);var N=-1,U=g.length;for(U||(U=1,f=n);++N<U;){var G=f==null?n:f[Vo(g[N])];G===n&&(N=U,G=_),f=Na(G)?G.call(f):G}return f}function HX(f,g,_){return f==null?f:Jh(f,g,_)}function VX(f,g,_,N){return N=typeof N=="function"?N:n,f==null?f:Jh(f,g,_,N)}var VN=tN(Er),$N=tN(Ui);function $X(f,g,_){var N=Bt(f),U=N||Rl(f)||Nd(f);if(g=Pt(g,4),_==null){var G=f&&f.constructor;U?_=N?new G:[]:Gn(f)?_=Na(G)?Td($g(f)):{}:_={}}return(U?ks:jo)(f,function(re,le,me){return g(_,re,le,me)}),_}function WX(f,g){return f==null?!0:Mb(f,g)}function GX(f,g,_){return f==null?f:Uk(f,g,Rb(_))}function XX(f,g,_,N){return N=typeof N=="function"?N:n,f==null?f:Uk(f,g,Rb(_),N)}function Pd(f){return f==null?[]:ab(f,Er(f))}function qX(f){return f==null?[]:ab(f,Ui(f))}function KX(f,g,_){return _===n&&(_=g,g=n),_!==n&&(_=Os(_),_=_===_?_:0),g!==n&&(g=Os(g),g=g===g?g:0),iu(Os(f),g,_)}function YX(f,g,_){return g=Pa(g),_===n?(_=g,g=0):_=Pa(_),f=Os(f),nG(f,g,_)}function JX(f,g,_){if(_&&typeof _!="boolean"&&yi(f,g,_)&&(g=_=n),_===n&&(typeof g=="boolean"?(_=g,g=n):typeof f=="boolean"&&(_=f,f=n)),f===n&&g===n?(f=0,g=1):(f=Pa(f),g===n?(g=f,f=0):g=Pa(g)),f>g){var N=f;f=g,g=N}if(_||f%1||g%1){var U=pk();return Zr(f+U*(g-f+RW("1e-"+((U+"").length-1))),g)}return _b(f,g)}var QX=Rd(function(f,g,_){return g=g.toLowerCase(),f+(_?WN(g):g)});function WN(f){return Yb(xn(f).toLowerCase())}function GN(f){return f=xn(f),f&&f.replace($,HW).replace(xW,"")}function ZX(f,g,_){f=xn(f),g=ls(g);var N=f.length;_=_===n?N:iu(Vt(_),0,N);var U=_;return _-=g.length,_>=0&&f.slice(_,U)==g}function eq(f){return f=xn(f),f&&ke.test(f)?f.replace(et,VW):f}function tq(f){return f=xn(f),f&&bn.test(f)?f.replace(Dn,"\\$&"):f}var nq=Rd(function(f,g,_){return f+(_?"-":"")+g.toLowerCase()}),rq=Rd(function(f,g,_){return f+(_?" ":"")+g.toLowerCase()}),iq=Kk("toLowerCase");function sq(f,g,_){f=xn(f),g=Vt(g);var N=g?Sd(f):0;if(!g||N>=g)return f;var U=(g-N)/2;return av(qg(U),_)+f+av(Xg(U),_)}function oq(f,g,_){f=xn(f),g=Vt(g);var N=g?Sd(f):0;return g&&N<g?f+av(g-N,_):f}function aq(f,g,_){f=xn(f),g=Vt(g);var N=g?Sd(f):0;return g&&N<g?av(g-N,_)+f:f}function lq(f,g,_){return _||g==null?g=0:g&&(g=+g),m8(xn(f).replace(hn,""),g||0)}function cq(f,g,_){return(_?yi(f,g,_):g===n)?g=1:g=Vt(g),Eb(xn(f),g)}function uq(){var f=arguments,g=xn(f[0]);return f.length<3?g:g.replace(f[1],f[2])}var dq=Rd(function(f,g,_){return f+(_?"_":"")+g.toLowerCase()});function fq(f,g,_){return _&&typeof _!="number"&&yi(f,g,_)&&(g=_=n),_=_===n?ee:_>>>0,_?(f=xn(f),f&&(typeof g=="string"||g!=null&&!Xb(g))&&(g=ls(g),!g&&bd(f))?Al(so(f),0,_):f.split(g,_)):[]}var hq=Rd(function(f,g,_){return f+(_?" ":"")+Yb(g)});function pq(f,g,_){return f=xn(f),_=_==null?0:iu(Vt(_),0,f.length),g=ls(g),f.slice(_,_+g.length)==g}function mq(f,g,_){var N=V.templateSettings;_&&yi(f,g,_)&&(g=n),f=xn(f),g=xv({},g,N,nN);var U=xv({},g.imports,N.imports,nN),G=Er(U),re=ab(U,G),le,me,Fe=0,Ue=g.interpolate||he,$e="__p += '",at=cb((g.escape||he).source+"|"+Ue.source+"|"+(Ue===ft?Vn:he).source+"|"+(g.evaluate||he).source+"|$","g"),Mt="//# sourceURL="+(Sn.call(g,"sourceURL")?(g.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++EW+"]")+`
`;f.replace(at,function(Lt,en,on,us,xi,ds){return on||(on=us),$e+=f.slice(Fe,ds).replace(xe,$W),en&&(le=!0,$e+=`' +
__e(`+en+`) +
'`),xi&&(me=!0,$e+=`';
`+xi+`;
__p += '`),on&&($e+=`' +
((__t = (`+on+`)) == null ? '' : __t) +
'`),Fe=ds+Lt.length,Lt}),$e+=`';
`;var It=Sn.call(g,"variable")&&g.variable;if(!It)$e=`with (obj) {
`+$e+`
}
`;else if(Ct.test(It))throw new Ut(a);$e=(me?$e.replace(mt,""):$e).replace(ce,"$1").replace(st,"$1;"),$e="function("+(It||"obj")+`) {
`+(It?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(le?", __e = _.escape":"")+(me?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+$e+`return __p
}`;var Kt=qN(function(){return yn(G,Mt+"return "+$e).apply(n,re)});if(Kt.source=$e,Gb(Kt))throw Kt;return Kt}function gq(f){return xn(f).toLowerCase()}function vq(f){return xn(f).toUpperCase()}function yq(f,g,_){if(f=xn(f),f&&(_||g===n))return rk(f);if(!f||!(g=ls(g)))return f;var N=so(f),U=so(g),G=ik(N,U),re=sk(N,U)+1;return Al(N,G,re).join("")}function xq(f,g,_){if(f=xn(f),f&&(_||g===n))return f.slice(0,ak(f)+1);if(!f||!(g=ls(g)))return f;var N=so(f),U=sk(N,so(g))+1;return Al(N,0,U).join("")}function wq(f,g,_){if(f=xn(f),f&&(_||g===n))return f.replace(hn,"");if(!f||!(g=ls(g)))return f;var N=so(f),U=ik(N,so(g));return Al(N,U).join("")}function bq(f,g){var _=M,N=I;if(Gn(g)){var U="separator"in g?g.separator:U;_="length"in g?Vt(g.length):_,N="omission"in g?ls(g.omission):N}f=xn(f);var G=f.length;if(bd(f)){var re=so(f);G=re.length}if(_>=G)return f;var le=_-Sd(N);if(le<1)return N;var me=re?Al(re,0,le).join(""):f.slice(0,le);if(U===n)return me+N;if(re&&(le+=me.length-le),Xb(U)){if(f.slice(le).search(U)){var Fe,Ue=me;for(U.global||(U=cb(U.source,xn(Lr.exec(U))+"g")),U.lastIndex=0;Fe=U.exec(Ue);)var $e=Fe.index;me=me.slice(0,$e===n?le:$e)}}else if(f.indexOf(ls(U),le)!=le){var at=me.lastIndexOf(U);at>-1&&(me=me.slice(0,at))}return me+N}function Sq(f){return f=xn(f),f&&De.test(f)?f.replace(He,JW):f}var _q=Rd(function(f,g,_){return f+(_?" ":"")+g.toUpperCase()}),Yb=Kk("toUpperCase");function XN(f,g,_){return f=xn(f),g=_?n:g,g===n?GW(f)?e8(f):FW(f):f.match(g)||[]}var qN=Jt(function(f,g){try{return ss(f,n,g)}catch(_){return Gb(_)?_:new Ut(_)}}),Eq=Ra(function(f,g){return ks(g,function(_){_=Vo(_),Ta(f,_,$b(f[_],f))}),f});function Cq(f){var g=f==null?0:f.length,_=Pt();return f=g?$n(f,function(N){if(typeof N[1]!="function")throw new Ns(o);return[_(N[0]),N[1]]}):[],Jt(function(N){for(var U=-1;++U<g;){var G=f[U];if(ss(G[0],this,N))return ss(G[1],this,N)}})}function Mq(f){return J8(Ds(f,d))}function Jb(f){return function(){return f}}function Tq(f,g){return f==null||f!==f?g:f}var Aq=Jk(),Rq=Jk(!0);function Bi(f){return f}function Qb(f){return Tk(typeof f=="function"?f:Ds(f,d))}function kq(f){return Rk(Ds(f,d))}function Nq(f,g){return kk(f,Ds(g,d))}var Pq=Jt(function(f,g){return function(_){return Kh(_,f,g)}}),Dq=Jt(function(f,g){return function(_){return Kh(f,_,g)}});function Zb(f,g,_){var N=Er(g),U=ev(g,N);_==null&&!(Gn(g)&&(U.length||!N.length))&&(_=g,g=f,f=this,U=ev(g,Er(g)));var G=!(Gn(_)&&"chain"in _)||!!_.chain,re=Na(f);return ks(U,function(le){var me=g[le];f[le]=me,re&&(f.prototype[le]=function(){var Fe=this.__chain__;if(G||Fe){var Ue=f(this.__wrapped__),$e=Ue.__actions__=Oi(this.__actions__);return $e.push({func:me,args:arguments,thisArg:f}),Ue.__chain__=Fe,Ue}return me.apply(f,Sl([this.value()],arguments))})}),f}function Iq(){return Fr._===this&&(Fr._=o8),this}function eS(){}function Lq(f){return f=Vt(f),Jt(function(g){return Nk(g,f)})}var Oq=Nb($n),Fq=Nb(QR),Uq=Nb(nb);function KN(f){return Ub(f)?rb(Vo(f)):pG(f)}function Bq(f){return function(g){return f==null?n:su(f,g)}}var zq=Zk(),jq=Zk(!0);function tS(){return[]}function nS(){return!1}function Hq(){return{}}function Vq(){return""}function $q(){return!0}function Wq(f,g){if(f=Vt(f),f<1||f>O)return[];var _=ee,N=Zr(f,ee);g=Pt(g),f-=ee;for(var U=ob(N,g);++_<f;)g(_);return U}function Gq(f){return Bt(f)?$n(f,Vo):cs(f)?[f]:Oi(mN(xn(f)))}function Xq(f){var g=++i8;return xn(f)+g}var qq=ov(function(f,g){return f+g},0),Kq=Pb("ceil"),Yq=ov(function(f,g){return f/g},1),Jq=Pb("floor");function Qq(f){return f&&f.length?Zg(f,Bi,vb):n}function Zq(f,g){return f&&f.length?Zg(f,Pt(g,2),vb):n}function eK(f){return tk(f,Bi)}function tK(f,g){return tk(f,Pt(g,2))}function nK(f){return f&&f.length?Zg(f,Bi,bb):n}function rK(f,g){return f&&f.length?Zg(f,Pt(g,2),bb):n}var iK=ov(function(f,g){return f*g},1),sK=Pb("round"),oK=ov(function(f,g){return f-g},0);function aK(f){return f&&f.length?sb(f,Bi):0}function lK(f,g){return f&&f.length?sb(f,Pt(g,2)):0}return V.after=k7,V.ary=MN,V.assign=vX,V.assignIn=zN,V.assignInWith=xv,V.assignWith=yX,V.at=xX,V.before=TN,V.bind=$b,V.bindAll=Eq,V.bindKey=AN,V.castArray=H7,V.chain=_N,V.chunk=JG,V.compact=QG,V.concat=ZG,V.cond=Cq,V.conforms=Mq,V.constant=Jb,V.countBy=a7,V.create=wX,V.curry=RN,V.curryRight=kN,V.debounce=NN,V.defaults=bX,V.defaultsDeep=SX,V.defer=N7,V.delay=P7,V.difference=e9,V.differenceBy=t9,V.differenceWith=n9,V.drop=r9,V.dropRight=i9,V.dropRightWhile=s9,V.dropWhile=o9,V.fill=a9,V.filter=c7,V.flatMap=f7,V.flatMapDeep=h7,V.flatMapDepth=p7,V.flatten=xN,V.flattenDeep=l9,V.flattenDepth=c9,V.flip=D7,V.flow=Aq,V.flowRight=Rq,V.fromPairs=u9,V.functions=RX,V.functionsIn=kX,V.groupBy=m7,V.initial=f9,V.intersection=h9,V.intersectionBy=p9,V.intersectionWith=m9,V.invert=PX,V.invertBy=DX,V.invokeMap=v7,V.iteratee=Qb,V.keyBy=y7,V.keys=Er,V.keysIn=Ui,V.map=hv,V.mapKeys=LX,V.mapValues=OX,V.matches=kq,V.matchesProperty=Nq,V.memoize=mv,V.merge=FX,V.mergeWith=jN,V.method=Pq,V.methodOf=Dq,V.mixin=Zb,V.negate=gv,V.nthArg=Lq,V.omit=UX,V.omitBy=BX,V.once=I7,V.orderBy=x7,V.over=Oq,V.overArgs=L7,V.overEvery=Fq,V.overSome=Uq,V.partial=Wb,V.partialRight=PN,V.partition=w7,V.pick=zX,V.pickBy=HN,V.property=KN,V.propertyOf=Bq,V.pull=x9,V.pullAll=bN,V.pullAllBy=w9,V.pullAllWith=b9,V.pullAt=S9,V.range=zq,V.rangeRight=jq,V.rearg=O7,V.reject=_7,V.remove=_9,V.rest=F7,V.reverse=Hb,V.sampleSize=C7,V.set=HX,V.setWith=VX,V.shuffle=M7,V.slice=E9,V.sortBy=R7,V.sortedUniq=N9,V.sortedUniqBy=P9,V.split=fq,V.spread=U7,V.tail=D9,V.take=I9,V.takeRight=L9,V.takeRightWhile=O9,V.takeWhile=F9,V.tap=Q9,V.throttle=B7,V.thru=fv,V.toArray=FN,V.toPairs=VN,V.toPairsIn=$N,V.toPath=Gq,V.toPlainObject=BN,V.transform=$X,V.unary=z7,V.union=U9,V.unionBy=B9,V.unionWith=z9,V.uniq=j9,V.uniqBy=H9,V.uniqWith=V9,V.unset=WX,V.unzip=Vb,V.unzipWith=SN,V.update=GX,V.updateWith=XX,V.values=Pd,V.valuesIn=qX,V.without=$9,V.words=XN,V.wrap=j7,V.xor=W9,V.xorBy=G9,V.xorWith=X9,V.zip=q9,V.zipObject=K9,V.zipObjectDeep=Y9,V.zipWith=J9,V.entries=VN,V.entriesIn=$N,V.extend=zN,V.extendWith=xv,Zb(V,V),V.add=qq,V.attempt=qN,V.camelCase=QX,V.capitalize=WN,V.ceil=Kq,V.clamp=KX,V.clone=V7,V.cloneDeep=W7,V.cloneDeepWith=G7,V.cloneWith=$7,V.conformsTo=X7,V.deburr=GN,V.defaultTo=Tq,V.divide=Yq,V.endsWith=ZX,V.eq=ao,V.escape=eq,V.escapeRegExp=tq,V.every=l7,V.find=u7,V.findIndex=vN,V.findKey=_X,V.findLast=d7,V.findLastIndex=yN,V.findLastKey=EX,V.floor=Jq,V.forEach=EN,V.forEachRight=CN,V.forIn=CX,V.forInRight=MX,V.forOwn=TX,V.forOwnRight=AX,V.get=qb,V.gt=q7,V.gte=K7,V.has=NX,V.hasIn=Kb,V.head=wN,V.identity=Bi,V.includes=g7,V.indexOf=d9,V.inRange=YX,V.invoke=IX,V.isArguments=lu,V.isArray=Bt,V.isArrayBuffer=Y7,V.isArrayLike=Fi,V.isArrayLikeObject=ir,V.isBoolean=J7,V.isBuffer=Rl,V.isDate=Q7,V.isElement=Z7,V.isEmpty=eX,V.isEqual=tX,V.isEqualWith=nX,V.isError=Gb,V.isFinite=rX,V.isFunction=Na,V.isInteger=DN,V.isLength=vv,V.isMap=IN,V.isMatch=iX,V.isMatchWith=sX,V.isNaN=oX,V.isNative=aX,V.isNil=cX,V.isNull=lX,V.isNumber=LN,V.isObject=Gn,V.isObjectLike=Qn,V.isPlainObject=tp,V.isRegExp=Xb,V.isSafeInteger=uX,V.isSet=ON,V.isString=yv,V.isSymbol=cs,V.isTypedArray=Nd,V.isUndefined=dX,V.isWeakMap=fX,V.isWeakSet=hX,V.join=g9,V.kebabCase=nq,V.last=Ls,V.lastIndexOf=v9,V.lowerCase=rq,V.lowerFirst=iq,V.lt=pX,V.lte=mX,V.max=Qq,V.maxBy=Zq,V.mean=eK,V.meanBy=tK,V.min=nK,V.minBy=rK,V.stubArray=tS,V.stubFalse=nS,V.stubObject=Hq,V.stubString=Vq,V.stubTrue=$q,V.multiply=iK,V.nth=y9,V.noConflict=Iq,V.noop=eS,V.now=pv,V.pad=sq,V.padEnd=oq,V.padStart=aq,V.parseInt=lq,V.random=JX,V.reduce=b7,V.reduceRight=S7,V.repeat=cq,V.replace=uq,V.result=jX,V.round=sK,V.runInContext=fe,V.sample=E7,V.size=T7,V.snakeCase=dq,V.some=A7,V.sortedIndex=C9,V.sortedIndexBy=M9,V.sortedIndexOf=T9,V.sortedLastIndex=A9,V.sortedLastIndexBy=R9,V.sortedLastIndexOf=k9,V.startCase=hq,V.startsWith=pq,V.subtract=oK,V.sum=aK,V.sumBy=lK,V.template=mq,V.times=Wq,V.toFinite=Pa,V.toInteger=Vt,V.toLength=UN,V.toLower=gq,V.toNumber=Os,V.toSafeInteger=gX,V.toString=xn,V.toUpper=vq,V.trim=yq,V.trimEnd=xq,V.trimStart=wq,V.truncate=bq,V.unescape=Sq,V.uniqueId=Xq,V.upperCase=_q,V.upperFirst=Yb,V.each=EN,V.eachRight=CN,V.first=wN,Zb(V,function(){var f={};return jo(V,function(g,_){Sn.call(V.prototype,_)||(f[_]=g)}),f}(),{chain:!1}),V.VERSION=r,ks(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){V[f].placeholder=V}),ks(["drop","take"],function(f,g){rn.prototype[f]=function(_){_=_===n?1:gr(Vt(_),0);var N=this.__filtered__&&!g?new rn(this):this.clone();return N.__filtered__?N.__takeCount__=Zr(_,N.__takeCount__):N.__views__.push({size:Zr(_,ee),type:f+(N.__dir__<0?"Right":"")}),N},rn.prototype[f+"Right"]=function(_){return this.reverse()[f](_).reverse()}}),ks(["filter","map","takeWhile"],function(f,g){var _=g+1,N=_==j||_==q;rn.prototype[f]=function(U){var G=this.clone();return G.__iteratees__.push({iteratee:Pt(U,3),type:_}),G.__filtered__=G.__filtered__||N,G}}),ks(["head","last"],function(f,g){var _="take"+(g?"Right":"");rn.prototype[f]=function(){return this[_](1).value()[0]}}),ks(["initial","tail"],function(f,g){var _="drop"+(g?"":"Right");rn.prototype[f]=function(){return this.__filtered__?new rn(this):this[_](1)}}),rn.prototype.compact=function(){return this.filter(Bi)},rn.prototype.find=function(f){return this.filter(f).head()},rn.prototype.findLast=function(f){return this.reverse().find(f)},rn.prototype.invokeMap=Jt(function(f,g){return typeof f=="function"?new rn(this):this.map(function(_){return Kh(_,f,g)})}),rn.prototype.reject=function(f){return this.filter(gv(Pt(f)))},rn.prototype.slice=function(f,g){f=Vt(f);var _=this;return _.__filtered__&&(f>0||g<0)?new rn(_):(f<0?_=_.takeRight(-f):f&&(_=_.drop(f)),g!==n&&(g=Vt(g),_=g<0?_.dropRight(-g):_.take(g-f)),_)},rn.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},rn.prototype.toArray=function(){return this.take(ee)},jo(rn.prototype,function(f,g){var _=/^(?:filter|find|map|reject)|While$/.test(g),N=/^(?:head|last)$/.test(g),U=V[N?"take"+(g=="last"?"Right":""):g],G=N||/^find/.test(g);U&&(V.prototype[g]=function(){var re=this.__wrapped__,le=N?[1]:arguments,me=re instanceof rn,Fe=le[0],Ue=me||Bt(re),$e=function(en){var on=U.apply(V,Sl([en],le));return N&&at?on[0]:on};Ue&&_&&typeof Fe=="function"&&Fe.length!=1&&(me=Ue=!1);var at=this.__chain__,Mt=!!this.__actions__.length,It=G&&!at,Kt=me&&!Mt;if(!G&&Ue){re=Kt?re:new rn(this);var Lt=f.apply(re,le);return Lt.__actions__.push({func:fv,args:[$e],thisArg:n}),new Ps(Lt,at)}return It&&Kt?f.apply(this,le):(Lt=this.thru($e),It?N?Lt.value()[0]:Lt.value():Lt)})}),ks(["pop","push","shift","sort","splice","unshift"],function(f){var g=Ug[f],_=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",N=/^(?:pop|shift)$/.test(f);V.prototype[f]=function(){var U=arguments;if(N&&!this.__chain__){var G=this.value();return g.apply(Bt(G)?G:[],U)}return this[_](function(re){return g.apply(Bt(re)?re:[],U)})}}),jo(rn.prototype,function(f,g){var _=V[g];if(_){var N=_.name+"";Sn.call(Md,N)||(Md[N]=[]),Md[N].push({name:g,func:_})}}),Md[sv(n,v).name]=[{name:"wrapper",func:n}],rn.prototype.clone=S8,rn.prototype.reverse=_8,rn.prototype.value=E8,V.prototype.at=Z9,V.prototype.chain=e7,V.prototype.commit=t7,V.prototype.next=n7,V.prototype.plant=i7,V.prototype.reverse=s7,V.prototype.toJSON=V.prototype.valueOf=V.prototype.value=o7,V.prototype.first=V.prototype.head,Hh&&(V.prototype[Hh]=r7),V},_d=t8();eu?((eu.exports=_d)._=_d,Qw._=_d):Fr._=_d}).call(qa)})(b0,b0.exports);var Hke=b0.exports;const Vke=["#2563eb","#000000","#FF0000","#00FF00","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#A52A2A"],$ke=({whiteboard:t,onCanvasChange:e,onSave:n,whiteboardColor:r,onAutoSave:i,isMobile:s=!1,onScaledHeightChange:o,updatedAt:a,aiEnabled:l})=>{const c=b.useRef(null);to();const{theme:u}=no(),d=u==="light",[h,p]=b.useState("pen"),[x,w]=b.useState("#2563eb"),[y,v]=b.useState(s?3:2),[S,E]=b.useState(!1),[C,T]=b.useState(1),[A,k]=b.useState(null),[R,P]=b.useState(0),[M,I]=b.useState(!1),[z,H]=b.useState([]),[j,J]=b.useState(0),[q,Q]=b.useState(!1),[O,F]=b.useState(!1),[D,ee]=b.useState({x:0,y:0}),[W,B]=b.useState(1),[K,ie]=b.useState(0),[oe,Z]=b.useState({x:0,y:0}),[pe,ye]=b.useState({width:t.canvas_width||500,height:t.canvas_height||500}),ge=b.useRef(null);b.useEffect(()=>{var L;if(c.current&&t.canvas_data&&!M)try{console.log(" Loading canvas data:",{dataType:typeof t.canvas_data,isArray:Array.isArray(t.canvas_data),dataLength:Array.isArray(t.canvas_data)?t.canvas_data.length:"N/A",dataPreview:typeof t.canvas_data=="string"?t.canvas_data.substring(0,300):JSON.stringify(t.canvas_data).substring(0,300)});let ne=t.canvas_data;if(typeof ne=="string")try{const X=JSON.parse(ne);if(Array.isArray(X))ne=X;else if(X&&typeof X=="object"&&X.paths)ne=X.paths;else throw new Error("Invalid parsed format")}catch(X){console.warn(" Failed to parse string canvas data:",X),console.warn(" Corrupted data preview:",((L=ne==null?void 0:ne.substring)==null?void 0:L.call(ne,0,200))||"N/A"),ne=[]}else ne&&typeof ne=="object"&&ne.paths?(console.log(" Data is in object format with paths, extracting array"),ne=ne.paths):Array.isArray(ne)||(console.warn(" Unknown data format or not an array, using empty array"),ne=[]);Array.isArray(ne)||(console.warn(" Data is not an array after processing, forcing empty array:",typeof ne),ne=[]);try{const X=JSON.stringify(ne);JSON.parse(X)}catch(X){console.error(" Canvas data fails JSON validation, using empty array:",X),ne=[]}if(ne.length>0){const X=ne[0];(!X.drawMode||!X.strokeColor||!X.strokeWidth)&&(console.log(" Reconstructing missing metadata for canvas paths"),ne=ne.map((se,ae)=>({drawMode:!0,strokeColor:se.strokeColor||"#2563eb",strokeWidth:se.strokeWidth||2,paths:se.paths||se||[]})))}if(console.log(" Final data to load:",{isArray:Array.isArray(ne),length:Array.isArray(ne)?ne.length:"N/A",dataPreview:JSON.stringify(ne).substring(0,300)}),Array.isArray(ne)){const X=console.warn,se=console.error;console.warn=(...ae)=>{var Ce,Re;(Re=(Ce=ae[0])==null?void 0:Ce.includes)!=null&&Re.call(Ce,"No stroke found")||X.apply(console,ae)},console.error=(...ae)=>{var Ce,Re;(Re=(Ce=ae[0])==null?void 0:Ce.includes)!=null&&Re.call(Ce,"No stroke found")||se.apply(console,ae)},c.current.loadPaths(ne),I(!0),H(ne),J(Date.now()),A&&(clearTimeout(A),k(null),console.log(" Cleared pending auto-save timeout after loading data")),console.log(" Canvas data loaded successfully"),console.warn=X,console.error=se}else console.warn(" Invalid canvas data format, using empty canvas:",{dataType:typeof ne,dataValue:ne}),c.current.loadPaths([]),I(!0),H([]),J(Date.now()),A&&(clearTimeout(A),k(null))}catch(ne){console.error(" Failed to load canvas data:",ne);try{c.current.loadPaths([]),I(!0),H([]),J(Date.now()),A&&(clearTimeout(A),k(null)),console.log(" Auto-fixing corrupted canvas data after load error...");try{n([])}catch(X){console.error(" Failed to auto-fix corrupted data:",X)}}catch(X){console.error(" Failed to load empty canvas:",X)}}},[t.canvas_data,M,A]),b.useEffect(()=>{if(s&&ge.current){const L=new ResizeObserver(ne=>{for(let X of ne){const se=X.contentRect.width;if(t.canvas_width&&se>0){const ae=se/t.canvas_width;T(ae),o&&o(t.canvas_height*ae)}}});return L.observe(ge.current),()=>L.disconnect()}else s||T(1)},[s,t.canvas_width]),b.useEffect(()=>{if(!ge.current)return;const L=new ResizeObserver(X=>{for(let se of X){const{width:ae,height:Ce}=se.contentRect;ae>0&&Ce>0&&(console.log(" Container dimensions changed:",{width:ae,height:Ce}),ye({width:Math.floor(ae),height:Math.floor(Ce)}))}});L.observe(ge.current);const ne=ge.current.getBoundingClientRect();return ne.width>0&&ne.height>0&&(console.log(" Initial container dimensions:",{width:ne.width,height:ne.height}),ye({width:Math.floor(ne.width),height:Math.floor(ne.height)})),()=>L.disconnect()},[a]),b.useEffect(()=>{console.log(" Canvas dimensions updated:",pe)},[pe]);const je=b.useCallback(Hke.debounce(async(L,ne)=>{try{if(!Array.isArray(L)){console.warn(" Invalid canvas data format - not an array:",typeof L);return}const X=JSON.stringify(L);JSON.parse(X),console.log(" Auto-saving canvas data:",{pathCount:L.length,dataPreview:X.substring(0,100),whiteboardId:ne}),await n({canvas_data:L,updated_at:new Date().toISOString()}),console.log(" Canvas auto-save completed successfully")}catch(X){console.error(" Canvas auto-save failed:",X),X instanceof Error&&(X.message.includes("JSON")||X.message.includes("stringify"))&&console.error(" Canvas data is corrupted and cannot be saved. This may be due to a drawing library error.")}},500),[n]),We=b.useCallback(async()=>{if(console.log(" handleDrawingEnd called."),E(!1),!c.current)return;const L=Date.now()-j;if(L<2e3){console.log(" Skipping auto-save - too soon after canvas load:",{timeSinceLoad:L});return}try{const ne=await c.current.exportPaths();if(console.log(" WhiteboardCanvas: Raw exported paths:",ne),!Array.isArray(ne)){console.warn(" Invalid canvas data format from exportPaths - not an array:",typeof ne);return}try{const Ce=JSON.stringify(ne);JSON.parse(Ce)}catch(Ce){console.error(" Canvas data is corrupted and cannot be processed:",Ce);return}let X=[];if(t.canvas_data){if(Array.isArray(t.canvas_data))X=t.canvas_data;else if(typeof t.canvas_data=="object"&&t.canvas_data.paths)X=t.canvas_data.paths||[];else if(typeof t.canvas_data=="string")try{const Ce=JSON.parse(t.canvas_data);X=Array.isArray(Ce)?Ce:Ce.paths||[]}catch{X=[]}}const se=JSON.stringify(ne),ae=JSON.stringify(X);if(console.log(" Canvas change detection:",{currentPaths:(ne==null?void 0:ne.length)||0,savedPaths:(X==null?void 0:X.length)||0,hasChanges:se!==ae,currentDataPreview:se.substring(0,100),savedDataPreview:ae.substring(0,100),currentDataFull:se,savedDataFull:ae}),se!==ae){if(console.log(" Canvas changes detected, scheduling auto-save..."),ne.length===0&&(z.length>0||X.length>0)&&!q){console.warn(" Preventing accidental canvas clear - expected content but got empty data",{expectedPaths:Math.max(z.length,X.length),currentPaths:ne.length,timeSinceLoad:Date.now()-j,lastLoadedCount:z.length,savedDataCount:X.length,isIntentionalClear:q});return}else q&&ne.length===0&&console.log(" Allowing intentional canvas clear");A&&clearTimeout(A);const Ce=setTimeout(()=>{je(ne,t.id)},3e3);k(Ce)}else console.log(" No canvas changes detected, skipping auto-save")}catch(ne){console.error("Failed to check canvas changes:",ne)}},[A,je,t.canvas_data,c,z,j,q]);b.useEffect(()=>()=>{A&&clearTimeout(A)},[A]);const it=L=>{p(L),c.current&&(L==="eraser"?c.current.eraseMode(!0):c.current.eraseMode(!1))},te=L=>{w(L),h==="pen"&&(p("pen"),c.current&&c.current.eraseMode(!1))},pt=L=>{v(L[0])},Be=()=>{c.current&&c.current.undo()},ut=()=>{c.current&&c.current.redo()},Xe=async()=>{if(c.current){Q(!0),c.current.clearCanvas();try{await n({canvas_data:[],updated_at:new Date().toISOString()}),H([]),console.log(" Canvas cleared and saved successfully")}catch(L){console.error(" Failed to save cleared canvas:",L)}finally{setTimeout(()=>Q(!1),1e3)}}},wt=(L,ne)=>{const X=L.clientX-ne.clientX,se=L.clientY-ne.clientY;return Math.sqrt(X*X+se*se)},Ae=(L,ne)=>({x:(L.clientX+ne.clientX)/2,y:(L.clientY+ne.clientY)/2}),Pe=L=>{if(s)if(console.log(`Touch start: ${L.touches.length} fingers`),L.touches.length===2){L.preventDefault(),L.stopPropagation(),F(!0),E(!1);const ne=wt(L.touches[0],L.touches[1]);ie(ne);const X=Ae(L.touches[0],L.touches[1]);Z(X),console.log("Multi-touch enabled for pan/zoom")}else L.touches.length===1&&(O||console.log("Single finger - drawing mode"))},ot=L=>{if(s)if(L.touches.length===2){if(L.preventDefault(),L.stopPropagation(),!O){F(!0),E(!1);const Re=wt(L.touches[0],L.touches[1]);ie(Re);const ue=Ae(L.touches[0],L.touches[1]);Z(ue),console.log("Multi-touch enabled during move");return}const ne=wt(L.touches[0],L.touches[1]),X=Ae(L.touches[0],L.touches[1]);if(K>0){const Re=ne/K,ue=Math.min(3,Math.max(.25,W*Re));B(ue),ie(ne)}const se=X.x-oe.x,ae=X.y-oe.y,Ce={x:D.x+se*.8,y:D.y+ae*.8};ee(Ce),Z(X)}else O&&L.touches.length===1&&(L.preventDefault(),L.stopPropagation())},Y=L=>{s&&(console.log(`Touch end: ${L.touches.length} fingers remaining`),L.touches.length<2&&O&&(console.log("Exiting multi-touch mode"),F(!1),ie(0),E(!1)))};return b.useEffect(()=>{if(!s)return;const L=ne=>{S&&!O&&ne.preventDefault()};return document.addEventListener("touchmove",L,{passive:!1}),()=>document.removeEventListener("touchmove",L)},[S,O,s]),m.jsxs("div",{className:"flex flex-col h-full relative","data-whiteboard-canvas":!0,tabIndex:-1,children:[m.jsx("style",{children:`
          .react-sketch-canvas {
            border: none !important;
            outline: none !important;
            box-shadow: none !important;
            pointer-events: all !important; /* Diagnostic: Ensure canvas receives pointer events */
            z-index: 1000; /* Diagnostic: Bring canvas to front */
          }
          .react-sketch-canvas canvas {
            border: none !important;
            outline: none !important;
            box-shadow: none !important;
            pointer-events: all !important; /* Diagnostic: Ensure canvas receives pointer events */
            z-index: 1000; /* Diagnostic: Bring canvas to front */
          }
          .whiteboard-drawing-area {
            pointer-events: all !important; /* Diagnostic: Ensure parent receives pointer events */
            z-index: 999; /* Diagnostic: Bring parent to front */
          }
        `}),m.jsx("div",{className:"flex items-center justify-between p-2 border-b",style:{backgroundColor:d?"#f9fafb":"#334155",borderBottomColor:d?"#e5e7eb":"#475569"},children:m.jsx("div",{className:"flex flex-col gap-2 w-full",children:m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[m.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white rounded-md border",style:{backgroundColor:d?"white":"#475569",borderColor:d?"#d1d5db":"#64748b"},children:[m.jsx(nt,{variant:"ghost",size:"sm",onClick:()=>it("pen"),className:_t("h-8 w-8 p-0",h==="pen"?"bg-blue-600 hover:bg-blue-700 text-white":""),style:h!=="pen"?{backgroundColor:"transparent",color:d?"#374151":"#e5e7eb"}:{},onMouseEnter:L=>{h!=="pen"&&(L.currentTarget.style.backgroundColor=d?"#f3f4f6":"#64748b")},onMouseLeave:L=>{h!=="pen"&&(L.currentTarget.style.backgroundColor="transparent")},children:m.jsx(_B,{className:"h-4 w-4"})}),m.jsx(nt,{variant:"ghost",size:"sm",onClick:()=>it("eraser"),className:_t("h-8 w-8 p-0",h==="eraser"?"bg-blue-600 hover:bg-blue-700 text-white":""),style:h!=="eraser"?{backgroundColor:"transparent",color:d?"#374151":"#e5e7eb"}:{},onMouseEnter:L=>{h!=="eraser"&&(L.currentTarget.style.backgroundColor=d?"#f3f4f6":"#64748b")},onMouseLeave:L=>{h!=="eraser"&&(L.currentTarget.style.backgroundColor="transparent")},children:m.jsx(EB,{className:"h-4 w-4"})})]}),m.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white rounded-md border",style:{backgroundColor:d?"white":"#475569",borderColor:d?"#d1d5db":"#64748b"},children:[m.jsx("span",{className:"text-xs font-medium min-w-[20px]",style:{color:d?"#374151":"#e5e7eb"},children:y}),m.jsx(uW,{value:[y],onValueChange:pt,max:20,min:1,step:1,style:{"--slider-thumb-bg":d?"#ffffff":"#475569"},className:`w-12 sm:w-24 ${d?"[&>*]:bg-gray-200 [&>*>*]:bg-blue-600 [&>*:last-child]:border-blue-600":"[&>*]:bg-gray-600 [&>*>*]:bg-blue-500 [&>*:last-child]:border-blue-500"} [&>*:last-child]:bg-[var(--slider-thumb-bg)]`})]})]}),h==="pen"&&m.jsx("div",{className:"flex items-center gap-1 p-1 bg-white rounded-md border order-last sm:order-none",style:{backgroundColor:d?"white":"#475569",borderColor:d?"#d1d5db":"#64748b"},children:Vke.map(L=>m.jsx("button",{onClick:()=>te(L),className:`w-6 h-6 rounded-sm border-2 ${x===L?d?"border-gray-800":"border-gray-200":d?"border-gray-300":"border-gray-600"}`,style:{backgroundColor:L},"aria-label":`Select ${L} color`},L))}),m.jsx("div",{className:"flex-grow hidden sm:block"}),m.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1",children:[m.jsx(nt,{variant:"ghost",size:"sm",onClick:Be,className:"h-8 w-8 p-0",style:{backgroundColor:"transparent",color:d?"#374151":"#e5e7eb"},onMouseEnter:L=>L.currentTarget.style.backgroundColor=d?"#f3f4f6":"#64748b",onMouseLeave:L=>L.currentTarget.style.backgroundColor="transparent",children:m.jsx(Bee,{className:"h-4 w-4"})}),m.jsx(nt,{variant:"ghost",size:"sm",onClick:ut,className:"h-8 w-8 p-0",style:{backgroundColor:"transparent",color:d?"#374151":"#e5e7eb"},onMouseEnter:L=>L.currentTarget.style.backgroundColor=d?"#f3f4f6":"#64748b",onMouseLeave:L=>L.currentTarget.style.backgroundColor="transparent",children:m.jsx(Pee,{className:"h-4 w-4"})}),m.jsx(nt,{variant:"ghost",size:"sm",onClick:Xe,className:"h-8 w-8 p-0",style:{backgroundColor:"transparent",color:d?"#374151":"#e5e7eb"},onMouseEnter:L=>L.currentTarget.style.backgroundColor=d?"#f3f4f6":"#64748b",onMouseLeave:L=>L.currentTarget.style.backgroundColor="transparent",children:m.jsx(Fo,{className:"h-4 w-4"})})]})]})})}),m.jsxs("div",{className:"flex-1 relative overflow-hidden",style:{paddingBottom:a?"36px":"8px"},children:[m.jsx("div",{ref:ge,className:"w-full h-full relative whiteboard-drawing-area",onTouchStart:Pe,onTouchMove:ot,onTouchEnd:L=>{Y(L),S&&!O&&We()},style:{transform:s?`translate(${D.x}px, ${D.y}px) scale(${W})`:"none",transformOrigin:"center",transition:O?"none":"transform 0.1s ease-out",cursor:"crosshair"},children:m.jsx(_ke,{style:{width:"100%",height:"100%",border:"none",outline:"none",boxShadow:"none",backgroundColor:"#ffffff"},width:`${pe.width}px`,height:`${pe.height}px`,strokeWidth:y,strokeColor:x,canvasColor:"#ffffff",ref:c,onStroke:()=>E(!0)})}),a&&m.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-2 md:px-3 py-1 md:py-2 z-10 border-t",style:{borderTopColor:d?"#e5e7eb":"#475569",backgroundColor:d?"#ffffff":"#1e293b",fontSize:"10px"},children:m.jsx("div",{className:"flex items-center justify-between",children:m.jsxs("div",{className:`${d?"text-gray-500":"text-gray-400"} truncate text-xs md:text-xs`,style:{fontFamily:'"Raleway", sans-serif',fontSize:"inherit"},children:[m.jsx("span",{className:"hidden sm:inline",children:"Last edited: "}),m.jsx("span",{className:"sm:hidden",children:"Edited: "}),$$(a)]})})})]})]})},Wke=({currentCategory:t,categoryColor:e,itemColor:n,existingCategories:r,isEditingCategory:i,showNewCategoryInput:s,newCategory:o,setNewCategory:a,setIsEditingCategory:l,setShowNewCategoryInput:c,handleEditCategory:u,handleAddCustomCategory:d,handleUpdateCategoryColor:h})=>{const p=t&&t!==""?t:"General",x=e||n||"#808080",w=()=>"#ffffff";return m.jsx("div",{className:"mb-2 px-6 flex items-center gap-2",children:i?m.jsx("div",{className:"mb-2 w-full",children:s?m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(Yn,{value:o,onChange:y=>a(y.target.value),placeholder:"Enter new category",className:"h-8",autoFocus:!0,onKeyDown:y=>{y.key==="Enter"&&d()}}),m.jsx(nt,{size:"sm",variant:"ghost",onClick:d,className:"h-8 w-8 p-0",children:m.jsx(eo,{className:"h-4 w-4"})}),m.jsx(nt,{size:"sm",variant:"ghost",onClick:()=>{c(!1),a("")},className:"h-8 w-8 p-0",children:m.jsx(Fo,{className:"h-4 w-4"})})]}):m.jsxs("div",{className:"flex flex-col space-y-2",children:[m.jsxs(Wc,{onValueChange:u,defaultValue:p,children:[m.jsx(gl,{className:"h-8",style:{fontFamily:'"Raleway", sans-serif'},children:m.jsx(Gc,{placeholder:"Select a category"})}),m.jsxs(vl,{children:[r.map(y=>m.jsx(ar,{value:y.name,style:{fontFamily:'"Raleway", sans-serif'},children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"inline-block w-3 h-3 rounded-full border",style:{backgroundColor:y.color_value}}),y.name]})},y.name)),m.jsx(ar,{value:"__custom__",className:"text-blue-600",style:{fontFamily:'"Raleway", sans-serif'},children:"+ Add new category"})]})]}),p!=="__custom__"&&m.jsx("div",{className:"flex items-center gap-2 ml-2",children:m.jsx(ml,{color:x,onChange:y=>h(p,y),onSave:y=>h(p,y),children:m.jsxs(nt,{variant:"outline",size:"sm",className:"h-8 px-3 flex items-center gap-2",children:[m.jsx("span",{className:"inline-block w-3 h-3 rounded-full border",style:{backgroundColor:x}}),"Category Color"]})})}),m.jsx(nt,{size:"sm",variant:"ghost",className:"self-start",style:{fontFamily:'"Raleway", sans-serif'},onClick:()=>l(!1),children:"Cancel"})]})}):m.jsx(PA,{variant:"outline",className:"cursor-pointer hover:opacity-80 transition-opacity border-none",style:{fontFamily:'"Raleway", sans-serif',backgroundColor:x,color:w()},onClick:()=>l(!0),children:p})})},Gke=400,dW=({whiteboard:t,onUpdate:e,onDelete:n,existingCategories:r,isCollapsed:i,onToggleCollapsed:s,updateCategory:o})=>{var D;const a=(D=r.find(ee=>ee.name===t.category))==null?void 0:D.color_value,l=t.color_value||a||"#3B82F6",[c,u]=b.useState(!1),[d,h]=b.useState(void 0),p=b.useRef(null);b.useEffect(()=>{const ee=()=>{u(window.innerWidth<768)};return ee(),window.addEventListener("resize",ee),()=>window.removeEventListener("resize",ee)},[]);const{whiteboardTitle:x,isCollapsibleOpen:w,setIsCollapsibleOpen:y,isEditing:v,setIsEditing:S,editTitle:E,setEditTitle:C,handleEditTitle:T,handleDeleteWhiteboard:A,handleSaveWhiteboardColor:k,isSavingColor:R,isEditingCategory:P,setIsEditingCategory:M,showNewCategoryInput:I,setShowNewCategoryInput:z,newCategory:H,setNewCategory:j,handleEditCategory:J,handleAddCustomCategory:q,handleCanvasChange:Q,handleCanvasSave:O,titleEditRef:F}=yke({whiteboard:t,onUpdate:e,onDelete:n,isCollapsed:i,onToggleCollapsed:s,updateCategory:o});return m.jsx(AA,{open:w,onOpenChange:ee=>{s&&i!==void 0?!i!==ee&&s():y(ee)},className:"w-full",style:{"--whiteboard-color":l},children:m.jsxs(bo,{className:"w-full shadow-sm h-full flex flex-col",style:{border:"none"},children:[m.jsx(ta,{className:"pb-2",children:m.jsx("div",{className:"flex justify-between items-center",children:v?m.jsxs("div",{className:"flex gap-1 w-full",children:[m.jsx(Yn,{ref:F,value:E,onChange:ee=>C(ee.target.value),className:"h-8",autoFocus:!0,onKeyDown:ee=>{ee.key==="Enter"&&T()}}),m.jsx(nt,{size:"sm",variant:"ghost",onClick:T,className:"h-8 w-8 p-0",children:m.jsx(eo,{className:"h-4 w-4"})}),m.jsx(nt,{size:"sm",variant:"ghost",onClick:()=>S(!1),className:"h-8 w-8 p-0",children:m.jsx(Fo,{className:"h-4 w-4"})})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(ml,{color:l,onChange:ee=>{setCurrentColorPreview(ee)},onSave:async ee=>{if(ee!==(t.color_value||"#3B82F6"))try{await k(ee)}catch{toast({title:"Error",description:"Could not save color. Reverting preview.",variant:"destructive"}),setCurrentColorPreview(t.color_value||"#3B82F6")}},children:m.jsxs(nt,{variant:"ghost",size:"icon",className:"h-6 w-6 p-0 rounded-full flex items-center justify-center relative","aria-label":"Change whiteboard color",disabled:R,children:[m.jsx("span",{className:"inline-block w-3 h-3 rounded-full border border-border transition-colors duration-150",style:{backgroundColor:l}}),R&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50 rounded-full",children:m.jsx("div",{className:"h-2 w-2 animate-spin rounded-full border-2 border-solid border-current border-r-transparent"})})]})}),m.jsx(Sh,{className:"h-4 w-4 text-muted-foreground"}),m.jsx(na,{className:"text-lg font-medium cursor-pointer",style:{fontFamily:'"Raleway", sans-serif'},onClick:()=>S(!0),children:x})]}),m.jsxs("div",{className:"flex",children:[m.jsx(RA,{asChild:!0,children:m.jsx(nt,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:m.jsx(Ja,{className:_t("h-4 w-4 transition-transform",w?"":"transform rotate-180")})})}),m.jsxs(hw,{children:[m.jsx(pw,{asChild:!0,children:m.jsx(nt,{variant:"ghost",className:"h-8 w-8 p-0",children:m.jsx(RT,{className:"h-4 w-4"})})}),m.jsxs(vg,{align:"end",children:[m.jsxs(fa,{onClick:()=>S(!0),style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(og,{className:"mr-2 h-4 w-4"}),"Edit Title"]}),m.jsxs(fa,{onClick:A,className:"text-red-600",style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(q0,{className:"mr-2 h-4 w-4"}),"Delete Whiteboard"]})]})]})]})]})})}),m.jsx(Wke,{currentCategory:t.category||"",categoryColor:a,itemColor:t.color_value,existingCategories:r,isEditingCategory:P,showNewCategoryInput:I,newCategory:H,setNewCategory:j,setIsEditingCategory:M,setShowNewCategoryInput:z,handleEditCategory:J,handleAddCustomCategory:q,handleUpdateCategoryColor:o}),m.jsx(kA,{className:"flex-1",children:m.jsx("div",{className:"rounded-lg mx-6 mb-6 flex-1 flex flex-col relative",style:{backgroundColor:"#ffffff",border:`2px solid ${l} !important`,borderColor:`${l} !important`,height:c&&d!==void 0?`${Math.max(Gke,d-120)}px`:`${Math.max(530,(t.canvas_height||620)-120)}px`},ref:p,children:m.jsx($ke,{whiteboard:t,onCanvasChange:Q,onSave:O,whiteboardColor:l,onAutoSave:O,isMobile:c,onScaledHeightChange:h,updatedAt:t.updated_at,aiEnabled:!0})})})]})})},KO=750,YO=650,JO=2400,QO=2400,Xke=({whiteboard:t,onUpdate:e,onDelete:n,existingCategories:r,canvasTransform:i,onPositionChange:s,isCollapsed:o,onToggleCollapsed:a,updateCategory:l})=>{var R,P;const c=b.useRef(null),[u,d]=b.useState(!1),[h,p]=b.useState(!1),[x,w]=b.useState({x:0,y:0}),[y,v]=b.useState({startX:0,startY:0,startWidth:0,startHeight:0});parseFloat(((R=c.current)==null?void 0:R.style.width)||"")||t.canvas_width,parseFloat(((P=c.current)==null?void 0:P.style.height)||"")||t.canvas_height,b.useEffect(()=>{c.current&&(c.current.style.left=`${t.position_x}px`,c.current.style.top=`${t.position_y}px`,console.log(`DraggableWhiteboardCard: Initial position for whiteboard ${t.id}: x=${t.position_x}, y=${t.position_y}`),console.log(`DraggableWhiteboardCard: Initial dimensions for whiteboard ${t.id}: width=${t.canvas_width}, height=${t.canvas_height}`))},[t.position_x,t.position_y,t.canvas_width,t.canvas_height]);const S=M=>{var j;const I=M.target;if(I.closest('input, textarea, button, [role="button"], [role="menuitem"], .resize-handle, .whiteboard-canvas, canvas'))return;const z=I.closest('input, textarea, button, [role="button"], [role="menuitem"], .resize-handle'),H=I.closest("canvas")||I.tagName==="CANVAS"||I.closest(".whiteboard-drawing-area")||I.closest(".react-sketch-canvas")||I.closest('[data-testid="react-sketch-canvas"]');if(!(z||H)&&(M.preventDefault(),c.current)){const J=(j=c.current.parentElement)==null?void 0:j.getBoundingClientRect();if(J){const q=(M.clientX-J.left-i.x)/i.scale,Q=(M.clientY-J.top-i.y)/i.scale,O=parseFloat(c.current.style.left)||0,F=parseFloat(c.current.style.top)||0;w({x:(q-O)*i.scale,y:(Q-F)*i.scale}),d(!0)}}},E=M=>{var I;if(u&&c.current){const z=(I=c.current.parentElement)==null?void 0:I.getBoundingClientRect();if(!z)return;const H=(M.clientX-z.left-i.x)/i.scale,j=(M.clientY-z.top-i.y)/i.scale,J=H-x.x/i.scale,q=j-x.y/i.scale;c.current.style.left=`${J}px`,c.current.style.top=`${q}px`}if(h&&c.current){const z=M.clientX-y.startX,H=M.clientY-y.startY,j=z/i.scale,J=H/i.scale,q=Math.min(JO,Math.max(KO,y.startWidth+j)),Q=Math.min(QO,Math.max(YO,y.startHeight+J));c.current.style.width=`${q}px`,c.current.style.height=`${Q}px`}},C=()=>{if(u&&c.current){d(!1);const M=parseFloat(c.current.style.left)||0,I=parseFloat(c.current.style.top)||0,z={x:Math.round(M),y:Math.round(I)};s(t.id,z)}if(h&&c.current){p(!1);const M=parseFloat(c.current.style.left)||0,I=parseFloat(c.current.style.top)||0,z=parseFloat(c.current.style.width)||t.canvas_width||400,H=parseFloat(c.current.style.height)||t.canvas_height||400,j={x:Math.round(M),y:Math.round(I)};e(t.id,{position_x:j.x,position_y:j.y,canvas_width:Math.min(JO,Math.max(KO,Math.round(z))),canvas_height:Math.min(QO,Math.max(YO,Math.round(H)))})}};b.useEffect(()=>((u||h)&&(window.addEventListener("mousemove",E),window.addEventListener("mouseup",C)),()=>{window.removeEventListener("mousemove",E),window.removeEventListener("mouseup",C)}),[u,h,x,y]);const T=M=>{if(M.preventDefault(),M.stopPropagation(),c.current){const I=parseFloat(c.current.style.width)||t.canvas_width||400,z=parseFloat(c.current.style.height)||t.canvas_height||400;v({startX:M.clientX,startY:M.clientY,startWidth:I,startHeight:z}),p(!0)}},A=async(M,I)=>{try{return await e(M,I)}catch(z){return console.error("Failed to update whiteboard:",z),null}},k=async M=>{try{return await n(M)}catch(I){return console.error("Failed to delete whiteboard:",I),!1}};return m.jsxs("div",{ref:c,onMouseDown:S,className:"draggable-whiteboard-card shadow-lg rounded-lg flex flex-col overflow-hidden border relative",style:{position:"absolute",width:`${t.canvas_width||400}px`,height:o?"auto":`${t.canvas_height||400}px`,zIndex:u||h?1e3:t.z_index||1,cursor:u?"grabbing":h?"nw-resize":"grab",transition:u||h?"none":"box-shadow 0.2s, transform 0.1s",boxShadow:u||h?"0 8px 16px rgba(0,0,0,0.2)":"0 4px 6px rgba(0, 0, 0, 0.1)",transform:u||h?"scale(1.01)":"scale(1)",userSelect:"none",touchAction:"none"},children:[m.jsx(dW,{whiteboard:t,onUpdate:A,onDelete:k,existingCategories:r,isCollapsed:o,onToggleCollapsed:a,updateCategory:l}),!o&&m.jsx("div",{className:"resize-handle absolute bottom-0 right-0 w-4 h-4 cursor-nw-resize",onMouseDown:T,style:{background:"linear-gradient(-45deg, transparent 40%, #ccc 40%, #ccc 60%, transparent 60%)",opacity:.6,zIndex:10}})]})},qke=({existingCategories:t,searchQuery:e="",onReady:n,onOpenNewNoteModal:r,notes:i,onNoteUpdate:s,onNoteDelete:o,whiteboards:a,onWhiteboardUpdate:l,onWhiteboardDelete:c,onOpenNewWhiteboardModal:u,addCategory:d,updateCategory:h})=>{const{theme:p}=no(),{token:x}=ro(),[w,y]=b.useState([]),[v,S]=b.useState(!0),[E,C]=b.useState(""),[T,A]=b.useState(!1),[k,R]=b.useState({x:0,y:0}),[P,M]=b.useState(void 0),[I,z]=b.useState(!1),[H,j]=b.useState(!1),[J,q]=b.useState({x:0,y:0}),[Q,O]=b.useState({x:window.innerWidth/2-2e3,y:window.innerHeight/2-2e3,scale:1}),[F,D]=b.useState(!1),[ee,W]=b.useState({x:0,y:0}),[B,K]=b.useState("all"),[ie,oe]=b.useState(!1),Z=b.useRef(null),pe=b.useRef(null),ye=()=>{A(!1),r&&r(k)},ge=()=>{A(!1),u&&(console.log("Opening whiteboard modal at position:",k),u(k))};b.useEffect(()=>{n&&n({showAddListMenu:(ue,Te=!1,de)=>{if(console.log("showAddListMenu called:",{position:ue,isFromButton:Te,absolutePosition:de,currentMenuState:T,currentMenuIsFromButton:I}),T&&I&&Te){console.log("Closing existing button menu"),A(!1);return}console.log("Setting menu state:",{position:ue,isFromButton:Te,absolutePosition:de}),R(ue),z(Te),M(de||void 0),A(!0),console.log("Context menu should now be visible")},showAddNoteMenu:(ue,Te=!1,de)=>{r&&r(ue)},showAddWhiteboardMenu:(ue,Te=!1,de)=>{u&&u(ue)},hideContextMenu:()=>{A(!1)},isMenuOpenFromButton:()=>T&&I,showNewListModal:()=>{j(!0)}})},[n,T,I]),b.useEffect(()=>{const ue=async()=>{try{S(!0),U6(x).then(de=>{y(de),S(!1)}).catch(de=>{console.error("Failed to fetch lists:",de),C("Could not load lists."),S(!1)})}finally{S(!1)}},Te=de=>{const{position:_e,isFromButton:Qe=!1,absolutePosition:Ye}=de.detail;R(_e),z(Qe),Ye&&M(Ye),A(!0)};return document.addEventListener("showCanvasContextMenu",Te),ue(),()=>{document.removeEventListener("showCanvasContextMenu",Te)}},[]);const je=ue=>{if(ue.preventDefault(),ue.stopPropagation(),console.log("Right-click context menu triggered"),Z.current){const Te=Z.current.getBoundingClientRect(),de=ue.clientX-Te.left,_e=ue.clientY-Te.top,Qe=(de-Q.x)/Q.scale,Ye=(_e-Q.y)/Q.scale;console.log("Context menu position:",{canvasX:Qe,canvasY:Ye,screenX:de,screenY:_e}),R({x:Qe,y:Ye}),q({x:Qe,y:Ye}),z(!1),M(void 0),A(!0)}},We=ue=>{const Te=ue.target;T&&!Te.closest(".context-menu")&&A(!1);const de=Te.closest(".draggable-list-card, .draggable-note-card, .context-menu, button, input, textarea, select");ue.button===0&&!de&&(ue.target===Z.current||ue.target===pe.current)&&(D(!0),W({x:ue.clientX-Q.x,y:ue.clientY-Q.y}),ue.preventDefault())},it=ue=>{F&&O(Te=>({...Te,x:ue.clientX-ee.x,y:ue.clientY-ee.y}))},te=()=>{F&&D(!1)},pt=ue=>{if(ue.preventDefault(),Z.current){const Te=Z.current.getBoundingClientRect(),de=ue.clientX-Te.left,_e=ue.clientY-Te.top,Qe=ue.deltaY<0?1.1:.9,Ye=Math.max(.1,Math.min(3,Q.scale*Qe)),qe=de-(de-Q.x)*(Ye/Q.scale),mt=_e-(_e-Q.y)*(Ye/Q.scale);O({x:qe,y:mt,scale:Ye})}};b.useEffect(()=>{const ue=de=>{F&&O(_e=>({..._e,x:de.clientX-ee.x,y:de.clientY-ee.y}))},Te=()=>{F&&D(!1)};return F&&(document.addEventListener("mousemove",ue),document.addEventListener("mouseup",Te)),()=>{document.removeEventListener("mousemove",ue),document.removeEventListener("mouseup",Te)}},[F,ee]);const Be=()=>{},ut=()=>{A(!1),j(!0)},Xe=async ue=>{const Te=[...w];y(de=>de.map(_e=>_e.id===ue.id?ue:_e));try{await z6(ue,x)}catch(de){console.error("Failed to update list:",de),y(Te)}},wt=async ue=>{const Te=[...w];y(de=>de.filter(_e=>_e.id!==ue));try{await j6(ue,x)}catch(de){console.error("Failed to delete list:",de),y(Te)}},Ae=(ue,Te)=>{const de=[...w];y(_e=>_e.map(Qe=>Qe.id===ue?{...Qe,position_x:Te.x,position_y:Te.y}:Qe)),R1e(ue,Te.x,Te.y,x).catch(_e=>{console.error("Failed to update list position:",_e),y(de)})},Pe=ue=>{const Te={...ue,position_x:J.x,position_y:J.y};y(de=>[...de,Te]),j(!1)},ot=()=>{O(ue=>({...ue,scale:Math.min(3,ue.scale*1.2)}))},Y=()=>{O(ue=>({...ue,scale:Math.max(.1,ue.scale/1.2)}))},L=()=>{O({x:window.innerWidth/2-2e3,y:window.innerHeight/2-2e3,scale:1})},ne=()=>{const ue=w.map(_e=>_e.type||"General").filter(Boolean),Te=i.map(_e=>_e.category||"General").filter(Boolean);return["all",...Array.from(new Set([...ue,...Te]))]},X=()=>{const ue={all:w.length+i.length+a.length};return w.forEach(Te=>{const de=Te.type||"General";ue[de]=(ue[de]||0)+1}),i.forEach(Te=>{const de=Te.category||"General";ue[de]=(ue[de]||0)+1}),a.forEach(Te=>{const de=Te.category||"General";ue[de]=(ue[de]||0)+1}),ue},se=()=>{let ue=w,Te=i,de=a;return e&&(ue=w.filter(_e=>_e.title.toLowerCase().includes(e.toLowerCase())||_e.items&&_e.items.some(Qe=>Qe.text&&Qe.text.toLowerCase().includes(e.toLowerCase()))),Te=i.filter(_e=>_e.title&&_e.title.toLowerCase().includes(e.toLowerCase())||_e.content&&_e.content.toLowerCase().includes(e.toLowerCase())),de=a.filter(_e=>_e.title&&_e.title.toLowerCase().includes(e.toLowerCase()))),B!=="all"&&(ue=ue.filter(_e=>(_e.type||"General")===B),Te=Te.filter(_e=>(_e.category||"General")===B),de=de.filter(_e=>(_e.category||"General")===B)),{filteredLists:ue,filteredNotes:Te,filteredWhiteboards:de}},{filteredLists:ae,filteredNotes:Ce,filteredWhiteboards:Re}=se();return b.useEffect(()=>{const ue=Te=>{if(T){const de=Te.target,_e=document.querySelector(".context-menu"),Qe=document.getElementById("new-canvas-button");if(_e&&_e.contains(Te.target)||I&&Qe&&Qe.contains(Te.target))return;de.closest(".context-menu")||A(!1)}if(ie){const de=Te.target;!de.closest("[data-filter-panel]")&&!de.closest("[data-filter-button]")&&oe(!1)}};return document.addEventListener("mousedown",ue),()=>{document.removeEventListener("mousedown",ue)}},[T,ie,I]),m.jsxs("div",{className:"canvas-container-wrapper",children:[m.jsx("div",{ref:Z,className:"canvas-area",onContextMenu:je,onClick:Be,onMouseDown:We,onMouseMove:it,onMouseUp:te,onWheel:pt,style:{position:"relative",width:"100%",height:"100vh",backgroundColor:"var(--background-alt)",borderRadius:"0",overflow:"hidden",padding:"0",boxSizing:"border-box",border:"none",cursor:F?"grabbing":"grab"},children:m.jsx("div",{ref:pe,style:{position:"absolute",width:"100%",height:"100%",minWidth:"4000px",minHeight:"4000px",transform:`translate(${Q.x}px, ${Q.y}px) scale(${Q.scale})`,transformOrigin:"0 0",padding:"1rem",backgroundImage:p==="dark"?`
              radial-gradient(circle, rgba(255, 255, 255, 0.08) 1px, transparent 1px),
              radial-gradient(circle, rgba(255, 255, 255, 0.04) 1px, transparent 1px),
              linear-gradient(135deg, rgba(255, 255, 255, 0.01) 0%, rgba(255, 255, 255, 0.04) 50%, rgba(255, 255, 255, 0.01) 100%)
            `:`
              radial-gradient(circle, rgba(0, 0, 0, 0.08) 1px, transparent 1px),
              radial-gradient(circle, rgba(0, 0, 0, 0.04) 1px, transparent 1px),
              linear-gradient(135deg, rgba(0, 0, 0, 0.01) 0%, rgba(0, 0, 0, 0.04) 50%, rgba(0, 0, 0, 0.01) 100%)
            `,backgroundSize:"32px 32px, 8px 8px, 100% 100%",backgroundPosition:"0 0, 0 0, 0 0"},children:v?m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsx(j1e,{size:"lg"})}):E?m.jsx("div",{className:"flex items-center justify-center h-full text-red-500",children:E}):m.jsxs(m.Fragment,{children:[w.length===0&&i.length===0&&a.length===0&&m.jsx("div",{className:"flex items-center justify-center h-full",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"#64748b",fontFamily:'"Raleway", sans-serif',fontSize:"18px",fontWeight:"300",zIndex:10},children:"No content on your canvas (for now!)"}),ae.map(ue=>m.jsx(A1e,{list:ue,onUpdate:Xe,onDelete:wt,existingCategories:t,canvasTransform:Q,onPositionChange:Ae,addCategory:d,updateCategory:h},ue.id)),Ce.map(ue=>m.jsx(vke,{note:ue,onPositionUpdate:(Te,de,_e)=>{const Qe={position_x:de.x,position_y:de.y};_e&&(Qe.width=_e.width,Qe.height=_e.height),s(Te,Qe)},onUpdate:s,onDelete:o,existingCategories:t,canvasTransform:Q,updateCategory:h},ue.id)),Re.map(ue=>m.jsx(Xke,{whiteboard:ue,onUpdate:l,onDelete:c,existingCategories:t,canvasTransform:Q,onPositionChange:(Te,de)=>{l(Te,{position_x:de.x,position_y:de.y})},updateCategory:h},ue.id)),T&&(console.log("Rendering context menu with:",{menuPosition:k,menuAbsolutePosition:P,menuIsFromButton:I,showContextMenu:T}),m.jsx(F6,{position:k,absolutePosition:P,onAddList:ut,onAddNote:ye,onAddWhiteboard:ge,onClose:()=>A(!1),isFromButton:I}))]})})}),m.jsxs("div",{style:{position:"fixed",bottom:"20px",left:"50%",transform:"translateX(-50%)",zIndex:1002,display:"flex",alignItems:"center",gap:"8px",padding:"12px",backgroundColor:"var(--background)",border:"1px solid var(--border)",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",userSelect:"none"},children:[m.jsx("button",{onClick:Y,style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--background)",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",color:"var(--text)",transition:"all 0.2s ease"},onMouseEnter:ue=>{ue.currentTarget.style.backgroundColor="var(--accent)"},onMouseLeave:ue=>{ue.currentTarget.style.backgroundColor="var(--background)"},title:"Zoom Out",children:m.jsx(Ree,{size:18})}),m.jsx("button",{onClick:L,style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--background)",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",color:"var(--text)",transition:"all 0.2s ease"},onMouseEnter:ue=>{ue.currentTarget.style.backgroundColor="var(--accent)"},onMouseLeave:ue=>{ue.currentTarget.style.backgroundColor="var(--background)"},title:"Reset View",children:m.jsx(Dee,{size:18})}),m.jsxs("div",{style:{padding:"0 12px",fontSize:"14px",fontWeight:"500",color:"var(--text-muted)",fontFamily:"monospace",minWidth:"60px",textAlign:"center"},children:[Math.round(Q.scale*100),"%"]}),m.jsx("button",{onClick:ot,style:{width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--background)",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",color:"var(--text)",transition:"all 0.2s ease"},onMouseEnter:ue=>{ue.currentTarget.style.backgroundColor="var(--accent)"},onMouseLeave:ue=>{ue.currentTarget.style.backgroundColor="var(--background)"},title:"Zoom In",children:m.jsx(_o,{size:18})}),m.jsx("div",{style:{width:"1px",height:"24px",backgroundColor:"var(--border)",margin:"0 4px"}}),m.jsxs("button",{onClick:()=>oe(!ie),"data-filter-button":!0,style:{minWidth:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 12px",backgroundColor:ie?"var(--accent)":"var(--background)",border:"1px solid var(--border)",borderRadius:"8px",cursor:"pointer",color:"var(--text)",fontSize:"12px",fontWeight:"500",transition:"all 0.2s ease",gap:"6px",whiteSpace:"nowrap"},onMouseEnter:ue=>{ie||(ue.currentTarget.style.backgroundColor="var(--accent)")},onMouseLeave:ue=>{ie||(ue.currentTarget.style.backgroundColor="var(--background)")},title:"Filter Content",children:[m.jsx("span",{children:"Category:"}),m.jsx("span",{children:B==="all"?"All":B}),m.jsxs("span",{style:{opacity:.7},children:["(",X()[B]||0,")"]})]})]}),ie&&m.jsx("div",{"data-filter-panel":!0,style:{position:"fixed",bottom:"80px",left:"50%",transform:"translateX(-50%)",zIndex:1003,display:"flex",alignItems:"center",gap:"6px",padding:"8px",backgroundColor:"var(--background)",border:"1px solid var(--border)",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",userSelect:"none",maxWidth:"600px",flexWrap:"wrap"},children:ne().map(ue=>{const Te=X()[ue]||0,de=B===ue;return m.jsxs("button",{onClick:()=>{K(ue),oe(!1)},style:{padding:"6px 12px",backgroundColor:de?"#3b82f6":"var(--background)",color:de?"white":"var(--text)",border:"1px solid var(--border)",borderRadius:"6px",cursor:"pointer",fontSize:"12px",fontWeight:"500",transition:"all 0.2s ease",textTransform:"capitalize",whiteSpace:"nowrap"},onMouseEnter:_e=>{de||(_e.currentTarget.style.backgroundColor="var(--accent)")},onMouseLeave:_e=>{de||(_e.currentTarget.style.backgroundColor="var(--background)")},children:[ue," (",Te,")"]},ue)})}),H&&m.jsx(H6,{isOpen:H,onClose:()=>j(!1),onListCreated:Pe,existingCategories:t.map(ue=>ue.name)})]})},Kke=({isOpen:t,onClose:e,onCreateNote:n,existingCategories:r})=>{const[i,s]=b.useState(""),[o,a]=b.useState(""),[l,c]=b.useState(""),[u,d]=b.useState(!1),h=x=>{if(x.preventDefault(),!i.trim())return;const w=u?l.trim():o;w&&(n(i.trim(),w,"#FFFFE0"),p())},p=()=>{s(""),a(""),c(""),d(!1),e()};return m.jsx(Cg,{open:t,onOpenChange:p,children:m.jsxs(kh,{className:"sm:max-w-md",children:[m.jsx(Nh,{children:m.jsx(Ph,{children:"Create New Note"})}),m.jsxs("form",{onSubmit:h,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx(Ci,{htmlFor:"title",children:"Title"}),m.jsx(Yn,{id:"title",value:i,onChange:x=>s(x.target.value),placeholder:"Enter note title",className:"mt-1",autoFocus:!0,required:!0})]}),u?m.jsxs("div",{children:[m.jsx(Ci,{htmlFor:"newCategory",children:"New Category"}),m.jsxs("div",{className:"flex space-x-2 mt-1",children:[m.jsx(Yn,{id:"newCategory",value:l,onChange:x=>c(x.target.value),placeholder:"Enter new category",autoFocus:!0}),m.jsx(nt,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Cancel"})]})]}):m.jsxs("div",{children:[m.jsx(Ci,{htmlFor:"category",children:"Category"}),m.jsxs(Wc,{value:o,onValueChange:a,children:[m.jsx(gl,{className:"mt-1",children:m.jsx(Gc,{placeholder:"Select a category"})}),m.jsx(vl,{children:r.map(x=>m.jsx(ar,{value:x,children:x},x))})]}),m.jsx(nt,{type:"button",variant:"outline",size:"sm",onClick:()=>d(!0),className:"mt-2",children:"Add New Category"})]}),m.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[m.jsx(nt,{type:"button",variant:"outline",onClick:p,children:"Cancel"}),m.jsx(nt,{type:"submit",disabled:!i.trim()||!o&&!l.trim(),className:"bg-blue-600 hover:bg-blue-700",children:"Create Note"})]})]})]})})},Yke=b.forwardRef(({className:t,...e},n)=>m.jsx("textarea",{className:_t("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Yke.displayName="Textarea";const Jke=({isOpen:t,onClose:e,onCreateNote:n,initialPosition:r,existingCategories:i})=>{const[s,o]=b.useState(""),[a,l]=b.useState(""),[c,u]=b.useState(""),[d,h]=b.useState(!1),[p,x]=b.useState("#3B82F6");b.useEffect(()=>{t&&(o(""),l(""),u(""),h(!1),x("#3B82F6"))},[t]);const w=y=>{if(y.preventDefault(),!s.trim())return;const S=(d?c.trim():a)||"General";n(s.trim(),S,p,r),e()};return t?m.jsx(Cg,{open:t,onOpenChange:y=>!y&&e(),children:m.jsxs(kh,{className:"sm:max-w-[425px]",children:[m.jsx(Nh,{children:m.jsxs(Ph,{className:"flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(lg,{className:"h-5 w-5 text-slate-500"}),"Add Note"]})}),m.jsxs("form",{onSubmit:w,className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ci,{htmlFor:"noteTitle",style:{fontFamily:'"Raleway", sans-serif'},children:"Title"}),m.jsx(Yn,{id:"noteTitle",value:s,onChange:y=>o(y.target.value),placeholder:"Enter note title",autoFocus:!0})]}),m.jsxs("div",{className:"grid grid-cols-[1fr_60px] gap-4 items-start",children:[d?m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ci,{htmlFor:"newNoteCategory",style:{fontFamily:'"Raleway", sans-serif'},children:"New Category"}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx(Yn,{id:"newNoteCategory",value:c,onChange:y=>u(y.target.value),placeholder:"Enter new category",autoFocus:!0,onKeyDown:y=>{y.key==="Enter"&&c.trim()&&(l(c.trim()),h(!1))}}),m.jsx(nt,{type:"button",variant:"outline",onClick:()=>{c.trim()&&(l(c.trim()),h(!1))},disabled:!c.trim(),style:{fontFamily:'"Raleway", sans-serif'},children:"Add"}),m.jsx(nt,{type:"button",variant:"outline",onClick:()=>{h(!1),u("")},style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"})]})]}):m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ci,{htmlFor:"noteCategory",style:{fontFamily:'"Raleway", sans-serif'},children:"Category"}),m.jsxs(Wc,{value:a,onValueChange:y=>{y==="__add_new__"?(h(!0),l("")):l(y)},children:[m.jsx(gl,{children:m.jsx(Gc,{placeholder:"Select a category"})}),m.jsxs(vl,{children:[!i.includes("General")&&m.jsx(ar,{value:"General",children:"General"}),i.map(y=>m.jsx(ar,{value:y,children:y},y)),m.jsx(ar,{value:"__add_new__",className:"text-blue-600",children:"+ Add new category"})]})]}),m.jsx("p",{className:"text-xs text-gray-500",style:{fontFamily:'"Raleway", sans-serif'},children:i.length===0?'No categories yet. Leave empty to use "General" or create a new one from the dropdown.':'Select a category or leave empty to use "General".'})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ci,{style:{fontFamily:'"Raleway", sans-serif'},children:"Color"}),m.jsx(ml,{color:p,onChange:x,onSave:x,children:m.jsx(nt,{type:"button",variant:"outline",size:"icon",className:"h-10 w-10 p-0 rounded-full","aria-label":"Change note color",children:m.jsx("span",{className:"inline-block w-6 h-6 rounded-full border border-gray-300",style:{backgroundColor:p}})})})]})]}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx(nt,{type:"button",variant:"outline",onClick:e,style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"}),m.jsx(nt,{type:"submit",disabled:!s.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:"Create Note"})]})]})]})}):null},Qke=({isOpen:t,onClose:e,onCreateWhiteboard:n,initialPosition:r,existingCategories:i})=>{const[s,o]=b.useState(""),[a,l]=b.useState(""),[c,u]=b.useState(""),[d,h]=b.useState(!1),[p,x]=b.useState("#3B82F6");b.useEffect(()=>{t&&(o(""),l(""),u(""),h(!1),x("#3B82F6"))},[t]);const w=y=>{if(y.preventDefault(),!s.trim())return;const S=(d?c.trim():a)||"General";n(s.trim(),S,p,r),e()};return t?m.jsx(Cg,{open:t,onOpenChange:y=>!y&&e(),children:m.jsxs(kh,{className:"sm:max-w-[425px]",children:[m.jsx(Nh,{children:m.jsxs(Ph,{className:"flex items-center gap-2",style:{fontFamily:'"Raleway", sans-serif'},children:[m.jsx(Sh,{className:"h-5 w-5 text-slate-500"}),"Add Whiteboard"]})}),m.jsxs("form",{onSubmit:w,className:"space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ci,{htmlFor:"whiteboardTitle",style:{fontFamily:'"Raleway", sans-serif'},children:"Title"}),m.jsx(Yn,{id:"whiteboardTitle",value:s,onChange:y=>o(y.target.value),placeholder:"Enter whiteboard title",autoFocus:!0})]}),m.jsxs("div",{className:"grid grid-cols-[1fr_60px] gap-4 items-start",children:[d?m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ci,{htmlFor:"newWhiteboardCategory",style:{fontFamily:'"Raleway", sans-serif'},children:"New Category"}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx(Yn,{id:"newWhiteboardCategory",value:c,onChange:y=>u(y.target.value),placeholder:"Enter new category",autoFocus:!0,onKeyDown:y=>{y.key==="Enter"&&c.trim()&&(l(c.trim()),h(!1))}}),m.jsx(nt,{type:"button",variant:"outline",onClick:()=>{c.trim()&&(l(c.trim()),h(!1))},disabled:!c.trim(),style:{fontFamily:'"Raleway", sans-serif'},children:"Add"}),m.jsx(nt,{type:"button",variant:"outline",onClick:()=>{h(!1),u("")},style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"})]})]}):m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ci,{htmlFor:"whiteboardCategory",style:{fontFamily:'"Raleway", sans-serif'},children:"Category"}),m.jsxs(Wc,{value:a,onValueChange:y=>{y==="__add_new__"?(h(!0),l("")):l(y)},children:[m.jsx(gl,{children:m.jsx(Gc,{placeholder:"Select a category"})}),m.jsxs(vl,{children:[!i.includes("General")&&m.jsx(ar,{value:"General",children:"General"}),i.map(y=>m.jsx(ar,{value:y,children:y},y)),m.jsx(ar,{value:"__add_new__",className:"text-blue-600",children:"+ Add new category"})]})]}),m.jsx("p",{className:"text-xs text-gray-500",style:{fontFamily:'"Raleway", sans-serif'},children:i.length===0?'No categories yet. Leave empty to use "General" or create a new one from the dropdown.':'Select a category or leave empty to use "General".'})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(Ci,{style:{fontFamily:'"Raleway", sans-serif'},children:"Color"}),m.jsx(ml,{color:p,onChange:x,onSave:x,children:m.jsx(nt,{type:"button",variant:"outline",size:"icon",className:"h-10 w-10 p-0 rounded-full","aria-label":"Change whiteboard color",children:m.jsx("span",{className:"inline-block w-6 h-6 rounded-full border border-gray-300",style:{backgroundColor:p}})})})]})]}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx(nt,{type:"button",variant:"outline",onClick:e,style:{fontFamily:'"Raleway", sans-serif'},children:"Cancel"}),m.jsx(nt,{type:"submit",disabled:!s.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",style:{fontFamily:'"Raleway", sans-serif'},children:"Create Whiteboard"})]})]})]})}):null},EM="categoriesUpdated",b_=()=>{window.dispatchEvent(new CustomEvent(EM))},Zke=()=>{const[t,e]=b.useState([]),[n,r]=b.useState(!0),[i,s]=b.useState(null),{token:o}=ro(),{toast:a}=to(),l=b.useCallback(async()=>{if(o)try{r(!0);const y=await F1e(o);e(y),s(null)}catch(y){console.error("Error fetching categories:",y),s("Failed to load categories")}finally{r(!1)}},[o]);b.useEffect(()=>{l()},[l]),b.useEffect(()=>{let y=null;const v=()=>{y||(console.log(" Global category refresh triggered - refreshing categories list"),y=setTimeout(()=>{l(),y=null},1e3))};return window.addEventListener(EM,v),()=>{window.removeEventListener(EM,v),y&&clearTimeout(y)}},[l]);const c=b.useCallback(async y=>{if(!o)return null;try{const v=await U1e(y,o);return e(S=>[...S,v].sort((E,C)=>E.name.localeCompare(C.name))),console.log(" Triggering global category refresh after creating:",v.name),b_(),v}catch(v){console.error("Error creating category:",v);const S=v instanceof Error?v.message:"Failed to create category";return a({title:"Error creating category",description:S,variant:"destructive"}),null}},[o,a]),u=b.useCallback(async(y,v)=>{if(!o)return null;try{const S=await B1e(y,v,o);return e(E=>E.map(C=>C.id===y?S:C).sort((C,T)=>C.name.localeCompare(T.name))),console.log(" Triggering global category refresh after updating:",S.name),b_(),S}catch(S){console.error("Error updating category:",S);const E=S instanceof Error?S.message:"Failed to update category";return a({title:"Error updating category",description:E,variant:"destructive"}),null}},[o,a]),d=b.useCallback(async y=>{if(!o)return!1;try{const v=t.find(S=>S.id===y);return await z1e(y,o),e(S=>S.filter(E=>E.id!==y)),console.log(" Triggering global category refresh after deleting:",v==null?void 0:v.name),b_(),!0}catch(v){console.error("Error deleting category:",v);const S=v instanceof Error?v.message:"Failed to delete category";return a({title:"Error deleting category",description:S,variant:"destructive"}),!1}},[o,a,t]),h=t.map(y=>y.name),p=b.useCallback(y=>t.find(v=>v.id===y),[t]),x=b.useCallback(y=>t.find(v=>v.name===y),[t]),w=b.useCallback(y=>t.some(v=>v.name===y),[t]);return{categories:t,categoryNames:h,loading:n,error:i,addCategory:c,editCategory:u,removeCategory:d,refreshCategories:l,getCategoryById:p,getCategoryByName:x,isCategoryInUse:w,totalCategories:t.length}},eNe=()=>{const{theme:t}=no(),[e,n]=b.useState([]),[r,i]=b.useState(null),[s,o]=b.useState(!0),[a,l]=b.useState(!0),[c,u]=b.useState(!0),d=s||a||c,[h,p]=b.useState(""),[x,w]=b.useState(!1),[y,v]=b.useState(!1),[S,E]=b.useState(null),[C,T]=b.useState(!1),[A,k]=b.useState(!1),[R,P]=b.useState(!1),[M,I]=b.useState(null),[z,H]=b.useState(!1),[j,J]=b.useState(!1),[q,Q]=b.useState(null),{toast:O}=to(),{token:F}=ro(),[D,ee]=b.useState([]),[W,B]=b.useState(null),[K,ie]=b.useState([]),[oe,Z]=b.useState(null),{categories:pe,categoryNames:ye,addCategory:ge,editCategory:je,isCategoryInUse:We,getCategoryByName:it}=Zke(),te=async(Oe,ze)=>{try{const Ve=it(Oe);if(!Ve)throw new Error(`Category "${Oe}" not found`);const gt=await je(Ve.id,{name:ze.name||Ve.name,color_value:ze.color_value||Ve.color_value});if(!gt)throw new Error("Failed to update category");if(console.log("Category updated successfully:",gt),ze.color_value){const Ct=ze.color_value,pn=e.filter(Cn=>(Cn.type||"General")===Oe);for(const Cn of pn)try{await He({...Cn,color_value:Ct})}catch(io){console.error(`Failed to update list ${Cn.id} color:`,io)}const Vn=D.filter(Cn=>(Cn.category||"General")===Oe);for(const Cn of Vn)try{await Qe(Cn.id,{color_value:Ct})}catch(io){console.error(`Failed to update note ${Cn.id} color:`,io)}const Lr=K.filter(Cn=>(Cn.category||"General")===Oe);for(const Cn of Lr)try{await mt(Cn.id,{color_value:Ct})}catch(io){console.error(`Failed to update whiteboard ${Cn.id} color:`,io)}console.log(`Category "${Oe}" and ${pn.length+Vn.length+Lr.length} linked items updated successfully.`)}}catch(Ve){console.error("Error updating category:",Ve),O({title:"Error",description:`Failed to update category "${Oe}". Please try again.`,variant:"destructive"})}};pe.map(Oe=>({name:Oe.name,listCount:0,noteCount:0,totalCount:0}));const pt=Oe=>{if(!Oe)return{filteredLists:e,filteredNotes:D,filteredWhiteboards:K};const ze=e.filter(Ct=>Ct.type===Oe),Ve=D.filter(Ct=>Ct.category===Oe),gt=K.filter(Ct=>Ct.category===Oe);return{filteredLists:ze,filteredNotes:Ve,filteredWhiteboards:gt}},Be=b.useRef(null),[ut,Xe]=b.useState(!1),[wt,Ae]=b.useState({x:0,y:0}),[Pe,ot]=b.useState(new Set),[Y,L]=b.useState(new Set),[ne,X]=b.useState(new Set),se=()=>{const Vn=[...e.map(Or=>({x:Or.position_x||0,y:Or.position_y||0})),...D.map(Or=>({x:Or.position_x,y:Or.position_y})),...K.map(Or=>({x:Or.position_x,y:Or.position_y}))],Lr=(Or,Qc)=>Vn.some($=>{const he=Math.abs(Or-$.x),xe=Math.abs(Qc-$.y);return he<440&&xe<345});let Cn=0;const io=20;let xl;do{const Or=300+Cn*50,Qc=(Math.random()-.5)*Or*2,$=(Math.random()-.5)*Or*2;xl={x:2e3+Qc,y:2e3+$},Cn++}while(Lr(xl.x,xl.y)&&Cn<io);return xl},ae=Oe=>Pe.has(Oe),Ce=Oe=>{ot(ze=>{const Ve=new Set(ze);return Ve.has(Oe)?Ve.delete(Oe):Ve.add(Oe),Ve})},Re=Oe=>Y.has(Oe),ue=Oe=>{L(ze=>{const Ve=new Set(ze);return Ve.has(Oe)?Ve.delete(Oe):Ve.add(Oe),Ve})},Te=Oe=>ne.has(Oe),de=Oe=>{X(ze=>{const Ve=new Set(ze);return Ve.has(Oe)?Ve.delete(Oe):Ve.add(Oe),Ve})};b.useEffect(()=>{const Oe=()=>{T(window.innerWidth<768)};return Oe(),window.addEventListener("resize",Oe),()=>window.removeEventListener("resize",Oe)},[]),b.useEffect(()=>{(async()=>{try{o(!0),i(null);const ze=await U6(F);n(ze)}catch(ze){console.error("Error fetching lists:",ze),i("Failed to load lists. Please try again.")}finally{o(!1)}})()},[F,O]),b.useEffect(()=>{F&&(async()=>{try{l(!0),B(null);const ze=await k1e(F);ee(ze)}catch(ze){console.error("Error fetching notes:",ze);const Ve=ze instanceof Error?ze.message:"Failed to load notes. Please try again.";B(Ve),O({title:"Error fetching notes",description:Ve,variant:"destructive"})}finally{l(!1)}})()},[F,O]),b.useEffect(()=>{F&&(async()=>{try{u(!0),Z(null);const ze=await D1e(F);ie(ze)}catch(ze){console.error("Error fetching whiteboards:",ze);const Ve=ze instanceof Error?ze.message:"Failed to load whiteboards. Please try again.";Z(Ve),O({title:"Error fetching whiteboards",description:Ve,variant:"destructive"})}finally{u(!1)}})()},[F,O]),b.useEffect(()=>{const Oe=ze=>{if(ut){const Ve=ze.target;!Ve.closest("#new-canvas-button")&&!Ve.closest(".context-menu")&&Xe(!1)}};return document.addEventListener("mousedown",Oe),()=>document.removeEventListener("mousedown",Oe)},[ut]);const _e=async(Oe,ze,Ve,gt)=>{try{!We(ze)&&ze!=="General"&&await ge({name:ze,color_value:Ve});const Ct={title:Oe,content:"",color_value:Ve,position_x:gt.x,position_y:gt.y,width:570,height:350,z_index:0},pn=await TL(Ct,F);ee(Vn=>[pn,...Vn]),P(!1)}catch(Ct){console.error("Failed to create note:",Ct);const pn=Ct instanceof Error?Ct.message:"Could not create your note. Please try again.";O({title:"Error creating note",description:pn,variant:"destructive"})}},Qe=async(Oe,ze)=>{try{const Ve=await N1e(Oe,ze,F);return ee(gt=>gt.map(Ct=>Ct.id===Oe?Ve:Ct)),Ve}catch(Ve){console.error("Failed to update note:",Ve);const gt=Ve instanceof Error?Ve.message:"Could not update your note. Please try again.";return O({title:"Error updating note",description:gt,variant:"destructive"}),null}},Ye=async Oe=>{try{return await P1e(Oe,F),ee(ze=>ze.filter(Ve=>Ve.id!==Oe)),O({title:"Note deleted",description:"Your note has been successfully removed."}),!0}catch(ze){console.error("Failed to delete note:",ze);const Ve=ze instanceof Error?ze.message:"Could not delete your note. Please try again.";return O({title:"Error deleting note",description:Ve,variant:"destructive"}),!1}},qe=async(Oe,ze,Ve,gt)=>{try{!We(ze)&&ze!=="General"&&await ge({name:ze,color_value:Ve});const Ct={title:Oe,category:ze,canvas_data:'{"paths": [], "shapes": []}',canvas_width:750,canvas_height:620,background_color:"#FFFFFF",position_x:gt.x,position_y:gt.y,z_index:0,color_value:Ve};console.log("handleCreateWhiteboard payload:",Ct);const pn=await I1e(Ct,F);ie(Vn=>[pn,...Vn])}catch(Ct){console.error("Failed to create whiteboard:",Ct);const pn=Ct instanceof Error?Ct.message:"Could not create your whiteboard. Please try again.";O({title:"Error creating whiteboard",description:pn,variant:"destructive"})}},mt=async(Oe,ze)=>{try{console.log(" CanvasPage: Updating whiteboard:",{whiteboardId:Oe,updatedFields:Object.keys(ze),hasCanvasData:!!ze.canvas_data,canvasDataType:typeof ze.canvas_data,canvasDataPreview:ze.canvas_data?JSON.stringify(ze.canvas_data).substring(0,200):"N/A"});const Ve=await L1e(Oe,ze,F);return console.log(" CanvasPage: Whiteboard update response:",{whiteboardId:Ve.id,hasCanvasData:!!Ve.canvas_data,canvasDataType:typeof Ve.canvas_data,updatedAt:Ve.updated_at}),ie(gt=>gt.map(Ct=>Ct.id===Oe?Ve:Ct)),Ve}catch(Ve){console.error("Failed to update whiteboard:",Ve);const gt=Ve instanceof Error?Ve.message:"Could not update your whiteboard. Please try again.";return O({title:"Error updating whiteboard",description:gt,variant:"destructive"}),null}},ce=async Oe=>{try{return await O1e(Oe,F),ie(ze=>ze.filter(Ve=>Ve.id!==Oe)),O({title:"Whiteboard deleted",description:"Your whiteboard has been successfully removed."}),!0}catch(ze){console.error("Failed to delete whiteboard:",ze);const Ve=ze instanceof Error?ze.message:"Could not delete your whiteboard. Please try again.";return O({title:"Error deleting whiteboard",description:Ve,variant:"destructive"}),!1}},st=async(Oe,ze,Ve)=>{try{const gt=se();!We(ze)&&ze!=="General"&&await ge({name:ze,color_value:Ve});const Ct=await B6({title:Oe,type:ze,items:[],position_x:gt.x,position_y:gt.y},F),pn={id:Ct.id,title:Ct.title,type:Ct.type||"General",items:Ct.items||[],createdAt:new Date(Ct.createdAt),position_x:Ct.position_x||gt.x,position_y:Ct.position_y||gt.y};n(Vn=>[pn,...Vn]),w(!1)}catch(gt){console.error("Failed to create list:",gt),O({title:"Error creating list",description:"Could not create your list. Please try again.",variant:"destructive"})}},He=async Oe=>{try{await z6(Oe,F),n(ze=>ze.map(Ve=>Ve.id===Oe.id?Oe:Ve))}catch(ze){console.error("Failed to update list:",ze),O({title:"Error updating list",description:"Could not update your list. Please try again.",variant:"destructive"})}},et=async Oe=>{try{await j6(Oe,F),n(ze=>ze.filter(Ve=>Ve.id!==Oe)),O({title:"List deleted",description:"Your list has been successfully removed."})}catch(ze){console.error("Failed to delete list:",ze),O({title:"Error deleting list",description:"Could not delete your list. Please try again.",variant:"destructive"})}},De=Oe=>{n(ze=>[Oe,...ze]),H(!1)},ke=Oe=>{I(Oe),P(!0)},Ie=Oe=>{console.log("handleOpenNewWhiteboardModal called with position:",Oe),Q(Oe),J(!0)},tt=()=>{Xe(!1),H(!0)},ft=()=>{Xe(!1),I({x:100,y:100}),P(!0)},Tt=()=>{Xe(!1),Q(se()),J(!0)},cn=async(Oe,ze,Ve)=>{try{!We(ze)&&ze!=="General"&&await ge({name:ze,color_value:Ve});const gt=se(),Ct=await TL({title:Oe,content:"",color_value:Ve,position_x:gt.x,position_y:gt.y,width:570,height:350,z_index:0},F);ee(pn=>[Ct,...pn]),v(!1)}catch(gt){console.error("Failed to create note:",gt),O({title:"Error creating note",description:"Could not create your note. Please try again.",variant:"destructive"})}};if(d)return m.jsxs("div",{className:"flex flex-col h-screen",children:[m.jsx("div",{className:"bg-background border-b border-border relative z-10",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[m.jsx("div",{className:"py-4",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m.jsx("h1",{className:"text-xl font-semibold italic whitespace-nowrap",style:{fontFamily:'"Raleway", sans-serif',color:t==="dark"?"#ffffff":"#374151"},children:"MY CANVAS"}),m.jsxs("div",{className:"relative hidden sm:block ml-4",children:[m.jsx(Zo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),m.jsx("div",{className:"animate-pulse bg-slate-200 rounded-md w-48 h-9"})]})]}),m.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[m.jsx("div",{className:"animate-pulse bg-slate-200 rounded-md w-12 h-6"}),m.jsx("div",{className:"animate-pulse bg-slate-200 rounded-md w-20 h-9"})]})]})}),m.jsx("div",{className:"sm:hidden pb-4",children:m.jsxs("div",{className:"relative",children:[m.jsx(Zo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),m.jsx("div",{className:"animate-pulse bg-slate-200 rounded-md w-full h-9"})]})})]})}),m.jsx("div",{className:"flex-1 flex items-center justify-center",children:m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mb-4"}),m.jsx("span",{className:"text-lg",style:{color:t==="dark"?"#ffffff":"#374151"},children:"Loading Canvas..."})]})})]});if(r)return m.jsxs("div",{className:"",children:[m.jsx("div",{className:"bg-background border-b border-border",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsx("div",{className:"py-4",children:m.jsx("div",{className:"flex items-center justify-between",children:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("h1",{className:"text-xl font-semibold italic whitespace-nowrap",style:{fontFamily:'"Raleway", sans-serif',color:t==="dark"?"#ffffff":"#374151"},children:"MY CANVAS"}),m.jsxs("div",{className:"relative hidden sm:block ml-4",children:[m.jsx(Zo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),m.jsx(Yn,{placeholder:"Search lists...",value:h,onChange:Oe=>p(Oe.target.value),className:"pl-10 w-48 h-9",disabled:!0})]})]})})})})}),m.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[m.jsxs("div",{className:"text-destructive text-lg mb-4",children:[" ",r]}),m.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary text-primary-foreground px-4 py-2 rounded-md hover:bg-primary/90",children:"Retry"})]})]});const qt=()=>Array.from(new Set(ye.filter(Boolean))),Dn=()=>{const{filteredLists:Oe,filteredNotes:ze,filteredWhiteboards:Ve}=pt(S);let gt=[...Oe];h&&(gt=gt.filter(Vn=>Vn.title.toLowerCase().includes(h.toLowerCase())||Vn.items&&Vn.items.some(Lr=>{var Cn;return(Cn=Lr.text)==null?void 0:Cn.toLowerCase().includes(h.toLowerCase())})));let Ct=[...ze];h&&(Ct=Ct.filter(Vn=>{var Lr,Cn;return((Lr=Vn.title)==null?void 0:Lr.toLowerCase().includes(h.toLowerCase()))||((Cn=Vn.content)==null?void 0:Cn.toLowerCase().includes(h.toLowerCase()))}));let pn=[...Ve];return h&&(pn=pn.filter(Vn=>{var Lr;return(Lr=Vn.title)==null?void 0:Lr.toLowerCase().includes(h.toLowerCase())})),{filteredLists:gt,filteredNotes:Ct,filteredWhiteboards:pn}},bn=()=>{const Oe={};return e.forEach(ze=>{const Ve=ze.type||"General";Oe[Ve]=(Oe[Ve]||0)+1}),D.forEach(ze=>{const Ve=ze.category||"General";Oe[Ve]=(Oe[Ve]||0)+1}),Oe};Dn();const hn=()=>m.jsx("div",{className:"bg-background border-b border-border relative z-10",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:[m.jsx("div",{className:"py-4",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[m.jsx("h1",{className:"text-xl font-semibold italic whitespace-nowrap",style:{fontFamily:'"Raleway", sans-serif',color:t==="dark"?"#ffffff":"#374151"},children:"MY CANVAS"}),m.jsxs("div",{className:"relative hidden sm:block ml-4",children:[m.jsx(Zo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),m.jsx(Yn,{placeholder:"Search canvas...",value:h,onChange:Oe=>p(Oe.target.value),className:"pl-10 w-48 h-9",style:{fontFamily:'"Raleway", sans-serif'}})]})]}),m.jsx("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:m.jsxs(nt,{id:"new-canvas-button",onClick:Oe=>{if(Oe.preventDefault(),Oe.stopPropagation(),ut)Xe(!1);else{const ze=document.getElementById("new-canvas-button");if(ze){const Ve=ze.getBoundingClientRect();Ae({x:Ve.left+Ve.width/2,y:Ve.bottom+5}),Xe(!0)}}},size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white whitespace-nowrap font-light",children:[m.jsx(_o,{className:"h-4 w-4 mr-2"})," Add"]})})]})}),m.jsx("div",{className:"sm:hidden pb-4",children:m.jsxs("div",{className:"relative",children:[m.jsx(Zo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),m.jsx(Yn,{placeholder:"Search canvas...",value:h,onChange:Oe=>p(Oe.target.value),className:"pl-10 placeholder:font-light",style:{fontFamily:'"Raleway", sans-serif'}})]})})]})}),is=()=>{const{filteredLists:Oe,filteredNotes:ze,filteredWhiteboards:Ve}=Dn();return m.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8 py-8",children:[m.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[m.jsx("h3",{className:"text-lg font-light text-foreground flex-shrink-0",children:"Categories"}),m.jsx("div",{className:"flex gap-2 overflow-x-auto flex-1 pb-2 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:qt().map(gt=>{const Ct=bn()[gt]||0,pn=S===gt;return m.jsxs(nt,{variant:pn?"default":"outline",size:"sm",onClick:()=>{E(pn?null:gt)},className:`capitalize font-light whitespace-nowrap flex-shrink-0 ${pn?"bg-blue-600 hover:bg-blue-700 text-white":""}`,children:[gt," (",Ct,")"]},gt)})})]}),Oe.length===0&&ze.length===0&&Ve.length===0?m.jsx("div",{className:"text-center py-12",children:e.length===0&&D.length===0&&K.length===0?m.jsx("div",{className:"max-w-md mx-auto",children:m.jsxs("div",{className:"bg-card rounded-lg shadow-sm border border-border p-8",children:[m.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:m.jsx(_o,{className:"h-8 w-8 text-blue-600"})}),m.jsxs("h3",{className:"text-lg font-light text-foreground mb-6",children:["No content on your canvas",m.jsx("br",{}),"(for now!)"]}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[m.jsxs(nt,{onClick:()=>H(!0),className:"bg-blue-600 hover:bg-blue-700 text-white font-normal",children:[m.jsx(_o,{className:"h-4 w-4 mr-2"}),"Add List"]}),m.jsxs(nt,{onClick:()=>v(!0),className:"bg-blue-600 hover:bg-blue-700 text-white font-normal",children:[m.jsx(_o,{className:"h-4 w-4 mr-2"}),"Add Note"]}),m.jsxs(nt,{onClick:()=>{const gt=se();Q(gt),J(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white font-normal",children:[m.jsx(_o,{className:"h-4 w-4 mr-2"}),"Add Whiteboard"]})]})]})}):m.jsxs("div",{className:"text-muted-foreground",children:[m.jsx(Zo,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),m.jsx("p",{children:"No content matches your search criteria."})]})}):m.jsxs(m.Fragment,{children:[Oe.length>0&&m.jsxs(m.Fragment,{children:[m.jsxs("h2",{className:"text-xl font-light text-foreground mb-6 flex items-center gap-2",children:[m.jsx(ag,{className:"h-5 w-5 text-muted-foreground"}),"My Lists"]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Oe.map(gt=>m.jsx(HA,{list:gt,onUpdate:He,onDelete:et,existingCategories:pe,isCollapsed:ae(gt.id),onToggleCollapsed:()=>Ce(gt.id),addCategory:ge,updateCategory:te},gt.id))})]}),ze.length>0&&m.jsxs("div",{className:Oe.length>0?"mt-12":"",children:[m.jsxs("h2",{className:"text-xl font-light text-foreground mb-6 flex items-center gap-2",children:[m.jsx(lg,{className:"h-5 w-5 text-muted-foreground"}),"My Notes"]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ze.map(gt=>m.jsx(W$,{note:gt,onUpdate:async(Ct,pn)=>{await Qe(Ct,pn)},onDelete:async Ct=>{await Ye(Ct)},existingCategories:pe,isCollapsed:Re(gt.id),onToggleCollapsed:()=>ue(gt.id),updateCategory:te},gt.id))})]}),Ve.length>0&&m.jsxs("div",{className:Oe.length>0||ze.length>0?"mt-12":"",children:[m.jsxs("h2",{className:"text-xl font-light text-foreground mb-6 flex items-center gap-2",children:[m.jsx(Sh,{className:"h-5 w-5 text-muted-foreground"}),"My Whiteboards"]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Ve.map(gt=>m.jsx(dW,{whiteboard:gt,onUpdate:async(Ct,pn)=>await mt(Ct,pn),onDelete:async Ct=>await ce(Ct),existingCategories:pe,isCollapsed:Te(gt.id),onToggleCollapsed:()=>de(gt.id),updateCategory:te},gt.id))})]})]})]})};return m.jsxs(m.Fragment,{children:[m.jsx("style",{children:`
        ${C?"":`
          body { overflow: hidden !important; }
          html { overflow: hidden !important; }
        `}
        
        /* Hide scrollbar for horizontal category scrolling */
        .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
      `}),m.jsxs("div",{className:`w-full flex flex-col ${C?"min-h-screen":"h-[calc(100vh-4rem)] overflow-hidden"}`,children:[m.jsx(hn,{}),d?m.jsx("div",{className:"flex-1 flex items-center justify-center",children:m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mb-4"}),m.jsx("span",{className:"text-lg",style:{color:t==="dark"?"#ffffff":"#374151"},children:"Loading Canvas..."})]})}):r?m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[m.jsxs("div",{className:"text-destructive text-lg mb-4",children:[" ",r]}),m.jsx("button",{onClick:()=>window.location.reload(),className:"bg-primary text-primary-foreground px-4 py-2 rounded-md hover:bg-primary/90",children:"Retry"})]}):C?m.jsx("div",{className:"flex-1 overflow-y-auto",children:m.jsx(is,{})}):m.jsx("div",{className:"w-screen relative left-1/2 right-1/2 -ml-[50vw] -mr-[50vw] absolute inset-x-0",style:{top:0,bottom:0},children:m.jsx(qke,{existingCategories:pe,searchQuery:h,onOpenNewNoteModal:ke,notes:D,onNoteUpdate:Qe,onNoteDelete:Ye,whiteboards:K,onWhiteboardUpdate:mt,onWhiteboardDelete:ce,onOpenNewWhiteboardModal:Ie,addCategory:ge,updateCategory:te,onReady:Oe=>{Be.current||(Be.current=Oe,console.log("Canvas methods ready:",Oe))}})}),m.jsx(b5,{isOpen:x,onClose:()=>w(!1),onCreateList:st,existingCategories:ye}),m.jsx(Kke,{isOpen:y,onClose:()=>v(!1),onCreateNote:cn,existingCategories:ye}),R&&M&&m.jsx(Jke,{isOpen:R,onClose:()=>P(!1),onCreateNote:_e,initialPosition:M,existingCategories:ye}),j&&q&&m.jsx(Qke,{isOpen:j,onClose:()=>J(!1),onCreateWhiteboard:qe,initialPosition:q,existingCategories:ye}),z&&m.jsx(H6,{isOpen:z,onClose:()=>H(!1),onListCreated:De,existingCategories:ye,position:se()}),ut&&m.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,pointerEvents:"auto"},onClick:()=>Xe(!1),children:m.jsx(F6,{position:{x:0,y:0},absolutePosition:wt,onAddList:tt,onAddNote:ft,onAddWhiteboard:Tt,onClose:()=>Xe(!1),isFromButton:!0})})]})]})},tNe=new eie,nNe="761425672348-63ncpr61i8hv48l94ljju4uloahreohs.apps.googleusercontent.com",rNe=()=>{const{currentUser:t,loading:e}=ro();return e?m.jsx("div",{className:"flex items-center justify-center min-h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"})}):t?m.jsx(IE,{to:"/canvas",replace:!0}):m.jsx(IE,{to:"/home",replace:!0})},iNe=()=>{const t=pl(),[e,n]=b.useState(window.innerWidth>=768);b.useEffect(()=>{const s=()=>{n(window.innerWidth>=768)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),b.useEffect(()=>{if(typeof window<"u"&&"scrollRestoration"in history){const s=history.scrollRestoration;return history.scrollRestoration="manual",()=>{history.scrollRestoration=s}}},[]),b.useEffect(()=>{window.scrollTo(0,0)},[t.pathname]);const i=!(t.pathname==="/canvas")||!e;return m.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[m.jsx(zae,{}),m.jsx("main",{className:"flex-grow",children:m.jsxs(Jie,{children:[m.jsx(Go,{path:"/",element:m.jsx(rNe,{})}),m.jsx(Go,{path:"/home",element:m.jsx(epe,{})}),m.jsx(Go,{path:"/auth/callback",element:m.jsx(Ive,{})}),m.jsx(Go,{path:"/help/*",element:m.jsx(C1e,{})}),m.jsx(Go,{path:"/status",element:m.jsx(M1e,{})}),m.jsxs(Go,{element:m.jsx(T1e,{}),children:[m.jsx(Go,{path:"/lists",element:m.jsx(Pve,{})}),m.jsx(Go,{path:"/canvas",element:m.jsx(eNe,{})})]}),m.jsx(Go,{path:"*",element:m.jsx(Dve,{})})]})}),i&&m.jsx(jae,{})]})},sNe=()=>m.jsx(nie,{client:tNe,children:m.jsx(kre,{children:m.jsx(Cte,{attribute:"class",defaultTheme:"light",enableSystem:!1,themes:["light","dark"],children:m.jsx(use,{clientId:nNe,children:m.jsx(pse,{children:m.jsxs(mse,{children:[m.jsx(Ste,{}),m.jsx(rne,{}),m.jsx(ise,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:m.jsx(iNe,{})})]})})})})})});xU(document.getElementById("root")).render(m.jsx(sNe,{}));
